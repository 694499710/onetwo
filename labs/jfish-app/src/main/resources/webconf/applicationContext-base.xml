<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:jee="http://www.springframework.org/schema/jee"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
						http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
						http://www.springframework.org/schema/tx 
						http://www.springframework.org/schema/tx/spring-tx-3.1.xsd 
						http://www.springframework.org/schema/jee 
						http://www.springframework.org/schema/jee/spring-jee-3.1.xsd 
						http://www.springframework.org/schema/aop 
						http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
						http://www.springframework.org/schema/context 
						http://www.springframework.org/schema/context/spring-context-3.1.xsd
						http://www.springframework.org/schema/util
						http://www.springframework.org/schema/util/spring-util-3.1.xsd"
	default-lazy-init="true">
	
	<aop:aspectj-autoproxy/>
 
	<context:component-scan base-package="org.onetwo.common.web.filter,org.onetwo.common.web.s2.security">
	</context:component-scan>
 
	<beans profile="product">
		
		<jee:jndi-lookup id="dataSource" jndi-name="zjkv2DataSource">
		</jee:jndi-lookup>
		
		<tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true" />
		
		<bean id="transactionManager" class="org.springframework.transaction.jta.WebLogicJtaTransactionManager">
		</bean>
		
	</beans>

	<beans profile="test">
							 
		<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
			<property name="driverClass">
				<value>${jdbc.driverClass}</value>
			</property>
			<property name="jdbcUrl">
				<value>${jdbc.url}</value>
			</property>
			<property name="user">
				<value>${jdbc.username}</value>
			</property>
			<property name="password">
				<value>${jdbc.password}</value>
			</property>
			<property name="minPoolSize">
				<value>${jdbc.minPoolSize}</value>
			</property>
			<property name="maxPoolSize">
				<value>${jdbc.maxPoolSize}</value>
			</property>
			<property name="initialPoolSize">
				<value>${jdbc.initialPoolSize}</value>
			</property>
			<property name="maxIdleTime">
				<value>${jdbc.maxIdleTime}</value>
			</property>
			<property name="acquireIncrement">
				<value>${jdbc.acquireIncrement}</value>
			</property>
		</bean>
		
		<tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/>
		
		<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
		   <property name="dataSource">
		    <ref bean="dataSource" />
		   </property>
		</bean>
	</beans>


	<beans profile="test-local">
							 
		<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
			<property name="driverClass">
				<value>${jdbc.driverClass}</value>
			</property>
			<property name="jdbcUrl">
				<value>${jdbc.url}</value>
			</property>
			<property name="user">
				<value>${jdbc.username}</value>
			</property>
			<property name="password">
				<value>${jdbc.password}</value>
			</property>
			<property name="minPoolSize">
				<value>${jdbc.minPoolSize}</value>
			</property>
			<property name="maxPoolSize">
				<value>${jdbc.maxPoolSize}</value>
			</property>
			<property name="initialPoolSize">
				<value>${jdbc.initialPoolSize}</value>
			</property>
			<property name="maxIdleTime">
				<value>${jdbc.maxIdleTime}</value>
			</property>
			<property name="acquireIncrement">
				<value>${jdbc.acquireIncrement}</value>
			</property>
		</bean>
		
		<tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/>
		
		<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
		   <property name="dataSource">
		    <ref bean="dataSource" />
		   </property>
		</bean>
	</beans>
	
	<beans profile="dev">
							
		<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
			<property name="driverClass">
				<value>${jdbc.driverClass}</value>
			</property>
			<property name="jdbcUrl">
				<value>${jdbc.url}</value>
			</property>
			<property name="user">
				<value>${jdbc.username}</value>
			</property>
			<property name="password">
				<value>${jdbc.password}</value>
			</property>
			<property name="minPoolSize">
				<value>${jdbc.minPoolSize}</value>
			</property>
			<property name="maxPoolSize">
				<value>${jdbc.maxPoolSize}</value>
			</property>
			<property name="initialPoolSize">
				<value>${jdbc.initialPoolSize}</value>
			</property>
			<property name="maxIdleTime">
				<value>${jdbc.maxIdleTime}</value>
			</property>
			<property name="acquireIncrement">
				<value>${jdbc.acquireIncrement}</value>
			</property>
		</bean>
		
		<tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/>
		
		<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
		   <property name="dataSource">
		    <ref bean="dataSource" />
		   </property>
		</bean>
	</beans>
	
</beans>