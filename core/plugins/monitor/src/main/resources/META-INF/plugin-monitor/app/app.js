function _log(a){if(_canLog){var b=Array.prototype.slice.apply(arguments,[1]),c=new Date,d=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds()+"."+c.getMilliseconds();b[0]=d+" - "+b[0];try{switch(a){case"info":window.console.info.apply(window.console,b);break;case"warn":window.console.warn.apply(window.console,b);break;default:window.console.log.apply(window.console,b)}}catch(e){window.console||(_canLog=!1)}}}function logMsg(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}function KeyTable(a){function b(a){return function(b,c,e){if(null!==b&&"number"!=typeof b||null!==c&&"number"!=typeof c||"function"!=typeof e)if("object"==typeof b&&"function"==typeof c){var f=o(b);d(a,f[0],f[1],c)}else alert("Unhandable event type was added: x"+b+"  y:"+c+"  z:"+e);else d(a,b,c,e)}}function c(a){return function(b,c,d){if(null!==b&&"number"!=typeof arguments[0]||null!==c&&"number"!=typeof arguments[1])if("object"==typeof arguments[0]){var f=o(b);"function"==typeof arguments[1]?e(a,f[0],f[1],c):e(a,f[0],f[1])}else alert("Unhandable event type was removed: x"+b+"  y:"+c+"  z:"+d);else"function"==typeof arguments[2]?e(a,b,c,d):e(a,b,c)}}function d(a,b,c,d){D[a].push({x:b,y:c,fn:d})}function e(a,b,c,d){for(var e=0,f=0,g=D[a].length;g-e>f;f++)if("undefined"!=typeof d)D[a][f-e].x==b&&D[a][f-e].y==c&&D[a][f-e].fn==d&&(D[a].splice(f-e,1),e++);else if(D[a][f-e].x==b&&D[a][f-e].y==c)return D[a].splice(f,1),1;return e}function f(a,b,c){for(var d=0,e=D[a],f=0;f<e.length;f++)(e[f].x==b&&e[f].y==c||null===e[f].x&&e[f].y==c||e[f].x==b&&null===e[f].y||null===e[f].x&&null===e[f].y)&&(e[f].fn(n(b,c),b,c),d++);return d}function g(a,b){if(x!=a){"undefined"==typeof b&&(b=!0),null!==x&&i(x),jQuery(a).addClass(B),jQuery(a).parent().addClass(B);var c;if(E){c=E.fnSettings();var d=s(a);if(null===d)return;for(var e=d[1],g=C;e>=c.fnDisplayEnd();)c._iDisplayLength>=0?c._iDisplayStart+c._iDisplayLength<c.fnRecordsDisplay()&&(c._iDisplayStart+=c._iDisplayLength):c._iDisplayStart=0,E.oApi._fnCalculateEnd(c);for(;e<c._iDisplayStart;)c._iDisplayStart=c._iDisplayLength>=0?c._iDisplayStart-c._iDisplayLength:0,c._iDisplayStart<0&&(c._iDisplayStart=0),E.oApi._fnCalculateEnd(c);E.oApi._fnDraw(c),C=g}var h=o(a);x=a,y=h[0],z=h[1];var j,k,m,n,t,u,v;if(b&&(j=document.documentElement.clientHeight,k=document.documentElement.clientWidth,m=document.body.scrollTop||document.documentElement.scrollTop,n=document.body.scrollLeft||document.documentElement.scrollLeft,t=a.offsetHeight,u=a.offsetWidth,v=r(a),!E||"undefined"==typeof c.oScroll||""===c.oScroll.sX&&""===c.oScroll.sY||(v[1]-=$(c.nTable.parentNode).scrollTop(),v[0]-=$(c.nTable.parentNode).scrollLeft()),v[1]+t>m+j?p(v[1]+t-j):v[1]<m&&p(v[1]),v[0]+u>n+k?q(v[0]+u-k):v[0]<n&&q(v[0])),E&&"undefined"!=typeof c.oScroll&&(""!==c.oScroll.sX||""!==c.oScroll.sY)){var w=c.nTable.parentNode;j=w.clientHeight,k=w.clientWidth,m=w.scrollTop,n=w.scrollLeft,t=a.offsetHeight,u=a.offsetWidth,a.offsetTop+t>j+m?w.scrollTop=a.offsetTop+t-j:a.offsetTop<m&&(w.scrollTop=a.offsetTop),a.offsetLeft+u>k+n?w.scrollLeft=a.offsetLeft+u-k:a.offsetLeft<n&&(w.scrollLeft=a.offsetLeft)}l(),f("focus",y,z)}}function h(){i(x),y=null,z=null,x=null,m()}function i(a){jQuery(a).removeClass(B),jQuery(a).parent().removeClass(B),f("blur",y,z)}function j(){for(var a=this;"TD"!=a.nodeName;)a=a.parentNode;g(a),l()}function k(a){if(A.block||!C)return!0;if(a.metaKey||a.altKey||a.ctrlKey)return!0;var b,c,d,e=w.getElementsByTagName("tr")[0].getElementsByTagName("td").length;if(E){var i=E.fnSettings();d=i.aiDisplay.length;var j=s(x);if(null===j)return;y=j[0],z=j[1]}else d=w.getElementsByTagName("tr").length;var k=9==a.keyCode&&a.shiftKey?-1:a.keyCode;switch(k){case 13:return a.preventDefault(),a.stopPropagation(),f("action",y,z),!0;case 27:if(!f("esc",y,z))return void h();b=y,c=z;break;case-1:case 37:if(y>0)b=y-1,c=z;else{if(!(z>0))return-1==k&&u?(F=!0,v.focus(),setTimeout(function(){F=!1},0),C=!1,h(),!0):!1;b=e-1,c=z-1}break;case 38:if(!(z>0))return!1;b=y,c=z-1;break;case 9:case 39:if(e-1>y)b=y+1,c=z;else{if(!(d-1>z))return 9==k&&u?(F=!0,v.focus(),setTimeout(function(){F=!1},0),C=!1,h(),!0):!1;b=0,c=z+1}break;case 40:if(!(d-1>z))return!1;b=y,c=z+1;break;default:return!0}return g(n(b,c)),!1}function l(){C||(C=!0)}function m(){C=!1}function n(a,b){if(E){var c=E.fnSettings();return"undefined"!=typeof c.aoData[c.aiDisplay[b]]?c.aoData[c.aiDisplay[b]].nTr.getElementsByTagName("td")[a]:null}return jQuery("tr:eq("+b+")>td:eq("+a+")",w)[0]}function o(a){if(E){var b=E.fnSettings();return[jQuery("td",a.parentNode).index(a),jQuery("tr",a.parentNode.parentNode).index(a.parentNode)+b._iDisplayStart]}return[jQuery("td",a.parentNode).index(a),jQuery("tr",a.parentNode.parentNode).index(a.parentNode)]}function p(a){document.documentElement.scrollTop=a,document.body.scrollTop=a}function q(a){document.documentElement.scrollLeft=a,document.body.scrollLeft=a}function r(a){var b=0,c=0;if(a.offsetParent)for(b=a.offsetLeft,c=a.offsetTop,a=a.offsetParent;a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return[b,c]}function s(a){for(var b=E.fnSettings(),c=0,d=b.aiDisplay.length;d>c;c++)for(var e=b.aoData[b.aiDisplay[c]].nTr,f=e.getElementsByTagName("td"),g=0,h=f.length;h>g;g++)if(f[g]==a)return[g,c];return null}function t(a,b){if(A=b,"undefined"==typeof a&&(a={}),"undefined"==typeof a.focus&&(a.focus=[0,0]),"undefined"==typeof a.table?a.table=jQuery("table.KeyTable")[0]:$(a.table).addClass("KeyTable"),"undefined"!=typeof a.focusClass&&(B=a.focusClass),"undefined"!=typeof a.datatable&&(E=a.datatable),"undefined"==typeof a.initScroll&&(a.initScroll=!0),"undefined"==typeof a.form&&(a.form=!1),u=a.form,w=a.table.getElementsByTagName("tbody")[0],u){var c=document.createElement("div");v=document.createElement("input"),c.style.height="1px",c.style.width="0px",c.style.overflow="hidden","undefined"!=typeof a.tabIndex&&(v.tabIndex=a.tabIndex),c.appendChild(v),a.table.parentNode.insertBefore(c,a.table.nextSibling),jQuery(v).focus(function(){F||(C=!0,F=!1,"undefined"!=typeof a.focus.nodeName?g(a.focus,a.initScroll):g(n(a.focus[0],a.focus[1]),a.initScroll),setTimeout(function(){v.blur()},0))}),C=!1}else"undefined"!=typeof a.focus.nodeName?g(a.focus,a.initScroll):g(n(a.focus[0],a.focus[1]),a.initScroll),l();jQuery.browser.mozilla||jQuery.browser.opera?jQuery(document).bind("keypress",k):jQuery(document).bind("keydown",k),E?jQuery("tbody td",E.fnSettings().nTable).live("click",j):jQuery("td",w).live("click",j),jQuery(document).click(function(b){for(var c=b.target,d=!1;c;){if(c==a.table){d=!0;break}c=c.parentNode}d||h()})}this.block=!1,this.event={remove:{}},this.fnGetCurrentPosition=function(){return[y,z]},this.fnGetCurrentData=function(){return x.innerHTML},this.fnGetCurrentTD=function(){return x},this.fnSetPosition=function(a,b){g("object"==typeof a&&a.nodeName?a:n(a,b))};var u,v,w=null,x=null,y=null,z=null,A=null,B="focus",C=!1,D={action:[],esc:[],focus:[],blur:[]},E=null,F=!1;for(var G in D)G&&(this.event[G]=b(G),this.event.remove[G]=c(G));t(a,this)}function dmr_js(){function ob(){var a=!1;try{var b=cb.location.search;return(-1!=b.indexOf(L)||-1!=b.indexOf(M)||cb.external&&cb.external.gwtOnLoad)&&-1==b.indexOf(N)}catch(c){}return ob=function(){return a},a}function pb(){eb&&fb&&eb(mb,I,gb,lb)}function qb(){function a(a){var b=a.lastIndexOf(o);-1==b&&(b=a.length);var c=a.indexOf(y);-1==c&&(c=a.length);var d=a.lastIndexOf(p,Math.min(c,b));return d>=0?a.substring(0,d+1):k}var b,c,d=E;for(db.write(w+d+n),c=db.getElementById(d),b=c&&c.previousSibling;b&&b.tagName!=C;)b=b.previousSibling;if(b&&b.src&&(gb=a(b.src)),gb==k){var e=db.getElementsByTagName(F);gb=e.length>0?e[e.length-1].href:a(db.location.href)}else if(gb.match(/^\w+:\/\//));else{var f=db.createElement(V);f.src=gb+G,gb=a(f.src)}c&&c.parentNode.removeChild(c)}function rb(){for(var b=document.getElementsByTagName(W),c=0,d=b.length;d>c;++c){var e=b[c],f=e.getAttribute(Y),g;if(f)if(f==Q){if(g=e.getAttribute(H)){var h,i=g.indexOf(x);i>=0?(f=g.substring(0,i),h=g.substring(i+1)):(f=g,h=k),hb[f]=h}}else if(f==P){if(g=e.getAttribute(H))try{nb=eval(g)}catch(a){alert(A+g+m)}}else if(f==O&&(g=e.getAttribute(H)))try{mb=eval(g)}catch(a){alert(A+g+l)}}}function sb(a,b){for(var c=kb,d=0,e=a.length-1;e>d;++d)c=c[a[d]]||(c[a[d]]=[]);c[a[e]]=b}function tb(a){var b=jb[a](),c=ib[a];if(b in c)return b;var d=[];for(var e in c)d[c[e]]=e;throw nb&&nb(a,d,b),null}function xb(){fb||(fb=!0,pb(),db.removeEventListener&&db.removeEventListener(B,xb,!1),wb&&clearInterval(wb))}var yb="",zb='" for "gwt:onLoadErrorFn"',Ab='" for "gwt:onPropertyErrorFn"',Bb='"></script>',Cb="#",Db="/",Eb=":",Fb=":1",Gb=":2",Hb=":3",Ib=":4",Jb=":5",Kb='<script id="',Lb="=",Mb="?",Nb="BD3C858A7B7FD66E09CD776C958780B6",Ob='Bad handler "',Pb="DOMContentLoaded",Qb="SCRIPT",Rb="Single-script hosted mode not yet implemented. See issue ",Sb="__gwt_marker_dmr.js",Tb="base",Ub="clear.cache.gif",Vb="content",Wb="dmr.js",Xb="gecko",Yb="gecko1_8",Zb="gwt.codesvr=",$b="gwt.hosted=",_b="gwt.hybrid",ac="gwt:onLoadErrorFn",bc="gwt:onPropertyErrorFn",cc="gwt:property",dc="http://code.google.com/p/google-web-toolkit/issues/detail?id=2079",ec="ie6",fc="ie8",gc="ie9",hc="img",ic="meta",jc="msie",kc="name",lc="opera",mc="safari",nc="unknown",oc="user.agent",pc="webkit",k=yb,l=zb,m=Ab,n=Bb,o=Cb,p=Db,q=Eb,r=Fb,s=Gb,t=Hb,u=Ib,v=Jb,w=Kb,x=Lb,y=Mb,z=Nb,A=Ob,B=Pb,C=Qb,D=Rb,E=Sb,F=Tb,G=Ub,H=Vb,I=Wb,J=Xb,K=Yb,L=Zb,M=$b,N=_b,O=ac,P=bc,Q=cc,R=dc,S=ec,T=fc,U=gc,V=hc,W=ic,X=jc,Y=kc,Z=lc,$=mc,_=nc,ab=oc,bb=pc,cb=window,db=document,eb,fb,gb=k,hb={},ib=[],jb=[],kb=[],lb=0,mb,nb;if(cb.__gwt_stylesLoaded||(cb.__gwt_stylesLoaded={}),cb.__gwt_scriptsLoaded||(cb.__gwt_scriptsLoaded={}),jb[ab]=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(Z)}()?Z:function(){return-1!=a.indexOf(bb)}()?$:function(){return-1!=a.indexOf(X)&&db.documentMode>=9}()?U:function(){return-1!=a.indexOf(X)&&db.documentMode>=8}()?T:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);return c&&3==c.length?b(c)>=6e3:void 0}()?S:function(){return-1!=a.indexOf(J)}()?K:_},ib[ab]={gecko1_8:0,ie6:1,ie8:2,ie9:3,opera:4,safari:5},dmr_js.onScriptLoad=function(a){dmr_js=null,eb=a,pb()},ob())return void alert(D+R);qb(),rb();try{var ub;sb([K],z),sb([S],z+r),sb([T],z+s),sb([U],z+t),sb([Z],z+u),sb([$],z+v),ub=kb[tb(ab)];var vb=ub.indexOf(q);-1!=vb&&(lb=Number(ub.substring(vb+1)))}catch(a){return}var wb;db.addEventListener&&db.addEventListener(B,function(){xb()},!1);var wb=setInterval(function(){/loaded|complete/.test(db.readyState)&&xb()},50)}function lineCount(a){var b=0;return a&&(b=1,a.toString().each(/\n/,function(){return b++})),b}function safeNull(a){return"boolean"==typeof a?a:"number"==typeof a?a:a?a:""}function safeNullAsString(a,b){if("boolean"==typeof a)return""+a;if("number"==typeof a)return""+a;if("string"==typeof a)return""+a;if("javax.management.openmbean.CompositeData"===b||"[Ljavax.management.openmbean.CompositeData;"===b||"java.util.Map"===b){var c=angular.toJson(a,!0);return c}if("javax.management.ObjectName"===b)return""+(null==a?"":a.canonicalName);if("javax.management.openmbean.TabularData"===b){var d=[];for(var e in a){var f=a[e],g=""+e+"="+f;d.push(g)}return d=d.sortBy(function(a){return a.toString()}),d.join("\n")}return angular.isArray(a)?a.join("\n"):a?""+a:""}function toSearchArgumentArray(a){if(a){if(angular.isArray(a))return a;if(angular.isString(a))return a.split(",")}return[]}function folderMatchesPatterns(a,b){if(a){var c=a.folderNames;if(c)return b.any(function(a){for(var b=0;b<a.length;b++){var d=c[b],e=a[b];if(!d)return!1;var f=e.indexOf(d);if(0>f)return!1}return!0})}return!1}function scopeStoreJolokiaHandle(a,b,c){c&&(a.$on("$destroy",function(){closeHandle(a,b)}),a.jolokiaHandle=c)}function closeHandle(a,b){var c=a.jolokiaHandle;c&&(b.unregister(c),a.jolokiaHandle=null)}function onSuccess(a,b){return void 0===b&&(b={}),b.mimeType="application/json",angular.isDefined(a)&&(b.success=a),b.method||(b.method="POST"),b.canonicalNaming=!1,b.canonicalProperties=!1,b.error||(b.error=function(a){Core.defaultJolokiaErrorHandler(a,b)}),b}function supportsLocalStorage(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}function isNumberTypeName(a){if(a){var b=a.toString().toLowerCase(),c=numberTypeNames[b];return c}return!1}function encodeMBeanPath(a){return a.replace(/\//g,"!/").replace(":","/").escapeURL()}function escapeMBeanPath(a){return a.replace(/\//g,"!/").replace(":","/")}function encodeMBean(a){return a.replace(/\//g,"!/").escapeURL()}function escapeDots(a){return a.replace(/\./g,"-")}function escapeTreeCssStyles(a){return escapeDots(a).replace(/span/g,"sp-an")}function showLogPanel(){var a=$("#log-panel"),b=$("body");localStorage.showLog="true",a.css({bottom:"50%"}),b.css({"overflow-y":"hidden"})}function logLevelClass(a){if(a){var b=a[0];if("w"===b||"W"===b)return"warning";if("e"===b||"E"===b)return"error";if("i"===b||"I"===b)return"info";if("d"===b||"D"===b)return""}return""}if(function(a,b){function c(a){var b=ob[a]={};return $.each(a.split(bb),function(a,c){b[c]=!0}),b}function d(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(qb,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:pb.test(d)?$.parseJSON(d):d}catch(f){}$.data(a,c,d)}else d=b}return d}function e(a){var b;for(b in a)if(("data"!==b||!$.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function g(){return!0}function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function i(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function j(a,b,c){if(b=b||0,$.isFunction(b))return $.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return $.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=$.grep(a,function(a){return 1===a.nodeType});if(Kb.test(b))return $.filter(b,d,!c);b=$.filter(b,d)}return $.grep(a,function(a){return $.inArray(a,b)>=0===c})}function k(a){var b=Nb.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function l(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function m(a,b){if(1===b.nodeType&&$.hasData(a)){var c,d,e,f=$._data(a),g=$._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)$.event.add(b,c,h[c][d])}g.data&&(g.data=$.extend({},g.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),$.support.html5Clone&&a.innerHTML&&!$.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Xb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute($.expando))}function o(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function p(a){Xb.test(a.type)&&(a.defaultChecked=a.checked)}function q(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=rc.length;e--;)if(b=rc[e]+c,b in a)return b;return d}function r(a,b){return a=b||a,"none"===$.css(a,"display")||!$.contains(a.ownerDocument,a)}function s(a,b){for(var c,d,e=[],f=0,g=a.length;g>f;f++)c=a[f],c.style&&(e[f]=$._data(c,"olddisplay"),b?(e[f]||"none"!==c.style.display||(c.style.display=""),""===c.style.display&&r(c)&&(e[f]=$._data(c,"olddisplay",w(c.nodeName)))):(d=cc(c,"display"),e[f]||"none"===d||$._data(c,"olddisplay",d)));for(f=0;g>f;f++)c=a[f],c.style&&(b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none"));return a}function t(a,b,c){var d=kc.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function u(a,b,c,d){for(var e=c===(d?"border":"content")?4:"width"===b?1:0,f=0;4>e;e+=2)"margin"===c&&(f+=$.css(a,c+qc[e],!0)),d?("content"===c&&(f-=parseFloat(cc(a,"padding"+qc[e]))||0),"margin"!==c&&(f-=parseFloat(cc(a,"border"+qc[e]+"Width"))||0)):(f+=parseFloat(cc(a,"padding"+qc[e]))||0,"padding"!==c&&(f+=parseFloat(cc(a,"border"+qc[e]+"Width"))||0));return f}function v(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=$.support.boxSizing&&"border-box"===$.css(a,"boxSizing");if(0>=d||null==d){if(d=cc(a,b),(0>d||null==d)&&(d=a.style[b]),lc.test(d))return d;e=f&&($.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+u(a,b,c||(f?"border":"content"),e)+"px"}function w(a){if(nc[a])return nc[a];var b=$("<"+a+">").appendTo(P.body),c=b.css("display");return b.remove(),("none"===c||""===c)&&(dc=P.body.appendChild(dc||$.extend(P.createElement("iframe"),{frameBorder:0,width:0,height:0})),ec&&dc.createElement||(ec=(dc.contentWindow||dc.contentDocument).document,ec.write("<!doctype html><html><body>"),ec.close()),b=ec.body.appendChild(ec.createElement(a)),c=cc(b,"display"),P.body.removeChild(dc)),nc[a]=c,c}function x(a,b,c,d){var e;if($.isArray(b))$.each(b,function(b,e){c||uc.test(a)?d(a,e):x(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==$.type(b))d(a,b);else for(e in b)x(a+"["+e+"]",b[e],c,d)}function y(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(bb),h=0,i=g.length;if($.isFunction(c))for(;i>h;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function z(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===Kc;k>j&&(l||!h);j++)h=i[j](c,d,e),"string"==typeof h&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=z(a,c,d,e,h,g)));return!l&&h||g["*"]||(h=z(a,c,d,e,"*",g)),h}function A(a,c){var d,e,f=$.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&$.extend(!0,a,e)}function B(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function C(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if("*"!==e){if("*"!==h&&h!==e){if(c=i[h+" "+e]||i["* "+e],!c)for(d in i)if(f=d.split(" "),f[1]===e&&(c=i[h+" "+f[0]]||i["* "+f[0]])){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function D(){try{return new a.XMLHttpRequest}catch(b){}}function E(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function F(){return setTimeout(function(){Vc=b},0),Vc=$.now()}function G(a,b){$.each(b,function(b,c){for(var d=(_c[b]||[]).concat(_c["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function H(a,b,c){var d,e=0,f=$c.length,g=$.Deferred().always(function(){delete h.elem}),h=function(){for(var b=Vc||F(),c=Math.max(0,i.startTime+i.duration-b),d=1-(c/i.duration||0),e=0,f=i.tweens.length;f>e;e++)i.tweens[e].run(d);return g.notifyWith(a,[i,d,c]),1>d&&f?c:(g.resolveWith(a,[i]),!1)},i=g.promise({elem:a,props:$.extend({},b),opts:$.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Vc||F(),duration:c.duration,tweens:[],createTween:function(b,c){var d=$.Tween(a,i.opts,b,c,i.opts.specialEasing[b]||i.opts.easing);return i.tweens.push(d),d},stop:function(b){for(var c=0,d=b?i.tweens.length:0;d>c;c++)i.tweens[c].run(1);return b?g.resolveWith(a,[i,b]):g.rejectWith(a,[i,b]),this}}),j=i.props;for(I(j,i.opts.specialEasing);f>e;e++)if(d=$c[e].call(i,a,j,i.opts))return d;return G(i,j),$.isFunction(i.opts.start)&&i.opts.start.call(a,i),$.fx.timer($.extend(h,{anim:i,queue:i.opts.queue,elem:a})),i.progress(i.opts.progress).done(i.opts.done,i.opts.complete).fail(i.opts.fail).always(i.opts.always)}function I(a,b){var c,d,e,f,g;for(c in a)if(d=$.camelCase(c),e=b[d],f=a[c],$.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=$.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function J(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],p=a.nodeType&&r(a);c.queue||(j=$._queueHooks(a,"fx"),null==j.unqueued&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,$.queue(a,"fx").length||j.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],"inline"===$.css(a,"display")&&"none"===$.css(a,"float")&&($.support.inlineBlockNeedsLayout&&"inline"!==w(a.nodeName)?m.zoom=1:m.display="inline-block")),c.overflow&&(m.overflow="hidden",$.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(f=b[d],Xc.exec(f)){if(delete b[d],f===(p?"hide":"show"))continue;o.push(d)}if(g=o.length)for(h=$._data(a,"fxshow")||$._data(a,"fxshow",{}),p?$(a).show():l.done(function(){$(a).hide()}),l.done(function(){var b;$.removeData(a,"fxshow",!0);for(b in n)$.style(a,b,n[b])}),d=0;g>d;d++)e=o[d],i=l.createTween(e,p?h[e]:0),n[e]=h[e]||$.style(a,e),e in h||(h[e]=i.start,p&&(i.end=i.start,i.start="width"===e||"height"===e?1:0))}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function L(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=qc[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function M(a){return $.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var N,O,P=a.document,Q=a.location,R=a.navigator,S=a.jQuery,T=a.$,U=Array.prototype.push,V=Array.prototype.slice,W=Array.prototype.indexOf,X=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,Z=String.prototype.trim,$=function(a,b){return new $.fn.init(a,b,N)},_=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ab=/\S/,bb=/\s+/,cb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,db=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,eb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fb=/^[\],:{}\s]*$/,gb=/(?:^|:|,)(?:\s*\[)+/g,hb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ib=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,jb=/^-ms-/,kb=/-([\da-z])/gi,lb=function(a,b){return(b+"").toUpperCase()},mb=function(){P.addEventListener?(P.removeEventListener("DOMContentLoaded",mb,!1),$.ready()):"complete"===P.readyState&&(P.detachEvent("onreadystatechange",mb),$.ready())},nb={};$.fn=$.prototype={constructor:$,init:function(a,c,d){var e,f,g;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:db.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return c=c instanceof $?c[0]:c,g=c&&c.nodeType?c.ownerDocument||c:P,a=$.parseHTML(e[1],g,!0),eb.test(e[1])&&$.isPlainObject(c)&&this.attr.call(a,c,!0),$.merge(this,a);if(f=P.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=P,this.selector=a,this}return $.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),$.makeArray(a,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return V.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=$.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return $.each(this,a,b)},ready:function(a){return $.ready.promise().done(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(V.apply(this,arguments),"slice",V.call(arguments).join(","))},map:function(a){return this.pushStack($.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:[].sort,splice:[].splice},$.fn.init.prototype=$.fn,$.extend=$.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||$.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(k&&e&&($.isPlainObject(e)||(f=$.isArray(e)))?(f?(f=!1,g=d&&$.isArray(d)?d:[]):g=d&&$.isPlainObject(d)?d:{},h[c]=$.extend(k,g,e)):e!==b&&(h[c]=e));return h},$.extend({noConflict:function(b){return a.$===$&&(a.$=T),b&&a.jQuery===$&&(a.jQuery=S),$},isReady:!1,readyWait:1,holdReady:function(a){a?$.readyWait++:$.ready(!0)},ready:function(a){if(a===!0?!--$.readyWait:!$.isReady){if(!P.body)return setTimeout($.ready,1);$.isReady=!0,a!==!0&&--$.readyWait>0||(O.resolveWith(P,[$]),$.fn.trigger&&$(P).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===$.type(a)},isArray:Array.isArray||function(a){return"array"===$.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):nb[X.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==$.type(a)||a.nodeType||$.isWindow(a))return!1;try{if(a.constructor&&!Y.call(a,"constructor")&&!Y.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||Y.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return a&&"string"==typeof a?("boolean"==typeof b&&(c=b,b=0),b=b||P,(d=eb.exec(a))?[b.createElement(d[1])]:(d=$.buildFragment([a],b,c?null:[]),$.merge([],(d.cacheable?$.clone(d.fragment):d.fragment).childNodes))):null},parseJSON:function(b){return b&&"string"==typeof b?(b=$.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):fb.test(b.replace(hb,"@").replace(ib,"]").replace(gb,""))?new Function("return "+b)():void $.error("Invalid JSON: "+b)):null},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||$.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ab.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(jb,"ms-").replace(kb,lb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||$.isFunction(a);if(d)if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;g>f&&c.apply(a[f++],d)!==!1;);else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;g>f&&c.call(a[f],f,a[f++])!==!1;);return a},trim:Z&&!Z.call("﻿ ")?function(a){return null==a?"":Z.call(a)}:function(a){return null==a?"":(a+"").replace(cb,"")},makeArray:function(a,b){var c,d=b||[];return null!=a&&(c=$.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||$.isWindow(a)?U.call(d,a):$.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(W)return W.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof $||i!==b&&"number"==typeof i&&(i>0&&a[0]&&a[i-1]||0===i||$.isArray(a));if(j)for(;i>h;h++)e=c(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),$.isFunction(a)?(e=V.call(arguments,2),f=function(){return a.apply(c,e.concat(V.call(arguments)))},f.guid=a.guid=a.guid||$.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=null==d,k=0,l=a.length;if(d&&"object"==typeof d){for(k in d)$.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){if(i=h===b&&$.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call($(a),c)}):(c.call(a,e),c=null)),c)for(;l>k;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),$.ready.promise=function(b){if(!O)if(O=$.Deferred(),"complete"===P.readyState)setTimeout($.ready,1);else if(P.addEventListener)P.addEventListener("DOMContentLoaded",mb,!1),a.addEventListener("load",$.ready,!1);else{P.attachEvent("onreadystatechange",mb),a.attachEvent("onload",$.ready);var c=!1;try{c=null==a.frameElement&&P.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!$.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}$.ready()}}()}return O.promise(b)},$.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){nb["[object "+b+"]"]=b.toLowerCase()}),N=$(P);var ob={};$.Callbacks=function(a){a="string"==typeof a?ob[a]||c(a):$.extend({},a);var d,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(d=a.memory&&b,e=!0,i=g||0,g=0,h=j.length,f=!0;j&&h>i;i++)if(j[i].apply(b[0],b[1])===!1&&a.stopOnFalse){d=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):d?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function c(b){$.each(b,function(b,d){var e=$.type(d);"function"!==e||a.unique&&m.has(d)?d&&d.length&&"string"!==e&&c(d):j.push(d)})}(arguments),f?h=j.length:d&&(g=b,l(d))}return this},remove:function(){return j&&$.each(arguments,function(a,b){for(var c;(c=$.inArray(b,j,c))>-1;)j.splice(c,1),f&&(h>=c&&h--,i>=c&&i--)}),this},has:function(a){return $.inArray(a,j)>-1},empty:function(){return j=[],this},disable:function(){return j=k=d=b,this},disabled:function(){return!j},lock:function(){return k=b,d||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||e&&!k||(f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!e}};return m},$.extend({Deferred:function(a){var b=[["resolve","done",$.Callbacks("once memory"),"resolved"],["reject","fail",$.Callbacks("once memory"),"rejected"],["notify","progress",$.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return $.Deferred(function(c){$.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]]($.isFunction(g)?function(){var a=g.apply(this,arguments);a&&$.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return null!=a?$.extend(a,d):d}},e={};return d.pipe=d.then,$.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=V.call(arguments),g=f.length,h=1!==g||a&&$.isFunction(a.promise)?g:0,i=1===h?a:$.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?V.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&$.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;
return h||i.resolveWith(d,f),i.promise()}}),$.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m=P.createElement("div");if(m.setAttribute("className","t"),m.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=m.getElementsByTagName("*"),d=m.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5",!c||!c.length)return{};e=P.createElement("select"),f=e.appendChild(P.createElement("option")),g=m.getElementsByTagName("input")[0],b={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===g.value,optSelected:f.selected,getSetAttribute:"t"!==m.className,enctype:!!P.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==P.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===P.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete m.test}catch(n){b.deleteExpando=!1}if(!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",l=function(){b.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"),m.detachEvent("onclick",l)),g=P.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue="t"===g.value,g.setAttribute("checked","checked"),g.setAttribute("name","t"),m.appendChild(g),h=P.createDocumentFragment(),h.appendChild(m.lastChild),b.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,h.removeChild(g),h.appendChild(m),m.attachEvent)for(j in{submit:!0,change:!0,focusin:!0})i="on"+j,k=i in m,k||(m.setAttribute(i,"return;"),k="function"==typeof m[i]),b[j+"Bubbles"]=k;return $(function(){var c,d,e,f,g="padding:0;margin:0;border:0;display:block;overflow:hidden;",h=P.getElementsByTagName("body")[0];h&&(c=P.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(c,h.firstChild),d=P.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",k=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=k&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==h.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,f=P.createElement("div"),f.style.cssText=d.style.cssText=g,f.style.marginRight=f.style.width="0",d.style.width="1px",d.appendChild(f),b.reliableMarginRight=!parseFloat((a.getComputedStyle(f,null)||{}).marginRight)),"undefined"!=typeof d.style.zoom&&(d.innerHTML="",d.style.cssText=g+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),h.removeChild(c),c=d=e=f=null)}),h.removeChild(m),c=d=e=f=g=h=m=null,b}();var pb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,qb=/([A-Z])/g;$.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+($.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?$.cache[a[$.expando]]:a[$.expando],!!a&&!e(a)},data:function(a,c,d,e){if($.acceptData(a)){var f,g,h=$.expando,i="string"==typeof c,j=a.nodeType,k=j?$.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=$.deletedIds.pop()||$.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=$.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=$.extend(k[l],c):k[l].data=$.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[$.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[$.camelCase(c)])):g=f,g}},removeData:function(a,b,c){if($.acceptData(a)){var d,f,g,h=a.nodeType,i=h?$.cache:a,j=h?a[$.expando]:$.expando;if(i[j]){if(b&&(d=c?i[j]:i[j].data)){$.isArray(b)||(b in d?b=[b]:(b=$.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;g>f;f++)delete d[b[f]];if(!(c?e:$.isEmptyObject)(d))return}(c||(delete i[j].data,e(i[j])))&&(h?$.cleanData([a],!0):$.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}},_data:function(a,b,c){return $.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&$.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),$.fn.extend({data:function(a,c){var e,f,g,h,i,j=this[0],k=0,l=null;if(a===b){if(this.length&&(l=$.data(j),1===j.nodeType&&!$._data(j,"parsedAttrs"))){for(g=j.attributes,i=g.length;i>k;k++)h=g[k].name,h.indexOf("data-")||(h=$.camelCase(h.substring(5)),d(j,h,l[h]));$._data(j,"parsedAttrs",!0)}return l}return"object"==typeof a?this.each(function(){$.data(this,a)}):(e=a.split(".",2),e[1]=e[1]?"."+e[1]:"",f=e[1]+"!",$.access(this,function(c){return c===b?(l=this.triggerHandler("getData"+f,[e[0]]),l===b&&j&&(l=$.data(j,a),l=d(j,a,l)),l===b&&e[1]?this.data(e[0]):l):(e[1]=c,void this.each(function(){var b=$(this);b.triggerHandler("setData"+f,e),$.data(this,a,c),b.triggerHandler("changeData"+f,e)}))},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){$.removeData(this,a)})}}),$.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=$._data(a,b),c&&(!d||$.isArray(c)?d=$._data(a,b,$.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=$.queue(a,b),d=c.length,e=c.shift(),f=$._queueHooks(a,b),g=function(){$.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return $._data(a,c)||$._data(a,c,{empty:$.Callbacks("once memory").add(function(){$.removeData(a,b+"queue",!0),$.removeData(a,c,!0)})})}}),$.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?$.queue(this[0],a):c===b?this:this.each(function(){var b=$.queue(this,a,c);$._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&$.dequeue(this,a)})},dequeue:function(a){return this.each(function(){$.dequeue(this,a)})},delay:function(a,b){return a=$.fx?$.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=$.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=$._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var rb,sb,tb,ub=/[\t\r\n]/g,vb=/\r/g,wb=/^(?:button|input)$/i,xb=/^(?:button|input|object|select|textarea)$/i,yb=/^a(?:rea|)$/i,zb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ab=$.support.getSetAttribute;$.fn.extend({attr:function(a,b){return $.access(this,$.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){$.removeAttr(this,a)})},prop:function(a,b){return $.access(this,$.prop,a,b,arguments.length>1)},removeProp:function(a){return a=$.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if($.isFunction(a))return this.each(function(b){$(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(bb),c=0,d=this.length;d>c;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;h>g;g++)f.indexOf(" "+b[g]+" ")<0&&(f+=b[g]+" ");e.className=$.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if($.isFunction(a))return this.each(function(b){$(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(bb),h=0,i=this.length;i>h;h++)if(e=this[h],1===e.nodeType&&e.className){for(d=(" "+e.className+" ").replace(ub," "),f=0,g=c.length;g>f;f++)for(;d.indexOf(" "+c[f]+" ")>=0;)d=d.replace(" "+c[f]+" "," ");e.className=a?$.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return this.each($.isFunction(a)?function(c){$(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var e,f=0,g=$(this),h=b,i=a.split(bb);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else("undefined"===c||"boolean"===c)&&(this.className&&$._data(this,"__className__",this.className),this.className=this.className||a===!1?"":$._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ub," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=$.isFunction(a),this.each(function(d){var f,g=$(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":$.isArray(f)&&(f=$.map(f,function(a){return null==a?"":a+""})),c=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=$.valHooks[f.type]||$.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(vb,""):null==d?"":d)}}}),$.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i="select-one"===a.type;if(0>f)return null;for(c=i?f:0,d=i?f+1:h.length;d>c;c++)if(e=h[c],!(!e.selected||($.support.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&$.nodeName(e.parentNode,"optgroup"))){if(b=$(e).val(),i)return b;g.push(b)}return i&&!g.length&&h.length?$(h[f]).val():g},set:function(a,b){var c=$.makeArray(b);return $(a).find("option").each(function(){this.selected=$.inArray($(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&$.isFunction($.fn[c])?$(a)[c](d):"undefined"==typeof a.getAttribute?$.prop(a,c,d):(h=1!==i||!$.isXMLDoc(a),h&&(c=c.toLowerCase(),g=$.attrHooks[c]||(zb.test(c)?sb:rb)),d!==b?null===d?void $.removeAttr(a,c):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(bb);g<d.length;g++)e=d[g],e&&(c=$.propFix[e]||e,f=zb.test(e),f||$.attr(a,e,""),a.removeAttribute(Ab?e:c),f&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(wb.test(a.nodeName)&&a.parentNode)$.error("type property can't be changed");else if(!$.support.radioValue&&"radio"===b&&$.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return rb&&$.nodeName(a,"button")?rb.get(a,b):b in a?a.value:null},set:function(a,b,c){return rb&&$.nodeName(a,"button")?rb.set(a,b,c):void(a.value=b)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!$.isXMLDoc(a),g&&(c=$.propFix[c]||c,f=$.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):xb.test(a.nodeName)||yb.test(a.nodeName)&&a.href?0:b}}}}),sb={get:function(a,c){var d,e=$.prop(a,c);return e===!0||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?$.removeAttr(a,c):(d=$.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},Ab||(tb={name:!0,id:!0,coords:!0},rb=$.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(tb[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=P.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},$.each(["width","height"],function(a,b){$.attrHooks[b]=$.extend($.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})}),$.attrHooks.contenteditable={get:rb.get,set:function(a,b,c){""===b&&(b="false"),rb.set(a,b,c)}}),$.support.hrefNormalized||$.each(["href","src","width","height"],function(a,c){$.attrHooks[c]=$.extend($.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),$.support.style||($.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}}),$.support.optSelected||($.propHooks.selected=$.extend($.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),$.support.enctype||($.propFix.enctype="encoding"),$.support.checkOn||$.each(["radio","checkbox"],function(){$.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]=$.extend($.valHooks[this],{set:function(a,b){return $.isArray(b)?a.checked=$.inArray($(a).val(),b)>=0:void 0}})});var Bb=/^(?:textarea|input|select)$/i,Cb=/^([^\.]*|)(?:\.(.+)|)$/,Db=/(?:^|\s)hover(\.\S+|)\b/,Eb=/^key/,Fb=/^(?:mouse|contextmenu)|click/,Gb=/^(?:focusinfocus|focusoutblur)$/,Hb=function(a){return $.event.special.hover?a:a.replace(Db,"mouseenter$1 mouseleave$1")};$.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=$._data(a))){for(d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=$.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return"undefined"==typeof $||a&&$.event.triggered===a.type?b:$.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=$.trim(Hb(c)).split(" "),j=0;j<c.length;j++)k=Cb.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=$.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=$.event.special[l]||{},n=$.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&$.expr.match.needsContext.test(f),namespace:m.join(".")},o),p=i[l],p||(p=i[l]=[],p.delegateCount=0,q.setup&&q.setup.call(a,e,m,h)!==!1||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),$.event.global[l]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=$.hasData(a)&&$._data(a);if(q&&(m=q.events)){for(b=$.trim(Hb(b||"")).split(" "),f=0;f<b.length;f++)if(g=Cb.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=$.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0;l<o.length;l++)p=o[l],!e&&i!==p.origType||c&&c.guid!==p.guid||j&&!j.test(p.namespace)||d&&d!==p.selector&&("**"!==d||!p.selector)||(o.splice(l--,1),p.selector&&o.delegateCount--,n.remove&&n.remove.call(a,p));0===o.length&&k!==o.length&&(n.teardown&&n.teardown.call(a,j,q.handle)!==!1||$.removeEvent(a,h,q.handle),delete m[h])}else for(h in m)$.event.remove(a,h+b[f],c,d,!0);$.isEmptyObject(m)&&(delete q.handle,$.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,i,j,k,l,m,n,o,p,q=c.type||c,r=[];if(!Gb.test(q+$.event.triggered)&&(q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),e&&!$.event.customEvent[q]||$.event.global[q]))if(c="object"==typeof c?c[$.expando]?c:new $.Event(q,c):new $.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?$.makeArray(d):[],d.unshift(c),m=$.event.special[q]||{},!m.trigger||m.trigger.apply(e,d)!==!1){if(o=[[e,m.bindType||q]],!f&&!m.noBubble&&!$.isWindow(e)){for(p=m.delegateType||q,j=Gb.test(p+q)?e:e.parentNode,k=e;j;j=j.parentNode)o.push([j,p]),k=j;k===(e.ownerDocument||P)&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=($._data(j,"events")||{})[c.type]&&$._data(j,"handle"),n&&n.apply(j,d),n=l&&j[l],n&&$.acceptData(j)&&n.apply&&n.apply(j,d)===!1&&c.preventDefault();return c.type=q,f||c.isDefaultPrevented()||m._default&&m._default.apply(e.ownerDocument,d)!==!1||"click"===q&&$.nodeName(e,"a")||!$.acceptData(e)||l&&e[q]&&("focus"!==q&&"blur"!==q||0!==c.target.offsetWidth)&&!$.isWindow(e)&&(k=e[l],k&&(e[l]=null),$.event.triggered=q,e[q](),$.event.triggered=b,k&&(e[l]=k)),c.result}}else{g=$.cache;for(i in g)g[i].events&&g[i].events[q]&&$.event.trigger(c,d,g[i].handle.elem,!0)}}},dispatch:function(c){c=$.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m=($._data(this,"events")||{})[c.type]||[],n=m.delegateCount,o=V.call(arguments),p=!c.exclusive&&!c.namespace,q=$.event.special[c.type]||{},r=[];if(o[0]=c,c.delegateTarget=this,!q.preDispatch||q.preDispatch.call(this,c)!==!1){if(n&&(!c.button||"click"!==c.type))for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==c.type){for(h={},j=[],d=0;n>d;d++)k=m[d],l=k.selector,h[l]===b&&(h[l]=k.needsContext?$(l,this).index(f)>=0:$.find(l,this,null,[f]).length),h[l]&&j.push(k);j.length&&r.push({elem:f,matches:j})}for(m.length>n&&r.push({elem:this,matches:m.slice(n)}),d=0;d<r.length&&!c.isPropagationStopped();d++)for(i=r[d],c.currentTarget=i.elem,e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++)k=i.matches[e],(p||!c.namespace&&!k.namespace||c.namespace_re&&c.namespace_re.test(k.namespace))&&(c.data=k.data,c.handleObj=k,g=(($.event.special[k.origType]||{}).handle||k.handler).apply(i.elem,o),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation())));return q.postDispatch&&q.postDispatch.call(this,c),c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||P,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[$.expando])return a;var b,c,d=a,e=$.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;for(a=$.Event(d),b=f.length;b;)c=f[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||P),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){$.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=$.extend(new $.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?$.event.trigger(e,null,b):$.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},$.event.handle=$.event.dispatch,$.removeEvent=P.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},$.Event=function(a,b){return this instanceof $.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?g:f):this.type=a,b&&$.extend(this,b),this.timeStamp=a&&a.timeStamp||$.now(),void(this[$.expando]=!0)):new $.Event(a,b)},$.Event.prototype={preventDefault:function(){this.isDefaultPrevented=g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g,this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f},$.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){$.event.special[a]={delegateType:b,bindType:b,handle:function(a){{var c,d=this,e=a.relatedTarget,f=a.handleObj;f.selector}return(!e||e!==d&&!$.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),$.support.submitBubbles||($.event.special.submit={setup:function(){return $.nodeName(this,"form")?!1:void $.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=$.nodeName(c,"input")||$.nodeName(c,"button")?c.form:b;d&&!$._data(d,"_submit_attached")&&($.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),$._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&$.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return $.nodeName(this,"form")?!1:void $.event.remove(this,"._submit")}}),$.support.changeBubbles||($.event.special.change={setup:function(){return Bb.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&($.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),$.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),$.event.simulate("change",this,a,!0)})),!1):void $.event.add(this,"beforeactivate._change",function(a){var b=a.target;Bb.test(b.nodeName)&&!$._data(b,"_change_attached")&&($.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||$.event.simulate("change",this.parentNode,a,!0)}),$._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return $.event.remove(this,"._change"),!Bb.test(this.nodeName)}}),$.support.focusinBubbles||$.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){$.event.simulate(b,a.target,$.event.fix(a),!0)};$.event.special[b]={setup:function(){0===c++&&P.addEventListener(a,d,!0)},teardown:function(){0===--c&&P.removeEventListener(a,d,!0)}}}),$.fn.extend({on:function(a,c,d,e,g){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=f;else if(!e)return this;return 1===g&&(h=e,e=function(a){return $().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=$.guid++)),this.each(function(){$.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,g;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,$(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(g in a)this.off(g,c,a[g]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=f),this.each(function(){$.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return $(this.context).on(a,this.selector,b,c),this},die:function(a,b){return $(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){$.event.trigger(a,b,this)})},triggerHandler:function(a,b){return this[0]?$.event.trigger(a,b,this[0],!0):void 0},toggle:function(a){var b=arguments,c=a.guid||$.guid++,d=0,e=function(c){var e=($._data(this,"lastToggle"+a.guid)||0)%d;return $._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){$.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Eb.test(b)&&($.event.fixHooks[b]=$.event.keyHooks),Fb.test(b)&&($.event.fixHooks[b]=$.event.mouseHooks)}),function(a,b){function c(a,b,c,d){c=c||[],b=b||F;var e,f,g,h,i=b.nodeType;if(!a||"string"!=typeof a)return c;if(1!==i&&9!==i)return[];if(g=v(b),!g&&!d&&(e=cb.exec(a)))if(h=e[1]){if(9===i){if(f=b.getElementById(h),!f||!f.parentNode)return c;if(f.id===h)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(h))&&w(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return K.apply(c,L.call(b.getElementsByTagName(a),0)),c;if((h=e[3])&&mb&&b.getElementsByClassName)return K.apply(c,L.call(b.getElementsByClassName(h),0)),c}return p(a.replace(Z,"$1"),b,c,d,g)}function d(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function e(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function f(a){return N(function(b){return b=+b,N(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function g(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}function h(a,b){var d,e,f,g,h,i,j,k=Q[D][a];if(k)return b?0:k.slice(0);for(h=a,i=[],j=t.preFilter;h;){(!d||(e=_.exec(h)))&&(e&&(h=h.slice(e[0].length)),i.push(f=[])),d=!1,(e=ab.exec(h))&&(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=e[0].replace(Z," "));for(g in t.filter)!(e=hb[g].exec(h))||j[g]&&!(e=j[g](e,F,!0))||(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=g,d.matches=e);if(!d)break}return b?h.length:h?c.error(a):Q(a,i).slice(0)}function i(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,f=I++;return b.first?function(b,c,f){for(;b=b[d];)if(e||1===b.nodeType)return a(b,c,f)}:function(b,c,g){if(g){for(;b=b[d];)if((e||1===b.nodeType)&&a(b,c,g))return b}else for(var h,i=H+" "+f+" ",j=i+r;b=b[d];)if(e||1===b.nodeType){if((h=b[D])===j)return b.sizset;if("string"==typeof h&&0===h.indexOf(i)){if(b.sizset)return b}else{if(b[D]=j,a(b,c,g))return b.sizset=!0,b;b.sizset=!1}}}}function j(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function k(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function l(a,b,c,d,e,f){return d&&!d[D]&&(d=l(d)),e&&!e[D]&&(e=l(e,f)),N(function(f,g,h,i){if(!f||!e){var j,l,m,n=[],p=[],q=g.length,r=f||o(b||"*",h.nodeType?[h]:h,[],f),s=!a||!f&&b?r:k(r,n,a,h,i),t=c?e||(f?a:q||d)?[]:g:s;if(c&&c(s,t,h,i),d)for(m=k(t,p),d(m,[],h,i),j=m.length;j--;)(l=m[j])&&(t[p[j]]=!(s[p[j]]=l));if(f)for(j=a&&t.length;j--;)(l=t[j])&&(f[n[j]]=!(g[n[j]]=l));else t=k(t===g?t.splice(q,t.length):t),e?e(null,g,t,i):K.apply(g,t)}})}function m(a){for(var b,c,d,e=a.length,f=t.relative[a[0].type],g=f||t.relative[" "],h=f?1:0,k=i(function(a){return a===b},g,!0),n=i(function(a){return M.call(b,a)>-1},g,!0),o=[function(a,c,d){return!f&&(d||c!==A)||((b=c).nodeType?k(a,c,d):n(a,c,d))}];e>h;h++)if(c=t.relative[a[h].type])o=[i(j(o),c)];else{if(c=t.filter[a[h].type].apply(null,a[h].matches),c[D]){for(d=++h;e>d&&!t.relative[a[d].type];d++);return l(h>1&&j(o),h>1&&a.slice(0,h-1).join("").replace(Z,"$1"),c,d>h&&m(a.slice(h,d)),e>d&&m(a=a.slice(d)),e>d&&a.join(""))}o.push(c)}return j(o)}function n(a,b){var d=b.length>0,e=a.length>0,f=function(g,h,i,j,l){var m,n,o,p=[],q=0,s="0",u=g&&[],v=null!=l,w=A,x=g||e&&t.find.TAG("*",l&&h.parentNode||h),y=H+=null==w?1:Math.E;for(v&&(A=h!==F&&h,r=f.el);null!=(m=x[s]);s++){if(e&&m){for(n=0;o=a[n];n++)if(o(m,h,i)){j.push(m);break}v&&(H=y,r=++f.el)}d&&((m=!o&&m)&&q--,g&&u.push(m))}if(q+=s,d&&s!==q){for(n=0;o=b[n];n++)o(u,p,h,i);if(g){if(q>0)for(;s--;)u[s]||p[s]||(p[s]=J.call(j));p=k(p)}K.apply(j,p),v&&!g&&p.length>0&&q+b.length>1&&c.uniqueSort(j)}return v&&(H=y,A=w),u};return f.el=0,d?N(f):f}function o(a,b,d,e){for(var f=0,g=b.length;g>f;f++)c(a,b[f],d,e);return d}function p(a,b,c,d,e){{var f,g,i,j,k,l=h(a);l.length}if(!d&&1===l.length){if(g=l[0]=l[0].slice(0),g.length>2&&"ID"===(i=g[0]).type&&9===b.nodeType&&!e&&t.relative[g[1].type]){if(b=t.find.ID(i.matches[0].replace(gb,""),b,e)[0],!b)return c;a=a.slice(g.shift().length)}for(f=hb.POS.test(a)?-1:g.length-1;f>=0&&(i=g[f],!t.relative[j=i.type]);f--)if((k=t.find[j])&&(d=k(i.matches[0].replace(gb,""),db.test(g[0].type)&&b.parentNode||b,e))){if(g.splice(f,1),a=d.length&&g.join(""),!a)return K.apply(c,L.call(d,0)),c;break}}return x(a,l)(d,b,e,c,db.test(a)),c}function q(){}var r,s,t,u,v,w,x,y,z,A,B=!0,C="undefined",D=("sizcache"+Math.random()).replace(".",""),E=String,F=a.document,G=F.documentElement,H=0,I=0,J=[].pop,K=[].push,L=[].slice,M=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},N=function(a,b){return a[D]=null==b||b,a},O=function(){var a={},b=[];return N(function(c,d){return b.push(c)>t.cacheLength&&delete a[b.shift()],a[c]=d},a)},P=O(),Q=O(),R=O(),S="[\\x20\\t\\r\\n\\f]",T="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",U=T.replace("w","w#"),V="([*^$|!~]?=)",W="\\["+S+"*("+T+")"+S+"*(?:"+V+S+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+U+")|)|)"+S+"*\\]",X=":("+T+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+W+")|[^:]|\\\\.)*|.*))\\)|)",Y=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+S+"*((?:-\\d)?\\d*)"+S+"*\\)|)(?=[^-]|$)",Z=new RegExp("^"+S+"+|((?:^|[^\\\\])(?:\\\\.)*)"+S+"+$","g"),_=new RegExp("^"+S+"*,"+S+"*"),ab=new RegExp("^"+S+"*([\\x20\\t\\r\\n\\f>+~])"+S+"*"),bb=new RegExp(X),cb=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,db=/[\x20\t\r\n\f]*[+~]/,eb=/h\d/i,fb=/input|select|textarea|button/i,gb=/\\(?!\\)/g,hb={ID:new RegExp("^#("+T+")"),CLASS:new RegExp("^\\.("+T+")"),NAME:new RegExp("^\\[name=['\"]?("+T+")['\"]?\\]"),TAG:new RegExp("^("+T.replace("w","w*")+")"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+X),POS:new RegExp(Y,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+S+"*(even|odd|(([+-]|)(\\d*)n|)"+S+"*(?:([+-]|)"+S+"*(\\d+)|))"+S+"*\\)|)","i"),needsContext:new RegExp("^"+S+"*[>+~]|"+Y,"i")},ib=function(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}},jb=ib(function(a){return a.appendChild(F.createComment("")),!a.getElementsByTagName("*").length
}),kb=ib(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==C&&"#"===a.firstChild.getAttribute("href")}),lb=ib(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),mb=ib(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),nb=ib(function(a){a.id=D+0,a.innerHTML="<a name='"+D+"'></a><div name='"+D+"'></div>",G.insertBefore(a,G.firstChild);var b=F.getElementsByName&&F.getElementsByName(D).length===2+F.getElementsByName(D+0).length;return s=!F.getElementById(D),G.removeChild(a),b});try{L.call(G.childNodes,0)[0].nodeType}catch(ob){L=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){return c(b,null,null,[a]).length>0},u=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=u(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=u(b);return c},v=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},w=c.contains=G.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:G.compareDocumentPosition?function(a,b){return b&&!!(16&a.compareDocumentPosition(b))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},c.attr=function(a,b){var c,d=v(a);return d||(b=b.toLowerCase()),(c=t.attrHandle[b])?c(a):d||lb?a.getAttribute(b):(c=a.getAttributeNode(b),c?"boolean"==typeof a[b]?a[b]?b:null:c.specified?c.value:null:null)},t=c.selectors={cacheLength:50,createPseudo:N,match:hb,attrHandle:kb?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:s?function(a,b,c){if(typeof b.getElementById!==C&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==C&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==C&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:jb?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c},NAME:nb&&function(a,b){return typeof b.getElementsByName!==C?b.getElementsByName(name):void 0},CLASS:mb&&function(a,b,c){return typeof b.getElementsByClassName===C||c?void 0:b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(gb,""),a[3]=(a[4]||a[5]||"").replace(gb,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||c.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&c.error(a[0]),a},PSEUDO:function(a){var b,c;return hb.CHILD.test(a[0])?null:(a[3]?a[2]=a[3]:(b=a[4])&&(bb.test(b)&&(c=h(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b),a.slice(0,3))}},filter:{ID:s?function(a){return a=a.replace(gb,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(gb,""),function(b){var c=typeof b.getAttributeNode!==C&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(gb,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=P[D][a];return b||(b=P(a,new RegExp("(^|"+S+")"+a+"("+S+"|$)"))),function(a){return b.test(a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")}},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:b?(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.substr(f.length-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b?f===d||f.substr(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,e,f=a.parentNode;if(1===c&&0===d)return!0;if(f)for(e=0,b=f.firstChild;b&&(1!==b.nodeType||(e++,a!==b));b=b.nextSibling);return e-=d,e===c||e%c===0&&e/c>=0}:function(b){var c=b;switch(a){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var d,e=t.pseudos[a]||t.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[D]?e(b):e.length>1?(d=[a,a,"",b],t.setFilters.hasOwnProperty(a.toLowerCase())?N(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=M.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:N(function(a){var b=[],c=[],d=x(a.replace(Z,"$1"));return d[D]?N(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:N(function(a){return function(b){return c(a,b).length>0}}),contains:N(function(a){return function(b){return(b.textContent||b.innerText||u(b)).indexOf(a)>-1}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!t.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if(a.nodeName>"@"||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return eb.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:d("radio"),checkbox:d("checkbox"),file:d("file"),password:d("password"),image:d("image"),submit:e("submit"),reset:e("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return fb.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return!(a!==b.activeElement||b.hasFocus&&!b.hasFocus()||!a.type&&!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(){return[0]}),last:f(function(a,b){return[b-1]}),eq:f(function(a,b,c){return[0>c?c+b:c]}),even:f(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:f(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:f(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:f(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},y=G.compareDocumentPosition?function(a,b){return a===b?(z=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b):a.compareDocumentPosition)?-1:1}:function(a,b){if(a===b)return z=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return g(a,b);if(!h)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;c>k&&d>k;k++)if(e[k]!==f[k])return g(e[k],f[k]);return k===c?g(a,f[k],-1):g(e[k],b,1)},[0,0].sort(y),B=!z,c.uniqueSort=function(a){var b,c=1;if(z=B,a.sort(y),z)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},x=c.compile=function(a,b){var c,d=[],e=[],f=R[D][a];if(!f){for(b||(b=h(a)),c=b.length;c--;)f=m(b[c]),f[D]?d.push(f):e.push(f);f=R(a,n(e,d))}return f},F.querySelectorAll&&!function(){var a,b=p,d=/'|\\/g,e=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],g=[":active",":focus"],i=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector;ib(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||f.push("\\["+S+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||f.push(":checked")}),ib(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&f.push("[*^$]="+S+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")}),f=new RegExp(f.join("|")),p=function(a,c,e,g,i){if(!(g||i||f&&f.test(a))){var j,k,l=!0,m=D,n=c,o=9===c.nodeType&&a;if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){for(j=h(a),(l=c.getAttribute("id"))?m=l.replace(d,"\\$&"):c.setAttribute("id",m),m="[id='"+m+"'] ",k=j.length;k--;)j[k]=m+j[k].join("");n=db.test(a)&&c.parentNode||c,o=j.join(",")}if(o)try{return K.apply(e,L.call(n.querySelectorAll(o),0)),e}catch(p){}finally{l||c.removeAttribute("id")}}return b(a,c,e,g,i)},i&&(ib(function(b){a=i.call(b,"div");try{i.call(b,"[test!='']:sizzle"),g.push("!=",X)}catch(c){}}),g=new RegExp(g.join("|")),c.matchesSelector=function(b,d){if(d=d.replace(e,"='$1']"),!(v(b)||g.test(d)||f&&f.test(d)))try{var h=i.call(b,d);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(j){}return c(d,null,null,[b]).length>0})}(),t.pseudos.nth=t.pseudos.eq,t.filters=q.prototype=t.pseudos,t.setFilters=new q,c.attr=$.attr,$.find=c,$.expr=c.selectors,$.expr[":"]=$.expr.pseudos,$.unique=c.uniqueSort,$.text=c.getText,$.isXMLDoc=c.isXML,$.contains=c.contains}(a);var Ib=/Until$/,Jb=/^(?:parents|prev(?:Until|All))/,Kb=/^.[^:#\[\.,]*$/,Lb=$.expr.match.needsContext,Mb={children:!0,contents:!0,next:!0,prev:!0};$.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!=typeof a)return $(a).filter(function(){for(b=0,c=h.length;c>b;b++)if($.contains(h[b],this))return!0});for(g=this.pushStack("","find",a),b=0,c=this.length;c>b;b++)if(d=g.length,$.find(a,this[b],g),b>0)for(e=d;e<g.length;e++)for(f=0;d>f;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=$(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if($.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?Lb.test(a)?$(a,this.context).index(this[0])>=0:$.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Lb.test(a)||"string"!=typeof a?$(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:$.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return f=f.length>1?$.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?$.inArray(this[0],$(a)):$.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?$(a,b):$.makeArray(a&&a.nodeType?[a]:a),d=$.merge(this.get(),c);return this.pushStack(h(c[0])||h(d[0])?d:$.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),$.fn.andSelf=$.fn.addBack,$.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return $.dir(a,"parentNode")},parentsUntil:function(a,b,c){return $.dir(a,"parentNode",c)},next:function(a){return i(a,"nextSibling")},prev:function(a){return i(a,"previousSibling")},nextAll:function(a){return $.dir(a,"nextSibling")},prevAll:function(a){return $.dir(a,"previousSibling")},nextUntil:function(a,b,c){return $.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return $.dir(a,"previousSibling",c)},siblings:function(a){return $.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return $.sibling(a.firstChild)},contents:function(a){return $.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:$.merge([],a.childNodes)}},function(a,b){$.fn[a]=function(c,d){var e=$.map(this,b,c);return Ib.test(a)||(d=c),d&&"string"==typeof d&&(e=$.filter(d,e)),e=this.length>1&&!Mb[a]?$.unique(e):e,this.length>1&&Jb.test(a)&&(e=e.reverse()),this.pushStack(e,a,V.call(arguments).join(","))}}),$.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?$.find.matchesSelector(b[0],a)?[b[0]]:[]:$.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!$(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Nb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ob=/ jQuery\d+="(?:null|\d+)"/g,Pb=/^\s+/,Qb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Rb=/<([\w:]+)/,Sb=/<tbody/i,Tb=/<|&#?\w+;/,Ub=/<(?:script|style|link)/i,Vb=/<(?:script|object|embed|option|style)/i,Wb=new RegExp("<(?:"+Nb+")[\\s/>]","i"),Xb=/^(?:checkbox|radio)$/,Yb=/checked\s*(?:[^=]|=\s*.checked.)/i,Zb=/\/(java|ecma)script/i,$b=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,_b={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ac=k(P),bc=ac.appendChild(P.createElement("div"));_b.optgroup=_b.option,_b.tbody=_b.tfoot=_b.colgroup=_b.caption=_b.thead,_b.th=_b.td,$.support.htmlSerialize||(_b._default=[1,"X<div>","</div>"]),$.fn.extend({text:function(a){return $.access(this,function(a){return a===b?$.text(this):this.empty().append((this[0]&&this[0].ownerDocument||P).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if($.isFunction(a))return this.each(function(b){$(this).wrapAll(a.call(this,b))});if(this[0]){var b=$(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each($.isFunction(a)?function(b){$(this).wrapInner(a.call(this,b))}:function(){var b=$(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=$.isFunction(a);return this.each(function(c){$(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||$.filter(a,[c]).length)&&(b||1!==c.nodeType||($.cleanData(c.getElementsByTagName("*")),$.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&$.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return $.clone(this,a,b)})},html:function(a){return $.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Ob,""):b;if(!("string"!=typeof a||Ub.test(a)||!$.support.htmlSerialize&&Wb.test(a)||!$.support.leadingWhitespace&&Pb.test(a)||_b[(Rb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Qb,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&($.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return h(this[0])?this.length?this.pushStack($($.isFunction(a)?a():a),"replaceWith",a):this:$.isFunction(a)?this.each(function(b){var c=$(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=$(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;$(this).remove(),b?$(b).before(a):$(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],m=this.length;if(!$.support.checkClone&&m>1&&"string"==typeof j&&Yb.test(j))return this.each(function(){$(this).domManip(a,c,d)});if($.isFunction(j))return this.each(function(e){var f=$(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(e=$.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,1===g.childNodes.length&&(g=f),f)for(c=c&&$.nodeName(f,"tr"),h=e.cacheable||m-1;m>i;i++)d.call(c&&$.nodeName(this[i],"table")?l(this[i],"tbody"):this[i],i===h?g:$.clone(g,!0,!0));g=f=null,k.length&&$.each(k,function(a,b){b.src?$.ajax?$.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):$.error("no ajax"):$.globalEval((b.text||b.textContent||b.innerHTML||"").replace($b,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),$.buildFragment=function(a,c,d){var e,f,g,h=a[0];return c=c||P,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,!(1===a.length&&"string"==typeof h&&h.length<512&&c===P&&"<"===h.charAt(0))||Vb.test(h)||!$.support.checkClone&&Yb.test(h)||!$.support.html5Clone&&Wb.test(h)||(f=!0,e=$.fragments[h],g=e!==b),e||(e=c.createDocumentFragment(),$.clean(a,c,e,d),f&&($.fragments[h]=g&&e)),{fragment:e,cacheable:f}},$.fragments={},$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){$.fn[a]=function(c){var d,e=0,f=[],g=$(c),h=g.length,i=1===this.length&&this[0].parentNode;if((null==i||i&&11===i.nodeType&&1===i.childNodes.length)&&1===h)return g[b](this[0]),this;for(;h>e;e++)d=(e>0?this.clone(!0):this).get(),$(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),$.extend({clone:function(a,b,c){var d,e,f,g;if($.support.html5Clone||$.isXMLDoc(a)||!Wb.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bc.innerHTML=a.outerHTML,bc.removeChild(g=bc.firstChild)),!($.support.noCloneEvent&&$.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||$.isXMLDoc(a)))for(n(a,g),d=o(a),e=o(g),f=0;d[f];++f)e[f]&&n(d[f],e[f]);if(b&&(m(a,g),c))for(d=o(a),e=o(g),f=0;d[f];++f)m(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var e,f,g,h,i,j,l,m,n,o,q,r=b===P&&ac,s=[];for(b&&"undefined"!=typeof b.createDocumentFragment||(b=P),e=0;null!=(g=a[e]);e++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(Tb.test(g)){for(r=r||k(b),l=b.createElement("div"),r.appendChild(l),g=g.replace(Qb,"<$1></$2>"),h=(Rb.exec(g)||["",""])[1].toLowerCase(),i=_b[h]||_b._default,j=i[0],l.innerHTML=i[1]+g+i[2];j--;)l=l.lastChild;if(!$.support.tbody)for(m=Sb.test(g),n="table"!==h||m?"<table>"!==i[1]||m?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,f=n.length-1;f>=0;--f)$.nodeName(n[f],"tbody")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f]);!$.support.leadingWhitespace&&Pb.test(g)&&l.insertBefore(b.createTextNode(Pb.exec(g)[0]),l.firstChild),g=l.childNodes,l.parentNode.removeChild(l)}else g=b.createTextNode(g);g.nodeType?s.push(g):$.merge(s,g)}if(l&&(g=l=r=null),!$.support.appendChecked)for(e=0;null!=(g=s[e]);e++)$.nodeName(g,"input")?p(g):"undefined"!=typeof g.getElementsByTagName&&$.grep(g.getElementsByTagName("input"),p);if(c)for(o=function(a){return!a.type||Zb.test(a.type)?d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a):void 0},e=0;null!=(g=s[e]);e++)$.nodeName(g,"script")&&o(g)||(c.appendChild(g),"undefined"!=typeof g.getElementsByTagName&&(q=$.grep($.merge([],g.getElementsByTagName("script")),o),s.splice.apply(s,[e+1,0].concat(q)),e+=q.length));return s},cleanData:function(a,b){for(var c,d,e,f,g=0,h=$.expando,i=$.cache,j=$.support.deleteExpando,k=$.event.special;null!=(e=a[g]);g++)if((b||$.acceptData(e))&&(d=e[h],c=d&&i[d])){if(c.events)for(f in c.events)k[f]?$.event.remove(e,f):$.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,$.deletedIds.push(d))}}}),function(){var a,b;$.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=$.uaMatch(R.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),$.browser=b,$.sub=function(){function a(b,c){return new a.fn.init(b,c)}$.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,d){return d&&d instanceof $&&!(d instanceof a)&&(d=a(d)),$.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(P);return a}}();var cc,dc,ec,fc=/alpha\([^)]*\)/i,gc=/opacity=([^)]*)/,hc=/^(top|right|bottom|left)$/,ic=/^(none|table(?!-c[ea]).+)/,jc=/^margin/,kc=new RegExp("^("+_+")(.*)$","i"),lc=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),mc=new RegExp("^([-+])=("+_+")","i"),nc={},oc={position:"absolute",visibility:"hidden",display:"block"},pc={letterSpacing:0,fontWeight:400},qc=["Top","Right","Bottom","Left"],rc=["Webkit","O","Moz","ms"],sc=$.fn.toggle;$.fn.extend({css:function(a,c){return $.access(this,function(a,c,d){return d!==b?$.style(a,c,d):$.css(a,c)},a,c,arguments.length>1)},show:function(){return s(this,!0)},hide:function(){return s(this)},toggle:function(a,b){var c="boolean"==typeof a;return $.isFunction(a)&&$.isFunction(b)?sc.apply(this,arguments):this.each(function(){(c?a:r(this))?$(this).show():$(this).hide()})}}),$.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=cc(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":$.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=$.camelCase(c),j=a.style;if(c=$.cssProps[i]||($.cssProps[i]=q(j,i)),h=$.cssHooks[c]||$.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=mc.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat($.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||$.cssNumber[i]||(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=$.camelCase(c);return c=$.cssProps[i]||($.cssProps[i]=q(a.style,i)),h=$.cssHooks[c]||$.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=cc(a,c)),"normal"===f&&c in pc&&(f=pc[c]),d||e!==b?(g=parseFloat(f),d||$.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?cc=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h[c],""!==d||$.contains(b.ownerDocument,b)||(d=$.style(b,c)),lc.test(d)&&jc.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:P.documentElement.currentStyle&&(cc=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return null==e&&f&&f[b]&&(e=f[b]),lc.test(e)&&!hc.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),""===e?"auto":e}),$.each(["height","width"],function(a,b){$.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&ic.test(cc(a,"display"))?$.swap(a,oc,function(){return v(a,b,d)}):v(a,b,d):void 0},set:function(a,c,d){return t(a,c,d?u(a,b,d,$.support.boxSizing&&"border-box"===$.css(a,"boxSizing")):0)}}}),$.support.opacity||($.cssHooks.opacity={get:function(a,b){return gc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=$.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===$.trim(f.replace(fc,""))&&c.removeAttribute&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=fc.test(f)?f.replace(fc,e):f+" "+e)}}),$(function(){$.support.reliableMarginRight||($.cssHooks.marginRight={get:function(a,b){return $.swap(a,{display:"inline-block"},function(){return b?cc(a,"marginRight"):void 0})}}),!$.support.pixelPosition&&$.fn.position&&$.each(["top","left"],function(a,b){$.cssHooks[b]={get:function(a,c){if(c){var d=cc(a,b);return lc.test(d)?$(a).position()[b]+"px":d}}}})}),$.expr&&$.expr.filters&&($.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!$.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||cc(a,"display"))},$.expr.filters.visible=function(a){return!$.expr.filters.hidden(a)}),$.each({margin:"",padding:"",border:"Width"},function(a,b){$.cssHooks[a+b]={expand:function(c){var d,e="string"==typeof c?c.split(" "):[c],f={};for(d=0;4>d;d++)f[a+qc[d]+b]=e[d]||e[d-2]||e[0];return f}},jc.test(a)||($.cssHooks[a+b].set=t)});var tc=/%20/g,uc=/\[\]$/,vc=/\r?\n/g,wc=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,xc=/^(?:select|textarea)/i;$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?$.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||xc.test(this.nodeName)||wc.test(this.type))}).map(function(a,b){var c=$(this).val();return null==c?null:$.isArray(c)?$.map(c,function(a){return{name:b.name,value:a.replace(vc,"\r\n")}}):{name:b.name,value:c.replace(vc,"\r\n")}}).get()}}),$.param=function(a,c){var d,e=[],f=function(a,b){b=$.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=$.ajaxSettings&&$.ajaxSettings.traditional),$.isArray(a)||a.jquery&&!$.isPlainObject(a))$.each(a,function(){f(this.name,this.value)});else for(d in a)x(d,a[d],c,f);return e.join("&").replace(tc,"+")};var yc,zc,Ac=/#.*$/,Bc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Cc=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Dc=/^(?:GET|HEAD)$/,Ec=/^\/\//,Fc=/\?/,Gc=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Hc=/([?&])_=[^&]*/,Ic=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Jc=$.fn.load,Kc={},Lc={},Mc=["*/"]+["*"];try{zc=Q.href}catch(Nc){zc=P.createElement("a"),zc.href="",zc=zc.href}yc=Ic.exec(zc.toLowerCase())||[],$.fn.load=function(a,c,d){if("string"!=typeof a&&Jc)return Jc.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),$.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(f="POST"),$.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?$("<div>").append(a.replace(Gc,"")).find(e):a)}),this},$.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){$.fn[b]=function(a){return this.on(b,a)}}),$.each(["get","post"],function(a,c){$[c]=function(a,d,e,f){return $.isFunction(d)&&(f=f||e,e=d,d=b),$.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),$.extend({getScript:function(a,c){return $.get(a,b,c,"script")},getJSON:function(a,b,c){return $.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?A(a,$.ajaxSettings):(b=a,a=$.ajaxSettings),A(a,b),a},ajaxSettings:{url:zc,isLocal:Cc.test(yc[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Mc},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:y(Kc),ajaxTransport:y(Lc),ajax:function(a,c){function d(a,c,d,g){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),h=b,f=g||"",w.readyState=a>0?4:0,d&&(t=B(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&($.lastModified[e]=v),v=w.getResponseHeader("Etag"),v&&($.etag[e]=v)),304===a?(x="notmodified",j=!0):(j=C(m,t),x=j.state,l=j.data,s=j.error,j=!s)):(s=x,(!x||a)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger("ajax"+(j?"Success":"Error"),[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--$.active||$.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=$.ajaxSetup({},c),n=m.context||m,o=n!==m&&(n.nodeType||n instanceof $)?$(n):$.event,p=$.Deferred(),q=$.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase();a=t[c]=t[c]||a,s[a]=b}return this},getAllResponseHeaders:function(){return 2===u?f:null},getResponseHeader:function(a){var c;if(2===u){if(!g)for(g={};c=Bc.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return u||(m.mimeType=a),this},abort:function(a){return a=a||v,h&&h.abort(a),d(0,a),this}};if(p.promise(w),w.success=w.done,w.error=w.fail,w.complete=q.add,w.statusCode=function(a){if(a){var b;if(2>u)for(b in a)r[b]=[r[b],a[b]];else b=a[w.status],w.always(b)}return this},m.url=((a||m.url)+"").replace(Ac,"").replace(Ec,yc[1]+"//"),m.dataTypes=$.trim(m.dataType||"*").toLowerCase().split(bb),null==m.crossDomain&&(j=Ic.exec(m.url.toLowerCase())||!1,m.crossDomain=j&&j.join(":")+(j[3]?"":"http:"===j[1]?80:443)!==yc.join(":")+(yc[3]?"":"http:"===yc[1]?80:443)),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=$.param(m.data,m.traditional)),z(Kc,m,c,w),2===u)return w;if(k=m.global,m.type=m.type.toUpperCase(),m.hasContent=!Dc.test(m.type),k&&0===$.active++&&$.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=(Fc.test(m.url)?"&":"?")+m.data,delete m.data),e=m.url,m.cache===!1)){var x=$.now(),y=m.url.replace(Hc,"$1_="+x);m.url=y+(y===m.url?(Fc.test(m.url)?"&":"?")+"_="+x:"")}(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(e=e||m.url,$.lastModified[e]&&w.setRequestHeader("If-Modified-Since",$.lastModified[e]),$.etag[e]&&w.setRequestHeader("If-None-Match",$.etag[e])),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Mc+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(h=z(Lc,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,h.send(s,d)}catch(A){if(!(2>u))throw A;d(-1,A)}}else d(-1,"No Transport");return w},active:0,lastModified:{},etag:{}});var Oc=[],Pc=/\?/,Qc=/(=)\?(?=&|$)|\?\?/,Rc=$.now();$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Oc.pop()||$.expando+"_"+Rc++;
return this[a]=!0,a}}),$.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&Qc.test(j),m=k&&!l&&"string"==typeof i&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qc.test(i);return"jsonp"===c.dataTypes[0]||l||m?(f=c.jsonpCallback=$.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(Qc,"$1"+f):m?c.data=i.replace(Qc,"$1"+f):k&&(c.url+=(Pc.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||$.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Oc.push(f)),h&&$.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return $.globalEval(a),a}}}),$.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),$.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=P.head||P.getElementsByTagName("head")[0]||P.documentElement;return{send:function(e,f){c=P.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var Sc,Tc=a.ActiveXObject?function(){for(var a in Sc)Sc[a](0,1)}:!1,Uc=0;$.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&D()||E()}:D,function(a){$.extend($.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}($.ajaxSettings.xhr()),$.support.ajax&&$.ajaxTransport(function(c){if(!c.crossDomain||$.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=$.noop,Tc&&delete Sc[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?4===i.readyState?setTimeout(d,0):(g=++Uc,Tc&&(Sc||(Sc={},$(a).unload(Tc)),Sc[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Vc,Wc,Xc=/^(?:toggle|show|hide)$/,Yc=new RegExp("^(?:([-+])=|)("+_+")([a-z%]*)$","i"),Zc=/queueHooks$/,$c=[J],_c={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=Yc.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||($.cssNumber[a]?"":"px"),"px"!==d&&h){h=$.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,$.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};$.Animation=$.extend(H,{tweener:function(a,b){$.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],_c[c]=_c[c]||[],_c[c].unshift(b)},prefilter:function(a,b){b?$c.unshift(a):$c.push(a)}}),$.Tween=K,K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||($.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.pos=b=this.options.duration?$.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}},K.prototype.init.prototype=K.prototype,K.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=$.css(a.elem,a.prop,!1,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){$.fx.step[a.prop]?$.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[$.cssProps[a.prop]]||$.cssHooks[a.prop])?$.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},$.each(["toggle","show","hide"],function(a,b){var c=$.fn[b];$.fn[b]=function(d,e,f){return null==d||"boolean"==typeof d||!a&&$.isFunction(d)&&$.isFunction(e)?c.apply(this,arguments):this.animate(L(b,!0),d,e,f)}}),$.fn.extend({fadeTo:function(a,b,c,d){return this.filter(r).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=$.isEmptyObject(a),f=$.speed(b,c,d),g=function(){var b=H(this,$.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=$.timers,g=$._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Zc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&$.dequeue(this,a)})}}),$.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){$.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),$.speed=function(a,b,c){var d=a&&"object"==typeof a?$.extend({},a):{complete:c||!c&&b||$.isFunction(a)&&a,duration:a,easing:c&&b||b&&!$.isFunction(b)&&b};return d.duration=$.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in $.fx.speeds?$.fx.speeds[d.duration]:$.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){$.isFunction(d.old)&&d.old.call(this),d.queue&&$.dequeue(this,d.queue)},d},$.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},$.timers=[],$.fx=K.prototype.init,$.fx.tick=function(){for(var a,b=$.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||$.fx.stop()},$.fx.timer=function(a){a()&&$.timers.push(a)&&!Wc&&(Wc=setInterval($.fx.tick,$.fx.interval))},$.fx.interval=13,$.fx.stop=function(){clearInterval(Wc),Wc=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fx.step={},$.expr&&$.expr.filters&&($.expr.filters.animated=function(a){return $.grep($.timers,function(b){return a===b.elem}).length});var ad=/^(?:body|html)$/i;$.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){$.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;if(l)return(d=l.body)===k?$.offset.bodyOffset(k):(c=l.documentElement,$.contains(c,k)?("undefined"!=typeof k.getBoundingClientRect&&(j=k.getBoundingClientRect()),e=M(l),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,i=e.pageXOffset||c.scrollLeft,{top:j.top+h-f,left:j.left+i-g}):j)},$.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return $.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat($.css(a,"marginTop"))||0,c+=parseFloat($.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=$.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=$(a),h=g.offset(),i=$.css(a,"top"),j=$.css(a,"left"),k=("absolute"===d||"fixed"===d)&&$.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),$.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},$.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=ad.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat($.css(a,"marginTop"))||0,c.left-=parseFloat($.css(a,"marginLeft"))||0,d.top+=parseFloat($.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat($.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||P.body;a&&!ad.test(a.nodeName)&&"static"===$.css(a,"position");)a=a.offsetParent;return a||P.body})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);$.fn[a]=function(e){return $.access(this,function(a,e,f){var g=M(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?$(g).scrollLeft():f,d?f:$(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),$.each({Height:"height",Width:"width"},function(a,c){$.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){$.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return $.access(this,function(c,d,e){var f;return $.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?$.css(c,d,e,h):$.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=$,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return $})}(window),function(a){"use strict";var b={};b.VERSION="0.9.14";var c,d={},e=function(a,b){return function(){return b.apply(a,arguments)}},f=function(){var a,b,c=arguments,d=c[0];for(b=1;b<c.length;b++)for(a in c[b])a in d||!c[b].hasOwnProperty(a)||(d[a]=c[b][a]);return d},g=function(a,b){return{value:a,name:b}};b.DEBUG=g(1,"DEBUG"),b.INFO=g(2,"INFO"),b.WARN=g(4,"WARN"),b.ERROR=g(8,"ERROR"),b.OFF=g(99,"OFF");var h=function(a){this.context=a,this.setLevel(a.filterLevel),this.log=this.info};h.prototype={setLevel:function(a){a&&"value"in a&&(this.context.filterLevel=a)},enabledFor:function(a){var b=this.context.filterLevel;return a.value>=b.value},debug:function(){this.invoke(b.DEBUG,arguments)},info:function(){this.invoke(b.INFO,arguments)},warn:function(){this.invoke(b.WARN,arguments)},error:function(){this.invoke(b.ERROR,arguments)},invoke:function(a,b){c&&this.enabledFor(a)&&c(b,f({level:a},this.context))}};var i=new h({filterLevel:b.OFF});!function(){var a=b;a.enabledFor=e(i,i.enabledFor),a.debug=e(i,i.debug),a.info=e(i,i.info),a.warn=e(i,i.warn),a.error=e(i,i.error),a.log=a.info}(),b.setHandler=function(a){c=a},b.setLevel=function(a){i.setLevel(a);for(var b in d)d.hasOwnProperty(b)&&d[b].setLevel(a)},b.get=function(a){return d[a]||(d[a]=new h(f({name:a},i.context)))},b.useDefaults=function(a){"undefined"!=typeof console&&(b.setLevel(a||b.DEBUG),b.setHandler(function(a,c){var d=console.log;c.name&&(a[0]="["+c.name+"] "+a[0]),c.level===b.WARN&&console.warn?d=console.warn:c.level===b.ERROR&&console.error?d=console.error:c.level===b.INFO&&console.info&&(d=console.info),Function.prototype.apply.call(d,console,a)}))},"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&module.exports?module.exports=b:(b._prevLogger=a.Logger,b.noConflict=function(){return a.Logger=b._prevLogger,b},a.Logger=b)}(this),!function(a){"use strict";a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){d.trigger("closed").remove()}var d,e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),d=a(f),b&&b.preventDefault(),d.length||(d=e.hasClass("alert")?e:e.parent()),d.trigger(b=a.Event("close")),b.isDefaultPrevented()||(d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,c):c())},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f="object"==typeof c&&c;e||d.data("button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=c,this.options.slide&&this.slide(this.options.slide),"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},to:function(b){var c=this.$element.find(".item.active"),d=c.parent().children(),e=d.index(c),f=this;if(!(b>d.length-1||0>b))return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(b,c){var d,e=this.$element.find(".item.active"),f=c||e[b](),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(this.sliding=!0,g&&this.pause(),f=f.length?f:this.$element.find(".item")[i](),d=a.Event("slide",{relatedTarget:f[0]}),!f.hasClass("active")){if(a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(d),d.isDefaultPrevented())return;f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),this.$element.one(a.support.transition.end,function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger("slid")},0)})}else{if(this.$element.trigger(d),d.isDefaultPrevented())return;e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return g&&this.cycle(),this}}},a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a(document).on("click.carousel.data-api","[data-slide]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data());e.carousel(f),b.preventDefault()})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in"),d&&d.length){if(e=d.data("collapse"),e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;this.transitioning||(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f="object"==typeof c&&c;e||d.data("collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":d.data();d[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){"use strict";function b(){a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=a(d),c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(){var d,e,f=a(this);if(!f.is(".disabled, :disabled"))return d=c(f),e=d.hasClass("open"),b(),e||(d.toggleClass("open"),f.focus()),!1},keydown:function(b){var d,e,f,g,h;if(/(38|40|27)/.test(b.keyCode)&&(d=a(this),b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled"))){if(f=c(d),g=f.hasClass("open"),!g||g&&27==b.keyCode)return d.click();e=a("[role=menu] li:not(.divider) a",f),e.length&&(h=e.index(e.filter(":focus")),38==b.keyCode&&h>0&&h--,40==b.keyCode&&h<e.length-1&&h++,~h||(h=0),e.eq(h).focus())}}},a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a(document).on("click.dropdown.data-api touchstart.dropdown.data-api",b).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(this.removeBackdrop,this)):this.removeBackdrop()):b&&b()}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(e="hover"==this.options.trigger?"mouseenter":"focus",f="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",void(this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show))):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){switch(a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight,b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.offset(g).addClass(f).addClass("in")}},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip();return c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);c[c.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content > *")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||("function"==typeof c.content?c.content.call(b[0]):c.content)},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(a){"use strict";function b(b,c){var d,e=a.proxy(this.process,this),f=a(a(b).is("body")?window:b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=f.on("scroll.scroll-spy.data-api",e),this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b,c=this;this.offsets=a([]),this.targets=a([]),b=this.$body.find(this.selector).map(function(){var b=a(this),c=b.data("target")||b.attr("href"),d=/^#\w/.test(c)&&a(c);return d&&d.length&&[[d.position().top,c]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},process:function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f="object"==typeof c&&c;e||d.data("scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b,c,d,e=this.element,f=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,"")),e.parent("li").hasClass("active")||(b=f.find(".active:last a")[0],d=a.Event("show",{relatedTarget:b}),e.trigger(d),d.isDefaultPrevented()||(c=a(g),this.activate(e.parent("li"),f),this.activate(c,c.parent(),function(){e.trigger({type:"shown",relatedTarget:b})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=a(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");
return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:b.top+b.height,left:b.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var b;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(b=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,b?this.process(b):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(){var b=this.$menu.find(".active").removeClass("active"),c=b.next();c.length||(c=a(this.$menu.find("li")[0])),c.addClass("active")},prev:function(){var a=this.$menu.find(".active").removeClass("active"),b=a.prev();b.length||(b=this.$menu.find("li").last()),b.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=!~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},blur:function(){var a=this;setTimeout(function(){a.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}},a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);c.data("typeahead")||(b.preventDefault(),c.typeahead(c.data()))})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="affix affix-top affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=g&&e.top+this.$element.height()>=c-g?"bottom":null!=h&&h>=d?"top":!1,this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?e.top-d:null,this.$element.removeClass(i).addClass("affix"+(b?"-"+b:"")))}},a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),function(){function a(a){return a.target}function b(a){return a.source}function c(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function d(a){for(var b=-1,c=a.length,d=[];c>++b;)d.push(a[b]);return d}function e(a){return Array.prototype.slice.call(a)}function f(){}function g(a){return a}function h(){return!0}function i(a){return"function"==typeof a?a:function(){return a}}function j(a,b,c){return function(){var d=c.apply(b,arguments);return arguments.length?a:d}}function k(a){return null!=a&&!isNaN(a)}function l(a){return a.length}function m(a){return a.trim().replace(/\s+/g," ")}function n(a){for(var b=1;a*b%1;)b*=10;return b}function o(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function p(a){return a.responseText}function q(a){return JSON.parse(a.responseText)}function r(a){var b=document.createRange();return b.selectNode(document.body),b.createContextualFragment(a.responseText)}function s(a){return a.responseXML}function t(){}function u(a){function b(){for(var b,d=c,e=-1,f=d.length;f>++e;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new f;return b.on=function(b,e){var f,g=d.get(b);return 2>arguments.length?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function v(a,b){return b-(a?1+Math.floor(Math.log(a+Math.pow(10,1+Math.floor(Math.log(a)/Math.LN10)-b))/Math.LN10):1)}function w(a){return a+""}function x(a,b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function y(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function z(a){return function(b){return 1-a(1-b)}}function A(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function B(a){return a*a}function C(a){return a*a*a}function D(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function E(a){return function(b){return Math.pow(b,a)}}function F(a){return 1-Math.cos(a*Lf/2)}function G(a){return Math.pow(2,10*(a-1))}function H(a){return 1-Math.sqrt(1-a*a)}function I(a,b){var c;return 2>arguments.length&&(b=.45),arguments.length?c=b/(2*Lf)*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-c)*Lf/b)}}function J(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function K(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function L(){d3.event.stopPropagation(),d3.event.preventDefault()}function M(){for(var a,b=d3.event;a=b.sourceEvent;)b=a;return b}function N(a){for(var b=new t,c=0,d=arguments.length;d>++c;)b[arguments[c]]=u(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=d3.event;e.target=a,d3.event=e,b[e.type].apply(c,d)}finally{d3.event=f}}},b}function O(a){var b=[a.a,a.b],c=[a.c,a.d],d=Q(b),e=P(b,c),f=Q(R(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Of,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Of:0}function P(a,b){return a[0]*b[0]+a[1]*b[1]}function Q(a){var b=Math.sqrt(P(a,a));return b&&(a[0]/=b,a[1]/=b),b}function R(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function S(a){return"transform"==a?d3.interpolateTransform:d3.interpolate}function T(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function U(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function V(){}function W(a,b,c){return new X(a,b,c)}function X(a,b,c){this.r=a,this.g=b,this.b=c}function Y(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Z(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(bb(e[0]),bb(e[1]),bb(e[2]))}return(f=gg.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(g=a.charAt(1),g+=g,h=a.charAt(2),h+=h,i=a.charAt(3),i+=i):7===a.length&&(g=a.substring(1,3),h=a.substring(3,5),i=a.substring(5,7)),g=parseInt(g,16),h=parseInt(h,16),i=parseInt(i,16)),b(g,h,i))}function $(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):e=d=0,cb(d,e,i)}function _(a,b,c){a=ab(a),b=ab(b),c=ab(c);var d=nb((.4124564*a+.3575761*b+.1804375*c)/kg),e=nb((.2126729*a+.7151522*b+.072175*c)/lg),f=nb((.0193339*a+.119192*b+.9503041*c)/mg);return ib(116*e-16,500*(d-e),200*(e-f))}function ab(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function bb(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function cb(a,b,c){return new db(a,b,c)}function db(a,b,c){this.h=a,this.s=b,this.l=c}function eb(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a%=360,0>a&&(a+=360),b=0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,W(e(a+120),e(a),e(a-120))}function fb(a,b,c){return new gb(a,b,c)}function gb(a,b,c){this.h=a,this.c=b,this.l=c}function hb(a,b,c){return ib(c,Math.cos(a*=Nf)*b,Math.sin(a)*b)}function ib(a,b,c){return new jb(a,b,c)}function jb(a,b,c){this.l=a,this.a=b,this.b=c}function kb(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=mb(e)*kg,d=mb(d)*lg,f=mb(f)*mg,W(ob(3.2404542*e-1.5371385*d-.4985314*f),ob(-.969266*e+1.8760108*d+.041556*f),ob(.0556434*e-.2040259*d+1.0572252*f))}function lb(a,b,c){return fb(180*(Math.atan2(c,b)/Lf),Math.sqrt(b*b+c*c),a)}function mb(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function nb(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function ob(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function pb(a){return Rf(a,tg),a}function qb(a){return function(){return og(a,this)}}function rb(a){return function(){return pg(a,this)}}function sb(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=d3.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function tb(a){return RegExp("(?:^|\\s+)"+d3.requote(a)+"(?:\\s+|$)","g")}function ub(a,b){function c(){for(var c=-1;e>++c;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);e>++c;)a[c](this,d)}a=a.trim().split(/\s+/).map(vb);var e=a.length;return"function"==typeof b?d:c}function vb(a){var b=tb(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.className,f=null!=e.baseVal,g=f?e.baseVal:e;d?(b.lastIndex=0,b.test(g)||(g=m(g+" "+a),f?e.baseVal=g:c.className=g)):g&&(g=m(g.replace(b," ")),f?e.baseVal=g:c.className=g)}}function wb(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function xb(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function yb(a){return{__data__:a}}function zb(a){return function(){return sg(this,a)}}function Ab(a){return arguments.length||(a=d3.ascending),function(b,c){return a(b&&b.__data__,c&&c.__data__)}}function Bb(a,b,c){function d(){var b=this[f];b&&(this.removeEventListener(a,b,b.$),delete this[f])}function e(){function e(a){var c=d3.event;d3.event=a,h[0]=g.__data__;try{b.apply(g,h)}finally{d3.event=c}}var g=this,h=Pf(arguments);d.call(this),this.addEventListener(a,this[f]=e,e.$=c),e._=b}var f="__on"+a,g=a.indexOf(".");return g>0&&(a=a.substring(0,g)),b?e:d}function Cb(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function Db(a){return Rf(a,vg),a}function Eb(a,b){return Rf(a,xg),a.id=b,a}function Fb(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),g=e[c];if(!g){var h=d.time;return g=e[c]={tween:new f,event:d3.dispatch("start","end"),time:h,ease:d.ease,delay:d.delay,duration:d.duration},++e.count,d3.timer(function(d){function f(d){return e.active>c?j():(e.active=c,m.start.call(a,k,b),g.tween.forEach(function(c,d){(d=d.call(a,k,b))&&p.push(d)}),i(d)||d3.timer(i,0,h),1)}function i(d){if(e.active!==c)return j();for(var f=(d-n)/o,g=l(f),h=p.length;h>0;)p[--h].call(a,g);return f>=1?(j(),m.end.call(a,k,b),1):void 0}function j(){return--e.count?delete e[c]:delete a.__transition__,1}var k=a.__data__,l=g.ease,m=g.event,n=g.delay,o=g.duration,p=[];return d>=n?f(d):d3.timer(f,n,h),1},0,h),g}}function Gb(a){return null==a&&(a=""),function(){this.textContent=a}}function Hb(a,b,c,d){var e=a.id;return Cb(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Ib(){for(var a,b=Date.now(),c=Eg;c;)a=b-c.then,a>=c.delay&&(c.flush=c.callback(a)),c=c.next;var d=Jb()-b;d>24?(isFinite(d)&&(clearTimeout(Bg),Bg=setTimeout(Ib,d)),Ag=0):(Ag=1,Fg(Ib))}function Jb(){for(var a=null,b=Eg,c=1/0;b;)b.flush?(delete Dg[b.callback.id],b=a?a.next=b.next:Eg=b.next):(c=Math.min(c,b.then+b.delay),b=(a=b).next);return c}function Kb(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>Gg&&(window.scrollX||window.scrollY)){c=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0);var e=c[0][0].getScreenCTM();Gg=!(e.f||e.e),c.remove()}return Gg?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function Lb(){}function Mb(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Nb(a){return a.rangeExtent?a.rangeExtent():Mb(a.range())}function Ob(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),(b=b(g-f))&&(a[d]=b.floor(f),a[e]=b.ceil(g)),a}function Pb(){return Math}function Qb(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Xb:Wb,i=d?U:T;return g=e(a,b,i,c),h=e(b,a,i,d3.interpolate),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(d3.interpolateRound)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Ub(a,b)},f.tickFormat=function(b){return Vb(a,b)},f.nice=function(){return Ob(a,Sb),e()},f.copy=function(){return Qb(a,b,c,d)},e()}function Rb(a,b){return d3.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Sb(a){return a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1),a&&{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}}function Tb(a,b){var c=Mb(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Ub(a,b){return d3.range.apply(d3,Tb(a,b))}function Vb(a,b){return d3.format(",."+Math.max(0,-Math.floor(Math.log(Tb(a,b)[2])/Math.LN10+.01))+"f")}function Wb(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Xb(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());h>=++g;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=d3.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Yb(a,b){function c(c){return a(b(c))}var d=b.pow;return c.invert=function(b){return d(a.invert(b))},c.domain=function(e){return arguments.length?(b=0>e[0]?$b:Zb,d=b.pow,a.domain(e.map(b)),c):a.domain().map(d)},c.nice=function(){return a.domain(Ob(a.domain(),Pb)),c},c.ticks=function(){var c=Mb(a.domain()),e=[];if(c.every(isFinite)){var f=Math.floor(c[0]),g=Math.ceil(c[1]),h=d(c[0]),i=d(c[1]);if(b===$b)for(e.push(d(f));g>f++;)for(var j=9;j>0;j--)e.push(d(f)*j);else{for(;g>f;f++)for(var j=1;10>j;j++)e.push(d(f)*j);e.push(d(f))}for(f=0;h>e[f];f++);for(g=e.length;e[g-1]>i;g--);e=e.slice(f,g)}return e},c.tickFormat=function(a,e){if(2>arguments.length&&(e=Hg),!arguments.length)return e;var f,g=Math.max(.1,a/c.ticks().length),h=b===$b?(f=-1e-12,Math.floor):(f=1e-12,Math.ceil);return function(a){return g>=a/d(h(b(a)+f))?e(a):""}},c.copy=function(){return Yb(a.copy(),b)},Rb(c,a)}function Zb(a){return Math.log(0>a?0:a)/Math.LN10}function $b(a){return-Math.log(a>0?0:-a)/Math.LN10}function _b(a,b){function c(b){return a(d(b))}var d=ac(b),e=ac(1/b);return c.invert=function(b){return e(a.invert(b))},c.domain=function(b){return arguments.length?(a.domain(b.map(d)),c):a.domain().map(e)},c.ticks=function(a){return Ub(c.domain(),a)},c.tickFormat=function(a){return Vb(c.domain(),a)},c.nice=function(){return c.domain(Ob(c.domain(),Sb))},c.exponent=function(a){if(!arguments.length)return b;var f=c.domain();return d=ac(b=a),e=ac(1/b),c.domain(f)},c.copy=function(){return _b(a.copy(),b)},Rb(c,a)}function ac(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function bc(a,b){function c(b){return g[((e.get(b)||e.set(b,a.push(b)))-1)%g.length]}function d(b,c){return d3.range(a.length).map(function(a){return b+c*a})}var e,g,h;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new f;for(var g,h=-1,i=d.length;i>++h;)e.has(g=d[h])||e.set(g,a.push(g));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(g=a,h=0,b={t:"range",a:arguments},c):g},c.rangePoints=function(e,f){2>arguments.length&&(f=0);var i=e[0],j=e[1],k=(j-i)/(Math.max(1,a.length-1)+f);return g=d(2>a.length?(i+j)/2:i+k*f/2,k),h=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,f,i){2>arguments.length&&(f=0),3>arguments.length&&(i=f);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-f+2*i);return g=d(k+m*i,m),j&&g.reverse(),h=m*(1-f),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,f,i){2>arguments.length&&(f=0),3>arguments.length&&(i=f);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-f+2*i)),n=l-k-(a.length-f)*m;return g=d(k+Math.round(n/2),m),j&&g.reverse(),h=Math.round(m*(1-f)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return h},c.rangeExtent=function(){return Mb(b.a[0])},c.copy=function(){return bc(a,b)},c.domain(a)}function cc(a,b){function c(){var c=0,f=b.length;for(e=[];f>++c;)e[c-1]=d3.quantile(a,c/f);return d}function d(a){return isNaN(a=+a)?0/0:b[d3.bisect(e,a)]}var e;return d.domain=function(b){return arguments.length?(a=b.filter(function(a){return!isNaN(a)}).sort(d3.ascending),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return e},d.copy=function(){return cc(a,b)},c()}function dc(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.copy=function(){return dc(a,b,c)},e()}function ec(a,b){function c(c){return b[d3.bisect(a,c)]}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.copy=function(){return ec(a,b)},c}function fc(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Ub(a,b)},b.tickFormat=function(b){return Vb(a,b)},b.copy=function(){return fc(a)},b}function gc(a){return a.innerRadius}function hc(a){return a.outerRadius}function ic(a){return a.startAngle}function jc(a){return a.endAngle}function kc(a){function b(b){function g(){k.push("M",f(a(l),j))}for(var h,k=[],l=[],m=-1,n=b.length,o=i(c),p=i(d);n>++m;)e.call(this,h=b[m],m)?l.push([+o.call(this,h,m),+p.call(this,h,m)]):l.length&&(g(),l=[]);return l.length&&g(),k.length?k.join(""):null}var c=lc,d=mc,e=h,f=nc,g=f.key,j=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Og.get(a)||nc).key,b):g},b.tension=function(a){return arguments.length?(j=a,b):j},b}function lc(a){return a[0]}function mc(a){return a[1]}function nc(a){return a.join("L")}function oc(a){return nc(a)+"Z"}function pc(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];c>++b;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function qc(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];c>++b;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function rc(a,b){return 4>a.length?nc(a):a[1]+uc(a.slice(1,a.length-1),vc(a,b))}function sc(a,b){return 3>a.length?nc(a):a[0]+uc((a.push(a[0]),a),vc([a[a.length-2]].concat(a,[a[1]]),b))}function tc(a,b){return 3>a.length?nc(a):a[0]+uc(a,vc(a,b))}function uc(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return nc(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;b.length>j;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function vc(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;i>++h;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function wc(a){if(3>a.length)return nc(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f];for(Bc(i,g,h);c>++b;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Bc(i,g,h);for(b=-1;2>++b;)g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Bc(i,g,h);return i.join("")}function xc(a){if(4>a.length)return nc(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];3>++d;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Ac(Rg,f)+","+Ac(Rg,g)),--d;e>++d;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Bc(c,f,g);return c.join("")}function yc(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];4>++d;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Ac(Rg,g),",",Ac(Rg,h)],--d;f>++d;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Bc(b,g,h);return b.join("")}function zc(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;c>=++j;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return wc(a)}function Ac(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Bc(a,b,c){a.push("C",Ac(Pg,b),",",Ac(Pg,c),",",Ac(Qg,b),",",Ac(Qg,c),",",Ac(Rg,b),",",Ac(Rg,c))}function Cc(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Dc(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Cc(e,f);c>++b;)d[b]=(g+(g=Cc(e=f,f=a[b+1])))/2;return d[b]=g,d}function Ec(a){for(var b,c,d,e,f=[],g=Dc(a),h=-1,i=a.length-1;i>++h;)b=Cc(a[h],a[h+1]),1e-6>Math.abs(b)?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;i>=++h;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Fc(a){return 3>a.length?nc(a):a[0]+uc(a,Ec(a))}function Gc(a){for(var b,c,d,e=-1,f=a.length;f>++e;)b=a[e],c=b[0],d=b[1]+Mg,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Hc(a){function b(b){function h(){q.push("M",j(a(s),n),m,l(a(r.reverse()),n),"Z")}for(var k,o,p,q=[],r=[],s=[],t=-1,u=b.length,v=i(c),w=i(e),x=c===d?function(){return o}:i(d),y=e===f?function(){return p}:i(f);u>++t;)g.call(this,k=b[t],t)?(r.push([o=+v.call(this,k,t),p=+w.call(this,k,t)]),s.push([+x.call(this,k,t),+y.call(this,k,t)])):r.length&&(h(),r=[],s=[]);return r.length&&h(),q.length?q.join(""):null}var c=lc,d=lc,e=0,f=mc,g=h,j=nc,k=j.key,l=j,m="L",n=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(k="function"==typeof a?j=a:(j=Og.get(a)||nc).key,l=j.reverse||j,m=j.closed?"M":"L",b):k},b.tension=function(a){return arguments.length?(n=a,b):n},b}function Ic(a){return a.radius}function Jc(a){return[a.x,a.y]}function Kc(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+Mg;return[c*Math.cos(d),c*Math.sin(d)]}}function Lc(){return 64}function Mc(){return"circle"}function Nc(a){var b=Math.sqrt(a/Lf);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Oc(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function Pc(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function Qc(a,b,c){if(d=[],c&&b.length>1){for(var d,e,f,g=Mb(a.domain()),h=-1,i=b.length,j=(b[1]-b[0])/++c;i>++h;)for(e=c;--e>0;)(f=+b[h]-e*j)>=g[0]&&d.push(f);for(--h,e=0;c>++e&&(f=+b[h]+e*j)<g[1];)d.push(f)}return d}function Rc(){Xg||(Xg=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var a,b=d3.event;try{Xg.scrollTop=1e3,Xg.dispatchEvent(b),a=1e3-Xg.scrollTop}catch(c){a=b.wheelDelta||5*-b.detail}return a}function Sc(a){for(var b=a.source,c=a.target,d=Uc(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Tc(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Uc(a,b){if(a===b)return a;for(var c=Tc(a),d=Tc(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Vc(a){a.fixed|=2}function Wc(a){a.fixed&=1}function Xc(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Yc(a){a.fixed&=3}function Zc(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;h>++i;)f=g[i],null!=f&&(Zc(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function $c(){return 20}function _c(){return 1}function ad(a){return a.x}function bd(a){return a.y}function cd(a,b,c){a.y0=b,a.y=c}function dd(a){return d3.range(a.length)}function ed(a){for(var b=-1,c=a[0].length,d=[];c>++b;)d[b]=0;return d}function fd(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function gd(a){return a.reduce(hd,0)}function hd(a,b){return a+b[1]}function id(a,b){return jd(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function jd(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];b>=++c;)f[c]=e*c+d;return f}function kd(a){return[d3.min(a),d3.max(a)]}function ld(a,b){return d3.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=pd,a}function md(a){return a.children}function nd(a){return a.value}function od(a,b){return b.value-a.value}function pd(a){return d3.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function qd(a,b){return a.value-b.value}function rd(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function sd(a,b){a._pack_next=b,b._pack_prev=a}function td(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return e*e-c*c-d*d>.001}function ud(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-1/0,m=1/0,n=-1/0;if(c.forEach(vd),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],yd(d,e,f),b(f),rd(d,f),d._pack_prev=f,rd(f,e),e=d._pack_next,g=3;j>g;g++){yd(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(td(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!td(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?sd(d,e=h):sd(d=i,e),g--):(rd(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(wd)}}function vd(a){a._pack_next=a._pack_prev=a}function wd(a){delete a._pack_next,delete a._pack_prev}function xd(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;g>++f;)xd(e[f],b,c,d)}function yd(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function zd(a){return 1+d3.max(a,function(a){return a.y})}function Ad(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Bd(a){var b=a.children;return b&&b.length?Bd(b[0]):a}function Cd(a){var b,c=a.children;return c&&(b=c.length)?Cd(c[b-1]):a}function Dd(a,b){return a.parent==b.parent?1:2}function Ed(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function Fd(a){var b,c=a.children;return c&&(b=c.length)?c[b-1]:a._tree.thread}function Gd(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;e>++f;)b(d=Gd(c[f],b),a)>0&&(a=d);return a}function Hd(a,b){return a.x-b.x}function Id(a,b){return b.x-a.x}function Jd(a,b){return a.depth-b.depth}function Kd(a,b){function c(a,d){var e=a.children;if(e&&(g=e.length))for(var f,g,h=null,i=-1;g>++i;)f=e[i],c(f,h),h=f;b(a,d)}c(a,null)}function Ld(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f]._tree,b.prelim+=c,b.mod+=c,c+=b.shift+(d+=b.change)}function Md(a,b,c){a=a._tree,b=b._tree;var d=c/(b.number-a.number);a.change+=d,b.change-=d,b.shift+=c,b.prelim+=c,b.mod+=c}function Nd(a,b,c){return a._tree.ancestor.parent==b.parent?a._tree.ancestor:c}function Od(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Pd(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Qd(a,b){function c(a,c){return d3.xhr(a,b,c).response(d)}function d(a){return c.parse(a.responseText)}function e(b){return b.map(f).join(a)}function f(a){return g.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var g=RegExp('["'+a+"\n]"),h=a.charCodeAt(0);return c.parse=function(a){var b;return c.parseRows(a,function(a){return b?b(a):void(b=Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"
}).join(",")+"}"))})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;j>c++;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.substring(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),i=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++i);else if(d!==h)continue;return a.substring(b,k-i)}return a.substring(b)}for(var d,e,f={},g={},i=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();(!b||(m=b(m,l++)))&&i.push(m)}return i},c.format=function(a){return a.map(e).join("\n")},c}function Rd(a,b){bh.hasOwnProperty(a.type)&&bh[a.type](a,b)}function Sd(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();f>++e;)d=a[e],b.point(d[0],d[1]);b.lineEnd()}function Td(a,b){var c=-1,d=a.length;for(b.polygonStart();d>++c;)Sd(a[c],b,1);b.polygonEnd()}function Ud(a){return[Math.atan2(a[1],a[0]),Math.asin(Math.max(-1,Math.min(1,a[2])))]}function Vd(a,b){return Mf>Math.abs(a[0]-b[0])&&Mf>Math.abs(a[1]-b[1])}function Wd(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function Xd(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Yd(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Zd(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function $d(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function _d(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function ae(a){function b(b){function d(c,d){c=a(c,d),b.point(c[0],c[1])}function f(){k=0/0,p.point=g,b.lineStart()}function g(d,f){var g=Wd([d,f]),h=a(d,f);c(k,l,j,m,n,o,k=h[0],l=h[1],j=d,m=g[0],n=g[1],o=g[2],e,b),b.point(k,l)}function h(){p.point=d,b.lineEnd()}function i(){var a,d,i,q,r,s,t;f(),p.point=function(b,c){g(a=b,d=c),i=k,q=l,r=m,s=n,t=o,p.point=g},p.lineEnd=function(){c(k,l,j,m,n,o,i,q,a,r,s,t,e,b),p.lineEnd=h,h()}}var j,k,l,m,n,o,p={point:d,lineStart:f,lineEnd:h,polygonStart:function(){b.polygonStart(),p.lineStart=i},polygonEnd:function(){b.polygonEnd(),p.lineStart=f}};return p}function c(b,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=j-b,s=k-e,t=r*r+s*s;if(t>4*d&&p--){var u=g+m,v=h+n,w=i+o,x=Math.sqrt(u*u+v*v+w*w),y=Math.asin(w/=x),z=Mf>Math.abs(Math.abs(w)-1)?(f+l)/2:Math.atan2(v,u),A=a(z,y),B=A[0],C=A[1],D=B-b,E=C-e,F=s*D-r*E;(F*F/t>d||Math.abs((r*D+s*E)/t-.5)>.3)&&(c(b,e,f,g,h,i,B,C,z,u/=x,v/=x,w,p,q),q.point(B,C),c(B,C,z,u,v,w,j,k,l,m,n,o,p,q))}}var d=.5,e=16;return b.precision=function(a){return arguments.length?(e=(d=a*a)>0&&16,b):Math.sqrt(d)},b}function be(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,Math.asin((f-(a*a+c*c)*e*e)/(2*e))]},c}function ce(a){function b(a,b){d>a&&(d=a),a>f&&(f=a),e>b&&(e=b),b>g&&(g=b)}function c(){h.point=h.lineEnd=Lb}var d,e,f,g,h={point:b,lineStart:Lb,lineEnd:Lb,polygonStart:function(){h.lineEnd=c},polygonEnd:function(){h.point=b}},i=a?a.stream(h):h;return function(a){return g=f=-(d=e=1/0),d3.geo.stream(a,i),[[d,e],[f,g]]}}function de(a,b){if(!eh){++fh,a*=Nf;var c=Math.cos(b*=Nf);gh+=(c*Math.cos(a)-gh)/fh,hh+=(c*Math.sin(a)-hh)/fh,ih+=(Math.sin(b)-ih)/fh}}function ee(){var a,b;2>eh&&(eh=2,fh=gh=hh=ih=0),eh=1,fe(),eh=2;var c=jh.point;jh.point=function(d,e){c(a=d,b=e)},jh.lineEnd=function(){jh.point(a,b),ge(),jh.lineEnd=ge}}function fe(){function a(a,e){a*=Nf;var f=Math.cos(e*=Nf),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);fh+=j,gh+=j*(b+(b=g)),hh+=j*(c+(c=h)),ih+=j*(d+(d=i))}var b,c,d;if(1!==eh){if(!(1>eh))return;eh=1,fh=gh=hh=ih=0}jh.point=function(e,f){e*=Nf;var g=Math.cos(f*=Nf);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),jh.point=a}}function ge(){jh.point=de}function he(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){null!=e?(e=ie(c,e),f=ie(c,f),(g>0?f>e:e>f)&&(e+=2*g*Lf)):(e=a+2*g*Lf,f=a);for(var i,j=g*b,k=e;g>0?k>f:f>k;k-=j)h.point((i=Ud([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],i[1])}}function ie(a,b){var c=Wd(b);c[0]-=a,_d(c);var d=Math.acos(Math.max(-1,Math.min(1,-c[1])));return((0>-c[2]?-d:d)+2*Math.PI-Mf)%(2*Math.PI)}function je(a,b,c){return function(d){function e(b,c){a(b,c)&&d.point(b,c)}function f(a,b){q.point(a,b)}function g(){r.point=f,q.lineStart()}function h(){r.point=e,q.lineEnd()}function i(a,b){t.point(a,b),p.push([a,b])}function j(){t.lineStart(),p=[]}function k(){i(p[0][0],p[0][1]),t.lineEnd();var a,b=t.clean(),c=s.buffer(),e=c.length;if(!e)return o=!0,n+=pe(p,-1),void(p=null);if(p=null,1&b){a=c[0],m+=pe(a,1);var f,e=a.length-1,g=-1;for(d.lineStart();e>++g;)d.point((f=a[g])[0],f[1]);return void d.lineEnd()}e>1&&2&b&&c.push(c.pop().concat(c.shift())),l.push(c.filter(ne))}var l,m,n,o,p,q=b(d),r={point:e,lineStart:g,lineEnd:h,polygonStart:function(){r.point=i,r.lineStart=j,r.lineEnd=k,o=!1,n=m=0,l=[],d.polygonStart()},polygonEnd:function(){r.point=e,r.lineStart=g,r.lineEnd=h,l=d3.merge(l),l.length?ke(l,c,d):(-Mf>m||o&&-Mf>n)&&(d.lineStart(),c(null,null,1,d),d.lineEnd()),d.polygonEnd(),l=null},sphere:function(){d.polygonStart(),d.lineStart(),c(null,null,1,d),d.lineEnd(),d.polygonEnd()}},s=oe(),t=b(s);return r}}function ke(a,b,c){var d=[],e=[];if(a.forEach(function(a){var b=a.length;if(!(1>=b)){var c=a[0],f=a[b-1],g={point:c,points:a,other:null,visited:!1,entry:!0,subject:!0},h={point:c,points:[c],other:g,visited:!1,entry:!1,subject:!1};g.other=h,d.push(g),e.push(h),g={point:f,points:[f],other:null,visited:!1,entry:!1,subject:!0},h={point:f,points:[f],other:g,visited:!1,entry:!0,subject:!1},g.other=h,d.push(g),e.push(h)}}),e.sort(me),le(d),le(e),d.length)for(var f,g,h,i=d[0];;){for(f=i;f.visited;)if((f=f.next)===i)return;g=f.points,c.lineStart();do{if(f.visited=f.other.visited=!0,f.entry){if(f.subject)for(var j=0;g.length>j;j++)c.point((h=g[j])[0],h[1]);else b(f.point,f.next.point,1,c);f=f.next}else{if(f.subject){g=f.prev.points;for(var j=g.length;--j>=0;)c.point((h=g[j])[0],h[1])}else b(f.point,f.prev.point,-1,c);f=f.prev}f=f.other,g=f.points}while(!f.visited);c.lineEnd()}}function le(a){if(b=a.length){for(var b,c,d=0,e=a[0];b>++d;)e.next=c=a[d],c.prev=e,e=c;e.next=c=a[0],c.prev=e}}function me(a,b){return(0>(a=a.point)[0]?a[1]-Lf/2-Mf:Lf/2-a[1])-(0>(b=b.point)[0]?b[1]-Lf/2-Mf:Lf/2-b[1])}function ne(a){return a.length>1}function oe(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:Lb,buffer:function(){var c=b;return b=[],a=null,c}}}function pe(a,b){if(!(c=a.length))return 0;for(var c,d,e,f=0,g=0,h=a[0],i=h[0],j=h[1],k=Math.cos(j),l=Math.atan2(b*Math.sin(i)*k,Math.sin(j)),m=1-b*Math.cos(i)*k,n=l;c>++f;)h=a[f],k=Math.cos(j=h[1]),d=Math.atan2(b*Math.sin(i=h[0])*k,Math.sin(j)),e=1-b*Math.cos(i)*k,Mf>Math.abs(m-2)&&Mf>Math.abs(e-2)||(Mf>Math.abs(e)||Mf>Math.abs(m)||(Mf>Math.abs(Math.abs(d-l)-Lf)?e+m>2&&(g+=4*(d-l)):g+=Mf>Math.abs(m-2)?4*(d-n):((3*Lf+d-l)%(2*Lf)-Lf)*(m+e)),n=l,l=d,m=e);return g}function qe(a){var b,c=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Lf:-Lf,i=Math.abs(f-c);Mf>Math.abs(i-Lf)?(a.point(c,d=(d+g)/2>0?Lf/2:-Lf/2),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Lf&&(Mf>Math.abs(c-e)&&(c-=e*Mf),Mf>Math.abs(f-h)&&(f-=h*Mf),d=re(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=0/0},clean:function(){return 2-b}}}function re(a,b,c,d){var e,f,g=Math.sin(a-c);return Math.abs(g)>Mf?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function se(a,b,c,d){var e;if(null==a)e=c*Lf/2,d.point(-Lf,e),d.point(0,e),d.point(Lf,e),d.point(Lf,0),d.point(Lf,-e),d.point(0,-e),d.point(-Lf,-e),d.point(-Lf,0),d.point(-Lf,e);else if(Math.abs(a[0]-b[0])>Mf){var f=(a[0]<b[0]?1:-1)*Lf;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function te(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,e,f,g;return{lineStart:function(){f=e=!1,g=1},point:function(h,i){var j,k=[h,i],l=b(h,i);!c&&(f=e=l)&&a.lineStart(),l!==e&&(j=d(c,k),(Vd(c,j)||Vd(k,j))&&(k[0]+=Mf,k[1]+=Mf,l=b(k[0],k[1]))),l!==e&&(g=0,(e=l)?(a.lineStart(),j=d(k,c),a.point(j[0],j[1])):(j=d(c,k),a.point(j[0],j[1]),a.lineEnd()),c=j),!l||c&&Vd(c,k)||a.point(k[0],k[1]),c=k},lineEnd:function(){e&&a.lineEnd(),c=null},clean:function(){return g|(f&&e)<<1}}}function d(a,b){var c=Wd(a,0),d=Wd(b,0),e=[1,0,0],g=Yd(c,d),h=Xd(g,g),i=g[0],j=h-i*i;if(!j)return a;var k=f*h/j,l=-f*i/j,m=Yd(e,g),n=$d(e,k),o=$d(g,l);Zd(n,o);var p=m,q=Xd(n,p),r=Xd(p,p),s=Math.sqrt(q*q-r*(Xd(n,n)-1)),t=$d(p,(-q-s)/r);return Zd(t,n),Ud(t)}var e=a*Nf,f=Math.cos(e),g=he(e,6*Nf);return je(b,c,g)}function ue(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),a.invert(c[0],c[1])}),c}function ve(a,b){return[a,b]}function we(a,b,c){var d=d3.range(a,b-Mf,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function xe(a,b,c){var d=d3.range(a,b-Mf,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function ye(a,b,c,d){function e(a){var b=Math.sin(a*=n)*o,c=Math.sin(n-a)*o,d=c*j+b*l,e=c*k+b*m,f=c*g+b*i;return[Math.atan2(e,d)/Nf,Math.atan2(f,Math.sqrt(d*d+e*e))/Nf]}var f=Math.cos(b),g=Math.sin(b),h=Math.cos(d),i=Math.sin(d),j=f*Math.cos(a),k=f*Math.sin(a),l=h*Math.cos(c),m=h*Math.sin(c),n=Math.acos(Math.max(-1,Math.min(1,g*i+f*h*Math.cos(c-a)))),o=1/Math.sin(n);return e.distance=n,e}function ze(a,b){return[a/(2*Lf),Math.max(-.5,Math.min(.5,Math.log(Math.tan(Lf/4+b/2))/(2*Lf)))]}function Ae(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Be(a){var b=ae(function(b,c){return a([b*Of,c*Of])});return function(a){return a=b(a),{point:function(b,c){a.point(b*Nf,c*Nf)},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}}function Ce(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Ae(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Ae(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function De(a){function b(b,c){a.moveTo(b,c),a.arc(b,c,g,0,2*Lf)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:Lb};return h}function Ee(){function a(a,b){oh+=e*a-d*b,d=a,e=b}var b,c,d,e;ph.point=function(f,g){ph.point=a,b=d=f,c=e=g},ph.lineEnd=function(){a(b,c)}}function Fe(a,b){eh||(gh+=a,hh+=b,++ih)}function Ge(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);gh+=g*(b+a)/2,hh+=g*(c+d)/2,ih+=g,b=a,c=d}var b,c;if(1!==eh){if(!(1>eh))return;eh=1,gh=hh=ih=0}qh.point=function(d,e){qh.point=a,b=d,c=e}}function He(){qh.point=Fe}function Ie(){function a(a,b){var c=e*a-d*b;gh+=c*(d+a),hh+=c*(e+b),ih+=3*c,d=a,e=b}var b,c,d,e;2>eh&&(eh=2,gh=hh=ih=0),qh.point=function(f,g){qh.point=a,b=d=f,c=e=g},qh.lineEnd=function(){a(b,c)}}function Je(){function a(a,b){if(a*=Nf,b*=Nf,!(Mf>Math.abs(Math.abs(f)-Lf/2)&&Mf>Math.abs(Math.abs(b)-Lf/2))){var c=Math.cos(b),i=Math.sin(b);if(Mf>Math.abs(f-Lf/2))sh+=2*(a-d);else{var j=a-e,k=Math.cos(j),l=Math.atan2(Math.sqrt((l=c*Math.sin(j))*l+(l=g*i-h*c*k)*l),h*i+g*c*k),m=(l+Lf+f+b)/4;sh+=(0>j&&j>-Lf||j>Lf?-4:4)*Math.atan(Math.sqrt(Math.abs(Math.tan(m)*Math.tan(m-l/2)*Math.tan(m-Lf/4-f/2)*Math.tan(m-Lf/4-b/2))))}d=e,e=a,f=b,g=c,h=i}}var b,c,d,e,f,g,h;th.point=function(i,j){th.point=a,d=e=(b=i)*Nf,f=(c=j)*Nf,g=Math.cos(f),h=Math.sin(f)},th.lineEnd=function(){a(b,c)}}function Ke(a){return Le(function(){return a})()}function Le(a){function b(a){return a=g(a[0]*Nf,a[1]*Nf),[a[0]*k+h,i-a[1]*k]}function c(a){return a=g.invert((a[0]-h)/k,(i-a[1])/k),[a[0]*Of,a[1]*Of]}function d(){g=ue(f=Ne(p,q,r),e);var a=e(n,o);return h=l-a[0]*k,i=m+a[1]*k,b}var e,f,g,h,i,j=ae(function(a,b){return a=e(a,b),[a[0]*k+h,i-a[1]*k]}),k=150,l=480,m=250,n=0,o=0,p=0,q=0,r=0,s=kh,t=null;return b.stream=function(a){return Me(f,s(j(a)))},b.clipAngle=function(a){return arguments.length?(s=null==a?(t=a,kh):te(t=+a),b):t},b.scale=function(a){return arguments.length?(k=+a,d()):k},b.translate=function(a){return arguments.length?(l=+a[0],m=+a[1],d()):[l,m]},b.center=function(a){return arguments.length?(n=a[0]%360*Nf,o=a[1]%360*Nf,d()):[n*Of,o*Of]},b.rotate=function(a){return arguments.length?(p=a[0]%360*Nf,q=a[1]%360*Nf,r=a.length>2?a[2]%360*Nf:0,d()):[p*Of,q*Of,r*Of]},d3.rebind(b,j,"precision"),function(){return e=a.apply(this,arguments),b.invert=e.invert&&c,d()}}function Me(a,b){return{point:function(c,d){d=a(c*Nf,d*Nf),c=d[0],b.point(c>Lf?c-2*Lf:-Lf>c?c+2*Lf:c,d[1])},sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function Ne(a,b,c){return a?b||c?ue(Pe(a),Qe(b,c)):Pe(a):b||c?Qe(b,c):ve}function Oe(a){return function(b,c){return b+=a,[b>Lf?b-2*Lf:-Lf>b?b+2*Lf:b,c]}}function Pe(a){var b=Oe(a);return b.invert=Oe(-a),b}function Qe(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),Math.asin(Math.max(-1,Math.min(1,k*f+i*g)))]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),Math.asin(Math.max(-1,Math.min(1,k*d-h*e)))]},c}function Re(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function Se(a,b,c,d){var e,f,g,h,i,j,k;return e=d[a],f=e[0],g=e[1],e=d[b],h=e[0],i=e[1],e=d[c],j=e[0],k=e[1],(k-g)*(h-f)-(i-g)*(j-f)>0}function Te(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Ue(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Ve(a,b){var c={list:a.map(function(a,b){return{index:b,x:a[0],y:a[1]}}).sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.x<b.x?-1:a.x>b.x?1:0}),bottomSite:null},d={list:[],leftEnd:null,rightEnd:null,init:function(){d.leftEnd=d.createHalfEdge(null,"l"),d.rightEnd=d.createHalfEdge(null,"l"),d.leftEnd.r=d.rightEnd,d.rightEnd.l=d.leftEnd,d.list.unshift(d.leftEnd,d.rightEnd)},createHalfEdge:function(a,b){return{edge:a,side:b,vertex:null,l:null,r:null}},insert:function(a,b){b.l=a,b.r=a.r,a.r.l=b,a.r=b},leftBound:function(a){var b=d.leftEnd;do b=b.r;while(b!=d.rightEnd&&e.rightOf(b,a));return b=b.l},del:function(a){a.l.r=a.r,a.r.l=a.l,a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?c.bottomSite:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?c.bottomSite:a.edge.region[vh[a.side]]}},e={bisect:function(a,b){var c={region:{l:a,r:b},ep:{l:null,r:null}},d=b.x-a.x,e=b.y-a.y,f=d>0?d:-d,g=e>0?e:-e;return c.c=a.x*d+a.y*e+.5*(d*d+e*e),f>g?(c.a=1,c.b=e/d,c.c/=d):(c.b=1,c.a=d/e,c.c/=e),c},intersect:function(a,b){var c=a.edge,d=b.edge;if(!c||!d||c.region.r==d.region.r)return null;var e=c.a*d.b-c.b*d.a;if(1e-10>Math.abs(e))return null;var f,g,h=(c.c*d.b-d.c*c.b)/e,i=(d.c*c.a-c.c*d.a)/e,j=c.region.r,k=d.region.r;j.y<k.y||j.y==k.y&&j.x<k.x?(f=a,g=c):(f=b,g=d);var l=h>=g.region.r.x;return l&&"l"===f.side||!l&&"r"===f.side?null:{x:h,y:i}},rightOf:function(a,b){var c=a.edge,d=c.region.r,e=b.x>d.x;if(e&&"l"===a.side)return 1;if(!e&&"r"===a.side)return 0;if(1===c.a){var f=b.y-d.y,g=b.x-d.x,h=0,i=0;if(!e&&0>c.b||e&&c.b>=0?i=h=f>=c.b*g:(i=b.x+b.y*c.b>c.c,0>c.b&&(i=!i),i||(h=1)),!h){var j=d.x-c.region.l.x;i=c.b*(g*g-f*f)<j*f*(1+2*g/j+c.b*c.b),0>c.b&&(i=!i)}}else{var k=c.c-c.a*b.x,l=b.y-k,m=b.x-d.x,n=k-d.y;i=l*l>m*m+n*n}return"l"===a.side?i:!i},endPoint:function(a,c,d){a.ep[c]=d,a.ep[vh[c]]&&b(a)},distance:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}},f={list:[],insert:function(a,b,c){a.vertex=b,a.ystar=b.y+c;for(var d=0,e=f.list,g=e.length;g>d;d++){var h=e[d];if(!(a.ystar>h.ystar||a.ystar==h.ystar&&b.x>h.vertex.x))break}e.splice(d,0,a)},del:function(a){for(var b=0,c=f.list,d=c.length;d>b&&c[b]!=a;++b);c.splice(b,1)},empty:function(){return 0===f.list.length},nextEvent:function(a){for(var b=0,c=f.list,d=c.length;d>b;++b)if(c[b]==a)return c[b+1];return null},min:function(){var a=f.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return f.list.shift()}};d.init(),c.bottomSite=c.list.shift();for(var g,h,i,j,k,l,m,n,o,p,q,r,s,t=c.list.shift();;)if(f.empty()||(g=f.min()),t&&(f.empty()||t.y<g.y||t.y==g.y&&t.x<g.x))h=d.leftBound(t),i=d.right(h),m=d.rightRegion(h),r=e.bisect(m,t),l=d.createHalfEdge(r,"l"),d.insert(h,l),p=e.intersect(h,l),p&&(f.del(h),f.insert(h,p,e.distance(p,t))),h=l,l=d.createHalfEdge(r,"r"),d.insert(h,l),p=e.intersect(l,i),p&&f.insert(l,p,e.distance(p,t)),t=c.list.shift();else{if(f.empty())break;h=f.extractMin(),j=d.left(h),i=d.right(h),k=d.right(i),m=d.leftRegion(h),n=d.rightRegion(i),q=h.vertex,e.endPoint(h.edge,h.side,q),e.endPoint(i.edge,i.side,q),d.del(h),f.del(i),d.del(i),s="l",m.y>n.y&&(o=m,m=n,n=o,s="r"),r=e.bisect(m,n),l=d.createHalfEdge(r,s),d.insert(j,l),e.endPoint(r,vh[s],q),p=e.intersect(j,l),p&&(f.del(j),f.insert(j,p,e.distance(p,m))),p=e.intersect(l,k),p&&f.insert(l,p,e.distance(p,m))}for(h=d.right(d.leftEnd);h!=d.rightEnd;h=d.right(h))b(h.edge)}function We(){return{leaf:!0,nodes:[],point:null}}function Xe(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&Xe(a,i[0],c,d,g,h),i[1]&&Xe(a,i[1],g,d,e,h),i[2]&&Xe(a,i[2],c,h,g,f),i[3]&&Xe(a,i[3],g,h,e,f)}}function Ye(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ze(a,b,c,d){for(var e,f,g=0,h=b.length,i=c.length;h>g;){if(d>=i)return-1;if(e=b.charCodeAt(g++),37===e){if(f=Oh[b.charAt(g++)],!f||0>(d=f(a,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function $e(a){return RegExp("^(?:"+a.map(d3.requote).join("|")+")","i")}function _e(a){for(var b=new f,c=-1,d=a.length;d>++c;)b.set(a[c].toLowerCase(),c);return b}function af(a,b,c){a+="";var d=a.length;return c>d?Array(c-d+1).join(b)+a:a}function bf(a,b,c){Hh.lastIndex=0;var d=Hh.exec(b.substring(c));return d?c+=d[0].length:-1}function cf(a,b,c){Gh.lastIndex=0;var d=Gh.exec(b.substring(c));return d?c+=d[0].length:-1}function df(a,b,c){Kh.lastIndex=0;var d=Kh.exec(b.substring(c));return d?(a.m=Lh.get(d[0].toLowerCase()),c+=d[0].length):-1}function ef(a,b,c){Ih.lastIndex=0;var d=Ih.exec(b.substring(c));return d?(a.m=Jh.get(d[0].toLowerCase()),c+=d[0].length):-1}function ff(a,b,c){return Ze(a,""+Nh.c,b,c)}function gf(a,b,c){return Ze(a,""+Nh.x,b,c)}function hf(a,b,c){return Ze(a,""+Nh.X,b,c)}function jf(a,b,c){Ph.lastIndex=0;var d=Ph.exec(b.substring(c,c+4));return d?(a.y=+d[0],c+=d[0].length):-1}function kf(a,b,c){Ph.lastIndex=0;var d=Ph.exec(b.substring(c,c+2));return d?(a.y=lf(+d[0]),c+=d[0].length):-1}function lf(a){return a+(a>68?1900:2e3)}function mf(a,b,c){Ph.lastIndex=0;var d=Ph.exec(b.substring(c,c+2));return d?(a.m=d[0]-1,c+=d[0].length):-1}function nf(a,b,c){Ph.lastIndex=0;var d=Ph.exec(b.substring(c,c+2));return d?(a.d=+d[0],c+=d[0].length):-1}function of(a,b,c){Ph.lastIndex=0;var d=Ph.exec(b.substring(c,c+2));return d?(a.H=+d[0],c+=d[0].length):-1}function pf(a,b,c){Ph.lastIndex=0;var d=Ph.exec(b.substring(c,c+2));return d?(a.M=+d[0],c+=d[0].length):-1}function qf(a,b,c){Ph.lastIndex=0;var d=Ph.exec(b.substring(c,c+2));return d?(a.S=+d[0],c+=d[0].length):-1}function rf(a,b,c){Ph.lastIndex=0;var d=Ph.exec(b.substring(c,c+3));return d?(a.L=+d[0],c+=d[0].length):-1}function sf(a,b,c){var d=Qh.get(b.substring(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}function tf(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=~~(Math.abs(b)/60),e=Math.abs(b)%60;return c+af(d,"0",2)+af(e,"0",2)}function uf(a){return a.toISOString()}function vf(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new wh(c-1)),1),c}function f(a,c){return b(a=new wh(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{wh=Ye;var d=new Ye;return d._=a,g(d,b,c)}finally{wh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=wf(a);return i.floor=i,i.round=wf(d),i.ceil=wf(e),i.offset=wf(f),i.range=h,a}function wf(a){return function(b,c){try{wh=Ye;var d=new Ye;return d._=b,a(d,c)._}finally{wh=Date}}}function xf(a,b,c){function d(b){return a(b)}return d.invert=function(b){return zf(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(zf)},d.nice=function(a){return d.domain(Ob(d.domain(),function(){return a}))},d.ticks=function(c,e){var f=yf(d.domain());if("function"!=typeof c){var g=f[1]-f[0],h=g/c,i=d3.bisect(Sh,h);if(i==Sh.length)return b.year(f,c);if(!i)return a.ticks(c).map(zf);Math.log(h/Sh[i-1])<Math.log(Sh[i]/h)&&--i,c=b[i],e=c[1],c=c[0].range}return c(f[0],new Date(+f[1]+1),e)},d.tickFormat=function(){return c},d.copy=function(){return xf(a.copy(),b,c)},d3.rebind(d,a,"range","rangeRound","interpolate","clamp")}function yf(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function zf(a){return new Date(a)}function Af(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function Bf(a){var b=new Date(a,0,1);return b.setFullYear(a),b}function Cf(a){var b=a.getFullYear(),c=Bf(b),d=Bf(b+1);return b+(a-c)/(d-c)}function Df(a){var b=new Date(Date.UTC(a,0,1));return b.setUTCFullYear(a),b}function Ef(a){var b=a.getUTCFullYear(),c=Df(b),d=Df(b+1);return b+(a-c)/(d-c)}var Ff=".",Gf=",",Hf=[3,3];Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(If){var Jf=CSSStyleDeclaration.prototype,Kf=Jf.setProperty;Jf.setProperty=function(a,b,c){Kf.call(this,a,b+"",c)}}d3={version:"3.0.0"};var Lf=Math.PI,Mf=1e-6,Nf=Lf/180,Of=180/Lf,Pf=e;try{Pf(document.documentElement.childNodes)[0].nodeType}catch(Qf){Pf=d}var Rf=[].__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]};d3.map=function(a){var b=new f;for(var c in a)b.set(c,a[c]);return b},c(f,{has:function(a){return Sf+a in this},get:function(a){return this[Sf+a]},set:function(a,b){return this[Sf+a]=b},remove:function(a){return a=Sf+a,a in this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===Tf&&a.call(this,b.substring(1),this[b])}});var Sf="\x00",Tf=Sf.charCodeAt(0);d3.functor=i,d3.rebind=function(a,b){for(var c,d=1,e=arguments.length;e>++d;)a[c=arguments[d]]=j(a,b,b[c]);return a},d3.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:0/0},d3.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0},d3.mean=function(a,b){var c,d=a.length,e=0,f=-1,g=0;if(1===arguments.length)for(;d>++f;)k(c=a[f])&&(e+=(c-e)/++g);else for(;d>++f;)k(c=b.call(a,a[f],f))&&(e+=(c-e)/++g);return g?e:void 0},d3.median=function(a,b){return arguments.length>1&&(a=a.map(b)),a=a.filter(k),a.length?d3.quantile(a.sort(d3.ascending),.5):void 0},d3.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;f>++e&&(null==(c=a[e])||c!=c);)c=void 0;for(;f>++e;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;f>++e&&(null==(c=b.call(a,a[e],e))||c!=c);)c=void 0;for(;f>++e;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},d3.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;f>++e&&(null==(c=a[e])||c!=c);)c=void 0;for(;f>++e;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;f>++e&&(null==(c=b.call(a,a[e],e))||c!=c);)c=void 0;for(;f>++e;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},d3.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;g>++f&&(null==(c=e=a[f])||c!=c);)c=e=void 0;for(;g>++f;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;g>++f&&(null==(c=e=b.call(a,a[f],f))||c!=c);)c=void 0;for(;g>++f;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},d3.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(a,b){var c=arguments.length;2>c&&(b=1),1>c&&(a=0);var d=d3.random.normal();return function(){return Math.exp(a+b*d())}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b/a}}},d3.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;e>++f;)isNaN(c=+a[f])||(d+=c);else for(;e>++f;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d},d3.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},d3.shuffle=function(a){for(var b,c,d=a.length;d;)c=0|Math.random()*d--,b=a[d],a[d]=a[c],a[c]=b;return a},d3.transpose=function(a){return d3.zip.apply(d3,a)},d3.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=d3.min(arguments,l),c=Array(b);b>++a;)for(var d,e=-1,f=c[a]=Array(d);d>++e;)f[e]=arguments[e][a];return c},d3.bisector=function(a){return{left:function(b,c,d,e){for(3>arguments.length&&(d=0),4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;c>a.call(b,b[f],f)?d=f+1:e=f}return d},right:function(b,c,d,e){for(3>arguments.length&&(d=0),4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;a.call(b,b[f],f)>c?e=f:d=f+1}return d}}};var Uf=d3.bisector(function(a){return a});d3.bisectLeft=Uf.left,d3.bisect=d3.bisectRight=Uf.right,d3.nest=function(){function a(b,h){if(h>=g.length)return d?d.call(e,b):c?b.sort(c):b;for(var i,j,k,l=-1,m=b.length,n=g[h++],o=new f,p={};m>++l;)(k=o.get(i=n(j=b[l])))?k.push(j):o.set(i,[j]);return o.forEach(function(b,c){p[b]=a(c,h)}),p}function b(a,c){if(c>=g.length)return a;var d,e=[],f=h[c++];for(d in a)e.push({key:d,values:b(a[d],c)});return f&&e.sort(function(a,b){return f(a.key,b.key)}),e}var c,d,e={},g=[],h=[];return e.map=function(b){return a(b,0)},e.entries=function(c){return b(a(c,0),0)},e.key=function(a){return g.push(a),e},e.sortKeys=function(a){return h[g.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},d3.keys=function(a){var b=[];for(var c in a)b.push(c);return b},d3.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},d3.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},d3.permute=function(a,b){for(var c=[],d=-1,e=b.length;e>++d;)c[d]=a[b[d]];return c},d3.merge=function(a){return Array.prototype.concat.apply([],a)},d3.range=function(a,b,c){if(3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0)),1/0===(b-a)/c)throw Error("infinite range");var d,e=[],f=n(Math.abs(c)),g=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;b>(d=a+c*++g);)e.push(d/f);return e},d3.requote=function(a){return a.replace(Vf,"\\$&")};var Vf=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)},d3.xhr=function(a,b,c){function d(){var a=j.status;!a&&j.responseText||a>=200&&300>a||304===a?f.load.call(e,i.call(e,j)):f.error.call(e,j)}var e={},f=d3.dispatch("progress","load","error"),h={},i=g,j=new(window.XDomainRequest&&/^(http(s)?:)?\/\//.test(a)?XDomainRequest:XMLHttpRequest);return"onload"in j?j.onload=j.onerror=d:j.onreadystatechange=function(){j.readyState>3&&d()},j.onprogress=function(a){var b=d3.event;d3.event=a;try{f.progress.call(e,j)}finally{d3.event=b}},e.header=function(a,b){return a=(a+"").toLowerCase(),2>arguments.length?h[a]:(null==b?delete h[a]:h[a]=b+"",e)},e.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",e):b},e.response=function(a){return i=a,e},["get","post"].forEach(function(a){e[a]=function(){return e.send.apply(e,[a].concat(Pf(arguments)))}}),e.send=function(c,d,f){if(2===arguments.length&&"function"==typeof d&&(f=d,d=null),j.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),j.setRequestHeader)for(var g in h)j.setRequestHeader(g,h[g]);return null!=b&&j.overrideMimeType&&j.overrideMimeType(b),null!=f&&e.on("error",f).on("load",function(a){f(null,a)}),j.send(null==d?null:d),e},e.abort=function(){return j.abort(),e},d3.rebind(e,f,"on"),2===arguments.length&&"function"==typeof b&&(c=b,b=null),null==c?e:e.get(o(c))},d3.text=function(){return d3.xhr.apply(d3,arguments).response(p)},d3.json=function(a,b){return d3.xhr(a,"application/json",b).response(q)},d3.html=function(a,b){return d3.xhr(a,"text/html",b).response(r)},d3.xml=function(){return d3.xhr.apply(d3,arguments).response(s)};var Wf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Wf,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.substring(0,b),a=a.substring(b+1)),Wf.hasOwnProperty(c)?{space:Wf[c],local:a}:a}},d3.dispatch=function(){for(var a=new t,b=-1,c=arguments.length;c>++b;)a[arguments[b]]=u(a);return a},t.prototype.on=function(a,b){var c=a.indexOf("."),d="";return c>0&&(d=a.substring(c+1),a=a.substring(0,c)),2>arguments.length?this[a].on(d):this[a].on(d,b)},d3.format=function(a){var b=Xf.exec(a),c=b[1]||" ",d=b[2]||">",e=b[3]||"",f=b[4]||"",g=b[5],h=+b[6],i=b[7],j=b[8],k=b[9],l=1,m="",n=!1;switch(j&&(j=+j.substring(1)),(g||"0"===c&&"="===d)&&(g=c="0",d="=",i&&(h-=Math.floor((h-1)/4))),k){case"n":i=!0,k="g";break;case"%":l=100,m="%",k="f";break;case"p":l=100,m="%",k="r";break;case"b":case"o":case"x":case"X":f&&(f="0"+k.toLowerCase());case"c":case"d":n=!0,j=0;break;case"s":l=-1,k="r"}"#"===f&&(f=""),"r"!=k||j||(k="g"),k=Yf.get(k)||w;var o=g&&i;return function(a){if(n&&a%1)return"";var b=0>a||0===a&&0>1/a?(a=-a,"-"):e;if(0>l){var p=d3.formatPrefix(a,j);a=p.scale(a),m=p.symbol}else a*=l;a=k(a,j),!g&&i&&(a=Zf(a));var q=f.length+a.length+(o?0:b.length),r=h>q?Array(q=h-q+1).join(c):"";return o&&(a=Zf(r+a)),Ff&&a.replace(".",Ff),b+=f,("<"===d?b+a+r:">"===d?r+b+a:"^"===d?r.substring(0,q>>=1)+b+a+r.substring(q):b+(o?a:r+a))+m}};var Xf=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,Yf=d3.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return d3.round(a,b=v(a,b)).toFixed(Math.max(0,Math.min(20,b)))}}),Zf=g;if(Hf){var $f=Hf.length;Zf=function(a){for(var b=a.lastIndexOf("."),c=b>=0?"."+a.substring(b+1):(b=a.length,""),d=[],e=0,f=Hf[0];b>0&&f>0;)d.push(a.substring(b-=f,b+f)),f=Hf[e=(e+1)%$f];return d.reverse().join(Gf||"")+c}}var _f=["y","z","a","f","p","n","μ","m","","k","M","G","T","P","E","Z","Y"].map(x);d3.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=d3.round(a,v(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),_f[8+c/3]
};var ag=function(){return g},bg=d3.map({linear:ag,poly:E,quad:function(){return B},cubic:function(){return C},sin:function(){return F},exp:function(){return G},circle:function(){return H},elastic:I,back:J,bounce:function(){return K}}),cg=d3.map({"in":g,out:z,"in-out":A,"out-in":function(a){return A(z(a))}});d3.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,d=b>=0?a.substring(b+1):"in";return c=bg.get(c)||ag,d=cg.get(d)||g,y(d(c.apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.transform=function(a){var b=document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate();return new O(c?c.matrix:dg)})(a)},O.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var dg={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolate=function(a,b){for(var c,d=d3.interpolators.length;--d>=0&&!(c=d3.interpolators[d](a,b)););return c},d3.interpolateNumber=function(a,b){return b-=a,function(c){return a+b*c}},d3.interpolateRound=function(a,b){return b-=a,function(c){return Math.round(a+b*c)}},d3.interpolateString=function(a,b){var c,d,e,f,g,h=0,i=0,j=[],k=[];for(eg.lastIndex=0,d=0;c=eg.exec(b);++d)c.index&&j.push(b.substring(h,i=c.index)),k.push({i:j.length,x:c[0]}),j.push(null),h=eg.lastIndex;for(b.length>h&&j.push(b.substring(h)),d=0,f=k.length;(c=eg.exec(a))&&f>d;++d)if(g=k[d],g.x==c[0]){if(g.i)if(null==j[g.i+1])for(j[g.i-1]+=g.x,j.splice(g.i,1),e=d+1;f>e;++e)k[e].i--;else for(j[g.i-1]+=g.x+j[g.i+1],j.splice(g.i,2),e=d+1;f>e;++e)k[e].i-=2;else if(null==j[g.i+1])j[g.i]=g.x;else for(j[g.i]=g.x+j[g.i+1],j.splice(g.i+1,1),e=d+1;f>e;++e)k[e].i--;k.splice(d,1),f--,d--}else g.x=d3.interpolateNumber(parseFloat(c[0]),parseFloat(g.x));for(;f>d;)g=k.pop(),null==j[g.i+1]?j[g.i]=g.x:(j[g.i]=g.x+j[g.i+1],j.splice(g.i+1,1)),f--;return 1===j.length?null==j[0]?k[0].x:function(){return b}:function(a){for(d=0;f>d;++d)j[(g=k[d]).i]=g.x(a);return j.join("")}},d3.interpolateTransform=function(a,b){var c,d=[],e=[],f=d3.transform(a),g=d3.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:d3.interpolateNumber(h[0],i[0])},{i:3,x:d3.interpolateNumber(h[1],i[1])})):d.push(i[0]||i[1]?"translate("+i+")":""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:d3.interpolateNumber(n[0],o[0])},{i:c-2,x:d3.interpolateNumber(n[1],o[1])})):(1!=o[0]||1!=o[1])&&d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;c>++f;)d[(b=e[f]).i]=b.x(a);return d.join("")}},d3.interpolateRgb=function(a,b){a=d3.rgb(a),b=d3.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+Y(Math.round(c+f*a))+Y(Math.round(d+g*a))+Y(Math.round(e+h*a))}},d3.interpolateHsl=function(a,b){a=d3.hsl(a),b=d3.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return f>180?f-=360:-180>f&&(f+=360),function(a){return eb(c+f*a,d+g*a,e+h*a)+""}},d3.interpolateLab=function(a,b){a=d3.lab(a),b=d3.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return kb(c+f*a,d+g*a,e+h*a)+""}},d3.interpolateHcl=function(a,b){a=d3.hcl(a),b=d3.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return f>180?f-=360:-180>f&&(f+=360),function(a){return hb(c+f*a,d+g*a,e+h*a)+""}},d3.interpolateArray=function(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(d3.interpolate(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}},d3.interpolateObject=function(a,b){var c,d={},e={};for(c in a)c in b?d[c]=S(c)(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}};var eg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(a,b){return b instanceof Array&&d3.interpolateArray(a,b)},function(a,b){return("string"==typeof a||"string"==typeof b)&&d3.interpolateString(a+"",b+"")},function(a,b){return("string"==typeof b?gg.has(b)||/^(#|rgb\(|hsl\()/.test(b):b instanceof V)&&d3.interpolateRgb(a,b)},function(a,b){return!isNaN(a=+a)&&!isNaN(b=+b)&&d3.interpolateNumber(a,b)}],V.prototype.toString=function(){return this.rgb()+""},d3.rgb=function(a,b,c){return 1===arguments.length?a instanceof X?W(a.r,a.g,a.b):Z(""+a,W,eb):W(~~a,~~b,~~c)};var fg=X.prototype=new V;fg.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),W(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a)))):W(e,e,e)},fg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),W(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))},fg.hsl=function(){return $(this.r,this.g,this.b)},fg.toString=function(){return"#"+Y(this.r)+Y(this.g)+Y(this.b)};var gg=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});gg.forEach(function(a,b){gg.set(a,Z(b,W,eb))}),d3.hsl=function(a,b,c){return 1===arguments.length?a instanceof db?cb(a.h,a.s,a.l):Z(""+a,$,cb):cb(+a,+b,+c)};var hg=db.prototype=new V;hg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),cb(this.h,this.s,this.l/a)},hg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),cb(this.h,this.s,a*this.l)},hg.rgb=function(){return eb(this.h,this.s,this.l)},d3.hcl=function(a,b,c){return 1===arguments.length?a instanceof gb?fb(a.h,a.c,a.l):a instanceof jb?lb(a.l,a.a,a.b):lb((a=_((a=d3.rgb(a)).r,a.g,a.b)).l,a.a,a.b):fb(+a,+b,+c)};var ig=gb.prototype=new V;ig.brighter=function(a){return fb(this.h,this.c,Math.min(100,this.l+jg*(arguments.length?a:1)))},ig.darker=function(a){return fb(this.h,this.c,Math.max(0,this.l-jg*(arguments.length?a:1)))},ig.rgb=function(){return hb(this.h,this.c,this.l).rgb()},d3.lab=function(a,b,c){return 1===arguments.length?a instanceof jb?ib(a.l,a.a,a.b):a instanceof gb?hb(a.l,a.c,a.h):_((a=d3.rgb(a)).r,a.g,a.b):ib(+a,+b,+c)};var jg=18,kg=.95047,lg=1,mg=1.08883,ng=jb.prototype=new V;ng.brighter=function(a){return ib(Math.min(100,this.l+jg*(arguments.length?a:1)),this.a,this.b)},ng.darker=function(a){return ib(Math.max(0,this.l-jg*(arguments.length?a:1)),this.a,this.b)},ng.rgb=function(){return kb(this.l,this.a,this.b)};var og=function(a,b){return b.querySelector(a)},pg=function(a,b){return b.querySelectorAll(a)},qg=document.documentElement,rg=qg.matchesSelector||qg.webkitMatchesSelector||qg.mozMatchesSelector||qg.msMatchesSelector||qg.oMatchesSelector,sg=function(a,b){return rg.call(a,b)};"function"==typeof Sizzle&&(og=function(a,b){return Sizzle(a,b)[0]||null},pg=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},sg=Sizzle.matchesSelector);var tg=[];d3.selection=function(){return ug},d3.selection.prototype=tg,tg.select=function(a){var b,c,d,e,f=[];"function"!=typeof a&&(a=qb(a));for(var g=-1,h=this.length;h>++g;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;j>++i;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return pb(f)},tg.selectAll=function(a){var b,c,d=[];"function"!=typeof a&&(a=rb(a));for(var e=-1,f=this.length;f>++e;)for(var g=this[e],h=-1,i=g.length;i>++h;)(c=g[h])&&(d.push(b=Pf(a.call(c,c.__data__,h))),b.parentNode=c);return pb(d)},tg.attr=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node();return a=d3.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(sb(b,a[b]));return this}return this.each(sb(a,b))},tg.classed=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,e=-1;if(b=c.classList){for(;d>++e;)if(!b.contains(a[e]))return!1}else for(b=c.className,null!=b.baseVal&&(b=b.baseVal);d>++e;)if(!tb(a[e]).test(b))return!1;return!0}for(b in a)this.each(ub(b,a[b]));return this}return this.each(ub(a,b))},tg.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(wb(c,a[c],b));return this}if(2>d)return getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(wb(a,b,c))},tg.property=function(a,b){if(2>arguments.length){if("string"==typeof a)return this.node()[a];for(b in a)this.each(xb(b,a[b]));return this}return this.each(xb(a,b))},tg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},tg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},tg.append=function(a){function b(){return this.appendChild(document.createElementNS(this.namespaceURI,a))}function c(){return this.appendChild(document.createElementNS(a.space,a.local))}return a=d3.ns.qualify(a),this.select(a.local?c:b)},tg.insert=function(a,b){function c(){return this.insertBefore(document.createElementNS(this.namespaceURI,a),og(b,this))}function d(){return this.insertBefore(document.createElementNS(a.space,a.local),og(b,this))}return a=d3.ns.qualify(a),this.select(a.local?d:c)},tg.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},tg.data=function(a,b){function c(a,c){var d,e,g,h=a.length,l=c.length,m=Math.min(h,l),n=Math.max(h,l),o=[],p=[],q=[];if(b){var r,s=new f,t=[],u=c.length;for(d=-1;h>++d;)r=b.call(e=a[d],e.__data__,d),s.has(r)?q[u++]=e:s.set(r,e),t.push(r);for(d=-1;l>++d;)r=b.call(c,g=c[d],d),s.has(r)?(o[d]=e=s.get(r),e.__data__=g,p[d]=q[d]=null):(p[d]=yb(g),o[d]=q[d]=null),s.remove(r);for(d=-1;h>++d;)s.has(t[d])&&(q[d]=a[d])}else{for(d=-1;m>++d;)e=a[d],g=c[d],e?(e.__data__=g,o[d]=e,p[d]=q[d]=null):(p[d]=yb(g),o[d]=q[d]=null);for(;l>d;++d)p[d]=yb(c[d]),o[d]=q[d]=null;for(;n>d;++d)q[d]=a[d],p[d]=o[d]=null}p.update=o,p.parentNode=o.parentNode=q.parentNode=a.parentNode,i.push(p),j.push(o),k.push(q)}var d,e,g=-1,h=this.length;if(!arguments.length){for(a=Array(h=(d=this[0]).length);h>++g;)(e=d[g])&&(a[g]=e.__data__);return a}var i=Db([]),j=pb([]),k=pb([]);if("function"==typeof a)for(;h>++g;)c(d=this[g],a.call(d,d.parentNode.__data__,g));else for(;h>++g;)c(d=this[g],a);return j.enter=function(){return i},j.exit=function(){return k},j},tg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},tg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=zb(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h)&&b.push(d)}return pb(e)},tg.order=function(){for(var a=-1,b=this.length;b>++a;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},tg.sort=function(a){a=Ab.apply(this,arguments);for(var b=-1,c=this.length;c>++b;)this[b].sort(a);return this.order()},tg.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(Bb(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(Bb(a,b,c))},tg.each=function(a){return Cb(this,function(b,c,d){a.call(b,b.__data__,c,d)})},tg.call=function(a){var b=Pf(arguments);return a.apply(b[0]=this,b),this},tg.empty=function(){return!this.node()},tg.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},tg.transition=function(){var a,b,c=wg||++yg,d=[],e=Object.create(zg);e.time=Date.now();for(var f=-1,g=this.length;g>++f;){d.push(a=[]);for(var h=this[f],i=-1,j=h.length;j>++i;)(b=h[i])&&Fb(b,i,c,e),a.push(b)}return Eb(d,c)};var ug=pb([[document]]);ug[0].parentNode=qg,d3.select=function(a){return"string"==typeof a?ug.select(a):pb([[a]])},d3.selectAll=function(a){return"string"==typeof a?ug.selectAll(a):pb([Pf(a)])};var vg=[];d3.selection.enter=Db,d3.selection.enter.prototype=vg,vg.append=tg.append,vg.insert=tg.insert,vg.empty=tg.empty,vg.node=tg.node,vg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;i>++h;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;k>++j;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j)),c.__data__=f.__data__):b.push(null)}return pb(g)};var wg,xg=[],yg=0,zg={ease:D,delay:0,duration:250};xg.call=tg.call,xg.empty=tg.empty,xg.node=tg.node,d3.transition=function(a){return arguments.length?wg?a.transition():a:ug.transition()},d3.transition.prototype=xg,xg.select=function(a){var b,c,d,e=this.id,f=[];"function"!=typeof a&&(a=qb(a));for(var g=-1,h=this.length;h>++g;){f.push(b=[]);for(var i=this[g],j=-1,k=i.length;k>++j;)(d=i[j])&&(c=a.call(d,d.__data__,j))?("__data__"in d&&(c.__data__=d.__data__),Fb(c,j,e,d.__transition__[e]),b.push(c)):b.push(null)}return Eb(f,e)},xg.selectAll=function(a){var b,c,d,e,f,g=this.id,h=[];"function"!=typeof a&&(a=rb(a));for(var i=-1,j=this.length;j>++i;)for(var k=this[i],l=-1,m=k.length;m>++l;)if(d=k[l]){f=d.__transition__[g],c=a.call(d,d.__data__,l),h.push(b=[]);for(var n=-1,o=c.length;o>++n;)Fb(e=c[n],n,g,f),b.push(e)}return Eb(h,g)},xg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=zb(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h)&&b.push(d)}return Eb(e,this.id,this.time).ease(this.ease())},xg.attr=function(a,b){function c(){this.removeAttribute(f)}function d(){this.removeAttributeNS(f.space,f.local)}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var e=S(a),f=d3.ns.qualify(a);return Hb(this,"attr."+a,b,function(a){function b(){var b,c=this.getAttribute(f);return c!==a&&(b=e(c,a),function(a){this.setAttribute(f,b(a))})}function g(){var b,c=this.getAttributeNS(f.space,f.local);return c!==a&&(b=e(c,a),function(a){this.setAttributeNS(f.space,f.local,b(a))})}return null==a?f.local?d:c:(a+="",f.local?g:b)})},xg.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=d3.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},xg.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}var f=S(a);return Hb(this,"style."+a,b,function(b){function e(){var d,e=getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=f(e,b),function(b){this.style.setProperty(a,d(b),c)})}return null==b?d:(b+="",e)})},xg.styleTween=function(a,b,c){return 3>arguments.length&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})},xg.text=function(a){return Hb(this,"text",a,Gb)},xg.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})},xg.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=d3.ease.apply(d3,arguments)),Cb(this,function(c){c.__transition__[b].ease=a}))},xg.delay=function(a){var b=this.id;return Cb(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=0|a.call(c,c.__data__,d,e)}:(a|=0,function(c){c.__transition__[b].delay=a}))},xg.duration=function(a){var b=this.id;return Cb(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,0|a.call(c,c.__data__,d,e))}:(a=Math.max(1,0|a),function(c){c.__transition__[b].duration=a}))},xg.each=function(a,b){var c=this.id;if(2>arguments.length){var d=zg,e=wg;wg=c,Cb(this,function(b,d,e){zg=b.__transition__[c],a.call(b,b.__data__,d,e)}),zg=d,wg=e}else Cb(this,function(d){d.__transition__[c].event.on(a,b)});return this},xg.transition=function(){for(var a,b,c,d,e=this.id,f=++yg,g=[],h=0,i=this.length;i>h;h++){g.push(a=[]);for(var b=this[h],j=0,k=b.length;k>j;j++)(c=b[j])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,Fb(c,j,f,d)),a.push(c)}return Eb(g,f)},xg.tween=function(a,b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):Cb(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};var Ag,Bg,Cg=0,Dg={},Eg=null;d3.timer=function(a,b,c){if(3>arguments.length){if(2>arguments.length)b=0;else if(!isFinite(b))return;c=Date.now()}var d=Dg[a.id];d&&d.callback===a?(d.then=c,d.delay=b):Dg[a.id=++Cg]=Eg={callback:a,then:c,delay:b,next:Eg},Ag||(Bg=clearTimeout(Bg),Ag=1,Fg(Ib))},d3.timer.flush=function(){for(var a,b=Date.now(),c=Eg;c;)a=b-c.then,c.delay||(c.flush=c.callback(a)),c=c.next;Jb()};var Fg=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};d3.mouse=function(a){return Kb(a,M())};var Gg=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(a,b){return 2>arguments.length&&(b=M().touches),b?Pf(b).map(function(b){var c=Kb(a,b);return c.identifier=b.identifier,c}):[]},d3.scale={},d3.scale.linear=function(){return Qb([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return Yb(d3.scale.linear(),Zb)};var Hg=d3.format(".0e");Zb.pow=function(a){return Math.pow(10,a)},$b.pow=function(a){return-Math.pow(10,-a)},d3.scale.pow=function(){return _b(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return bc([],{t:"range",a:[[]]})},d3.scale.category10=function(){return d3.scale.ordinal().range(Ig)},d3.scale.category20=function(){return d3.scale.ordinal().range(Jg)},d3.scale.category20b=function(){return d3.scale.ordinal().range(Kg)},d3.scale.category20c=function(){return d3.scale.ordinal().range(Lg)};var Ig=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Jg=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Kg=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Lg=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return cc([],[])},d3.scale.quantize=function(){return dc(0,1,[0,1])},d3.scale.threshold=function(){return ec([.5],[0,1])},d3.scale.identity=function(){return fc([0,1])},d3.svg={},d3.svg.arc=function(){function a(){var a=b.apply(this,arguments),f=c.apply(this,arguments),g=d.apply(this,arguments)+Mg,h=e.apply(this,arguments)+Mg,i=(g>h&&(i=g,g=h,h=i),h-g),j=Lf>i?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=Ng?a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":a?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+a*m+","+a*n+"A"+a+","+a+" 0 "+j+",0 "+a*k+","+a*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0Z"}var b=gc,c=hc,d=ic,e=jc;return a.innerRadius=function(c){return arguments.length?(b=i(c),a):b},a.outerRadius=function(b){return arguments.length?(c=i(b),a):c},a.startAngle=function(b){return arguments.length?(d=i(b),a):d},a.endAngle=function(b){return arguments.length?(e=i(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+Mg;return[Math.cos(f)*a,Math.sin(f)*a]},a};var Mg=-Lf/2,Ng=2*Lf-1e-6;d3.svg.line=function(){return kc(g)};var Og=d3.map({linear:nc,"linear-closed":oc,"step-before":pc,"step-after":qc,basis:wc,"basis-open":xc,"basis-closed":yc,bundle:zc,cardinal:tc,"cardinal-open":rc,"cardinal-closed":sc,monotone:Fc});Og.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Pg=[0,2/3,1/3,0],Qg=[0,1/3,2/3,0],Rg=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var a=kc(Gc);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},pc.reverse=qc,qc.reverse=pc,d3.svg.area=function(){return Hc(g)},d3.svg.area.radial=function(){var a=Hc(Gc);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},d3.svg.chord=function(){function c(a,b){var c=d(this,h,a,b),i=d(this,j,a,b);return"M"+c.p0+f(c.r,c.p1,c.a1-c.a0)+(e(c,i)?g(c.r,c.p1,c.r,c.p0):g(c.r,c.p1,i.r,i.p0)+f(i.r,i.p1,i.a1-i.a0)+g(i.r,i.p1,c.r,c.p0))+"Z"}function d(a,b,c,d){var e=b.call(a,c,d),f=k.call(a,e,d),g=l.call(a,e,d)+Mg,h=m.call(a,e,d)+Mg;return{r:f,a0:g,a1:h,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(h),f*Math.sin(h)]}}function e(a,b){return a.a0==b.a0&&a.a1==b.a1}function f(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Lf)+",1 "+b}function g(a,b,c,d){return"Q 0,0 "+d}var h=b,j=a,k=Ic,l=ic,m=jc;return c.radius=function(a){return arguments.length?(k=i(a),c):k},c.source=function(a){return arguments.length?(h=i(a),c):h},c.target=function(a){return arguments.length?(j=i(a),c):j},c.startAngle=function(a){return arguments.length?(l=i(a),c):l},c.endAngle=function(a){return arguments.length?(m=i(a),c):m},c},d3.svg.diagonal=function(){function c(a,b){var c=d.call(this,a,b),g=e.call(this,a,b),h=(c.y+g.y)/2,i=[c,{x:c.x,y:h},{x:g.x,y:h},g];return i=i.map(f),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var d=b,e=a,f=Jc;return c.source=function(a){return arguments.length?(d=i(a),c):d},c.target=function(a){return arguments.length?(e=i(a),c):e},c.projection=function(a){return arguments.length?(f=a,c):f},c},d3.svg.diagonal.radial=function(){var a=d3.svg.diagonal(),b=Jc,c=a.projection;return a.projection=function(a){return arguments.length?c(Kc(b=a)):b},a},d3.svg.symbol=function(){function a(a,d){return(Sg.get(b.call(this,a,d))||Nc)(c.call(this,a,d))}var b=Mc,c=Lc;return a.type=function(c){return arguments.length?(b=i(c),a):b},a.size=function(b){return arguments.length?(c=i(b),a):c},a};var Sg=d3.map({circle:Nc,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Ug)),c=b*Ug;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Tg),c=b*Tg/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Tg),c=b*Tg/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});d3.svg.symbolTypes=Sg.keys();var Tg=Math.sqrt(3),Ug=Math.tan(30*Nf);d3.svg.axis=function(){function a(a){a.each(function(){var a,l=d3.select(this),m=null==j?c.ticks?c.ticks.apply(c,i):c.domain():j,n=null==b?c.tickFormat?c.tickFormat.apply(c,i):String:b,o=Qc(c,m,k),p=l.selectAll(".minor").data(o,String),q=p.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),r=d3.transition(p.exit()).style("opacity",1e-6).remove(),s=d3.transition(p).style("opacity",1),t=l.selectAll("g").data(m,String),u=t.enter().insert("g","path").style("opacity",1e-6),v=d3.transition(t.exit()).style("opacity",1e-6).remove(),w=d3.transition(t).style("opacity",1),x=Nb(c),y=l.selectAll(".domain").data([0]),z=d3.transition(y),A=c.copy(),B=this.__chart__||A;this.__chart__=A,y.enter().append("path").attr("class","domain"),u.append("line").attr("class","tick"),u.append("text");var C=u.select("line"),D=w.select("line"),E=t.select("text").text(n),F=u.select("text"),G=w.select("text");switch(d){case"bottom":a=Oc,q.attr("y2",f),s.attr("x2",0).attr("y2",f),C.attr("y2",e),F.attr("y",Math.max(e,0)+h),D.attr("x2",0).attr("y2",e),G.attr("x",0).attr("y",Math.max(e,0)+h),E.attr("dy",".71em").style("text-anchor","middle"),z.attr("d","M"+x[0]+","+g+"V0H"+x[1]+"V"+g);break;case"top":a=Oc,q.attr("y2",-f),s.attr("x2",0).attr("y2",-f),C.attr("y2",-e),F.attr("y",-(Math.max(e,0)+h)),D.attr("x2",0).attr("y2",-e),G.attr("x",0).attr("y",-(Math.max(e,0)+h)),E.attr("dy","0em").style("text-anchor","middle"),z.attr("d","M"+x[0]+","+-g+"V0H"+x[1]+"V"+-g);break;case"left":a=Pc,q.attr("x2",-f),s.attr("x2",-f).attr("y2",0),C.attr("x2",-e),F.attr("x",-(Math.max(e,0)+h)),D.attr("x2",-e).attr("y2",0),G.attr("x",-(Math.max(e,0)+h)).attr("y",0),E.attr("dy",".32em").style("text-anchor","end"),z.attr("d","M"+-g+","+x[0]+"H0V"+x[1]+"H"+-g);break;case"right":a=Pc,q.attr("x2",f),s.attr("x2",f).attr("y2",0),C.attr("x2",e),F.attr("x",Math.max(e,0)+h),D.attr("x2",e).attr("y2",0),G.attr("x",Math.max(e,0)+h).attr("y",0),E.attr("dy",".32em").style("text-anchor","start"),z.attr("d","M"+g+","+x[0]+"H0V"+x[1]+"H"+g)}if(c.ticks)u.call(a,B),w.call(a,A),v.call(a,A),q.call(a,B),s.call(a,A),r.call(a,A);else{var H=A.rangeBand()/2,I=function(a){return A(a)+H};u.call(a,I),w.call(a,I)}})}var b,c=d3.scale.linear(),d="bottom",e=6,f=6,g=6,h=3,i=[10],j=null,k=0;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b,a):d},a.ticks=function(){return arguments.length?(i=arguments,a):i},a.tickValues=function(b){return arguments.length?(j=b,a):j},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b,c){if(!arguments.length)return e;var d=arguments.length-1;return e=+b,f=d>1?+c:e,g=d>0?+arguments[d]:e,a},a.tickPadding=function(b){return arguments.length?(h=+b,a):h},a.tickSubdivide=function(b){return arguments.length?(k=+b,a):k},a},d3.svg.brush=function(){function a(f){f.each(function(){var f,g=d3.select(this),k=g.selectAll(".background").data([0]),l=g.selectAll(".extent").data([0]),m=g.selectAll(".resize").data(j,String);g.style("pointer-events","all").on("mousedown.brush",e).on("touchstart.brush",e),k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),l.enter().append("rect").attr("class","extent").style("cursor","move"),m.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Vg[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),m.style("display",a.empty()?"none":null),m.exit().remove(),h&&(f=Nb(h),k.attr("x",f[0]).attr("width",f[1]-f[0]),c(g)),i&&(f=Nb(i),k.attr("y",f[0]).attr("height",f[1]-f[0]),d(g)),b(g)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+k[+/e$/.test(a)][0]+","+k[+/^s/.test(a)][1]+")"})}function c(a){a.select(".extent").attr("x",k[0][0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1][0]-k[0][0])}function d(a){a.select(".extent").attr("y",k[0][1]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1][1]-k[0][1])}function e(){function e(){var a=d3.event.changedTouches;return a?d3.touches(r,a)[0]:d3.mouse(r)}function j(){32==d3.event.keyCode&&(y||(p=null,z[0]-=k[1][0],z[1]-=k[1][1],y=2),L())}function l(){32==d3.event.keyCode&&2==y&&(z[0]+=k[1][0],z[1]+=k[1][1],y=0,L())}function m(){var a=e(),f=!1;q&&(a[0]+=q[0],a[1]+=q[1]),y||(d3.event.altKey?(p||(p=[(k[0][0]+k[1][0])/2,(k[0][1]+k[1][1])/2]),z[0]=k[+(a[0]<p[0])][0],z[1]=k[+(a[1]<p[1])][1]):p=null),w&&n(a,h,0)&&(c(u),f=!0),x&&n(a,i,1)&&(d(u),f=!0),f&&(b(u),t({type:"brush",mode:y?"move":"resize"}))}function n(a,b,c){var d,e,g=Nb(b),h=g[0],i=g[1],j=z[c],l=k[1][c]-k[0][c];return y&&(h-=j,i-=l+j),d=Math.max(h,Math.min(i,a[c])),y?e=(d+=j)+l:(p&&(j=Math.max(h,Math.min(i,2*p[c]-d))),d>j?(e=d,d=j):e=j),k[0][c]!==d||k[1][c]!==e?(f=null,k[0][c]=d,k[1][c]=e,!0):void 0}function o(){m(),u.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),d3.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),t({type:"brushend"}),L()}var p,q,r=this,s=d3.select(d3.event.target),t=g.of(r,arguments),u=d3.select(r),v=s.datum(),w=!/^(n|s)$/.test(v)&&h,x=!/^(e|w)$/.test(v)&&i,y=s.classed("extent"),z=e(),A=d3.select(window).on("mousemove.brush",m).on("mouseup.brush",o).on("touchmove.brush",m).on("touchend.brush",o).on("keydown.brush",j).on("keyup.brush",l);
if(y)z[0]=k[0][0]-z[0],z[1]=k[0][1]-z[1];else if(v){var B=+/w$/.test(v),C=+/^n/.test(v);q=[k[1-B][0]-z[0],k[1-C][1]-z[1]],z[0]=k[B][0],z[1]=k[C][1]}else d3.event.altKey&&(p=z.slice());u.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",s.style("cursor")),t({type:"brushstart"}),m(),L()}var f,g=N(a,"brushstart","brush","brushend"),h=null,i=null,j=Wg[0],k=[[0,0],[0,0]];return a.x=function(b){return arguments.length?(h=b,j=Wg[!h<<1|!i],a):h},a.y=function(b){return arguments.length?(i=b,j=Wg[!h<<1|!i],a):i},a.extent=function(b){var c,d,e,g,j;return arguments.length?(f=[[0,0],[0,0]],h&&(c=b[0],d=b[1],i&&(c=c[0],d=d[0]),f[0][0]=c,f[1][0]=d,h.invert&&(c=h(c),d=h(d)),c>d&&(j=c,c=d,d=j),k[0][0]=0|c,k[1][0]=0|d),i&&(e=b[0],g=b[1],h&&(e=e[1],g=g[1]),f[0][1]=e,f[1][1]=g,i.invert&&(e=i(e),g=i(g)),e>g&&(j=e,e=g,g=j),k[0][1]=0|e,k[1][1]=0|g),a):(b=f||k,h&&(c=b[0][0],d=b[1][0],f||(c=k[0][0],d=k[1][0],h.invert&&(c=h.invert(c),d=h.invert(d)),c>d&&(j=c,c=d,d=j))),i&&(e=b[0][1],g=b[1][1],f||(e=k[0][1],g=k[1][1],i.invert&&(e=i.invert(e),g=i.invert(g)),e>g&&(j=e,e=g,g=j))),h&&i?[[c,e],[d,g]]:h?[c,d]:i&&[e,g])},a.clear=function(){return f=null,k[0][0]=k[0][1]=k[1][0]=k[1][1]=0,a},a.empty=function(){return h&&k[0][0]===k[1][0]||i&&k[0][1]===k[1][1]},d3.rebind(a,g,"on")};var Vg={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wg=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.behavior={},d3.behavior.drag=function(){function a(){this.on("mousedown.drag",b).on("touchstart.drag",b)}function b(){function a(){var a=h.parentNode;return null!=k?d3.touches(a).filter(function(a){return a.identifier===k})[0]:d3.mouse(a)}function b(){if(!h.parentNode)return e();var b=a(),c=b[0]-l[0],d=b[1]-l[1];m|=c|d,l=b,L(),i({type:"drag",x:b[0]+g[0],y:b[1]+g[1],dx:c,dy:d})}function e(){i({type:"dragend"}),m&&(L(),d3.event.target===j&&n.on("click.drag",f,!0)),n.on(null!=k?"touchmove.drag-"+k:"mousemove.drag",null).on(null!=k?"touchend.drag-"+k:"mouseup.drag",null)}function f(){L(),n.on("click.drag",null)}var g,h=this,i=c.of(h,arguments),j=d3.event.target,k=d3.event.touches?d3.event.changedTouches[0].identifier:null,l=a(),m=0,n=d3.select(window).on(null!=k?"touchmove.drag-"+k:"mousemove.drag",b).on(null!=k?"touchend.drag-"+k:"mouseup.drag",e,!0);d?(g=d.apply(h,arguments),g=[g.x-l[0],g.y-l[1]]):g=[0,0],null==k&&L(),i({type:"dragstart"})}var c=N(a,"drag","dragstart","dragend"),d=null;return a.origin=function(b){return arguments.length?(d=b,a):d},d3.rebind(a,c,"on")},d3.behavior.zoom=function(){function a(){this.on("mousedown.zoom",h).on("mousewheel.zoom",i).on("mousemove.zoom",j).on("DOMMouseScroll.zoom",i).on("dblclick.zoom",k).on("touchstart.zoom",l).on("touchmove.zoom",m).on("touchend.zoom",l)}function b(a){return[(a[0]-u[0])/v,(a[1]-u[1])/v]}function c(a){return[a[0]*v+u[0],a[1]*v+u[1]]}function d(a){v=Math.max(w[0],Math.min(w[1],a))}function e(a,b){b=c(b),u[0]+=a[0]-b[0],u[1]+=a[1]-b[1]}function f(){q&&q.domain(p.range().map(function(a){return(a-u[0])/v}).map(p.invert)),s&&s.domain(r.range().map(function(a){return(a-u[1])/v}).map(r.invert))}function g(a){f(),d3.event.preventDefault(),a({type:"zoom",scale:v,translate:u})}function h(){function a(){j=1,e(d3.mouse(f),l),g(h)}function c(){j&&L(),k.on("mousemove.zoom",null).on("mouseup.zoom",null),j&&d3.event.target===i&&k.on("click.zoom",d,!0)}function d(){L(),k.on("click.zoom",null)}var f=this,h=x.of(f,arguments),i=d3.event.target,j=0,k=d3.select(window).on("mousemove.zoom",a).on("mouseup.zoom",c),l=b(d3.mouse(f));window.focus(),L()}function i(){n||(n=b(d3.mouse(this))),d(Math.pow(2,.002*Rc())*v),e(d3.mouse(this),n),g(x.of(this,arguments))}function j(){n=null}function k(){var a=d3.mouse(this),c=b(a),f=Math.log(v)/Math.LN2;d(Math.pow(2,d3.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)),e(a,c),g(x.of(this,arguments))}function l(){var a=d3.touches(this),c=Date.now();if(o=v,n={},a.forEach(function(a){n[a.identifier]=b(a)}),L(),1===a.length){if(500>c-t){var f=a[0],h=b(a[0]);d(2*v),e(f,h),g(x.of(this,arguments))}t=c}}function m(){var a=d3.touches(this),b=a[0],c=n[b.identifier];if(f=a[1]){var f,h=n[f.identifier];b=[(b[0]+f[0])/2,(b[1]+f[1])/2],c=[(c[0]+h[0])/2,(c[1]+h[1])/2],d(d3.event.scale*o)}e(b,c),t=null,g(x.of(this,arguments))}var n,o,p,q,r,s,t,u=[0,0],v=1,w=Yg,x=N(a,"zoom");return a.translate=function(b){return arguments.length?(u=b.map(Number),f(),a):u},a.scale=function(b){return arguments.length?(v=+b,f(),a):v},a.scaleExtent=function(b){return arguments.length?(w=null==b?Yg:b.map(Number),a):w},a.x=function(b){return arguments.length?(q=b,p=b.copy(),u=[0,0],v=1,a):q},a.y=function(b){return arguments.length?(s=b,r=b.copy(),u=[0,0],v=1,a):s},d3.rebind(a,x,"on")};var Xg,Yg=[0,1/0];d3.layout={},d3.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;d>++c;)b.push(Sc(a[c]));return b}},d3.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=d3.range(f),r=[];for(c=[],d=[],a=0,m=-1;f>++m;){for(j=0,n=-1;f>++n;)j+=e[m][n];p.push(j),r.push(d3.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(2*Lf-k*f)/a,j=0,m=-1;f>++m;){for(l=j,n=-1;f>++n;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;f>++m;)for(n=m-1;f>++n;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},d3.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=1/Math.sqrt(f*f+g*g);if(r>(e-c)*h){var i=b.charge*h*h;return a.px-=f*i,a.py-=g*i,!0}if(b.point&&isFinite(h)){var i=b.pointCharge*h*h;a.px-=f*i,a.py-=g*i}}return!b.charge}}function b(a){a.px=d3.event.x,a.py=d3.event.y,j.resume()}var c,d,e,f,h,j={},k=d3.dispatch("start","tick","end"),l=[1,1],m=.9,n=$c,o=_c,p=-30,q=.1,r=.8,s=[],t=[];return j.tick=function(){if(.005>(d*=.99))return k.end({type:"end",alpha:d=0}),!0;var b,c,g,i,j,n,o,r,u,v=s.length,w=t.length;for(c=0;w>c;++c)g=t[c],i=g.source,j=g.target,r=j.x-i.x,u=j.y-i.y,(n=r*r+u*u)&&(n=d*f[c]*((n=Math.sqrt(n))-e[c])/n,r*=n,u*=n,j.x-=r*(o=i.weight/(j.weight+i.weight)),j.y-=u*o,i.x+=r*(o=1-o),i.y+=u*o);if((o=d*q)&&(r=l[0]/2,u=l[1]/2,c=-1,o))for(;v>++c;)g=s[c],g.x+=(r-g.x)*o,g.y+=(u-g.y)*o;if(p)for(Zc(b=d3.geom.quadtree(s),d,h),c=-1;v>++c;)(g=s[c]).fixed||b.visit(a(g));for(c=-1;v>++c;)g=s[c],g.fixed?(g.x=g.px,g.y=g.py):(g.x-=(g.px-(g.px=g.x))*m,g.y-=(g.py-(g.py=g.y))*m);k.tick({type:"tick",alpha:d})},j.nodes=function(a){return arguments.length?(s=a,j):s},j.links=function(a){return arguments.length?(t=a,j):t},j.size=function(a){return arguments.length?(l=a,j):l},j.linkDistance=function(a){return arguments.length?(n=i(a),j):n},j.distance=j.linkDistance,j.linkStrength=function(a){return arguments.length?(o=i(a),j):o},j.friction=function(a){return arguments.length?(m=a,j):m},j.charge=function(a){return arguments.length?(p="function"==typeof a?a:+a,j):p},j.gravity=function(a){return arguments.length?(q=a,j):q},j.theta=function(a){return arguments.length?(r=a,j):r},j.alpha=function(a){return arguments.length?(d?d=a>0?a:0:a>0&&(k.start({type:"start",alpha:d=a}),d3.timer(j.tick)),j):d},j.start=function(){function a(a,d){for(var e,f=b(c),g=-1,h=f.length;h>++g;)if(!isNaN(e=f[g][a]))return e;return Math.random()*d}function b(){if(!g){for(g=[],d=0;k>d;++d)g[d]=[];for(d=0;m>d;++d){var a=t[d];g[a.source.index].push(a.target),g[a.target.index].push(a.source)}}return g[c]}var c,d,g,i,k=s.length,m=t.length,q=l[0],r=l[1];for(c=0;k>c;++c)(i=s[c]).index=c,i.weight=0;for(e=[],f=[],c=0;m>c;++c)i=t[c],"number"==typeof i.source&&(i.source=s[i.source]),"number"==typeof i.target&&(i.target=s[i.target]),e[c]=n.call(this,i,c),f[c]=o.call(this,i,c),++i.source.weight,++i.target.weight;for(c=0;k>c;++c)i=s[c],isNaN(i.x)&&(i.x=a("x",q)),isNaN(i.y)&&(i.y=a("y",r)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(h=[],"function"==typeof p)for(c=0;k>c;++c)h[c]=+p.call(this,s[c],c);else for(c=0;k>c;++c)h[c]=p;return j.resume()},j.resume=function(){return j.alpha(.1)},j.stop=function(){return j.alpha(0)},j.drag=function(){c||(c=d3.behavior.drag().origin(g).on("dragstart",Vc).on("drag",b).on("dragend",Wc)),this.on("mouseover.force",Xc).on("mouseout.force",Yc).call(c)},d3.rebind(j,k,"on")},d3.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;g>++j;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;e>++f;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=d3.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},ld(c,d)},d3.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),i=(("function"==typeof e?e.apply(this,arguments):e)-d)/d3.sum(g),j=d3.range(f.length);null!=c&&j.sort(c===Zg?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var k=[];return j.forEach(function(a){var b;k[a]={data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*i}}),k}var b=Number,c=Zg,d=0,e=2*Lf;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var Zg={};d3.layout.stack=function(){function a(g,i){var j=g.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),h.call(a,b,c)]})}),l=c.call(a,k,i);j=d3.permute(j,l),k=d3.permute(k,l);var m,n,o,p=d.call(a,k,i),q=j.length,r=j[0].length;for(n=0;r>n;++n)for(e.call(a,j[0][n],o=p[n],k[0][n][1]),m=1;q>m;++m)e.call(a,j[m][n],o+=k[m-1][n][1],k[m][n][1]);return g}var b=g,c=dd,d=ed,e=cd,f=ad,h=bd;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:$g.get(b)||dd,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:_g.get(b)||ed,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(h=b,a):h},a.out=function(b){return arguments.length?(e=b,a):e},a};var $g=d3.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(fd),f=a.map(gd),g=d3.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return d3.range(a.length).reverse()},"default":dd}),_g=d3.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:ed});d3.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;n>++f;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;m>++f;)h=j[f],h>=k[0]&&k[1]>=h&&(g=i[d3.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=kd,e=id;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=i(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return jd(a,b)}:i(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},d3.layout.hierarchy=function(){function a(b,g,h){var i=e.call(c,b,g);if(b.depth=g,h.push(b),i&&(j=i.length)){for(var j,k,l=-1,m=b.children=[],n=0,o=g+1;j>++l;)k=a(i[l],o,h),k.parent=b,m.push(k),n+=k.value;d&&m.sort(d),f&&(b.value=n)}else f&&(b.value=+f.call(c,b,g)||0);return b}function b(a,d){var e=a.children,g=0;if(e&&(h=e.length))for(var h,i=-1,j=d+1;h>++i;)g+=b(e[i],j);else f&&(g=+f.call(c,a,d)||0);return f&&(a.value=g),g}function c(b){var c=[];return a(b,0,c),c}var d=od,e=md,f=nd;return c.sort=function(a){return arguments.length?(d=a,c):d},c.children=function(a){return arguments.length?(e=a,c):e},c.value=function(a){return arguments.length?(f=a,c):f},c.revalue=function(a){return b(a,0),a},c},d3.layout.pack=function(){function a(a,e){var f=b.call(this,a,e),g=f[0];g.x=0,g.y=0,Kd(g,function(a){a.r=Math.sqrt(a.value)}),Kd(g,ud);var h=d[0],i=d[1],j=Math.max(2*g.r/h,2*g.r/i);if(c>0){var k=c*j/2;Kd(g,function(a){a.r+=k}),Kd(g,ud),Kd(g,function(a){a.r-=k}),j=Math.max(2*g.r/h,2*g.r/i)}return xd(g,h/2,i/2,1/j),f}var b=d3.layout.hierarchy().sort(qd),c=0,d=[1,1];return a.size=function(b){return arguments.length?(d=b,a):d},a.padding=function(b){return arguments.length?(c=+b,a):c},ld(a,b)},d3.layout.cluster=function(){function a(a,e){var f,g=b.call(this,a,e),h=g[0],i=0;Kd(h,function(a){var b=a.children;b&&b.length?(a.x=Ad(b),a.y=zd(b)):(a.x=f?i+=c(a,f):0,a.y=0,f=a)});var j=Bd(h),k=Cd(h),l=j.x-c(j,k)/2,m=k.x+c(k,j)/2;return Kd(h,function(a){a.x=(a.x-l)/(m-l)*d[0],a.y=(1-(h.y?a.y/h.y:1))*d[1]}),g}var b=d3.layout.hierarchy().sort(null).value(null),c=Dd,d=[1,1];return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(d=b,a):d},ld(a,b)},d3.layout.tree=function(){function a(a,e){function f(a,b){var d=a.children,e=a._tree;if(d&&(g=d.length)){for(var g,i,j,k=d[0],l=k,m=-1;g>++m;)j=d[m],f(j,i),l=h(j,i,l),i=j;Ld(a);var n=.5*(k._tree.prelim+j._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-n):e.prelim=n}else b&&(e.prelim=b._tree.prelim+c(a,b))}function g(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(d=c.length)){var d,e=-1;for(b+=a._tree.mod;d>++e;)g(c[e],b)}}function h(a,b,d){if(b){for(var e,f=a,g=a,h=b,i=a.parent.children[0],j=f._tree.mod,k=g._tree.mod,l=h._tree.mod,m=i._tree.mod;h=Fd(h),f=Ed(f),h&&f;)i=Ed(i),g=Fd(g),g._tree.ancestor=a,e=h._tree.prelim+l-f._tree.prelim-j+c(h,f),e>0&&(Md(Nd(h,a,d),a,e),j+=e,k+=e),l+=h._tree.mod,j+=f._tree.mod,m+=i._tree.mod,k+=g._tree.mod;h&&!Fd(g)&&(g._tree.thread=h,g._tree.mod+=l-k),f&&!Ed(i)&&(i._tree.thread=f,i._tree.mod+=j-m,d=a)}return d}var i=b.call(this,a,e),j=i[0];Kd(j,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}}),f(j),g(j,-j._tree.prelim);var k=Gd(j,Id),l=Gd(j,Hd),m=Gd(j,Jd),n=k.x-c(k,l)/2,o=l.x+c(l,k)/2,p=m.depth||1;return Kd(j,function(a){a.x=(a.x-n)/(o-n)*d[0],a.y=a.depth/p*d[1],delete a._tree}),i}var b=d3.layout.hierarchy().sort(null).value(null),c=Dd,d=[1,1];return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(d=b,a):d},ld(a,b)},d3.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;f>++e;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n||"slice-dice"===n&&1&c.depth?j.dy:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||o>=(h=d(k,p))?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;h>++g;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);g>++f;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);g>++f;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=d3.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Od,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Od(b):Pd(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Pd(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Od:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},ld(f,h)},d3.csv=Qd(",","text/csv"),d3.tsv=Qd("	","text/tab-separated-values"),d3.geo={},d3.geo.stream=function(a,b){ah.hasOwnProperty(a.type)?ah[a.type](a,b):Rd(a,b)};var ah={Feature:function(a,b){Rd(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;e>++d;)Rd(c[d].geometry,b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;e>++d;)Rd(c[d],b)}},bh={Sphere:function(a,b){b.sphere()},Point:function(a,b){var c=a.coordinates;b.point(c[0],c[1])},MultiPoint:function(a,b){for(var c,d=a.coordinates,e=-1,f=d.length;f>++e;)c=d[e],b.point(c[0],c[1])},LineString:function(a,b){Sd(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;e>++d;)Sd(c[d],b,0)},Polygon:function(a,b){Td(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;e>++d;)Td(c[d],b)}};d3.geo.albersUsa=function(){function a(a){return b(a)(a)}function b(a){var b=a[0],g=a[1];return g>50?d:-140>b?e:21>g?f:c}var c=d3.geo.albers(),d=d3.geo.albers().rotate([160,0]).center([0,60]).parallels([55,65]),e=d3.geo.albers().rotate([160,0]).center([0,20]).parallels([8,18]),f=d3.geo.albers().rotate([60,0]).center([0,10]).parallels([8,18]);return a.scale=function(b){return arguments.length?(c.scale(b),d.scale(.6*b),e.scale(b),f.scale(1.5*b),a.translate(c.translate())):c.scale()},a.translate=function(b){if(!arguments.length)return c.translate();var g=c.scale(),h=b[0],i=b[1];return c.translate(b),d.translate([h-.4*g,i+.17*g]),e.translate([h-.19*g,i+.2*g]),f.translate([h+.58*g,i+.43*g]),a},a.scale(c.scale())},(d3.geo.albers=function(){var a=29.5*Nf,b=45.5*Nf,c=Le(be),d=c(a,b);return d.parallels=function(d){return arguments.length?c(a=d[0]*Nf,b=d[1]*Nf):[a*Of,b*Of]},d.rotate([98,0]).center([0,38]).scale(1e3)}).raw=be;var ch=Re(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(d3.geo.azimuthalEqualArea=function(){return Ke(ch)}).raw=ch;var dh=Re(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},g);(d3.geo.azimuthalEquidistant=function(){return Ke(dh)}).raw=dh,d3.geo.bounds=ce(),d3.geo.centroid=function(a){eh=fh=gh=hh=ih=0,d3.geo.stream(a,jh);var b;return fh&&Math.abs(b=Math.sqrt(gh*gh+hh*hh+ih*ih))>Mf?[Math.atan2(hh,gh)*Of,Math.asin(Math.max(-1,Math.min(1,ih/b)))*Of]:void 0};var eh,fh,gh,hh,ih,jh={sphere:Lb,point:de,lineStart:fe,lineEnd:ge,polygonStart:function(){eh=2,jh.lineStart=ee},polygonEnd:function(){jh.lineStart=fe}};d3.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=Ne(a[0]*Nf,a[1]*Nf,0),e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Of,a[1]*=Of}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=he((b=+d)*Nf,e*Nf),a):b},a.precision=function(d){return arguments.length?(c=he(b*Nf,(e=+d)*Nf),a):e},a.angle(90)};var kh=je(h,qe,se);(d3.geo.equirectangular=function(){return Ke(ve).scale(250/Lf)}).raw=ve.invert=ve;var lh=Re(function(a){return 1/a},Math.atan);(d3.geo.gnomonic=function(){return Ke(lh)}).raw=lh,d3.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return d3.range(Math.ceil(d/i)*i,c,i).map(g).concat(d3.range(Math.ceil(f/j)*j,e,j).map(h))}var c,d,e,f,g,h,i=22.5,j=i,k=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[g(d).concat(h(e).slice(1),g(c).reverse().slice(1),h(f).reverse().slice(1))]}},a.extent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],f=+b[0][1],e=+b[1][1],d>c&&(b=d,d=c,c=b),f>e&&(b=f,f=e,e=b),a.precision(k)):[[d,f],[c,e]]},a.step=function(b){return arguments.length?(i=+b[0],j=+b[1],a):[i,j]},a.precision=function(b){return arguments.length?(k=+b,g=we(f,e,k),h=xe(d,c,k),a):k},a.extent([[-180+Mf,-90+Mf],[180-Mf,90-Mf]])},d3.geo.interpolate=function(a,b){return ye(a[0]*Nf,a[1]*Nf,b[0]*Nf,b[1]*Nf)},d3.geo.greatArc=function(){function c(){for(var a=d||g.apply(this,arguments),b=e||h.apply(this,arguments),c=f||d3.geo.interpolate(a,b),e=0,j=i/c.distance,k=[a];1>(e+=j);)k.push(c(e));return k.push(b),{type:"LineString",coordinates:k}}var d,e,f,g=b,h=a,i=6*Nf;return c.distance=function(){return(f||d3.geo.interpolate(d||g.apply(this,arguments),e||h.apply(this,arguments))).distance},c.source=function(a){return arguments.length?(g=a,d="function"==typeof a?null:a,f=d&&e?d3.geo.interpolate(d,e):null,c):g},c.target=function(a){return arguments.length?(h=a,e="function"==typeof a?null:a,f=d&&e?d3.geo.interpolate(d,e):null,c):h},c.precision=function(a){return arguments.length?(i=a*Nf,c):i/Nf},c},ze.invert=function(a,b){return[2*Lf*a,2*Math.atan(Math.exp(2*Lf*b))-Lf/2]},(d3.geo.mercator=function(){return Ke(ze).scale(500)}).raw=ze;var mh=Re(function(){return 1},Math.asin);(d3.geo.orthographic=function(){return Ke(mh)}).raw=mh,d3.geo.path=function(){function a(a){return a&&d3.geo.stream(a,d(e.pointRadius("function"==typeof f?+f.apply(this,arguments):f))),e.result()}var b,c,d,e,f=4.5;return a.area=function(a){return nh=0,d3.geo.stream(a,d(ph)),nh},a.centroid=function(a){return eh=gh=hh=ih=0,d3.geo.stream(a,d(qh)),ih?[gh/ih,hh/ih]:void 0},a.bounds=function(a){return ce(b)(a)},a.projection=function(c){return arguments.length?(d=(b=c)?c.stream||Be(c):g,a):b},a.context=function(b){return arguments.length?(e=null==(c=b)?new Ce:new De(b),a):c},a.pointRadius=function(b){return arguments.length?(f="function"==typeof b?b:+b,a):f},a.projection(d3.geo.albersUsa()).context(null)};var nh,oh,ph={point:Lb,lineStart:Lb,lineEnd:Lb,polygonStart:function(){oh=0,ph.lineStart=Ee},polygonEnd:function(){ph.lineStart=ph.lineEnd=ph.point=Lb,nh+=Math.abs(oh/2)}},qh={point:Fe,lineStart:Ge,lineEnd:He,polygonStart:function(){qh.lineStart=Ie},polygonEnd:function(){qh.point=Fe,qh.lineStart=Ge,qh.lineEnd=He}};d3.geo.area=function(a){return rh=0,d3.geo.stream(a,th),rh};var rh,sh,th={sphere:function(){rh+=4*Lf},point:Lb,lineStart:Lb,lineEnd:Lb,polygonStart:function(){sh=0,th.lineStart=Je},polygonEnd:function(){rh+=0>sh?4*Lf+sh:sh,th.lineStart=th.lineEnd=th.point=Lb}};d3.geo.projection=Ke,d3.geo.projectionMutator=Le;var uh=Re(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(d3.geo.stereographic=function(){return Ke(uh)}).raw=uh,d3.geom={},d3.geom.hull=function(a){if(3>a.length)return[];var b,c,d,e,f,g,h,i,j,k,l=a.length,m=l-1,n=[],o=[],p=0;for(b=1;l>b;++b)a[b][1]<a[p][1]?p=b:a[b][1]==a[p][1]&&(p=a[b][0]<a[p][0]?b:p);for(b=0;l>b;++b)b!==p&&(e=a[b][1]-a[p][1],d=a[b][0]-a[p][0],n.push({angle:Math.atan2(e,d),index:b}));for(n.sort(function(a,b){return a.angle-b.angle}),j=n[0].angle,i=n[0].index,h=0,b=1;m>b;++b)c=n[b].index,j==n[b].angle?(d=a[i][0]-a[p][0],e=a[i][1]-a[p][1],f=a[c][0]-a[p][0],g=a[c][1]-a[p][1],d*d+e*e>=f*f+g*g?n[b].index=-1:(n[h].index=-1,j=n[b].angle,h=b,i=c)):(j=n[b].angle,h=b,i=c);for(o.push(p),b=0,c=0;2>b;++c)-1!==n[c].index&&(o.push(n[c].index),b++);for(k=o.length;m>c;++c)if(-1!==n[c].index){for(;!Se(o[k-2],o[k-1],n[c].index,a);)--k;o[k++]=n[c].index}var q=[];for(b=0;k>b;++b)q.push(a[o[b]]);return q},d3.geom.polygon=function(a){return a.area=function(){for(var b=0,c=a.length,d=a[c-1][1]*a[0][0]-a[c-1][0]*a[0][1];c>++b;)d+=a[b-1][1]*a[b][0]-a[b-1][0]*a[b][1];return.5*d},a.centroid=function(b){var c,d,e=-1,f=a.length,g=0,h=0,i=a[f-1];for(arguments.length||(b=-1/(6*a.area()));f>++e;)c=i,i=a[e],d=c[0]*i[1]-i[0]*c[1],g+=(c[0]+i[0])*d,h+=(c[1]+i[1])*d;return[g*b,h*b]},a.clip=function(b){for(var c,d,e,f,g,h,i=-1,j=a.length,k=a[j-1];j>++i;){for(c=b.slice(),b.length=0,f=a[i],g=c[(e=c.length)-1],d=-1;e>++d;)h=c[d],Te(h,k,f)?(Te(g,k,f)||b.push(Ue(g,h,k,f)),b.push(h)):Te(g,k,f)&&b.push(Ue(g,h,k,f)),g=h;k=f}return b},a},d3.geom.voronoi=function(a){var b=a.map(function(){return[]}),c=1e6;return Ve(a,function(a){var d,e,f,g,h,i;1===a.a&&a.b>=0?(d=a.ep.r,e=a.ep.l):(d=a.ep.l,e=a.ep.r),1===a.a?(h=d?d.y:-c,f=a.c-a.b*h,i=e?e.y:c,g=a.c-a.b*i):(f=d?d.x:-c,h=a.c-a.a*f,g=e?e.x:c,i=a.c-a.a*g);var j=[f,h],k=[g,i];b[a.region.l.index].push(j,k),b[a.region.r.index].push(j,k)}),b=b.map(function(b,c){var d=a[c][0],e=a[c][1],f=b.map(function(a){return Math.atan2(a[0]-d,a[1]-e)});return d3.range(b.length).sort(function(a,b){return f[a]-f[b]}).filter(function(a,b,c){return!b||f[a]-f[c[b-1]]>Mf}).map(function(a){return b[a]})}),b.forEach(function(b,d){var e=b.length;if(!e)return b.push([-c,-c],[-c,c],[c,c],[c,-c]);if(!(e>2)){var f=a[d],g=b[0],h=b[1],i=f[0],j=f[1],k=g[0],l=g[1],m=h[0],n=h[1],o=Math.abs(m-k),p=n-l;if(Mf>Math.abs(p)){var q=l>j?-c:c;b.push([-c,q],[c,q])}else if(Mf>o){var r=k>i?-c:c;b.push([r,-c],[r,c])}else{var q=(k-i)*(n-l)>(m-k)*(l-j)?c:-c,s=Math.abs(p)-o;Mf>Math.abs(s)?b.push([0>p?q:-q,q]):(s>0&&(q*=-1),b.push([-c,q],[c,q]))}}}),b};var vh={l:"r",r:"l"};d3.geom.delaunay=function(a){var b=a.map(function(){return[]}),c=[];return Ve(a,function(c){b[c.region.l.index].push(a[c.region.r.index])}),b.forEach(function(b,d){var e=a[d],f=e[0],g=e[1];b.forEach(function(a){a.angle=Math.atan2(a[0]-f,a[1]-g)}),b.sort(function(a,b){return a.angle-b.angle});for(var h=0,i=b.length-1;i>h;h++)c.push([e,b[h],b[h+1]])}),c},d3.geom.quadtree=function(a,b,c,d,e){function f(a,b,c,d,e,f){if(!isNaN(b.x)&&!isNaN(b.y))if(a.leaf){var h=a.point;h?.01>Math.abs(h.x-b.x)+Math.abs(h.y-b.y)?g(a,b,c,d,e,f):(a.point=null,g(a,h,c,d,e,f),g(a,b,c,d,e,f)):a.point=b}else g(a,b,c,d,e,f)}function g(a,b,c,d,e,g){var h=.5*(c+e),i=.5*(d+g),j=b.x>=h,k=b.y>=i,l=(k<<1)+j;a.leaf=!1,a=a.nodes[l]||(a.nodes[l]=We()),j?c=h:e=h,k?d=i:g=i,f(a,b,c,d,e,g)}var h,i=-1,j=a.length;if(5>arguments.length)if(3===arguments.length)e=c,d=b,c=b=0;else for(b=c=1/0,d=e=-1/0;j>++i;)h=a[i],b>h.x&&(b=h.x),c>h.y&&(c=h.y),h.x>d&&(d=h.x),h.y>e&&(e=h.y);var k=d-b,l=e-c;k>l?e=c+k:d=b+l;var m=We();return m.add=function(a){f(m,a,b,c,d,e)},m.visit=function(a){Xe(a,m,b,c,d,e)},a.forEach(m.add),m},d3.time={};var wh=Date,xh=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Ye.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){yh.setUTCDate.apply(this._,arguments)},setDay:function(){yh.setUTCDay.apply(this._,arguments)},setFullYear:function(){yh.setUTCFullYear.apply(this._,arguments)},setHours:function(){yh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){yh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){yh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){yh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){yh.setUTCSeconds.apply(this._,arguments)},setTime:function(){yh.setTime.apply(this._,arguments)}};var yh=Date.prototype,zh="%a %b %e %X %Y",Ah="%m/%d/%Y",Bh="%H:%M:%S",Ch=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Dh=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Eh=["January","February","March","April","May","June","July","August","September","October","November","December"],Fh=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];d3.time.format=function(a){function b(b){for(var d,e,f,g=[],h=-1,i=0;c>++h;)37===a.charCodeAt(h)&&(g.push(a.substring(i,h)),null!=(e=Mh[d=a.charAt(++h)])&&(d=a.charAt(++h)),(f=Nh[d])&&(d=f(b,null==e?"e"===d?" ":"0":e)),g.push(d),i=h+1);return g.push(a.substring(i,h)),g.join("")}var c=a.length;return b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},d=Ze(c,a,b,0);if(d!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);var e=new wh;return e.setFullYear(c.y,c.m,c.d),e.setHours(c.H,c.M,c.S,c.L),e},b.toString=function(){return a},b};var Gh=$e(Ch),Hh=$e(Dh),Ih=$e(Eh),Jh=_e(Eh),Kh=$e(Fh),Lh=_e(Fh),Mh={"-":"",_:" ",0:"0"},Nh={a:function(a){return Dh[a.getDay()]},A:function(a){return Ch[a.getDay()]},b:function(a){return Fh[a.getMonth()]},B:function(a){return Eh[a.getMonth()]},c:d3.time.format(zh),d:function(a,b){return af(a.getDate(),b,2)},e:function(a,b){return af(a.getDate(),b,2)},H:function(a,b){return af(a.getHours(),b,2)},I:function(a,b){return af(a.getHours()%12||12,b,2)},j:function(a,b){return af(1+d3.time.dayOfYear(a),b,3)},L:function(a,b){return af(a.getMilliseconds(),b,3)},m:function(a,b){return af(a.getMonth()+1,b,2)},M:function(a,b){return af(a.getMinutes(),b,2)},p:function(a){return a.getHours()>=12?"PM":"AM"},S:function(a,b){return af(a.getSeconds(),b,2)},U:function(a,b){return af(d3.time.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return af(d3.time.mondayOfYear(a),b,2)},x:d3.time.format(Ah),X:d3.time.format(Bh),y:function(a,b){return af(a.getFullYear()%100,b,2)},Y:function(a,b){return af(a.getFullYear()%1e4,b,4)},Z:tf,"%":function(){return"%"}},Oh={a:bf,A:cf,b:df,B:ef,c:ff,d:nf,e:nf,H:of,I:of,L:rf,m:mf,M:pf,p:sf,S:qf,x:gf,X:hf,y:kf,Y:jf},Ph=/^\s*\d+/,Qh=d3.map({am:0,pm:1});d3.time.format.utc=function(a){function b(a){try{wh=Ye;var b=new wh;return b._=a,c(b)}finally{wh=Date}}var c=d3.time.format(a);return b.parse=function(a){try{wh=Ye;var b=c.parse(a);return b&&b._}finally{wh=Date}},b.toString=c.toString,b};var Rh=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?uf:Rh,uf.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},uf.toString=Rh.toString,d3.time.second=vf(function(a){return new wh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),d3.time.seconds=d3.time.second.range,d3.time.seconds.utc=d3.time.second.utc.range,d3.time.minute=vf(function(a){return new wh(6e4*Math.floor(a/6e4))
},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),d3.time.minutes=d3.time.minute.range,d3.time.minutes.utc=d3.time.minute.utc.range,d3.time.hour=vf(function(a){var b=a.getTimezoneOffset()/60;return new wh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),d3.time.hours=d3.time.hour.range,d3.time.hours.utc=d3.time.hour.utc.range,d3.time.day=vf(function(a){var b=new wh(1970,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),d3.time.days=d3.time.day.range,d3.time.days.utc=d3.time.day.utc.range,d3.time.dayOfYear=function(a){var b=d3.time.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},xh.forEach(function(a,b){a=a.toLowerCase(),b=7-b;var c=d3.time[a]=vf(function(a){return(a=d3.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});d3.time[a+"s"]=c.range,d3.time[a+"s"].utc=c.utc.range,d3.time[a+"OfYear"]=function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)}}),d3.time.week=d3.time.sunday,d3.time.weeks=d3.time.sunday.range,d3.time.weeks.utc=d3.time.sunday.utc.range,d3.time.weekOfYear=d3.time.sundayOfYear,d3.time.month=vf(function(a){return a=d3.time.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),d3.time.months=d3.time.month.range,d3.time.months.utc=d3.time.month.utc.range,d3.time.year=vf(function(a){return a=d3.time.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),d3.time.years=d3.time.year.range,d3.time.years.utc=d3.time.year.utc.range;var Sh=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Th=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],Uh=[[d3.time.format("%Y"),h],[d3.time.format("%B"),function(a){return a.getMonth()}],[d3.time.format("%b %d"),function(a){return 1!=a.getDate()}],[d3.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[d3.time.format("%I %p"),function(a){return a.getHours()}],[d3.time.format("%I:%M"),function(a){return a.getMinutes()}],[d3.time.format(":%S"),function(a){return a.getSeconds()}],[d3.time.format(".%L"),function(a){return a.getMilliseconds()}]],Vh=d3.scale.linear(),Wh=Af(Uh);Th.year=function(a,b){return Vh.domain(a.map(Cf)).ticks(b).map(Bf)},d3.time.scale=function(){return xf(d3.scale.linear(),Th,Wh)};var Xh=Th.map(function(a){return[a[0].utc,a[1]]}),Yh=[[d3.time.format.utc("%Y"),h],[d3.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[d3.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[d3.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],Zh=Af(Yh);Xh.year=function(a,b){return Vh.domain(a.map(Ef)).ticks(b).map(Df)},d3.time.scale.utc=function(){return xf(d3.scale.linear(),Xh,Zh)}}(),!function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F=this,G=F&&F.ejs,H=Array.prototype,I=Object.prototype,J=H.slice,K=I.toString,L=I.hasOwnProperty,M=H.forEach,N=Array.isArray,O=H.indexOf,P={};E="undefined"!=typeof exports?exports:F.ejs={},a=function(a,b){return L.call(a,b)},b=function(b,c,d){if(null!=b)if(M&&b.forEach===M)b.forEach(c,d);else if(b.length===+b.length){for(var e=0,f=b.length;f>e;e++)if(c.call(d,b[e],e,b)===P)return}else for(var g in b)if(a(b,g)&&c.call(d,b[g],g,b)===P)return},c=function(a){return b(J.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},d=function(a,b){if(null==a)return-1;var c=0,d=a.length;if(O&&a.indexOf===O)return a.indexOf(b);for(;d>c;c++)if(a[c]===b)return c;return-1},e=function(b,c){var e,f,h={};for(e in b)a(b,e)&&-1===d(c,e)&&(f=b[e],g(f)&&(f=f.join()),h[e]=f);return h},f=function(b,c){var d,f=e(b,c),g=[];for(d in f)a(f,d)&&g.push(d+"="+encodeURIComponent(f[d]));return g.join("&")},g=N||function(a){return"[object Array]"===K.call(a)},h=function(a){return a===Object(a)},i=function(a){return"[object String]"===K.call(a)},j=function(a){return"[object Number]"===K.call(a)},k="function"!=typeof/./?function(a){return"function"==typeof a}:function(a){return"[object Function]"===K.call(a)},l=function(b){return h(b)&&a(b,"_type")&&a(b,"_self")&&a(b,"toString")},m=function(a){return l(a)&&"query"===a._type()},n=function(a){return l(a)&&"rescore"===a._type()},o=function(a){return l(a)&&"filter"===a._type()},p=function(a){return l(a)&&"facet"===a._type()},q=function(a){return l(a)&&"script field"===a._type()},r=function(a){return l(a)&&"geo point"===a._type()},s=function(a){return l(a)&&"indexed shape"===a._type()},t=function(a){return l(a)&&"shape"===a._type()},u=function(a){return l(a)&&"sort"===a._type()},v=function(a){return l(a)&&"highlight"===a._type()},w=function(a){return l(a)&&"suggest"===a._type()},x=function(a){return l(a)&&"generator"===a._type()},y=function(a){return l(a)&&"cluster health"===a._type()},z=function(a){return l(a)&&"cluster state"===a._type()},A=function(a){return l(a)&&"node stats"===a._type()},B=function(a){return l(a)&&"node info"===a._type()},C=function(a){return l(a)&&"request"===a._type()},D=function(a){return l(a)&&"multi search request"===a._type()},E.DateHistogramFacet=function(a){var b={};return b[a]={date_histogram:{}},{field:function(c){return null==c?b[a].date_histogram.field:(b[a].date_histogram.field=c,this)},keyField:function(c){return null==c?b[a].date_histogram.key_field:(b[a].date_histogram.key_field=c,this)},valueField:function(c){return null==c?b[a].date_histogram.value_field:(b[a].date_histogram.value_field=c,this)},interval:function(c){return null==c?b[a].date_histogram.interval:(b[a].date_histogram.interval=c,this)},timeZone:function(c){return null==c?b[a].date_histogram.time_zone:(b[a].date_histogram.time_zone=c,this)},preZone:function(c){return null==c?b[a].date_histogram.pre_zone:(b[a].date_histogram.pre_zone=c,this)},preZoneAdjustLargeInterval:function(c){return null==c?b[a].date_histogram.pre_zone_adjust_large_interval:(b[a].date_histogram.pre_zone_adjust_large_interval=c,this)},postZone:function(c){return null==c?b[a].date_histogram.post_zone:(b[a].date_histogram.post_zone=c,this)},preOffset:function(c){return null==c?b[a].date_histogram.pre_offset:(b[a].date_histogram.pre_offset=c,this)},postOffset:function(c){return null==c?b[a].date_histogram.post_offset:(b[a].date_histogram.post_offset=c,this)},factor:function(c){return null==c?b[a].date_histogram.factor:(b[a].date_histogram.factor=c,this)},valueScript:function(c){return null==c?b[a].date_histogram.value_script:(b[a].date_histogram.value_script=c,this)},order:function(c){return null==c?b[a].date_histogram.order:(c=c.toLowerCase(),("time"===c||"count"===c||"total"===c)&&(b[a].date_histogram.order=c),this)},lang:function(c){return null==c?b[a].date_histogram.lang:(b[a].date_histogram.lang=c,this)},params:function(c){return null==c?b[a].date_histogram.params:(b[a].date_histogram.params=c,this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!o(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},E.FilterFacet=function(a){var b={};return b[a]={},{filter:function(c){if(null==c)return b[a].filter;if(!o(c))throw new TypeError("Argument must be a Filter");return b[a].filter=c._self(),this},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!o(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},E.GeoDistanceFacet=function(a){var b={},c=E.GeoPoint([0,0]),d="location";return b[a]={geo_distance:{location:c._self(),ranges:[]}},{field:function(c){var e=b[a].geo_distance[d];return null==c?d:(delete b[a].geo_distance[d],d=c,b[a].geo_distance[c]=e,this)},point:function(e){if(null==e)return c;if(!r(e))throw new TypeError("Argument must be a GeoPoint");return c=e,b[a].geo_distance[d]=e._self(),this},addRange:function(c,d){return 0===arguments.length?b[a].geo_distance.ranges:(b[a].geo_distance.ranges.push({from:c,to:d}),this)},addUnboundedFrom:function(c){return null==c?b[a].geo_distance.ranges:(b[a].geo_distance.ranges.push({from:c}),this)},addUnboundedTo:function(c){return null==c?b[a].geo_distance.ranges:(b[a].geo_distance.ranges.push({to:c}),this)},unit:function(c){return null==c?b[a].geo_distance.unit:(c=c.toLowerCase(),("mi"===c||"km"===c)&&(b[a].geo_distance.unit=c),this)},distanceType:function(c){return null==c?b[a].geo_distance.distance_type:(c=c.toLowerCase(),("arc"===c||"plane"===c)&&(b[a].geo_distance.distance_type=c),this)},normalize:function(c){return null==c?b[a].geo_distance.normalize:(b[a].geo_distance.normalize=c,this)},valueField:function(c){return null==c?b[a].geo_distance.value_field:(b[a].geo_distance.value_field=c,this)},valueScript:function(c){return null==c?b[a].geo_distance.value_script:(b[a].geo_distance.value_script=c,this)},lang:function(c){return null==c?b[a].geo_distance.lang:(b[a].geo_distance.lang=c,this)},params:function(c){return null==c?b[a].geo_distance.params:(b[a].geo_distance.params=c,this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!o(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},E.HistogramFacet=function(a){var b={};return b[a]={histogram:{}},{field:function(c){return null==c?b[a].histogram.field:(b[a].histogram.field=c,this)},interval:function(c){return null==c?b[a].histogram.interval:(b[a].histogram.interval=c,this)},timeInterval:function(c){return null==c?b[a].histogram.time_interval:(b[a].histogram.time_interval=c,this)},from:function(c){return null==c?b[a].histogram.from:(b[a].histogram.from=c,this)},to:function(c){return null==c?b[a].histogram.to:(b[a].histogram.to=c,this)},valueField:function(c){return null==c?b[a].histogram.value_field:(b[a].histogram.value_field=c,this)},keyField:function(c){return null==c?b[a].histogram.key_field:(b[a].histogram.key_field=c,this)},valueScript:function(c){return null==c?b[a].histogram.value_script:(b[a].histogram.value_script=c,this)},keyScript:function(c){return null==c?b[a].histogram.key_script:(b[a].histogram.key_script=c,this)},lang:function(c){return null==c?b[a].histogram.lang:(b[a].histogram.lang=c,this)},params:function(c){return null==c?b[a].histogram.params:(b[a].histogram.params=c,this)},order:function(c){return null==c?b[a].histogram.order:(c=c.toLowerCase(),("key"===c||"count"===c||"total"===c)&&(b[a].histogram.order=c),this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!o(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},E.QueryFacet=function(a){var b={};return b[a]={},{query:function(c){if(null==c)return b[a].query;if(!m(c))throw new TypeError("Argument must be a Query");return b[a].query=c._self(),this},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!o(c))throw new TypeError("Argumnet must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},E.RangeFacet=function(a){var b={};return b[a]={range:{ranges:[]}},{field:function(c){return null==c?b[a].range.field:(b[a].range.field=c,this)},keyField:function(c){return null==c?b[a].range.key_field:(b[a].range.key_field=c,this)},valueField:function(c){return null==c?b[a].range.value_field:(b[a].range.value_field=c,this)},valueScript:function(c){return null==c?b[a].range.value_script:(b[a].range.value_script=c,this)},keyScript:function(c){return null==c?b[a].range.key_script:(b[a].range.key_script=c,this)},lang:function(c){return null==c?b[a].range.lang:(b[a].range.lang=c,this)},params:function(c){return null==c?b[a].range.params:(b[a].range.params=c,this)},addRange:function(c,d){return 0===arguments.length?b[a].range.ranges:(b[a].range.ranges.push({from:c,to:d}),this)},addUnboundedFrom:function(c){return null==c?b[a].range.ranges:(b[a].range.ranges.push({from:c}),this)},addUnboundedTo:function(c){return null==c?b[a].range.ranges:(b[a].range.ranges.push({to:c}),this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!o(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},E.StatisticalFacet=function(a){var b={};return b[a]={statistical:{}},{field:function(c){return null==c?b[a].statistical.field:(b[a].statistical.field=c,this)},fields:function(c){if(null==c)return b[a].statistical.fields;if(!g(c))throw new TypeError("Argument must be an array");return b[a].statistical.fields=c,this},script:function(c){return null==c?b[a].statistical.script:(b[a].statistical.script=c,this)},lang:function(c){return null==c?b[a].statistical.lang:(b[a].statistical.lang=c,this)},params:function(c){return null==c?b[a].statistical.params:(b[a].statistical.params=c,this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!o(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},E.TermStatsFacet=function(a){var b={};return b[a]={terms_stats:{}},{valueField:function(c){return null==c?b[a].terms_stats.value_field:(b[a].terms_stats.value_field=c,this)},keyField:function(c){return null==c?b[a].terms_stats.key_field:(b[a].terms_stats.key_field=c,this)},scriptField:function(c){return null==c?b[a].terms_stats.script_field:(b[a].terms_stats.script_field=c,this)},valueScript:function(c){return null==c?b[a].terms_stats.value_script:(b[a].terms_stats.value_script=c,this)},allTerms:function(c){return null==c?b[a].terms_stats.all_terms:(b[a].terms_stats.all_terms=c,this)},lang:function(c){return null==c?b[a].terms_stats.lang:(b[a].terms_stats.lang=c,this)},params:function(c){return null==c?b[a].terms_stats.params:(b[a].terms_stats.params=c,this)},size:function(c){return null==c?b[a].terms_stats.size:(b[a].terms_stats.size=c,this)},order:function(c){return null==c?b[a].terms_stats.order:(c=c.toLowerCase(),("count"===c||"term"===c||"reverse_count"===c||"reverse_term"===c||"total"===c||"reverse_total"===c||"min"===c||"reverse_min"===c||"max"===c||"reverse_max"===c||"mean"===c||"reverse_mean"===c)&&(b[a].terms_stats.order=c),this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!o(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},E.TermsFacet=function(a){var b={};return b[a]={terms:{}},{field:function(c){return null==c?b[a].terms.field:(b[a].terms.field=c,this)},fields:function(c){if(null==c)return b[a].terms.fields;if(!g(c))throw new TypeError("Argument must be an array");return b[a].terms.fields=c,this},scriptField:function(c){return null==c?b[a].terms.script_field:(b[a].terms.script_field=c,this)},size:function(c){return null==c?b[a].terms.size:(b[a].terms.size=c,this)},order:function(c){return null==c?b[a].terms.order:(c=c.toLowerCase(),("count"===c||"term"===c||"reverse_count"===c||"reverse_term"===c)&&(b[a].terms.order=c),this)},allTerms:function(c){return null==c?b[a].terms.all_terms:(b[a].terms.all_terms=c,this)},exclude:function(c){if(null==b[a].terms.exclude&&(b[a].terms.exclude=[]),null==c)return b[a].terms.exclude;if(i(c))b[a].terms.exclude.push(c);else{if(!g(c))throw new TypeError("Argument must be string or array");b[a].terms.exclude=c}return this},regex:function(c){return null==c?b[a].terms.regex:(b[a].terms.regex=c,this)},regexFlags:function(c){return null==c?b[a].terms.regex_flags:(b[a].terms.regex_flags=c,this)},script:function(c){return null==c?b[a].terms.script:(b[a].terms.script=c,this)},lang:function(c){return null==c?b[a].terms.lang:(b[a].terms.lang=c,this)},params:function(c){return null==c?b[a].terms.params:(b[a].terms.params=c,this)},executionHint:function(c){return null==c?b[a].terms.execution_hint:(b[a].terms.execution_hint=c,this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!o(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},E.AndFilter=function(a){var b,c,d={and:{filters:[]}};if(o(a))d.and.filters.push(a._self());else{if(!g(a))throw new TypeError("Argument must be a Filter or Array of Filters");for(b=0,c=a.length;c>b;b++){if(!o(a[b]))throw new TypeError("Array must contain only Filter objects");d.and.filters.push(a[b]._self())}}return{filters:function(a){var b,c;if(null==a)return d.and.filters;if(o(a))d.and.filters.push(a._self());else{if(!g(a))throw new TypeError("Argument must be a Filter or an Array of Filters");for(d.and.filters=[],b=0,c=a.length;c>b;b++){if(!o(a[b]))throw new TypeError("Array must contain only Filter objects");d.and.filters.push(a[b]._self())}}return this},name:function(a){return null==a?d.and._name:(d.and._name=a,this)},cache:function(a){return null==a?d.and._cache:(d.and._cache=a,this)},cacheKey:function(a){return null==a?d.and._cache_key:(d.and._cache_key=a,this)},toString:function(){return JSON.stringify(d)},_type:function(){return"filter"},_self:function(){return d}}},E.BoolFilter=function(){var a={bool:{}};return{must:function(b){var c,d;if(null==a.bool.must&&(a.bool.must=[]),null==b)return a.bool.must;if(o(b))a.bool.must.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Filter or array of Filters");for(a.bool.must=[],c=0,d=b.length;d>c;c++){if(!o(b[c]))throw new TypeError("Argument must be an array of Filters");a.bool.must.push(b[c]._self())}}return this},mustNot:function(b){var c,d;if(null==a.bool.must_not&&(a.bool.must_not=[]),null==b)return a.bool.must_not;if(o(b))a.bool.must_not.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Filter or array of Filters");for(a.bool.must_not=[],c=0,d=b.length;d>c;c++){if(!o(b[c]))throw new TypeError("Argument must be an array of Filters");a.bool.must_not.push(b[c]._self())}}return this},should:function(b){var c,d;if(null==a.bool.should&&(a.bool.should=[]),null==b)return a.bool.should;if(o(b))a.bool.should.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Filter or array of Filters");for(a.bool.should=[],c=0,d=b.length;d>c;c++){if(!o(b[c]))throw new TypeError("Argument must be an array of Filters");a.bool.should.push(b[c]._self())}}return this},name:function(b){return null==b?a.bool._name:(a.bool._name=b,this)},cache:function(b){return null==b?a.bool._cache:(a.bool._cache=b,this)},cacheKey:function(b){return null==b?a.bool._cache_key:(a.bool._cache_key=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"filter"},_self:function(){return a}}},E.ExistsFilter=function(a){var b={exists:{field:a}};return{field:function(a){return null==a?b.exists.field:(b.exists.field=a,this)},name:function(a){return null==a?b.exists._name:(b.exists._name=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.GeoBboxFilter=function(a){var b={geo_bounding_box:{}};return b.geo_bounding_box[a]={},{field:function(c){var d=b.geo_bounding_box[a];return null==c?a:(delete b.geo_bounding_box[a],a=c,b.geo_bounding_box[c]=d,this)},topLeft:function(c){if(null==c)return b.geo_bounding_box[a].top_left;if(!r(c))throw new TypeError("Argument must be a GeoPoint");return b.geo_bounding_box[a].top_left=c._self(),this},bottomRight:function(c){if(null==c)return b.geo_bounding_box[a].bottom_right;if(!r(c))throw new TypeError("Argument must be a GeoPoint");return b.geo_bounding_box[a].bottom_right=c._self(),this},type:function(a){return null==a?b.geo_bounding_box.type:(a=a.toLowerCase(),("memory"===a||"indexed"===a)&&(b.geo_bounding_box.type=a),this)},normalize:function(a){return null==a?b.geo_bounding_box.normalize:(b.geo_bounding_box.normalize=a,this)},name:function(a){return null==a?b.geo_bounding_box._name:(b.geo_bounding_box._name=a,this)},cache:function(a){return null==a?b.geo_bounding_box._cache:(b.geo_bounding_box._cache=a,this)},cacheKey:function(a){return null==a?b.geo_bounding_box._cache_key:(b.geo_bounding_box._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.GeoDistanceFilter=function(a){var b={geo_distance:{}};return b.geo_distance[a]=[0,0],{field:function(c){var d=b.geo_distance[a];return null==c?a:(delete b.geo_distance[a],a=c,b.geo_distance[c]=d,this)},distance:function(a){if(null==a)return b.geo_distance.distance;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance.distance=a,this},unit:function(a){return null==a?b.geo_distance.unit:(a=a.toLowerCase(),("mi"===a||"km"===a)&&(b.geo_distance.unit=a),this)},point:function(c){if(null==c)return b.geo_distance[a];if(!r(c))throw new TypeError("Argument must be a GeoPoint");return b.geo_distance[a]=c._self(),this},distanceType:function(a){return null==a?b.geo_distance.distance_type:(a=a.toLowerCase(),("arc"===a||"plane"===a)&&(b.geo_distance.distance_type=a),this)},normalize:function(a){return null==a?b.geo_distance.normalize:(b.geo_distance.normalize=a,this)},optimizeBbox:function(a){return null==a?b.geo_distance.optimize_bbox:(a=a.toLowerCase(),("memory"===a||"indexed"===a||"none"===a)&&(b.geo_distance.optimize_bbox=a),this)},name:function(a){return null==a?b.geo_distance._name:(b.geo_distance._name=a,this)},cache:function(a){return null==a?b.geo_distance._cache:(b.geo_distance._cache=a,this)},cacheKey:function(a){return null==a?b.geo_distance._cache_key:(b.geo_distance._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.GeoDistanceRangeFilter=function(a){var b={geo_distance_range:{}};return b.geo_distance_range[a]=[0,0],{field:function(c){var d=b.geo_distance_range[a];return null==c?a:(delete b.geo_distance_range[a],a=c,b.geo_distance_range[c]=d,this)},from:function(a){if(null==a)return b.geo_distance_range.from;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.from=a,this},to:function(a){if(null==a)return b.geo_distance_range.to;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.to=a,this},includeLower:function(a){return null==a?b.geo_distance_range.include_lower:(b.geo_distance_range.include_lower=a,this)},includeUpper:function(a){return null==a?b.geo_distance_range.include_upper:(b.geo_distance_range.include_upper=a,this)},gt:function(a){if(null==a)return b.geo_distance_range.gt;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.gt=a,this},gte:function(a){if(null==a)return b.geo_distance_range.gte;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.gte=a,this},lt:function(a){if(null==a)return b.geo_distance_range.lt;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.lt=a,this},lte:function(a){if(null==a)return b.geo_distance_range.lte;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.lte=a,this},unit:function(a){return null==a?b.geo_distance_range.unit:(a=a.toLowerCase(),("mi"===a||"km"===a)&&(b.geo_distance_range.unit=a),this)},point:function(c){if(null==c)return b.geo_distance_range[a];if(!r(c))throw new TypeError("Argument must be a GeoPoint");return b.geo_distance_range[a]=c._self(),this},distanceType:function(a){return null==a?b.geo_distance_range.distance_type:(a=a.toLowerCase(),("arc"===a||"plane"===a)&&(b.geo_distance_range.distance_type=a),this)},normalize:function(a){return null==a?b.geo_distance_range.normalize:(b.geo_distance_range.normalize=a,this)},optimizeBbox:function(a){return null==a?b.geo_distance_range.optimize_bbox:(a=a.toLowerCase(),("memory"===a||"indexed"===a||"none"===a)&&(b.geo_distance_range.optimize_bbox=a),this)},name:function(a){return null==a?b.geo_distance_range._name:(b.geo_distance_range._name=a,this)},cache:function(a){return null==a?b.geo_distance_range._cache:(b.geo_distance_range._cache=a,this)},cacheKey:function(a){return null==a?b.geo_distance_range._cache_key:(b.geo_distance_range._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.GeoPolygonFilter=function(a){var b={geo_polygon:{}};return b.geo_polygon[a]={points:[]},{field:function(c){var d=b.geo_polygon[a];return null==c?a:(delete b.geo_polygon[a],a=c,b.geo_polygon[c]=d,this)},points:function(c){var d,e;if(null==c)return b.geo_polygon[a].points;if(r(c))b.geo_polygon[a].points.push(c._self());else{if(!g(c))throw new TypeError("Argument must be a GeoPoint or Array of GeoPoints");for(b.geo_polygon[a].points=[],d=0,e=c.length;e>d;d++){if(!r(c[d]))throw new TypeError("Argument must be Array of GeoPoints");b.geo_polygon[a].points.push(c[d]._self())}}return this},normalize:function(a){return null==a?b.geo_polygon.normalize:(b.geo_polygon.normalize=a,this)},name:function(a){return null==a?b.geo_polygon._name:(b.geo_polygon._name=a,this)},cache:function(a){return null==a?b.geo_polygon._cache:(b.geo_polygon._cache=a,this)},cacheKey:function(a){return null==a?b.geo_polygon._cache_key:(b.geo_polygon._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.GeoShapeFilter=function(a){var b={geo_shape:{}};return b.geo_shape[a]={},{field:function(c){var d=b.geo_shape[a];return null==c?a:(delete b.geo_shape[a],a=c,b.geo_shape[c]=d,this)},shape:function(c){return null==c?b.geo_shape[a].shape:(null!=b.geo_shape[a].indexed_shape&&delete b.geo_shape[a].indexed_shape,b.geo_shape[a].shape=c._self(),this)},indexedShape:function(c){return null==c?b.geo_shape[a].indexed_shape:(null!=b.geo_shape[a].shape&&delete b.geo_shape[a].shape,b.geo_shape[a].indexed_shape=c._self(),this)},relation:function(c){return null==c?b.geo_shape[a].relation:(c=c.toLowerCase(),("intersects"===c||"disjoint"===c||"within"===c)&&(b.geo_shape[a].relation=c),this)},strategy:function(c){return null==c?b.geo_shape[a].strategy:(c=c.toLowerCase(),("recursive"===c||"term"===c)&&(b.geo_shape[a].strategy=c),this)},name:function(a){return null==a?b.geo_shape._name:(b.geo_shape._name=a,this)},cache:function(a){return null==a?b.geo_shape._cache:(b.geo_shape._cache=a,this)},cacheKey:function(a){return null==a?b.geo_shape._cache_key:(b.geo_shape._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.HasChildFilter=function(a,b){if(!m(a))throw new TypeError("No Query object found");var c={has_child:{query:a._self(),type:b}};return{query:function(a){if(null==a)return c.has_child.query;if(!m(a))throw new TypeError("Argument must be a Query object");return c.has_child.query=a._self(),this},filter:function(a){if(null==a)return c.has_child.filter;if(!o(a))throw new TypeError("Argument must be a Filter object");return c.has_child.filter=a._self(),this},type:function(a){return null==a?c.has_child.type:(c.has_child.type=a,this)},scope:function(){return this},name:function(a){return null==a?c.has_child._name:(c.has_child._name=a,this)},cache:function(a){return null==a?c.has_child._cache:(c.has_child._cache=a,this)},cacheKey:function(a){return null==a?c.has_child._cache_key:(c.has_child._cache_key=a,this)},toString:function(){return JSON.stringify(c)
},_type:function(){return"filter"},_self:function(){return c}}},E.HasParentFilter=function(a,b){if(!m(a))throw new TypeError("No Query object found");var c={has_parent:{query:a._self(),parent_type:b}};return{query:function(a){if(null==a)return c.has_parent.query;if(!m(a))throw new TypeError("Argument must be a Query object");return c.has_parent.query=a._self(),this},filter:function(a){if(null==a)return c.has_parent.filter;if(!o(a))throw new TypeError("Argument must be a Filter object");return c.has_parent.filter=a._self(),this},parentType:function(a){return null==a?c.has_parent.parent_type:(c.has_parent.parent_type=a,this)},scope:function(){return this},name:function(a){return null==a?c.has_parent._name:(c.has_parent._name=a,this)},cache:function(a){return null==a?c.has_parent._cache:(c.has_parent._cache=a,this)},cacheKey:function(a){return null==a?c.has_parent._cache_key:(c.has_parent._cache_key=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},E.IdsFilter=function(a){var b={ids:{}};if(i(a))b.ids.values=[a];else{if(!g(a))throw new TypeError("Argument must be a string or an array");b.ids.values=a}return{values:function(a){if(null==a)return b.ids.values;if(i(a))b.ids.values.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or an array");b.ids.values=a}return this},type:function(a){if(null==b.ids.type&&(b.ids.type=[]),null==a)return b.ids.type;if(i(a))b.ids.type.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or an array");b.ids.type=a}return this},name:function(a){return null==a?b.ids._name:(b.ids._name=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.IndicesFilter=function(a,b){if(!o(a))throw new TypeError("Argument must be a Filter");var c={indices:{filter:a._self()}};if(i(b))c.indices.indices=[b];else{if(!g(b))throw new TypeError("Argument must be a string or array");c.indices.indices=b}return{indices:function(a){if(null==a)return c.indices.indices;if(i(a))c.indices.indices.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or array");c.indices.indices=a}return this},filter:function(a){if(null==a)return c.indices.filter;if(!o(a))throw new TypeError("Argument must be a Filter");return c.indices.filter=a._self(),this},noMatchFilter:function(a){if(null==a)return c.indices.no_match_filter;if(i(a))a=a.toLowerCase(),("none"===a||"all"===a)&&(c.indices.no_match_filter=a);else{if(!o(a))throw new TypeError("Argument must be string or Filter");c.indices.no_match_filter=a._self()}return this},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},E.LimitFilter=function(a){var b={limit:{value:a}};return{value:function(a){if(null==a)return b.limit.value;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.limit.value=a,this},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.MatchAllFilter=function(){var a={match_all:{}};return{toString:function(){return JSON.stringify(a)},_type:function(){return"filter"},_self:function(){return a}}},E.MissingFilter=function(a){var b={missing:{field:a}};return{field:function(a){return null==a?b.missing.field:(b.missing.field=a,this)},existence:function(a){return null==a?b.missing.existence:(b.missing.existence=a,this)},nullValue:function(a){return null==a?b.missing.null_value:(b.missing.null_value=a,this)},name:function(a){return null==a?b.missing._name:(b.missing._name=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.NestedFilter=function(a){var b={nested:{path:a}};return{path:function(a){return null==a?b.nested.path:(b.nested.path=a,this)},query:function(a){if(null==a)return b.nested.query;if(!m(a))throw new TypeError("Argument must be a Query object");return b.nested.query=a._self(),this},filter:function(a){if(null==a)return b.nested.filter;if(!o(a))throw new TypeError("Argument must be a Filter object");return b.nested.filter=a._self(),this},boost:function(a){return null==a?b.nested.boost:(b.nested.boost=a,this)},join:function(a){return null==a?b.nested.join:(b.nested.join=a,this)},scope:function(){return this},name:function(a){return null==a?b.nested._name:(b.nested._name=a,this)},cache:function(a){return null==a?b.nested._cache:(b.nested._cache=a,this)},cacheKey:function(a){return null==a?b.nested._cache_key:(b.nested._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.NotFilter=function(a){if(!o(a))throw new TypeError("Argument must be a Filter");var b={not:a._self()};return{filter:function(a){if(null==a)return b.not;if(!o(a))throw new TypeError("Argument must be a Filter");return b.not=a._self(),this},name:function(a){return null==a?b.not._name:(b.not._name=a,this)},cache:function(a){return null==a?b.not._cache:(b.not._cache=a,this)},cacheKey:function(a){return null==a?b.not._cache_key:(b.not._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.NumericRangeFilter=function(a){var b={numeric_range:{}};return b.numeric_range[a]={},{field:function(c){var d=b.numeric_range[a];return null==c?a:(delete b.numeric_range[a],a=c,b.numeric_range[a]=d,this)},from:function(c){if(null==c)return b.numeric_range[a].from;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].from=c,this},to:function(c){if(null==c)return b.numeric_range[a].to;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].to=c,this},includeLower:function(c){return null==c?b.numeric_range[a].include_lower:(b.numeric_range[a].include_lower=c,this)},includeUpper:function(c){return null==c?b.numeric_range[a].include_upper:(b.numeric_range[a].include_upper=c,this)},gt:function(c){if(null==c)return b.numeric_range[a].gt;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].gt=c,this},gte:function(c){if(null==c)return b.numeric_range[a].gte;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].gte=c,this},lt:function(c){if(null==c)return b.numeric_range[a].lt;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].lt=c,this},lte:function(c){if(null==c)return b.numeric_range[a].lte;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].lte=c,this},name:function(a){return null==a?b.numeric_range._name:(b.numeric_range._name=a,this)},cache:function(a){return null==a?b.numeric_range._cache:(b.numeric_range._cache=a,this)},cacheKey:function(a){return null==a?b.numeric_range._cache_key:(b.numeric_range._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.OrFilter=function(a){var b,c,d;if(b={or:{filters:[]}},o(a))b.or.filters.push(a._self());else{if(!g(a))throw new TypeError("Argument must be a Filter or array of Filters");for(c=0,d=a.length;d>c;c++){if(!o(a[c]))throw new TypeError("Argument must be array of Filters");b.or.filters.push(a[c]._self())}}return{filters:function(a){var c,d;if(null==a)return b.or.filters;if(o(a))b.or.filters.push(a._self());else{if(!g(a))throw new TypeError("Argument must be a Filter or array of Filters");for(b.or.filters=[],c=0,d=a.length;d>c;c++){if(!o(a[c]))throw new TypeError("Argument must be an array of Filters");b.or.filters.push(a[c]._self())}}return this},name:function(a){return null==a?b.or._name:(b.or._name=a,this)},cache:function(a){return null==a?b.or._cache:(b.or._cache=a,this)},cacheKey:function(a){return null==a?b.or._cache_key:(b.or._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.PrefixFilter=function(a,b){var c={prefix:{}};return c.prefix[a]=b,{field:function(b){var d=c.prefix[a];return null==b?a:(delete c.prefix[a],a=b,c.prefix[a]=d,this)},prefix:function(b){return null==b?c.prefix[a]:(c.prefix[a]=b,this)},name:function(a){return null==a?c.prefix._name:(c.prefix._name=a,this)},cache:function(a){return null==a?c.prefix._cache:(c.prefix._cache=a,this)},cacheKey:function(a){return null==a?c.prefix._cache_key:(c.prefix._cache_key=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},E.QueryFilter=function(a){if(!m(a))throw new TypeError("Argument must be a Query");var b={fquery:{query:a._self()}};return{query:function(a){if(null==a)return b.fquery.query;if(!m(a))throw new TypeError("Argument must be a Query");return b.fquery.query=a._self(),this},name:function(a){return null==a?b.fquery._name:(b.fquery._name=a,this)},cache:function(a){return null==a?b.fquery._cache:(b.fquery._cache=a,this)},cacheKey:function(a){return null==a?b.fquery._cache_key:(b.fquery._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.RangeFilter=function(a){var b={range:{}};return b.range[a]={},{field:function(c){var d=b.range[a];return null==c?a:(delete b.range[a],a=c,b.range[c]=d,this)},from:function(c){return null==c?b.range[a].from:(b.range[a].from=c,this)},to:function(c){return null==c?b.range[a].to:(b.range[a].to=c,this)},includeLower:function(c){return null==c?b.range[a].include_lower:(b.range[a].include_lower=c,this)},includeUpper:function(c){return null==c?b.range[a].include_upper:(b.range[a].include_upper=c,this)},gt:function(c){return null==c?b.range[a].gt:(b.range[a].gt=c,this)},gte:function(c){return null==c?b.range[a].gte:(b.range[a].gte=c,this)},lt:function(c){return null==c?b.range[a].lt:(b.range[a].lt=c,this)},lte:function(c){return null==c?b.range[a].lte:(b.range[a].lte=c,this)},name:function(a){return null==a?b.range._name:(b.range._name=a,this)},cache:function(a){return null==a?b.range._cache:(b.range._cache=a,this)},cacheKey:function(a){return null==a?b.range._cache_key:(b.range._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.RegexpFilter=function(a,b){var c={regexp:{}};return c.regexp[a]={value:b},{field:function(b){var d=c.regexp[a];return null==b?a:(delete c.regexp[a],a=b,c.regexp[b]=d,this)},value:function(b){return null==b?c.regexp[a].value:(c.regexp[a].value=b,this)},flags:function(b){return null==b?c.regexp[a].flags:(c.regexp[a].flags=b,this)},flagsValue:function(b){return null==b?c.regexp[a].flags_value:(c.regexp[a].flags_value=b,this)},name:function(a){return null==a?c.regexp._name:(c.regexp._name=a,this)},cache:function(a){return null==a?c.regexp._cache:(c.regexp._cache=a,this)},cacheKey:function(a){return null==a?c.regexp._cache_key:(c.regexp._cache_key=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},E.ScriptFilter=function(a){var b={script:{script:a}};return{script:function(a){return null==a?b.script.script:(b.script.script=a,this)},params:function(a){return null==a?b.script.params:(b.script.params=a,this)},lang:function(a){return null==a?b.script.lang:(b.script.lang=a,this)},name:function(a){return null==a?b.script._name:(b.script._name=a,this)},cache:function(a){return null==a?b.script._cache:(b.script._cache=a,this)},cacheKey:function(a){return null==a?b.script._cache_key:(b.script._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.TermFilter=function(a,b){var c={term:{}};return c.term[a]=b,{field:function(b){var d=c.term[a];return null==b?a:(delete c.term[a],a=b,c.term[a]=d,this)},term:function(b){return null==b?c.term[a]:(c.term[a]=b,this)},name:function(a){return null==a?c.term._name:(c.term._name=a,this)},cache:function(a){return null==a?c.term._cache:(c.term._cache=a,this)},cacheKey:function(a){return null==a?c.term._cache_key:(c.term._cache_key=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},E.TermsFilter=function(a,b){var c={terms:{}},d=function(){g(c.terms[a])||(c.terms[a]=[])},e=function(){g(c.terms[a])&&(c.terms[a]={})};return c.terms[a]=g(b)?b:[b],{field:function(b){var d=c.terms[a];return null==b?a:(delete c.terms[a],a=b,c.terms[b]=d,this)},terms:function(b){return d(),null==b?c.terms[a]:(g(b)?c.terms[a]=b:c.terms[a].push(b),this)},index:function(b){return e(),null==b?c.terms[a].index:(c.terms[a].index=b,this)},type:function(b){return e(),null==b?c.terms[a].type:(c.terms[a].type=b,this)},id:function(b){return e(),null==b?c.terms[a].id:(c.terms[a].id=b,this)},path:function(b){return e(),null==b?c.terms[a].path:(c.terms[a].path=b,this)},execution:function(a){return null==a?c.terms.execution:(a=a.toLowerCase(),("plain"===a||"bool"===a||"bool_nocache"===a||"and"===a||"and_nocache"===a||"or"===a||"or_nocache"===a)&&(c.terms.execution=a),this)},name:function(a){return null==a?c.terms._name:(c.terms._name=a,this)},cache:function(a){return null==a?c.terms._cache:(c.terms._cache=a,this)},cacheKey:function(a){return null==a?c.terms._cache_key:(c.terms._cache_key=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},E.TypeFilter=function(a){var b={type:{value:a}};return{type:function(a){return null==a?b.type.value:(b.type.value=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},E.Document=function(a,b,c){var d={},j=["upsert","source","script","lang","params"];return{index:function(b){return null==b?a:(a=b,this)},type:function(a){return null==a?b:(b=a,this)},id:function(a){return null==a?c:(c=a,this)},routing:function(a){return null==a?d.routing:(d.routing=a,this)},parent:function(a){return null==a?d.parent:(d.parent=a,this)},timestamp:function(a){return null==a?d.timestamp:(d.timestamp=a,this)},ttl:function(a){return null==a?d.ttl:(d.ttl=a,this)},timeout:function(a){return null==a?d.timeout:(d.timeout=a,this)},refresh:function(a){return null==a?d.refresh:(d.refresh=a,this)},version:function(a){return null==a?d.version:(d.version=a,this)},versionType:function(a){return null==a?d.version_type:(a=a.toLowerCase(),("internal"===a||"external"===a)&&(d.version_type=a),this)},percolate:function(a){return null==a?d.percolate:(d.percolate=a,this)},opType:function(a){return null==a?d.op_type:(a=a.toLowerCase(),("index"===a||"create"===a)&&(d.op_type=a),this)},replication:function(a){return null==a?d.replication:(a=a.toLowerCase(),("async"===a||"sync"===a||"default"===a)&&(d.replication=a),this)},consistency:function(a){return null==a?d.consistency:(a=a.toLowerCase(),("default"===a||"one"===a||"quorum"===a||"all"===a)&&(d.consistency=a),this)},preference:function(a){return null==a?d.preference:(d.preference=a,this)},realtime:function(a){return null==a?d.realtime:(d.realtime=a,this)},fields:function(a){if(null==d.fields&&(d.fields=[]),null==a)return d.fields;if(i(a))d.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");d.fields=a}return this},script:function(a){return null==a?d.script:(d.script=a,this)},lang:function(a){return null==a?d.lang:(d.lang=a,this)},params:function(a){if(null==a)return d.params;if(!h(a))throw new TypeError("Argument must be an object");return d.params=a,this},retryOnConflict:function(a){return null==a?d.retry_on_conflict:(d.retry_on_conflict=a,this)},upsert:function(a){if(null==a)return d.upsert;if(!h(a))throw new TypeError("Argument must be an object");return d.upsert=a,this},source:function(a){if(null==a)return d.source;if(!h(a))throw new TypeError("Argument must be an object");return d.source=a,this},toString:function(){return JSON.stringify(d)},_type:function(){return"document"},_self:function(){return d},doGet:function(f,g){if(null==E.client)throw new Error("No Client Set");if(null==a||null==b||null==c)throw new Error("Index, Type, and ID must be set");var h="/"+a+"/"+b+"/"+c;return E.client.get(h,e(d,j),f,g)},doIndex:function(e,g){if(null==E.client)throw new Error("No Client Set");if(null==a||null==b)throw new Error("Index and Type must be set");if(null==d.source)throw new Error("No source document found");var h,i="/"+a+"/"+b,k=JSON.stringify(d.source),l=f(d,j);return null!=c&&(i=i+"/"+c),""!==l&&(i=i+"?"+l),h=null==c?E.client.post(i,k,e,g):E.client.put(i,k,e,g)},doUpdate:function(e,g){if(null==E.client)throw new Error("No Client Set");if(null==a||null==b||null==c)throw new Error("Index, Type, and ID must be set");if(null==d.script&&null==d.source)throw new Error("Update script or document required");var h="/"+a+"/"+b+"/"+c+"/_update",i={},k=f(d,j);return""!==k&&(h=h+"?"+k),null!=d.script&&(i.script=d.script),null!=d.lang&&(i.lang=d.lang),null!=d.params&&(i.params=d.params),null!=d.upsert&&(i.upsert=d.upsert),null!=d.source&&(i.doc=d.source),E.client.post(h,JSON.stringify(i),e,g)},doDelete:function(e,g){if(null==E.client)throw new Error("No Client Set");if(null==a||null==b||null==c)throw new Error("Index, Type, and ID must be set");var h="/"+a+"/"+b+"/"+c,i="",k=f(d,j);return""!==k&&(h=h+"?"+k),E.client.del(h,i,e,g)}}},E.BoolQuery=function(){var a={bool:{}};return{must:function(b){var c,d;if(null==a.bool.must&&(a.bool.must=[]),null==b)return a.bool.must;if(m(b))a.bool.must.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Query or array of Queries");for(a.bool.must=[],c=0,d=b.length;d>c;c++){if(!m(b[c]))throw new TypeError("Argument must be an array of Queries");a.bool.must.push(b[c]._self())}}return this},mustNot:function(b){var c,d;if(null==a.bool.must_not&&(a.bool.must_not=[]),null==b)return a.bool.must_not;if(m(b))a.bool.must_not.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Query or array of Queries");for(a.bool.must_not=[],c=0,d=b.length;d>c;c++){if(!m(b[c]))throw new TypeError("Argument must be an array of Queries");a.bool.must_not.push(b[c]._self())}}return this},should:function(b){var c,d;if(null==a.bool.should&&(a.bool.should=[]),null==b)return a.bool.should;if(m(b))a.bool.should.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Query or array of Queries");for(a.bool.should=[],c=0,d=b.length;d>c;c++){if(!m(b[c]))throw new TypeError("Argument must be an array of Queries");a.bool.should.push(b[c]._self())}}return this},boost:function(b){return null==b?a.bool.boost:(a.bool.boost=b,this)},disableCoord:function(b){return null==b?a.bool.disable_coord:(a.bool.disable_coord=b,this)},minimumNumberShouldMatch:function(b){return null==b?a.bool.minimum_number_should_match:(a.bool.minimum_number_should_match=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"query"},_self:function(){return a}}},E.BoostingQuery=function(a,b,c){if(!m(a)||!m(b))throw new TypeError("Arguments must be Queries");var d={boosting:{positive:a._self(),negative:b._self(),negative_boost:c}};return{positive:function(a){if(null==a)return d.boosting.positive;if(!m(a))throw new TypeError("Argument must be a Query");return d.boosting.positive=a._self(),this},negative:function(a){if(null==a)return d.boosting.negative;if(!m(a))throw new TypeError("Argument must be a Query");return d.boosting.negative=a._self(),this},negativeBoost:function(a){return null==a?d.boosting.negative_boost:(d.boosting.negative_boost=a,this)},boost:function(a){return null==a?d.boosting.boost:(d.boosting.boost=a,this)},toString:function(){return JSON.stringify(d)},_type:function(){return"query"},_self:function(){return d}}},E.CommonTermsQuery=function(a,b){var c={common:{}};return null==a&&(a="no_field_set"),c.common[a]={},null!=b&&(c.common[a].query=b),{field:function(b){var d=c.common[a];return null==b?a:(delete c.common[a],a=b,c.common[b]=d,this)},query:function(b){return null==b?c.common[a].query:(c.common[a].query=b,this)},analyzer:function(b){return null==b?c.common[a].analyzer:(c.common[a].analyzer=b,this)},disableCoords:function(b){return null==b?c.common[a].disable_coords:(c.common[a].disable_coords=b,this)},cutoffFrequency:function(b){return null==b?c.common[a].cutoff_frequency:(c.common[a].cutoff_frequency=b,this)},highFreqOperator:function(b){return null==b?c.common[a].high_freq_operator:(b=b.toLowerCase(),("and"===b||"or"===b)&&(c.common[a].high_freq_operator=b),this)},lowFreqOperator:function(b){return null==b?c.common[a].low_freq_operator:(b=b.toLowerCase(),("and"===b||"or"===b)&&(c.common[a].low_freq_operator=b),this)},minimumShouldMatch:function(b){return null==b?c.common[a].minimum_should_match:(c.common[a].minimum_should_match=b,this)},boost:function(b){return null==b?c.common[a].boost:(c.common[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.ConstantScoreQuery=function(){var a={constant_score:{}};return{query:function(b){if(null==b)return a.constant_score.query;if(!m(b))throw new TypeError("Argument must be a Query");return a.constant_score.query=b._self(),this},filter:function(b){if(null==b)return a.constant_score.filter;if(!o(b))throw new TypeError("Argument must be a Filter");return a.constant_score.filter=b._self(),this},cache:function(b){return null==b?a.constant_score._cache:(a.constant_score._cache=b,this)},cacheKey:function(b){return null==b?a.constant_score._cache_key:(a.constant_score._cache_key=b,this)},boost:function(b){return null==b?a.constant_score.boost:(a.constant_score.boost=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"query"},_self:function(){return a}}},E.CustomBoostFactorQuery=function(a){if(!m(a))throw new TypeError("Argument must be a Query");var b={custom_boost_factor:{query:a._self()}};return{query:function(a){if(null==a)return b.custom_boost_factor.query;if(!m(a))throw new TypeError("Argument must be a Query");return b.custom_boost_factor.query=a._self(),this},boostFactor:function(a){return null==a?b.custom_boost_factor.boost_factor:(b.custom_boost_factor.boost_factor=a,this)},boost:function(a){return null==a?b.custom_boost_factor.boost:(b.custom_boost_factor.boost=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},E.CustomFiltersScoreQuery=function(a,c){if(!m(a))throw new TypeError("Argument must be a Query");var d={custom_filters_score:{query:a._self(),filters:[]}},e=function(a){var b=null;return a.filter&&o(a.filter)&&(b={filter:a.filter._self()},a.boost?b.boost=a.boost:a.script?b.script=a.script:b=null),b};return b(g(c)?c:[c],function(a){var b=e(a);null!==b&&d.custom_filters_score.filters.push(b)}),{query:function(a){if(null==a)return d.custom_filters_score.query;if(!m(a))throw new TypeError("Argument must be a Query");return d.custom_filters_score.query=a._self(),this},filters:function(a){return null==a?d.custom_filters_score.filters:(g(a)&&(d.custom_filters_score.filters=[]),b(g(a)?a:[a],function(a){var b=e(a);null!==b&&d.custom_filters_score.filters.push(b)}),this)},scoreMode:function(a){return null==a?d.custom_filters_score.score_mode:(a=a.toLowerCase(),("first"===a||"min"===a||"max"===a||"total"===a||"avg"===a||"multiply"===a)&&(d.custom_filters_score.score_mode=a),this)},params:function(a){return null==a?d.custom_filters_score.params:(d.custom_filters_score.params=a,this)},lang:function(a){return null==a?d.custom_filters_score.lang:(d.custom_filters_score.lang=a,this)},maxBoost:function(a){return null==a?d.custom_filters_score.max_boost:(d.custom_filters_score.max_boost=a,this)},boost:function(a){return null==a?d.custom_filters_score.boost:(d.custom_filters_score.boost=a,this)},toString:function(){return JSON.stringify(d)},_type:function(){return"query"},_self:function(){return d}}},E.CustomScoreQuery=function(a,b){if(!m(a))throw new TypeError("Argument must be a Query");var c={custom_score:{query:a._self(),script:b}};return{query:function(a){if(null==a)return c.custom_score.query;if(!m(a))throw new TypeError("Argument must be a Query");return c.custom_score.query=a._self(),this},script:function(a){return null==a?c.custom_score.script:(c.custom_score.script=a,this)},params:function(a){return null==a?c.custom_score.params:(c.custom_score.params=a,this)},lang:function(a){return null==a?c.custom_score.lang:(c.custom_score.lang=a,this)},boost:function(a){return null==a?c.custom_score.boost:(c.custom_score.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.DisMaxQuery=function(){var a={dis_max:{}};return{queries:function(b){var c,d;if(null==b)return a.dis_max.queries;if(null==a.dis_max.queries&&(a.dis_max.queries=[]),m(b))a.dis_max.queries.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Query or array of Queries");for(a.dis_max.queries=[],c=0,d=b.length;d>c;c++){if(!m(b[c]))throw new TypeError("Argument must be array of Queries");a.dis_max.queries.push(b[c]._self())}}return this},boost:function(b){return null==b?a.dis_max.boost:(a.dis_max.boost=b,this)},tieBreaker:function(b){return null==b?a.dis_max.tie_breaker:(a.dis_max.tie_breaker=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"query"},_self:function(){return a}}},E.FieldMaskingSpanQuery=function(a,b){if(!m(a))throw new TypeError("Argument must be a SpanQuery");var c={field_masking_span:{query:a._self(),field:b}};return{query:function(a){if(null==a)return c.field_masking_span.query;if(!m(a))throw new TypeError("Argument must be a SpanQuery");return c.field_masking_span.query=a._self(),this},field:function(a){return null==a?c.field_masking_span.field:(c.field_masking_span.field=a,this)},boost:function(a){return null==a?c.field_masking_span.boost:(c.field_masking_span.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.FieldQuery=function(a,b){var c={field:{}};return c.field[a]={query:b},{field:function(b){var d=c.field[a];return null==b?a:(delete c.field[a],a=b,c.field[b]=d,this)},query:function(b){return null==b?c.field[a].query:(c.field[a].query=b,this)},defaultOperator:function(b){return null==b?c.field[a].default_operator:(b=b.toUpperCase(),("AND"===b||"OR"===b)&&(c.field[a].default_operator=b),this)},analyzer:function(b){return null==b?c.field[a].analyzer:(c.field[a].analyzer=b,this)},quoteAnalyzer:function(b){return null==b?c.field[a].quote_analyzer:(c.field[a].quote_analyzer=b,this)},autoGeneratePhraseQueries:function(b){return null==b?c.field[a].auto_generate_phrase_queries:(c.field[a].auto_generate_phrase_queries=b,this)},allowLeadingWildcard:function(b){return null==b?c.field[a].allow_leading_wildcard:(c.field[a].allow_leading_wildcard=b,this)},lowercaseExpandedTerms:function(b){return null==b?c.field[a].lowercase_expanded_terms:(c.field[a].lowercase_expanded_terms=b,this)},enablePositionIncrements:function(b){return null==b?c.field[a].enable_position_increments:(c.field[a].enable_position_increments=b,this)},fuzzyMinSim:function(b){return null==b?c.field[a].fuzzy_min_sim:(c.field[a].fuzzy_min_sim=b,this)},boost:function(b){return null==b?c.field[a].boost:(c.field[a].boost=b,this)},fuzzyPrefixLength:function(b){return null==b?c.field[a].fuzzy_prefix_length:(c.field[a].fuzzy_prefix_length=b,this)},fuzzyMaxExpansions:function(b){return null==b?c.field[a].fuzzy_max_expansions:(c.field[a].fuzzy_max_expansions=b,this)},fuzzyRewrite:function(b){return null==b?c.field[a].fuzzy_rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.field[a].fuzzy_rewrite=b),this)},rewrite:function(b){return null==b?c.field[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.field[a].rewrite=b),this)},quoteFieldSuffix:function(b){return null==b?c.field[a].quote_field_suffix:(c.field[a].quote_field_suffix=b,this)},phraseSlop:function(b){return null==b?c.field[a].phrase_slop:(c.field[a].phrase_slop=b,this)},analyzeWildcard:function(b){return null==b?c.field[a].analyze_wildcard:(c.field[a].analyze_wildcard=b,this)},escape:function(b){return null==b?c.field[a].escape:(c.field[a].escape=b,this)},minimumShouldMatch:function(b){return null==b?c.field[a].minimum_should_match:(c.field[a].minimum_should_match=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.FilteredQuery=function(a,b){if(!m(a))throw new TypeError("Argument must be a Query");if(null!=b&&!o(b))throw new TypeError("Argument must be a Filter");var c={filtered:{query:a._self()}};return null!=b&&(c.filtered.filter=b._self()),{query:function(a){if(null==a)return c.filtered.query;if(!m(a))throw new TypeError("Argument must be a Query");return c.filtered.query=a._self(),this},filter:function(a){if(null==a)return c.filtered.filter;if(!o(a))throw new TypeError("Argument must be a Filter");return c.filtered.filter=a._self(),this},strategy:function(a){return null==a?c.filtered.strategy:(a=a.toLowerCase(),("query_first"===a||"random_access_always"===a||"leap_frog"===a||"leap_frog_filter_first"===a||0===a.indexOf("random_access_"))&&(c.filtered.strategy=a),this)},cache:function(a){return null==a?c.filtered._cache:(c.filtered._cache=a,this)},cacheKey:function(a){return null==a?c.filtered._cache_key:(c.filtered._cache_key=a,this)},boost:function(a){return null==a?c.filtered.boost:(c.filtered.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.FuzzyLikeThisFieldQuery=function(a,b){var c={flt_field:{}};return c.flt_field[a]={like_text:b},{field:function(b){var d=c.flt_field[a];return null==b?a:(delete c.flt_field[a],a=b,c.flt_field[b]=d,this)},likeText:function(b){return null==b?c.flt_field[a].like_text:(c.flt_field[a].like_text=b,this)},ignoreTf:function(b){return null==b?c.flt_field[a].ignore_tf:(c.flt_field[a].ignore_tf=b,this)},maxQueryTerms:function(b){return null==b?c.flt_field[a].max_query_terms:(c.flt_field[a].max_query_terms=b,this)},minSimilarity:function(b){return null==b?c.flt_field[a].min_similarity:(c.flt_field[a].min_similarity=b,this)},prefixLength:function(b){return null==b?c.flt_field[a].prefix_length:(c.flt_field[a].prefix_length=b,this)},analyzer:function(b){return null==b?c.flt_field[a].analyzer:(c.flt_field[a].analyzer=b,this)},boost:function(b){return null==b?c.flt_field[a].boost:(c.flt_field[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.FuzzyLikeThisQuery=function(a){var b={flt:{like_text:a}};return{fields:function(a){if(null==b.flt.fields&&(b.flt.fields=[]),null==a)return b.flt.fields;if(i(a))b.flt.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or array");b.flt.fields=a}return this},likeText:function(a){return null==a?b.flt.like_text:(b.flt.like_text=a,this)},ignoreTf:function(a){return null==a?b.flt.ignore_tf:(b.flt.ignore_tf=a,this)},maxQueryTerms:function(a){return null==a?b.flt.max_query_terms:(b.flt.max_query_terms=a,this)},minSimilarity:function(a){return null==a?b.flt.min_similarity:(b.flt.min_similarity=a,this)},prefixLength:function(a){return null==a?b.flt.prefix_length:(b.flt.prefix_length=a,this)},analyzer:function(a){return null==a?b.flt.analyzer:(b.flt.analyzer=a,this)},boost:function(a){return null==a?b.flt.boost:(b.flt.boost=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},E.FuzzyQuery=function(a,b){var c={fuzzy:{}};return c.fuzzy[a]={value:b},{field:function(b){var d=c.fuzzy[a];return null==b?a:(delete c.fuzzy[a],a=b,c.fuzzy[b]=d,this)},value:function(b){return null==b?c.fuzzy[a].value:(c.fuzzy[a].value=b,this)
},transpositions:function(b){return null==b?c.fuzzy[a].transpositions:(c.fuzzy[a].transpositions=b,this)},maxExpansions:function(b){return null==b?c.fuzzy[a].max_expansions:(c.fuzzy[a].max_expansions=b,this)},minSimilarity:function(b){return null==b?c.fuzzy[a].min_similarity:(c.fuzzy[a].min_similarity=b,this)},prefixLength:function(b){return null==b?c.fuzzy[a].prefix_length:(c.fuzzy[a].prefix_length=b,this)},rewrite:function(b){return null==b?c.fuzzy[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.fuzzy[a].rewrite=b),this)},boost:function(b){return null==b?c.fuzzy[a].boost:(c.fuzzy[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.GeoShapeQuery=function(a){var b={geo_shape:{}};return b.geo_shape[a]={},{field:function(c){var d=b.geo_shape[a];return null==c?a:(delete b.geo_shape[a],a=c,b.geo_shape[c]=d,this)},shape:function(c){return null==c?b.geo_shape[a].shape:(null!=b.geo_shape[a].indexed_shape&&delete b.geo_shape[a].indexed_shape,b.geo_shape[a].shape=c._self(),this)},indexedShape:function(c){return null==c?b.geo_shape[a].indexed_shape:(null!=b.geo_shape[a].shape&&delete b.geo_shape[a].shape,b.geo_shape[a].indexed_shape=c._self(),this)},relation:function(c){return null==c?b.geo_shape[a].relation:(c=c.toLowerCase(),("intersects"===c||"disjoint"===c||"within"===c)&&(b.geo_shape[a].relation=c),this)},strategy:function(c){return null==c?b.geo_shape[a].strategy:(c=c.toLowerCase(),("recursive"===c||"term"===c)&&(b.geo_shape[a].strategy=c),this)},boost:function(c){return null==c?b.geo_shape[a].boost:(b.geo_shape[a].boost=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},E.HasChildQuery=function(a,b){if(!m(a))throw new TypeError("Argument must be a valid Query");var c={has_child:{query:a._self(),type:b}};return{query:function(a){if(null==a)return c.has_child.query;if(!m(a))throw new TypeError("Argument must be a valid Query");return c.has_child.query=a._self(),this},type:function(a){return null==a?c.has_child.type:(c.has_child.type=a,this)},scope:function(){return this},scoreType:function(a){return null==a?c.has_child.score_type:(a=a.toLowerCase(),("none"===a||"max"===a||"sum"===a||"avg"===a)&&(c.has_child.score_type=a),this)},scoreMode:function(a){return null==a?c.has_child.score_mode:(a=a.toLowerCase(),("none"===a||"max"===a||"sum"===a||"avg"===a)&&(c.has_child.score_mode=a),this)},boost:function(a){return null==a?c.has_child.boost:(c.has_child.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.HasParentQuery=function(a,b){if(!m(a))throw new TypeError("Argument must be a Query");var c={has_parent:{query:a._self(),parent_type:b}};return{query:function(a){if(null==a)return c.has_parent.query;if(!m(a))throw new TypeError("Argument must be a Query");return c.has_parent.query=a._self(),this},parentType:function(a){return null==a?c.has_parent.parent_type:(c.has_parent.parent_type=a,this)},scope:function(){return this},scoreType:function(a){return null==a?c.has_parent.score_type:(a=a.toLowerCase(),("none"===a||"score"===a)&&(c.has_parent.score_type=a),this)},scoreMode:function(a){return null==a?c.has_parent.score_mode:(a=a.toLowerCase(),("none"===a||"score"===a)&&(c.has_parent.score_mode=a),this)},boost:function(a){return null==a?c.has_parent.boost:(c.has_parent.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.IdsQuery=function(a){var b={ids:{}};if(i(a))b.ids.values=[a];else{if(!g(a))throw new TypeError("Argument must be string or array");b.ids.values=a}return{values:function(a){if(null==a)return b.ids.values;if(i(a))b.ids.values.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");b.ids.values=a}return this},type:function(a){if(null==b.ids.type&&(b.ids.type=[]),null==a)return b.ids.type;if(i(a))b.ids.type.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");b.ids.type=a}return this},boost:function(a){return null==a?b.ids.boost:(b.ids.boost=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},E.IndicesQuery=function(a,b){if(!m(a))throw new TypeError("Argument must be a Query");var c={indices:{query:a._self()}};if(i(b))c.indices.indices=[b];else{if(!g(b))throw new TypeError("Argument must be a string or array");c.indices.indices=b}return{indices:function(a){if(null==a)return c.indices.indices;if(i(a))c.indices.indices.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or array");c.indices.indices=a}return this},query:function(a){if(null==a)return c.indices.query;if(!m(a))throw new TypeError("Argument must be a Query");return c.indices.query=a._self(),this},noMatchQuery:function(a){if(null==a)return c.indices.no_match_query;if(i(a))a=a.toLowerCase(),("none"===a||"all"===a)&&(c.indices.no_match_query=a);else{if(!m(a))throw new TypeError("Argument must be string or Query");c.indices.no_match_query=a._self()}return this},boost:function(a){return null==a?c.indices.boost:(c.indices.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.MatchAllQuery=function(){var a={match_all:{}};return{boost:function(b){return null==b?a.match_all.boost:(a.match_all.boost=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"query"},_self:function(){return a}}},E.MatchQuery=function(a,b){var c={match:{}};return c.match[a]={query:b},{boost:function(b){return null==b?c.match[a].boost:(c.match[a].boost=b,this)},query:function(b){return null==b?c.match[a].query:(c.match[a].query=b,this)},type:function(b){return null==b?c.match[a].type:(b=b.toLowerCase(),("boolean"===b||"phrase"===b||"phrase_prefix"===b)&&(c.match[a].type=b),this)},fuzziness:function(b){return null==b?c.match[a].fuzziness:(c.match[a].fuzziness=b,this)},cutoffFrequency:function(b){return null==b?c.match[a].cutoff_frequency:(c.match[a].cutoff_frequency=b,this)},prefixLength:function(b){return null==b?c.match[a].prefix_length:(c.match[a].prefix_length=b,this)},maxExpansions:function(b){return null==b?c.match[a].max_expansions:(c.match[a].max_expansions=b,this)},operator:function(b){return null==b?c.match[a].operator:(b=b.toLowerCase(),("and"===b||"or"===b)&&(c.match[a].operator=b),this)},slop:function(b){return null==b?c.match[a].slop:(c.match[a].slop=b,this)},analyzer:function(b){return null==b?c.match[a].analyzer:(c.match[a].analyzer=b,this)},minimumShouldMatch:function(b){return null==b?c.match[a].minimum_should_match:(c.match[a].minimum_should_match=b,this)},rewrite:function(b){return null==b?c.match[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.match[a].rewrite=b),this)},fuzzyRewrite:function(b){return null==b?c.match[a].fuzzy_rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.match[a].fuzzy_rewrite=b),this)},fuzzyTranspositions:function(b){return null==b?c.match[a].fuzzy_transpositions:(c.match[a].fuzzy_transpositions=b,this)},lenient:function(b){return null==b?c.match[a].lenient:(c.match[a].lenient=b,this)},zeroTermsQuery:function(b){return null==b?c.match[a].zero_terms_query:(b=b.toLowerCase(),("all"===b||"none"===b)&&(c.match[a].zero_terms_query=b),this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.MoreLikeThisFieldQuery=function(a,b){var c={mlt_field:{}};return c.mlt_field[a]={like_text:b},{field:function(b){var d=c.mlt_field[a];return null==b?a:(delete c.mlt_field[a],a=b,c.mlt_field[b]=d,this)},likeText:function(b){return null==b?c.mlt_field[a].like_text:(c.mlt_field[a].like_text=b,this)},percentTermsToMatch:function(b){return null==b?c.mlt_field[a].percent_terms_to_match:(c.mlt_field[a].percent_terms_to_match=b,this)},minTermFreq:function(b){return null==b?c.mlt_field[a].min_term_freq:(c.mlt_field[a].min_term_freq=b,this)},maxQueryTerms:function(b){return null==b?c.mlt_field[a].max_query_terms:(c.mlt_field[a].max_query_terms=b,this)},stopWords:function(b){return null==b?c.mlt_field[a].stop_words:(c.mlt_field[a].stop_words=b,this)},minDocFreq:function(b){return null==b?c.mlt_field[a].min_doc_freq:(c.mlt_field[a].min_doc_freq=b,this)},maxDocFreq:function(b){return null==b?c.mlt_field[a].max_doc_freq:(c.mlt_field[a].max_doc_freq=b,this)},minWordLen:function(b){return null==b?c.mlt_field[a].min_word_len:(c.mlt_field[a].min_word_len=b,this)},maxWordLen:function(b){return null==b?c.mlt_field[a].max_word_len:(c.mlt_field[a].max_word_len=b,this)},analyzer:function(b){return null==b?c.mlt_field[a].analyzer:(c.mlt_field[a].analyzer=b,this)},boostTerms:function(b){return null==b?c.mlt_field[a].boost_terms:(c.mlt_field[a].boost_terms=b,this)},boost:function(b){return null==b?c.mlt_field[a].boost:(c.mlt_field[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.MoreLikeThisQuery=function(a,b){var c={mlt:{like_text:b,fields:[]}};if(i(a))c.mlt.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");c.mlt.fields=a}return{fields:function(a){if(null==a)return c.mlt.fields;if(i(a))c.mlt.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or array");c.mlt.fields=a}return this},likeText:function(a){return null==a?c.mlt.like_text:(c.mlt.like_text=a,this)},percentTermsToMatch:function(a){return null==a?c.mlt.percent_terms_to_match:(c.mlt.percent_terms_to_match=a,this)},minTermFreq:function(a){return null==a?c.mlt.min_term_freq:(c.mlt.min_term_freq=a,this)},maxQueryTerms:function(a){return null==a?c.mlt.max_query_terms:(c.mlt.max_query_terms=a,this)},stopWords:function(a){return null==a?c.mlt.stop_words:(c.mlt.stop_words=a,this)},minDocFreq:function(a){return null==a?c.mlt.min_doc_freq:(c.mlt.min_doc_freq=a,this)},maxDocFreq:function(a){return null==a?c.mlt.max_doc_freq:(c.mlt.max_doc_freq=a,this)},minWordLen:function(a){return null==a?c.mlt.min_word_len:(c.mlt.min_word_len=a,this)},maxWordLen:function(a){return null==a?c.mlt.max_word_len:(c.mlt.max_word_len=a,this)},analyzer:function(a){return null==a?c.mlt.analyzer:(c.mlt.analyzer=a,this)},boostTerms:function(a){return null==a?c.mlt.boost_terms:(c.mlt.boost_terms=a,this)},boost:function(a){return null==a?c.mlt.boost:(c.mlt.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.MultiMatchQuery=function(a,b){var c={multi_match:{query:b,fields:[]}};if(i(a))c.multi_match.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");c.multi_match.fields=a}return{fields:function(a){if(null==a)return c.multi_match.fields;if(i(a))c.multi_match.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");c.multi_match.fields=a}return this},useDisMax:function(a){return null==a?c.multi_match.use_dis_max:(c.multi_match.use_dis_max=a,this)},tieBreaker:function(a){return null==a?c.multi_match.tie_breaker:(c.multi_match.tie_breaker=a,this)},cutoffFrequency:function(a){return null==a?c.multi_match.cutoff_frequency:(c.multi_match.cutoff_frequency=a,this)},minimumShouldMatch:function(a){return null==a?c.multi_match.minimum_should_match:(c.multi_match.minimum_should_match=a,this)},rewrite:function(a){return null==a?c.multi_match.rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(c.multi_match.rewrite=a),this)},fuzzyRewrite:function(a){return null==a?c.multi_match.fuzzy_rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(c.multi_match.fuzzy_rewrite=a),this)},lenient:function(a){return null==a?c.multi_match.lenient:(c.multi_match.lenient=a,this)},boost:function(a){return null==a?c.multi_match.boost:(c.multi_match.boost=a,this)},query:function(a){return null==a?c.multi_match.query:(c.multi_match.query=a,this)},type:function(a){return null==a?c.multi_match.type:(a=a.toLowerCase(),("boolean"===a||"phrase"===a||"phrase_prefix"===a)&&(c.multi_match.type=a),this)},fuzziness:function(a){return null==a?c.multi_match.fuzziness:(c.multi_match.fuzziness=a,this)},prefixLength:function(a){return null==a?c.multi_match.prefix_length:(c.multi_match.prefix_length=a,this)},maxExpansions:function(a){return null==a?c.multi_match.max_expansions:(c.multi_match.max_expansions=a,this)},operator:function(a){return null==a?c.multi_match.operator:(a=a.toLowerCase(),("and"===a||"or"===a)&&(c.multi_match.operator=a),this)},slop:function(a){return null==a?c.multi_match.slop:(c.multi_match.slop=a,this)},analyzer:function(a){return null==a?c.multi_match.analyzer:(c.multi_match.analyzer=a,this)},zeroTermsQuery:function(a){return null==a?c.multi_match.zero_terms_query:(a=a.toLowerCase(),("all"===a||"none"===a)&&(c.multi_match.zero_terms_query=a),this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.NestedQuery=function(a){var b={nested:{path:a}};return{path:function(a){return null==a?b.nested.path:(b.nested.path=a,this)},query:function(a){if(null==a)return b.nested.query;if(!m(a))throw new TypeError("Argument must be a Query");return b.nested.query=a._self(),this},filter:function(a){if(null==a)return b.nested.filter;if(!o(a))throw new TypeError("Argument must be a Filter");return b.nested.filter=a._self(),this},scoreMode:function(a){return null==a?b.nested.score_mode:(a=a.toLowerCase(),("avg"===a||"total"===a||"max"===a||"none"===a||"sum"===a)&&(b.nested.score_mode=a),this)},scope:function(){return this},boost:function(a){return null==a?b.nested.boost:(b.nested.boost=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},E.PrefixQuery=function(a,b){var c={prefix:{}};return c.prefix[a]={value:b},{field:function(b){var d=c.prefix[a];return null==b?a:(delete c.prefix[a],a=b,c.prefix[b]=d,this)},value:function(b){return null==b?c.prefix[a].value:(c.prefix[a].value=b,this)},rewrite:function(b){return null==b?c.prefix[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.prefix[a].rewrite=b),this)},boost:function(b){return null==b?c.prefix[a].boost:(c.prefix[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.QueryStringQuery=function(a){var b={query_string:{}};return b.query_string.query=a,{query:function(a){return null==a?b.query_string.query:(b.query_string.query=a,this)},defaultField:function(a){return null==a?b.query_string.default_field:(b.query_string.default_field=a,this)},fields:function(a){if(null==b.query_string.fields&&(b.query_string.fields=[]),null==a)return b.query_string.fields;if(i(a))b.query_string.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or array");b.query_string.fields=a}return this},useDisMax:function(a){return null==a?b.query_string.use_dis_max:(b.query_string.use_dis_max=a,this)},defaultOperator:function(a){return null==a?b.query_string.default_operator:(a=a.toUpperCase(),("AND"===a||"OR"===a)&&(b.query_string.default_operator=a),this)},analyzer:function(a){return null==a?b.query_string.analyzer:(b.query_string.analyzer=a,this)},quoteAnalyzer:function(a){return null==a?b.query_string.quote_analyzer:(b.query_string.quote_analyzer=a,this)},allowLeadingWildcard:function(a){return null==a?b.query_string.allow_leading_wildcard:(b.query_string.allow_leading_wildcard=a,this)},lowercaseExpandedTerms:function(a){return null==a?b.query_string.lowercase_expanded_terms:(b.query_string.lowercase_expanded_terms=a,this)},enablePositionIncrements:function(a){return null==a?b.query_string.enable_position_increments:(b.query_string.enable_position_increments=a,this)},fuzzyPrefixLength:function(a){return null==a?b.query_string.fuzzy_prefix_length:(b.query_string.fuzzy_prefix_length=a,this)},fuzzyMinSim:function(a){return null==a?b.query_string.fuzzy_min_sim:(b.query_string.fuzzy_min_sim=a,this)},phraseSlop:function(a){return null==a?b.query_string.phrase_slop:(b.query_string.phrase_slop=a,this)},boost:function(a){return null==a?b.query_string.boost:(b.query_string.boost=a,this)},analyzeWildcard:function(a){return null==a?b.query_string.analyze_wildcard:(b.query_string.analyze_wildcard=a,this)},autoGeneratePhraseQueries:function(a){return null==a?b.query_string.auto_generate_phrase_queries:(b.query_string.auto_generate_phrase_queries=a,this)},minimumShouldMatch:function(a){return null==a?b.query_string.minimum_should_match:(b.query_string.minimum_should_match=a,this)},tieBreaker:function(a){return null==a?b.query_string.tie_breaker:(b.query_string.tie_breaker=a,this)},escape:function(a){return null==a?b.query_string.escape:(b.query_string.escape=a,this)},fuzzyMaxExpansions:function(a){return null==a?b.query_string.fuzzy_max_expansions:(b.query_string.fuzzy_max_expansions=a,this)},fuzzyRewrite:function(a){return null==a?b.query_string.fuzzy_rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(b.query_string.fuzzy_rewrite=a),this)},rewrite:function(a){return null==a?b.query_string.rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(b.query_string.rewrite=a),this)},quoteFieldSuffix:function(a){return null==a?b.query_string.quote_field_suffix:(b.query_string.quote_field_suffix=a,this)},lenient:function(a){return null==a?b.query_string.lenient:(b.query_string.lenient=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},E.RangeQuery=function(a){var b={range:{}};return b.range[a]={},{field:function(c){var d=b.range[a];return null==c?a:(delete b.range[a],a=c,b.range[c]=d,this)},from:function(c){return null==c?b.range[a].from:(b.range[a].from=c,this)},to:function(c){return null==c?b.range[a].to:(b.range[a].to=c,this)},includeLower:function(c){return null==c?b.range[a].include_lower:(b.range[a].include_lower=c,this)},includeUpper:function(c){return null==c?b.range[a].include_upper:(b.range[a].include_upper=c,this)},gt:function(c){return null==c?b.range[a].gt:(b.range[a].gt=c,this)},gte:function(c){return null==c?b.range[a].gte:(b.range[a].gte=c,this)},lt:function(c){return null==c?b.range[a].lt:(b.range[a].lt=c,this)},lte:function(c){return null==c?b.range[a].lte:(b.range[a].lte=c,this)},boost:function(c){return null==c?b.range[a].boost:(b.range[a].boost=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},E.RegexpQuery=function(a,b){var c={regexp:{}};return c.regexp[a]={value:b},{field:function(b){var d=c.regexp[a];return null==b?a:(delete c.regexp[a],a=b,c.regexp[b]=d,this)},value:function(b){return null==b?c.regexp[a].value:(c.regexp[a].value=b,this)},flags:function(b){return null==b?c.regexp[a].flags:(c.regexp[a].flags=b,this)},flagsValue:function(b){return null==b?c.regexp[a].flags_value:(c.regexp[a].flags_value=b,this)},rewrite:function(b){return null==b?c.regexp[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.regexp[a].rewrite=b),this)},boost:function(b){return null==b?c.regexp[a].boost:(c.regexp[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.SpanFirstQuery=function(a,b){if(!m(a))throw new TypeError("Argument must be a SpanQuery");var c={span_first:{match:a._self(),end:b}};return{match:function(a){if(null==a)return c.span_first.match;if(!m(a))throw new TypeError("Argument must be a SpanQuery");return c.span_first.match=a._self(),this},end:function(a){return null==a?c.span_first.end:(c.span_first.end=a,this)},boost:function(a){return null==a?c.span_first.boost:(c.span_first.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.SpanMultiTermQuery=function(a){if(null!=a&&!m(a))throw new TypeError("Argument must be a MultiTermQuery");var b={span_multi:{match:{}}};return null!=a&&(b.span_multi.match=a._self()),{match:function(a){if(null==a)return b.span_multi.match;if(!m(a))throw new TypeError("Argument must be a MultiTermQuery");return b.span_multi.match=a._self(),this},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},E.SpanNearQuery=function(a,b){var c,d,e={span_near:{clauses:[],slop:b}};if(m(a))e.span_near.clauses.push(a._self());else{if(!g(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(c=0,d=a.length;d>c;c++){if(!m(a[c]))throw new TypeError("Argument must be array of SpanQueries");e.span_near.clauses.push(a[c]._self())}}return{clauses:function(a){var b,c;if(null==a)return e.span_near.clauses;if(m(a))e.span_near.clauses.push(a._self());else{if(!g(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(e.span_near.clauses=[],b=0,c=a.length;c>b;b++){if(!m(a[b]))throw new TypeError("Argument must be array of SpanQueries");e.span_near.clauses.push(a[b]._self())}}return this},slop:function(a){return null==a?e.span_near.slop:(e.span_near.slop=a,this)},inOrder:function(a){return null==a?e.span_near.in_order:(e.span_near.in_order=a,this)},collectPayloads:function(a){return null==a?e.span_near.collect_payloads:(e.span_near.collect_payloads=a,this)},boost:function(a){return null==a?e.span_near.boost:(e.span_near.boost=a,this)},toString:function(){return JSON.stringify(e)},_type:function(){return"query"},_self:function(){return e}}},E.SpanNotQuery=function(a,b){if(!m(a)||!m(b))throw new TypeError("Argument must be a SpanQuery");var c={span_not:{include:a._self(),exclude:b._self()}};return{include:function(a){if(null==a)return c.span_not.include;if(!m(a))throw new TypeError("Argument must be a SpanQuery");return c.span_not.include=a._self(),this},exclude:function(a){if(null==a)return c.span_not.exclude;if(!m(a))throw new TypeError("Argument must be a SpanQuery");return c.span_not.exclude=a._self(),this},boost:function(a){return null==a?c.span_not.boost:(c.span_not.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.SpanOrQuery=function(a){var b,c,d={span_or:{clauses:[]}};if(m(a))d.span_or.clauses.push(a._self());else{if(!g(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(b=0,c=a.length;c>b;b++){if(!m(a[b]))throw new TypeError("Argument must be array of SpanQueries");d.span_or.clauses.push(a[b]._self())}}return{clauses:function(a){var b,c;if(null==a)return d.span_or.clauses;if(m(a))d.span_or.clauses.push(a._self());else{if(!g(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(d.span_or.clauses=[],b=0,c=a.length;c>b;b++){if(!m(a[b]))throw new TypeError("Argument must be array of SpanQueries");d.span_or.clauses.push(a[b]._self())}}return this},boost:function(a){return null==a?d.span_or.boost:(d.span_or.boost=a,this)},toString:function(){return JSON.stringify(d)},_type:function(){return"query"},_self:function(){return d}}},E.SpanTermQuery=function(a,b){var c={span_term:{}};return c.span_term[a]={term:b},{field:function(b){var d=c.span_term[a];return null==b?a:(delete c.span_term[a],a=b,c.span_term[b]=d,this)},term:function(b){return null==b?c.span_term[a].term:(c.span_term[a].term=b,this)},boost:function(b){return null==b?c.span_term[a].boost:(c.span_term[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.TermQuery=function(a,b){var c={term:{}};return c.term[a]={term:b},{field:function(b){var d=c.term[a];return null==b?a:(delete c.term[a],a=b,c.term[b]=d,this)},term:function(b){return null==b?c.term[a].term:(c.term[a].term=b,this)},boost:function(b){return null==b?c.term[a].boost:(c.term[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.TermsQuery=function(a,b){var c={terms:{}};if(i(b))c.terms[a]=[b];else{if(!g(b))throw new TypeError("Argument must be string or array");c.terms[a]=b}return{field:function(b){var d=c.terms[a];return null==b?a:(delete c.terms[a],a=b,c.terms[b]=d,this)},terms:function(b){if(null==b)return c.terms[a];if(i(b))c.terms[a].push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");c.terms[a]=b}return this},minimumShouldMatch:function(a){return null==a?c.terms.minimum_should_match:(c.terms.minimum_should_match=a,this)},disableCoord:function(a){return null==a?c.terms.disable_coord:(c.terms.disable_coord=a,this)},boost:function(a){return null==a?c.terms.boost:(c.terms.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.TopChildrenQuery=function(a,b){if(!m(a))throw new TypeError("Argument must be a Query");var c={top_children:{query:a._self(),type:b}};return{query:function(a){if(null==a)return c.top_children.query;if(!m(a))throw new TypeError("Argument must be a Query");return c.top_children.query=a._self(),this},type:function(a){return null==a?c.top_children.type:(c.top_children.type=a,this)},scope:function(){return this},score:function(a){return null==a?c.top_children.score:(a=a.toLowerCase(),("max"===a||"sum"===a||"avg"===a||"total"===a)&&(c.top_children.score=a),this)},scoreMode:function(a){return null==a?c.top_children.score_mode:(a=a.toLowerCase(),("max"===a||"sum"===a||"avg"===a||"total"===a)&&(c.top_children.score_mode=a),this)},factor:function(a){return null==a?c.top_children.factor:(c.top_children.factor=a,this)},incrementalFactor:function(a){return null==a?c.top_children.incremental_factor:(c.top_children.incremental_factor=a,this)},boost:function(a){return null==a?c.top_children.boost:(c.top_children.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.WildcardQuery=function(a,b){var c={wildcard:{}};return c.wildcard[a]={value:b},{field:function(b){var d=c.wildcard[a];return null==b?a:(delete c.wildcard[a],a=b,c.wildcard[b]=d,this)},value:function(b){return null==b?c.wildcard[a].value:(c.wildcard[a].value=b,this)},rewrite:function(b){return null==b?c.wildcard[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.wildcard[a].rewrite=b),this)},boost:function(b){return null==b?c.wildcard[a].boost:(c.wildcard[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},E.ClusterHealth=function(){var a={},b=["indices"];return{indices:function(b){if(null==a.indices&&(a.indices=[]),null==b)return a.indices;if(i(b))a.indices.push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");a.indices=b}return this},local:function(b){return null==b?a.local:(a.local=b,this)},masterTimeout:function(b){return null==b?a.master_timeout:(a.master_timeout=b,this)},timeout:function(b){return null==b?a.timeout:(a.timeout=b,this)},waitForStatus:function(b){return null==b?a.wait_for_status:(b=b.toLowerCase(),("green"===b||"yellow"===b||"red"===b)&&(a.wait_for_status=b),this)},waitForRelocatingShards:function(b){return null==b?a.wait_for_relocating_shards:(a.wait_for_relocating_shards=b,this)},waitForActiveShards:function(b){return null==b?a.wait_for_active_shards:(a.wait_for_active_shards=b,this)},waitForNodes:function(b){return null==b?a.wait_for_nodes:(a.wait_for_nodes=b,this)},level:function(b){return null==b?a.level:(b=b.toLowerCase(),("cluster"===b||"indices"===b||"shards"===b)&&(a.level=b),this)},toString:function(){return JSON.stringify(a)},_type:function(){return"cluster health"},_self:function(){return a},doHealth:function(c,d){if(null==E.client)throw new Error("No Client Set");var f="/_cluster/health";return a.indices&&a.indices.length>0&&(f=f+"/"+a.indices.join()),E.client.get(f,e(a,b),c,d)}}},E.ClusterState=function(){var a={},b=[];return{local:function(b){return null==b?a.local:(a.local=b,this)},masterTimeout:function(b){return null==b?a.master_timeout:(a.master_timeout=b,this)},filterNodes:function(b){return null==b?a.filter_nodes:(a.filter_nodes=b,this)},filterRoutingTable:function(b){return null==b?a.filter_routing_table:(a.filter_routing_table=b,this)},filterMetadata:function(b){return null==b?a.filter_metadata:(a.filter_metadata=b,this)},filterBlocks:function(b){return null==b?a.filter_blocks:(a.filter_blocks=b,this)},filterIndices:function(b){if(null==a.filter_indices&&(a.filter_indices=[]),null==b)return a.filter_indices;if(i(b))a.filter_indices.push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");a.filter_indices=b}return this},filterIndexTemplates:function(b){if(null==a.filter_index_templates&&(a.filter_index_templates=[]),null==b)return a.filter_index_templates;if(i(b))a.filter_index_templates.push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");a.filter_index_templates=b}return this},toString:function(){return JSON.stringify(a)},_type:function(){return"cluster state"},_self:function(){return a},doState:function(c,d){if(null==E.client)throw new Error("No Client Set");var f="/_cluster/state";return E.client.get(f,e(a,b),c,d)}}},E.NodeInfo=function(){var a={},b=["nodes"];return{nodes:function(b){if(null==a.nodes&&(a.nodes=[]),null==b)return a.nodes;if(i(b))a.nodes.push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");a.nodes=b}return this},clear:function(b){return null==b?a.clear:(a.clear=b,this)},all:function(b){return null==b?a.all:(a.all=b,this)},settings:function(b){return null==b?a.settings:(a.settings=b,this)},os:function(b){return null==b?a.os:(a.os=b,this)},process:function(b){return null==b?a.process:(a.process=b,this)},jvm:function(b){return null==b?a.jvm:(a.jvm=b,this)},threadPool:function(b){return null==b?a.thread_pool:(a.thread_pool=b,this)},network:function(b){return null==b?a.network:(a.network=b,this)},transport:function(b){return null==b?a.transport:(a.transport=b,this)},http:function(b){return null==b?a.http:(a.http=b,this)},plugin:function(b){return null==b?a.plugin:(a.plugin=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"node info"},_self:function(){return a},doInfo:function(c,d){if(null==E.client)throw new Error("No Client Set");var f="/_nodes";return a.nodes&&a.nodes.length>0&&(f=f+"/"+a.nodes.join()),E.client.get(f,e(a,b),c,d)}}},E.NodeStats=function(){var a={},b=["nodes"];return{nodes:function(b){if(null==a.nodes&&(a.nodes=[]),null==b)return a.nodes;if(i(b))a.nodes.push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");a.nodes=b}return this},clear:function(b){return null==b?a.clear:(a.clear=b,this)
},all:function(b){return null==b?a.all:(a.all=b,this)},indices:function(b){return null==b?a.indices:(a.indices=b,this)},os:function(b){return null==b?a.os:(a.os=b,this)},process:function(b){return null==b?a.process:(a.process=b,this)},jvm:function(b){return null==b?a.jvm:(a.jvm=b,this)},threadPool:function(b){return null==b?a.thread_pool:(a.thread_pool=b,this)},network:function(b){return null==b?a.network:(a.network=b,this)},fs:function(b){return null==b?a.fs:(a.fs=b,this)},transport:function(b){return null==b?a.transport:(a.transport=b,this)},http:function(b){return null==b?a.http:(a.http=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"node stats"},_self:function(){return a},doStats:function(c,d){if(null==E.client)throw new Error("No Client Set");var f="/_nodes";return a.nodes&&a.nodes.length>0&&(f=f+"/"+a.nodes.join()),f+="/stats",E.client.get(f,e(a,b),c,d)}}},E.GeoPoint=function(b){var c=[0,0];return null!=b&&g(b)&&2===b.length&&(c=[b[1],b[0]]),{properties:function(b){return null==b?c:(h(b)&&a(b,"lat")&&a(b,"lon")&&(c={lat:b.lat,lon:b.lon}),this)},string:function(a){return null==a?c:(i(a)&&-1!==a.indexOf(",")&&(c=a),this)},geohash:function(a,b){return b=null!=b&&j(b)?b:12,null==a?c:(i(a)&&a.length===b&&(c=a),this)},array:function(a){return null==a?c:(g(a)&&2===a.length&&(c=[a[1],a[0]]),this)},toString:function(){return JSON.stringify(c)},_type:function(){return"geo point"},_self:function(){return c}}},E.Highlight=function(c){var d={fields:{}},e=function(b,c,e){null==b?d[c]=e:(a(d.fields,b)||(d.fields[b]={}),d.fields[b][c]=e)};return null!=c&&(i(c)?d.fields[c]={}:g(c)&&b(c,function(a){d.fields[a]={}})),{fields:function(c){return null==c?d.fields:void(i(c)?a(d.fields,c)||(d.fields[c]={}):g(c)&&b(c,function(b){a(d.fields,b)||(d.fields[b]={})}))},preTags:function(a,b){return null===a&&null!=b?d.fields[b].pre_tags:null==a?d.pre_tags:(i(a)?e(b,"pre_tags",[a]):g(a)&&e(b,"pre_tags",a),this)},postTags:function(a,b){return null===a&&null!=b?d.fields[b].post_tags:null==a?d.post_tags:(i(a)?e(b,"post_tags",[a]):g(a)&&e(b,"post_tags",a),this)},order:function(a,b){return null===a&&null!=b?d.fields[b].order:null==a?d.order:(a=a.toLowerCase(),"score"===a&&e(b,"order",a),this)},tagsSchema:function(a){return null==a?d.tags_schema:(a=a.toLowerCase(),"styled"===a&&(d.tags_schema=a),this)},highlightFilter:function(a,b){return null===a&&null!=b?d.fields[b].highlight_filter:null==a?d.highlight_filter:(e(b,"highlight_filter",a),this)},fragmentSize:function(a,b){return null===a&&null!=b?d.fields[b].fragment_size:null==a?d.fragment_size:(e(b,"fragment_size",a),this)},numberOfFragments:function(a,b){return null===a&&null!=b?d.fields[b].number_of_fragments:null==a?d.number_of_fragments:(e(b,"number_of_fragments",a),this)},encoder:function(a){return null==a?d.encoder:(a=a.toLowerCase(),("default"===a||"html"===a)&&(d.encoder=a),this)},requireFieldMatch:function(a,b){return null===a&&null!=b?d.fields[b].require_field_match:null==a?d.require_field_match:(e(b,"require_field_match",a),this)},boundaryMaxScan:function(a,b){return null===a&&null!=b?d.fields[b].boundary_max_scan:null==a?d.boundary_max_scan:(e(b,"boundary_max_scan",a),this)},boundaryChars:function(a,b){return null===a&&null!=b?d.fields[b].boundary_chars:null==a?d.boundary_chars:(e(b,"boundary_chars",a),this)},type:function(a,b){return null===a&&null!=b?d.fields[b].type:null==a?d.type:(a=a.toLowerCase(),("fast-vector-highlighter"===a||"highlighter"===a)&&e(b,"type",a),this)},fragmenter:function(a,b){return null===a&&null!=b?d.fields[b].fragmenter:null==a?d.fragmenter:(a=a.toLowerCase(),("simple"===a||"span"===a)&&e(b,"fragmenter",a),this)},options:function(a,b){if(null===a&&null!=b)return d.fields[b].options;if(null==a)return d.options;if(!h(a)||g(a)||l(a))throw new TypeError("Parameter must be an object");return e(b,"options",a),this},toString:function(){return JSON.stringify(d)},_type:function(){return"highlight"},_self:function(){return d}}},E.IndexedShape=function(a,b){var c={type:a,id:b};return{type:function(a){return null==a?c.type:(c.type=a,this)},id:function(a){return null==a?c.id:(c.id=a,this)},index:function(a){return null==a?c.index:(c.index=a,this)},shapeFieldName:function(a){return null==a?c.shape_field_name:(c.shape_field_name=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"indexed shape"},_self:function(){return c}}},E.MultiSearchRequest=function(b){var c,d,e,f={},h=function(){var b="",c=[];d.length>0&&(b=b+"/"+d.join()),e.length>0&&(b=b+"/"+e.join()),b+="/_msearch";for(var g in f)a(f,g)&&""!==f[g]&&c.push(g+"="+encodeURIComponent(f[g]));return c.length>0&&(b=b+"?"+c.join("&")),b};return c=[],b=b||{},d=null==b.indices?[]:i(b.indices)?[b.indices]:b.indices,e=null==b.types?[]:i(b.types)?[b.types]:b.types,0===d.length&&e.length>0&&(d=["_all"]),{requests:function(a){if(null==a)return c;if(C(a))c.push(a);else{if(!g(a))throw new TypeError("Argument must be request or array");c=a}return this},searchType:function(a){return null==a?f.search_type:(a=a.toLowerCase(),("dfs_query_then_fetch"===a||"dfs_query_and_fetch"===a||"query_then_fetch"===a||"query_and_fetch"===a||"scan"===a||"count"===a)&&(f.search_type=a),this)},indices:function(a){if(null==a)return d;if(i(a))d=[a];else{if(!g(a))throw new TypeError("Argument must be a string or array");d=a}return 0===d.length&&e.length>0&&(d=["_all"]),this},types:function(a){if(null==a)return e;if(i(a))e=[a];else{if(!g(a))throw new TypeError("Argument must be a string or array");e=a}return 0===d.length&&e.length>0&&(d=["_all"]),this},ignoreIndices:function(a){return null==a?f.ignore_indices:(a=a.toLowerCase(),("none"===a||"missing"===a)&&(f.ignore_indices=a),this)},toString:function(){var a,b,d=[];for(a=0,b=c.length;b>a;a++)d.push(c[a]._self());return JSON.stringify(d)},_type:function(){return"multi search request"},_self:function(){var a,b,d=[];for(a=0,b=c.length;b>a;a++)d.push(c[a]._self());return d},doSearch:function(a,b){var d,e,f,g,i,j="";if(null==E.client)throw new Error("No Client Set");for(d=0,e=c.length;e>d;d++)f=c[d],i={},f.indices().length>0&&(i.indices=f.indices()),f.types().length>0&&(i.types=f.types()),null!=f.searchType()&&(i.search_type=f.searchType()),null!=f.preference()&&(i.preference=f.preference()),null!=f.routing()&&(i.routing=f.routing()),null!=f.ignoreIndices()&&(i.ignore_indices=f.ignoreIndices()),j=j+JSON.stringify(i)+"\n",g=f._self(),null!=f.timeout()&&(g.timeout=f.timeout()),j=j+JSON.stringify(g)+"\n";return E.client.post(h(),j,a,b)}}},E.Request=function(b){var d,e,f,h={},j=function(b){var c="",d=[];e.length>0&&(c=c+"/"+e.join()),f.length>0&&(c=c+"/"+f.join()),b.length>0&&"/"!==b[0]&&(c+="/"),c+=b;for(var g in h)a(h,g)&&""!==h[g]&&d.push(g+"="+encodeURIComponent(h[g]));return d.length>0&&(c=c+"?"+d.join("&")),c};return d={},b=b||{},e=null==b.indices?[]:i(b.indices)?[b.indices]:b.indices,f=null==b.types?[]:i(b.types)?[b.types]:b.types,0===e.length&&f.length>0&&(e=["_all"]),null!=b.routing&&(h.routing=b.routing),{sort:function(){var b,c;if(a(d,"sort")||(d.sort=[]),0===arguments.length)return d.sort;if(1===arguments.length){var e=arguments[0];if(i(e))d.sort.push(e);else if(u(e))d.sort.push(e._self());else{if(!g(e))throw new TypeError("Argument must be string, Sort, or array");for(d.sort=[],b=0,c=e.length;c>b;b++)if(i(e[b]))d.sort.push(e[b]);else{if(!u(e[b]))throw new TypeError("Invalid object in array");d.sort.push(e[b]._self())}}}else if(2===arguments.length){var f=arguments[0],h=arguments[1];if(i(f)&&i(h)&&(h=h.toLowerCase(),"asc"===h||"desc"===h)){var j={};j[f]={order:h},d.sort.push(j)}}return this},trackScores:function(a){return null==a?d.track_scores:(d.track_scores=a,this)},size:function(a){return null==a?d.size:(d.size=a,this)},timeout:function(a){return null==a?h.timeout:(h.timeout=a,this)},routing:function(a){return null==a?h.routing:(h.routing=a,this)},replication:function(a){return null==a?h.replication:(a=a.toLowerCase(),("async"===a||"sync"===a||"default"===a)&&(h.replication=a),this)},consistency:function(a){return null==a?h.consistency:(a=a.toLowerCase(),("default"===a||"one"===a||"quorum"===a||"all"===a)&&(h.consistency=a),this)},searchType:function(a){return null==a?h.search_type:(a=a.toLowerCase(),("dfs_query_then_fetch"===a||"dfs_query_and_fetch"===a||"query_then_fetch"===a||"query_and_fetch"===a||"scan"===a||"count"===a)&&(h.search_type=a),this)},fields:function(a){if(null==a)return d.fields;if(null==d.fields&&(d.fields=[]),i(a))d.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");d.fields=a}return this},rescore:function(a){if(null==a)return d.rescore;if(!n(a))throw new TypeError("Argument must be a Rescore");return d.rescore=a._self(),this},from:function(a){return null==a?d.from:(d.from=a,this)},query:function(a){if(null==a)return d.query;if(!m(a))throw new TypeError("Argument must be a Query");return d.query=a._self(),this},indices:function(a){if(null==a)return e;if(i(a))e=[a];else{if(!g(a))throw new TypeError("Argument must be a string or array");e=a}return 0===e.length&&f.length>0&&(e=["_all"]),this},types:function(a){if(null==a)return f;if(i(a))f=[a];else{if(!g(a))throw new TypeError("Argument must be a string or array");f=a}return 0===e.length&&f.length>0&&(e=["_all"]),this},facet:function(a){if(null==a)return d.facets;if(null==d.facets&&(d.facets={}),!p(a))throw new TypeError("Argument must be a Facet");return c(d.facets,a._self()),this},filter:function(a){if(null==a)return d.filter;if(!o(a))throw new TypeError("Argument must be a Filter");return d.filter=a._self(),this},highlight:function(a){if(null==a)return d.highlight;if(!v(a))throw new TypeError("Argument must be a Highlight object");return d.highlight=a._self(),this},suggest:function(a){if(null==a)return d.suggest;if(null==d.suggest&&(d.suggest={}),i(a))d.suggest.text=a;else{if(!w(a))throw new TypeError("Argument must be a string or Suggest object");c(d.suggest,a._self())}return this},scriptField:function(a){if(null==a)return d.script_fields;if(null==d.script_fields&&(d.script_fields={}),!q(a))throw new TypeError("Argument must be a ScriptField");return c(d.script_fields,a._self()),this},preference:function(a){return null==a?h.preference:(h.preference=a,this)},local:function(a){return null==a?h.local:(h.local=a,this)},ignoreIndices:function(a){return null==a?h.ignore_indices:(a=a.toLowerCase(),("none"===a||"missing"===a)&&(h.ignore_indices=a),this)},indexBoost:function(a,b){return null==d.indices_boost&&(d.indices_boost={}),0===arguments.length?d.indices_boost:(d.indices_boost[a]=b,this)},explain:function(a){return null==a?d.explain:(d.explain=a,this)},version:function(a){return null==a?d.version:(d.version=a,this)},minScore:function(a){return null==a?d.min_score:(d.min_score=a,this)},toString:function(){return JSON.stringify(d)},_type:function(){return"request"},_self:function(){return d},doDeleteByQuery:function(a,b){var c=JSON.stringify(d.query);if(null==E.client)throw new Error("No Client Set");return E.client.del(j("_query"),c,a,b)},doCount:function(a,b){var c=JSON.stringify(d.query);if(null==E.client)throw new Error("No Client Set");return E.client.post(j("_count"),c,a,b)},doSearch:function(a,b){var c=JSON.stringify(d);if(null==E.client)throw new Error("No Client Set");return E.client.post(j("_search"),c,a,b)},doSearchShards:function(a,b){if(null==E.client)throw new Error("No Client Set");return E.client.post(j("_search_shards"),"",a,b)}}},E.Rescore=function(a,b){if(null!=a&&!j(a))throw new TypeError("Argument must be a Number");if(null!=b&&!m(b))throw new TypeError("Argument must be a Query");var c={query:{}};return null!=a&&(c.window_size=a),null!=b&&(c.query.rescore_query=b._self()),{rescoreQuery:function(a){if(null==a)return c.query.rescore_query;if(!m(a))throw new TypeError("Argument must be a Query");return c.query.rescore_query=a._self(),this},queryWeight:function(a){if(null==a)return c.query.query_weight;if(!j(a))throw new TypeError("Argument must be a Number");return c.query.query_weight=a,this},rescoreQueryWeight:function(a){if(null==a)return c.query.rescore_query_weight;if(!j(a))throw new TypeError("Argument must be a Number");return c.query.rescore_query_weight=a,this},windowSize:function(a){if(null==a)return c.window_size;if(!j(a))throw new TypeError("Argument must be a Number");return c.window_size=a,this},toString:function(){return JSON.stringify(c)},_type:function(){return"rescore"},_self:function(){return c}}},E.ScriptField=function(a){var b={};return b[a]={},{lang:function(c){return null==c?b[a].lang:(b[a].lang=c,this)},script:function(c){return null==c?b[a].script:(b[a].script=c,this)},params:function(c){return null==c?b[a].params:(b[a].params=c,this)},ignoreFailure:function(c){return null==c?b[a].ignore_failure:(b[a].ignore_failure=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"script field"},_self:function(){return b}}},E.Shape=function(a,b){var c={},d=function(a){var b=!1;return("point"===a||"linestring"===a||"polygon"===a||"multipoint"===a||"envelope"===a||"multipolygon"===a)&&(b=!0),b};return a=a.toLowerCase(),d(a)&&(c.type=a,c.coordinates=b),{type:function(a){return null==a?c.type:(a=a.toLowerCase(),d(a)&&(c.type=a),this)},coordinates:function(a){return null==a?c.coordinates:(c.coordinates=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"shape"},_self:function(){return c}}},E.Sort=function(a){null==a&&(a="_score");var b={},c=a,d="_geo_distance",e="_script";return b[c]={},{field:function(d){var e=b[c];return null==d?a:(delete b[c],a=d,c=d,b[c]=e,this)},geoDistance:function(e){var f=b[c];if(null==e)return b[c][a];if(!r(e))throw new TypeError("Argument must be a GeoPoint");return delete b[c],c=d,b[c]=f,b[c][a]=e._self(),this},script:function(a){var d=b[c];return null==a?b[c].script:(delete b[c],c=e,b[c]=d,b[c].script=a,this)},order:function(a){return null==a?b[c].order:(a=a.toLowerCase(),("asc"===a||"desc"===a)&&(b[c].order=a),this)},asc:function(){return b[c].order="asc",this},desc:function(){return b[c].order="desc",this},reverse:function(a){return null==a?b[c].reverse:(b[c].reverse=a,this)},missing:function(a){return null==a?b[c].missing:(b[c].missing=a,this)},ignoreUnmapped:function(a){return null==a?b[c].ignore_unmapped:(b[c].ignore_unmapped=a,this)},unit:function(a){return null==a?b[c].unit:(a=a.toLowerCase(),("mi"===a||"km"===a)&&(b[c].unit=a),this)},normalize:function(a){return null==a?b[c].normalize:(b[c].normalize=a,this)},distanceType:function(a){return null==a?b[c].distance_type:(a=a.toLowerCase(),("arc"===a||"plane"===a)&&(b[c].distance_type=a),this)},params:function(a){return null==a?b[c].params:(b[c].params=a,this)},lang:function(a){return null==a?b[c].lang:(b[c].lang=a,this)},type:function(a){return null==a?b[c].type:(a=a.toLowerCase(),("string"===a||"number"===a)&&(b[c].type=a),this)},mode:function(a){return null==a?b[c].mode:(a=a.toLowerCase(),("min"===a||"max"===a||"sum"===a||"avg"===a)&&(b[c].mode=a),this)},nestedPath:function(a){return null==a?b[c].nested_path:(b[c].nested_path=a,this)},nestedFilter:function(a){if(null==a)return b[c].nested_filter;if(!o(a))throw new TypeError("Argument must be a Filter");return b[c].nested_filter=a._self(),this},toString:function(){return JSON.stringify(b)},_type:function(){return"sort"},_self:function(){return b}}},E.DirectGenerator=function(){var a=E.DirectSettingsMixin(),b=a._self();return c(a,{preFilter:function(a){return null==a?b.pre_filter:(b.pre_filter=a,this)},postFilter:function(a){return null==a?b.post_filter:(b.post_filter=a,this)},field:function(a){return null==a?b.field:(b.field=a,this)},size:function(a){return null==a?b.size:(b.size=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"generator"},_self:function(){return b}})},E.DirectSettingsMixin=function(){var a={};return{accuracy:function(b){return null==b?a.accuracy:(a.accuracy=b,this)},suggestMode:function(b){return null==b?a.suggest_mode:(b=b.toLowerCase(),("missing"===b||"popular"===b||"always"===b)&&(a.suggest_mode=b),this)},sort:function(b){return null==b?a.sort:(b=b.toLowerCase(),("score"===b||"frequency"===b)&&(a.sort=b),this)},stringDistance:function(b){return null==b?a.string_distance:(b=b.toLowerCase(),("internal"===b||"damerau_levenshtein"===b||"levenstein"===b||"jarowinkler"===b||"ngram"===b)&&(a.string_distance=b),this)},maxEdits:function(b){return null==b?a.max_edits:(a.max_edits=b,this)},maxInspections:function(b){return null==b?a.max_inspections:(a.max_inspections=b,this)},maxTermFreq:function(b){return null==b?a.max_term_freq:(a.max_term_freq=b,this)},prefixLen:function(b){return null==b?a.prefix_len:(a.prefix_len=b,this)},minWordLen:function(b){return null==b?a.min_word_len:(a.min_word_len=b,this)},minDocFreq:function(b){return null==b?a.min_doc_freq:(a.min_doc_freq=b,this)},_self:function(){return a}}},E.PhraseSuggester=function(a){var b={};return b[a]={phrase:{}},{text:function(c){return null==c?b[a].text:(b[a].text=c,this)},analyzer:function(c){return null==c?b[a].phrase.analyzer:(b[a].phrase.analyzer=c,this)},field:function(c){return null==c?b[a].phrase.field:(b[a].phrase.field=c,this)},size:function(c){return null==c?b[a].phrase.size:(b[a].phrase.size=c,this)},shardSize:function(c){return null==c?b[a].phrase.shard_size:(b[a].phrase.shard_size=c,this)},realWorldErrorLikelihood:function(c){return null==c?b[a].phrase.real_world_error_likelihood:(b[a].phrase.real_world_error_likelihood=c,this)},confidence:function(c){return null==c?b[a].phrase.confidence:(b[a].phrase.confidence=c,this)},separator:function(c){return null==c?b[a].phrase.separator:(b[a].phrase.separator=c,this)},maxErrors:function(c){return null==c?b[a].phrase.max_errors:(b[a].phrase.max_errors=c,this)},gramSize:function(c){return null==c?b[a].phrase.gram_size:(b[a].phrase.gram_size=c,this)},forceUnigrams:function(c){return null==c?b[a].phrase.force_unigrams:(b[a].phrase.force_unigrams=c,this)},linearSmoothing:function(c,d,e){return 0===arguments.length?b[a].phrase.smoothing:(b[a].phrase.smoothing={linear:{trigram_lambda:c,bigram_lambda:d,unigram_lambda:e}},this)},laplaceSmoothing:function(c){return null==c?b[a].phrase.smoothing:(b[a].phrase.smoothing={laplace:{alpha:c}},this)},stupidBackoffSmoothing:function(c){return null==c?b[a].phrase.smoothing:(b[a].phrase.smoothing={stupid_backoff:{discount:c}},this)},directGenerator:function(c){var d,e;if(null==b[a].phrase.direct_generator&&(b[a].phrase.direct_generator=[]),null==c)return b[a].phrase.direct_generator;if(x(c))b[a].phrase.direct_generator.push(c._self());else{if(!g(c))throw new TypeError("Argument must be a Generator or array of Generators");for(b[a].phrase.direct_generator=[],d=0,e=c.length;e>d;d++){if(!x(c[d]))throw new TypeError("Argument must be an array of Generators");b[a].phrase.direct_generator.push(c[d]._self())}}return this},toString:function(){return JSON.stringify(b)},_type:function(){return"suggest"},_self:function(){return b}}},E.TermSuggester=function(a){var b={},d=E.DirectSettingsMixin();return b[a]={term:d._self()},c(d,{text:function(c){return null==c?b[a].text:(b[a].text=c,this)},analyzer:function(c){return null==c?b[a].term.analyzer:(b[a].term.analyzer=c,this)},field:function(c){return null==c?b[a].term.field:(b[a].term.field=c,this)},size:function(c){return null==c?b[a].term.size:(b[a].term.size=c,this)},shardSize:function(c){return null==c?b[a].term.shard_size:(b[a].term.shard_size=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"suggest"},_self:function(){return b}})},E.noConflict=function(){return F.ejs=G,this}}.call(this),function(){var a=this,b=a._,c=Array.prototype,d=Object.prototype,e=Function.prototype,f=c.push,g=c.slice,h=c.concat,i=d.toString,j=d.hasOwnProperty,k=Array.isArray,l=Object.keys,m=e.bind,n=function(a){return a instanceof n?a:this instanceof n?void(this._wrapped=a):new n(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports._=n):a._=n,n.VERSION="1.7.0";var o=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};n.iteratee=function(a,b,c){return null==a?n.identity:n.isFunction(a)?o(a,b,c):n.isObject(a)?n.matches(a):n.property(a)},n.each=n.forEach=function(a,b,c){if(null==a)return a;b=o(b,c);var d,e=a.length;if(e===+e)for(d=0;e>d;d++)b(a[d],d,a);else{var f=n.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},n.map=n.collect=function(a,b,c){if(null==a)return[];b=n.iteratee(b,c);for(var d,e=a.length!==+a.length&&n.keys(a),f=(e||a).length,g=Array(f),h=0;f>h;h++)d=e?e[h]:h,g[h]=b(a[d],d,a);return g};var p="Reduce of empty array with no initial value";n.reduce=n.foldl=n.inject=function(a,b,c,d){null==a&&(a=[]),b=o(b,d,4);var e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length,h=0;if(arguments.length<3){if(!g)throw new TypeError(p);c=a[f?f[h++]:h++]}for(;g>h;h++)e=f?f[h]:h,c=b(c,a[e],e,a);return c},n.reduceRight=n.foldr=function(a,b,c,d){null==a&&(a=[]),b=o(b,d,4);var e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;if(arguments.length<3){if(!g)throw new TypeError(p);c=a[f?f[--g]:--g]}for(;g--;)e=f?f[g]:g,c=b(c,a[e],e,a);return c},n.find=n.detect=function(a,b,c){var d;return b=n.iteratee(b,c),n.some(a,function(a,c,e){return b(a,c,e)?(d=a,!0):void 0}),d},n.filter=n.select=function(a,b,c){var d=[];return null==a?d:(b=n.iteratee(b,c),n.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)},n.reject=function(a,b,c){return n.filter(a,n.negate(n.iteratee(b)),c)},n.every=n.all=function(a,b,c){if(null==a)return!0;b=n.iteratee(b,c);var d,e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,!b(a[e],e,a))return!1;return!0},n.some=n.any=function(a,b,c){if(null==a)return!1;b=n.iteratee(b,c);var d,e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,b(a[e],e,a))return!0;return!1},n.contains=n.include=function(a,b){return null==a?!1:(a.length!==+a.length&&(a=n.values(a)),n.indexOf(a,b)>=0)},n.invoke=function(a,b){var c=g.call(arguments,2),d=n.isFunction(b);return n.map(a,function(a){return(d?b:a[b]).apply(a,c)})},n.pluck=function(a,b){return n.map(a,n.property(b))},n.where=function(a,b){return n.filter(a,n.matches(b))},n.findWhere=function(a,b){return n.find(a,n.matches(b))},n.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=n.iteratee(b,c),n.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},n.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=n.iteratee(b,c),n.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},n.shuffle=function(a){for(var b,c=a&&a.length===+a.length?a:n.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=n.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},n.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=n.values(a)),a[n.random(a.length-1)]):n.shuffle(a).slice(0,Math.max(0,b))},n.sortBy=function(a,b,c){return b=n.iteratee(b,c),n.pluck(n.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var q=function(a){return function(b,c,d){var e={};return c=n.iteratee(c,d),n.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};n.groupBy=q(function(a,b,c){n.has(a,c)?a[c].push(b):a[c]=[b]}),n.indexBy=q(function(a,b,c){a[c]=b}),n.countBy=q(function(a,b,c){n.has(a,c)?a[c]++:a[c]=1}),n.sortedIndex=function(a,b,c,d){c=n.iteratee(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=f+g>>>1;c(a[h])<e?f=h+1:g=h}return f},n.toArray=function(a){return a?n.isArray(a)?g.call(a):a.length===+a.length?n.map(a,n.identity):n.values(a):[]},n.size=function(a){return null==a?0:a.length===+a.length?a.length:n.keys(a).length},n.partition=function(a,b,c){b=n.iteratee(b,c);var d=[],e=[];return n.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},n.first=n.head=n.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:g.call(a,0,b)},n.initial=function(a,b,c){return g.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},n.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:g.call(a,Math.max(a.length-b,0))},n.rest=n.tail=n.drop=function(a,b,c){return g.call(a,null==b||c?1:b)},n.compact=function(a){return n.filter(a,n.identity)};var r=function(a,b,c,d){if(b&&n.every(a,n.isArray))return h.apply(d,a);for(var e=0,g=a.length;g>e;e++){var i=a[e];n.isArray(i)||n.isArguments(i)?b?f.apply(d,i):r(i,b,c,d):c||d.push(i)}return d};n.flatten=function(a,b){return r(a,b,!1,[])},n.without=function(a){return n.difference(a,g.call(arguments,1))},n.uniq=n.unique=function(a,b,c,d){if(null==a)return[];n.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=n.iteratee(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g];if(b)g&&f===i||e.push(i),f=i;else if(c){var j=c(i,g,a);n.indexOf(f,j)<0&&(f.push(j),e.push(i))}else n.indexOf(e,i)<0&&e.push(i)}return e},n.union=function(){return n.uniq(r(arguments,!0,!0,[]))},n.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;e>d;d++){var f=a[d];if(!n.contains(b,f)){for(var g=1;c>g&&n.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},n.difference=function(a){var b=r(g.call(arguments,1),!0,!0,[]);return n.filter(a,function(a){return!n.contains(b,a)})},n.zip=function(a){if(null==a)return[];for(var b=n.max(arguments,"length").length,c=Array(b),d=0;b>d;d++)c[d]=n.pluck(arguments,d);return c},n.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},n.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=n.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}for(;e>d;d++)if(a[d]===b)return d;return-1},n.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=a.length;for("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1));--d>=0;)if(a[d]===b)return d;return-1},n.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var s=function(){};n.bind=function(a,b){var c,d;if(m&&a.bind===m)return m.apply(a,g.call(arguments,1));if(!n.isFunction(a))throw new TypeError("Bind must be called on a function");return c=g.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(g.call(arguments)));s.prototype=a.prototype;var e=new s;s.prototype=null;var f=a.apply(e,c.concat(g.call(arguments)));return n.isObject(f)?f:e}},n.partial=function(a){var b=g.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===n&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},n.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=n.bind(a[c],a);return a},n.memoize=function(a,b){var c=function(d){var e=c.cache,f=b?b.apply(this,arguments):d;return n.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},n.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},n.defer=function(a){return n.delay.apply(n,[a,1].concat(g.call(arguments,1)))},n.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:n.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=n.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},n.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=n.now()-g;b>j&&j>0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=n.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},n.wrap=function(a,b){return n.partial(b,a)},n.negate=function(a){return function(){return!a.apply(this,arguments)}},n.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},n.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},n.before=function(a,b){var c;return function(){return--a>0?c=b.apply(this,arguments):b=null,c}},n.once=n.partial(n.before,2),n.keys=function(a){if(!n.isObject(a))return[];if(l)return l(a);var b=[];for(var c in a)n.has(a,c)&&b.push(c);return b},n.values=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},n.pairs=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},n.invert=function(a){for(var b={},c=n.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},n.functions=n.methods=function(a){var b=[];for(var c in a)n.isFunction(a[c])&&b.push(c);return b.sort()},n.extend=function(a){if(!n.isObject(a))return a;for(var b,c,d=1,e=arguments.length;e>d;d++){b=arguments[d];for(c in b)j.call(b,c)&&(a[c]=b[c])}return a},n.pick=function(a,b,c){var d,e={};if(null==a)return e;if(n.isFunction(b)){b=o(b,c);for(d in a){var f=a[d];b(f,d,a)&&(e[d]=f)}}else{var i=h.apply([],g.call(arguments,1));a=new Object(a);for(var j=0,k=i.length;k>j;j++)d=i[j],d in a&&(e[d]=a[d])}return e},n.omit=function(a,b,c){if(n.isFunction(b))b=n.negate(b);else{var d=n.map(h.apply([],g.call(arguments,1)),String);b=function(a,b){return!n.contains(d,b)}}return n.pick(a,b,c)},n.defaults=function(a){if(!n.isObject(a))return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];for(var e in d)void 0===a[e]&&(a[e]=d[e])}return a},n.clone=function(a){return n.isObject(a)?n.isArray(a)?a.slice():n.extend({},a):a},n.tap=function(a,b){return b(a),a};var t=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof n&&(a=a._wrapped),b instanceof n&&(b=b._wrapped);var e=i.call(a);if(e!==i.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]===a)return d[f]===b;var g=a.constructor,h=b.constructor;if(g!==h&&"constructor"in a&&"constructor"in b&&!(n.isFunction(g)&&g instanceof g&&n.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var j,k;if("[object Array]"===e){if(j=a.length,k=j===b.length)for(;j--&&(k=t(a[j],b[j],c,d)););}else{var l,m=n.keys(a);if(j=m.length,k=n.keys(b).length===j)for(;j--&&(l=m[j],k=n.has(b,l)&&t(a[l],b[l],c,d)););}return c.pop(),d.pop(),k};n.isEqual=function(a,b){return t(a,b,[],[])},n.isEmpty=function(a){if(null==a)return!0;if(n.isArray(a)||n.isString(a)||n.isArguments(a))return 0===a.length;for(var b in a)if(n.has(a,b))return!1;return!0},n.isElement=function(a){return!(!a||1!==a.nodeType)},n.isArray=k||function(a){return"[object Array]"===i.call(a)},n.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},n.each(["Arguments","Function","String","Number","Date","RegExp"],function(a){n["is"+a]=function(b){return i.call(b)==="[object "+a+"]"}}),n.isArguments(arguments)||(n.isArguments=function(a){return n.has(a,"callee")}),"function"!=typeof/./&&(n.isFunction=function(a){return"function"==typeof a||!1}),n.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},n.isNaN=function(a){return n.isNumber(a)&&a!==+a},n.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===i.call(a)},n.isNull=function(a){return null===a},n.isUndefined=function(a){return void 0===a
},n.has=function(a,b){return null!=a&&j.call(a,b)},n.noConflict=function(){return a._=b,this},n.identity=function(a){return a},n.constant=function(a){return function(){return a}},n.noop=function(){},n.property=function(a){return function(b){return b[a]}},n.matches=function(a){var b=n.pairs(a),c=b.length;return function(a){if(null==a)return!c;a=new Object(a);for(var d=0;c>d;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}},n.times=function(a,b,c){var d=Array(Math.max(0,a));b=o(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},n.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},n.now=Date.now||function(){return(new Date).getTime()};var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},v=n.invert(u),w=function(a){var b=function(b){return a[b]},c="(?:"+n.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};n.escape=w(u),n.unescape=w(v),n.result=function(a,b){if(null==a)return void 0;var c=a[b];return n.isFunction(c)?a[b]():c};var x=0;n.uniqueId=function(a){var b=++x+"";return a?a+b:b},n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var y=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},A=/\\|'|\r|\n|\u2028|\u2029/g,B=function(a){return"\\"+z[a]};n.template=function(a,b,c){!b&&c&&(b=c),b=n.defaults({},b,n.templateSettings);var d=RegExp([(b.escape||y).source,(b.interpolate||y).source,(b.evaluate||y).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(A,B),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,n)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},n.chain=function(a){var b=n(a);return b._chain=!0,b};var C=function(a){return this._chain?n(a).chain():a};n.mixin=function(a){n.each(n.functions(a),function(b){var c=n[b]=a[b];n.prototype[b]=function(){var a=[this._wrapped];return f.apply(a,arguments),C.call(this,c.apply(n,a))}})},n.mixin(n),n.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=c[a];n.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],C.call(this,c)}}),n.each(["concat","join","slice"],function(a){var b=c[a];n.prototype[a]=function(){return C.call(this,b.apply(this._wrapped,arguments))}}),n.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return n})}.call(this),function(a,b,c){"use strict";function d(){var b=a.angular;return a.angular=dd,b}function e(a){return a&&"number"==typeof a.length?"function"!=typeof a.hasOwnProperty&&"function"!=typeof a.constructor?!0:a instanceof gb||Yc&&a instanceof Yc||"[object Object]"!==cd.call(a)||"function"==typeof a.callee:!1}function f(a,b,c){var d;if(a)if(y(a))for(d in a)"prototype"!=d&&"length"!=d&&"name"!=d&&a.hasOwnProperty(d)&&b.call(c,a[d],d);else if(a.forEach&&a.forEach!==f)a.forEach(b,c);else if(e(a))for(d=0;d<a.length;d++)b.call(c,a[d],d);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d);return a}function g(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){for(var a,b=fd.length;b;){if(b--,a=fd[b].charCodeAt(0),57==a)return fd[b]="A",fd.join("");if(90!=a)return fd[b]=String.fromCharCode(a+1),fd.join("");fd[b]="0"}return fd.unshift("0"),fd.join("")}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){var b=a.$$hashKey;return f(arguments,function(b){b!==a&&f(b,function(b,c){a[c]=b})}),k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(new(l(function(){},{prototype:a})),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!=a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"==cd.apply(a)}function x(a){return"[object Array]"==cd.apply(a)}function y(a){return"function"==typeof a}function z(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"[object File]"===cd.apply(a)}function C(a){return u(a)?a.replace(/^\s*/,"").replace(/\s*$/,""):a}function D(a){return a&&(a.nodeName||a.bind&&a.find)}function E(a,b,c){var d=[];return f(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d}function F(a,b){return-1!=G(a,b)}function G(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1}function H(a,b){var c=G(a,b);return c>=0&&a.splice(c,1),b}function I(a,b){if(z(a)||A(a))throw Error("Can't copy Window or Scope");if(b){if(a===b)throw Error("Can't copy equivalent objects or arrays");if(x(a)){b.length=0;for(var c=0;c<a.length;c++)b.push(I(a[c]))}else{var d=b.$$hashKey;f(b,function(a,c){delete b[c]});for(var e in a)b[e]=I(a[e]);k(b,d)}}else b=a,a&&(x(a)?b=I(a,[]):w(a)?b=new Date(a.getTime()):t(a)&&(b=I(a,{})));return b}function J(a,b){b=b||{};for(var c in a)a.hasOwnProperty(c)&&"$$"!==c.substr(0,2)&&(b[c]=a[c]);return b}function K(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!x(a)){if(w(a))return w(b)&&a.getTime()==b.getTime();if(A(a)||A(b)||z(a)||z(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!y(a[e])){if(!K(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f[e]&&"$"!==e.charAt(0)&&b[e]!==c&&!y(b[e]))return!1;return!0}if((d=a.length)==b.length){for(e=0;d>e;e++)if(!K(a[e],b[e]))return!1;return!0}}return!1}function L(a,b,c){return a.concat(ad.call(b,c))}function M(a,b){return ad.call(a,b||0)}function N(a,b){var c=arguments.length>2?M(arguments,2):[];return!y(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,c.concat(ad.call(arguments,0))):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function O(a,d){var e=d;return/^\$+/.test(a)?e=c:z(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":A(d)&&(e="$SCOPE"),e}function P(a,b){return JSON.stringify(a,O,b?"  ":null)}function Q(a){return u(a)?JSON.parse(a):a}function R(a){if(a&&0!==a.length){var b=Tc(""+a);a=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)}else a=!1;return a}function S(a){a=Xc(a).clone();try{a.html("")}catch(b){}var c=3,d=Xc("<div>").append(a).html();try{return a[0].nodeType===c?Tc(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Tc(b)})}catch(b){return Tc(d)}}function T(a){var b,c,d={};return f((a||"").split("&"),function(a){a&&(b=a.split("="),c=decodeURIComponent(b[0]),d[c]=s(b[1])?decodeURIComponent(b[1]):!0)}),d}function U(a){var b=[];return f(a,function(a,c){b.push(W(c,!0)+(a===!0?"":"="+W(a,!0)))}),b.length?b.join("&"):""}function V(a){return W(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function W(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function X(a,c){function d(a){a&&h.push(a)}var e,g,h=[a],i=["ng:app","ng-app","x-ng-app","data-ng-app"],j=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;f(i,function(c){i[c]=!0,d(b.getElementById(c)),c=c.replace(":","\\:"),a.querySelectorAll&&(f(a.querySelectorAll("."+c),d),f(a.querySelectorAll("."+c+"\\:"),d),f(a.querySelectorAll("["+c+"]"),d))}),f(h,function(a){if(!e){var b=" "+a.className+" ",c=j.exec(b);c?(e=a,g=(c[2]||"").replace(/\s+/g,",")):f(a.attributes,function(b){!e&&i[b.name]&&(e=a,g=b.value)})}}),e&&c(e,g?[g]:[])}function Y(b,c){var d=function(){b=Xc(b),c=c||[],c.unshift(["$provide",function(a){a.value("$rootElement",b)}]),c.unshift("ng");var a=yb(c);return a.invoke(["$rootScope","$rootElement","$compile","$injector","$animator",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d),c(b)(a)}),e.enabled(!0)}]),a},e=/^NG_DEFER_BOOTSTRAP!/;return a&&!e.test(a.name)?d():(a.name=a.name.replace(e,""),void(ed.resumeBootstrap=function(a){f(a,function(a){c.push(a)}),d()}))}function Z(a,b){return b=b||"_",a.replace(gd,function(a,c){return(c?b:"")+a.toLowerCase()})}function $(){Yc=a.jQuery,Yc?(Xc=Yc,l(Yc.fn,{scope:pd.scope,controller:pd.controller,injector:pd.injector,inheritedData:pd.inheritedData}),fb("remove",!0),fb("empty"),fb("html")):Xc=gb,ed.element=Xc}function _(a,b,c){if(!a)throw new Error("Argument '"+(b||"?")+"' is "+(c||"required"));return a}function ab(a,b,c){return c&&x(a)&&(a=a[a.length-1]),_(y(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function bb(a){function b(a,b,c){return a[b]||(a[b]=c())}return b(b(a,"angular",Object),"module",function(){var a={};return function(c,d,e){return d&&a.hasOwnProperty(c)&&(a[c]=null),b(a,c,function(){function a(a,c,d){return function(){return b[d||"push"]([a,c,arguments]),h}}if(!d)throw Error("No module: "+c);var b=[],f=[],g=a("$injector","invoke"),h={_invokeQueue:b,_runBlocks:f,requires:d,name:c,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animationProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:g,run:function(a){return f.push(a),this}};return e&&g(e),h})}})}function cb(b){l(b,{bootstrap:Y,copy:I,extend:l,equals:K,element:Xc,forEach:f,injector:yb,noop:o,bind:N,toJson:P,fromJson:Q,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:y,isObject:t,isNumber:v,isElement:D,isArray:x,version:hd,isDate:w,lowercase:Tc,uppercase:Uc,callbacks:{counter:0},noConflict:d}),Zc=bb(a);try{Zc("ngLocale")}catch(c){Zc("ngLocale",[]).provider("$locale",tc)}Zc("ng",["ngLocale"],["$provide",function(a){a.provider("$compile",Fb).directive({a:Nd,input:Xd,textarea:Xd,form:Rd,script:Ge,select:Ie,style:Ke,option:Je,ngBind:he,ngBindHtmlUnsafe:je,ngBindTemplate:ie,ngClass:ke,ngClassEven:me,ngClassOdd:le,ngCsp:pe,ngCloak:ne,ngController:oe,ngForm:Sd,ngHide:ze,ngIf:se,ngInclude:te,ngInit:ue,ngNonBindable:ve,ngPluralize:we,ngRepeat:xe,ngShow:ye,ngSubmit:re,ngStyle:Ae,ngSwitch:Be,ngSwitchWhen:Ce,ngSwitchDefault:De,ngOptions:He,ngView:Fe,ngTransclude:Ee,ngModel:be,ngList:ee,ngChange:ce,required:de,ngRequired:de,ngValue:ge}).directive(Od).directive(qe),a.provider({$anchorScroll:zb,$animation:Ab,$animator:wd,$browser:Cb,$cacheFactory:Db,$controller:Hb,$document:Ib,$exceptionHandler:Jb,$filter:vc,$interpolate:Kb,$http:qc,$httpBackend:rc,$location:Xb,$log:Yb,$parse:dc,$route:gc,$routeParams:hc,$rootScope:ic,$q:ec,$sniffer:jc,$templateCache:Eb,$timeout:uc,$window:kc})}])}function db(){return++kd}function eb(a){return a.replace(nd,function(a,b,c,d){return d?c.toUpperCase():c}).replace(od,"Moz$1")}function fb(a,b){function c(){for(var a,c,e,f,g,h,i,j=[this],k=b;j.length;)for(a=j.shift(),c=0,e=a.length;e>c;c++)for(f=Xc(a[c]),k?f.triggerHandler("$destroy"):k=!k,g=0,h=(i=f.children()).length;h>g;g++)j.push(Yc(i[g]));return d.apply(this,arguments)}var d=Yc.fn[a];d=d.$original||d,c.$original=d,Yc.fn[a]=c}function gb(a){if(a instanceof gb)return a;if(!(this instanceof gb)){if(u(a)&&"<"!=a.charAt(0))throw Error("selectors not implemented");return new gb(a)}if(u(a)){var c=b.createElement("div");c.innerHTML="<div>&#160;</div>"+a,c.removeChild(c.firstChild),qb(this,c.childNodes),this.remove()}else qb(this,a)}function hb(a){return a.cloneNode(!0)}function ib(a){kb(a);for(var b=0,c=a.childNodes||[];b<c.length;b++)ib(c[b])}function jb(a,b,c){var d=lb(a,"events"),e=lb(a,"handle");e&&(r(b)?f(d,function(b,c){md(a,c,b),delete d[c]}):r(c)?(md(a,b,d[b]),delete d[b]):H(d[b],c))}function kb(a){var b=a[jd],d=id[b];d&&(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),jb(a)),delete id[b],a[jd]=c)}function lb(a,b,c){var d=a[jd],e=id[d||-1];return s(c)?(e||(a[jd]=d=db(),e=id[d]={}),void(e[b]=c)):e&&e[b]}function mb(a,b,c){var d=lb(a,"data"),e=s(c),f=!e&&s(b),g=f&&!t(b);if(d||g||lb(a,"data",d={}),e)d[b]=c;else{if(!f)return d;if(g)return d&&d[b];l(d,b)}}function nb(a,b){return(" "+a.className+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1}function ob(a,b){b&&f(b.split(" "),function(b){a.className=C((" "+a.className+" ").replace(/[\n\t]/g," ").replace(" "+C(b)+" "," "))})}function pb(a,b){b&&f(b.split(" "),function(b){nb(a,b)||(a.className=C(a.className+" "+C(b)))})}function qb(a,b){if(b){b=b.nodeName||!s(b.length)||z(b)?[b]:b;for(var c=0;c<b.length;c++)a.push(b[c])}}function rb(a,b){return sb(a,"$"+(b||"ngController")+"Controller")}function sb(a,b,c){for(a=Xc(a),9==a[0].nodeType&&(a=a.find("html"));a.length;){if(c=a.data(b))return c;a=a.parent()}}function tb(a,b){var c=qd[b.toLowerCase()];return c&&rd[a.nodeName]&&c}function ub(a,c){var d=function(d,e){if(d.preventDefault||(d.preventDefault=function(){d.returnValue=!1}),d.stopPropagation||(d.stopPropagation=function(){d.cancelBubble=!0}),d.target||(d.target=d.srcElement||b),r(d.defaultPrevented)){var g=d.preventDefault;d.preventDefault=function(){d.defaultPrevented=!0,g.call(d)},d.defaultPrevented=!1}d.isDefaultPrevented=function(){return d.defaultPrevented||0==d.returnValue},f(c[e||d.type],function(b){b.call(a,d)}),8>=_c?(d.preventDefault=null,d.stopPropagation=null,d.isDefaultPrevented=null):(delete d.preventDefault,delete d.stopPropagation,delete d.isDefaultPrevented)};return d.elem=a,d}function vb(a){var b,d=typeof a;return"object"==d&&null!==a?"function"==typeof(b=a.$$hashKey)?b=a.$$hashKey():b===c&&(b=a.$$hashKey=j()):b=a,d+":"+b}function wb(a){f(a,this.put,this)}function xb(a){var b,c,d,e;return"function"==typeof a?(b=a.$inject)||(b=[],c=a.toString().replace(vd,""),d=c.match(sd),f(d[1].split(td),function(a){a.replace(ud,function(a,c,d){b.push(d)})}),a.$inject=b):x(a)?(e=a.length-1,ab(a[e],"fn"),b=a.slice(0,e)):ab(a,"fn",!0),b}function yb(a){function b(a){return function(b,c){return t(b)?void f(b,i(a)):a(b,c)}}function c(a,b){if((y(b)||x(b))&&(b=v.instantiate(b)),!b.$get)throw Error("Provider "+a+" must define $get factory method.");return s[a+n]=b}function d(a,b){return c(a,{$get:b})}function e(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}function g(a,b){return d(a,q(b))}function h(a,b){s[a]=b,w[a]=b}function j(a,b){var c=v.get(a+n),d=c.$get;c.$get=function(){var a=z.invoke(d,c);return z.invoke(b,null,{$delegate:a})}}function k(a){var b=[];return f(a,function(a){if(!r.get(a))if(r.put(a,!0),u(a)){var c=Zc(a);b=b.concat(k(c.requires)).concat(c._runBlocks);try{for(var d=c._invokeQueue,e=0,f=d.length;f>e;e++){var g=d[e],h=v.get(g[0]);h[g[1]].apply(h,g[2])}}catch(i){throw i.message&&(i.message+=" from "+a),i}}else if(y(a))try{b.push(v.invoke(a))}catch(i){throw i.message&&(i.message+=" from "+a),i}else if(x(a))try{b.push(v.invoke(a))}catch(i){throw i.message&&(i.message+=" from "+String(a[a.length-1])),i}else ab(a,"module")}),b}function l(a,b){function c(c){if("string"!=typeof c)throw Error("Service name expected");if(a.hasOwnProperty(c)){if(a[c]===m)throw Error("Circular dependency: "+p.join(" <- "));return a[c]}try{return p.unshift(c),a[c]=m,a[c]=b(c)}finally{p.shift()}}function d(a,b,d){var e,f,g,h=[],i=xb(a);for(f=0,e=i.length;e>f;f++)g=i[f],h.push(d&&d.hasOwnProperty(g)?d[g]:c(g));switch(a.$inject||(a=a[e]),b?-1:h.length){case 0:return a();case 1:return a(h[0]);case 2:return a(h[0],h[1]);case 3:return a(h[0],h[1],h[2]);case 4:return a(h[0],h[1],h[2],h[3]);case 5:return a(h[0],h[1],h[2],h[3],h[4]);case 6:return a(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);case 8:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7]);case 9:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8]);case 10:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9]);default:return a.apply(b,h)}}function e(a,b){var c,e,f=function(){};return f.prototype=(x(a)?a[a.length-1]:a).prototype,c=new f,e=d(a,c,b),t(e)?e:c}return{invoke:d,instantiate:e,get:c,annotate:xb,has:function(b){return s.hasOwnProperty(b+n)||a.hasOwnProperty(b)}}}var m={},n="Provider",p=[],r=new wb,s={$provide:{provider:b(c),factory:b(d),service:b(e),value:b(g),constant:b(h),decorator:j}},v=s.$injector=l(s,function(){throw Error("Unknown provider: "+p.join(" <- "))}),w={},z=w.$injector=l(w,function(a){var b=v.get(a+n);return z.invoke(b.$get,b)});return f(k(a),function(a){z.invoke(a||o)}),z}function zb(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return f(a,function(a){b||"a"!==Tc(a.nodeName)||(b=a)}),b}function g(){var a,d=c.hash();d?(a=h.getElementById(d))?a.scrollIntoView():(a=e(h.getElementsByName(d)))?a.scrollIntoView():"top"===d&&b.scrollTo(0,0):b.scrollTo(0,0)}var h=b.document;return a&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(g)}),g}]}function Ab(a){var b="Animation";this.register=function(c,d){a.factory(eb(c)+b,d)},this.$get=["$injector",function(a){return function(c){if(c){var d=eb(c)+b;if(a.has(d))return a.get(d)}}}]}function Bb(a,b,d,e){function g(a){try{a.apply(null,M(arguments,1))}finally{if(s--,0===s)for(;t.length;)try{t.pop()()}catch(b){d.error(b)}}}function h(a,b){!function c(){f(w,function(a){a()}),v=b(c,a)}()}function i(){x!=j.url()&&(x=j.url(),f(z,function(a){a(j.url())}))}var j=this,k=b[0],l=a.location,m=a.history,n=a.setTimeout,p=a.clearTimeout,q={};j.isMock=!1;var s=0,t=[];j.$$completeOutstandingRequest=g,j.$$incOutstandingRequestCount=function(){s++},j.notifyWhenNoOutstandingRequests=function(a){f(w,function(a){a()}),0===s?a():t.push(a)};var v,w=[];j.addPollFn=function(a){return r(v)&&h(100,n),w.push(a),a};var x=l.href,y=b.find("base");j.url=function(a,b){if(a){if(x==a)return;return x=a,e.history?b?m.replaceState(null,"",a):(m.pushState(null,"",a),y.attr("href",y.attr("href"))):b?l.replace(a):l.href=a,j}return l.href.replace(/%27/g,"'")};var z=[],A=!1;j.onUrlChange=function(b){return A||(e.history&&Xc(a).bind("popstate",i),e.hashchange?Xc(a).bind("hashchange",i):j.addPollFn(i),A=!0),z.push(b),b},j.baseHref=function(){var a=y.attr("href");return a?a.replace(/^https?\:\/\/[^\/]*/,""):""};var B={},C="",D=j.baseHref();j.cookies=function(a,b){var e,f,g,h,i;if(!a){if(k.cookie!==C)for(C=k.cookie,f=C.split("; "),B={},h=0;h<f.length;h++)if(g=f[h],i=g.indexOf("="),i>0){var a=unescape(g.substring(0,i));B[a]===c&&(B[a]=unescape(g.substring(i+1)))}return B}b===c?k.cookie=escape(a)+"=;path="+D+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(k.cookie=escape(a)+"="+escape(b)+";path="+D).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},j.defer=function(a,b){var c;return s++,c=n(function(){delete q[c],g(a)},b||0),q[c]=!0,c},j.defer.cancel=function(a){return q[a]?(delete q[a],p(a),g(o),!0):!1}}function Cb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Bb(a,d,b,c)}]}function Db(){this.$get=function(){function a(a,c){function d(a){a!=k&&(m?m==a&&(m=a.n):m=a,e(a.n,a.p),e(a,k),k=a,k.n=null)}function e(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw Error("cacheId "+a+" taken");var f=0,g=l({},c,{id:a}),h={},i=c&&c.capacity||Number.MAX_VALUE,j={},k=null,m=null;return b[a]={put:function(a,b){var c=j[a]||(j[a]={key:a});return d(c),r(b)?void 0:(a in h||f++,h[a]=b,f>i&&this.remove(m.key),b)},get:function(a){var b=j[a];if(b)return d(b),h[a]},remove:function(a){var b=j[a];b&&(b==k&&(k=b.p),b==m&&(m=b.n),e(b.n,b.p),delete j[a],delete h[a],f--)},removeAll:function(){h={},f=0,j={},k=m=null},destroy:function(){h=null,g=null,j=null,delete b[a]},info:function(){return l({},g,{size:f})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Eb(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Fb(a){var d={},e="Directive",g=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,h=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,j="Template must have exactly one root element. was: ",k=/^\s*(https?|ftp|mailto|file):/;this.directive=function m(b,c){return u(b)?(_(c,"directive"),d.hasOwnProperty(b)||(d[b]=[],a.factory(b+e,["$injector","$exceptionHandler",function(a,c){var e=[];return f(d[b],function(d){try{var f=a.invoke(d);y(f)?f={compile:q(f)}:!f.compile&&f.link&&(f.compile=q(f.link)),f.priority=f.priority||0,f.name=f.name||b,f.require=f.require||f.controller&&f.name,f.restrict=f.restrict||"A",e.push(f)}catch(g){c(g)}}),e}])),d[b].push(c)):f(b,i(m)),this},this.urlSanitizationWhitelist=function(a){return s(a)?(k=a,this):k},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document",function(a,i,m,n,o,r,s,v,w){function z(a,b,c){a instanceof Xc||(a=Xc(a)),f(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=Xc(b).wrap("<span></span>").parent()[0])});var d=B(a,b,a,c);return function(b,c){_(b,"scope");for(var e=c?pd.clone.call(a):a,f=0,g=e.length;g>f;f++){var h=e[f];(1==h.nodeType||9==h.nodeType)&&e.eq(f).data("$scope",b)}return A(e,"ng-scope"),c&&c(e,b),d&&d(b,e,e),e}}function A(a,b){try{a.addClass(b)}catch(c){}}function B(a,b,d,e){function f(a,d,e,f){var g,h,i,j,k,m,n,o,p=[];for(m=0,n=d.length;n>m;m++)p.push(d[m]);for(m=0,o=0,n=l.length;n>m;o++)i=p[o],g=l[m++],h=l[m++],g?(g.scope?(j=a.$new(t(g.scope)),Xc(i).data("$scope",j)):j=a,k=g.transclude,k||!f&&b?g(h,j,i,e,function(b){return function(c){var d=a.$new();return d.$$transcluded=!0,b(d,c).bind("$destroy",N(d,d.$destroy))}}(k||b)):g(h,j,i,c,f)):h&&h(a,i.childNodes,c,f)}for(var g,h,i,j,k,l=[],m=0;m<a.length;m++)j=new P,i=D(a[m],[],j,e),g=i.length?E(i,a[m],j,b,d):null,h=g&&g.terminal||!a[m].childNodes||!a[m].childNodes.length?null:B(a[m].childNodes,g?g.transclude:b),l.push(g),l.push(h),k=k||g||h;return k?f:null}function D(a,b,c,d){var e,f,i=a.nodeType,j=c.$attr;switch(i){case 1:F(b,Gb($c(a).toLowerCase()),"E",d);for(var k,l,m,n,o,p=a.attributes,q=0,r=p&&p.length;r>q;q++)k=p[q],k.specified&&(l=k.name,n=Gb(l),V.test(n)&&(l=n.substr(6).toLowerCase()),m=Gb(l.toLowerCase()),j[m]=l,c[m]=o=C(_c&&"href"==l?decodeURIComponent(a.getAttribute(l,2)):k.value),tb(a,m)&&(c[m]=!0),M(a,b,o,m),F(b,m,"A",d));if(f=a.className,u(f)&&""!==f)for(;e=h.exec(f);)m=Gb(e[2]),F(b,m,"C",d)&&(c[m]=C(e[3])),f=f.substr(e.index+e[0].length);break;case 3:L(b,a.nodeValue);break;case 8:try{e=g.exec(a.nodeValue),e&&(m=Gb(e[1]),F(b,m,"M",d)&&(c[m]=C(e[2])))}catch(s){}}return b.sort(I),b}function E(a,d,e,g,h){function k(a,b){a&&(a.require=o.require,I.push(a)),b&&(b.require=o.require,L.push(b))}function l(a,b){var c,d="data",e=!1;if(u(a)){for(;"^"==(c=a.charAt(0))||"?"==c;)a=a.substr(1),"^"==c&&(d="inheritedData"),e=e||"?"==c;if(c=b[d]("$"+a+"Controller"),!c&&!e)throw Error("No controller: "+a);return c}return x(a)&&(c=[],f(a,function(a){c.push(l(a,b))})),c}function n(a,b,g,h,j){var k,n,o,p,q,t;if(k=d===g?e:J(e,new P(Xc(g),e.$attr)),n=k.$$element,N){var u=/^\s*([@=&])(\??)\s*(\w*)\s*$/,v=b.$parent||b;f(N.scope,function(a,c){var d,e,f,g=a.match(u)||[],h=g[3]||c,j="?"==g[2],l=g[1];switch(b.$$isolateBindings[c]=l+h,l){case"@":k.$observe(h,function(a){b[c]=a}),k.$$observers[h].$$scope=v,k[h]&&(b[c]=i(k[h])(v));break;case"=":if(j&&!k[h])return;e=r(k[h]),f=e.assign||function(){throw d=b[c]=e(v),Error(xd+k[h]+" (directive: "+N.name+")")},d=b[c]=e(v),b.$watch(function(){var a=e(v);return a!==b[c]&&(a!==d?d=b[c]=a:f(v,a=d=b[c])),a});break;case"&":e=r(k[h]),b[c]=function(a){return e(v,a)};break;default:throw Error("Invalid isolate scope definition for directive "+N.name+": "+a)}})}for(w&&f(w,function(a){var c={$scope:b,$element:n,$attrs:k,$transclude:j};b&&b.$$scopeInjections&&f(b.$$scopeInjections,function(a,b){c.hasOwnProperty(b)||(c[b]=a)}),t=a.controller,"@"==t&&(t=k[a.name]),n.data("$"+a.name+"Controller",s(t,c))}),o=0,p=I.length;p>o;o++)try{q=I[o],q(b,n,k,q.require&&l(q.require,n))}catch(x){m(x,S(n))}for(a&&a(b,g.childNodes,c,j),o=0,p=L.length;p>o;o++)try{q=L[o],q(b,n,k,q.require&&l(q.require,n))}catch(x){m(x,S(n))}}for(var o,p,q,v,w,B,E,F=-Number.MAX_VALUE,I=[],L=[],M=null,N=null,Q=null,R=e.$$element=Xc(d),T=g,V=0,W=a.length;W>V&&(o=a[V],q=c,!(F>o.priority));V++){if((E=o.scope)&&(K("isolated scope",N,o,R),t(E)&&(A(R,"ng-isolate-scope"),N=o),A(R,"ng-scope"),M=M||o),p=o.name,(E=o.controller)&&(w=w||{},K("'"+p+"' controller",w[p],o,R),w[p]=o),(E=o.transclude)&&(K("transclusion",v,o,R),v=o,F=o.priority,"element"==E?(q=Xc(d),R=e.$$element=Xc(b.createComment(" "+p+": "+e[p]+" ")),d=R[0],O(h,Xc(q[0]),d),T=z(q,g,F)):(q=Xc(hb(d)).contents(),R.html(""),T=z(q,g))),o.template)if(K("template",Q,o,R),Q=o,E=y(o.template)?o.template(R,e):o.template,E=U(E),o.replace){if(q=Xc("<div>"+C(E)+"</div>").contents(),d=q[0],1!=q.length||1!==d.nodeType)throw new Error(j+E);O(h,R,d);var X={$attr:{}};a=a.concat(D(d,a.splice(V+1,a.length-(V+1)),X)),G(e,X),W=a.length}else R.html(E);if(o.templateUrl)K("template",Q,o,R),Q=o,n=H(a.splice(V,a.length-V),n,R,e,h,o.replace,T),W=a.length;else if(o.compile)try{B=o.compile(R,e,T),y(B)?k(null,B):B&&k(B.pre,B.post)}catch(Y){m(Y,S(R))}o.terminal&&(n.terminal=!0,F=Math.max(F,o.priority))}return n.scope=M&&M.scope,n.transclude=v&&T,n}function F(b,f,g,h){var i=!1;if(d.hasOwnProperty(f))for(var j,k=a.get(f+e),l=0,n=k.length;n>l;l++)try{j=k[l],(h===c||h>j.priority)&&-1!=j.restrict.indexOf(g)&&(b.push(j),i=!0)}catch(o){m(o)}return i}function G(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(A(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?e.attr("style",e.attr("style")+";"+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function H(a,b,c,d,e,f,g){var h,i,k=[],m=c[0],p=a.shift(),q=l({},p,{controller:null,templateUrl:null,transclude:null,scope:null}),r=y(p.templateUrl)?p.templateUrl(c,d):p.templateUrl;return c.html(""),n.get(r,{cache:o}).success(function(l){var n,o,p;if(l=U(l),f){if(p=Xc("<div>"+C(l)+"</div>").contents(),n=p[0],1!=p.length||1!==n.nodeType)throw new Error(j+l);o={$attr:{}},O(e,c,n),D(n,a,o),G(d,o)}else n=m,c.html(l);for(a.unshift(q),h=E(a,n,d,g),i=B(c[0].childNodes,g);k.length;){var r=k.shift(),s=k.shift(),t=k.shift(),u=k.shift(),v=n;s!==m&&(v=hb(n),O(t,Xc(s),v)),h(function(){b(i,r,v,e,u)},r,v,e,u)}k=null}).error(function(a,b,c,d){throw Error("Failed to load template: "+d.url)}),function(a,c,d,e,f){k?(k.push(c),k.push(d),k.push(e),k.push(f)):h(function(){b(i,c,d,e,f)},c,d,e,f)}}function I(a,b){return b.priority-a.priority}function K(a,b,c,d){if(b)throw Error("Multiple directives ["+b.name+", "+c.name+"] asking for "+a+" on: "+S(d))}function L(a,b){var c=i(b,!0);c&&a.push({priority:0,compile:q(function(a,b){var d=b.parent(),e=d.data("$binding")||[];e.push(c),A(d.data("$binding",e),"ng-binding"),a.$watch(c,function(a){b[0].nodeValue=a})})})}function M(a,b,c,d){var e=i(c,!0);e&&b.push({priority:100,compile:q(function(a,b,c){var f=c.$$observers||(c.$$observers={});e=i(c[d],!0),e&&(c[d]=e(a),(f[d]||(f[d]=[])).$$inter=!0,(c.$$observers&&c.$$observers[d].$$scope||a).$watch(e,function(a){c.$set(d,a)}))})})}function O(a,b,c){var d,e,f=b[0],g=f.parentNode;if(a)for(d=0,e=a.length;e>d;d++)if(a[d]==f){a[d]=c;break}g&&g.replaceChild(c,f),c[Xc.expando]=f[Xc.expando],b[0]=c}var P=function(a,b){this.$$element=a,this.$attr=b||{}};P.prototype={$normalize:Gb,$set:function(a,b,d,e){var g,h=tb(this.$$element[0],a),i=this.$$observers;h&&(this.$$element.prop(a,b),e=h),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a],e||(this.$attr[a]=e=Z(a,"-"))),"A"===$c(this.$$element[0])&&"href"===a&&(Q.setAttribute("href",b),g=Q.href,g.match(k)||(this[a]=b="unsafe:"+g)),d!==!1&&(null===b||b===c?this.$$element.removeAttr(e):this.$$element.attr(e,b)),i&&f(i[a],function(a){try{a(b)}catch(c){m(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);return e.push(b),v.$evalAsync(function(){e.$$inter||b(c[a])}),b}};var Q=w[0].createElement("a"),R=i.startSymbol(),T=i.endSymbol(),U="{{"==R||"}}"==T?p:function(a){return a.replace(/\{\{/g,R).replace(/}}/g,T)},V=/^ngAttr[A-Z]/;return z}]}function Gb(a){return eb(a.replace(yd,""))}function Hb(){var a={},b=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){t(b)?l(a,b):a[b]=c},this.$get=["$injector","$window",function(c,d){return function(e,f){var g,h,i,j;if(u(e)&&(h=e.match(b),i=h[1],j=h[3],e=a.hasOwnProperty(i)?a[i]:ac(f.$scope,i,!0)||ac(d,i,!0),ab(e,i,!0)),g=c.instantiate(e,f),j){if("object"!=typeof f.$scope)throw new Error('Can not export controller as "'+j+'". No scope object provided!');f.$scope[j]=g}return g}}]}function Ib(){this.$get=["$window",function(a){return Xc(a.document)}]}function Jb(){this.$get=["$log",function(a){return function(){a.error.apply(a,arguments)}}]}function Kb(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler",function(d,e){function f(f,i){for(var j,k,l,m,n=0,o=[],p=f.length,q=!1,r=[];p>n;)-1!=(j=f.indexOf(a,n))&&-1!=(k=f.indexOf(b,j+g))?(n!=j&&o.push(f.substring(n,j)),o.push(l=d(m=f.substring(j+g,k))),l.exp=m,n=k+h,q=!0):(n!=p&&o.push(f.substring(n)),n=p);return(p=o.length)||(o.push(""),p=1),!i||q?(r.length=p,l=function(a){try{for(var b,d=0,g=p;g>d;d++)"function"==typeof(b=o[d])&&(b=b(a),null==b||b==c?b="":"string"!=typeof b&&(b=P(b))),r[d]=b;return r.join("")}catch(h){var i=new Error("Error while interpolating: "+f+"\n"+h.toString());e(i)}},l.exp=f,l.parts=o,l):void 0}var g=a.length,h=b.length;return f.startSymbol=function(){return a},f.endSymbol=function(){return b},f}]}function Lb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=V(b[c]);return b.join("/")}function Mb(a,b){var c=zd.exec(a);b.$$protocol=c[1],b.$$host=c[3],b.$$port=m(c[5])||Bd[c[1]]||null}function Nb(a,b){var c=Ad.exec(a);b.$$path=decodeURIComponent(c[1]),b.$$search=T(c[3]),b.$$hash=decodeURIComponent(c[5]||""),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Ob(a,b,c){return 0==b.indexOf(a)?b.substr(a.length):c}function Pb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function Qb(a){return a.substr(0,Pb(a).lastIndexOf("/")+1)}function Rb(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function Sb(a,b){b=b||"";var d=Qb(a);this.$$parse=function(a){var b={};Mb(a,b);var c=Ob(d,a);if(!u(c))throw Error('Invalid url "'+a+'", missing path prefix "'+d+'".');Nb(c,b),l(this,b),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=U(this.$$search),b=this.$$hash?"#"+V(this.$$hash):"";this.$$url=Lb(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$rewrite=function(e){var f,g;return(f=Ob(a,e))!==c?(g=f,(f=Ob(b,f))!==c?d+(Ob("/",f)||f):a+g):(f=Ob(d,e))!==c?d+f:d==e+"/"?d:void 0}}function Tb(a,b){var c=Qb(a);this.$$parse=function(d){Mb(d,this);var e=Ob(a,d)||Ob(c,d);if(!u(e))throw new Error('Invalid url "'+d+'", does not start with "'+a+'".');var f="#"==e.charAt(0)?Ob(b,e):e;if(!u(f))throw new Error('Invalid url "'+d+'", missing hash prefix "'+b+'".');Nb(f,this),this.$$compose()},this.$$compose=function(){var c=U(this.$$search),d=this.$$hash?"#"+V(this.$$hash):"";this.$$url=Lb(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$rewrite=function(b){return Pb(a)==Pb(b)?b:void 0}}function Ub(a,b){Tb.apply(this,arguments);var c=Qb(a);this.$$rewrite=function(d){var e;return a==Pb(d)?d:(e=Ob(c,d))?a+b+e:c===d+"/"?c:void 0
}}function Vb(a){return function(){return this[a]}}function Wb(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Xb(){var b="",c=!1;this.hashPrefix=function(a){return s(a)?(b=a,this):b},this.html5Mode=function(a){return s(a)?(c=a,this):c},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(d,e,f,g){function h(a){d.$broadcast("$locationChangeSuccess",i.absUrl(),a)}var i,j,k,l=e.baseHref(),m=e.url();c?(k=l?Rb(m)+l:m,j=f.history?Sb:Ub):(k=Pb(m),j=Tb),i=new j(k,"#"+b),i.$$parse(i.$$rewrite(m)),g.bind("click",function(b){if(!b.ctrlKey&&!b.metaKey&&2!=b.which){for(var c=Xc(b.target);"a"!==Tc(c[0].nodeName);)if(c[0]===g[0]||!(c=c.parent())[0])return;var f=c.prop("href");if(f&&ed.isString(f)){var h=i.$$rewrite(f);c.attr("target")||!h||b.isDefaultPrevented()||(b.preventDefault(),h!=e.url()&&(i.$$parse(h),d.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),i.absUrl()!=m&&e.url(i.absUrl(),!0),e.onUrlChange(function(a){if(i.absUrl()!=a){if(d.$broadcast("$locationChangeStart",a,i.absUrl()).defaultPrevented)return void e.url(i.absUrl());d.$evalAsync(function(){var b=i.absUrl();i.$$parse(a),h(b)}),d.$$phase||d.$digest()}});var n=0;return d.$watch(function(){var a=e.url(),b=i.$$replace;return n&&a==i.absUrl()||(n++,d.$evalAsync(function(){d.$broadcast("$locationChangeStart",i.absUrl(),a).defaultPrevented?i.$$parse(a):(e.url(i.absUrl(),b),h(a))})),i.$$replace=!1,n}),i}]}function Yb(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o;return e.apply?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,b)}}return{log:e("log"),warn:e("warn"),info:e("info"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Zb(a,b){function c(a){return-1!=a.indexOf(p)}function d(a){return-1!=a.indexOf(u)}function e(b){var c=b||1;return r+c<a.length?a.charAt(r+c):!1}function f(a){return a>="0"&&"9">=a}function g(a){return" "==a||"\r"==a||"	"==a||"\n"==a||""==a||" "==a}function h(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"==a||"$"==a}function i(a){return"-"==a||"+"==a||f(a)}function j(b,c,d){throw d=d||r,Error("Lexer Error: "+b+" at column"+(s(c)?"s "+c+"-"+r+" ["+a.substring(c,d)+"]":" "+d)+" in expression ["+a+"].")}function k(){for(var b="",c=r;r<a.length;){var d=Tc(a.charAt(r));if("."==d||f(d))b+=d;else{var g=e();if("e"==d&&i(g))b+=d;else if(i(d)&&g&&f(g)&&"e"==b.charAt(b.length-1))b+=d;else{if(!i(d)||g&&f(g)||"e"!=b.charAt(b.length-1))break;j("Invalid exponent")}}r++}b=1*b,q.push({index:c,text:b,json:!0,fn:function(){return b}})}function m(){for(var c,d,e,i,j="",k=r;r<a.length&&(i=a.charAt(r),"."==i||h(i)||f(i));)"."==i&&(c=r),j+=i,r++;if(c)for(d=r;d<a.length;){if(i=a.charAt(d),"("==i){e=j.substr(c-k+1),j=j.substr(0,c-k),r=d;break}if(!g(i))break;d++}var m={index:k,text:j};if(Cd.hasOwnProperty(j))m.fn=m.json=Cd[j];else{var n=cc(j,b);m.fn=l(function(a,b){return n(a,b)},{assign:function(a,b){return _b(a,j,b)}})}q.push(m),e&&(q.push({index:c,text:".",json:!1}),q.push({index:c+1,text:e,json:!1}))}function n(b){var c=r;r++;for(var d="",e=b,f=!1;r<a.length;){var g=a.charAt(r);if(e+=g,f){if("u"==g){var h=a.substring(r+1,r+5);h.match(/[\da-f]{4}/i)||j("Invalid unicode escape [\\u"+h+"]"),r+=4,d+=String.fromCharCode(parseInt(h,16))}else{var i=Dd[g];d+=i?i:g}f=!1}else if("\\"==g)f=!0;else{if(g==b)return r++,void q.push({index:c,text:e,string:d,json:!0,fn:function(){return d}});d+=g}r++}j("Unterminated quote",c)}for(var o,p,q=[],r=0,t=[],u=":";r<a.length;){if(p=a.charAt(r),c("\"'"))n(p);else if(f(p)||c(".")&&f(e()))k();else if(h(p))m(),d("{,")&&"{"==t[0]&&(o=q[q.length-1])&&(o.json=-1==o.text.indexOf("."));else if(c("(){}[].,;:?"))q.push({index:r,text:p,json:d(":[,")&&c("{[")||c("}]:,")}),c("{[")&&t.unshift(p),c("}]")&&t.shift(),r++;else{if(g(p)){r++;continue}var v=p+e(),w=v+e(2),x=Cd[p],y=Cd[v],z=Cd[w];z?(q.push({index:r,text:w,fn:z}),r+=3):y?(q.push({index:r,text:v,fn:y}),r+=2):x?(q.push({index:r,text:p,fn:x,json:d("[,:")&&c("+-")}),r+=1):j("Unexpected next character ",r,r+1)}u=p}return q}function $b(a,b,d,e){function f(b,c){throw Error("Syntax Error: Token '"+c.text+"' "+b+" at column "+(c.index+1)+" of the expression ["+a+"] starting at ["+a.substring(c.index)+"].")}function g(){if(0===L.length)throw Error("Unexpected end of expression: "+a);return L[0]}function h(a,b,c,d){if(L.length>0){var e=L[0],f=e.text;if(f==a||f==b||f==c||f==d||!a&&!b&&!c&&!d)return e}return!1}function i(a,c,d,e){var g=h(a,c,d,e);return g?(b&&!g.json&&f("is not valid json",g),L.shift(),g):!1}function j(a){i(a)||f("is unexpected, expecting ["+a+"]",h())}function k(a,b){return l(function(c,d){return a(c,d,b)},{constant:b.constant})}function m(a,b,c){return l(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})}function n(a,b,c){return l(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})}function p(){for(var a=[];;)if(L.length>0&&!h("}",")",";","]")&&a.push(Q()),!i(";"))return 1==a.length?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}}function r(){for(var a,b=t();;){if(!(a=i("|")))return b;b=n(b,a.fn,s())}}function s(){for(var a=i(),b=d(a.text),c=[];;){if(!(a=i(":"))){var e=function(a,d,e){for(var f=[e],g=0;g<c.length;g++)f.push(c[g](a,d));return b.apply(a,f)};return function(){return e}}c.push(t())}}function t(){return M()}function u(){var b,c,d=v();return(c=i("="))?(d.assign||f("implies assignment but ["+a.substring(0,c.index)+"] can not be assigned to",c),b=v(),function(a,c){return d.assign(a,b(a,c),c)}):d}function v(){var a,b,c=w();return(b=i("?"))?(a=v(),(b=i(":"))?m(c,a,v()):void f("expected :",b)):c}function w(){for(var a,b=x();;){if(!(a=i("||")))return b;b=n(b,a.fn,x())}}function x(){var a,b=y();return(a=i("&&"))&&(b=n(b,a.fn,x())),b}function y(){var a,b=z();return(a=i("==","!=","===","!=="))&&(b=n(b,a.fn,y())),b}function z(){var a,b=A();return(a=i("<",">","<=",">="))&&(b=n(b,a.fn,z())),b}function A(){for(var a,b=B();a=i("+","-");)b=n(b,a.fn,B());return b}function B(){for(var a,b=C();a=i("*","/","%");)b=n(b,a.fn,C());return b}function C(){var a;return i("+")?D():(a=i("-"))?n(K,a.fn,C()):(a=i("!"))?k(a.fn,C()):D()}function D(){var a;if(i("("))a=Q(),j(")");else if(i("["))a=H();else if(i("{"))a=I();else{var b=i();a=b.fn,a||f("not a primary expression",b),b.json&&(a.constant=a.literal=!0)}for(var c,d;c=i("(","[",".");)"("===c.text?(a=N(a,d),d=null):"["===c.text?(d=a,a=P(a)):"."===c.text?(d=a,a=O(a)):f("IMPOSSIBLE");return a}function E(a){var b=i().text,c=cc(b,e);return l(function(b,d,e){return c(e||a(b,d),d)},{assign:function(c,d,e){return _b(a(c,e),b,d)}})}function F(a){var b=t();return j("]"),l(function(d,e){var f,g,h=a(d,e),i=b(d,e);return h?(f=h[i],f&&f.then&&(g=f,"$$v"in f||(g.$$v=c,g.then(function(a){g.$$v=a})),f=f.$$v),f):c},{assign:function(c,d,e){return a(c,e)[b(c,e)]=d}})}function G(a,b){var c=[];if(")"!=g().text)do c.push(t());while(i(","));return j(")"),function(d,e){for(var f=[],g=b?b(d,e):d,h=0;h<c.length;h++)f.push(c[h](d,e));var i=a(d,e,g)||o;return i.apply?i.apply(g,f):i(f[0],f[1],f[2],f[3],f[4])}}function H(){var a=[],b=!0;if("]"!=g().text)do{var c=t();a.push(c),c.constant||(b=!1)}while(i(","));return j("]"),l(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})}function I(){var a=[],b=!0;if("}"!=g().text)do{var c=i(),d=c.string||c.text;j(":");var e=t();a.push({key:d,value:e}),e.constant||(b=!1)}while(i(","));return j("}"),l(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})}var J,K=q(0),L=Zb(a,e),M=u,N=G,O=E,P=F,Q=r;return b?(M=w,N=O=P=Q=function(){f("is not valid json",{text:a,index:0})},J=D()):J=p(),0!==L.length&&f("is an unexpected token",L[0]),J.literal=!!J.literal,J.constant=!!J.constant,J}function _b(a,b,c){for(var d=b.split("."),e=0;d.length>1;e++){var f=d.shift(),g=a[f];g||(g={},a[f]=g),a=g}return a[d.shift()]=c,c}function ac(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&y(a)?N(f,a):a}function bc(a,b,d,e,f){return function(g,h){var i,j=h&&h.hasOwnProperty(a)?h:g;return null===j||j===c?j:(j=j[a],j&&j.then&&("$$v"in j||(i=j,i.$$v=c,i.then(function(a){i.$$v=a})),j=j.$$v),b&&null!==j&&j!==c?(j=j[b],j&&j.then&&("$$v"in j||(i=j,i.$$v=c,i.then(function(a){i.$$v=a})),j=j.$$v),d&&null!==j&&j!==c?(j=j[d],j&&j.then&&("$$v"in j||(i=j,i.$$v=c,i.then(function(a){i.$$v=a})),j=j.$$v),e&&null!==j&&j!==c?(j=j[e],j&&j.then&&("$$v"in j||(i=j,i.$$v=c,i.then(function(a){i.$$v=a})),j=j.$$v),f&&null!==j&&j!==c?(j=j[f],j&&j.then&&("$$v"in j||(i=j,i.$$v=c,i.then(function(a){i.$$v=a})),j=j.$$v),j):j):j):j):j)}}function cc(a,b){if(Ed.hasOwnProperty(a))return Ed[a];var d,e=a.split("."),g=e.length;if(b)d=6>g?bc(e[0],e[1],e[2],e[3],e[4]):function(a,b){var d,f=0;do d=bc(e[f++],e[f++],e[f++],e[f++],e[f++])(a,b),b=c,a=d;while(g>f);return d};else{var h="var l, fn, p;\n";f(e,function(a,b){h+="if(s === null || s === undefined) return s;\nl=s;\ns="+(b?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"];\nif (s && s.then) {\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n'}),h+="return s;",d=Function("s","k",h),d.toString=function(){return h}}return Ed[a]=d}function dc(){var a={};this.$get=["$filter","$sniffer",function(b,c){return function(d){switch(typeof d){case"string":return a.hasOwnProperty(d)?a[d]:a[d]=$b(d,!1,b,c.csp);case"function":return d;default:return o}}}]}function ec(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return fc(function(b){a.$evalAsync(b)},b)}]}function fc(a,b){function d(a){return a}function e(a){return j(a)}function g(a){var b=h(),c=0,d=x(a)?[]:{};return f(a,function(a,e){c++,i(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var h=function(){var f,g,k=[];return g={resolve:function(b){if(k){var d=k;k=c,f=i(b),d.length&&a(function(){for(var a,b=0,c=d.length;c>b;b++)a=d[b],f.then(a[0],a[1])})}},reject:function(a){g.resolve(j(a))},promise:{then:function(a,c){var g=h(),i=function(c){try{g.resolve((a||d)(c))}catch(e){b(e),g.reject(e)}},j=function(a){try{g.resolve((c||e)(a))}catch(d){b(d),g.reject(d)}};return k?k.push([i,j]):f.then(i,j),g.promise},always:function(a){function b(a,b){var c=h();return b?c.resolve(a):c.reject(a),c.promise}function c(c,e){var f=null;try{f=(a||d)()}catch(g){return b(g,!1)}return f&&f.then?f.then(function(){return b(c,e)},function(a){return b(a,!1)}):b(c,e)}return this.then(function(a){return c(a,!0)},function(a){return c(a,!1)})}}}},i=function(b){return b&&b.then?b:{then:function(c){var d=h();return a(function(){d.resolve(c(b))}),d.promise}}},j=function(b){return{then:function(c,d){var f=h();return a(function(){f.resolve((d||e)(b))}),f.promise}}},k=function(c,f,g){var k,l=h(),m=function(a){try{return(f||d)(a)}catch(c){return b(c),j(c)}},n=function(a){try{return(g||e)(a)}catch(c){return b(c),j(c)}};return a(function(){i(c).then(function(a){k||(k=!0,l.resolve(i(a).then(m,n)))},function(a){k||(k=!0,l.resolve(n(a)))})}),l.promise};return{defer:h,reject:j,when:k,all:g}}function gc(){var a={};this.when=function(b,c){if(a[b]=l({reloadOnSearch:!0,caseInsensitiveMatch:!1},c),b){var d="/"==b[b.length-1]?b.substr(0,b.length-1):b+"/";a[d]={redirectTo:b}}return this},this.otherwise=function(a){return this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache",function(b,c,d,e,g,h,i){function j(a,b,c){b="^"+b.replace(/[-\/\\^$:*+?.()|[\]{}]/g,"\\$&")+"$";for(var d,e="",g=[],h={},i=/\\([:*])(\w+)/g,j=0;null!==(d=i.exec(b));){switch(e+=b.slice(j,d.index),d[1]){case":":e+="([^\\/]*)";break;case"*":e+="(.*)"}g.push(d[2]),j=i.lastIndex}e+=b.substr(j);var k=a.match(new RegExp(e,c.caseInsensitiveMatch?"i":""));return k&&f(g,function(a,b){h[a]=k[b+1]}),k?h:null}function k(){var a=m(),j=q.current;a&&j&&a.$$route===j.$$route&&K(a.pathParams,j.pathParams)&&!a.reloadOnSearch&&!p?(j.params=a.params,I(j.params,d),b.$broadcast("$routeUpdate",j)):(a||j)&&(p=!1,b.$broadcast("$routeChangeStart",a,j),q.current=a,a&&a.redirectTo&&(u(a.redirectTo)?c.path(o(a.redirectTo,a.params)).search(a.params).replace():c.url(a.redirectTo(a.pathParams,c.path(),c.search())).replace()),e.when(a).then(function(){if(a){var b,c=l({},a.resolve);return f(c,function(a,b){c[b]=u(a)?g.get(a):g.invoke(a)}),s(b=a.template)?y(b)&&(b=b(a.params)):s(b=a.templateUrl)&&(y(b)&&(b=b(a.params)),s(b)&&(a.loadedTemplateUrl=b,b=h.get(b,{cache:i}).then(function(a){return a.data}))),s(b)&&(c.$template=b),e.all(c)}}).then(function(c){a==q.current&&(a&&(a.locals=c,I(a.params,d)),b.$broadcast("$routeChangeSuccess",a,j))},function(c){a==q.current&&b.$broadcast("$routeChangeError",a,j,c)}))}function m(){var b,d;return f(a,function(a,e){!d&&(b=j(c.path(),e,a))&&(d=n(a,{params:l({},c.search(),b),pathParams:b}),d.$$route=a)}),d||a[null]&&n(a[null],{params:{},pathParams:{}})}function o(a,b){var c=[];return f((a||"").split(":"),function(a,d){if(0==d)c.push(a);else{var e=a.match(/(\w+)(.*)/),f=e[1];c.push(b[f]),c.push(e[2]||""),delete b[f]}}),c.join("")}var p=!1,q={routes:a,reload:function(){p=!0,b.$evalAsync(k)}};return b.$on("$locationChangeSuccess",k),q}]}function hc(){this.$get=q({})}function ic(){var a=10;this.digestTtl=function(b){return arguments.length&&(a=b),a},this.$get=["$injector","$exceptionHandler","$parse",function(b,c,d){function f(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$listeners={},this.$$isolateBindings={}}function g(a){if(l.$$phase)throw Error(l.$$phase+" already in progress");l.$$phase=a}function h(){l.$$phase=null}function i(a,b){var c=d(a);return ab(c,b),c}function k(){}f.prototype={$new:function(a){var b,c;if(y(a))throw Error("API-CHANGE: Use $controller to instantiate controllers.");return a?(c=new f,c.$root=this.$root):(b=function(){},b.prototype=this,c=new b,c.$id=j()),c["this"]=c,c.$$listeners={},c.$parent=this,c.$$watchers=c.$$nextSibling=c.$$childHead=c.$$childTail=null,c.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=c,this.$$childTail=c):this.$$childHead=this.$$childTail=c,c},$watch:function(a,b,c){var d=this,e=i(a,"watch"),f=d.$$watchers,g={fn:b,last:k,get:e,exp:a,eq:!!c};if(!y(b)){var h=i(b||o,"listener");g.fn=function(a,b,c){h(c)}}if("string"==typeof a&&e.constant){var j=g.fn;g.fn=function(a,b,c){j.call(this,a,b,c),H(f,g)}}return f||(f=d.$$watchers=[]),f.unshift(g),function(){H(f,g)}},$watchCollection:function(a,b){function c(){h=k(i);var a,b;if(t(h))if(e(h)){g!==l&&(g=l,n=g.length=0,j++),a=h.length,n!==a&&(j++,g.length=n=a);for(var c=0;a>c;c++)g[c]!==h[c]&&(j++,g[c]=h[c])}else{g!==m&&(g=m={},n=0,j++),a=0;for(b in h)h.hasOwnProperty(b)&&(a++,g.hasOwnProperty(b)?g[b]!==h[b]&&(j++,g[b]=h[b]):(n++,g[b]=h[b],j++));if(n>a){j++;for(b in g)g.hasOwnProperty(b)&&!h.hasOwnProperty(b)&&(n--,delete g[b])}}else g!==h&&(g=h,j++);return j}function f(){b(h,g,i)}var g,h,i=this,j=0,k=d(a),l=[],m={},n=0;return this.$watch(c,f)},$digest:function(){var b,d,e,f,i,j,l,m,n,o,p=this.$$asyncQueue,q=a,r=this,s=[];g("$digest");do{for(j=!1,m=r;p.length;)try{m.$eval(p.shift())}catch(t){c(t)}do{if(f=m.$$watchers)for(i=f.length;i--;)try{b=f[i],(d=b.get(m))===(e=b.last)||(b.eq?K(d,e):"number"==typeof d&&"number"==typeof e&&isNaN(d)&&isNaN(e))||(j=!0,b.last=b.eq?I(d):d,b.fn(d,e===k?d:e,m),5>q&&(n=4-q,s[n]||(s[n]=[]),o=y(b.exp)?"fn: "+(b.exp.name||b.exp.toString()):b.exp,o+="; newVal: "+P(d)+"; oldVal: "+P(e),s[n].push(o)))}catch(t){c(t)}if(!(l=m.$$childHead||m!==r&&m.$$nextSibling))for(;m!==r&&!(l=m.$$nextSibling);)m=m.$parent}while(m=l);if(j&&!q--)throw h(),Error(a+" $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: "+P(s))}while(j||p.length);h()},$destroy:function(){if(l!=this&&!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null}},$eval:function(a,b){return d(a)(this,b)},$evalAsync:function(a){this.$$asyncQueue.push(a)},$apply:function(a){try{return g("$apply"),this.$eval(a)}catch(b){c(b)}finally{h();try{l.$digest()}catch(b){throw c(b),b}}},$on:function(a,b){var c=this.$$listeners[a];return c||(this.$$listeners[a]=c=[]),c.push(b),function(){c[G(c,b)]=null}},$emit:function(a){var b,d,e,f=[],g=this,h=!1,i={name:a,targetScope:g,stopPropagation:function(){h=!0},preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},j=L([i],arguments,1);do{for(b=g.$$listeners[a]||f,i.currentScope=g,d=0,e=b.length;e>d;d++)if(b[d])try{if(b[d].apply(null,j),h)return i}catch(k){c(k)}else b.splice(d,1),d--,e--;g=g.$parent}while(g);return i},$broadcast:function(a){var b,d,e,f=this,g=f,h=f,i={name:a,targetScope:f,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},j=L([i],arguments,1);do{for(g=h,i.currentScope=g,b=g.$$listeners[a]||[],d=0,e=b.length;e>d;d++)if(b[d])try{b[d].apply(null,j)}catch(k){c(k)}else b.splice(d,1),d--,e--;if(!(h=g.$$childHead||g!==f&&g.$$nextSibling))for(;g!==f&&!(h=g.$$nextSibling);)g=g.$parent}while(g=h);return i}};var l=new f;return l}]}function jc(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(Tc((a.navigator||{}).userAgent))||[])[1]),g=b[0]||{},h=/^(Moz|webkit|O|ms)(?=[A-Z])/,i=g.body&&g.body.style,j=!1,k=!1;if(i){for(var l in i)if(d=h.exec(l)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}j=!!("transition"in i||c+"Transition"in i),k=!!("animation"in i||c+"Animation"in i)}return{history:!(!a.history||!a.history.pushState||4>f),hashchange:"onhashchange"in a&&(!g.documentMode||g.documentMode>7),hasEvent:function(a){if("input"==a&&9==_c)return!1;if(r(e[a])){var b=g.createElement("div");e[a]="on"+a in b}return e[a]},csp:g.securityPolicy?g.securityPolicy.isActive:!1,vendorPrefix:c,transitions:j,animations:k}}]}function kc(){this.$get=q(a)}function lc(a){var b,c,d,e={};return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=Tc(C(a.substr(0,d))),c=C(a.substr(d+1)),b&&(e[b]?e[b]+=", "+c:e[b]=c)}),e):e}function mc(a,b){var d=Fd.exec(a);if(null==d)return!0;var e={protocol:d[2],host:d[4],port:m(d[6])||Bd[d[2]]||null,relativeProtocol:d[2]===c||""===d[2]};d=zd.exec(b);var f={protocol:d[1],host:d[3],port:m(d[5])||Bd[d[1]]||null};return(e.protocol==f.protocol||e.relativeProtocol)&&e.host==f.host&&(e.port==f.port||e.relativeProtocol&&f.port==Bd[f.protocol])}function nc(a){var b=t(a)?a:c;return function(c){return b||(b=lc(a)),c?b[Tc(c)]||null:b}}function oc(a,b,c){return y(c)?c(a,b):(f(c,function(c){a=c(a,b)}),a)}function pc(a){return a>=200&&300>a}function qc(){var a=/^\s*(\[|\{[^\{])/,b=/[\}\]]\s*$/,d=/^\)\]\}',?\n/,e={"Content-Type":"application/json;charset=utf-8"},g=this.defaults={transformResponse:[function(c){return u(c)&&(c=c.replace(d,""),a.test(c)&&b.test(c)&&(c=Q(c,!0))),c}],transformRequest:[function(a){return t(a)&&!B(a)?P(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:e,put:e,patch:e},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},i=this.interceptors=[],j=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,d,e,k,m){function n(a){function d(a){var b=l({},a,{data:oc(a.data,a.headers,e.transformResponse)});return pc(a.status)?b:k.reject(b)}var e={transformRequest:g.transformRequest,transformResponse:g.transformResponse},h={};l(e,a),e.headers=h,e.method=Uc(e.method),l(h,g.headers.common,g.headers[Tc(e.method)],a.headers);var i=mc(e.url,b.url())?b.cookies()[e.xsrfCookieName||g.xsrfCookieName]:c;i&&(h[e.xsrfHeaderName||g.xsrfHeaderName]=i);var j=function(a){var b=oc(a.data,nc(h),a.transformRequest);return r(a.data)&&delete h["Content-Type"],r(a.withCredentials)&&!r(g.withCredentials)&&(a.withCredentials=g.withCredentials),q(a,b,h).then(d,d)},m=[j,c],n=k.when(e);for(f(w,function(a){(a.request||a.requestError)&&m.unshift(a.request,a.requestError),(a.response||a.responseError)&&m.push(a.response,a.responseError)});m.length;){var o=m.shift(),p=m.shift();n=n.then(o,p)}return n.success=function(a){return n.then(function(b){a(b.data,b.status,b.headers,e)}),n},n.error=function(a){return n.then(null,function(b){a(b.data,b.status,b.headers,e)}),n},n}function o(){f(arguments,function(a){n[a]=function(b,c){return n(l(c||{},{method:a,url:b}))}})}function p(){f(arguments,function(a){n[a]=function(b,c,d){return n(l(d||{},{method:a,url:b,data:c}))}})}function q(b,c,d){function f(a,b,c){j&&(pc(a)?j.put(p,[a,b,lc(c)]):j.remove(p)),h(b,a,c),e.$$phase||e.$apply()}function h(a,c,d){c=Math.max(c,0),(pc(c)?m.resolve:m.reject)({data:a,status:c,headers:nc(d),config:b})}function i(){var a=G(n.pendingRequests,b);-1!==a&&n.pendingRequests.splice(a,1)}var j,l,m=k.defer(),o=m.promise,p=s(b.url,b.params);if(n.pendingRequests.push(b),o.then(i,i),(b.cache||g.cache)&&b.cache!==!1&&"GET"==b.method&&(j=t(b.cache)?b.cache:t(g.cache)?g.cache:v),j)if(l=j.get(p)){if(l.then)return l.then(i,i),l;x(l)?h(l[1],l[0],I(l[2])):h(l,200,{})}else j.put(p,o);return l||a(b.method,p,c,f,d,b.timeout,b.withCredentials,b.responseType),o}function s(a,b){if(!b)return a;var d=[];return h(b,function(a,b){null!=a&&a!=c&&(x(a)||(a=[a]),f(a,function(a){t(a)&&(a=P(a)),d.push(W(b)+"="+W(a))}))}),a+(-1==a.indexOf("?")?"?":"&")+d.join("&")}var v=d("$http"),w=[];return f(i,function(a){w.unshift(u(a)?m.get(a):m.invoke(a))}),f(j,function(a,b){var c=u(a)?m.get(a):m.invoke(a);w.splice(b,0,{response:function(a){return c(k.when(a))},responseError:function(a){return c(k.reject(a))}})}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put"),n.defaults=g,n}]}function rc(){this.$get=["$browser","$window","$document",function(a,b,c){return sc(a,Gd,a.defer,b.angular.callbacks,c[0],b.location.protocol.replace(":",""))}]}function sc(a,b,c,d,e,g){function h(a,b){var c=e.createElement("script"),d=function(){e.body.removeChild(c),b&&b()};return c.type="text/javascript",c.src=a,_c?c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&d()}:c.onload=c.onerror=d,e.body.appendChild(c),d}return function(e,i,j,k,l,m,n,p){function q(){s=-1,u&&u(),v&&v.abort()}function r(b,d,e,f){var h=(i.match(zd)||["",g])[1];w&&c.cancel(w),u=v=null,d="file"==h?e?200:404:d,d=1223==d?204:d,b(d,e,f),a.$$completeOutstandingRequest(o)}var s;if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==Tc(e)){var t="_"+(d.counter++).toString(36);d[t]=function(a){d[t].data=a};var u=h(i.replace("JSON_CALLBACK","angular.callbacks."+t),function(){d[t].data?r(k,200,d[t].data):r(k,s||-2),delete d[t]})}else{var v=new b;v.open(e,i,!0),f(l,function(a,b){a&&v.setRequestHeader(b,a)}),v.onreadystatechange=function(){if(4==v.readyState){var a=v.getAllResponseHeaders(),b=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma"];a||(a="",f(b,function(b){var c=v.getResponseHeader(b);c&&(a+=b+": "+c+"\n")})),r(k,s||v.status,v.responseType?v.response:v.responseText,a)}},n&&(v.withCredentials=!0),p&&(v.responseType=p),v.send(j||"")}if(m>0)var w=c(q,m);else m&&m.then&&m.then(q)}}function tc(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(a){return 1===a?"one":"other"}}}}function uc(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(a,b,c,d){function e(e,g,h){var i,j,k=c.defer(),l=k.promise,m=s(h)&&!h;return i=b.defer(function(){try{k.resolve(e())}catch(b){k.reject(b),d(b)}m||a.$apply()},g),j=function(){delete f[l.$$timeoutId]},l.$$timeoutId=i,f[i]=k,l.then(j,j),l}var f={};return e.cancel=function(a){return a&&a.$$timeoutId in f?(f[a.$$timeoutId].reject("canceled"),b.defer.cancel(a.$$timeoutId)):!1},e}]}function vc(a){function b(b,d){return a.factory(b+c,d)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",xc),b("date",Fc),b("filter",wc),b("json",Gc),b("limitTo",Hc),b("lowercase",Ld),b("number",yc),b("orderBy",Ic),b("uppercase",Md)}function wc(){return function(a,b,c){if(!x(a))return a;var d=[];switch(d.check=function(a){for(var b=0;b<d.length;b++)if(!d[b](a))return!1;return!0},typeof c){case"function":break;case"boolean":if(1==c){c=function(a,b){return ed.equals(a,b)};break}default:c=function(a,b){return b=(""+b).toLowerCase(),(""+a).toLowerCase().indexOf(b)>-1}}var e=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!e(a,b.substr(1));switch(typeof a){case"boolean":case"number":case"string":return c(a,b);case"object":switch(typeof b){case"object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&e(a[d],b))return!0}return!1;case"array":for(var f=0;f<a.length;f++)if(e(a[f],b))return!0;return!1;default:return!1}};switch(typeof b){case"boolean":case"number":case"string":b={$:b};case"object":for(var f in b)"$"==f?!function(){if(b[f]){var a=f;d.push(function(c){return e(c,b[a])})}}():!function(){if(b[f]){var a=f;d.push(function(c){return e(ac(c,a),b[a])})}}();break;case"function":d.push(b);break;default:return a}for(var g=[],h=0;h<a.length;h++){var i=a[h];d.check(i)&&g.push(i)}return g}}function xc(a){var b=a.NUMBER_FORMATS;return function(a,c){return r(c)&&(c=b.CURRENCY_SYM),zc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,2).replace(/\u00A4/g,c)}}function yc(a){var b=a.NUMBER_FORMATS;return function(a,c){return zc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function zc(a,b,c,d,e){if(isNaN(a)||!isFinite(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?g="0":(h=g,j=!0)}if(!j){var l=(g.split(Hd)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac));var m=Math.pow(10,e);a=Math.round(a*m)/m;var n=(""+a).split(Hd),o=n[0];n=n[1]||"";var p=0,q=b.lgSize,s=b.gSize;if(o.length>=q+s){p=o.length-q;for(var t=0;p>t;t++)(p-t)%s===0&&0!==t&&(h+=c),h+=o.charAt(t)}for(t=p;t<o.length;t++)(o.length-t)%q===0&&0!==t&&(h+=c),h+=o.charAt(t);for(;n.length<e;)n+="0";e&&"0"!==e&&(h+=d+n.substr(0,e))}return i.push(f?b.negPre:b.posPre),i.push(h),i.push(f?b.negSuf:b.posSuf),i.join("")}function Ac(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function Bc(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),Ac(f,b,d)}}function Cc(a,b){return function(c,d){var e=c["get"+a](),f=Uc(b?"SHORT"+a:a);return d[f][e]}}function Dc(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=Ac(Math[b>0?"floor":"ceil"](b/60),2)+Ac(Math.abs(b%60),2)}function Ec(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function Fc(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d){var e,g,h="",i=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=Kd.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)g=Jd.exec(d),g?(i=L(i,g,1),d=i.pop()):(i.push(d),d=null);return f(i,function(b){e=Id[b],h+=e?e(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}}function Gc(){return function(a){return P(a,!0)}}function Hc(){return function(a,b){if(!x(a)&&!u(a))return a;if(b=m(b),u(a))return b?b>=0?a.slice(0,b):a.slice(b,a.length):"";var c,d,e=[];for(b>a.length?b=a.length:b<-a.length&&(b=-a.length),b>0?(c=0,d=b):(c=a.length+b,d=a.length);d>c;c++)e.push(a[c]);return e}}function Ic(a){return function(b,c,d){function e(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function f(a,b){return R(b)?function(b,c){return a(c,b)}:a}function g(a,b){var c=typeof a,d=typeof b;return c==d?("string"==c&&(a=a.toLowerCase()),"string"==c&&(b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}if(!x(b))return b;if(!c)return b;c=x(c)?c:[c],c=E(c,function(b){var c=!1,d=b||p;return u(b)&&(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),d=a(b)),f(function(a,b){return g(d(a),d(b))},c)});for(var h=[],i=0;i<b.length;i++)h.push(b[i]);return h.sort(f(e,d))}}function Jc(a){return y(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function Kc(a,b){function c(b,c){c=c?"-"+Z(c,"-"):"",a.removeClass((b?Zd:Yd)+c).addClass((b?Yd:Zd)+c)}var d=this,e=a.parent().controller("form")||Pd,g=0,h=d.$error={},i=[];d.$name=b.name,d.$dirty=!1,d.$pristine=!0,d.$valid=!0,d.$invalid=!1,e.$addControl(d),a.addClass($d),c(!0),d.$addControl=function(a){i.push(a),a.$name&&!d.hasOwnProperty(a.$name)&&(d[a.$name]=a)},d.$removeControl=function(a){a.$name&&d[a.$name]===a&&delete d[a.$name],f(h,function(b,c){d.$setValidity(c,!0,a)}),H(i,a)},d.$setValidity=function(a,b,f){var i=h[a];if(b)i&&(H(i,f),i.length||(g--,g||(c(b),d.$valid=!0,d.$invalid=!1),h[a]=!1,c(!0,a),e.$setValidity(a,!0,d)));else{if(g||c(b),i){if(F(i,f))return}else h[a]=i=[],g++,c(!1,a),e.$setValidity(a,!1,d);i.push(f),d.$valid=!1,d.$invalid=!0}},d.$setDirty=function(){a.removeClass($d).addClass(_d),d.$dirty=!0,d.$pristine=!1,e.$setDirty()},d.$setPristine=function(){a.removeClass(_d).addClass($d),d.$dirty=!1,d.$pristine=!0,f(i,function(a){a.$setPristine()})}}function Lc(a){return r(a)||""===a||null===a||a!==a}function Mc(a,b,d,e,f,g){var h=function(){var c=b.val();R(d.ngTrim||"T")&&(c=C(c)),e.$viewValue!==c&&a.$apply(function(){e.$setViewValue(c)})};if(f.hasEvent("input"))b.bind("input",h);else{var i,j=function(){i||(i=g.defer(function(){h(),i=null}))};b.bind("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||j()}),b.bind("change",h),f.hasEvent("paste")&&b.bind("paste cut",j)}e.$render=function(){b.val(Lc(e.$viewValue)?"":e.$viewValue)};var k,l,n=d.ngPattern,o=function(a,b){return Lc(b)||a.test(b)?(e.$setValidity("pattern",!0),b):(e.$setValidity("pattern",!1),c)};if(n&&(l=n.match(/^\/(.*)\/([gim]*)$/),l?(n=new RegExp(l[1],l[2]),k=function(a){return o(n,a)}):k=function(b){var c=a.$eval(n);if(!c||!c.test)throw new Error("Expected "+n+" to be a RegExp but was "+c);return o(c,b)},e.$formatters.push(k),e.$parsers.push(k)),d.ngMinlength){var p=m(d.ngMinlength),q=function(a){return!Lc(a)&&a.length<p?(e.$setValidity("minlength",!1),c):(e.$setValidity("minlength",!0),a)};e.$parsers.push(q),e.$formatters.push(q)}if(d.ngMaxlength){var r=m(d.ngMaxlength),s=function(a){return!Lc(a)&&a.length>r?(e.$setValidity("maxlength",!1),c):(e.$setValidity("maxlength",!0),a)
};e.$parsers.push(s),e.$formatters.push(s)}}function Nc(a,b,d,e,f,g){if(Mc(a,b,d,e,f,g),e.$parsers.push(function(a){var b=Lc(a);return b||Vd.test(a)?(e.$setValidity("number",!0),""===a?null:b?a:parseFloat(a)):(e.$setValidity("number",!1),c)}),e.$formatters.push(function(a){return Lc(a)?"":""+a}),d.min){var h=parseFloat(d.min),i=function(a){return!Lc(a)&&h>a?(e.$setValidity("min",!1),c):(e.$setValidity("min",!0),a)};e.$parsers.push(i),e.$formatters.push(i)}if(d.max){var j=parseFloat(d.max),k=function(a){return!Lc(a)&&a>j?(e.$setValidity("max",!1),c):(e.$setValidity("max",!0),a)};e.$parsers.push(k),e.$formatters.push(k)}e.$formatters.push(function(a){return Lc(a)||v(a)?(e.$setValidity("number",!0),a):(e.$setValidity("number",!1),c)})}function Oc(a,b,d,e,f,g){Mc(a,b,d,e,f,g);var h=function(a){return Lc(a)||Td.test(a)?(e.$setValidity("url",!0),a):(e.$setValidity("url",!1),c)};e.$formatters.push(h),e.$parsers.push(h)}function Pc(a,b,d,e,f,g){Mc(a,b,d,e,f,g);var h=function(a){return Lc(a)||Ud.test(a)?(e.$setValidity("email",!0),a):(e.$setValidity("email",!1),c)};e.$formatters.push(h),e.$parsers.push(h)}function Qc(a,b,c,d){r(c.name)&&b.attr("name",j()),b.bind("click",function(){b[0].checked&&a.$apply(function(){d.$setViewValue(c.value)})}),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function Rc(a,b,c,d){var e=c.ngTrueValue,f=c.ngFalseValue;u(e)||(e=!0),u(f)||(f=!1),b.bind("click",function(){a.$apply(function(){d.$setViewValue(b[0].checked)})}),d.$render=function(){b[0].checked=d.$viewValue},d.$formatters.push(function(a){return a===e}),d.$parsers.push(function(a){return a?e:f})}function Sc(a,b){return a="ngClass"+a,Jc(function(d,e,f){function g(a){(b===!0||d.$index%2===b)&&(j&&!K(a,j)&&h(j),i(a)),j=I(a)}function h(a){t(a)&&!x(a)&&(a=E(a,function(a,b){return a?b:void 0})),e.removeClass(x(a)?a.join(" "):a)}function i(a){t(a)&&!x(a)&&(a=E(a,function(a,b){return a?b:void 0})),a&&e.addClass(x(a)?a.join(" "):a)}var j=c;d.$watch(f[a],g,!0),f.$observe("class",function(){var b=d.$eval(f[a]);g(b,b)}),"ngClass"!==a&&d.$watch("$index",function(c,e){var g=1&c;g!==e&1&&(g===b?i(d.$eval(f[a])):h(d.$eval(f[a])))})})}var Tc=function(a){return u(a)?a.toLowerCase():a},Uc=function(a){return u(a)?a.toUpperCase():a},Vc=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},Wc=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(Tc=Vc,Uc=Wc);var Xc,Yc,Zc,$c,_c=m((/msie (\d+)/.exec(Tc(navigator.userAgent))||[])[1]),ad=[].slice,bd=[].push,cd=Object.prototype.toString,dd=a.angular,ed=a.angular||(a.angular={}),fd=["0","0","0"];o.$inject=[],p.$inject=[],$c=9>_c?function(a){return a=a.nodeName?a:a[0],a.scopeName&&"HTML"!=a.scopeName?Uc(a.scopeName+":"+a.nodeName):a.nodeName}:function(a){return a.nodeName?a.nodeName:a[0].nodeName};var gd=/[A-Z]/g,hd={full:"1.1.5",major:1,minor:1,dot:5,codeName:"triangle-squarification"},id=gb.cache={},jd=gb.expando="ng-"+(new Date).getTime(),kd=1,ld=a.document.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},md=a.document.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},nd=/([\:\-\_]+(.))/g,od=/^moz([A-Z])/,pd=gb.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.bind("DOMContentLoaded",d),gb(a).bind("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return Xc(a>=0?this[a]:this[this.length+a])},length:0,push:bd,sort:[].sort,splice:[].splice},qd={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){qd[Tc(a)]=a});var rd={};f("input,select,option,textarea,button,form,details".split(","),function(a){rd[Uc(a)]=!0}),f({data:mb,inheritedData:sb,scope:function(a){return sb(a,"$scope")},controller:rb,injector:function(a){return sb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:nb,css:function(a,b,d){if(b=eb(b),!s(d)){var e;return 8>=_c&&(e=a.currentStyle&&a.currentStyle[b],""===e&&(e="auto")),e=e||a.style[b],8>=_c&&(e=""===e?c:e),e}a.style[b]=d},attr:function(a,b,d){var e=Tc(b);if(qd[e]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?e:c;d?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?c:f}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:l(9>_c?function(a,b){if(1==a.nodeType){if(r(b))return a.innerText;a.innerText=b}else{if(r(b))return a.nodeValue;a.nodeValue=b}}:function(a,b){return r(b)?a.textContent:void(a.textContent=b)},{$dv:""}),val:function(a,b){return r(b)?a.value:void(a.value=b)},html:function(a,b){if(r(b))return a.innerHTML;for(var c=0,d=a.childNodes;c<d.length;c++)ib(d[c]);a.innerHTML=b}},function(a,b){gb.prototype[b]=function(b,d){var e,f;if((2==a.length&&a!==nb&&a!==rb?b:d)!==c){for(e=0;e<this.length;e++)a(this[e],b,d);return this}if(t(b)){for(e=0;e<this.length;e++)if(a===mb)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}return this.length?a(this[0],b,d):a.$dv}}),f({removeData:kb,dealoc:ib,bind:function Le(a,c,d){var e=lb(a,"events"),g=lb(a,"handle");e||lb(a,"events",e={}),g||lb(a,"handle",g=ub(a,e)),f(c.split(" "),function(c){var f=e[c];if(!f){if("mouseenter"==c||"mouseleave"==c){var h=b.body.contains||b.body.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};e[c]=[];var i={mouseleave:"mouseout",mouseenter:"mouseover"};Le(a,i[c],function(a){var b=this,d=a.relatedTarget;(!d||d!==b&&!h(b,d))&&g(a,c)})}else ld(a,c,g),e[c]=[];f=e[c]}f.push(d)})},unbind:jb,replaceWith:function(a,b){var c,d=a.parentNode;ib(a),f(new gb(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){1===a.nodeType&&b.push(a)}),b},contents:function(a){return a.childNodes||[]},append:function(a,b){f(new gb(b),function(b){(1===a.nodeType||11===a.nodeType)&&a.appendChild(b)})},prepend:function(a,b){if(1===a.nodeType){var c=a.firstChild;f(new gb(b),function(b){c?a.insertBefore(b,c):(a.appendChild(b),c=b)})}},wrap:function(a,b){b=Xc(b)[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:function(a){ib(a);var b=a.parentNode;b&&b.removeChild(a)},after:function(a,b){var c=a,d=a.parentNode;f(new gb(b),function(a){d.insertBefore(a,c.nextSibling),c=a})},addClass:pb,removeClass:ob,toggleClass:function(a,b,c){r(c)&&(c=!nb(a,b)),(c?pb:ob)(a,b)},parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(var b=a.nextSibling;null!=b&&1!==b.nodeType;)b=b.nextSibling;return b},find:function(a,b){return a.getElementsByTagName(b)},clone:hb,triggerHandler:function(a,b){var c=(lb(a,"events")||{})[b];f(c,function(b){b.call(a,{preventDefault:o})})}},function(a,b){gb.prototype[b]=function(b,d){for(var e,f=0;f<this.length;f++)e==c?(e=a(this[f],b,d),e!==c&&(e=Xc(e))):qb(e,a(this[f],b,d));return e==c?this:e}}),wb.prototype={put:function(a,b){this[vb(a)]=b},get:function(a){return this[vb(a)]},remove:function(a){var b=this[a=vb(a)];return delete this[a],b}};var sd=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,td=/,/,ud=/^\s*(_?)(\S+?)\1\s*$/,vd=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;Ab.$inject=["$provide"];var wd=function(){var a="$ngAnimateController",b={running:!0};this.$get=["$animation","$window","$sniffer","$rootElement","$rootScope",function(c,d,e,g){g.data(a,b);var h=function(b,g){function h(h,i,j){return function(k,l,m){function n(a){var b=0,c=u(a)?a.split(/\s*,\s*/):[];return f(c,function(a){b=Math.max(parseFloat(a)||0,b)}),b}function p(){if(k.addClass(A),x)x(k,q,C);else if(y(d.getComputedStyle)){var a="animation",b="transition",c=e.vendorPrefix+"Animation",g=e.vendorPrefix+"Transition",h="Duration",i="Delay",j="IterationCount",l=0,m=1;f(k,function(e){if(e.nodeType==m){var f=b,k=g,o=1,p=d.getComputedStyle(e)||{};(parseFloat(p[a+h])>0||parseFloat(p[c+h])>0)&&(f=a,k=c,o=Math.max(parseInt(p[f+j])||0,parseInt(p[k+j])||0,o));var q=Math.max(n(p[f+i]),n(p[k+i])),r=Math.max(n(p[f+h]),n(p[k+h]));l=Math.max(q+o*r,l)}}),d.setTimeout(q,1e3*l)}else q()}function q(){q.run||(q.run=!0,j(k,l,m),k.removeClass(s),k.removeClass(A),k.removeData(a))}var r=b.$eval(g.ngAnimate),s=r?t(r)?r[h]:r+"-"+h:"",v=c(s),w=v&&v.setup,x=v&&v.start,z=v&&v.cancel;if(s){var A=s+"-active";if(l||(l=m?m.parent():k.parent()),!e.transitions&&!w&&!x||(l.inheritedData(a)||o).running)return i(k,l,m),void j(k,l,m);var B=k.data(a)||{};if(B.running&&((z||o)(k),B.done()),k.data(a,{running:!0,done:q}),k.addClass(s),i(k,l,m),0==k.length)return q();var C=(w||o)(k);d.setTimeout(p,1)}else i(k,l,m),j(k,l,m)}}function i(a){a.css("display","")}function j(a){a.css("display","none")}function k(a,b,c){c?c.after(a):b.append(a)}function l(a){a.remove()}function m(a,b,c){k(a,b,c)}var n={};return n.enter=h("enter",k,o),n.leave=h("leave",o,l),n.move=h("move",m,o),n.show=h("show",i,o),n.hide=h("hide",o,j),n.animate=function(a,b){h(a,o,o)(b)},n};return h.enabled=function(a){return arguments.length&&(b.running=!a),!b.running},h}]},xd="Non-assignable model expression: ";Fb.$inject=["$provide"];var yd=/^(x[\:\-_]|data[\:\-_])/i,zd=/^([^:]+):\/\/(\w+:{0,1}\w*@)?(\{?[\w\.-]*\}?)(:([0-9]+))?(\/[^\?#]*)?(\?([^#]*))?(#(.*))?$/,Ad=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Bd={http:80,https:443,ftp:21};Ub.prototype=Tb.prototype=Sb.prototype={$$replace:!1,absUrl:Vb("$$absUrl"),url:function(a,b){if(r(a))return this.$$url;var c=Ad.exec(a);return c[1]&&this.path(decodeURIComponent(c[1])),(c[2]||c[1])&&this.search(c[3]||""),this.hash(c[5]||"",b),this},protocol:Vb("$$protocol"),host:Vb("$$host"),port:Vb("$$port"),path:Wb("$$path",function(a){return"/"==a.charAt(0)?a:"/"+a}),search:function(a,b){return r(a)?this.$$search:(s(b)?null===b?delete this.$$search[a]:this.$$search[a]=b:this.$$search=u(a)?T(a):a,this.$$compose(),this)},hash:Wb("$$hash",p),replace:function(){return this.$$replace=!0,this}};var Cd={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:o,"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":o,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},Dd={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Ed={},Fd=/^(([^:]+):)?\/\/(\w+:{0,1}\w*@)?([\w\.-]*)?(:([0-9]+))?(.*)$/,Gd=a.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}throw new Error("This browser does not support XMLHttpRequest.")};vc.$inject=["$provide"],xc.$inject=["$locale"],yc.$inject=["$locale"];var Hd=".",Id={yyyy:Bc("FullYear",4),yy:Bc("FullYear",2,0,!0),y:Bc("FullYear",1),MMMM:Cc("Month"),MMM:Cc("Month",!0),MM:Bc("Month",2,1),M:Bc("Month",1,1),dd:Bc("Date",2),d:Bc("Date",1),HH:Bc("Hours",2),H:Bc("Hours",1),hh:Bc("Hours",2,-12),h:Bc("Hours",1,-12),mm:Bc("Minutes",2),m:Bc("Minutes",1),ss:Bc("Seconds",2),s:Bc("Seconds",1),sss:Bc("Milliseconds",3),EEEE:Cc("Day"),EEE:Cc("Day",!0),a:Ec,Z:Dc},Jd=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,Kd=/^\d+$/;Fc.$inject=["$locale"];var Ld=q(Tc),Md=q(Uc);Ic.$inject=["$parse"];var Nd=q({restrict:"E",compile:function(a,c){return 8>=_c&&(c.href||c.name||c.$set("href",""),a.append(b.createComment("IE fix"))),function(a,b){b.bind("click",function(a){b.attr("href")||a.preventDefault()})}}}),Od={};f(qd,function(a,b){var c=Gb("ng-"+b);Od[c]=function(){return{priority:100,compile:function(){return function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}),f(["src","srcset","href"],function(a){var b=Gb("ng-"+a);Od[b]=function(){return{priority:99,link:function(c,d,e){e.$observe(b,function(b){b&&(e.$set(a,b),_c&&d.prop(a,e[a]))})}}}});var Pd={$addControl:o,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o};Kc.$inject=["$element","$attrs","$scope"];var Qd=function(a){return["$timeout",function(b){var d={name:"form",restrict:"E",controller:Kc,compile:function(){return{pre:function(a,d,e,f){if(!e.action){var g=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};ld(d[0],"submit",g),d.bind("$destroy",function(){b(function(){md(d[0],"submit",g)},0,!1)})}var h=d.parent().controller("form"),i=e.name||e.ngForm;i&&(a[i]=f),h&&d.bind("$destroy",function(){h.$removeControl(f),i&&(a[i]=c),l(f,Pd)})}}}};return a?l(I(d),{restrict:"EAC"}):d}]},Rd=Qd(),Sd=Qd(!0),Td=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Ud=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/,Vd=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Wd={text:Mc,number:Nc,url:Oc,email:Pc,radio:Qc,checkbox:Rc,hidden:o,button:o,submit:o,reset:o},Xd=["$browser","$sniffer",function(a,b){return{restrict:"E",require:"?ngModel",link:function(c,d,e,f){f&&(Wd[Tc(e.type)]||Wd.text)(c,d,e,f,b,a)}}}],Yd="ng-valid",Zd="ng-invalid",$d="ng-pristine",_d="ng-dirty",ae=["$scope","$exceptionHandler","$attrs","$element","$parse",function(a,b,c,d,e){function g(a,b){b=b?"-"+Z(b,"-"):"",d.removeClass((a?Zd:Yd)+b).addClass((a?Yd:Zd)+b)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=c.name;var h=e(c.ngModel),i=h.assign;if(!i)throw Error(xd+c.ngModel+" ("+S(d)+")");this.$render=o;var j=d.inheritedData("$formController")||Pd,k=0,l=this.$error={};d.addClass($d),g(!0),this.$setValidity=function(a,b){l[a]!==!b&&(b?(l[a]&&k--,k||(g(!0),this.$valid=!0,this.$invalid=!1)):(g(!1),this.$invalid=!0,this.$valid=!1,k++),l[a]=!b,g(b,a),j.$setValidity(a,b,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,d.removeClass(_d).addClass($d)},this.$setViewValue=function(c){this.$viewValue=c,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,d.removeClass($d).addClass(_d),j.$setDirty()),f(this.$parsers,function(a){c=a(c)}),this.$modelValue!==c&&(this.$modelValue=c,i(a,c),f(this.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}}))};var m=this;a.$watch(function(){var b=h(a);if(m.$modelValue!==b){var c=m.$formatters,d=c.length;for(m.$modelValue=b;d--;)b=c[d](b);m.$viewValue!==b&&(m.$viewValue=b,m.$render())}})}],be=function(){return{require:["ngModel","^?form"],controller:ae,link:function(a,b,c,d){var e=d[0],f=d[1]||Pd;f.$addControl(e),b.bind("$destroy",function(){f.$removeControl(e)})}}},ce=q({require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),de=function(){return{require:"?ngModel",link:function(a,b,c,d){if(d){c.required=!0;var e=function(a){return c.required&&(Lc(a)||a===!1)?void d.$setValidity("required",!1):(d.$setValidity("required",!0),a)};d.$formatters.push(e),d.$parsers.unshift(e),c.$observe("required",function(){e(d.$viewValue)})}}}},ee=function(){return{require:"ngModel",link:function(a,b,d,e){var g=/\/(.*)\//.exec(d.ngList),h=g&&new RegExp(g[1])||d.ngList||",",i=function(a){var b=[];return a&&f(a.split(h),function(a){a&&b.push(C(a))}),b};e.$parsers.push(i),e.$formatters.push(function(a){return x(a)?a.join(", "):c})}}},fe=/^(true|false|\d+)$/,ge=function(){return{priority:100,compile:function(a,b){return fe.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a,!1)})}}}},he=Jc(function(a,b,d){b.addClass("ng-binding").data("$binding",d.ngBind),a.$watch(d.ngBind,function(a){b.text(a==c?"":a)})}),ie=["$interpolate",function(a){return function(b,c,d){var e=a(c.attr(d.$attr.ngBindTemplate));c.addClass("ng-binding").data("$binding",e),d.$observe("ngBindTemplate",function(a){c.text(a)})}}],je=[function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.ngBindHtmlUnsafe),a.$watch(c.ngBindHtmlUnsafe,function(a){b.html(a||"")})}}],ke=Sc("",!0),le=Sc("Odd",0),me=Sc("Even",1),ne=Jc({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),oe=[function(){return{scope:!0,controller:"@"}}],pe=["$sniffer",function(a){return{priority:1e3,compile:function(){a.csp=!0}}}],qe={};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress".split(" "),function(a){var b=Gb("ng-"+a);qe[b]=["$parse",function(c){return function(d,e,f){var g=c(f[b]);e.bind(Tc(a),function(a){d.$apply(function(){g(d,{$event:a})})})}}]});var re=Jc(function(a,b,c){b.bind("submit",function(){a.$apply(c.ngSubmit)})}),se=["$animator",function(a){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(b,d,e){return function(b,d,f){var g,h,i=a(b,f);b.$watch(f.ngIf,function(a){g&&(i.leave(g),g=c),h&&(h.$destroy(),h=c),R(a)&&(h=b.$new(),e(h,function(a){g=a,i.enter(a,d.parent(),d)}))})}}}}],te=["$http","$templateCache","$anchorScroll","$compile","$animator",function(a,b,c,d,e){return{restrict:"ECA",terminal:!0,compile:function(f,g){var h=g.ngInclude||g.src,i=g.onload||"",j=g.autoscroll;return function(f,g,k){var l,m=e(f,k),n=0,o=function(){l&&(l.$destroy(),l=null),m.leave(g.contents(),g)};f.$watch(h,function(e){var h=++n;e?(a.get(e,{cache:b}).success(function(a){if(h===n){l&&l.$destroy(),l=f.$new(),m.leave(g.contents(),g);var b=Xc("<div/>").html(a).contents();m.enter(b,g),d(b)(l),!s(j)||j&&!f.$eval(j)||c(),l.$emit("$includeContentLoaded"),f.$eval(i)}}).error(function(){h===n&&o()}),f.$emit("$includeContentRequested")):o()})}}}}],ue=Jc({compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),ve=Jc({terminal:!0,priority:1e3}),we=["$locale","$interpolate",function(a,b){var c=/{}/g;return{restrict:"EA",link:function(d,e,g){var h=g.count,i=e.attr(g.$attr.when),j=g.offset||0,k=d.$eval(i),l={},m=b.startSymbol(),n=b.endSymbol();f(k,function(a,d){l[d]=b(a.replace(c,m+h+"-"+j+n))}),d.$watch(function(){var b=parseFloat(d.$eval(h));return isNaN(b)?"":(b in k||(b=a.pluralCat(b-j)),l[b](d,e,!0))},function(a){e.text(a)})}}}],xe=["$parse","$animator",function(a,b){var c="$$NG_REMOVED";return{transclude:"element",priority:1e3,terminal:!0,compile:function(d,g,h){return function(d,g,i){var j,k,l,m,n,o,p,q=b(d,i),r=i.ngRepeat,s=r.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/),t={$id:vb};if(!s)throw Error("Expected ngRepeat in form of '_item_ in _collection_[ track by _id_]' but got '"+r+"'.");if(m=s[1],n=s[2],j=s[4],j?(k=a(j),l=function(a,b,c){return p&&(t[p]=a),t[o]=b,t.$index=c,k(d,t)}):l=function(a,b){return vb(b)},s=m.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!s)throw Error("'item' in 'item in collection' should be identifier or (key, value) but got '"+m+"'.");o=s[3]||s[1],p=s[2];var u={};d.$watchCollection(n,function(a){var b,i,j,k,m,n,s,t,v,w,x=g,y={},z=[];if(e(a))v=a;else{v=[];for(n in a)a.hasOwnProperty(n)&&"$"!=n.charAt(0)&&v.push(n);v.sort()}for(k=v.length,i=z.length=v.length,b=0;i>b;b++)if(n=a===v?b:v[b],s=a[n],t=l(n,s,b),u.hasOwnProperty(t))w=u[t],delete u[t],y[t]=w,z[b]=w;else{if(y.hasOwnProperty(t))throw f(z,function(a){a&&a.element&&(u[a.id]=a)}),new Error("Duplicates in a repeater are not allowed. Repeater: "+r+" key: "+t);z[b]={id:t},y[t]=!1}for(n in u)u.hasOwnProperty(n)&&(w=u[n],q.leave(w.element),w.element[0][c]=!0,w.scope.$destroy());for(b=0,i=v.length;i>b;b++){if(n=a===v?b:v[b],s=a[n],w=z[b],w.element){m=w.scope,j=x[0];do j=j.nextSibling;while(j&&j[c]);w.element[0]==j?x=w.element:(q.move(w.element,null,x),x=w.element)}else m=d.$new();m[o]=s,p&&(m[p]=n),m.$index=b,m.$first=0===b,m.$last=b===k-1,m.$middle=!(m.$first||m.$last),w.element||h(m,function(a){q.enter(a,null,x),x=a,w.scope=m,w.element=a,y[w.id]=w})}u=y})}}}}],ye=["$animator",function(a){return function(b,c,d){var e=a(b,d);b.$watch(d.ngShow,function(a){e[R(a)?"show":"hide"](c)})}}],ze=["$animator",function(a){return function(b,c,d){var e=a(b,d);b.$watch(d.ngHide,function(a){e[R(a)?"hide":"show"](c)})}}],Ae=Jc(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),Be=["$animator",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(b,c,d,e){var g,h,i=a(b,d),j=d.ngSwitch||d.on,k=[];b.$watch(j,function(a){for(var c=0,j=k.length;j>c;c++)k[c].$destroy(),i.leave(h[c]);h=[],k=[],(g=e.cases["!"+a]||e.cases["?"])&&(b.$eval(d.change),f(g,function(a){var c=b.$new();k.push(c),a.transclude(c,function(b){var c=a.element;h.push(b),i.enter(b,c.parent(),c)})}))})}}}],Ce=Jc({transclude:"element",priority:500,require:"^ngSwitch",compile:function(a,b,c){return function(a,d,e,f){f.cases["!"+b.ngSwitchWhen]=f.cases["!"+b.ngSwitchWhen]||[],f.cases["!"+b.ngSwitchWhen].push({transclude:c,element:d})}}}),De=Jc({transclude:"element",priority:500,require:"^ngSwitch",compile:function(a,b,c){return function(a,b,d,e){e.cases["?"]=e.cases["?"]||[],e.cases["?"].push({transclude:c,element:b})}}}),Ee=Jc({controller:["$transclude","$element",function(a,b){a(function(a){b.append(a)})}]}),Fe=["$http","$templateCache","$route","$anchorScroll","$compile","$controller","$animator",function(a,b,c,d,e,f,g){return{restrict:"ECA",terminal:!0,link:function(a,b,h){function i(){l&&(l.$destroy(),l=null)}function j(){n.leave(b.contents(),b),i()}function k(){var g=c.current&&c.current.locals,h=g&&g.$template;if(h){j();var i=Xc("<div></div>").html(h).contents();n.enter(i,b);var k,o=e(i),p=c.current;l=p.scope=a.$new(),p.controller&&(g.$scope=l,k=f(p.controller,g),p.controllerAs&&(l[p.controllerAs]=k),b.children().data("$ngControllerController",k)),o(l),l.$emit("$viewContentLoaded"),l.$eval(m),d()}else j()}var l,m=h.onload||"",n=g(a,h);a.$on("$routeChangeSuccess",k),k()}}}],Ge=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],He=q({terminal:!0}),Ie=["$compile","$parse",function(a,d){var e=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b){g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove())},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue==a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+vb(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(z.parent()&&z.remove(),b.val(a),""===a&&o.prop("selected",!0)):r(a)&&o?b.val(""):d.renderUnknownOption(a)},b.bind("change",function(){a.$apply(function(){z.parent()&&z.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new wb(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){K(d,c.$viewValue)||(d=I(c.$viewValue),c.$render())}),b.bind("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,f,h){function i(){var a,d,e,i,j,q,u,z,A,B,C,D,E,F,G={"":[]},H=[""],I=h.$modelValue,J=p(b)||[],K=m?g(J):J,L={},M=!1;if(t)if(r&&x(I)){M=new wb([]);for(var N=0;N<I.length;N++)L[l]=I[N],M.put(r(b,L),I[N])}else M=new wb(I);for(B=0;z=K.length,z>B;B++){if(L[l]=J[m?L[m]=K[B]:B],a=n(b,L)||"",(d=G[a])||(d=G[a]=[],H.push(a)),t)C=M.remove(r?r(b,L):o(b,L))!=c;else{if(r){var O={};O[l]=I,C=r(b,O)===r(b,L)}else C=I===o(b,L);M=M||C}F=k(b,L),F=F===c?"":F,d.push({id:r?r(b,L):m?K[B]:B,label:F,selected:C})}for(t||(v||null===I?G[""].unshift({id:"",label:"",selected:!M}):M||G[""].unshift({id:"?",label:"",selected:!0})),A=0,u=H.length;u>A;A++){for(a=H[A],d=G[a],s.length<=A?(i={element:y.clone().attr("label",a),label:d.label},j=[i],s.push(j),f.append(i.element)):(j=s[A],i=j[0],i.label!=a&&i.element.attr("label",i.label=a)),D=null,B=0,z=d.length;z>B;B++)e=d[B],(q=j[B+1])?(D=q.element,q.label!==e.label&&D.text(q.label=e.label),q.id!==e.id&&D.val(q.id=e.id),D[0].selected!==e.selected&&D.prop("selected",q.selected=e.selected)):(""===e.id&&v?E=v:(E=w.clone()).val(e.id).attr("selected",e.selected).text(e.label),j.push(q={element:E,label:e.label,id:e.id,selected:e.selected}),D?D.after(E):i.element.append(E),D=E);for(B++;j.length>B;)j.pop().element.remove()}for(;s.length>A;)s.pop()[0].element.remove()}var j;if(!(j=u.match(e)))throw Error("Expected ngOptions in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_ (track by _expr_)?' but got '"+u+"'.");var k=d(j[2]||j[1]),l=j[4]||j[6],m=j[5],n=d(j[3]||""),o=d(j[2]?j[1]:l),p=d(j[7]),q=j[8],r=q?d(j[8]):null,s=[[{element:f,label:""}]];v&&(a(v)(b),v.removeClass("ng-scope"),v.remove()),f.html(""),f.bind("change",function(){b.$apply(function(){var a,d,e,g,i,j,k,n,q=p(b)||[],u={};if(t){for(e=[],j=0,n=s.length;n>j;j++)for(a=s[j],i=1,k=a.length;k>i;i++)if((g=a[i].element)[0].selected){if(d=g.val(),m&&(u[m]=d),r)for(var v=0;v<q.length&&(u[l]=q[v],r(b,u)!=d);v++);else u[l]=q[d];e.push(o(b,u))}}else if(d=f.val(),"?"==d)e=c;else if(""==d)e=null;else if(r){for(var v=0;v<q.length;v++)if(u[l]=q[v],r(b,u)==d){e=o(b,u);break}}else u[l]=q[d],m&&(u[m]=d),e=o(b,u);h.$setViewValue(e)})}),h.$render=i,b.$watch(i)}if(k[1]){for(var o,p=k[0],q=k[1],t=j.multiple,u=j.ngOptions,v=!1,w=Xc(b.createElement("option")),y=Xc(b.createElement("optgroup")),z=w.clone(),A=0,B=i.children(),C=B.length;C>A;A++)if(""==B[A].value){o=v=B.eq(A);break}if(p.init(q,v,z),t&&(j.required||j.ngRequired)){var D=function(a){return q.$setValidity("required",!j.required||a&&a.length),a};q.$parsers.push(D),q.$formatters.unshift(D),j.$observe("required",function(){D(q.$viewValue)})}u?n(h,i,q):t?m(h,i,q):l(h,i,q,p)}}}}],Je=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound?c.prop("selected",!1):h=b,e?a.$watch(e,function(a,b){d.$set("value",a),a!==b&&h.removeOption(b),h.addOption(a)}):h.addOption(d.value),c.bind("$destroy",function(){h.removeOption(d.value)})}}}}],Ke=q({restrict:"E",terminal:!0});$(),cb(ed),Xc(b).ready(function(){X(b,Y)})}(window,document),angular.element(document).find("head").append('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak{display:none;}ng\\:form{display:block;}</style>'),function(a,b){"use strict";b.module("bootstrap",[]).directive({dropdownToggle:["$document","$location","$window",function(a,b){var c,d=null;return{restrict:"C",link:function(e,f){e.$watch(function(){return b.path()},function(){c&&c()}),f.parent().bind("click",function(){c&&c()}),f.bind("click",function(b){b.preventDefault(),b.stopPropagation(),b=!1,d&&(b=d===f,c()),b||(f.parent().addClass("open"),d=f,c=function(b){b&&b.preventDefault(),b&&b.stopPropagation(),a.unbind("click",c),f.parent().removeClass("open"),d=c=null},a.bind("click",c))})}}}],tabbable:function(){return{restrict:"C",compile:function(a){var c=b.element('<ul class="nav nav-tabs"></ul>'),d=b.element('<div class="tab-content"></div>');d.append(a.contents()),a.append(c).append(d)},controller:["$scope","$element",function(a,c){var d,e=c.contents().eq(0),f=c.controller("ngModel")||{},g=[];f.$render=function(){var a=this.$viewValue;if((d?d.value!=a:a)&&(d&&(d.paneElement.removeClass("active"),d.tabElement.removeClass("active"),d=null),a)){for(var b=0,c=g.length;c>b;b++)if(a==g[b].value){d=g[b];break}d&&(d.paneElement.addClass("active"),d.tabElement.addClass("active"))}},this.addPane=function(c,h){function i(){l.title=h.title,l.value=h.value||h.title,f.$setViewValue||f.$viewValue&&l!=d||(f.$viewValue=l.value),f.$render()}var j=b.element("<li><a href></a></li>"),k=j.find("a"),l={paneElement:c,paneAttrs:h,tabElement:j};return g.push(l),h.$observe("value",i)(),h.$observe("title",function(){i(),k.text(l.title)})(),e.append(j),j.bind("click",function(b){b.preventDefault(),b.stopPropagation(),f.$setViewValue?a.$apply(function(){f.$setViewValue(l.value),f.$render()}):(f.$viewValue=l.value,f.$render())}),function(){l.tabElement.remove();for(var a=0,b=g.length;b>a;a++)l==g[a]&&g.splice(a,1)}}}]}},tabPane:function(){return{require:"^tabbable",restrict:"C",link:function(a,b,c,d){b.bind("$remove",d.addPane(b,c))}}}})}(window,window.angular),function(a,b,c){"use strict";b.module("ngResource",["ng"]).factory("$resource",["$http","$parse",function(a,d){function e(a,b){this.template=a,this.defaults=b||{},this.urlParams={}}function f(m,n,o){function p(a,b){var c={},b=j({},n,b);return i(b,function(b,e){l(b)&&(b=b());var f;b&&b.charAt&&"@"==b.charAt(0)?(f=b.substr(1),f=d(f)(a)):f=b,c[e]=f}),c}function q(a){k(a||{},this)}var r=new e(m),o=j({},g,o);return i(o,function(d,e){d.method=b.uppercase(d.method);var f="POST"==d.method||"PUT"==d.method||"PATCH"==d.method;q[e]=function(b,c,e,g){function m(){u.$resolved=!0}var n,o={},s=h,t=null;switch(arguments.length){case 4:t=g,s=e;case 3:case 2:if(!l(c)){o=b,n=c,s=e;break}if(l(b)){s=b,t=c;break}s=c,t=e;case 1:l(b)?s=b:f?n=b:o=b;break;case 0:break;default:throw"Expected between 0-4 arguments [params, data, success, error], got "+arguments.length+" arguments."}var u=this instanceof q?this:d.isArray?[]:new q(n),v={};return i(d,function(a,b){"params"!=b&&"isArray"!=b&&(v[b]=k(a))}),v.data=n,r.setUrlParams(v,j({},p(n,d.params||{}),o),d.url),o=a(v),u.$resolved=!1,o.then(m,m),u.$then=o.then(function(a){var b=a.data,c=u.$then,e=u.$resolved;return b&&(d.isArray?(u.length=0,i(b,function(a){u.push(new q(a))})):(k(b,u),u.$then=c,u.$resolved=e)),(s||h)(u,a.headers),a.resource=u,a},t).then,u},q.prototype["$"+e]=function(a,b,d){var g,i=p(this),j=h;switch(arguments.length){case 3:i=a,j=b,g=d;break;case 2:case 1:l(a)?(j=a,g=b):(i=a,j=b||h);case 0:break;default:throw"Expected between 1-3 arguments [params, success, error], got "+arguments.length+" arguments."}q[e].call(this,i,f?this:c,j,g)}}),q.bind=function(a){return f(m,j({},n,a),o)},q}var g={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},h=b.noop,i=b.forEach,j=b.extend,k=b.copy,l=b.isFunction;return e.prototype={setUrlParams:function(a,c,d){var e,f,g=this,h=d||g.template,j=g.urlParams={};i(h.split(/\W/),function(a){a&&RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(h)&&(j[a]=!0)}),h=h.replace(/\\:/g,":"),c=c||{},i(g.urlParams,function(a,d){e=c.hasOwnProperty(d)?c[d]:g.defaults[d],b.isDefined(e)&&null!==e?(f=encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),h=h.replace(RegExp(":"+d+"(\\W|$)","g"),f+"$1")):h=h.replace(RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c
})}),h=h.replace(/\/+$/,""),h=h.replace(/\/\.(?=\w+($|\?))/,"."),a.url=h.replace(/\/\\\./,"/."),i(c,function(b,c){g.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},f}])}(window,window.angular),function(a,b){"use strict";function c(a){var b,c={},a=a.split(",");for(b=0;b<a.length;b++)c[a[b]]=!0;return c}function d(a,c){function d(a,d,g,h){if(d=b.lowercase(d),u[d])for(;p.last()&&v[p.last()];)f("",p.last());t[d]&&p.last()==d&&f("",d),(h=q[d]||!!h)||p.push(d);var i={};g.replace(j,function(a,b,c,d,f){i[b]=e(c||d||f||"")}),c.start&&c.start(d,i,h)}function f(a,d){var e,f=0;if(d=b.lowercase(d))for(f=p.length-1;f>=0&&p[f]!=d;f--);if(f>=0){for(e=p.length-1;e>=f;e--)c.end&&c.end(p[e]);p.length=f}}var g,o,p=[],r=a;for(p.last=function(){return p[p.length-1]};a;){if(o=!0,p.last()&&w[p.last()]?(a=a.replace(RegExp("(.*)<\\s*\\/\\s*"+p.last()+"[^>]*>","i"),function(a,b){return b=b.replace(m,"$1").replace(n,"$1"),c.chars&&c.chars(e(b)),""}),f("",p.last())):(0===a.indexOf("<!--")?(g=a.indexOf("-->"),g>=0&&(c.comment&&c.comment(a.substring(4,g)),a=a.substring(g+3),o=!1)):l.test(a)?(g=a.match(i))&&(a=a.substring(g[0].length),g[0].replace(i,f),o=!1):k.test(a)&&(g=a.match(h))&&(a=a.substring(g[0].length),g[0].replace(h,d),o=!1),o&&(g=a.indexOf("<"),o=0>g?a:a.substring(0,g),a=0>g?"":a.substring(g),c.chars&&c.chars(e(o)))),a==r)throw"Parse Error: "+a;r=a}f()}function e(a){return A.innerHTML=a.replace(/</g,"&lt;"),A.innerText||A.textContent||""}function f(a){return a.replace(/&/g,"&amp;").replace(p,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(a){var c=!1,d=b.bind(a,a.push);return{start:function(a,e,g){a=b.lowercase(a),!c&&w[a]&&(c=a),!c&&1==x[a]&&(d("<"),d(a),b.forEach(e,function(a,c){var e=b.lowercase(c);1!=z[e]||y[e]===!0&&!a.match(o)||(d(" "),d(c),d('="'),d(f(a)),d('"'))}),d(g?"/>":">"))},end:function(a){a=b.lowercase(a),!c&&1==x[a]&&(d("</"),d(a),d(">")),a==c&&(c=!1)},chars:function(a){c||d(f(a))}}}var h=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,i=/^<\s*\/\s*([\w:-]+)[^>]*>/,j=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,k=/^</,l=/^<\s*\//,m=/<\!--(.*?)--\>/g,n=/<!\[CDATA\[(.*?)]]\>/g,o=/^((ftp|https?):\/\/|mailto:|tel:|#)/,p=/([^\#-~| |!])/g,q=c("area,br,col,hr,img,wbr"),r=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),s=c("rp,rt"),t=b.extend({},s,r),u=b.extend({},r,c("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),v=b.extend({},s,c("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),w=c("script,style"),x=b.extend({},q,u,v,t),y=c("background,cite,href,longdesc,src,usemap"),z=b.extend({},y,c("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,span,start,summary,target,title,type,valign,value,vspace,width")),A=document.createElement("pre");b.module("ngSanitize",[]).value("$sanitize",function(a){var b=[];return d(a,g(b)),b.join("")}),b.module("ngSanitize").directive("ngBindHtml",["$sanitize",function(a){return function(b,c,d){c.addClass("ng-binding").data("$binding",d.ngBindHtml),b.$watch(d.ngBindHtml,function(b){b=a(b),c.html(b||"")})}}]),b.module("ngSanitize").filter("linky",function(){var a=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s\.\;\,\(\)\{\}\<\>]/,c=/^mailto:/;return function(d,e){if(!d)return d;var f,h,i,j=d,k=[],l=g(k),m={};for(b.isDefined(e)&&(m.target=e);f=j.match(a);)h=f[0],f[2]==f[3]&&(h="mailto:"+h),i=f.index,l.chars(j.substr(0,i)),m.href=h,l.start("a",m),l.chars(f[0].replace(c,"")),l.end("a"),j=j.substring(i+f[0].length);return l.chars(j),k.join("")}})}(window,window.angular),Logger.setLevel(Logger.INFO),window.LogBuffer=100,"localStorage"in window){if("logLevel"in window.localStorage){var logLevel=JSON.parse(window.localStorage.logLevel);Logger.setLevel(logLevel)}if("showLog"in window.localStorage){var showLog=window.localStorage.showLog;if("true"===showLog){var container=document.getElementById("log-panel");container&&container.setAttribute("style","bottom: 50%;")}}if("logBuffer"in window.localStorage){var logBuffer=window.localStorage.logBuffer;window.LogBuffer=parseInt(logBuffer)}else window.localStorage.logBuffer=window.LogBuffer}var consoleLogger=null;"console"in window&&(window.JSConsole=window.console,consoleLogger=function(a,b){var c=window.JSConsole,d=c.log;if(b.name&&(a[0]="["+b.name+"] "+a[0]),b.level===Logger.WARN&&"warn"in c?d=c.warn:b.level===Logger.ERROR&&"error"in c?d=c.error:b.level===Logger.INFO&&"info"in c&&(d=c.info),d&&d.apply)try{d.apply(c,a)}catch(e){c.log(a)}}),Logger.getType=function(a){return Object.prototype.toString.call(a).slice(8,-1)},Logger.isError=function(a){return a&&"Error"===Logger.getType(a)},Logger.isArray=function(a){return a&&"Array"===Logger.getType(a)},Logger.isObject=function(a){return a&&"Object"===Logger.getType(a)},Logger.isString=function(a){return a&&"String"===Logger.getType(a)},window.logInterceptors=[],Logger.formatStackTraceString=function(a){var b=a.split("\n");if(b.length>100){var c=20,d=b.length-2*c;b.splice(c,d,">>> snipped "+d+" frames <<<")}for(var e='<div class="log-stack-trace">\n',f=0;f<b.length;f++){var g=b[f];0!==g.trim().length&&(e=e+"<p>"+g+"</p>\n")}return e+="</div>\n"},Logger.setHandler(function(a,b){function c(){e&&(e.appendChild(f),e.childNodes.length>parseInt(window.LogBuffer)&&e.removeChild(e.firstChild),r&&(e.scrollTop=e.scrollHeight)),consoleLogger&&consoleLogger(a,b);for(var c=window.logInterceptors,d=0;d<c.length;d++)c[d](b.level.name,g)}var d=document.getElementById("log-panel"),e=document.getElementById("log-panel-statements"),f=document.createElement("li"),g="",h=[];if("ERROR"===b.level.name&&1===a.length&&Logger.isString(a[0])){var i=a[0],j=i.split(/\n/);if(j.length>1){var k="Error: Jolokia-Error: ";if(0==j[0].search(k)){var l=j[0].slice(k.length);window.JSConsole.info("msg: ",l);try{var m=JSON.parse(l),n=new Error;n.message=m.error,n.stack=m.stacktrace.replace("\\t","&nbsp;&nbsp").replace("\\n","\n"),a=[n]}catch(o){}}else{var n=new Error;n.message=j[0],n.stack=i,a=[n]}}}for(var p=0;p<a.length;p++){var i=a[p];if(Logger.isArray(i)||Logger.isObject(i)){var q="";try{q='<pre data-language="javascript">'+JSON.stringify(i,null,2)+"</pre>"}catch(n){q=i+" (failed to convert) "}g+=q}else Logger.isError(i)?("message"in i&&(g+=i.message),"stack"in i&&h.push(function(){var a=Logger.formatStackTraceString(i.stack),c=Logger;b.name&&(c=Logger.get(b.name)),c.info("Stack trace: ",a)})):g+=i}b.name&&(g='[<span class="green">'+b.name+"</span>] "+g),f.innerHTML=g,f.className=b.level.name;var r=!1;d&&((d.scrollHeight=0)&&(r=!0),e.scrollTop>e.scrollHeight-d.scrollHeight-200&&(r=!0)),c(),h.forEach(function(a){a()})}),window.onerror=function(a,b,c,d,e){if(e&&Logger.isObject(e))Logger.get("Window").error(e);else{var f=' (<a href="'+b+":"+c+'">'+b+":"+c;d&&(f=f+":"+d),f+="</a>)",Logger.get("Window").error(a,f)}return!0},window.console={log:Logger.debug,warn:Logger.warn,error:Logger.error,info:Logger.info},angular.module("elasticjs.service",[]).factory("ejsResource",["$http",function(a){return function(b){var c=window.ejs||{},d=function(a,b,c){return a.then(function(a){return(b||angular.noop)(a.data),a.data},function(a){return(c||angular.noop)(a.data),a.data})};return angular.isFunction(b)?b={server:b()}:b!==Object(b)&&(b={server:b}),null==b.server&&(b.server=""),c.client={server:function(a){return null==a?b.server:(b.server=a,this)},post:function(c,e,f,g){c=b.server+c;var h={url:c,data:e,method:"POST"};return d(a(angular.extend(h,b)),f,g)},get:function(c,e,f,g){c=b.server+c;var h={url:c,params:e,method:"GET"};return d(a(angular.extend(h,b)),f,g)},put:function(c,e,f,g){c=b.server+c;var h={url:c,data:e,method:"PUT"};return d(a(angular.extend(h,b)),f,g)},del:function(c,e,f,g){c=b.server+c;var h={url:c,data:e,method:"DELETE"};return d(a(angular.extend(h,b)),f,g)},head:function(c,d,e,f){c=b.server+c;var g={url:c,params:d,method:"HEAD"};return a(angular.extend(g,b)).then(function(a){return(e||angular.noop)(a.headers()),a.headers()},function(){return void(f||angular.noop)(void 0)})}},c}}]);var hawtioPluginLoader=function(a,b){var c=Logger.get("PluginLoader");return a.log=c,a.urls=[],a.modules=[],a.tasks=[],a.registerPreBootstrapTask=function(b){a.tasks.push(b)},a.addModule=function(b){c.debug("Adding module: "+b),a.modules.push(b)},a.addUrl=function(b){c.debug("Adding URL: "+b),a.urls.push(b)},a.getModules=function(){return a.modules.clone()},a.parseQueryString=function(a){var c=null,d=b.location.href.split("?");d&&(c=d.last(d.length-1).join(""));var e=a||c||"?",f=-1;angular.isArray(e)&&(e=e[0]),f=e.indexOf("?"),f>=0&&(e=e.substr(f+1)),f=e.indexOf("#/"),f>0&&(e=e.substr(0,f));var g={};return e.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(a,b,c){(g[b]=g[b]||[]).push(c)}),g},a.loaderCallback=null,a.setLoaderCallback=function(b){a.loaderCallback=b,c.debug("Setting callback to : ",a.loaderCallback)},a.loadPlugins=function(b){var d=a.loaderCallback,e={},f=a.urls.length,g=f,h=function(){a.tasks.push(b);var c=a.tasks.length,d=function(){var b=a.tasks.shift();b?(a.log.debug("Executing task ",c-a.tasks.length),b(d)):a.log.debug("All tasks executed")};d()},i=function(){var a=0;$.each(e,function(b,c){a+=c.Scripts.length});var b=a,f=function(){$.ajaxSetup({async:!0}),a-=1,d&&d.scriptLoaderCallback(d,b,a+1),0==a&&h()};a>0?$.each(e,function(a,b){b.Scripts.forEach(function(a){var d=b.Context+"/"+a;c.debug("Fetching script: ",d),$.ajaxSetup({async:!1}),$.getScript(d).done(function(){c.debug("Loaded script: ",d)}).fail(function(a,b,e){c.info('Failed loading script: "',e.message,'" (<a href="',d,":",e.lineNumber,'">',d,":",e.lineNumber,"</a>)")}).always(f)})}):($.ajaxSetup({async:!0}),h())};if(0==f)i();else{var j=function(){f-=1,d&&d.urlLoaderCallback(d,g,f+1),0==f&&i()},k=new RegExp(/^jolokia:/);$.each(a.urls,function(a,b){if(k.test(b)){var d=b.split(":");d=d.reverse(),d.pop(),b=d.pop();var f=d.reverse().join(":"),g=new Jolokia(b);try{var h=g.getAttribute(f,null);$.extend(e,h)}catch(i){}j()}else c.debug("Trying url: ",b),$.get(b,function(a){if(angular.isString(a))try{a=angular.fromJson(a)}catch(b){return}$.extend(e,a)}).always(function(){j()})})}},a.debug=function(){c.debug("urls and modules"),c.debug(a.urls),c.debug(a.modules)},a.setLoaderCallback({scriptLoaderCallback:function(a,b,d){c.debug("Total scripts: ",b," Remaining: ",d)},urlLoaderCallback:function(a,b,d){c.debug("Total URLs: ",b," Remaining: ",d)}}),a}(hawtioPluginLoader||{},window,void 0);!function(){var a=function(a){function b(d){if(!(this instanceof arguments.callee))return new b(d);this.CLIENT_VERSION="1.1.4";var e=[],f={},g=!1;"string"==typeof d&&(d={url:d}),a.extend(f,q,d),this.request=function(c,d){var e=a.extend({},f,d);p(e.url,"No URL given");var g={};if(a.each(["username","password","timeout"],function(a,b){e[b]&&(g[b]=e[b])}),g.username&&g.password&&(window.btoa&&(g.beforeSend=function(a){var b=g.username+":"+g.password;a.setRequestHeader("Authorization","Basic "+window.btoa(b))}),g.xhrFields={withCredentials:!0}),"post"===i(c,e)?(a.extend(g,s),g.data=JSON.stringify(c),g.url=l(e.url)):(a.extend(g,r),g.dataType=e.jsonp?"jsonp":"json",g.url=e.url+"/"+k(c)),g.url=j(g.url,e),e.ajaxError&&(g.error=e.ajaxError),e.success){var m=h(e.success),n=h(e.error);return g.success=function(c){for(var d=a.isArray(c)?c:[c],e=0;e<d.length;e++){var f=d[e];b.isError(f)?n(f,e):m(f,e)}},a.ajax(g),null}if(e.jsonp)throw Error("JSONP is not supported for synchronous requests");g.async=!1;var q=a.ajax(g);return o(q)?a.parseJSON(q.responseText):null},this.register=function(){if(arguments.length<2)throw"At a least one request must be provided";var b,c=arguments[0],d=Array.prototype.slice.call(arguments,1);if("object"==typeof c){if(c.success&&c.error)b={success:c.success,error:c.error};else{if(!c.callback)throw"Either 'callback' or ('success' and 'error') callback must be provided when registering a Jolokia job";b={callback:c.callback}}b=a.extend(b,{config:c.config,onlyIfModified:c.onlyIfModified})}else{if("function"!=typeof c)throw"First argument must be either a callback func or an object with 'success' and 'error' attributes";b={success:null,error:null,callback:c}}if(!d)throw"No requests given";b.requests=d;var f=e.length;return e[f]=b,f},this.unregister=function(a){a<e.length&&(e[a]=void 0)},this.jobs=function(){for(var a=[],b=e.length,c=0;b>c;c++)e[c]&&a.push(c);return a},this.start=function(a){if(a=a||f.fetchInterval||3e4,g){if(a===f.fetchInterval)return;this.stop()}f.fetchInterval=a,this.timerId=setInterval(c(this,e),a),g=!0},this.stop=function(){(g||void 0==this.timerId)&&(clearInterval(this.timerId),this.timerId=null,g=!1)},this.isRunning=function(){return g}}function c(a,b){return function(){var c,h,i=[],j=[],k=b.length,l=[];for(c=0;k>c;c++){var m=b[c];if(m){var n=m.requests.length;if(m.success){var o=g(m,c),p=f(m,c);for(h=0;n>h;h++)l.push(d(m,h)),j.push(o),i.push(p)}else{var q=e(m,a);for(h=0;n-1>h;h++)l.push(d(m,h)),j.push(q.cb),i.push(q.cb);l.push(d(m,n-1)),j.push(q.lcb),i.push(q.lcb)}}}var r={success:function(b,c){return j[c].apply(a,[b,c])},error:function(b,c){return i[c].apply(a,[b,c])}};return a.request(l,r)}}function d(b,c){var d=b.requests[c],e=b.config||{},f=b.onlyIfModified&&b.lastModified?{ifModifiedSince:b.lastModified}:{};return d.config=a.extend({},e,d.config,f),d}function e(a,b){function c(a){304!=a.status&&((0==f||a.timestamp<f)&&(f=a.timestamp),d.push(a))}var d=[],e=a.callback,f=0;return{cb:c,lcb:function(g){c(g),d.length>0&&(a.lastModified=f,e.apply(b,d))}}}function f(a,b){var c=a.error;return function(a,d){304!=a.status&&c&&c(a,b,d)}}function g(a,b){var c=a.success;return function(d,e){c&&(a.onlyIfModified&&(a.lastModified=d.timestamp),c(d,b,e))}}function h(b){if(null==b)return function(a){console.warn("Ignoring response "+JSON.stringify(a))};if("ignore"===b)return function(){};var c=a.isArray(b)?b:[b];return function(a,b){c[b%c.length](a,b)}}function i(b,c){var d,e=c&&c.method?c.method.toLowerCase():null;if(e){if("get"===e){if(a.isArray(b))throw new Error("Cannot use GET with bulk requests");if("read"===b.type.toLowerCase()&&a.isArray(b.attribute))throw new Error("Cannot use GET for read with multiple attributes");if(b.target)throw new Error("Cannot use GET request with proxy mode");if(b.config)throw new Error("Cannot use GET with request specific config")}d=e}else d=a.isArray(b)||b.config||"read"===b.type.toLowerCase()&&a.isArray(b.attribute)||b.target?"post":"get";if(c.jsonp&&"post"===d)throw new Error("Can not use JSONP with POST requests");return d}function j(b,c){var d=b.indexOf("?")>0?"&":"?";return a.each(t,function(a,e){null!=c[e]&&(b+=d+e+"="+c[e],d="&")}),b}function k(c){var d=c.type;p(d,"No request type given for building a GET request"),d=d.toLowerCase();var e=u[d];p(e,"Unknown request type "+d);var f=e(c),g=f.parts||{},h=d;return a.each(g,function(a,c){h+="/"+b.escape(c)}),f.path&&(h+=("/"==f.path[0]?"":"/")+f.path),h}function l(a){return a.replace(/\/*$/,"/")}function m(b){if(null==b)return"[null]";if(a.isArray(b)){for(var c="",d=0;d<b.length;d++)c+=null==b?"[null]":n(b[d]),d<b.length-1&&(c+=",");return c}return n(b)}function n(a){return"string"==typeof a&&0==a.length?'""':a.toString()}function o(a){try{return!a.status&&"file:"===location.protocol||a.status>=200&&a.status<300||304===a.status||1223===a.status}catch(b){}return!1}function p(a,b){if(null==a)throw new Error(b)}var q={type:"POST",jsonp:!1},r={type:"GET"},s={type:"POST",processData:!1,dataType:"json",contentType:"text/json"},t=["maxDepth","maxCollectionSize","maxObjects","ignoreErrors","canonicalNaming","serializeException","includeStackTrace","ifModifiedSince"],u={read:function(a){return null==a.attribute?{parts:[a.mbean]}:{parts:[a.mbean,a.attribute],path:a.path}},write:function(a){return{parts:[a.mbean,a.attribute,m(a.value)],path:a.path}},exec:function(b){var c=[b.mbean,b.operation];return b.arguments&&b.arguments.length>0&&a.each(b.arguments,function(a,b){c.push(m(b))}),{parts:c}},version:function(){return{}},search:function(a){return{parts:[a.mbean]}},list:function(a){return{path:a.path}}};return b.prototype.escape=b.escape=function(a){return encodeURIComponent(a.replace(/!/g,"!!").replace(/\//g,"!/"))},b.prototype.isError=b.isError=function(a){return null==a.status||200!=a.status},b};!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):a.Jolokia=b(a.jQuery)}(this,function(b){return a(b)})}(),function(a){function b(a){return a}function c(){}function d(a){return Math.floor(a/1e3)}function e(a){{var b=a.indexOf("|"),c=a.substring(0,b),d=c.lastIndexOf(","),e=c.lastIndexOf(",",d-1),f=c.lastIndexOf(",",e-1);1e3*c.substring(f+1,e),1e3*c.substring(d+1)}return a.substring(b+1).split(",").slice(1).map(function(a){return+a})}function f(a){if(!(a instanceof c))throw new Error("invalid context");this.context=a}function g(a,b){return function(c,d,e,f){a(new Date(+c+b),new Date(+d+b),e,f)}}function h(a,b){f.call(this,a),b=+b;var c=b+"";this.valueOf=function(){return b},this.toString=function(){return c}}function i(a,b){function c(b,c){if(c instanceof f){if(b.context!==c.context)throw new Error("mismatch context")}else c=new h(b.context,c);f.call(this,b.context),this.left=b,this.right=c,this.toString=function(){return b+" "+a+" "+c}}var d=c.prototype=Object.create(f.prototype);return d.valueAt=function(a){return b(this.left.valueAt(a),this.right.valueAt(a))},d.shift=function(a){return new c(this.left.shift(a),this.right.shift(a))},d.on=function(a,b){return arguments.length<2?this.left.on(a):(this.left.on(a,b),this.right.on(a,b),this)},function(a){return new c(this,a)}}function j(a){return 16777214&a}function k(a){return(a+1&16777214)-1}function l(a){a.style("position","absolute").style("top",0).style("bottom",0).style("width","1px").style("pointer-events","none")}function m(a){return a+"px"}var n=a.cubism={version:"1.2.0"},o=0;n.option=function(a,b){var c=n.options(a);return c.length?c[0]:b},n.options=function(a,b){for(var c,d=location.search.substring(1).split("&"),e=[],f=-1,g=d.length;++f<g;)(c=d[f].split("="))[0]==a&&e.push(decodeURIComponent(c[1]));return e.length||arguments.length<2?e:b},n.context=function(){function a(){var a=Date.now();return d=new Date(Math.floor((a-l-m)/j)*j),b=new Date(d-k*j),f=new Date(Math.floor((a-l)/j)*j),e=new Date(f-k*j),p.domain([b,d]),i}var b,d,e,f,g,h,i=new c,j=1e4,k=1440,l=5e3,m=5e3,n=d3.dispatch("prepare","beforechange","change","focus","start","stop"),p=i.scale=d3.time.scale().range([0,k]);return i.start=function(){g&&clearTimeout(g);var a=+f+l-Date.now();return m>a&&(a+=j),g=setTimeout(function c(){f=new Date(Math.floor((Date.now()-l)/j)*j),e=new Date(f-k*j),n.prepare.call(i,e,f),setTimeout(function(){p.domain([b=e,d=f]),n.beforechange.call(i,e,f),n.change.call(i,e,f),n.focus.call(i,h)},m),g=setTimeout(c,j)},a),n.start.call(i),i},i.stop=function(){return g=clearTimeout(g),n.stop.call(i),i},g=setTimeout(i.start,10),i.step=function(b){return arguments.length?(j=+b,a()):j},i.size=function(b){return arguments.length?(p.range([0,k=+b]),a()):k},i.serverDelay=function(b){return arguments.length?(l=+b,a()):l},i.clientDelay=function(b){return arguments.length?(m=+b,a()):m},i.focus=function(a){return n.focus.call(i,h=a),i},i.on=function(a,c){return arguments.length<2?n.on(a):(n.on(a,c),null!=c&&(/^prepare(\.|$)/.test(a)&&c.call(i,e,f),/^beforechange(\.|$)/.test(a)&&c.call(i,b,d),/^change(\.|$)/.test(a)&&c.call(i,b,d),/^focus(\.|$)/.test(a)&&c.call(i,h)),i)},d3.select(window).on("keydown.context-"+ ++o,function(){switch(!d3.event.metaKey&&d3.event.keyCode){case 37:null==h&&(h=k-1),h>0&&i.focus(--h);break;case 39:null==h&&(h=k-2),k-1>h&&i.focus(++h);break;default:return}d3.event.preventDefault()}),a()};var p=n.context.prototype=c.prototype;n.registerPlugin=function(a,b){p[a]=b},p.constant=function(a){return new h(this,+a)},p.cube=function(a){arguments.length||(a="");var b={},c=this;return b.metric=function(b){return c.metric(function(c,d,e,f){d3.json(a+"/1.0/metric?expression="+encodeURIComponent(b)+"&start="+q(c)+"&stop="+q(d)+"&step="+e,function(a){return a?void f(null,a.map(function(a){return a.value})):f(new Error("unable to load data"))})},b+="")},b.toString=function(){return a},b};var q=d3.time.format.iso;p.graphite=function(a){arguments.length||(a="");var b={},c=this;return b.metric=function(b){var f="sum",g=c.metric(function(c,g,h,i){var j=b;1e4!==h&&(j="summarize("+j+",'"+(h%36e5?h%6e4?h+"sec":h/6e4+"min":h/36e5+"hour")+"','"+f+"')"),d3.text(a+"/render?format=raw&target="+encodeURIComponent("alias("+j+",'')")+"&from="+d(c-2*h)+"&until="+d(g-1e3),function(a){return a?void i(null,e(a)):i(new Error("unable to load data"))})},b+="");return g.summarize=function(a){return f=a,g},g},b.find=function(b,c){d3.json(a+"/metrics/find?format=completer&query="+encodeURIComponent(b),function(a){return a?void c(null,a.metrics.map(function(a){return a.path})):c(new Error("unable to find metrics"))})},b.toString=function(){return a},b};var r=f.prototype;n.metric=f,r.valueAt=function(){return 0/0},r.alias=function(a){return this.toString=function(){return a},this},r.extent=function(){for(var a,b=0,c=this.context.size(),d=1/0,e=-1/0;++b<c;)a=this.valueAt(b),d>a&&(d=a),a>e&&(e=a);return[d,e]},r.on=function(){return arguments.length<2?null:this},r.shift=function(){return this},r.on=function(){return arguments.length<2?null:this},p.metric=function(a,b){function c(b,c){var d=Math.min(n,Math.round((b-l)/m));if(d&&!h){h=!0,d=Math.min(n,d+s);var e=new Date(c-d*m);a(e,c,m,function(a,b){if(h=!1,a)return console.warn(a);for(var d=isFinite(l)?Math.round((e-l)/m):0,f=0,g=b.length;g>f;++f)p[f+d]=b[f];q.change.call(j,l,c)})}}function d(a,b){isFinite(l)||(l=a),p.splice(0,Math.max(0,Math.min(n,Math.round((a-l)/m)))),l=a,e=b}var e,h,i=this,j=new f(i),k=".metric-"+ ++o,l=-1/0,m=i.step(),n=i.size(),p=[],q=d3.dispatch("change"),r=0;return j.valueAt=function(a){return p[a]},j.shift=function(b){return i.metric(g(a,+b))},j.on=function(a,b){return arguments.length?(null==b?null!=q.on(a)&&0==--r&&i.on("prepare"+k,null).on("beforechange"+k,null):null==q.on(a)&&1==++r&&i.on("prepare"+k,c).on("beforechange"+k,d),q.on(a,b),null!=b&&/^change(\.|$)/.test(a)&&b.call(i,l,e),j):q.on(a)},arguments.length>1&&(j.toString=function(){return b}),j};var s=6,t=h.prototype=Object.create(f.prototype);t.valueAt=function(){return+this},t.extent=function(){return[+this,+this]},r.add=i("+",function(a,b){return a+b}),r.subtract=i("-",function(a,b){return a-b}),r.multiply=i("*",function(a,b){return a*b}),r.divide=i("/",function(a,b){return a/b}),p.horizon=function(){function a(a){a.on("mousemove.horizon",function(){c.focus(Math.round(d3.mouse(this)[0]))}).on("mouseout.horizon",function(){c.focus(null)}),a.append("canvas").attr("width",f).attr("height",g),a.append("span").attr("class","title").text(k),a.append("span").attr("class","value"),a.each(function(a,k){function n(a){A.save();var b=v.extent();r=b.every(isFinite),null!=x&&(b=x);var i=0,j=Math.max(-b[0],b[1]);if(this===c){if(j==q){i=f-s;var k=(a-y)/z;if(f>k){var l=e.getContext("2d");l.clearRect(0,0,f,g),l.drawImage(A.canvas,k,0,f-k,g,0,0,f-k,g),A.clearRect(0,0,f,g),A.drawImage(l.canvas,0,0)}}y=a}h.domain([0,q=j]),A.clearRect(i,0,f-i,g);for(var m,n=0;C>n;++n){A.fillStyle=w[C+n];var o=(n-C+1)*g;h.range([C*g+o,o]),o=h(0);for(var p,t=i,u=f;u>t;++t)p=v.valueAt(t),0>=p?m=!0:A.fillRect(t,p=h(p),1,o-p)}if(m){"offset"===d&&(A.translate(0,g),A.scale(1,-1));for(var n=0;C>n;++n){A.fillStyle=w[C-1-n];var o=(n-C+1)*g;h.range([C*g+o,o]),o=h(0);for(var p,t=i,u=f;u>t;++t)p=v.valueAt(t),p>=0||A.fillRect(t,h(-p),1,o-h(-p))}}A.restore()}function p(a){null==a&&(a=f-1);var b=v.valueAt(a);B.datum(b).text(isNaN(b)?null:l)}var q,r,t=this,u=++o,v="function"==typeof i?i.call(t,a,k):i,w="function"==typeof m?m.call(t,a,k):m,x="function"==typeof j?j.call(t,a,k):j,y=-1/0,z=c.step(),A=d3.select(t).select("canvas"),B=d3.select(t).select(".value"),C=w.length>>1;A.datum({id:u,metric:v}),A=A.node().getContext("2d"),c.on("change.horizon-"+u,n),c.on("focus.horizon-"+u,p),v.on("change.horizon-"+u,function(a,c){n(a,c),p(),r&&v.on("change.horizon-"+u,b)})})}var c=this,d="offset",e=document.createElement("canvas"),f=e.width=c.size(),g=e.height=30,h=d3.scale.linear().interpolate(d3.interpolateRound),i=b,j=null,k=b,l=d3.format(".2s"),m=["#08519c","#3182bd","#6baed6","#bdd7e7","#bae4b3","#74c476","#31a354","#006d2c"];return a.remove=function(a){function b(a){a.metric.on("change.horizon-"+a.id,null),c.on("change.horizon-"+a.id,null),c.on("focus.horizon-"+a.id,null)}a.on("mousemove.horizon",null).on("mouseout.horizon",null),a.selectAll("canvas").each(b).remove(),a.selectAll(".title,.value").remove()},a.mode=function(b){return arguments.length?(d=b+"",a):d},a.height=function(b){return arguments.length?(e.height=g=+b,a):g},a.metric=function(b){return arguments.length?(i=b,a):i},a.scale=function(b){return arguments.length?(h=b,a):h},a.extent=function(b){return arguments.length?(j=b,a):j},a.title=function(b){return arguments.length?(k=b,a):k},a.format=function(b){return arguments.length?(l=b,a):l},a.colors=function(b){return arguments.length?(m=b,a):m},a},p.comparison=function(){function a(a){a.on("mousemove.comparison",function(){c.focus(Math.round(d3.mouse(this)[0]))}).on("mouseout.comparison",function(){c.focus(null)}),a.append("canvas").attr("width",d).attr("height",e),a.append("span").attr("class","title").text(l),a.append("span").attr("class","value primary"),a.append("span").attr("class","value change"),a.each(function(a,l){function r(a){B.save(),B.clearRect(0,0,d,e);var b=x.extent(),g=y.extent(),h=null==z?b:z;f.domain(h).range([e,0]),u=b.concat(g).every(isFinite);var i=a/c.step()&1?k:j;B.fillStyle=p[2];for(var l=0,m=d;m>l;++l){var n=f(x.valueAt(l)),o=f(y.valueAt(l));o>n&&B.fillRect(i(l),n,1,o-n)}for(B.fillStyle=p[0],l=0;m>l;++l){var n=f(x.valueAt(l)),o=f(y.valueAt(l));n>o&&B.fillRect(i(l),o,1,n-o)}for(B.fillStyle=p[3],l=0;m>l;++l){var n=f(x.valueAt(l)),o=f(y.valueAt(l));o>=n&&B.fillRect(i(l),n,1,q)}for(B.fillStyle=p[1],l=0;m>l;++l){var n=f(x.valueAt(l)),o=f(y.valueAt(l));n>o&&B.fillRect(i(l),n-q,1,q)}B.restore()}function s(a){null==a&&(a=d-1);var b=x.valueAt(a),c=y.valueAt(a),e=(b-c)/c;C.datum(b).text(isNaN(b)?null:m),D.datum(e).text(isNaN(e)?null:n).attr("class","value change "+(e>0?"positive":0>e?"negative":""))}function t(a,c){r(a,c),s(),u&&(x.on("change.comparison-"+w,b),y.on("change.comparison-"+w,b))}var u,v=this,w=++o,x="function"==typeof g?g.call(v,a,l):g,y="function"==typeof h?h.call(v,a,l):h,z="function"==typeof i?i.call(v,a,l):i,A=d3.select(v),B=A.select("canvas"),C=A.select(".value.primary"),D=A.select(".value.change");B.datum({id:w,primary:x,secondary:y}),B=B.node().getContext("2d"),x.on("change.comparison-"+w,t),y.on("change.comparison-"+w,t),c.on("change.comparison-"+w,r),c.on("focus.comparison-"+w,s)})}var c=this,d=c.size(),e=120,f=d3.scale.linear().interpolate(d3.interpolateRound),g=function(a){return a[0]},h=function(a){return a[1]},i=null,l=b,m=u,n=v,p=["#9ecae1","#225b84","#a1d99b","#22723a"],q=1.5;return a.remove=function(a){function b(a){a.primary.on("change.comparison-"+a.id,null),a.secondary.on("change.comparison-"+a.id,null),c.on("change.comparison-"+a.id,null),c.on("focus.comparison-"+a.id,null)}a.on("mousemove.comparison",null).on("mouseout.comparison",null),a.selectAll("canvas").each(b).remove(),a.selectAll(".title,.value").remove()},a.height=function(b){return arguments.length?(e=+b,a):e},a.primary=function(b){return arguments.length?(g=b,a):g},a.secondary=function(b){return arguments.length?(h=b,a):h},a.scale=function(b){return arguments.length?(f=b,a):f},a.extent=function(b){return arguments.length?(i=b,a):i},a.title=function(b){return arguments.length?(l=b,a):l},a.formatPrimary=function(b){return arguments.length?(m=b,a):m},a.formatChange=function(b){return arguments.length?(n=b,a):n},a.colors=function(b){return arguments.length?(p=b,a):p},a.strokeWidth=function(b){return arguments.length?(q=b,a):q},a};var u=d3.format(".2s"),v=d3.format("+.0%");p.axis=function(){function a(f){var g,h=++o,i=f.append("svg").datum({id:h}).attr("width",b.size()).attr("height",Math.max(28,-a.tickSize())).append("g").attr("transform","translate(0,"+("top"===d.orient()?27:4)+")").call(d);b.on("change.axis-"+h,function(){i.call(d),g||(g=d3.select(i.node().appendChild(i.selectAll("text").node().cloneNode(!0))).style("display","none").text(null))}),b.on("focus.axis-"+h,function(a){if(g)if(null==a)g.style("display","none"),i.selectAll("text").style("fill-opacity",null);else{g.style("display",null).attr("x",a).text(e(c.invert(a)));var b=g.node().getComputedTextLength()+6;i.selectAll("text").style("fill-opacity",function(d){return Math.abs(c(d)-a)<b?0:1})}})}var b=this,c=b.scale,d=d3.svg.axis().scale(c),e=b.step()<6e4?w:b.step()<864e5?x:y;return a.remove=function(a){function c(a){b.on("change.axis-"+a.id,null),b.on("focus.axis-"+a.id,null)}a.selectAll("svg").each(c).remove()},d3.rebind(a,d,"orient","ticks","tickSubdivide","tickSize","tickPadding","tickFormat")};var w=d3.time.format("%I:%M:%S %p"),x=d3.time.format("%I:%M %p"),y=d3.time.format("%B %d");p.rule=function(){function a(a){var b=++o,e=a.append("div").datum({id:b}).attr("class","line").call(l);a.each(function(b,e){function f(){for(var b=[],d=0,e=c.size();e>d;++d)i.valueAt(d)&&b.push(d);var f=a.selectAll(".metric").data(b);f.exit().remove(),f.enter().append("div").attr("class","metric line").call(l),f.style("left",m)}var g=this,h=++o,i="function"==typeof d?d.call(g,b,e):d;i&&(c.on("change.rule-"+h,f),i.on("change.rule-"+h,f))}),c.on("focus.rule-"+b,function(a){e.datum(a).style("display",null==a?"none":null).style("left",m)})}var c=this,d=b;return a.remove=function(a){function b(a){c.on("focus.rule-"+a.id,null)}a.selectAll(".line").each(b).remove()},a.metric=function(b){return arguments.length?(d=b,a):d},a}}(this),function(){var a=function(a,b){var c="1.1.4",d=function(a,c){function d(a,c){if(a instanceof b)return a;var d;if("string"==typeof a){if(d={url:a},c)for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e])}else d=a;return new b(d)}function e(a,b,c){return function(d,e,f,g){d=+d,e=+e;var h=[],i=e,j=a.length,k=0,l=j>0?a[j-1].time:void 0;if(!j||l>e){for(var m=d;e>=m;m+=f)h.push(0/0);return g(null,h)}for(;i>a[0].time+f;)h.unshift(0/0),i-=f;for(;i>=d&&i>=l;){for(;a[k].time>i;)k++;h.unshift(a[k].value),i-=f}for(;i>=d;)h.unshift(0/0),i-=f;if(j>c)if(b){for(var n=a[c].time-b,o=c;j>o&&a[o].time>n;)o++;a.length=o}else a.length=c;g(null,h)}}var f={},g=this,h=d(a,c),i=5e3;try{g.on("start",function(){h.start()}),g.on("stop",function(){h.stop()})}catch(j){}return f.metric=function(){var a,b=[],c=arguments.length,d={},f=arguments.length-1,i=arguments[f];"string"==typeof i&&(a=i,c=f),"object"!=typeof i||i.type||(d=i,a=d.name,c=f),a||"function"==typeof arguments[0]||(a=arguments[0].mbean);var j=g.metric(e(b,d.keepDelay,g.width),a);if(d.delta){var k=j.shift(-d.delta);j=j.subtract(k),a&&(j.toString=function(){return a})}if("function"==typeof arguments[0]){for(var l=arguments[0],m=function(){for(var a=!1,c=0;c<arguments.length;c++)if(h.isError(arguments[c])){a=!0;break}b.unshift({time:Date.now(),value:a?0/0:l.apply(j,arguments)})},n=[m],o=1;c>o;o++)n.push(arguments[o]);h.register.apply(h,n)}else{var p=arguments[0];h.register(function(a){b.unshift({time:Date.now(),value:h.isError(a)?0/0:Number(a.value)})},p)}return j},f.start=function(a){a=a||i,h.start(a)},f.stop=function(){h.stop()},f.isRunning=function(){return h.isRunning()},f};return d.VERSION=c,a.context.prototype.jolokia=d,d};!function(b){"function"==typeof define&&define.amd?define(["cubism","jolokia"],function(b,c){return a(b,c)}):b.Jolokia&&b.cubism?a(b.cubism,b.Jolokia):console.error("No "+(b.cubism?"Cubism":"Jolokia")+" definition found. Please include jolokia.js and cubism.js before jolokia-cubism.js")
}(this)}(),function(){var a=function(a,b){function c(b,c,d,e){3===arguments.length&&a.isPlainObject(d)?(e=d,d=null):2==arguments.length&&a.isPlainObject(c)&&(e=c,c=null,d=null);var f={type:"read",mbean:b,attribute:c};return i(f,d),j(this.request(f,k(e)),e)}function d(b,c,d,e,f){4===arguments.length&&a.isPlainObject(e)&&(f=e,e=null);var g={type:"write",mbean:b,attribute:c,value:d};return i(g,e),j(this.request(g,k(f)),f)}function e(b,c){var d,e={type:"exec",mbean:b,operation:c},f=arguments.length;if(arguments.length>2&&a.isPlainObject(arguments[arguments.length-1])&&(d=arguments[arguments.length-1],f=arguments.length-1),f>2){for(var g=[],h=2;f>h;h++)g[h-2]=arguments[h];e.arguments=g}return j(this.request(e,k(d)),d)}function f(a,b){var c={type:"search",mbean:a};return j(this.request(c,k(b)),b)}function g(a){return j(this.request({type:"version"},k(a)),a)}function h(b,c){1==arguments.length&&!a.isArray(b)&&a.isPlainObject(b)&&(c=b,b=null);var d={type:"list"};return i(d,b),j(this.request(d,k(c)),c)}function i(c,d){null!=d&&(c.path=a.isArray(d)?a.map(d,b.escape).join("/"):d)}function j(a,b){if(null==a)return null;if(200==a.status)return a.value;if(b&&b.error)return b.error(a);throw new Error("Jolokia-Error: "+JSON.stringify(a))}function k(b){if(b&&b.success){var c=a.extend({},b);return c.success=function(a){b.success(a.value)},c}return b}return a.extend(b.prototype,{getAttribute:c,setAttribute:d,execute:e,search:f,version:g,list:h}),b};!function(b,c){"function"==typeof define&&define.amd?define(["jquery","jolokia"],c):b.Jolokia?a(jQuery,b.Jolokia):console.error("No Jolokia definition found. Please include jolokia.js before jolokia-simple.js")}(this,function(b,c){return a(b,c)})}(),function(a,b){"use strict";var c=6,d=4,e="asc",f="desc",g="_ng_field_",h="_ng_depth_",i="_ng_hidden_",j="_ng_column_",k=/CUSTOM_FILTERS/g,l=/COL_FIELD/g,m=/DISPLAY_CELL_TEMPLATE/g,n=/EDITABLE_CELL_TEMPLATE/g,o=/<.+>/;a.ngGrid={},a.ngGrid.i18n={},angular.module("ngGrid.services",[]);var p=angular.module("ngGrid.directives",[]),q=angular.module("ngGrid.filters",[]);angular.module("ngGrid",["ngGrid.services","ngGrid.directives","ngGrid.filters"]);var r=function(a,b,d,e){if(void 0===a.selectionProvider.selectedItems)return!0;var f,g=d.which||d.keyCode,h=!1,i=!1,j=void 0===a.selectionProvider.lastClickedRow?1:a.selectionProvider.lastClickedRow.rowIndex,k=a.columns.filter(function(a){return a.visible}),l=a.columns.filter(function(a){return a.pinned});if(a.col&&(f=k.indexOf(a.col)),37!==g&&38!==g&&39!==g&&40!==g&&9!==g&&13!==g)return!0;if(a.enableCellSelection){9===g&&d.preventDefault();var m=a.showSelectionCheckbox?1===a.col.index:0===a.col.index,n=1===a.$index||0===a.$index,o=a.$index===a.renderedColumns.length-1||a.$index===a.renderedColumns.length-2,p=k.indexOf(a.col)===k.length-1,q=l.indexOf(a.col)===l.length-1;if(37===g||9===g&&d.shiftKey){var r=0;m||(f-=1),n?m&&9===g&&d.shiftKey?(r=e.$canvas.width(),f=k.length-1,i=!0):r=e.$viewport.scrollLeft()-a.col.width:l.length>0&&(r=e.$viewport.scrollLeft()-k[f].width),e.$viewport.scrollLeft(r)}else(39===g||9===g&&!d.shiftKey)&&(o?p&&9===g&&!d.shiftKey?(e.$viewport.scrollLeft(0),f=a.showSelectionCheckbox?1:0,h=!0):e.$viewport.scrollLeft(e.$viewport.scrollLeft()+a.col.width):q&&e.$viewport.scrollLeft(0),p||(f+=1))}var s;s=a.configGroups.length>0?e.rowFactory.parsedData.filter(function(a){return!a.isAggRow}):e.filteredRows;var t=0;if(0!==j&&(38===g||13===g&&d.shiftKey||9===g&&d.shiftKey&&i)?t=-1:j!==s.length-1&&(40===g||13===g&&!d.shiftKey||9===g&&h)&&(t=1),t){var u=s[j+t];u.beforeSelectionChange(u,d)&&(u.continueSelection(d),a.$emit("ngGridEventDigestGridParent"),a.selectionProvider.lastClickedRow.renderedRowIndex>=a.renderedRows.length-c-2?e.$viewport.scrollTop(e.$viewport.scrollTop()+a.rowHeight):c+2>=a.selectionProvider.lastClickedRow.renderedRowIndex&&e.$viewport.scrollTop(e.$viewport.scrollTop()-a.rowHeight))}return a.enableCellSelection&&setTimeout(function(){a.domAccessProvider.focusCellElement(a,a.renderedColumns.indexOf(k[f]))},3),!1};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),Array.prototype.filter||(Array.prototype.filter=function(a){var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments[1],f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),q.filter("checkmark",function(){return function(a){return a?"✔":"✘"}}),q.filter("ngColumns",function(){return function(a){return a.filter(function(a){return!a.isAggCol})}}),angular.module("ngGrid.services").factory("$domUtilityService",["$utilityService","$window",function(a,c){var d={},e={},f=function(){var a=b("<div></div>");a.appendTo("body"),a.height(100).width(100).css("position","absolute").css("overflow","scroll"),a.append('<div style="height: 400px; width: 400px;"></div>'),d.ScrollH=a.height()-a[0].clientHeight,d.ScrollW=a.width()-a[0].clientWidth,a.empty(),a.attr("style",""),a.append('<span style="font-family: Verdana, Helvetica, Sans-Serif; font-size: 14px;"><strong>M</strong></span>'),d.LetterW=a.children().first().width(),a.remove()};return d.eventStorage={},d.AssignGridContainers=function(a,c,e){e.$root=b(c),e.$topPanel=e.$root.find(".ngTopPanel"),e.$groupPanel=e.$root.find(".ngGroupPanel"),e.$headerContainer=e.$topPanel.find(".ngHeaderContainer"),a.$headerContainer=e.$headerContainer,e.$headerScroller=e.$topPanel.find(".ngHeaderScroller"),e.$headers=e.$headerScroller.children(),e.$viewport=e.$root.find(".ngViewport"),e.$canvas=e.$viewport.find(".ngCanvas"),e.$footerPanel=e.$root.find(".ngFooterPanel"),a.$watch(function(){return e.$viewport.scrollLeft()},function(a){return e.$headerContainer.scrollLeft(a)}),d.UpdateGridLayout(a,e)},d.getRealWidth=function(a){var c=0,d={visibility:"hidden",display:"block"},e=a.parents().andSelf().not(":visible");return b.swap(e[0],d,function(){c=a.outerWidth()}),c},d.UpdateGridLayout=function(a,b){var c=b.$viewport.scrollTop();b.elementDims.rootMaxW=b.$root.width(),b.$root.is(":hidden")&&(b.elementDims.rootMaxW=d.getRealWidth(b.$root)),b.elementDims.rootMaxH=b.$root.height(),b.refreshDomSizes(),a.adjustScrollTop(c,!0)},d.numberOfGrids=0,d.setStyleText=function(a,b){var d=a.styleSheet,e=a.gridId,f=c.document;d||(d=f.getElementById(e)),d||(d=f.createElement("style"),d.type="text/css",d.id=e,(f.head||f.getElementsByTagName("head")[0]).appendChild(d)),d.styleSheet&&!d.sheet?d.styleSheet.cssText=b:d.innerHTML=b,a.styleSheet=d,a.styleText=b},d.BuildStyles=function(a,b,c){var e,f=b.config.rowHeight,g=b.gridId,h=a.columns,i=0,j=a.totalRowWidth();e="."+g+" .ngCanvas { width: "+j+"px; }."+g+" .ngRow { width: "+j+"px; }."+g+" .ngCanvas { width: "+j+"px; }."+g+" .ngHeaderScroller { width: "+(j+d.ScrollH)+"px}";for(var k=0;h.length>k;k++){var l=h[k];l.visible!==!1&&(e+="."+g+" .col"+k+" { width: "+l.width+"px; left: "+i+"px; height: "+f+"px }."+g+" .colt"+k+" { width: "+l.width+"px; }",i+=l.width)}d.setStyleText(b,e),a.adjustScrollLeft(b.$viewport.scrollLeft()),c&&d.digest(a)},d.setColLeft=function(a,b,c){if(c.styleText){var f=e[a.index];f||(f=e[a.index]=RegExp(".col"+a.index+" { width: [0-9]+px; left: [0-9]+px"));var g=c.styleText.replace(f,".col"+a.index+" { width: "+a.width+"px; left: "+b+"px");d.setStyleText(c,g)}},d.setColLeft.immediate=1,d.RebuildGrid=function(a,b){d.UpdateGridLayout(a,b),(null==b.config.maintainColumnRatios||b.config.maintainColumnRatios)&&b.configureColumnWidths(),a.adjustScrollLeft(b.$viewport.scrollLeft()),d.BuildStyles(a,b,!0)},d.digest=function(a){a.$root.$$phase||a.$digest()},d.ScrollH=17,d.ScrollW=17,d.LetterW=10,f(),d}]),angular.module("ngGrid.services").factory("$sortService",["$parse",function(a){var b={};return b.colSortFnCache={},b.guessSortFn=function(a){var c=typeof a;switch(c){case"number":return b.sortNumber;case"boolean":return b.sortBool;case"string":return a.match(/^[-+]?[£$¤]?[\d,.]+%?$/)?b.sortNumberStr:b.sortAlpha;default:return"[object Date]"===Object.prototype.toString.call(a)?b.sortDate:b.basicSort}},b.basicSort=function(a,b){return a===b?0:b>a?-1:1},b.sortNumber=function(a,b){return a-b},b.sortNumberStr=function(a,b){var c,d,e=!1,f=!1;return c=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(c)&&(e=!0),d=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(d)&&(f=!0),e&&f?0:e?1:f?-1:c-d},b.sortAlpha=function(a,b){var c=a.toLowerCase(),d=b.toLowerCase();return c===d?0:d>c?-1:1},b.sortDate=function(a,b){var c=a.getTime(),d=b.getTime();return c===d?0:d>c?-1:1},b.sortBool=function(a,b){return a&&b?0:a||b?a?1:-1:0},b.sortData=function(c,d){if(d&&c){var f,g,h=c.fields.length,i=c.fields,j=d.slice(0);d.sort(function(d,k){for(var l,m=0,n=0;0===m&&h>n;){f=c.columns[n],g=c.directions[n],l=b.getSortFn(f,j);var o=a(i[n])(d),p=a(i[n])(k);!o&&0!==o||!p&&0!==p?p||o?o?p||(m=-1):m=1:m=0:m=l(o,p),n++}return g===e?m:0-m})}},b.Sort=function(a,c){b.isSorting||(b.isSorting=!0,b.sortData(a,c),b.isSorting=!1)},b.getSortFn=function(c,d){var e,f;if(b.colSortFnCache[c.field])e=b.colSortFnCache[c.field];else if(void 0!==c.sortingAlgorithm)e=c.sortingAlgorithm,b.colSortFnCache[c.field]=c.sortingAlgorithm;else{if(f=d[0],!f)return e;e=b.guessSortFn(a(c.field)(f)),e?b.colSortFnCache[c.field]=e:e=b.sortAlpha}return e},b}]),angular.module("ngGrid.services").factory("$utilityService",["$parse",function(c){var d=/function (.{1,})\(/,e={visualLength:function(a){var c=document.getElementById("testDataLength");c||(c=document.createElement("SPAN"),c.id="testDataLength",c.style.visibility="hidden",document.body.appendChild(c));var d=b(a);return b(c).css({font:d.css("font"),"font-size":d.css("font-size"),"font-family":d.css("font-family")}),c.innerHTML=d.text(),c.offsetWidth},forIn:function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)},evalProperty:function(a,b){return c(b)(a)},endsWith:function(a,b){return a&&b&&"string"==typeof a?-1!==a.indexOf(b,a.length-b.length):!1},isNullOrUndefined:function(a){return void 0===a||null===a?!0:!1},getElementsByClassName:function(a){if(document.getElementsByClassName)return document.getElementsByClassName(a);for(var b=[],c=RegExp("\\b"+a+"\\b"),d=document.getElementsByTagName("*"),e=0;d.length>e;e++){var f=d[e].className;c.test(f)&&b.push(d[e])}return b},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),seti18n:function(b,c){var d=a.ngGrid.i18n[c];for(var e in d)b.i18n[e]=d[e]},getInstanceType:function(a){var b=d.exec(""+a.constructor);if(b&&b.length>1){var c=b[1].replace(/^\s+|\s+$/g,"");return c}return""}};return e}]);var s=function(a,b,c,d){this.rowIndex=0,this.offsetTop=this.rowIndex*c,this.entity=a,this.label=a.gLabel,this.field=a.gField,this.depth=a.gDepth,this.parent=a.parent,this.children=a.children,this.aggChildren=a.aggChildren,this.aggIndex=a.aggIndex,this.collapsed=d,this.groupInitState=d,this.rowFactory=b,this.rowHeight=c,this.isAggRow=!0,this.offsetLeft=25*a.gDepth,this.aggLabelFilter=a.aggLabelFilter};s.prototype.toggleExpand=function(){this.collapsed=this.collapsed?!1:!0,this.orig&&(this.orig.collapsed=this.collapsed),this.notifyChildren()},s.prototype.setExpand=function(a){this.collapsed=a,this.notifyChildren()},s.prototype.notifyChildren=function(){for(var a=Math.max(this.rowFactory.aggCache.length,this.children.length),b=0;a>b;b++)if(this.aggChildren[b]&&(this.aggChildren[b].entity[i]=this.collapsed,this.collapsed&&this.aggChildren[b].setExpand(this.collapsed)),this.children[b]&&(this.children[b][i]=this.collapsed),b>this.aggIndex&&this.rowFactory.aggCache[b]){var c=this.rowFactory.aggCache[b],d=30*this.children.length;c.offsetTop=this.collapsed?c.offsetTop-d:c.offsetTop+d}this.rowFactory.renderedChange()},s.prototype.aggClass=function(){return this.collapsed?"ngAggArrowCollapsed":"ngAggArrowExpanded"},s.prototype.totalChildren=function(){if(this.aggChildren.length>0){var a=0,b=function(c){c.aggChildren.length>0?angular.forEach(c.aggChildren,function(a){b(a)}):a+=c.children.length};return b(this),a}return this.children.length},s.prototype.copy=function(){var a=new s(this.entity,this.rowFactory,this.rowHeight,this.groupInitState);return a.orig=this,a};var t=function(a,c,d,g,h,i){var j=this,l=a.colDef,m=500,n=0,p=null;j.colDef=a.colDef,j.width=l.width,j.groupIndex=0,j.isGroupedBy=!1,j.minWidth=l.minWidth?l.minWidth:50,j.maxWidth=l.maxWidth?l.maxWidth:9e3,j.enableCellEdit=void 0!==l.enableCellEdit?l.enableCellEdit:a.enableCellEdit||a.enableCellEditOnFocus,j.headerRowHeight=a.headerRowHeight,j.displayName=void 0===l.displayName?l.field:l.displayName,j.index=a.index,j.isAggCol=a.isAggCol,j.cellClass=l.cellClass,j.sortPriority=void 0,j.cellFilter=l.cellFilter?l.cellFilter:"",j.field=l.field,j.aggLabelFilter=l.aggLabelFilter||l.cellFilter,j.visible=i.isNullOrUndefined(l.visible)||l.visible,j.sortable=!1,j.resizable=!1,j.pinnable=!1,j.pinned=a.enablePinning&&l.pinned,j.originalIndex=null==a.originalIndex?j.index:a.originalIndex,j.groupable=i.isNullOrUndefined(l.groupable)||l.groupable,a.enableSort&&(j.sortable=i.isNullOrUndefined(l.sortable)||l.sortable),a.enableResize&&(j.resizable=i.isNullOrUndefined(l.resizable)||l.resizable),a.enablePinning&&(j.pinnable=i.isNullOrUndefined(l.pinnable)||l.pinnable),j.sortDirection=void 0,j.sortingAlgorithm=l.sortFn,j.headerClass=l.headerClass,j.cursor=j.sortable?"pointer":"default",j.headerCellTemplate=l.headerCellTemplate||h.get("headerCellTemplate.html"),j.cellTemplate=l.cellTemplate||h.get("cellTemplate.html").replace(k,j.cellFilter?"|"+j.cellFilter:""),j.enableCellEdit&&(j.cellEditTemplate=l.cellEditTemplate||h.get("cellEditTemplate.html"),j.editableCellTemplate=l.editableCellTemplate||h.get("editableCellTemplate.html")),l.cellTemplate&&!o.test(l.cellTemplate)&&(j.cellTemplate=b.ajax({type:"GET",url:l.cellTemplate,async:!1}).responseText),j.enableCellEdit&&l.editableCellTemplate&&!o.test(l.editableCellTemplate)&&(j.editableCellTemplate=b.ajax({type:"GET",url:l.editableCellTemplate,async:!1}).responseText),l.headerCellTemplate&&!o.test(l.headerCellTemplate)&&(j.headerCellTemplate=b.ajax({type:"GET",url:l.headerCellTemplate,async:!1}).responseText),j.colIndex=function(){var a=j.pinned?"pinned ":"";return a+="col"+j.index+" colt"+j.index,j.cellClass&&(a+=" "+j.cellClass),a},j.groupedByClass=function(){return j.isGroupedBy?"ngGroupedByIcon":"ngGroupIcon"},j.toggleVisible=function(){j.visible=!j.visible},j.showSortButtonUp=function(){return j.sortable?j.sortDirection===f:j.sortable},j.showSortButtonDown=function(){return j.sortable?j.sortDirection===e:j.sortable},j.noSortVisible=function(){return!j.sortDirection},j.sort=function(b){if(!j.sortable)return!0;var c=j.sortDirection===e?f:e;return j.sortDirection=c,a.sortCallback(j,b),!1},j.gripClick=function(){n++,1===n?p=setTimeout(function(){n=0},m):(clearTimeout(p),a.resizeOnDataCallback(j),n=0)},j.gripOnMouseDown=function(a){return c.isColumnResizing=!0,a.ctrlKey&&!j.pinned?(j.toggleVisible(),g.BuildStyles(c,d),!0):(a.target.parentElement.style.cursor="col-resize",j.startMousePosition=a.clientX,j.origWidth=j.width,b(document).mousemove(j.onMouseMove),b(document).mouseup(j.gripOnMouseUp),!1)},j.onMouseMove=function(a){var b=a.clientX-j.startMousePosition,e=b+j.origWidth;return j.width=j.minWidth>e?j.minWidth:e>j.maxWidth?j.maxWidth:e,c.hasUserChangedGridColumnWidths=!0,g.BuildStyles(c,d),!1},j.gripOnMouseUp=function(a){return b(document).off("mousemove",j.onMouseMove),b(document).off("mouseup",j.gripOnMouseUp),a.target.parentElement.style.cursor="default",g.digest(c),c.isColumnResizing=!1,!1},j.copy=function(){var b=new t(a,c,d,g,h);return b.isClone=!0,b.orig=j,b},j.setVars=function(a){j.orig=a,j.width=a.width,j.groupIndex=a.groupIndex,j.isGroupedBy=a.isGroupedBy,j.displayName=a.displayName,j.index=a.index,j.isAggCol=a.isAggCol,j.cellClass=a.cellClass,j.cellFilter=a.cellFilter,j.field=a.field,j.aggLabelFilter=a.aggLabelFilter,j.visible=a.visible,j.sortable=a.sortable,j.resizable=a.resizable,j.pinnable=a.pinnable,j.pinned=a.pinned,j.originalIndex=a.originalIndex,j.sortDirection=a.sortDirection,j.sortingAlgorithm=a.sortingAlgorithm,j.headerClass=a.headerClass,j.headerCellTemplate=a.headerCellTemplate,j.cellTemplate=a.cellTemplate,j.cellEditTemplate=a.cellEditTemplate}},u=function(a){this.outerHeight=null,this.outerWidth=null,b.extend(this,a)},v=function(a){this.previousColumn=null,this.grid=a};v.prototype.changeUserSelect=function(a,b){a.css({"-webkit-touch-callout":b,"-webkit-user-select":b,"-khtml-user-select":b,"-moz-user-select":"none"===b?"-moz-none":b,"-ms-user-select":b,"user-select":b})},v.prototype.focusCellElement=function(a,b){if(a.selectionProvider.lastClickedRow){var c=void 0!==b?b:this.previousColumn,d=a.selectionProvider.lastClickedRow.clone?a.selectionProvider.lastClickedRow.clone.elm:a.selectionProvider.lastClickedRow.elm;if(void 0!==c&&d){var e=angular.element(d[0].children).filter(function(){return 8!==this.nodeType}),f=Math.max(Math.min(a.renderedColumns.length-1,c),0);this.grid.config.showSelectionCheckbox&&angular.element(e[f]).scope()&&0===angular.element(e[f]).scope().col.index&&(f=1),e[f]&&e[f].children[1].children[0].focus(),this.previousColumn=c}}},v.prototype.selectionHandlers=function(a,b){var c=!1,d=this;b.bind("keydown",function(e){if(16===e.keyCode)return d.changeUserSelect(b,"none",e),!0;if(!c){c=!0;var f=r(a,b,e,d.grid);return c=!1,f}return!0}),b.bind("keyup",function(a){return 16===a.keyCode&&d.changeUserSelect(b,"text",a),!0})};var w=function(c,d,e,f){var g=this;g.colToMove=void 0,g.groupToMove=void 0,g.assignEvents=function(){c.config.jqueryUIDraggable&&!c.config.enablePinning?c.$groupPanel.droppable({addClasses:!1,drop:function(a){g.onGroupDrop(a)}}):(c.$groupPanel.on("mousedown",g.onGroupMouseDown).on("dragover",g.dragOver).on("drop",g.onGroupDrop),c.$headerScroller.on("mousedown",g.onHeaderMouseDown).on("dragover",g.dragOver),c.config.enableColumnReordering&&c.$headerScroller.on("drop",g.onHeaderDrop)),d.$watch("renderedColumns",function(){f(g.setDraggables)})},g.dragStart=function(a){a.dataTransfer.setData("text","")},g.dragOver=function(a){a.preventDefault()},g.setDraggables=function(){if(c.config.jqueryUIDraggable)c.$root.find(".ngHeaderSortColumn").draggable({helper:"clone",appendTo:"body",stack:"div",addClasses:!1,start:function(a){g.onHeaderMouseDown(a)}}).droppable({drop:function(a){g.onHeaderDrop(a)}});else{var a=c.$root.find(".ngHeaderSortColumn");angular.forEach(a,function(a){a.className&&-1!==a.className.indexOf("ngHeaderSortColumn")&&(a.setAttribute("draggable","true"),a.addEventListener&&a.addEventListener("dragstart",g.dragStart))}),-1!==navigator.userAgent.indexOf("MSIE")&&c.$root.find(".ngHeaderSortColumn").bind("selectstart",function(){return this.dragDrop(),!1})}},g.onGroupMouseDown=function(a){var d=b(a.target);if("ngRemoveGroup"!==d[0].className){var e=angular.element(d).scope();e&&(c.config.jqueryUIDraggable||(d.attr("draggable","true"),this.addEventListener&&this.addEventListener("dragstart",g.dragStart),-1!==navigator.userAgent.indexOf("MSIE")&&d.bind("selectstart",function(){return this.dragDrop(),!1})),g.groupToMove={header:d,groupName:e.group,index:e.$index})}else g.groupToMove=void 0},g.onGroupDrop=function(a){a.stopPropagation();var e,f;g.groupToMove?(e=b(a.target).closest(".ngGroupElement"),"ngGroupPanel"===e.context.className?(d.configGroups.splice(g.groupToMove.index,1),d.configGroups.push(g.groupToMove.groupName)):(f=angular.element(e).scope(),f&&g.groupToMove.index!==f.$index&&(d.configGroups.splice(g.groupToMove.index,1),d.configGroups.splice(f.$index,0,g.groupToMove.groupName))),g.groupToMove=void 0,c.fixGroupIndexes()):g.colToMove&&(-1===d.configGroups.indexOf(g.colToMove.col)&&(e=b(a.target).closest(".ngGroupElement"),"ngGroupPanel"===e.context.className||"ngGroupPanelDescription ng-binding"===e.context.className?d.groupBy(g.colToMove.col):(f=angular.element(e).scope(),f&&d.removeGroup(f.$index))),g.colToMove=void 0),d.$$phase||d.$apply()},g.onHeaderMouseDown=function(a){var c=b(a.target).closest(".ngHeaderSortColumn"),d=angular.element(c).scope();d&&(g.colToMove={header:c,col:d.col})},g.onHeaderDrop=function(a){if(g.colToMove&&!g.colToMove.col.pinned){var f=b(a.target).closest(".ngHeaderSortColumn"),h=angular.element(f).scope();if(h){if(g.colToMove.col===h.col||h.col.pinned)return;d.columns.splice(g.colToMove.col.index,1),d.columns.splice(h.col.index,0,g.colToMove.col),c.fixColumnIndexes(),g.colToMove=void 0,e.digest(d)}}},g.assignGridEventHandlers=function(){-1===c.config.tabIndex?(c.$viewport.attr("tabIndex",e.numberOfGrids),e.numberOfGrids++):c.$viewport.attr("tabIndex",c.config.tabIndex);var f;b(a).resize(function(){clearTimeout(f),f=setTimeout(function(){e.RebuildGrid(d,c)},100)});var g;b(c.$root.parent()).on("resize",function(){clearTimeout(g),g=setTimeout(function(){e.RebuildGrid(d,c)},100)})},g.assignGridEventHandlers(),g.assignEvents()},x=function(a,b){a.maxRows=function(){var c=Math.max(a.totalServerItems,b.data.length);return c},a.$watch("totalServerItems",function(){a.currentMaxPages=a.maxPages()}),a.multiSelect=b.config.enableRowSelection&&b.config.multiSelect,a.selectedItemCount=b.selectedItemCount,a.maxPages=function(){return 0===a.maxRows()?1:Math.ceil(a.maxRows()/a.pagingOptions.pageSize)},a.pageForward=function(){var b=a.pagingOptions.currentPage;a.totalServerItems>0?a.pagingOptions.currentPage=Math.min(b+1,a.maxPages()):a.pagingOptions.currentPage++},a.pageBackward=function(){var b=a.pagingOptions.currentPage;a.pagingOptions.currentPage=Math.max(b-1,1)},a.pageToFirst=function(){a.pagingOptions.currentPage=1},a.pageToLast=function(){var b=a.maxPages();a.pagingOptions.currentPage=b},a.cantPageForward=function(){var c=a.pagingOptions.currentPage,d=a.maxPages();return a.totalServerItems>0?c>=d:1>b.data.length},a.cantPageToLast=function(){return a.totalServerItems>0?a.cantPageForward():!0},a.cantPageBackward=function(){var b=a.pagingOptions.currentPage;return 1>=b}},y=function(e,f,g,h,j,k,l,m,n,p,q){var r={aggregateTemplate:void 0,afterSelectionChange:function(){},beforeSelectionChange:function(){return!0},checkboxCellTemplate:void 0,checkboxHeaderTemplate:void 0,columnDefs:void 0,data:[],dataUpdated:function(){},enableCellEdit:!1,enableCellEditOnFocus:!1,enableCellSelection:!1,enableColumnResize:!1,enableColumnReordering:!1,enableColumnHeavyVirt:!1,enablePaging:!1,enablePinning:!1,enableRowSelection:!0,enableSorting:!0,enableHighlighting:!1,excludeProperties:[],filterOptions:{filterText:"",useExternalFilter:!1},footerRowHeight:55,footerTemplate:void 0,groups:[],groupsCollapsedByDefault:!0,headerRowHeight:30,headerRowTemplate:void 0,jqueryUIDraggable:!1,jqueryUITheme:!1,keepLastSelected:!0,maintainColumnRatios:void 0,menuTemplate:void 0,multiSelect:!0,pagingOptions:{pageSizes:[250,500,1e3],pageSize:250,currentPage:1},pinSelectionCheckbox:!1,plugins:[],primaryKey:void 0,rowHeight:30,rowTemplate:void 0,selectedItems:[],selectWithCheckboxOnly:!1,showColumnMenu:!1,showFilter:!1,showFooter:!1,showGroupPanel:!1,showSelectionCheckbox:!1,sortInfo:{fields:[],columns:[],directions:[]},tabIndex:-1,totalServerItems:0,useExternalSorting:!1,i18n:"en",virtualizationThreshold:50},s=this;s.maxCanvasHt=0,s.config=b.extend(r,a.ngGrid.config,f),s.config.showSelectionCheckbox=s.config.showSelectionCheckbox&&s.config.enableColumnHeavyVirt===!1,s.config.enablePinning=s.config.enablePinning&&s.config.enableColumnHeavyVirt===!1,s.config.selectWithCheckboxOnly=s.config.selectWithCheckboxOnly&&s.config.showSelectionCheckbox!==!1,s.config.pinSelectionCheckbox=s.config.enablePinning,"string"==typeof f.columnDefs&&(s.config.columnDefs=e.$eval(f.columnDefs)),s.rowCache=[],s.rowMap=[],s.gridId="ng"+l.newId(),s.$root=null,s.$groupPanel=null,s.$topPanel=null,s.$headerContainer=null,s.$headerScroller=null,s.$headers=null,s.$viewport=null,s.$canvas=null,s.rootDim=s.config.gridDim,s.data=[],s.lateBindColumns=!1,s.filteredRows=[],s.initTemplates=function(){var a=["rowTemplate","aggregateTemplate","headerRowTemplate","checkboxCellTemplate","checkboxHeaderTemplate","menuTemplate","footerTemplate"],b=[];return angular.forEach(a,function(a){b.push(s.getTemplate(a))}),q.all(b)},s.getTemplate=function(a){var b=s.config[a],c=s.gridId+a+".html",d=q.defer();if(b&&!o.test(b))p.get(b,{cache:k}).success(function(a){k.put(c,a),d.resolve()}).error(function(){d.reject("Could not load template: "+b)});else if(b)k.put(c,b),d.resolve();else{var e=a+".html";k.put(c,k.get(e)),d.resolve()}return d.promise},"object"==typeof s.config.data&&(s.data=s.config.data),s.calcMaxCanvasHeight=function(){var a;return a=s.config.groups.length>0?s.rowFactory.parsedData.filter(function(a){return!a[i]}).length*s.config.rowHeight:s.filteredRows.length*s.config.rowHeight},s.elementDims={scrollW:0,scrollH:0,rowIndexCellW:25,rowSelectedCellW:25,rootMaxW:0,rootMaxH:0},s.setRenderedRows=function(a){e.renderedRows.length=a.length;for(var b=0;a.length>b;b++)!e.renderedRows[b]||a[b].isAggRow||e.renderedRows[b].isAggRow?(e.renderedRows[b]=a[b].copy(),e.renderedRows[b].collapsed=a[b].collapsed,a[b].isAggRow||e.renderedRows[b].setVars(a[b])):e.renderedRows[b].setVars(a[b]),e.renderedRows[b].rowIndex=a[b].rowIndex,e.renderedRows[b].offsetTop=a[b].offsetTop,e.renderedRows[b].selected=a[b].selected,a[b].renderedRowIndex=b;s.refreshDomSizes(),e.$emit("ngGridEventRows",a)},s.minRowsToRender=function(){var a=e.viewportDimHeight()||1;return Math.floor(a/s.config.rowHeight)},s.refreshDomSizes=function(){var a=new u;a.outerWidth=s.elementDims.rootMaxW,a.outerHeight=s.elementDims.rootMaxH,s.rootDim=a,s.maxCanvasHt=s.calcMaxCanvasHeight()},s.buildColumnDefsFromData=function(){s.config.columnDefs=[];var a=s.data[0];return a?void l.forIn(a,function(a,b){-1===s.config.excludeProperties.indexOf(b)&&s.config.columnDefs.push({field:b})}):void(s.lateBoundColumns=!0)},s.buildColumns=function(){var a=s.config.columnDefs,b=[];if(a||(s.buildColumnDefsFromData(),a=s.config.columnDefs),s.config.showSelectionCheckbox&&b.push(new t({colDef:{field:"✔",width:s.elementDims.rowSelectedCellW,sortable:!1,resizable:!1,groupable:!1,headerCellTemplate:k.get(e.gridId+"checkboxHeaderTemplate.html"),cellTemplate:k.get(e.gridId+"checkboxCellTemplate.html"),pinned:s.config.pinSelectionCheckbox},index:0,headerRowHeight:s.config.headerRowHeight,sortCallback:s.sortData,resizeOnDataCallback:s.resizeOnData,enableResize:s.config.enableColumnResize,enableSort:s.config.enableSorting,enablePinning:s.config.enablePinning},e,s,h,k,l)),a.length>0){var c=s.config.showSelectionCheckbox?1:0,d=e.configGroups.length;e.configGroups.length=0,angular.forEach(a,function(a,f){f+=c;var g=new t({colDef:a,index:f+d,originalIndex:f,headerRowHeight:s.config.headerRowHeight,sortCallback:s.sortData,resizeOnDataCallback:s.resizeOnData,enableResize:s.config.enableColumnResize,enableSort:s.config.enableSorting,enablePinning:s.config.enablePinning,enableCellEdit:s.config.enableCellEdit||s.config.enableCellEditOnFocus},e,s,h,k,l),i=s.config.groups.indexOf(a.field);-1!==i&&(g.isGroupedBy=!0,e.configGroups.splice(i,0,g),g.groupIndex=e.configGroups.length),b.push(g)}),e.columns=b,s.config.groups.length>0&&s.rowFactory.getGrouping(s.config.groups)}},s.configureColumnWidths=function(){var a=[],b=[],c=0,d=0,f={};if(angular.forEach(e.columns,function(a,b){if(!l.isNullOrUndefined(a.originalIndex)){var c=a.originalIndex;s.config.showSelectionCheckbox&&(0===a.originalIndex&&a.visible&&(d+=25),c--),f[c]=b}}),angular.forEach(s.config.columnDefs,function(g,h){var i=e.columns[f[h]];g.index=h;var j,k=!1;if(l.isNullOrUndefined(g.width)?g.width="*":(k=isNaN(g.width)?l.endsWith(g.width,"%"):!1,j=k?g.width:parseInt(g.width,10)),isNaN(j)&&!e.hasUserChangedGridColumnWidths){if(j=g.width,"auto"===j){i.width=i.minWidth,d+=i.width;var m=i;return void e.$on("ngGridEventData",function(){s.resizeOnData(m)})}if(-1!==j.indexOf("*"))return i.visible!==!1&&(c+=j.length),void a.push(g);if(k)return void b.push(g);throw'unable to parse column width, use percentage ("10%","20%", etc...) or "*" to use remaining width of grid'}i.visible!==!1&&(d+=i.width=parseInt(i.width,10))}),b.length>0){s.config.maintainColumnRatios=s.config.maintainColumnRatios!==!1;var g=0,i=0;angular.forEach(b,function(a){var b=e.columns[f[a.index]],c=parseFloat(a.width)/100;g+=c,b.visible||(i+=c)});var j=g-i;angular.forEach(b,function(a){var b=e.columns[f[a.index]],c=parseFloat(a.width)/100;c/=i>0?j:g;var h=s.rootDim.outerWidth*g;b.width=h*c,d+=b.width})}if(a.length>0){s.config.maintainColumnRatios=s.config.maintainColumnRatios!==!1;var k=s.rootDim.outerWidth-d;s.maxCanvasHt>e.viewportDimHeight()&&(k-=h.ScrollW);var m=Math.floor(k/c);angular.forEach(a,function(b,c){var g=e.columns[f[b.index]];g.width=m*b.width.length,g.visible!==!1&&(d+=g.width);var i=c===a.length-1;if(i&&s.rootDim.outerWidth>d){var j=s.rootDim.outerWidth-d;s.maxCanvasHt>e.viewportDimHeight()&&(j-=h.ScrollW),g.width+=j}})}},s.init=function(){return s.initTemplates().then(function(){e.selectionProvider=new D(s,e,n),e.domAccessProvider=new v(s),s.rowFactory=new B(s,e,h,k,l),s.searchProvider=new C(e,s,j),s.styleProvider=new E(e,s),e.$watch("configGroups",function(a){var b=[];angular.forEach(a,function(a){b.push(a.field||a)}),s.config.groups=b,s.rowFactory.filteredRowsChanged(),e.$emit("ngGridEventGroups",a)},!0),e.$watch("columns",function(a){e.isColumnResizing||h.RebuildGrid(e,s),e.$emit("ngGridEventColumns",a)},!0),e.$watch(function(){return f.i18n},function(a){l.seti18n(e,a)}),s.maxCanvasHt=s.calcMaxCanvasHeight(),s.config.sortInfo.fields&&s.config.sortInfo.fields.length>0&&e.$watch(function(){return s.config.sortInfo},function(){g.isSorting||(s.sortColumnsInit(),e.$emit("ngGridEventSorted",s.config.sortInfo))},!0)})},s.resizeOnData=function(a){var c=a.minWidth,d=l.getElementsByClassName("col"+a.index);angular.forEach(d,function(a,d){var e;if(0===d){var f=b(a).find(".ngHeaderText");e=l.visualLength(f)+10}else{var g=b(a).find(".ngCellText");e=l.visualLength(g)+10}e>c&&(c=e)}),a.width=a.longest=Math.min(a.maxWidth,c+7),h.BuildStyles(e,s,!0)},s.lastSortedColumns=[],s.sortData=function(a,c){if(c&&c.shiftKey&&s.config.sortInfo){var d=s.config.sortInfo.columns.indexOf(a);-1===d?(1===s.config.sortInfo.columns.length&&(s.config.sortInfo.columns[0].sortPriority=1),s.config.sortInfo.columns.push(a),a.sortPriority=s.config.sortInfo.columns.length,s.config.sortInfo.fields.push(a.field),s.config.sortInfo.directions.push(a.sortDirection),s.lastSortedColumns.push(a)):s.config.sortInfo.directions[d]=a.sortDirection}else{var f=b.isArray(a);s.config.sortInfo.columns.length=0,s.config.sortInfo.fields.length=0,s.config.sortInfo.directions.length=0;var g=function(a){s.config.sortInfo.columns.push(a),s.config.sortInfo.fields.push(a.field),s.config.sortInfo.directions.push(a.sortDirection),s.lastSortedColumns.push(a)};f?(s.clearSortingData(),angular.forEach(a,function(a,b){a.sortPriority=b+1,g(a)})):(s.clearSortingData(a),a.sortPriority=void 0,g(a))}s.sortActual(),s.searchProvider.evalFilter(),e.$emit("ngGridEventSorted",s.config.sortInfo)},s.sortColumnsInit=function(){s.config.sortInfo.columns?s.config.sortInfo.columns.length=0:s.config.sortInfo.columns=[],angular.forEach(e.columns,function(a){var b=s.config.sortInfo.fields.indexOf(a.field);-1!==b&&(a.sortDirection=s.config.sortInfo.directions[b]||"asc",s.config.sortInfo.columns[b]=a)}),angular.forEach(s.config.sortInfo.columns,function(a){s.sortData(a)})},s.sortActual=function(){if(!s.config.useExternalSorting){var a=s.data.slice(0);angular.forEach(a,function(a,b){var c=s.rowMap[b];if(void 0!==c){var d=s.rowCache[c];void 0!==d&&(a.preSortSelected=d.selected,a.preSortIndex=b)}}),g.Sort(s.config.sortInfo,a),angular.forEach(a,function(a,b){s.rowCache[b].entity=a,s.rowCache[b].selected=a.preSortSelected,s.rowMap[a.preSortIndex]=b,delete a.preSortSelected,delete a.preSortIndex})}},s.clearSortingData=function(a){a?(angular.forEach(s.lastSortedColumns,function(b){a.index!==b.index&&(b.sortDirection="",b.sortPriority=null)
}),s.lastSortedColumns[0]=a,s.lastSortedColumns.length=1):(angular.forEach(s.lastSortedColumns,function(a){a.sortDirection="",a.sortPriority=null}),s.lastSortedColumns=[])},s.fixColumnIndexes=function(){for(var a=0;e.columns.length>a;a++)e.columns[a].index=a},s.fixGroupIndexes=function(){angular.forEach(e.configGroups,function(a,b){a.groupIndex=b+1})},e.elementsNeedMeasuring=!0,e.columns=[],e.renderedRows=[],e.renderedColumns=[],e.headerRow=null,e.rowHeight=s.config.rowHeight,e.jqueryUITheme=s.config.jqueryUITheme,e.showSelectionCheckbox=s.config.showSelectionCheckbox,e.enableCellSelection=s.config.enableCellSelection,e.enableCellEditOnFocus=s.config.enableCellEditOnFocus,e.footer=null,e.selectedItems=s.config.selectedItems,e.multiSelect=s.config.multiSelect,e.showFooter=s.config.showFooter,e.footerRowHeight=e.showFooter?s.config.footerRowHeight:0,e.showColumnMenu=s.config.showColumnMenu,e.showMenu=!1,e.configGroups=[],e.gridId=s.gridId,e.enablePaging=s.config.enablePaging,e.pagingOptions=s.config.pagingOptions,e.i18n={},l.seti18n(e,s.config.i18n),e.adjustScrollLeft=function(a){for(var b=0,c=0,d=e.columns.length,f=[],g=!s.config.enableColumnHeavyVirt,i=0,j=function(a){g?f.push(a):e.renderedColumns[i]?e.renderedColumns[i].setVars(a):e.renderedColumns[i]=a.copy(),i++},k=0;d>k;k++){var l=e.columns[k];if(l.visible!==!1){var m=l.width+b;if(l.pinned){j(l);var n=k>0?a+c:a;h.setColLeft(l,n,s),c+=l.width}else m>=a&&a+s.rootDim.outerWidth>=b&&j(l);b+=l.width}}g&&(e.renderedColumns=f)},s.prevScrollTop=0,s.prevScrollIndex=0,e.adjustScrollTop=function(a,b){if(s.prevScrollTop!==a||b){a>0&&s.$viewport[0].scrollHeight-a<=s.$viewport.outerHeight()&&e.$emit("ngGridEventScroll");var f,g=Math.floor(a/s.config.rowHeight);if(s.filteredRows.length>s.config.virtualizationThreshold){if(a>s.prevScrollTop&&s.prevScrollIndex+d>g)return;if(s.prevScrollTop>a&&g>s.prevScrollIndex-d)return;f=new z(Math.max(0,g-c),g+s.minRowsToRender()+c)}else{var h=e.configGroups.length>0?s.rowFactory.parsedData.length:s.data.length;f=new z(0,Math.min(h,s.minRowsToRender()+c))}s.prevScrollTop=a,s.rowFactory.UpdateViewableRange(f),s.prevScrollIndex=g}},e.toggleShowMenu=function(){e.showMenu=!e.showMenu},e.toggleSelectAll=function(a,b){e.selectionProvider.toggleSelectAll(a,!1,b)},e.totalFilteredItemsLength=function(){return s.filteredRows.length},e.showGroupPanel=function(){return s.config.showGroupPanel},e.topPanelHeight=function(){return s.config.showGroupPanel===!0?s.config.headerRowHeight+32:s.config.headerRowHeight},e.viewportDimHeight=function(){return Math.max(0,s.rootDim.outerHeight-e.topPanelHeight()-e.footerRowHeight-2)},e.groupBy=function(a){if(!(1>s.data.length)&&a.groupable&&a.field){a.sortDirection||a.sort({shiftKey:e.configGroups.length>0?!0:!1});var b=e.configGroups.indexOf(a);-1===b?(a.isGroupedBy=!0,e.configGroups.push(a),a.groupIndex=e.configGroups.length):e.removeGroup(b),s.$viewport.scrollTop(0),h.digest(e)}},e.removeGroup=function(a){var b=e.columns.filter(function(b){return b.groupIndex===a+1})[0];b.isGroupedBy=!1,b.groupIndex=0,e.columns[a].isAggCol&&(e.columns.splice(a,1),e.configGroups.splice(a,1),s.fixGroupIndexes()),0===e.configGroups.length&&(s.fixColumnIndexes(),h.digest(e)),e.adjustScrollLeft(0)},e.togglePin=function(a){for(var b=a.index,c=0,d=0;e.columns.length>d&&e.columns[d].pinned;d++)c++;a.pinned&&(c=Math.max(a.originalIndex,c-1)),a.pinned=!a.pinned,e.columns.splice(b,1),e.columns.splice(c,0,a),s.fixColumnIndexes(),h.BuildStyles(e,s,!0),s.$viewport.scrollLeft(s.$viewport.scrollLeft()-a.width)},e.totalRowWidth=function(){for(var a=0,b=e.columns,c=0;b.length>c;c++)b[c].visible!==!1&&(a+=b[c].width);return a},e.headerScrollerDim=function(){var a=e.viewportDimHeight(),b=s.maxCanvasHt,c=b>a,d=new u;return d.autoFitHeight=!0,d.outerWidth=e.totalRowWidth(),c?d.outerWidth+=s.elementDims.scrollW:s.elementDims.scrollH>=b-a&&(d.outerWidth+=s.elementDims.scrollW),d}},z=function(a,b){this.topRow=a,this.bottomRow=b},A=function(a,b,c,d,e){this.entity=a,this.config=b,this.selectionProvider=c,this.rowIndex=d,this.utils=e,this.selected=c.getSelection(a),this.cursor=this.config.enableRowSelection&&!this.config.selectWithCheckboxOnly?"pointer":"default",this.beforeSelectionChange=b.beforeSelectionChangeCallback,this.afterSelectionChange=b.afterSelectionChangeCallback,this.offsetTop=this.rowIndex*b.rowHeight,this.rowDisplayIndex=0};A.prototype.setSelection=function(a){this.selectionProvider.setSelection(this,a),this.selectionProvider.lastClickedRow=this},A.prototype.continueSelection=function(a){this.selectionProvider.ChangeSelection(this,a)},A.prototype.ensureEntity=function(a){this.entity!==a&&(this.entity=a,this.selected=this.selectionProvider.getSelection(this.entity))},A.prototype.toggleSelected=function(a){if(!this.config.enableRowSelection&&!this.config.enableCellSelection)return!0;var b=a.target||a;return"checkbox"===b.type&&"ngSelectionCell ng-scope"!==b.parentElement.className?!0:this.config.selectWithCheckboxOnly&&"checkbox"!==b.type?(this.selectionProvider.lastClickedRow=this,!0):(this.beforeSelectionChange(this,a)&&this.continueSelection(a),!1)},A.prototype.alternatingRowClass=function(){var a=0===this.rowIndex%2,b={ngRow:!0,selected:this.selected,even:a,odd:!a,"ui-state-default":this.config.jqueryUITheme&&a,"ui-state-active":this.config.jqueryUITheme&&!a};return b},A.prototype.getProperty=function(a){return this.utils.evalProperty(this.entity,a)},A.prototype.copy=function(){return this.clone=new A(this.entity,this.config,this.selectionProvider,this.rowIndex,this.utils),this.clone.isClone=!0,this.clone.elm=this.elm,this.clone.orig=this,this.clone},A.prototype.setVars=function(a){a.clone=this,this.entity=a.entity,this.selected=a.selected,this.orig=a};var B=function(a,b,d,e,f){var k=this;k.aggCache={},k.parentCache=[],k.dataChanged=!0,k.parsedData=[],k.rowConfig={},k.selectionProvider=b.selectionProvider,k.rowHeight=30,k.numberOfAggregates=0,k.groupedData=void 0,k.rowHeight=a.config.rowHeight,k.rowConfig={enableRowSelection:a.config.enableRowSelection,rowClasses:a.config.rowClasses,selectedItems:b.selectedItems,selectWithCheckboxOnly:a.config.selectWithCheckboxOnly,beforeSelectionChangeCallback:a.config.beforeSelectionChange,afterSelectionChangeCallback:a.config.afterSelectionChange,jqueryUITheme:a.config.jqueryUITheme,enableCellSelection:a.config.enableCellSelection,rowHeight:a.config.rowHeight},k.renderedRange=new z(0,a.minRowsToRender()+c),k.buildEntityRow=function(a,b){return new A(a,k.rowConfig,k.selectionProvider,b,f)},k.buildAggregateRow=function(b,c){var d=k.aggCache[b.aggIndex];return d||(d=new s(b,k,k.rowConfig.rowHeight,a.config.groupsCollapsedByDefault),k.aggCache[b.aggIndex]=d),d.rowIndex=c,d.offsetTop=c*k.rowConfig.rowHeight,d},k.UpdateViewableRange=function(a){k.renderedRange=a,k.renderedChange()},k.filteredRowsChanged=function(){a.lateBoundColumns&&a.filteredRows.length>0&&(a.config.columnDefs=void 0,a.buildColumns(),a.lateBoundColumns=!1,b.$evalAsync(function(){b.adjustScrollLeft(0)})),k.dataChanged=!0,a.config.groups.length>0&&k.getGrouping(a.config.groups),k.UpdateViewableRange(k.renderedRange)},k.renderedChange=function(){if(!k.groupedData||1>a.config.groups.length)return k.renderedChangeNoGroups(),void a.refreshDomSizes();k.wasGrouped=!0,k.parentCache=[];var b=0,c=k.parsedData.filter(function(a){return a.isAggRow?a.parent&&a.parent.collapsed?!1:!0:(a[i]||(a.rowIndex=b++),!a[i])});k.totalRows=c.length;for(var d=[],e=k.renderedRange.topRow;k.renderedRange.bottomRow>e;e++)c[e]&&(c[e].offsetTop=e*a.config.rowHeight,d.push(c[e]));a.setRenderedRows(d)},k.renderedChangeNoGroups=function(){for(var b=[],c=k.renderedRange.topRow;k.renderedRange.bottomRow>c;c++)a.filteredRows[c]&&(a.filteredRows[c].rowIndex=c,a.filteredRows[c].offsetTop=c*a.config.rowHeight,b.push(a.filteredRows[c]));a.setRenderedRows(b)},k.fixRowCache=function(){var b=a.data.length,c=b-a.rowCache.length;if(0>c)a.rowCache.length=a.rowMap.length=b;else for(var d=a.rowCache.length;b>d;d++)a.rowCache[d]=a.rowFactory.buildEntityRow(a.data[d],d)},k.parseGroupData=function(a){if(a.values)for(var b=0;a.values.length>b;b++)k.parentCache[k.parentCache.length-1].children.push(a.values[b]),k.parsedData.push(a.values[b]);else for(var c in a)if(c!==g&&c!==h&&c!==j&&a.hasOwnProperty(c)){var d=k.buildAggregateRow({gField:a[g],gLabel:c,gDepth:a[h],isAggRow:!0,_ng_hidden_:!1,children:[],aggChildren:[],aggIndex:k.numberOfAggregates,aggLabelFilter:a[j].aggLabelFilter},0);k.numberOfAggregates++,d.parent=k.parentCache[d.depth-1],d.parent&&(d.parent.collapsed=!1,d.parent.aggChildren.push(d)),k.parsedData.push(d),k.parentCache[d.depth]=d,k.parseGroupData(a[c])}},k.getGrouping=function(c){function l(a,b){return a.filter(function(a){return a.field===b})}k.aggCache=[],k.numberOfAggregates=0,k.groupedData={};for(var m=a.filteredRows,n=c.length,o=b.columns,p=0;m.length>p;p++){var q=m[p].entity;if(!q)return;m[p][i]=a.config.groupsCollapsedByDefault;for(var r=k.groupedData,s=0;c.length>s;s++){var u=c[s],v=l(o,u)[0],w=f.evalProperty(q,u);w=w?""+w:"null",r[w]||(r[w]={}),r[g]||(r[g]=u),r[h]||(r[h]=s),r[j]||(r[j]=v),r=r[w]}r.values||(r.values=[]),r.values.push(m[p])}if(o.length>0)for(var x=0;c.length>x;x++)!o[x].isAggCol&&n>=x&&o.splice(0,0,new t({colDef:{field:"",width:25,sortable:!1,resizable:!1,headerCellTemplate:'<div class="ngAggHeader"></div>',pinned:a.config.pinSelectionCheckbox},enablePinning:a.config.enablePinning,isAggCol:!0,headerRowHeight:a.config.headerRowHeight},b,a,d,e,f));a.fixColumnIndexes(),b.adjustScrollLeft(0),k.parsedData.length=0,k.parseGroupData(k.groupedData),k.fixRowCache()},a.config.groups.length>0&&a.filteredRows.length>0&&k.getGrouping(a.config.groups)},C=function(a,c,d){var e=this,f=[];e.extFilter=c.config.filterOptions.useExternalFilter,a.showFilter=c.config.showFilter,a.filterText="",e.fieldMap={};var g=function(a,b,c){var e;for(var f in b)if(b.hasOwnProperty(f)){var h=c[f.toLowerCase()];if(!h)continue;var i=b[f];if("object"==typeof i){if(e=g(a,i,h))return!0}else{var j=null,k=null;if(h&&h.cellFilter&&(k=h.cellFilter.split(":"),j=d(k[0])),null!==i&&void 0!==i){if("function"==typeof j){var l=""+j(i,k[1]);e=a.regex.test(l)}else e=a.regex.test(""+i);if(e)return!0}}}return!1},h=function(a,b){var c,f=e.fieldMap[a.columnDisplay];if(!f)return!1;var g=f.cellFilter.split(":"),h=f.cellFilter?d(g[0]):null,i=b[a.column]||b[f.field.split(".")[0]];if(null===i||void 0===i)return!1;if("function"==typeof h){var k=""+h("object"==typeof i?j(i,f.field):i,g[1]);c=a.regex.test(k)}else c=a.regex.test("object"==typeof i?""+j(i,f.field):""+i);return c?!0:!1},i=function(a){for(var b=0,c=f.length;c>b;b++){var d,i=f[b];if(d=i.column?h(i,a):g(i,a,e.fieldMap),!d)return!1}return!0};e.evalFilter=function(){c.filteredRows=0===f.length?c.rowCache:c.rowCache.filter(function(a){return i(a.entity)});for(var a=0;c.filteredRows.length>a;a++)c.filteredRows[a].rowIndex=a;c.rowFactory.filteredRowsChanged()};var j=function(a,b){if("object"!=typeof a||"string"!=typeof b)return a;var c=b.split("."),d=a;if(c.length>1){for(var e=1,f=c.length;f>e;e++)if(d=d[c[e]],!d)return a;return d}return a},k=function(a,b){try{return RegExp(a,b)}catch(c){return RegExp(a.replace(/(\^|\$|\(|\)|<|>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"))}},l=function(a){f=[];var c;if(c=b.trim(a))for(var d=c.split(";"),e=0;d.length>e;e++){var g=d[e].split(":");if(g.length>1){var h=b.trim(g[0]),i=b.trim(g[1]);h&&i&&f.push({column:h,columnDisplay:h.replace(/\s+/g,"").toLowerCase(),regex:k(i,"i")})}else{var j=b.trim(g[0]);j&&f.push({column:"",regex:k(j,"i")})}}};e.extFilter||a.$watch("columns",function(a){for(var b=0;a.length>b;b++){var c=a[b];if(c.field)if(c.field.match(/\./g)){for(var d=c.field.split("."),f=e.fieldMap,g=0;d.length-1>g;g++)f[d[g]]=f[d[g]]||{},f=f[d[g]];f[d[d.length-1]]=c}else e.fieldMap[c.field.toLowerCase()]=c;c.displayName&&(e.fieldMap[c.displayName.toLowerCase().replace(/\s+/g,"")]=c)}}),a.$watch(function(){return c.config.filterOptions.filterText},function(b){a.filterText=b}),a.$watch("filterText",function(b){e.extFilter||(a.$emit("ngGridEventFilter",b),l(b),e.evalFilter())})},D=function(a,b,c){var d=this;d.multi=a.config.multiSelect,d.selectedItems=a.config.selectedItems,d.selectedIndex=a.config.selectedIndex,d.lastClickedRow=void 0,d.ignoreSelectedItemChanges=!1,d.pKeyParser=c(a.config.primaryKey),d.ChangeSelection=function(c,e){var f=e.which||e.keyCode,g=40===f||38===f;if(e&&e.shiftKey&&!e.keyCode&&d.multi&&a.config.enableRowSelection){if(d.lastClickedRow){var h;h=b.configGroups.length>0?a.rowFactory.parsedData.filter(function(a){return!a.isAggRow}):a.filteredRows;var i=c.rowIndex,j=d.lastClickedRowIndex;if(i===j)return!1;j>i?(i^=j,j=i^j,i^=j,i--):j++;for(var k=[];i>=j;j++)k.push(h[j]);if(k[k.length-1].beforeSelectionChange(k,e)){for(var l=0;k.length>l;l++){var m=k[l],n=m.selected;m.selected=!n,m.clone&&(m.clone.selected=m.selected);var o=d.selectedItems.indexOf(m.entity);-1===o?d.selectedItems.push(m.entity):d.selectedItems.splice(o,1)}k[k.length-1].afterSelectionChange(k,e)}return d.lastClickedRow=c,d.lastClickedRowIndex=c.rowIndex,!0}}else d.multi?(!e.keyCode||g&&!a.config.selectWithCheckboxOnly)&&d.setSelection(c,!c.selected):d.lastClickedRow===c?d.setSelection(d.lastClickedRow,a.config.keepLastSelected?!0:!c.selected):(d.lastClickedRow&&d.setSelection(d.lastClickedRow,!1),d.setSelection(c,!c.selected));return d.lastClickedRow=c,d.lastClickedRowIndex=c.rowIndex,!0},d.getSelection=function(a){return-1!==d.getSelectionIndex(a)},d.getSelectionIndex=function(b){var c=-1;if(a.config.primaryKey){var e=d.pKeyParser(b);angular.forEach(d.selectedItems,function(a,b){e===d.pKeyParser(a)&&(c=b)})}else c=d.selectedItems.indexOf(b);return c},d.setSelection=function(b,c){if(a.config.enableRowSelection){if(c)-1===d.getSelectionIndex(b.entity)&&(!d.multi&&d.selectedItems.length>0&&d.toggleSelectAll(!1,!0),d.selectedItems.push(b.entity));else{var e=d.getSelectionIndex(b.entity);-1!==e&&d.selectedItems.splice(e,1)}b.selected=c,b.orig&&(b.orig.selected=c),b.clone&&(b.clone.selected=c),b.afterSelectionChange(b)}},d.toggleSelectAll=function(b,c,e){var f=e?a.filteredRows:a.rowCache;if(c||a.config.beforeSelectionChange(f,b)){var g=d.selectedItems.length;g>0&&(d.selectedItems.length=0);for(var h=0;f.length>h;h++)f[h].selected=b,f[h].clone&&(f[h].clone.selected=b),b&&d.selectedItems.push(f[h].entity);c||a.config.afterSelectionChange(f,b)}}},E=function(a,b){a.headerCellStyle=function(a){return{height:a.headerRowHeight+"px"}},a.rowStyle=function(b){var c={top:b.offsetTop+"px",height:a.rowHeight+"px"};return b.isAggRow&&(c.left=b.offsetLeft),c},a.canvasStyle=function(){return{height:b.maxCanvasHt+"px"}},a.headerScrollerStyle=function(){return{height:b.config.headerRowHeight+"px"}},a.topPanelStyle=function(){return{width:b.rootDim.outerWidth+"px",height:a.topPanelHeight()+"px"}},a.headerStyle=function(){return{width:b.rootDim.outerWidth+"px",height:b.config.headerRowHeight+"px"}},a.groupPanelStyle=function(){return{width:b.rootDim.outerWidth+"px",height:"32px"}},a.viewportStyle=function(){return{width:b.rootDim.outerWidth+"px",height:a.viewportDimHeight()+"px"}},a.footerStyle=function(){return{width:b.rootDim.outerWidth+"px",height:a.footerRowHeight+"px"}}};p.directive("ngCellHasFocus",["$domUtilityService",function(a){var b=function(b){b.isFocused=!0,a.digest(b),b.$broadcast("ngGridEventStartCellEdit"),b.$on("ngGridEventEndCellEdit",function(){b.isFocused=!1,a.digest(b)})};return function(a,c){var d=!1,e=!1;a.editCell=function(){a.enableCellEditOnFocus||setTimeout(function(){b(a,c)},0)},c.bind("mousedown",function(){return a.enableCellEditOnFocus?e=!0:c.focus(),!0}),c.bind("click",function(d){a.enableCellEditOnFocus&&(d.preventDefault(),e=!1,b(a,c))}),c.bind("focus",function(){return d=!0,a.enableCellEditOnFocus&&!e&&b(a,c),!0}),c.bind("blur",function(){return d=!1,!0}),c.bind("keydown",function(e){return a.enableCellEditOnFocus||(d&&37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode&&9!==e.keyCode&&!e.shiftKey&&13!==e.keyCode&&b(a,c),d&&e.shiftKey&&e.keyCode>=65&&90>=e.keyCode&&b(a,c),27===e.keyCode&&c.focus()),!0})}}]),p.directive("ngCellText",function(){return function(a,b){b.bind("mouseover",function(a){a.preventDefault(),b.css({cursor:"text"})}),b.bind("mouseleave",function(a){a.preventDefault(),b.css({cursor:"default"})})}}),p.directive("ngCell",["$compile","$domUtilityService",function(a,b){var c={scope:!1,compile:function(){return{pre:function(b,c){var d,e=b.col.cellTemplate.replace(l,"row.entity."+b.col.field);b.col.enableCellEdit?(d=b.col.cellEditTemplate,d=d.replace(m,e),d=d.replace(n,b.col.editableCellTemplate.replace(l,"row.entity."+b.col.field))):d=e;var f=a(d)(b);b.enableCellSelection&&-1===f[0].className.indexOf("ngSelectionCell")&&(f[0].setAttribute("tabindex",0),f.addClass("ngCellElement")),c.append(f)},post:function(a,c){a.enableCellSelection&&a.domAccessProvider.selectionHandlers(a,c),a.$on("ngGridEventDigestCell",function(){b.digest(a)})}}}};return c}]),p.directive("ngEditCellIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(a,b,c){return function(a,b,d){var e,f;a.$watch(d.ngEditCellIf,function(d){e&&(e.remove(),e=void 0),f&&(f.$destroy(),f=void 0),d&&(f=a.$new(),c(f,function(a){e=a,b.after(a)}))})}}}}]),p.directive("ngGridFooter",["$compile","$templateCache",function(a,b){var c={scope:!1,compile:function(){return{pre:function(c,d){0===d.children().length&&d.append(a(b.get(c.gridId+"footerTemplate.html"))(c))}}}};return c}]),p.directive("ngGridMenu",["$compile","$templateCache",function(a,b){var c={scope:!1,compile:function(){return{pre:function(c,d){0===d.children().length&&d.append(a(b.get(c.gridId+"menuTemplate.html"))(c))}}}};return c}]),p.directive("ngGrid",["$compile","$filter","$templateCache","$sortService","$domUtilityService","$utilityService","$timeout","$parse","$http","$q",function(a,c,d,e,f,g,h,i,j,k){var l={scope:!0,compile:function(){return{pre:function(l,m,n){var o=b(m),p=l.$eval(n.ngGrid);p.gridDim=new u({outerHeight:b(o).height(),outerWidth:b(o).width()});var q=new y(l,p,e,f,c,d,g,h,i,j,k);return q.init().then(function(){if("string"==typeof p.columnDefs?l.$parent.$watch(p.columnDefs,function(a){return a?(q.lateBoundColumns=!1,l.columns=[],q.config.columnDefs=a,q.buildColumns(),q.eventProvider.assignEvents(),void f.RebuildGrid(l,q)):(q.refreshDomSizes(),void q.buildColumns())},!0):q.buildColumns(),"string"==typeof p.totalServerItems?l.$parent.$watch(p.totalServerItems,function(a){l.totalServerItems=angular.isDefined(a)?a:0}):l.totalServerItems=0,"string"==typeof p.data){var c=function(a){q.data=b.extend([],a),q.rowFactory.fixRowCache(),angular.forEach(q.data,function(a,b){var c=q.rowMap[b]||b;q.rowCache[c]&&q.rowCache[c].ensureEntity(a),q.rowMap[c]=b}),q.searchProvider.evalFilter(),q.configureColumnWidths(),q.refreshDomSizes(),q.config.sortInfo.fields.length>0&&(q.sortColumnsInit(),l.$emit("ngGridEventSorted",q.config.sortInfo)),l.$emit("ngGridEventData",q.gridId)};l.$parent.$watch(p.data,c),l.$parent.$watch(p.data+".length",function(){c(l.$eval(p.data)),l.adjustScrollTop(q.$viewport.scrollTop(),!0)})}return q.footerController=new x(l,q),m.addClass("ngGrid").addClass(""+q.gridId),p.enableHighlighting||m.addClass("unselectable"),p.jqueryUITheme&&m.addClass("ui-widget"),m.append(a(d.get("gridTemplate.html"))(l)),f.AssignGridContainers(l,m,q),q.eventProvider=new w(q,l,f,h),p.selectRow=function(a,b){q.rowCache[a]&&(q.rowCache[a].clone&&q.rowCache[a].clone.setSelection(b?!0:!1),q.rowCache[a].setSelection(b?!0:!1))},p.selectItem=function(a,b){p.selectRow(q.rowMap[a],b)},p.selectAll=function(a){l.toggleSelectAll(a)},p.selectVisible=function(a){l.toggleSelectAll(a,!0)},p.groupBy=function(a){if(a)l.groupBy(l.columns.filter(function(b){return b.field===a})[0]);else{var c=b.extend(!0,[],l.configGroups);angular.forEach(c,l.groupBy)}},p.sortBy=function(a){var b=l.columns.filter(function(b){return b.field===a})[0];b&&b.sort()},p.gridId=q.gridId,p.ngGrid=q,p.$gridScope=l,p.$gridServices={SortService:e,DomUtilityService:f,UtilityService:g},l.$on("ngGridEventDigestGrid",function(){f.digest(l.$parent)}),l.$on("ngGridEventDigestGridParent",function(){f.digest(l.$parent)}),l.$evalAsync(function(){l.adjustScrollLeft(0)}),angular.forEach(p.plugins,function(a){"function"==typeof a&&(a=new a),a.init(l.$new(),q,p.$gridServices),p.plugins[g.getInstanceType(a)]=a}),"function"==typeof p.init&&p.init(q,l),null})}}}};return l}]),p.directive("ngHeaderCell",["$compile",function(a){var b={scope:!1,compile:function(){return{pre:function(b,c){c.append(a(b.col.headerCellTemplate)(b))}}}};return b}]),p.directive("ngInput",[function(){return{require:"ngModel",link:function(a,b,c,d){var e,f=a.$watch("ngModel",function(){e=d.$modelValue,f()});b.bind("keydown",function(c){switch(c.keyCode){case 37:case 38:case 39:case 40:c.stopPropagation();break;case 27:a.$$phase||a.$apply(function(){d.$setViewValue(e),b.blur()});break;case 13:(a.enableCellEditOnFocus&&a.totalFilteredItemsLength()-1>a.row.rowIndex&&a.row.rowIndex>0||a.col.enableCellEdit)&&b.blur()}return!0}),b.bind("click",function(a){a.stopPropagation()}),b.bind("mousedown",function(a){a.stopPropagation()}),a.$on("ngGridEventStartCellEdit",function(){b.focus(),b.select()}),angular.element(b).bind("blur",function(){a.$emit("ngGridEventEndCellEdit")})}}}]),p.directive("ngRow",["$compile","$domUtilityService","$templateCache",function(a,b,c){var d={scope:!1,compile:function(){return{pre:function(d,e){if(d.row.elm=e,d.row.clone&&(d.row.clone.elm=e),d.row.isAggRow){var f=c.get(d.gridId+"aggregateTemplate.html");f=d.row.aggLabelFilter?f.replace(k,"| "+d.row.aggLabelFilter):f.replace(k,""),e.append(a(f)(d))}else e.append(a(c.get(d.gridId+"rowTemplate.html"))(d));d.$on("ngGridEventDigestRow",function(){b.digest(d)})}}}};return d}]),p.directive("ngViewport",[function(){return function(a,b){var c,d,e=0;b.bind("scroll",function(b){var f=b.target.scrollLeft,g=b.target.scrollTop;return a.$headerContainer&&a.$headerContainer.scrollLeft(f),a.adjustScrollLeft(f),a.adjustScrollTop(g),a.$root.$$phase||a.$digest(),d=f,e=g,c=!1,!0}),b.bind("mousewheel DOMMouseScroll",function(){return c=!0,b.focus&&b.focus(),!0}),a.enableCellSelection||a.domAccessProvider.selectionHandlers(a,b)}}]),a.ngGrid.i18n.da={ngAggregateLabel:"artikler",ngGroupPanelDescription:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil.",ngSearchPlaceHolder:"Søg...",ngMenuText:"Vælg kolonner:",ngShowingItemsLabel:"Viste rækker:",ngTotalItemsLabel:"Rækker totalt:",ngSelectedItemsLabel:"Valgte rækker:",ngPageSizeLabel:"Side størrelse:",ngPagerFirstTitle:"Første side",ngPagerNextTitle:"Næste side",ngPagerPrevTitle:"Forrige side",ngPagerLastTitle:"Sidste side"},a.ngGrid.i18n.de={ngAggregateLabel:"eintrag",ngGroupPanelDescription:"Ziehen Sie eine Spaltenüberschrift hierhin um nach dieser Spalte zu gruppieren.",ngSearchPlaceHolder:"Suche...",ngMenuText:"Spalten auswählen:",ngShowingItemsLabel:"Zeige Einträge:",ngTotalItemsLabel:"Einträge gesamt:",ngSelectedItemsLabel:"Ausgewählte Einträge:",ngPageSizeLabel:"Einträge pro Seite:",ngPagerFirstTitle:"Erste Seite",ngPagerNextTitle:"Nächste Seite",ngPagerPrevTitle:"Vorherige Seite",ngPagerLastTitle:"Letzte Seite"},a.ngGrid.i18n.en={ngAggregateLabel:"items",ngGroupPanelDescription:"Drag a column header here and drop it to group by that column.",ngSearchPlaceHolder:"Search...",ngMenuText:"Choose Columns:",ngShowingItemsLabel:"Showing Items:",ngTotalItemsLabel:"Total Items:",ngSelectedItemsLabel:"Selected Items:",ngPageSizeLabel:"Page Size:",ngPagerFirstTitle:"First Page",ngPagerNextTitle:"Next Page",ngPagerPrevTitle:"Previous Page",ngPagerLastTitle:"Last Page"},a.ngGrid.i18n.es={ngAggregateLabel:"Artículos",ngGroupPanelDescription:"Arrastre un encabezado de columna aquí y soltarlo para agrupar por esa columna.",ngSearchPlaceHolder:"Buscar...",ngMenuText:"Elegir columnas:",ngShowingItemsLabel:"Artículos Mostrando:",ngTotalItemsLabel:"Artículos Totales:",ngSelectedItemsLabel:"Artículos Seleccionados:",ngPageSizeLabel:"Tamaño de Página:",ngPagerFirstTitle:"Primera Página",ngPagerNextTitle:"Página Siguiente",ngPagerPrevTitle:"Página Anterior",ngPagerLastTitle:"Última Página"},a.ngGrid.i18n.fa={ngAggregateLabel:"موردها",ngGroupPanelDescription:"یک عنوان ستون اینجا را بردار و به گروهی از آن ستون بیانداز.",ngSearchPlaceHolder:"جستجو...",ngMenuText:"انتخاب ستون‌ها:",ngShowingItemsLabel:"نمایش موردها:",ngTotalItemsLabel:"همهٔ موردها:",ngSelectedItemsLabel:"موردهای انتخاب‌شده:",ngPageSizeLabel:"اندازهٔ صفحه:",ngPagerFirstTitle:"صفحهٔ اول",ngPagerNextTitle:"صفحهٔ بعد",ngPagerPrevTitle:"صفحهٔ قبل",ngPagerLastTitle:"آخرین صفحه"},a.ngGrid.i18n.fr={ngAggregateLabel:"articles",ngGroupPanelDescription:"Faites glisser un en-tête de colonne ici et déposez-le vers un groupe par cette colonne.",ngSearchPlaceHolder:"Recherche...",ngMenuText:"Choisir des colonnes:",ngShowingItemsLabel:"Articles Affichage des:",ngTotalItemsLabel:"Nombre total d'articles:",ngSelectedItemsLabel:"Éléments Articles:",ngPageSizeLabel:"Taille de page:",ngPagerFirstTitle:"Première page",ngPagerNextTitle:"Page Suivante",ngPagerPrevTitle:"Page précédente",ngPagerLastTitle:"Dernière page"},a.ngGrid.i18n["pt-br"]={ngAggregateLabel:"itens",ngGroupPanelDescription:"Arraste e solte uma coluna aqui para agrupar por essa coluna",ngSearchPlaceHolder:"Procurar...",ngMenuText:"Selecione as colunas:",ngShowingItemsLabel:"Mostrando os Itens:",ngTotalItemsLabel:"Total de Itens:",ngSelectedItemsLabel:"Items Selecionados:",ngPageSizeLabel:"Tamanho da Página:",ngPagerFirstTitle:"Primeira Página",ngPagerNextTitle:"Próxima Página",ngPagerPrevTitle:"Página Anterior",ngPagerLastTitle:"Última Página"},a.ngGrid.i18n["zh-cn"]={ngAggregateLabel:"条目",ngGroupPanelDescription:"拖曳表头到此处以进行分组",ngSearchPlaceHolder:"搜索...",ngMenuText:"数据分组与选择列：",ngShowingItemsLabel:"当前显示条目：",ngTotalItemsLabel:"条目总数：",ngSelectedItemsLabel:"选中条目：",ngPageSizeLabel:"每页显示数：",ngPagerFirstTitle:"回到首页",ngPagerNextTitle:"下一页",ngPagerPrevTitle:"上一页",ngPagerLastTitle:"前往尾页"},a.ngGrid.i18n["zh-tw"]={ngAggregateLabel:"筆",ngGroupPanelDescription:"拖拉表頭到此處以進行分組",ngSearchPlaceHolder:"搜尋...",ngMenuText:"選擇欄位：",ngShowingItemsLabel:"目前顯示筆數：",ngTotalItemsLabel:"總筆數：",ngSelectedItemsLabel:"選取筆數：",ngPageSizeLabel:"每頁顯示：",ngPagerFirstTitle:"第一頁",ngPagerNextTitle:"下一頁",ngPagerPrevTitle:"上一頁",ngPagerLastTitle:"最後頁"},angular.module("ngGrid").run(["$templateCache",function(a){a.put("aggregateTemplate.html",'<div ng-click="row.toggleExpand()" ng-style="rowStyle(row)" class="ngAggregate">\n    <span class="ngAggregateText">{{row.label CUSTOM_FILTERS}} ({{row.totalChildren()}} {{AggItemsLabel}})</span>\n    <div class="{{row.aggClass()}}"></div>\n</div>\n'),a.put("cellEditTemplate.html",'<div ng-cell-has-focus ng-dblclick="editCell()">\n	<div ng-edit-cell-if="!isFocused">	\n		DISPLAY_CELL_TEMPLATE\n	</div>\n	<div ng-edit-cell-if="isFocused">\n		EDITABLE_CELL_TEMPLATE\n	</div>\n</div>'),a.put("cellTemplate.html",'<div class="ngCellText" ng-class="col.colIndex()"><span ng-cell-text>{{COL_FIELD CUSTOM_FILTERS}}</span></div>'),a.put("checkboxCellTemplate.html",'<div class="ngSelectionCell"><input tabindex="-1" class="ngSelectionCheckbox" type="checkbox" ng-checked="row.selected" /></div>'),a.put("checkboxHeaderTemplate.html",'<input class="ngSelectionHeader" type="checkbox" ng-show="multiSelect" ng-model="allSelected" ng-change="toggleSelectAll(allSelected, true)"/>'),a.put("editableCellTemplate.html",'<input ng-class="\'colt\' + col.index" ng-input="COL_FIELD" ng-model="COL_FIELD" />'),a.put("footerTemplate.html",'<div ng-show="showFooter" class="ngFooterPanel" ng-class="{\'ui-widget-content\': jqueryUITheme, \'ui-corner-bottom\': jqueryUITheme}" ng-style="footerStyle()">\n    <div class="ngTotalSelectContainer" >\n        <div class="ngFooterTotalItems" ng-class="{\'ngNoMultiSelect\': !multiSelect}" >\n            <span class="ngLabel">{{i18n.ngTotalItemsLabel}} {{maxRows()}}</span><span ng-show="filterText.length > 0" class="ngLabel">({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span>\n        </div>\n        <div class="ngFooterSelectedItems" ng-show="multiSelect">\n            <span class="ngLabel">{{i18n.ngSelectedItemsLabel}} {{selectedItems.length}}</span>\n        </div>\n    </div>\n    <div class="ngPagerContainer" style="float: right; margin-top: 10px;" ng-show="enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}">\n        <div style="float:left; margin-right: 10px;" class="ngRowCountPicker">\n            <span style="float: left; margin-top: 3px;" class="ngLabel">{{i18n.ngPageSizeLabel}}</span>\n            <select style="float: left;height: 27px; width: 100px" ng-model="pagingOptions.pageSize" >\n                <option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option>\n            </select>\n        </div>\n        <div style="float:left; margin-right: 10px; line-height:25px;" class="ngPagerControl" style="float: left; min-width: 135px;">\n            <button type="button" class="ngPagerButton" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerFirstTitle}}"><div class="ngPagerFirstTriangle"><div class="ngPagerFirstBar"></div></div></button>\n            <button type="button" class="ngPagerButton" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerPrevTitle}}"><div class="ngPagerFirstTriangle ngPagerPrevTriangle"></div></button>\n            <input class="ngPagerCurrent" min="1" max="{{currentMaxPages}}" type="number" style="width:50px; height: 24px; margin-top: 1px; padding: 0 4px;" ng-model="pagingOptions.currentPage"/>\n            <button type="button" class="ngPagerButton" ng-click="pageForward()" ng-disabled="cantPageForward()" title="{{i18n.ngPagerNextTitle}}"><div class="ngPagerLastTriangle ngPagerNextTriangle"></div></button>\n            <button type="button" class="ngPagerButton" ng-click="pageToLast()" ng-disabled="cantPageToLast()" title="{{i18n.ngPagerLastTitle}}"><div class="ngPagerLastTriangle"><div class="ngPagerLastBar"></div></div></button>\n        </div>\n    </div>\n</div>\n'),a.put("gridTemplate.html",'<div class="ngTopPanel" ng-class="{\'ui-widget-header\':jqueryUITheme, \'ui-corner-top\': jqueryUITheme}" ng-style="topPanelStyle()">\n    <div class="ngGroupPanel" ng-show="showGroupPanel()" ng-style="groupPanelStyle()">\n        <div class="ngGroupPanelDescription" ng-show="configGroups.length == 0">{{i18n.ngGroupPanelDescription}}</div>\n        <ul ng-show="configGroups.length > 0" class="ngGroupList">\n            <li class="ngGroupItem" ng-repeat="group in configGroups">\n                <span class="ngGroupElement">\n                    <span class="ngGroupName">{{group.displayName}}\n                        <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span>\n                    </span>\n                    <span ng-hide="$last" class="ngGroupArrow"></span>\n                </span>\n            </li>\n        </ul>\n    </div>\n    <div class="ngHeaderContainer" ng-style="headerStyle()">\n        <div class="ngHeaderScroller" ng-style="headerScrollerStyle()" ng-include="gridId + \'headerRowTemplate.html\'"></div>\n    </div>\n    <div ng-grid-menu></div>\n</div>\n<div class="ngViewport" unselectable="on" ng-viewport ng-class="{\'ui-widget-content\': jqueryUITheme}" ng-style="viewportStyle()">\n    <div class="ngCanvas" ng-style="canvasStyle()">\n        <div ng-style="rowStyle(row)" ng-repeat="row in renderedRows" ng-click="row.toggleSelected($event)" ng-class="row.alternatingRowClass()" ng-row></div>\n    </div>\n</div>\n<div ng-grid-footer></div>\n'),a.put("headerCellTemplate.html",'<div class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }">\n    <div ng-click="col.sort($event)" ng-class="\'colt\' + col.index" class="ngHeaderText">{{col.displayName}}</div>\n    <div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div>\n    <div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div>\n    <div class="ngSortPriority">{{col.sortPriority}}</div>\n    <div ng-class="{ ngPinnedIcon: col.pinned, ngUnPinnedIcon: !col.pinned }" ng-click="togglePin(col)" ng-show="col.pinnable"></div>\n</div>\n<div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)"></div>'),a.put("headerRowTemplate.html",'<div ng-style="{ height: col.headerRowHeight }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngHeaderCell">\n	<div class="ngVerticalBar" ng-style="{height: col.headerRowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;</div>\n	<div ng-header-cell></div>\n</div>'),a.put("menuTemplate.html",'<div ng-show="showColumnMenu || showFilter"  class="ngHeaderButton" ng-click="toggleShowMenu()">\n    <div class="ngHeaderButtonArrow"></div>\n</div>\n<div ng-show="showMenu" class="ngColMenu">\n    <div ng-show="showFilter">\n        <input placeholder="{{i18n.ngSearchPlaceHolder}}" type="text" ng-model="filterText"/>\n    </div>\n    <div ng-show="showColumnMenu">\n        <span class="ngMenuText">{{i18n.ngMenuText}}</span>\n        <ul class="ngColList">\n            <li class="ngColListItem" ng-repeat="col in columns | ngColumns">\n                <label><input ng-disabled="col.pinned" type="checkbox" class="ngColListCheckbox" ng-model="col.visible"/>{{col.displayName}}</label>\n				<a title="Group By" ng-class="col.groupedByClass()" ng-show="col.groupable && col.visible" ng-click="groupBy(col)"></a>\n				<span class="ngGroupingNumber" ng-show="col.groupIndex > 0">{{col.groupIndex}}</span>          \n            </li>\n        </ul>\n    </div>\n</div>'),a.put("rowTemplate.html",'<div ng-style="{ \'cursor\': row.cursor }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngCell {{col.cellClass}}">\n	<div class="ngVerticalBar" ng-style="{height: rowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;</div>\n	<div ng-cell></div>\n</div>')
}])}(window,jQuery),function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f,g=b.parentNode,h=g.name;return b.href&&h&&"map"===g.nodeName.toLowerCase()?(f=a("img[usemap=#"+h+"]")[0],!!f&&d(f)):!1}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.24",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d,e=0;null!=(d=b[e]);e++)try{a(d).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e,f=b.split(".")[0];b=b.split(".")[1],e=f+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[f][b].prototype=a.extend(!0,g,{namespace:f,widgetName:b,widgetEventPrefix:a[f][b].prototype.widgetEventPrefix||b,widgetBaseClass:e},d),a.widget.bridge(b,a[f][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(this.each(f?function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;return f!==d&&f!==b?(h=f,!1):void 0}:function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent,f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1==c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.ui=a.ui||{};var b=/left|center|right/,c=/top|center|bottom/,d="center",e={},f=a.fn.position,g=a.fn.offset;a.fn.position=function(g){if(!g||!g.of)return f.apply(this,arguments);g=a.extend({},g);var h,i,j,k=a(g.of),l=k[0],m=(g.collision||"flip").split(" "),n=g.offset?g.offset.split(" "):[0,0];return 9===l.nodeType?(h=k.width(),i=k.height(),j={top:0,left:0}):l.setTimeout?(h=k.width(),i=k.height(),j={top:k.scrollTop(),left:k.scrollLeft()}):l.preventDefault?(g.at="left top",h=i=0,j={top:g.of.pageY,left:g.of.pageX}):(h=k.outerWidth(),i=k.outerHeight(),j=k.offset()),a.each(["my","at"],function(){var a=(g[this]||"").split(" ");1===a.length&&(a=b.test(a[0])?a.concat([d]):c.test(a[0])?[d].concat(a):[d,d]),a[0]=b.test(a[0])?a[0]:d,a[1]=c.test(a[1])?a[1]:d,g[this]=a}),1===m.length&&(m[1]=m[0]),n[0]=parseInt(n[0],10)||0,1===n.length&&(n[1]=n[0]),n[1]=parseInt(n[1],10)||0,"right"===g.at[0]?j.left+=h:g.at[0]===d&&(j.left+=h/2),"bottom"===g.at[1]?j.top+=i:g.at[1]===d&&(j.top+=i/2),j.left+=n[0],j.top+=n[1],this.each(function(){var b,c=a(this),f=c.outerWidth(),k=c.outerHeight(),l=parseInt(a.curCSS(this,"marginLeft",!0))||0,o=parseInt(a.curCSS(this,"marginTop",!0))||0,p=f+l+(parseInt(a.curCSS(this,"marginRight",!0))||0),q=k+o+(parseInt(a.curCSS(this,"marginBottom",!0))||0),r=a.extend({},j);"right"===g.my[0]?r.left-=f:g.my[0]===d&&(r.left-=f/2),"bottom"===g.my[1]?r.top-=k:g.my[1]===d&&(r.top-=k/2),e.fractions||(r.left=Math.round(r.left),r.top=Math.round(r.top)),b={left:r.left-l,top:r.top-o},a.each(["left","top"],function(c,d){a.ui.position[m[c]]&&a.ui.position[m[c]][d](r,{targetWidth:h,targetHeight:i,elemWidth:f,elemHeight:k,collisionPosition:b,collisionWidth:p,collisionHeight:q,offset:n,my:g.my,at:g.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(r,{using:g.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==d){var e=a(window),f=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft(),g="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,h="left"===c.at[0]?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0}},top:function(b,c){if(c.at[1]!==d){var e=a(window),f=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop(),g="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,h="top"===c.at[1]?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return c&&c.ownerDocument?b?this.each(a.isFunction(b)?function(c){a(this).offset(b.call(this,c,a(this).offset()))}:function(){a.offset.setOffset(this,b)}):g.call(this):null}),a.curCSS||(a.curCSS=a.css),function(){var b,c,d,f,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in d)b.style[j]=d[j];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",f=a(i).offset(function(a,b){return b}).offset(),b.innerHTML="",c.removeChild(b),g=f.top+f.left+(h?2e3:0),e.fractions=g>21&&22>g}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var c=a(b.containment),d=c[0];if(!d)return;var e=(c.offset(),"hidden"!=a(d).css("overflow"));this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h&&(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h&&(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.24"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("draggable"),d=c.options,e=!1;c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName?(d.axis&&"x"==d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"==d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"==d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"==d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(g>l-f&&m+f>g&&i>n-f&&o+f>i||g>l-f&&m+f>g&&j>n-f&&o+f>j||h>l-f&&m+f>h&&i>n-f&&o+f>i||h>l-f&&m+f>h&&j>n-f&&o+f>j){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if("outer"!=e.snapMode){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options,c=a.makeArray(a(b.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(c.length){var d=parseInt(c[0].style.zIndex)||0;a(c).each(function(a){this.style.zIndex=d+a}),this[0].style.zIndex=d+c.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;
d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.24"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return e>=i&&j>=f&&g>=k&&l>=h;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l)&&(e>=i&&j>=e||f>=i&&j>=f||i>e&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();a:for(var g=0;g<d.length;g++)if(!(d[g].options.disabled||b&&!d[g].accept.call(d[g].element[0],b.currentItem||b.element))){for(var h=0;h<f.length;h++)if(f[h]==d[g].element[0]){d[g].proportions.height=0;continue a}d[g].visible="none"!=d[g].element.css("display"),d[g].visible&&("mousedown"==e&&d[g]._activate.call(d[g],c),d[g].offset=d[g].element.offset(),d[g].proportions={width:d[g].element[0].offsetWidth,height:d[g].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance),e=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout";if(e){var f;if(this.options.greedy){var g=this.options.scope,h=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===g});h.length&&(f=a.data(h[0],"droppable"),f.greedyChild="isover"==e?1:0)}f&&"isover"==e&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this["isout"==e?"isover":"isout"]=0,this["isover"==e?"_over":"_out"].call(this,c),f&&"isout"==e&&(f.isout=0,f.isover=1,f._over.call(f,c))}}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){if(this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}a(this.handles[c]).length}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(c){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=b(this.helper.css("left")),h=b(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor","auto"==i?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c=this.helper,d=(this.options,this.originalMousePosition),e=this.axis,f=b.pageX-d.left||0,g=b.pageY-d.top||0,h=this._change[e];if(!h)return!1;{var i=h.apply(this,[b,f,g]);a.browser.msie&&a.browser.version<7,this.sizeDiff}return this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(i=this._updateRatio(i,b)),i=this._respectSize(i,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(i),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),d<g.maxWidth&&(g.maxWidth=d),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.options;this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=(this.options,this.position),d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"==e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a,b){var d=(this.helper,this._vBoundaries),e=(this._aspectRatio||b.shiftKey,this.axis),f=c(a.width)&&d.maxWidth&&d.maxWidth<a.width,g=c(a.height)&&d.maxHeight&&d.maxHeight<a.height,h=c(a.width)&&d.minWidth&&d.minWidth>a.width,i=c(a.height)&&d.minHeight&&d.minHeight>a.height;h&&(a.width=d.minWidth),i&&(a.height=d.minHeight),f&&(a.width=d.maxWidth),g&&(a.height=d.maxHeight);var j=this.originalPosition.left+this.originalSize.width,k=this.position.top+this.size.height,l=/sw|nw|w/.test(e),m=/nw|ne|n/.test(e);h&&l&&(a.left=j-d.minWidth),f&&l&&(a.left=j-d.maxWidth),i&&m&&(a.top=k-d.minHeight),g&&m&&(a.top=k-d.maxHeight);var n=!a.width&&!a.height;return n&&!a.left&&a.top?a.top=null:n&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var d=this._proportionallyResizeElements[c];if(!this.borderDif){var e=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],f=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=a.map(e,function(a,b){var c=parseInt(a,10)||0,d=parseInt(f[b],10)||0;return c+d})}a.browser.msie&&(a(b).is(":hidden")||a(b).parents(":hidden").length)||d.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.element,c=this.options;if(this.elementOffset=b.offset(),this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=(this.options,this.originalSize),d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=(this.options,this.originalSize),e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.24"}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c=a(this).data("resizable"),d=c.options,e=c.element,f=d.containment,g=f instanceof a?f.get(0):/parent/.test(f)?e.parent().get(0):f;if(g)if(c.containerElement=a(g),/document/.test(f)||f==document)c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var h=a(g),i=[];a(["Top","Right","Left","Bottom"]).each(function(a,c){i[a]=b(h.css("padding"+c))}),c.containerOffset=h.offset(),c.containerPosition=h.position(),c.containerSize={height:h.innerHeight()-i[3],width:h.innerWidth()-i[1]};var j=c.containerOffset,k=c.containerSize.height,l=c.containerSize.width,m=a.ui.hasScroll(g,"left")?g.scrollWidth:l,n=a.ui.hasScroll(g)?g.scrollHeight:k;c.parentData={element:g,left:j.left,top:j.top,width:m,height:n}}},resize:function(b){var c=a(this).data("resizable"),d=c.options,e=(c.containerSize,c.containerOffset),f=(c.size,c.position),g=c._aspectRatio||b.shiftKey,h={top:0,left:0},i=c.containerElement;i[0]!=document&&/static/.test(i.css("position"))&&(h=e),f.left<(c._helper?e.left:0)&&(c.size.width=c.size.width+(c._helper?c.position.left-e.left:c.position.left-h.left),g&&(c.size.height=c.size.width/c.aspectRatio),c.position.left=d.helper?e.left:0),f.top<(c._helper?e.top:0)&&(c.size.height=c.size.height+(c._helper?c.position.top-e.top:c.position.top),g&&(c.size.width=c.size.height*c.aspectRatio),c.position.top=c._helper?e.top:0),c.offset.left=c.parentData.left+c.position.left,c.offset.top=c.parentData.top+c.position.top;var j=Math.abs((c._helper?c.offset.left-h.left:c.offset.left-h.left)+c.sizeDiff.width),k=Math.abs((c._helper?c.offset.top-h.top:c.offset.top-e.top)+c.sizeDiff.height),l=c.containerElement.get(0)==c.element.parent().get(0),m=/relative|absolute/.test(c.containerElement.css("position"));l&&m&&(j-=c.parentData.left),j+c.size.width>=c.parentData.width&&(c.size.width=c.parentData.width-j,g&&(c.size.height=c.size.width/c.aspectRatio)),k+c.size.height>=c.parentData.height&&(c.size.height=c.parentData.height-k,g&&(c.size.width=c.size.height*c.aspectRatio))},stop:function(){var b=a(this).data("resizable"),c=b.options,d=(b.position,b.containerOffset),e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){{var b=a(this).data("resizable");b.options}b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){{var b=a(this).data("resizable");b.options}b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b){{var c=a(this).data("resizable"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis;d._aspectRatio||b.shiftKey}d.grid="number"==typeof d.grid?[d.grid,d.grid]:d.grid;var i=Math.round((e.width-f.width)/(d.grid[0]||1))*(d.grid[0]||1),j=Math.round((e.height-f.height)/(d.grid[1]||1))*(d.grid[1]||1);/^(se|s|e)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j):/^(ne)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j,c.position.top=g.top-j):/^(sw)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j,c.position.left=g.left-i):(c.size.width=f.width+i,c.size.height=f.height+j,c.position.top=g.top-j,c.position.left=g.left-i)}});var b=function(a){return parseInt(a,10)||0},c=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;if(this.opos=[b.pageX,b.pageY],!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var c=this;if(this.dragged=!0,!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(i&&i.element!=c.element[0]){var j=!1;"touch"==d.tolerance?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):"fit"==d.tolerance&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!b.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element})))}}),!1}},_mouseStop:function(b){var c=this;this.dragged=!1;this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.24"})}(jQuery),function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);{var e=null,f=this;a(b.target).parents().each(function(){return a.data(this,d.widgetName+"-item")==f?(e=a(this),!1):void 0})}if(a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target)),!e)return!1;if(this.options.handle&&!c){var g=!1;if(a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(g=!0)}),!g)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)
}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(h&&f.instance===this.currentContainer&&g!=this.currentItem[0]&&this.placeholder[1==h?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&("semi-dynamic"==this.options.type?!a.ui.contains(this.element[0],g):!0)){if(this.direction=1==h?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(f))break;this._rearrange(b,f),this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&i>d+j&&b+k>f&&g>b+k;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"==g||"down"==f?2:1:f&&("down"==f?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&d||"left"==f&&!d:e&&("down"==e&&c||"up"==e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=[],d=[],e=this._connectWith();if(e&&b)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],this.widgetName);i&&i!=this&&!i.options.disabled&&d.push([a.isFunction(i.options.items)?i.options.items.call(i.element):a(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i])}d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var f=d.length-1;f>=0;f--)d[f][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],e=this._connectWith();if(e&&this.ready)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],this.widgetName);i&&i!=this&&!i.options.disabled&&(d.push([a.isFunction(i.options.items)?i.options.items.call(i.element[0],b,{item:this.currentItem}):a(i.options.items,i.element),i]),this.containers.push(i))}for(var f=d.length-1;f>=0;f--)for(var j=d[f][1],k=d[f][0],h=0,l=k.length;l>h;h++){var m=a(k[h]);m.data(this.widgetName+"-item",j),c.push({item:m,instance:j,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){(!e||d.forcePlaceholderSize)&&(b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=null,d=null,e=this.containers.length-1;e>=0;e--)if(!a.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"],i=this.items.length-1;i>=0;i--)if(a.ui.contains(this.containers[d].element[0],this.items[i].item[0])){var j=this.containers[d].floating?this.items[i].item.offset().left:this.items[i].item.offset().top;Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i],this.direction=j-h>0?"down":"up")}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(""==d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e="hidden"!=a(c).css("overflow");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid)){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment&&(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment&&(i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2])?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)("auto"==this._storedCSS[e]||"static"==this._storedCSS[e])&&(this._storedCSS[e]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(c||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))));for(var e=this.containers.length-1;e>=0;e--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);if(this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!1}if(c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!c){for(var e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.24"})}(jQuery),function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;if(b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");b.active=e.length?e:d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"active"==b&&this.activate(c),"icons"==b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"==b&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(!(this.options.disabled||b.altKey||b.ctrlKey)){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return f?(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0}},resize:function(){var b,c=this.options;if(c.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}b=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else c.autoHeight&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).height("").height())}).height(b));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?"number"==typeof b?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(!d.disabled){if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);return void this._toggle(g,e,f)}var h=a(b.currentTarget||c),i=h[0]===this.active[0];if(d.active=d.collapsible&&i?!1:this.headers.index(h),!(this.running||!d.collapsible&&i)){var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"))}}},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){return g?g._completed.apply(g,arguments):void 0};if(g._trigger("changestart",null,g.data),g.running=0===c.size()?b.size():c.size(),h.animated){var j={};j=h.collapsible&&e?{toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:{toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),a.extend(a.ui.accordion,{version:"1.8.24",animations:{slide:function(b,c){if(b=a.extend({easing:"swing",duration:300},b,c),!b.toHide.size())return void b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);if(!b.toShow.size())return void b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);var d,e=b.toShow.css("overflow"),f=0,g={},h={},i=["height","paddingTop","paddingBottom"],j=b.toShow;d=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(i,function(c,d){h[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);g[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(h,{step:function(a,c){"height"==c.prop&&(f=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=f*g[c.prop].value+g[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:d,overflow:e}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}(jQuery),function(a){var b=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b,c=this,d=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){if(!c.options.disabled&&!c.element.propAttr("readOnly")){b=!1;var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:c._move("previousPage",d);break;case e.PAGE_DOWN:c._move("nextPage",d);break;case e.UP:c._keyEvent("previous",d);break;case e.DOWN:c._keyEvent("next",d);break;case e.ENTER:case e.NUMPAD_ENTER:c.menu.active&&(b=!0,d.preventDefault());case e.TAB:if(!c.menu.active)return;c.menu.select(d);break;case e.ESCAPE:c.element.val(c.term),c.close(d);break;default:clearTimeout(c.searching),c.searching=setTimeout(function(){c.term!=c.element.val()&&(c.selectedItem=null,c.search(null,d))},c.options.delay)}}}).bind("keypress.autocomplete",function(a){b&&(b=!1,a.preventDefault())}).bind("focus.autocomplete",function(){c.options.disabled||(c.selectedItem=null,c.previous=c.element.val())}).bind("blur.autocomplete",function(a){c.options.disabled||(clearTimeout(c.searching),c.closing=setTimeout(function(){c.close(a),c._change(a)},150))}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",d)[0]).mousedown(function(b){var d=c.menu.element[0];a(b.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(b){b.target!==c.element[0]&&b.target!==d&&!a.ui.contains(d,b.target)&&c.close()})},1),setTimeout(function(){clearTimeout(c.closing)},13)}).menu({focus:function(a,b){var d=b.item.data("item.autocomplete");!1!==c._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&c.element.val(d.value)},selected:function(a,b){var e=b.item.data("item.autocomplete"),f=c.previous;c.element[0]!==d.activeElement&&(c.element.focus(),c.previous=f,setTimeout(function(){c.previous=f,c.selectedItem=e},1)),!1!==c._trigger("select",a,{item:e})&&c.element.val(e.value),c.term=c.element.val(),c.close(a),c.selectedItem=e},blur:function(){c.menu.element.is(":visible")&&c.element.val()!==c.term&&c.element.val(c.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),c.beforeunloadHandler=function(){c.element.removeAttr("autocomplete")},a(window).bind("beforeunload",c.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"source"===b&&this._initSource(),"appendTo"===b&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),"disabled"===b&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){return a=null!=a?a:this.element.val(),this.term=this.element.val(),a.length<this.options.minLength?this.close(b):(clearTimeout(this.closing),this._trigger("search",b)!==!1?this._search(a):void 0)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(d){c===b&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)
})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),b.select(c))}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){if(this.deactivate(),this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();0>c?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active)return void this.activate(c,this.element.children(b));var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(b,this.element.children(".ui-menu-item:first"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(b,this.element.children(".ui-menu-item:last"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery),function(a){var b,c,d,e,f="ui-button ui-widget ui-state-default ui-corner-all",g="ui-state-hover ui-state-active ",h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",i=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},j=function(b){var c=b.name,d=b.form,e=a([]);return c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",i),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var g=this,h=this.options,k="checkbox"===this.type||"radio"===this.type,l="ui-state-hover"+(k?"":" ui-state-active"),m="ui-state-focus";null===h.label&&(h.label=this.buttonElement.html()),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter.button",function(){h.disabled||(a(this).addClass("ui-state-hover"),this===b&&a(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){h.disabled||a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){g.buttonElement.addClass(m)}).bind("blur.button",function(){g.buttonElement.removeClass(m)}),k&&(this.element.bind("change.button",function(){e||g.refresh()}),this.buttonElement.bind("mousedown.button",function(a){h.disabled||(e=!1,c=a.pageX,d=a.pageY)}).bind("mouseup.button",function(a){h.disabled||(c!==a.pageX||d!==a.pageY)&&(e=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return h.disabled||e?!1:(a(this).toggleClass("ui-state-active"),void g.buttonElement.attr("aria-pressed",g.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(h.disabled||e)return!1;a(this).addClass("ui-state-active"),g.buttonElement.attr("aria-pressed","true");var b=g.element[0];j(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),b=this,a(document).one("mouseup",function(){b=null}),void 0)}).bind("mouseup.button",function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){return h.disabled?!1:void((b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" "+g+" "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){return a.Widget.prototype._setOption.apply(this,arguments),"disabled"===b?void(c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?j(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(h),c=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){"disabled"===b&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}(jQuery),function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;{var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),h=(b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g)),i=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).focus(function(){i.addClass("ui-state-focus")}).blur(function(){i.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(h);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(i),a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(h)}a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),h.find("*").add(h).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c,d,e=this;if(!1!==e._trigger("beforeClose",b))return e.overlay&&e.overlay.destroy(),e.uiDialog.unbind("keypress.ui-dialog"),e._isOpen=!1,e.options.hide?e.uiDialog.hide(e.options.hide,function(){e._trigger("close",b)}):(e.uiDialog.hide(),e._trigger("close",b)),a.ui.dialog.overlay.resize(),e.options.modal&&(c=0,a(".ui-dialog").each(function(){this!==e.uiDialog[0]&&(d=a(this).css("z-index"),isNaN(d)||(c=Math.max(c,d)))}),a.ui.dialog.maxZ=c),e},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d,e=this,f=e.options;return f.modal&&!b||!f.stack&&!f.modal?e._trigger("focus",c):(f.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=f.zIndex),e.overlay&&(a.ui.dialog.maxZ+=1,e.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),d={scrollTop:e.element.scrollTop(),scrollLeft:e.element.scrollLeft()},a.ui.dialog.maxZ+=1,e.uiDialog.css("z-index",a.ui.dialog.maxZ),e.element.attr(d),e._trigger("focus",c),e)},open:function(){if(!this._isOpen){var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");return b.target!==e[0]||b.shiftKey?b.target===d[0]&&b.shiftKey?(e.focus(1),!1):void 0:(d.focus(1),!1)}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b}},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof b&&null!==b&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f);a.each(d,function(a,b){"click"!==a&&(a in e?e[a](b):e.attr(a,b))}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c,d=this,e=d.options,f=a(document);d.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,g){c="auto"===e.height?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),d._trigger("dragStart",f,b(g))},drag:function(a,c){d._trigger("drag",a,b(c))},stop:function(g,h){e.position=[h.position.left-f.scrollLeft(),h.position.top-f.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(c),d._trigger("dragStop",g,b(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var e=this,f=e.options,g=e.uiDialog.css("position"),h="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw";e.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:e.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:e._minHeight(),handles:h,start:function(b,c){a(this).addClass("ui-dialog-resizing"),e._trigger("resizeStart",b,d(c))},resize:function(a,b){e._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),f.height=a(this).height(),f.width=a(this).width(),e._trigger("resizeStop",b,d(c)),a.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c,d=[],e=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(d=b.split?b.split(" "):[b[0],b[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),b={my:d.join(" "),at:d.join(" "),offset:e.join(" ")}),b=a.extend({},a.ui.dialog.prototype.options.position,b)):b=a.ui.dialog.prototype.options.position,c=this.uiDialog.is(":visible"),c||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),c||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&"string"==typeof d&&f.resizable("option","handles",d),!h&&d!==!1&&e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var b,c,d=this.options,e=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),d.minWidth>d.width&&(d.width=d.minWidth),b=this.uiDialog.css({height:"auto",width:d.width}).height(),c=Math.max(0,d.minHeight-b),"auto"===d.height)if(a.support.minHeight)this.element.css({minHeight:c,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,c))}else this.element.height(Math.max(d.height-b,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){return a(b.target).zIndex()<a.ui.dialog.overlay.maxZ?!1:void 0})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]),0===this.instances.length&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),c>b?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),c>b?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var c=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));for(var i=e.length;g>i;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(c.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var e,f,g,h,i=a(this).data("index.ui-slider-handle");if(!c.options.disabled){switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d.preventDefault(),!c._keySliding&&(c._keySliding=!0,a(this).addClass("ui-state-active"),e=c._start(d,i),e===!1))return}switch(h=c.options.step,f=g=c.options.values&&c.options.values.length?c.values(i):c.value(),d.keyCode){case a.ui.keyCode.HOME:g=c._valueMin();break;case a.ui.keyCode.END:g=c._valueMax();break;case a.ui.keyCode.PAGE_UP:g=c._trimAlignValue(f+(c._valueMax()-c._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:g=c._trimAlignValue(f-(c._valueMax()-c._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(f===c._valueMax())return;g=c._trimAlignValue(f+h);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(f===c._valueMin())return;g=c._trimAlignValue(f-h)}c._slide(d,i,g)}}).keyup(function(b){var d=a(this).data("index.ui-slider-handle");c._keySliding&&(c._keySliding=!1,c._stop(b,d),c._change(b,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,g=this,this.handles.each(function(b){var c=Math.abs(d-g.values(b));e>c&&(e=c,f=a(this),h=b)}),l.range===!0&&this.values(1)===l.min&&(h+=1,f=a(this.handles[h])),i=this._start(b,h),i===!1?!1:(this._mouseSliding=!0,g._handleIndex=h,f.addClass("ui-state-active").focus(),j=f.offset(),k=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=k?{left:0,top:0}:{left:b.pageX-j.left-f.width()/2,top:b.pageY-j.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,h,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b),void 0;if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch(a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){b=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:b-c+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:b-c+"%"},{queue:!1,duration:h.animate}))),c=b}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),b=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:b+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-b+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:b+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-b+"%"},{queue:!1,duration:h.animate}))}}),a.extend(a.ui.slider,{version:"1.8.24"})}(jQuery),function(a,b){function c(){return++e}function d(){return++f}var e=0,f=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if("selected"==a){if(this.options.collapsible&&b==this.options.selected)return;
this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+c()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+d());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function d(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var e=this,f=this.options,g=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var d,h=a(c).attr("href"),i=h.split("#")[0];if(i&&(i===location.toString().split("#")[0]||(d=a("base")[0])&&i===d.href)&&(h=c.hash,c.href=h),g.test(h))e.panels=e.panels.add(e.element.find(e._sanitizeSelector(h)));else if(h&&"#"!==h){a.data(c,"href.tabs",h),a.data(c,"load.tabs",h.replace(/#.*$/,""));var j=e._tabId(c);c.href="#"+j;var k=e.element.find("#"+j);k.length||(k=a(f.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(e.panels[b-1]||e.list),k.data("destroy.tabs",!0)),e.panels=e.panels.add(k)}else f.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),f.selected===b?(location.hash&&this.anchors.each(function(a,b){return b.hash==location.hash?(f.selected=a,!1):void 0}),"number"!=typeof f.selected&&f.cookie&&(f.selected=parseInt(e._cookie(),10)),"number"!=typeof f.selected&&this.lis.filter(".ui-tabs-selected").length&&(f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),f.selected=f.selected||(this.lis.length?0:-1)):null===f.selected&&(f.selected=-1),f.selected=f.selected>=0&&this.anchors[f.selected]||f.selected<0?f.selected:0,f.disabled=a.unique(f.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a){return e.lis.index(a)}))).sort(),-1!=a.inArray(f.selected,f.disabled)&&f.disabled.splice(a.inArray(f.selected,f.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),f.selected>=0&&this.anchors.length&&(e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(f.selected).addClass("ui-tabs-selected ui-state-active"),e.element.queue("tabs",function(){e._trigger("show",null,e._ui(e.anchors[f.selected],e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash))[0]))}),this.load(f.selected)),a(window).bind("unload",function(){e.lis.add(e.anchors).unbind(".tabs"),e.lis=e.anchors=e.panels=null})):f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[f.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),f.cookie&&this._cookie(f.selected,f.cookie);for(var h,i=0;h=this.lis[i];i++)a(h)[-1==a.inArray(i,f.disabled)||a(h).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(f.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==f.event){var j=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},k=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){j("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){k("hover",a(this))}),this.anchors.bind("focus.tabs",function(){j("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){k("focus",a(this).closest("li"))})}var l,m;f.fx&&(a.isArray(f.fx)?(l=f.fx[0],m=f.fx[1]):l=m=f.fx);var n=m?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(m,m.duration||"normal",function(){d(c,m),e._trigger("show",null,e._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),e._trigger("show",null,e._ui(b,c[0]))},o=l?function(a,b){b.animate(l,l.duration||"normal",function(){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d(b,l),e.element.dequeue("tabs")})}:function(a,b){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),e.element.dequeue("tabs")};this.anchors.bind(f.event+".tabs",function(){var b=this,c=a(b).closest("li"),d=e.panels.filter(":not(.ui-tabs-hide)"),g=e.element.find(e._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!f.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||e.panels.filter(":animated").length||e._trigger("select",null,e._ui(this,g[0]))===!1)return this.blur(),!1;if(f.selected=e.anchors.index(this),e.abort(),f.collapsible){if(c.hasClass("ui-tabs-selected"))return f.selected=-1,f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){o(b,d)}).dequeue("tabs"),this.blur(),!1;if(!d.length)return f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){n(b,g)}),e.load(e.anchors.index(this)),this.blur(),!1}if(f.cookie&&e._cookie(f.selected,f.cookie),!g.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";d.length&&e.element.queue("tabs",function(){o(b,d)}),e.element.queue("tabs",function(){n(b,g)}),e.load(e.anchors.index(this)),a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a){return a>=e?++a:a}),this._tabify(),1==this.anchors.length&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a){return a!=b}),function(a){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(-1!=a.inArray(b,c.disabled))return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var b=this.options;return a!=b.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),b.disabled.push(a),b.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){if(a=this._getIndex(a),-1==a){if(!this.options.collapsible||-1==this.options.selected)return this;a=this.options.selected}return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");if(this.abort(),!f||0!==this.element.queue("tabs").length&&a.data(e,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(b).addClass("ui-state-processing"),d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.24"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(){e()}:function(a){a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);c.length&&c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);!$.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])&&d.length&&(d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover"))})}function extendRemove(a,b){$.extend(a,b);for(var c in b)(null==b[c]||b[c]==undefined)&&(a[c]=b[c]);return a}function isArray(a){return a&&($.browser.safari&&"object"==typeof a&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.24"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");if(("focus"==e||"both"==e)&&a.focus(this._showDatepicker),"button"==e||"both"==e){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==g?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}if(extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),"input"==d?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==d||"span"==d)&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?$.extend({},$.datepicker._defaults):d?"all"==b?$.extend({},d.settings):this._get(d,b):null;var e=b||{};if("string"==typeof b&&(e={},e[b]=c),d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),null!==g&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),null!==h&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");if(b._keyEvent=!0,$.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">d||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}return!0},_showDatepicker:function(a){if(a=a.target||a,"input"!=a.nodeName.toLowerCase()&&(a=$("input",a.parentNode)[0]),!$.datepicker._isDisabledDatepicker(a)&&$.datepicker._lastInput!=a){var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d!==!1){extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|="fixed"==$(this).css("position"),!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}}}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a)),this._attachHandlers(a);var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;if(a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(1!=e[0]||1!=e[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus(),a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+(c?0:$(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:$(document).scrollTop());return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){for(var b=this._getInst(a),c=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||$.expr.filters.hidden(a));)a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b==$.data(a,PROP_NAME))&&this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv["slideDown"==c?"slideUp":"fadeIn"==c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if($.datepicker._curInst){var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&0==b.parents("#"+$.datepicker._mainDivId).length&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);this._isDisabledDatepicker(d[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if(!$(d).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(e[0])){var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){{var b=$(a);this._getInst(b[0])}this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=null!=b?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";if(b="object"==typeof b?b.toString():b+"",""==b)return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10);for(var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d="@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;
return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;if($.each(e,function(a,c){var d=c[1];return b.substr(r,d.length).toLowerCase()==d.toLowerCase()?(f=c[0],r+=d.length,!1):void 0}),-1!=f)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0,s=0;s<a.length;s++)if(m)"'"!=a.charAt(s)||n("'")?q():m=!1;else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);if(-1==i?i=(new Date).getFullYear():100>i&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=i?0:-100)),l>-1)for(j=1,k=l;;){var u=this._getDaysInMonth(i,j-1);if(u>=k)break;j++,k-=u}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))for(;d.length<c;)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)"'"!=a.charAt(m)||h("'")?k+=a.charAt(m):l=!1;else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=1e4*b.getTime()+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){for(var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):c=!1;else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c,d,e=this._get(a,"dateFormat"),f=a.lastVal=a.input?a.input.val():null;c=d=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{c=this.parseDate(e,f,g)||d}catch(h){this.log(h),f=b?"":f}a.selectedDay=c.getDate(),a.drawMonth=a.selectedMonth=c.getMonth(),a.drawYear=a.selectedYear=c.getFullYear(),a.currentDay=f?c.getDate():0,a.currentMonth=f?c.getMonth():0,a.currentYear=f?c.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}for(var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);i;){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=7*parseInt(i[1],10);break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=null==b||""===b?c:"string"==typeof b?e(b):"number"==typeof b?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&"Invalid Date"==f.toString()?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){var a={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(c)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),a[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=1!=g[0]||1!=g[1],k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;if(0>n&&(n+=12,o--),m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));for(p=l&&l>p?l:p;this._daylightSavingAdjust(new Date(o,n,1))>p;)n--,0>n&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;for(var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=(this._get(a,"dayNamesShort"),this._get(a,"dayNamesMin")),C=this._get(a,"monthNames"),D=this._get(a,"monthNamesShort"),E=this._get(a,"beforeShowDay"),F=this._get(a,"showOtherMonths"),G=this._get(a,"selectOtherMonths"),H=(this._get(a,"calculateWeek")||this.iso8601Week,this._getDefaultDate(a)),I="",J=0;J<g[0];J++){var K="";this.maxRows=4;for(var L=0;L<g[1];L++){var M=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),N=" ui-corner-all",O="";if(j){if(O+='<div class="ui-datepicker-group',g[1]>1)switch(L){case 0:O+=" ui-datepicker-group-first",N=" ui-corner-"+(c?"right":"left");break;case g[1]-1:O+=" ui-datepicker-group-last",N=" ui-corner-"+(c?"left":"right");break;default:O+=" ui-datepicker-group-middle",N=""}O+='">'}O+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+N+'">'+(/all|left/.test(N)&&0==J?c?t:r:"")+(/all|right/.test(N)&&0==J?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,J>0||L>0,C,D)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var P=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",Q=0;7>Q;Q++){var R=(Q+y)%7;P+="<th"+((Q+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[R]+'">'+B[R]+"</span></th>"}O+=P+"</tr></thead><tbody>";var S=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,S));var T=(this._getFirstDayOfMonth(o,n)-y+7)%7,U=Math.ceil((T+S)/7),V=j&&this.maxRows>U?this.maxRows:U;this.maxRows=V;for(var W=this._daylightSavingAdjust(new Date(o,n,1-T)),X=0;V>X;X++){O+="<tr>";for(var Y=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(W)+"</td>":"",Q=0;7>Q;Q++){var Z=E?E.apply(a.input?a.input[0]:null,[W]):[!0,""],_=W.getMonth()!=n,ab=_&&!G||!Z[0]||l&&l>W||m&&W>m;Y+='<td class="'+((Q+y+6)%7>=5?" ui-datepicker-week-end":"")+(_?" ui-datepicker-other-month":"")+(W.getTime()==M.getTime()&&n==a.selectedMonth&&a._keyEvent||H.getTime()==W.getTime()&&H.getTime()==M.getTime()?" "+this._dayOverClass:"")+(ab?" "+this._unselectableClass+" ui-state-disabled":"")+(_&&!F?"":" "+Z[1]+(W.getTime()==k.getTime()?" "+this._currentClass:"")+(W.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+(_&&!F||!Z[2]?"":' title="'+Z[2]+'"')+(ab?"":' data-handler="selectDay" data-event="click" data-month="'+W.getMonth()+'" data-year="'+W.getFullYear()+'"')+">"+(_&&!F?"&#xa0;":ab?'<span class="ui-state-default">'+W.getDate()+"</span>":'<a class="ui-state-default'+(W.getTime()==b.getTime()?" ui-state-highlight":"")+(W.getTime()==k.getTime()?" ui-state-active":"")+(_?" ui-priority-secondary":"")+'" href="#">'+W.getDate()+"</a>")+"</td>",W.setDate(W.getDate()+1),W=this._daylightSavingAdjust(W)}O+=Y+"</tr>"}n++,n>11&&(n=0,o++),O+="</tbody></table>"+(j?"</div>"+(g[0]>0&&L==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),K+=O}I+=K}return I+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,I},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var p=0;12>p;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}if(k||(l+=m+(!f&&i&&j?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));for(t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';u>=t;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}return l+=this._get(a,"yearSuffix"),k&&(l+=(!f&&i&&j?"":"&#xa0;")+m),l+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return e=d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"!=typeof a||"isDisabled"!=a&&"getDate"!=a&&"widget"!=a?"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.24",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){"value"===b&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return"number"!=typeof a&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.24"})}(jQuery),jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?j.transparent:j[a.trim(b).toLowerCase()]}function d(b,d){var e;do{if(e=(a.curCSS||a.css)(b,d),""!=e&&"transparent"!=e||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function e(){var a,b,c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,d={};if(c&&c.length&&c[0]&&c[c[0]])for(var e=c.length;e--;)a=c[e],"string"==typeof c[a]&&(b=a.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),d[b]=c[a]);else for(a in c)"string"==typeof c[a]&&(d[a]=c[a]);return d}function f(b){var c,d;for(c in b)d=b[c],(null==d||a.isFunction(d)||c in l||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c,d={_:0};for(c in b)a[c]!=b[c]&&(d[c]=b[c]);return d}function h(b,c,d,e){return"object"==typeof b&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function i(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects[b]?!1:!0}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){return a.isFunction(d)&&(h=d,d=null),this.queue(function(){var i,j=a(this),l=j.attr("style")||" ",m=f(e.call(this)),n=j.attr("class")||"";a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),i=f(e.call(this)),j.attr("class",n),j.animate(g(m,i),{queue:!1,duration:c,easing:d,complete:function(){a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),"object"==typeof j.attr("style")?(j.attr("style").cssText="",j.attr("style").cssText=l):j.attr("style",l),h&&h.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return"boolean"==typeof d||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.24",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b){var c=h.apply(this,arguments),d={options:c[1],duration:c[2],callback:c[3]},e=d.options.mode,f=a.effects[b];return a.fx.off||!f?e?this[e](d.duration,d.callback):this.each(function(){d.callback&&d.callback.call(this)}):f.call(this,d)},_show:a.fn.show,show:function(a){if(i(a))return this._show.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(i(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(i(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=h.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}});var m={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){m[b]=function(b){return Math.pow(b,a+2)}}),a.extend(m,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(m,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:c(-2*a+2)/-2+1}})}(jQuery),function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="vertical"==f?"height":"width",i="vertical"==f?g.height():g.width();"show"==e&&g.css(h,0);var j={};j[h]="show"==e?i:0,g.animate(j,b.duration,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j="up"==f||"down"==f?"top":"left",k="up"==f||"left"==f?"pos":"neg",g=b.options.distance||("top"==j?c.outerHeight(!0)/3:c.outerWidth(!0)/3);if("show"==e&&c.css("opacity",0).css(j,"pos"==k?-g:g),"hide"==e&&(g/=2*h),"hide"!=e&&h--,"show"==e){var l={opacity:1};l[j]=("pos"==k?"+=":"-=")+g,c.animate(l,i/2,b.options.easing),g/=2,h--}for(var m=0;h>m;m++){var n={},o={};n[j]=("pos"==k?"-=":"+=")+g,o[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(o,i/2,b.options.easing),g="hide"==e?2*g:g/2}if("hide"==e){var l={opacity:0};l[j]=("pos"==k?"-=":"+=")+g,c.animate(l,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var n={},o={};n[j]=("pos"==k?"-=":"+=")+g,o[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(o,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="IMG"==c[0].tagName?g:c,i={size:"vertical"==f?"height":"width",position:"vertical"==f?"top":"left"},j="vertical"==f?h.height():h.width();"show"==e&&(h.css(i.size,0),h.css(i.position,j/2));var k={};k[i.size]="show"==e?j:0,k[i.position]="show"==e?0:j/2,h.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0)/2:c.outerWidth(!0)/2);"show"==e&&c.css("opacity",0).css(g,"pos"==h?-i:i);var j={opacity:"show"==e?1:0};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode="toggle"==b.options.mode?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;for(var g=e.outerWidth(!0),h=e.outerHeight(!0),i=0;c>i;i++)for(var j=0;d>j;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+("show"==b.options.mode?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+("show"==b.options.mode?(i-Math.floor(c/2))*(h/c):0),opacity:"show"==b.options.mode?0:1}).animate({left:f.left+j*(g/d)+("show"==b.options.mode?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+("show"==b.options.mode?0:(i-Math.floor(c/2))*(h/c)),opacity:"show"==b.options.mode?1:0},b.duration||500);setTimeout(function(){"show"==b.options.mode?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}}(jQuery),function(a){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,g=!!b.options.horizFirst,h=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d),c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),j="show"==e!=g,k=j?["width","height"]:["height","width"],l=j?[i.width(),i.height()]:[i.height(),i.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],10)/100*l["hide"==e?0:1]),"show"==e&&i.css(g?{height:0,width:f}:{height:f,width:0});var n={},o={};n[k[0]]="show"==e?l[0]:f,o[k[1]]="show"==e?l[1]:0,i.animate(n,h,b.options.easing).animate(o,h,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};"hide"==e&&(f.opacity=0),a.effects.save(c,d),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),"show"==e&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()
}})})}}(jQuery),function(a){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show"),e=2*(b.options.times||5)-1,f=b.duration?b.duration/2:a.fx.speeds._default/2,g=c.is(":visible"),h=0;g||(c.css("opacity",0).show(),h=1),("hide"==d&&g||"show"==d&&!g)&&e--;for(var i=0;e>i;i++)c.animate({opacity:h},f,b.options.easing),h=(h+1)%2;c.animate({opacity:h},f,b.options.easing,function(){0==h&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}}(jQuery),function(a){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?g:{height:g.height*f,width:g.width*f}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),g=b.options.direction||"both",h=b.options.origin;"effect"!=e&&(d.origin=h||["middle","center"],d.restore=!0);var i={height:c.height(),width:c.width()};c.from=b.options.from||("show"==e?{height:0,width:0}:i);var j={y:"horizontal"!=g?f/100:1,x:"vertical"!=g?f/100:1};c.to={height:i.height*j.y,width:i.width*j.x},b.options.fade&&("show"==e&&(c.from.opacity=0,c.to.opacity=1),"hide"==e&&(c.from.opacity=1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],e=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],g=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],j=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,l=b.options.scale||"both",m=b.options.origin,n={height:c.height(),width:c.width()};if(c.from=b.options.from||n,c.to=b.options.to||n,m){var o=a.effects.getBaseline(m,n);c.from.top=(n.height-c.from.height)*o.y,c.from.left=(n.width-c.from.width)*o.x,c.to.top=(n.height-c.to.height)*o.y,c.to.left=(n.width-c.to.width)*o.x}var p={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};("box"==l||"both"==l)&&(p.from.y!=p.to.y&&(d=d.concat(h),c.from=a.effects.setTransition(c,h,p.from.y,c.from),c.to=a.effects.setTransition(c,h,p.to.y,c.to)),p.from.x!=p.to.x&&(d=d.concat(i),c.from=a.effects.setTransition(c,i,p.from.x,c.from),c.to=a.effects.setTransition(c,i,p.to.x,c.to))),("content"==l||"both"==l)&&p.from.y!=p.to.y&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,p.from.y,c.from),c.to=a.effects.setTransition(c,g,p.to.y,c.to)),a.effects.save(c,k?d:e),c.show(),a.effects.createWrapper(c),c.css("overflow","hidden").css(c.from),("content"==l||"both"==l)&&(h=h.concat(["marginTop","marginBottom"]).concat(g),i=i.concat(["marginLeft","marginRight"]),f=d.concat(h).concat(i),c.find("*[width]").each(function(){var c=a(this);k&&a.effects.save(c,f);var d={height:c.height(),width:c.width()};c.from={height:d.height*p.from.y,width:d.width*p.from.x},c.to={height:d.height*p.to.y,width:d.width*p.to.x},p.from.y!=p.to.y&&(c.from=a.effects.setTransition(c,h,p.from.y,c.from),c.to=a.effects.setTransition(c,h,p.to.y,c.to)),p.from.x!=p.to.x&&(c.from=a.effects.setTransition(c,i,p.from.x,c.from),c.to=a.effects.setTransition(c,i,p.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.options.easing,function(){k&&a.effects.restore(c,f)})})),c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){0===c.to.opacity&&c.css("opacity",c.from.opacity),"hide"==j&&c.hide(),a.effects.restore(c,k?d:e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=(a.effects.setMode(c,b.options.mode||"effect"),b.options.direction||"left"),f=b.options.distance||20,g=b.options.times||3,h=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var i="up"==e||"down"==e?"top":"left",j="up"==e||"left"==e?"pos":"neg",k={},l={},m={};k[i]=("pos"==j?"-=":"+=")+f,l[i]=("pos"==j?"+=":"-=")+2*f,m[i]=("pos"==j?"-=":"+=")+2*f,c.animate(k,h,b.options.easing);for(var n=1;g>n;n++)c.animate(l,h,b.options.easing).animate(m,h,b.options.easing);c.animate(l,h,b.options.easing).animate(k,h/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0):c.outerWidth(!0));"show"==e&&c.css(g,"pos"==h?isNaN(i)?"-"+i:-i:i);var j={};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),f={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},g=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,b.duration,b.options.easing,function(){h.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),jQuery.cookie=function(a,b,c){if("undefined"==typeof b){var d=null;if(document.cookie&&""!=document.cookie)for(var e=document.cookie.split(";"),f=0;f<e.length;f++){var g=jQuery.trim(e[f]);if(g.substring(0,a.length+1)==a+"="){d=decodeURIComponent(g.substring(a.length+1));break}}return d}c=c||{},null===b&&(b="",c=$.extend({},c),c.expires=-1);var h="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var i;"number"==typeof c.expires?(i=new Date,i.setTime(i.getTime()+24*c.expires*60*60*1e3)):i=c.expires,h="; expires="+i.toUTCString()}var j=c.path?"; path="+c.path:"",k=c.domain?"; domain="+c.domain:"",l=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),h,j,k,l].join("")};var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;!function($){function getDtNodeFromElement(a){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(a)}function noop(){}function _initDragAndDrop(a){var b=a.options.dnd||null;b&&(b.onDragStart||b.onDrop)&&_registerDnd(),b&&b.onDragStart&&a.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(a){var b=$.ui.dynatree.getNode(a.target);return b?b.tree._onDragEvent("helper",b,null,a,null,null):"<div></div>"},start:function(a,b){var c=b.helper.data("dtSourceNode");return!!c},_last:null}),b&&b.onDrop&&a.$tree.droppable({addClasses:!1,tolerance:"intersect",greedy:!1,_last:null})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(a,b,c){this.parent=a,this.tree=b,"string"==typeof c&&(c={title:c}),void 0===c.key&&(c.key="_"+b._nodeCount++),this.data=$.extend({},$.ui.dynatree.nodedatadefaults,c),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(a,b){var c=$.extend({},this.data);if(c.activate=this.tree.activeNode===this,c.focus=this.tree.focusNode===this,c.expand=this.bExpanded,c.select=this.bSelected,b&&b(c),a&&this.childList){c.children=[];for(var d=0,e=this.childList.length;e>d;d++)c.children.push(this.childList[d].toDict(!0,b))}else delete c.children;return c},fromDict:function(a){var b=a.children;return void 0===b?(this.data=$.extend(this.data,a),void this.render()):(a=$.extend({},a),a.children=void 0,this.data=$.extend(this.data,a),this.removeChildren(),this.addChild(b),void 0)},_getInnerHtml:function(){var a,b=this.tree,c=b.options,d=b.cache,e=this.getLevel(),f=this.data,g="";e<c.minExpandLevel?e>1&&(g+=d.tagConnector):g+=this.hasChildren()!==!1?d.tagExpander:d.tagConnector,c.checkbox&&f.hideCheckbox!==!0&&!f.isStatusNode&&(g+=d.tagCheckbox),f.icon?(a="/"===f.icon.charAt(0)?f.icon:c.imagePath+f.icon,g+="<img src='"+a+"' alt='' />"):f.icon!==!1&&(g+=d.tagNodeIcon);var h="";if(c.onCustomRender&&(h=c.onCustomRender.call(b,this)||""),!h){var i=f.tooltip?' title="'+f.tooltip.replace(/\"/g,"&quot;")+'"':"",j=f.href||"#";h=c.noLink||f.noLink?'<span style="display:inline-block;" class="'+c.classNames.title+'"'+i+">"+f.title+"</span>":'<a href="'+j+'" class="'+c.classNames.title+'"'+i+">"+f.title+"</a>"}return g+=h},_fixOrder:function(){var a=this.childList;if(a&&this.ul)for(var b=this.ul.firstChild,c=0,d=a.length-1;d>c;c++){var e=a[c],f=b.dtnode;e!==f?(this.tree.logDebug("_fixOrder: mismatch at index "+c+": "+e+" != "+f),this.ul.insertBefore(e.li,f.li)):b=b.nextSibling}},render:function(a,b){var c=this.tree,d=this.parent,e=this.data,f=c.options,g=f.classNames,h=this.isLastSibling(),i=!1;if(d||this.ul){if(d){this.li||(i=!0,this.li=document.createElement("li"),this.li.dtnode=this,e.key&&f.generateIds&&(this.li.id=f.idPrefix+e.key),this.span=document.createElement("span"),this.span.className=g.title,this.li.appendChild(this.span),d.ul||(d.ul=document.createElement("ul"),d.ul.style.display="none",d.li.appendChild(d.ul)),d.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var j=[];j.push(g.node),e.isFolder&&j.push(g.folder),this.bExpanded&&j.push(g.expanded),this.hasChildren()!==!1&&j.push(g.hasChildren),e.isLazy&&null===this.childList&&j.push(g.lazy),h&&j.push(g.lastsib),this.bSelected&&j.push(g.selected),this.hasSubSel&&j.push(g.partsel),c.activeNode===this&&j.push(g.active),e.addClass&&j.push(e.addClass),j.push(g.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(e.isLazy&&null===this.childList?"d":"")+(h?"l":"")),j.push(g.combinedIconPrefix+(this.bExpanded?"e":"c")+(e.isFolder?"f":"")),this.span.className=j.join(" "),this.li.className=h?g.lastsib:"",i&&f.onCreate&&f.onCreate.call(c,this,this.span),f.onRender&&f.onRender.call(c,this,this.span)}}else this.li=this.span=null,this.ul=document.createElement("ul"),this.ul.className=f.minExpandLevel>1?g.container+" "+g.noConnector:g.container;if((this.bExpanded||b===!0)&&this.childList){for(var k=0,l=this.childList.length;l>k;k++)this.childList[k].render(!1,b);this._fixOrder()}if(this.ul){var m="none"===this.ul.style.display,n=!!this.bExpanded;if(a&&f.fx&&m===n){var o=f.fx.duration||200;$(this.ul).animate(f.fx,o)}else this.ul.style.display=this.bExpanded||!d?"":"none"}},getKeyPath:function(a){var b=[];return this.visitParents(function(a){a.parent&&b.unshift(a.data.key)},!a),"/"+b.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return void 0===this.hasChildren()?void 0:this.childList},hasChildren:function(){return this.data.isLazy?null===this.childList||void 0===this.childList?void 0:0===this.childList.length?!1:1===this.childList.length&&this.childList[0].isStatusNode()?void 0:!0:!!this.childList},isFirstSibling:function(){var a=this.parent;return!a||a.childList[0]===this},isLastSibling:function(){var a=this.parent;return!a||a.childList[a.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;for(var a=this.parent.childList,b=1,c=a.length;c>b;b++)if(a[b]===this)return a[b-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var a=this.parent.childList,b=0,c=a.length-1;c>b;b++)if(a[b]===this)return a[b+1];return null},isStatusNode:function(){return this.data.isStatusNode===!0},isChildOf:function(a){return this.parent&&this.parent===a},isDescendantOf:function(a){if(!a)return!1;for(var b=this.parent;b;){if(b===a)return!0;b=b.parent}return!1},countChildren:function(){var a=this.childList;if(!a)return 0;for(var b=a.length,c=0,d=b;d>c;c++){var e=a[c];b+=e.countChildren()}return b},sortChildren:function(a,b){var c=this.childList;if(c){if(a=a||function(a,b){var c=a.data.title.toLowerCase(),d=b.data.title.toLowerCase();return c===d?0:c>d?1:-1},c.sort(a),b)for(var d=0,e=c.length;e>d;d++)c[d].childList&&c[d].sortChildren(a,"$norender$");"$norender$"!==b&&this.render()}},_setStatusNode:function(a){var b=this.childList?this.childList[0]:null;if(a)b?(a.isStatusNode=!0,a.key="_statusNode",b.data=a,b.render()):(a.isStatusNode=!0,a.key="_statusNode",b=this.addChild(a));else if(b&&b.isStatusNode()){try{this.ul&&(this.ul.removeChild(b.li),b.li=null)}catch(c){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(a,b){var c=b&&b.tooltip?b.tooltip:null,d=b&&b.info?" ("+b.info+")":"";switch(a){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+d,tooltip:c,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+d,tooltip:c,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+a+"'."}},_parentList:function(a,b){for(var c=[],d=b?this:this.parent;d;)(a||d.parent)&&c.unshift(d),d=d.parent;return c},getLevel:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},_getTypeForOuterNodeEvent:function(a){var b=this.tree.options.classNames,c=a.target;if(c.className.indexOf(b.node)<0)return null;for(var d=a.pageX-c.offsetLeft,e=a.pageY-c.offsetTop,f=0,g=c.childNodes.length;g>f;f++){var h=c.childNodes[f],i=h.offsetLeft-c.offsetLeft,j=h.offsetTop-c.offsetTop,k=h.clientWidth,l=h.clientHeight;if(d>=i&&i+k>=d&&e>=j&&j+l>=e){if(h.className==b.title)return"title";if(h.className==b.expander)return"expander";if(h.className==b.checkbox)return"checkbox";if(h.className==b.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(a){var b=a&&a.target?a.target.className:"",c=this.tree.options.classNames;return b===c.title?"title":b===c.expander?"expander":b===c.checkbox?"checkbox":b===c.nodeIcon?"icon":b===c.empty||b===c.vline||b===c.connector?"prefix":b.indexOf(c.node)>=0?this._getTypeForOuterNodeEvent(a):null},isVisible:function(){for(var a=this._parentList(!0,!1),b=0,c=a.length;c>b;b++)if(!a[b].bExpanded)return!1;return!0},makeVisible:function(){for(var a=this._parentList(!0,!1),b=0,c=a.length;c>b;b++)a[b]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(a){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(a,b){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",a,b,this);var c=this.tree.options;if(!(this.data.isStatusNode||b&&c.onQueryActivate&&c.onQueryActivate.call(this.tree,a,this)===!1))if(a){if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}c.activeVisible&&this.makeVisible(),this.tree.activeNode=this,c.persist&&$.cookie(c.cookieId+"-active",this.data.key,c.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(c.classNames.active),b&&c.onActivate&&c.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(c.onQueryActivate&&c.onQueryActivate.call(this.tree,!1,this)===!1)return;$(this.span).removeClass(c.classNames.active),c.persist&&$.cookie(c.cookieId+"-active","",c.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,b&&c.onDeactivate&&c.onDeactivate.call(this.tree,this)}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var a=!0,b=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:a=!1,b=!0;break;case 3:a=b=!0}null===this.parent&&(b=!1),b&&(this.toggleExpand(),this.focus()),a&&this.activate()},_setSubSel:function(a){a?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var a;if(!this.hasChildren())return a=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),a;var b,c,d=this.childList,e=!0,f=!0;for(b=0,c=d.length;c>b;b++){var g=d[b],h=g._updatePartSelectionState();h!==!1&&(f=!1),h!==!0&&(e=!1)}return a=e?!0:f?!1:void 0,this._setSubSel(void 0===a),this.bSelected=a===!0,a},_fixSelectionState:function(){var a,b,c;if(this.bSelected)for(this.visit(function(a){a.parent._setSubSel(!0),a.data.unselectable||a._select(!0,!1,!1)}),a=this.parent;a;){a._setSubSel(!0);var d=!0;for(b=0,c=a.childList.length;c>b;b++){var e=a.childList[b];if(!e.bSelected&&!e.data.isStatusNode&&!e.data.unselectable){d=!1;break}}d&&a._select(!0,!1,!1),a=a.parent}else for(this._setSubSel(!1),this.visit(function(a){a._setSubSel(!1),a._select(!1,!1,!1)}),a=this.parent;a;){a._select(!1,!1,!1);var f=!1;for(b=0,c=a.childList.length;c>b;b++)if(a.childList[b].bSelected||a.childList[b].hasSubSel){f=!0;break}a._setSubSel(f),a=a.parent}},_select:function(a,b,c){var d=this.tree.options;this.data.isStatusNode||this.bSelected!==a&&(b&&d.onQuerySelect&&d.onQuerySelect.call(this.tree,a,this)===!1||(1==d.selectMode&&a&&this.tree.visit(function(a){return a.bSelected?(a._select(!1,!1,!1),!1):void 0}),this.bSelected=a,a?(d.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(d.classNames.selected),c&&3===d.selectMode&&this._fixSelectionState(),b&&d.onSelect&&d.onSelect.call(this.tree,!0,this)):(d.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(d.classNames.selected),c&&3===d.selectMode&&this._fixSelectionState(),b&&d.onSelect&&d.onSelect.call(this.tree,!1,this))))},select:function(a){return this.data.unselectable?this.bSelected:this._select(a!==!1,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var a=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===a.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(b){this.tree.logWarning("_loadContent: failed - %o",b),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+b})}},_expand:function(a,b){if(this.bExpanded===a)return void this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",a,this);this.tree.logDebug("dtnode._expand(%o) - %o",a,this);var c=this.tree.options;if(!a&&this.getLevel()<c.minExpandLevel)return void this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",a,this);if(!c.onQueryExpand||c.onQueryExpand.call(this.tree,a,this)!==!1){this.bExpanded=a,c.persist&&(a?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var d=!(this.data.isLazy&&null===this.childList||this._isLoading||b);if(this.render(d),this.bExpanded&&this.parent&&c.autoCollapse)for(var e=this._parentList(!1,!0),f=0,g=e.length;g>f;f++)e[f].collapseSiblings();return c.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),a&&this.data.isLazy&&null===this.childList&&!this._isLoading?void this._loadContent():void(c.onExpand&&c.onExpand.call(this.tree,a,this))}},isExpanded:function(){return this.bExpanded},expand:function(a){a=a!==!1,(this.childList||this.data.isLazy||!a)&&(null!==this.parent||a)&&this._expand(a)},scheduleAction:function(a,b){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var c=this;switch(a){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){c.tree.logDebug("setTimeout: trigger expand"),c.expand(!0)},b);break;case"activate":this.tree.timer=setTimeout(function(){c.tree.logDebug("setTimeout: trigger activate"),c.activate()},b);break;default:throw"Invalid mode "+a}this.tree.logDebug("setTimeout(%s, %s): %s",a,b,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var a=this.parent.childList,b=0,c=a.length;c>b;b++)a[b]!==this&&a[b].bExpanded&&a[b]._expand(!1)},_onClick:function(a){var b=this.getEventTargetType(a);if("expander"===b)this.toggleExpand(),this.focus();else if("checkbox"===b)this.toggleSelect(),this.focus();else{this._userActivate();var c=this.span.getElementsByTagName("a");if(!c[0])return!0;$.browser.msie&&parseInt($.browser.version,10)<9||c[0].focus()}a.preventDefault()},_onDblClick:function(){},_onKeydown:function(a){var b,c=!0;switch(a.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(b=this.getPrevSibling();b&&b.bExpanded&&b.childList;)b=b.childList[b.childList.length-1];!b&&this.parent&&this.parent.parent&&(b=this.parent),b&&b.focus();break;case 40:if(this.bExpanded&&this.childList)b=this.childList[0];else for(var d=this._parentList(!1,!0),e=d.length-1;e>=0&&!(b=d[e].getNextSibling());e--);b&&b.focus();break;default:c=!1}c&&a.preventDefault()},_onKeypress:function(){},_onFocus:function(a){var b=this.tree.options;"blur"==a.type||"focusout"==a.type?(b.onBlur&&b.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(b.classNames.focused),this.tree.tnFocused=null,b.persist&&$.cookie(b.cookieId+"-focus","",b.cookie)):("focus"==a.type||"focusin"==a.type)&&(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(b.classNames.focused)),this.tree.tnFocused=this,b.onFocus&&b.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(b.classNames.focused),b.persist&&$.cookie(b.cookieId+"-focus",this.data.key,b.cookie))},visit:function(a,b){var c=!0;if(b===!0&&(c=a(this),c===!1||"skip"==c))return c;if(this.childList)for(var d=0,e=this.childList.length;e>d&&(c=this.childList[d].visit(a,!0),c!==!1);d++);return c},visitParents:function(a,b){if(b&&a(this)===!1)return!1;for(var c=this.parent;c;){if(a(c)===!1)return!1;c=c.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(a){var b=this.childList;if(1==b.length){if(a!==b[0])throw"removeChild: invalid child";return this.removeChildren()}a===this.tree.activeNode&&a.deactivate(),this.tree.options.persist&&(a.bSelected&&this.tree.persistence.clearSelect(a.data.key),a.bExpanded&&this.tree.persistence.clearExpand(a.data.key)),a.removeChildren(!0),this.ul.removeChild(a.li);for(var c=0,d=b.length;d>c;c++)if(b[c]===a){this.childList.splice(c,1);break}},removeChildren:function(a,b){this.tree.logDebug("%s.removeChildren(%o)",this,a);var c=this.tree,d=this.childList;if(d){for(var e=0,f=d.length;f>e;e++){var g=d[e];g===c.activeNode&&!b&&g.deactivate(),this.tree.options.persist&&!b&&(g.bSelected&&this.tree.persistence.clearSelect(g.data.key),g.bExpanded&&this.tree.persistence.clearExpand(g.data.key)),g.removeChildren(!0,b),this.ul&&$("li",$(this.ul)).remove()}this.childList=null}a||(this._isLoading=!1,this.render())},setTitle:function(a){this.fromDict({title:a})},reload:function(){throw"Use reloadChildren() instead"},reloadChildren:function(a){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(a){var b=this,c="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(c,function(d,e,f){if(b.tree.$tree.unbind(c),b.tree.logDebug("loaded %o, %o, %o",d,e,f),e!==b)throw"got invalid load event";a.call(b.tree,e,f)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(a,b){var c=this.tree;if(c.logDebug("%s._loadKeyPath(%s)",this,a),""===a)throw"Key path must not be empty";var d=a.split(c.options.keyPathSeparator);if(""===d[0])throw"Key path must be relative (don't start with '/')";var e=d.shift();if(this.childList)for(var f=0,g=this.childList.length;g>f;f++){var h=this.childList[f];if(h.data.key===e){if(0===d.length)b.call(c,h,"ok");else if(!h.data.isLazy||null!==h.childList&&void 0!==h.childList)b.call(c,h,"loaded"),h._loadKeyPath(d.join(c.options.keyPathSeparator),b);else{c.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,a,h);var i=this;h.reloadChildren(function(e,f){f?(c.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",e,a,e),b.call(c,h,"loaded"),e._loadKeyPath(d.join(c.options.keyPathSeparator),b)):(c.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",i,a),b.call(c,h,"error"))})}return}}b.call(c,void 0,"notfound",e,0===d.length),c.logWarning("Node not found: "+e)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(a,b){var c=this.tree,d=c.options,e=c.persistence;if(a.parent=this,null===this.childList?this.childList=[]:b||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(d.classNames.lastsib),b){var f=$.inArray(b,this.childList);if(0>f)throw"<beforeNode> must be a child of <this>";this.childList.splice(f,0,a)}else this.childList.push(a);var g=c.isInitializing();if(d.persist&&e.cookiesFound&&g?(e.activeKey===a.data.key&&(c.activeNode=a),e.focusedKey===a.data.key&&(c.focusNode=a),a.bExpanded=$.inArray(a.data.key,e.expandedKeyList)>=0,a.bSelected=$.inArray(a.data.key,e.selectedKeyList)>=0):(a.data.activate&&(c.activeNode=a,d.persist&&(e.activeKey=a.data.key)),a.data.focus&&(c.focusNode=a,d.persist&&(e.focusedKey=a.data.key)),a.bExpanded=a.data.expand===!0,a.bExpanded&&d.persist&&e.addExpand(a.data.key),a.bSelected=a.data.select===!0,a.bSelected&&d.persist&&e.addSelect(a.data.key)),d.minExpandLevel>=a.getLevel()&&(this.bExpanded=!0),a.bSelected&&3==d.selectMode)for(var h=this;h;)h.hasSubSel||h._setSubSel(!0),h=h.parent;return c.bEnableUpdate&&this.render(),a},addChild:function(a,b){if("string"==typeof a)throw"Invalid data type for "+a;if(a&&0!==a.length){if(a instanceof DynaTreeNode)return this._addChildNode(a,b);a.length||(a=[a]);for(var c=this.tree.enableUpdate(!1),d=null,e=0,f=a.length;f>e;e++){var g=a[e],h=this._addChildNode(new DynaTreeNode(this,this.tree,g),b);d||(d=h),g.children&&h.addChild(g.children,null)}return this.tree.enableUpdate(c),d}},append:function(a){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(a,null)},appendAjax:function(a){var b=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),a.debugLazyDelay){var c=a.debugLazyDelay;return a.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+c),setTimeout(function(){b.appendAjax(a)},c),void 0}var d=a.success,e=a.error,f="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,g=$.extend({},this.tree.options.ajaxDefaults,a,{success:function(a,c){var e=b.tree.phase;b.tree.phase="init",g.postProcess?a=g.postProcess.call(this,a,this.dataType):a&&a.hasOwnProperty("d")&&(a="string"==typeof a.d?$.parseJSON(a.d):a.d),(!$.isArray(a)||0!==a.length)&&b.addChild(a,null),b.tree.phase="postInit",d&&d.call(g,b,a,c),b.tree.logDebug("trigger "+f),b.tree.$tree.trigger(f,[b,!0]),b.tree.phase=e,b.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(a)&&0===a.length&&(b.childList=[],b.render())},error:function(a,c,d){b.tree.logWarning("appendAjax failed:",c,":\n",a,"\n",d),e&&e.call(g,b,a,c,d),b.tree.$tree.trigger(f,[b,!1]),b.setLazyNodeStatus(DTNodeStatus_Error,{info:c,tooltip:""+d})}});$.ajax(g)},move:function(a,b){var c;if(this!==a){if(!this.parent)throw"Cannot move system root";(void 0===b||"over"==b)&&(b="child");var d=this.parent,e="child"===b?a:a.parent;if(e.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{if(c=$.inArray(this,this.parent.childList),0>c)throw"Internal error";this.parent.childList.splice(c,1)}if(this.parent.ul&&this.parent.ul.removeChild(this.li),this.parent=e,e.hasChildren())switch(b){case"child":e.childList.push(this);break;case"before":if(c=$.inArray(a,e.childList),0>c)throw"Internal error";e.childList.splice(c,0,this);break;case"after":if(c=$.inArray(a,e.childList),0>c)throw"Internal error";e.childList.splice(c+1,0,this);break;default:throw"Invalid mode "+b}else e.childList=[this];if(e.ul||(e.ul=document.createElement("ul"),e.ul.style.display="none",e.li.appendChild(e.ul)),this.li&&e.ul.appendChild(this.li),this.tree!==a.tree)throw this.visit(function(b){b.tree=a.tree},null,!0),"Not yet implemented.";d.isDescendantOf(e)||d.render(),e.isDescendantOf(d)||e.render()}},lastentry:void 0};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(a,b){var c=new DynaTreeStatus(a,b);return c.read(),c.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(a,b){void 0===a&&(a=$.ui.dynatree.prototype.options.cookieId),b=$.extend({},$.ui.dynatree.prototype.options.cookie,b),this.cookieId=a,this.cookieOpts=b,this.cookiesFound=void 0,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var a=$.cookie(this.cookieId+"-active");this.activeKey=null===a?"":a,null!==a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-focus"),this.focusedKey=null===a?"":a,null!==a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=null===a?[]:a.split(","),null!==a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-select"),this.selectedKeyList=null===a?[]:a.split(","),null!==a&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)
},addExpand:function(a){$.inArray(a,this.expandedKeyList)<0&&(this.expandedKeyList.push(a),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(a){var b=$.inArray(a,this.expandedKeyList);b>=0&&(this.expandedKeyList.splice(b,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(a){$.inArray(a,this.selectedKeyList)<0&&(this.selectedKeyList.push(a),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(a){var b=$.inArray(a,this.selectedKeyList);b>=0&&(this.selectedKeyList.splice(b,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return this.cookiesFound===!0},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var DynaTree=Class.create();DynaTree.version="$Version:$",DynaTree.prototype={initialize:function(a){this.phase="init",this.$widget=a,this.options=a.options,this.$tree=a.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(a){var b=(this.$widget,this.options),c=this;this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,void 0!==b.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported."),b.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),b.minExpandLevel=1),b.classNames!==$.ui.dynatree.prototype.options.classNames&&(b.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,b.classNames)),b.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(b.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,b.ajaxDefaults)),b.dnd!==$.ui.dynatree.prototype.options.dnd&&(b.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,b.dnd)),b.imagePath||$("script").each(function(){var a=/.*dynatree[^\/]*\.js$/i;return this.src.search(a)>=0?(b.imagePath=this.src.indexOf("/")>=0?this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":"skin/",c.logDebug("Guessing imagePath from '%s': '%s'",this.src,b.imagePath),!1):void 0}),this.persistence=new DynaTreeStatus(b.cookieId,b.cookie),b.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+b.classNames.empty+"'></span>",tagVline:"<span class='"+b.classNames.vline+"'></span>",tagExpander:"<span class='"+b.classNames.expander+"'></span>",tagConnector:"<span class='"+b.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+b.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+b.classNames.checkbox+"'></span>",lastentry:void 0},(b.children||b.initAjax&&b.initAjax.url||b.initId)&&$(this.divTree).empty();var d=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var e=this.tnRoot,f=b.persist&&this.persistence.isReloading(),g=!1,h=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),b.children?e.addChild(b.children):b.initAjax&&b.initAjax.url?(g=!0,e.data.isLazy=!0,this._reloadAjax(a)):b.initId?this._createFromTag(e,$("#"+b.initId)):(this._createFromTag(e,d),d.remove()),this._checkConsistency(),!g&&3==b.selectMode&&e._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(h),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",b.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),g||(b.onPostInit&&b.onPostInit.call(this,f,!1),a&&a.call(this,"ok")),this.phase="idle"},_reloadAjax:function(a){var b=this.options;if(!b.initAjax||!b.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var c=this.persistence,d=$.extend({},b.initAjax);d.addActiveKey&&(d.data.activeKey=c.activeKey),d.addFocusedKey&&(d.data.focusedKey=c.focusedKey),d.addExpandedKeyList&&(d.data.expandedKeyList=c.expandedKeyList.join(",")),d.addSelectedKeyList&&(d.data.selectedKeyList=c.selectedKeyList.join(",")),d.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),d.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var e=c.isReloading();d.success=function(c){3==b.selectMode&&c.tree.tnRoot._updatePartSelectionState(),b.onPostInit&&b.onPostInit.call(c.tree,e,!1),a&&a.call(c.tree,"ok")},d.error=function(c,d,f,g){b.onPostInit&&b.onPostInit.call(c.tree,e,!0,d,f,g),a&&a.call(c.tree,"error",d,f,g)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(d)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(!0)},serializeArray:function(a){for(var b=this.getSelectedNodes(a),c=this.$tree.attr("name")||this.$tree.attr("id"),d=[],e=0,f=b.length;f>e;e++)d.push({name:c,value:b[e].data.key});return d},getPersistData:function(){return this.persistence.toDict()},logDebug:function(){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(a){this._load(a)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(a){var b=document.getElementById(this.options.idPrefix+a);if(b)return b.dtnode?b.dtnode:null;var c=null;return this.visit(function(b){return b.data.key==a?(c=b,!1):void 0},!0),c},getActiveNode:function(){return this.activeNode},reactivate:function(a){var b=this.activeNode;b&&(this.activeNode=null,b.activate(),a&&b.focus())},getSelectedNodes:function(a){var b=[];return this.tnRoot.visit(function(c){return c.bSelected&&(b.push(c),a===!0)?"skip":void 0}),b},activateKey:function(a){var b=null===a?null:this.getNodeByKey(a);return b?(b.focus(),b.activate(),b):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(a,b){var c=a.split(this.options.keyPathSeparator);return""===c[0]&&c.shift(),c[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),c.shift()),a=c.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(a,b)},selectKey:function(a,b){var c=this.getNodeByKey(a);return c?(c.select(b),c):null},enableUpdate:function(a){return this.bEnableUpdate==a?a:(this.bEnableUpdate=a,a&&this.redraw(),!a)},count:function(){return this.tnRoot.countChildren()},visit:function(a,b){return this.tnRoot.visit(a,b)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length)title=$liSpan.html();else if($liA.length)title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title");else{title=$li.html();var iPos=title.search(/<ul/i);title=$.trim(iPos>=0?title.substring(0,iPos):title)}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(a,b,c,d,e){var f=a?$(a.span):null,g=$(b.span);if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo($(this.divTree).parent())),"after"===d||"before"===d||"over"===d){var h="0 0";switch(d){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),h="0 -8";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),h="0 8";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),g.addClass("dynatree-drop-target"),h="8 0"}this.$dndMarker.show().position({my:"left top",at:"left top",of:g,offset:h})}else g.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===d?g.addClass("dynatree-drop-after"):g.removeClass("dynatree-drop-after"),"before"===d?g.addClass("dynatree-drop-before"):g.removeClass("dynatree-drop-before"),e===!0?(f&&f.addClass("dynatree-drop-accept"),g.addClass("dynatree-drop-accept"),c.addClass("dynatree-drop-accept")):(f&&f.removeClass("dynatree-drop-accept"),g.removeClass("dynatree-drop-accept"),c.removeClass("dynatree-drop-accept")),e===!1?(f&&f.addClass("dynatree-drop-reject"),g.addClass("dynatree-drop-reject"),c.addClass("dynatree-drop-reject")):(f&&f.removeClass("dynatree-drop-reject"),g.removeClass("dynatree-drop-reject"),c.removeClass("dynatree-drop-reject"))},_onDragEvent:function(a,b,c,d,e,f){var g,h,i=(this.options,this.options.dnd),j=null,k=$(b.span);switch(a){case"helper":var l=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(d.target).closest("a").clone());$("ul.dynatree-container",b.tree.divTree).append(l),l.data("dtSourceNode",b),j=l;break;case"start":b.isStatusNode()?j=!1:i.onDragStart&&(j=i.onDragStart(b)),j===!1?(this.logDebug("tree.onDragStart() cancelled"),e.helper.trigger("mouseup"),e.helper.hide()):k.addClass("dynatree-drag-source");break;case"enter":j=i.onDragEnter?i.onDragEnter(b,c):null,j=j?{over:j===!0||"over"===j||$.inArray("over",j)>=0,before:j===!0||"before"===j||$.inArray("before",j)>=0,after:j===!0||"after"===j||$.inArray("after",j)>=0}:!1,e.helper.data("enterResponse",j);break;case"over":if(h=e.helper.data("enterResponse"),g=null,h!==!1)if("string"==typeof h)g=h;else{var m=k.offset(),n={x:d.pageX-m.left,y:d.pageY-m.top},o={x:n.x/k.width(),y:n.y/k.height()};h.after&&o.y>.75?g="after":!h.over&&h.after&&o.y>.5?g="after":h.before&&o.y<=.25?g="before":!h.over&&h.before&&o.y<=.5?g="before":h.over&&(g="over"),i.preventVoidMoves&&(b===c?g=null:"before"===g&&c&&b===c.getNextSibling()?g=null:"after"===g&&c&&b===c.getPrevSibling()?g=null:"over"===g&&c&&c.parent===b&&c.isLastSibling()&&(g=null)),e.helper.data("hitMode",g)}"over"===g&&i.autoExpandMS&&b.hasChildren()!==!1&&!b.bExpanded&&b.scheduleAction("expand",i.autoExpandMS),g&&i.onDragOver&&(j=i.onDragOver(b,c,g),("over"===j||"before"===j||"after"===j)&&(g=j)),this._setDndStatus(c,b,e.helper,g,j!==!1&&null!==g);break;case"drop":var p=e.helper.hasClass("dynatree-drop-reject");g=e.helper.data("hitMode"),g&&i.onDrop&&!p&&i.onDrop(b,c,g,e,f);break;case"leave":b.scheduleAction("cancel"),e.helper.data("enterResponse",null),e.helper.data("hitMode",null),this._setDndStatus(c,b,e.helper,"out",void 0),i.onDragLeave&&i.onDragLeave(b,c);break;case"stop":k.removeClass("dynatree-drag-source"),i.onDragStop&&i.onDragStop(b);break;default:throw"Unsupported drag event: "+a}return j},cancelDrag:function(){var a=$.ui.ddmanager.current;a&&a.cancel()},lastentry:void 0},$.widget("ui.dynatree",{_init:function(){return parseFloat($.ui.version)<1.8?(this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create()):void(this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality."))},_create:function(){var a=this.options;a.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function a(a){a=$.event.fix(a||window.event);var b=$.ui.dynatree.getNode(a.target);return b?b._onFocus(a):!1}this.unbind();var b="click.dynatree dblclick.dynatree";this.options.keyboard&&(b+=" keypress.dynatree keydown.dynatree"),this.element.bind(b,function(a){var b=$.ui.dynatree.getNode(a.target);if(!b)return!0;var c=b.tree,d=c.options;c.logDebug("event(%s): dtnode: %s",a.type,b);var e=c.phase;c.phase="userEvent";try{switch(a.type){case"click":return d.onClick&&d.onClick.call(c,b,a)===!1?!1:b._onClick(a);case"dblclick":return d.onDblClick&&d.onDblClick.call(c,b,a)===!1?!1:b._onDblClick(a);case"keydown":return d.onKeydown&&d.onKeydown.call(c,b,a)===!1?!1:b._onKeydown(a);case"keypress":return d.onKeypress&&d.onKeypress.call(c,b,a)===!1?!1:b._onKeypress(a)}}catch(f){c.logWarning("bind(%o): dtnode: %o, error: %o",a,b,f)}finally{c.phase=e}});var c=this.tree.divTree;c.addEventListener?(c.addEventListener("focus",a,!0),c.addEventListener("blur",a,!0)):c.onfocusin=c.onfocusout=a},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0}),parseFloat($.ui.version)<1.8&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.ui.dynatree.version="$Version:$",$.ui.dynatree.getNode=function(a){if(a instanceof DynaTreeNode)return a;for(void 0!==a.selector&&(a=a[0]);a;){if(a.dtnode)return a.dtnode;a=a.parentNode}return null},$.ui.dynatree.getPersistData=DynaTreeStatus._getTreePersistData,$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:2,lastentry:void 0},parseFloat($.ui.version)<1.8&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:void 0};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(a,b){var c=$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null;return d?(c.offset.click.top=-2,c.offset.click.left=16,d.tree._onDragEvent("start",d,null,a,b,c)):void 0},drag:function(a,b){var c=$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null,f=$.ui.dynatree.getNode(a.target);if(a.target&&!f){var g=$(a.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(g)return}b.helper.data("dtTargetNode",f),e&&e!==f&&e.tree._onDragEvent("leave",e,d,a,b,c),f&&(!f.tree.options.dnd.onDrop||(f===e?f.tree._onDragEvent("over",f,d,a,b,c):f.tree._onDragEvent("enter",f,d,a,b,c)))},stop:function(a,b){var c=$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null,f=(c._mouseDownEvent,a.type),g="mouseup"==f&&1==a.which;g||logMsg("Drag was cancelled"),e&&(g&&e.tree._onDragEvent("drop",e,d,a,b,c),e.tree._onDragEvent("leave",e,d,a,b,c)),d&&d.tree._onDragEvent("stop",d,null,a,b,c)}}),didRegisterDnd=!0)}}(jQuery),function(a){function b(b){return b[0]&&a.isPlainObject(b[0])?this.data=b[0]:this.el=b,this.isCoords=!0,this.coords={},this.init(),this}var c=b.prototype;c.init=function(){this.set(),this.original_coords=this.get()},c.set=function(a,b){var c=this.el;if(c&&!a&&(this.data=c.offset(),this.data.width=c.width(),this.data.height=c.height()),c&&a&&!b){var d=c.offset();this.data.top=d.top,this.data.left=d.left}var e=this.data;return this.coords.x1=e.left,this.coords.y1=e.top,this.coords.x2=e.left+e.width,this.coords.y2=e.top+e.height,this.coords.cx=e.left+e.width/2,this.coords.cy=e.top+e.height/2,this.coords.width=e.width,this.coords.height=e.height,this.coords.el=c||!1,this},c.update=function(b){if(!b&&!this.el)return this;if(b){var c=a.extend({},this.data,b);return this.data=c,this.set(!0,!0)}return this.set(!0),this},c.get=function(){return this.coords},a.fn.coords=function(){if(this.data("coords"))return this.data("coords");var a=new b(this,arguments[0]);return this.data("coords",a),a}}(jQuery,window,document),function(a,b,c){function d(b,c,d){this.options=a.extend(e,d),this.$element=b,this.last_colliders=[],this.last_colliders_coords=[],"string"==typeof c||c instanceof jQuery?this.$colliders=a(c,this.options.colliders_context).not(this.$element):this.colliders=a(c),this.init()}var e={colliders_context:c.body},f=d.prototype;f.init=function(){this.find_collisions()},f.overlaps=function(a,b){var c=!1,d=!1;return(b.x1>=a.x1&&b.x1<=a.x2||b.x2>=a.x1&&b.x2<=a.x2||a.x1>=b.x1&&a.x2<=b.x2)&&(c=!0),(b.y1>=a.y1&&b.y1<=a.y2||b.y2>=a.y1&&b.y2<=a.y2||a.y1>=b.y1&&a.y2<=b.y2)&&(d=!0),c&&d},f.detect_overlapping_region=function(a,b){var c="",d="";return a.y1>b.cy&&a.y1<b.y2&&(c="N"),a.y2>b.y1&&a.y2<b.cy&&(c="S"),a.x1>b.cx&&a.x1<b.x2&&(d="W"),a.x2>b.x1&&a.x2<b.cx&&(d="E"),c+d||"C"},f.calculate_overlapped_area_coords=function(b,c){var d=Math.max(b.x1,c.x1),e=Math.max(b.y1,c.y1),f=Math.min(b.x2,c.x2),g=Math.min(b.y2,c.y2);return a({left:d,top:e,width:f-d,height:g-e}).coords().get()},f.calculate_overlapped_area=function(a){return a.width*a.height},f.manage_colliders_start_stop=function(b,c,d){for(var e=this.last_colliders_coords,f=0,g=e.length;g>f;f++)-1===a.inArray(e[f],b)&&c.call(this,e[f]);for(var h=0,i=b.length;i>h;h++)-1===a.inArray(b[h],e)&&d.call(this,b[h])},f.find_collisions=function(b){for(var c=this,d=[],e=[],f=this.colliders||this.$colliders,g=f.length,h=c.$element.coords().update(b||!1).get();g--;){var i=c.$colliders?a(f[g]):f[g],j=i.isCoords?i:i.coords(),k=j.get(),l=c.overlaps(h,k);if(l){var m=c.detect_overlapping_region(h,k);if("C"===m){var n=c.calculate_overlapped_area_coords(h,k),o=c.calculate_overlapped_area(n),p={area:o,area_coords:n,region:m,coords:k,player_coords:h,el:i};c.options.on_overlap&&c.options.on_overlap.call(this,p),d.push(j),e.push(p)}}}return(c.options.on_overlap_stop||c.options.on_overlap_start)&&this.manage_colliders_start_stop(d,c.options.on_overlap_stop,c.options.on_overlap_start),this.last_colliders_coords=d,e},f.get_closest_colliders=function(a){var b=this.find_collisions(a);return b.sort(function(a,b){return"C"===a.region&&"C"===b.region?a.coords.y1<b.coords.y1||a.coords.x1<b.coords.x1?-1:1:(a.area<b.area,1)}),b},a.fn.collision=function(a,b){return new d(this,a,b)}}(jQuery,window,document),function(a){a.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},a.throttle=function(a,b){var c,d,e,f,g,h,i=debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&a.apply(c,d),i()};return e||(e=setTimeout(j,b)),f?g=!0:h=a.apply(c,d),i(),f=!0,h}}}(window),function(a,b,c){function d(b,d){this.options=a.extend({},e,d),this.$body=a(c.body),this.$container=a(b),this.$dragitems=a(this.options.items,this.$container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.init()}var e={items:".gs_w",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null},f=a(b),g="ontouchstart"in b,h={start:g?"touchstart":"mousedown.draggable",move:g?"touchmove":"mousemove.draggable",end:g?"touchend":"mouseup.draggable"},i=d.prototype;i.init=function(){this.calculate_positions(),this.$container.css("position","relative"),this.disabled=!1,this.events(),a(b).bind("resize",throttle(a.proxy(this.calculate_positions,this),200))},i.events=function(){this.$container.on("selectstart",a.proxy(this.on_select_start,this)),this.$container.on(h.start,this.options.items,a.proxy(this.drag_handler,this)),this.$body.on(h.end,a.proxy(function(a){this.is_dragging=!1,this.disabled||(this.$body.off(h.move),this.drag_start&&this.on_dragstop(a))},this))},i.get_actual_pos=function(a){var b=a.position();return b},i.get_mouse_pos=function(a){if(g){var b=a.originalEvent;a=b.touches.length?b.touches[0]:b.changedTouches[0]}return{left:a.clientX,top:a.clientY}},i.get_offset=function(a){a.preventDefault();var b=this.get_mouse_pos(a),c=Math.round(b.left-this.mouse_init_pos.left),d=Math.round(b.top-this.mouse_init_pos.top),e=Math.round(this.el_init_offset.left+c-this.baseX),f=Math.round(this.el_init_offset.top+d-this.baseY+this.scrollOffset);return this.options.limit&&(e>this.player_max_left?e=this.player_max_left:e<this.player_min_left&&(e=this.player_min_left)),{left:e,top:f,mouse_left:b.left,mouse_top:b.top}},i.manage_scroll=function(a){var b,c=f.scrollTop(),d=c,e=d+this.window_height,g=e-50,h=d+50,i=(a.mouse_left,d+a.mouse_top),j=this.doc_height-this.window_height+this.player_height;i>=g&&(b=c+30,j>b&&(f.scrollTop(b),this.scrollOffset=this.scrollOffset+30)),h>=i&&(b=c-30,b>0&&(f.scrollTop(b),this.scrollOffset=this.scrollOffset-30))},i.calculate_positions=function(){this.window_height=f.height()},i.drag_handler=function(b){b.target.nodeName;if(!this.disabled&&(1===b.which||g)&&!this.ignore_drag(b)){var c=this,d=!0;return this.$player=a(b.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(b),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$body.on(h.move,function(a){var b=c.get_mouse_pos(a),e=Math.abs(b.left-c.mouse_init_pos.left),f=Math.abs(b.top-c.mouse_init_pos.top);return e>c.options.distance||f>c.options.distance?d?(d=!1,c.on_dragstart.call(c,a),!1):(c.is_dragging===!0&&c.on_dragmove.call(c,a),!1):!1}),!1}},i.on_dragstart=function(b){b.preventDefault(),this.drag_start=!0,this.is_dragging=!0;var d=this.$container.offset();return this.baseX=Math.round(d.left),this.baseY=Math.round(d.top),this.doc_height=a(c).height(),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.scrollOffset=0,this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.player_max_left=this.$container.width()-this.player_width+this.options.offset_left,this.options.start&&this.options.start.call(this.$player,b,{helper:this.helper?this.$helper:this.$player}),!1},i.on_dragmove=function(a){var b=this.get_offset(a);this.options.autoscroll&&this.manage_scroll(b),(this.helper?this.$helper:this.$player).css({position:"absolute",left:b.left,top:b.top});var c={position:{left:b.left,top:b.top}};return this.options.drag&&this.options.drag.call(this.$player,a,c),!1},i.on_dragstop=function(a){var b=this.get_offset(a);this.drag_start=!1;var c={position:{left:b.left,top:b.top}};return this.options.stop&&this.options.stop.call(this.$player,a,c),this.helper&&this.$helper.remove(),!1},i.on_select_start=function(a){return this.disabled||this.ignore_drag(a)?void 0:!1},i.enable=function(){this.disabled=!1},i.disable=function(){this.disabled=!0},i.destroy=function(){this.disable(),a.removeData(this.$container,"drag")},i.ignore_drag=function(b){return this.options.handle?!a(b.target).is(this.options.handle):a.inArray(b.target.nodeName,this.options.ignore_dragging)>=0},a.fn.drag=function(b){return this.each(function(){a.data(this,"drag")||a.data(this,"drag",new d(this,b))})}}(jQuery,window,document),function(a,b,c){function d(b,c){this.options=a.extend(!0,e,c),this.$el=a(b),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs_w"),this.widgets=[],this.$changed=a([]),this.wrapper_width=this.$wrapper.width(),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.init()}var e={namespace:"",widget_selector:"li",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,min_rows:15,max_size_x:6,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,serialize_params:function(a,b){return{col:b.col,row:b.row,size_x:b.size_x,size_y:b.size_y}},collision:{},draggable:{distance:4}};d.generated_stylesheets=[];var f=d.prototype;f.init=function(){this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.$wrapper.addClass("ready"),this.draggable(),a(b).bind("resize",throttle(a.proxy(this.recalculate_faux_grid,this),200))},f.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},f.enable=function(){return this.drag_api.enable(),this},f.add_widget=function(b,c,d,e,f){var g;c||(c=1),d||(d=1),!e&!f?g=this.next_position(c,d):(g={col:e,row:f},this.empty_cells(e,f,c,d));var h=a(b).attr({"data-col":g.col,"data-row":g.row,"data-sizex":c,"data-sizey":d}).addClass("gs_w").appendTo(this.$el).hide();return this.$widgets=this.$widgets.add(h),this.register_widget(h),this.add_faux_rows(g.size_y),this.set_dom_grid_height(),h.fadeIn()},f.resize_widget=function(b,c,d){var e=b.coords().grid;c||(c=e.size_x),d||(d=e.size_y),c>this.cols&&(c=this.cols);var f=this.get_cells_occupied(e),g=e.size_x,h=e.size_y,i=e.col,j=i;if(i+c-1>this.cols){var k=i+(c-1)-this.cols,l=i-k;j=Math.max(1,l)}var m={col:j,row:e.row,size_x:c,size_y:d},n=this.get_cells_occupied(m),o=[];a.each(f.cols,function(b,c){-1===a.inArray(c,n.cols)&&o.push(c)});var p=[];a.each(n.cols,function(b,c){-1===a.inArray(c,f.cols)&&p.push(c)});var q=[];a.each(f.rows,function(b,c){-1===a.inArray(c,n.rows)&&q.push(c)});var r=[];if(a.each(n.rows,function(b,c){-1===a.inArray(c,f.rows)&&r.push(c)}),this.remove_from_gridmap(e),p.length){var s=[j,e.row,c,Math.min(h,d),b];this.empty_cells.apply(this,s)}if(r.length){var t=[j,e.row,c,d,b];this.empty_cells.apply(this,t)}if(e.col=j,e.size_x=c,e.size_y=d,this.add_to_gridmap(m,b),b.data("coords").update({width:c*this.options.widget_base_dimensions[0]+(c-1)*this.options.widget_margins[0]*2,height:d*this.options.widget_base_dimensions[1]+(d-1)*this.options.widget_margins[1]*2}),d>h&&this.add_faux_rows(d-h),c>g&&this.add_faux_cols(c-g),b.attr({"data-col":j,"data-sizex":c,"data-sizey":d}),o.length){var u=[o[0],e.row,o.length,Math.min(h,d),b];this.remove_empty_cells.apply(this,u)}if(q.length){var v=[j,e.row,c,d,b];this.remove_empty_cells.apply(this,v)}return b},f.empty_cells=function(b,c,d,e,f){var g=this.widgets_below({col:b,row:c-e,size_x:d,size_y:e});return g.not(f).each(a.proxy(function(b,d){var f=a(d).coords().grid;if(f.row<=c+e-1){var g=c+e-f.row;this.move_widget_down(a(d),g)}},this)),this.set_dom_grid_height(),this},f.remove_empty_cells=function(b,c,d,e,f){var g=this.widgets_below({col:b,row:c,size_x:d,size_y:e});return g.not(f).each(a.proxy(function(b,c){this.move_widget_up(a(c),e)},this)),this.set_dom_grid_height(),this},f.next_position=function(a,b){a||(a=1),b||(b=1);for(var c,d=this.gridmap,e=d.length,f=[],g=1;e>g;g++){c=d[g].length;for(var h=1;c>=h;h++){var i=this.can_move_to({size_x:a,size_y:b},g,h);i&&f.push({col:g,row:h,size_y:b,size_x:a})}}return f.length?this.sort_by_row_and_col_asc(f)[0]:!1},f.remove_widget=function(b,c,d){var e=b instanceof jQuery?b:a(b),f=e.coords().grid;a.isFunction(c)&&(d=c,c=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(e);var g=this.widgets_below(e);this.remove_from_gridmap(f),e.fadeOut(a.proxy(function(){e.remove(),c||g.each(a.proxy(function(b,c){this.move_widget_up(a(c),f.size_y)},this)),this.set_dom_grid_height(),d&&d.call(this,b)},this))},f.remove_all_widgets=function(b){return this.$widgets.each(a.proxy(function(a,c){this.remove_widget(c,!0,b)},this)),this},f.serialize=function(b){b||(b=this.$widgets);var c=[];return b.each(a.proxy(function(b,d){c.push(this.options.serialize_params(a(d),a(d).coords().grid))},this)),c},f.serialize_changed=function(){return this.serialize(this.$changed)},f.register_widget=function(a){var b={col:parseInt(a.attr("data-col"),10),row:parseInt(a.attr("data-row"),10),size_x:parseInt(a.attr("data-sizex"),10),size_y:parseInt(a.attr("data-sizey"),10),el:a};return this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:b.size_x,size_y:b.size_y},b.col,b.row)&&(b=this.next_position(b.size_x,b.size_y),b.el=a,a.attr({"data-col":b.col,"data-row":b.row,"data-sizex":b.size_x,"data-sizey":b.size_y})),a.data("coords",a.coords()),a.data("coords").grid=b,this.add_to_gridmap(b,a),this},f.update_widget_position=function(a,b){return this.for_each_cell_occupied(a,function(a,c){return this.gridmap[a]?void(this.gridmap[a][c]=b):this}),this},f.remove_from_gridmap=function(a){return this.update_widget_position(a,!1)},f.add_to_gridmap=function(b,c){if(this.update_widget_position(b,c||b.el),b.el){var d=this.widgets_below(b.el);d.each(a.proxy(function(b,c){this.move_widget_up(a(c))},this))}},f.draggable=function(){var b=this,c=a.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],start:function(c,d){b.$widgets.filter(".player-revert").removeClass("player-revert"),b.$player=a(this),b.$helper="clone"===b.options.draggable.helper?a(d.helper):b.$player,b.helper=!b.$helper.is(b.$player),b.on_start_drag.call(b,c,d),b.$el.trigger("gridster:dragstart")},stop:function(a,c){b.on_stop_drag.call(b,a,c),b.$el.trigger("gridster:dragstop")},drag:throttle(function(a,c){b.on_drag.call(b,a,c),b.$el.trigger("gridster:drag")
},60)});return this.drag_api=this.$el.drag(c).data("drag"),this},f.on_start_drag=function(b,c){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=a.extend({},this.player_grid_data),this.$el.css("height",this.$el.height()+this.player_grid_data.size_y*this.min_widget_height);var d=this.faux_grid,e=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(d,this.options.collision),this.$preview_holder=a("<li />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:e.width,height:e.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,b,c)},f.on_drag=function(a,b){if(null===this.$player)return!1;var c={left:b.position.left+this.baseX,top:b.position.top+this.baseY};this.colliders_data=this.collision_api.get_closest_colliders(c),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:b.position.left,top:b.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,a,b)},f.on_stop_drag=function(a,b){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging"),b.position.left=b.position.left+this.baseX,b.position.top=b.position.top+this.baseY,this.colliders_data=this.collision_api.get_closest_colliders(b.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,"data-row":this.placeholder_grid_data.row}).css({left:"",top:""}),this.$changed=this.$changed.add(this.$player),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data),this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row),this.$player.coords().grid.row=this.placeholder_grid_data.row,this.$player.coords().grid.col=this.placeholder_grid_data.col,this.options.draggable.stop&&this.options.draggable.stop.call(this,a,b),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.set_dom_grid_height()},f.on_overlapped_column_change=function(b,c){if(this.colliders_data.length){var d,e=this.get_targeted_columns(this.colliders_data[0].el.data.col),f=this.last_cols.length,g=e.length;for(d=0;g>d;d++)-1===a.inArray(e[d],this.last_cols)&&(b||a.noop).call(this,e[d]);for(d=0;f>d;d++)-1===a.inArray(this.last_cols[d],e)&&(c||a.noop).call(this,this.last_cols[d]);return this.last_cols=e,this}},f.on_overlapped_row_change=function(b,c){if(this.colliders_data.length){var d,e=this.get_targeted_rows(this.colliders_data[0].el.data.row),f=this.last_rows.length,g=e.length;for(d=0;g>d;d++)-1===a.inArray(e[d],this.last_rows)&&(b||a.noop).call(this,e[d]);for(d=0;f>d;d++)-1===a.inArray(this.last_rows[d],e)&&(c||a.noop).call(this,this.last_rows[d]);this.last_rows=e}},f.set_player=function(a,b,c){var d=this;c||this.empty_cells_player_occupies();var e=c?{col:a}:d.colliders_data[0].el.data,f=e.col,g=b||e.row;this.player_grid_data={col:f,row:g,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);var h=this.get_widgets_overlapped(this.player_grid_data),i=this.widgets_constraints(h);if(this.manage_movements(i.can_go_up,f,g),this.manage_movements(i.can_not_go_up,f,g),!h.length){var j=this.can_go_player_up(this.player_grid_data);j!==!1&&(g=j),this.set_placeholder(f,g)}return{col:f,row:g}},f.widgets_constraints=function(b){var c,d=a([]),e=[],f=[];return b.each(a.proxy(function(b,c){var g=a(c),h=g.coords().grid;this.can_go_widget_up(h)?(d=d.add(g),e.push(h)):f.push(h)},this)),c=b.not(d),{can_go_up:this.sort_by_row_asc(e),can_not_go_up:this.sort_by_row_desc(f)}},f.sort_by_row_asc=function(b){return b=b.sort(function(b,c){return b.row||(b=a(b).coords().grid,c=a(c).coords().grid),b.row>c.row?1:-1})},f.sort_by_row_and_col_asc=function(a){return a=a.sort(function(a,b){return a.row>b.row||a.row===b.row&&a.col>b.col?1:-1})},f.sort_by_col_asc=function(a){return a=a.sort(function(a,b){return a.col>b.col?1:-1})},f.sort_by_row_desc=function(a){return a=a.sort(function(a,b){return a.row+a.size_y<b.row+b.size_y?1:-1})},f.manage_movements=function(b,c,d){return a.each(b,a.proxy(function(a,b){var e=b,f=e.el,g=this.can_go_widget_up(e);if(g)this.move_widget_to(f,g),this.set_placeholder(c,g+e.size_y);else{var h=this.can_go_player_up(this.player_grid_data);if(!h){var i=d+this.player_grid_data.size_y-e.row;this.move_widget_down(f,i),this.set_placeholder(c,d)}}},this)),this},f.is_player=function(a,b){if(b&&!this.gridmap[a])return!1;var c=b?this.gridmap[a][b]:a;return c&&(c.is(this.$player)||c.is(this.$helper))},f.is_player_in=function(b,c){var d=this.cells_occupied_by_player||{};return a.inArray(b,d.cols)>=0&&a.inArray(c,d.rows)>=0},f.is_placeholder_in=function(b,c){var d=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(b)&&a.inArray(c,d.rows)>=0},f.is_placeholder_in_col=function(b){var c=this.cells_occupied_by_placeholder||[];return a.inArray(b,c.cols)>=0},f.is_empty=function(a,b){return"undefined"!=typeof this.gridmap[a]&&"undefined"!=typeof this.gridmap[a][b]&&this.gridmap[a][b]===!1?!0:!1},f.is_occupied=function(a,b){return this.gridmap[a]&&this.gridmap[a][b]?!0:!1},f.is_widget=function(a,b){var c=this.gridmap[a];return c?(c=c[b],c?c:!1):!1},f.is_widget_under_player=function(a,b){return this.is_widget(a,b)?this.is_player_in(a,b):!1},f.get_widgets_under_player=function(b){b||(b=this.cells_occupied_by_player||{cols:[],rows:[]});var c=a([]);return a.each(b.cols,a.proxy(function(d,e){a.each(b.rows,a.proxy(function(a,b){this.is_widget(e,b)&&(c=c.add(this.gridmap[e][b]))},this))},this)),c},f.set_placeholder=function(b,c){var d=a.extend({},this.placeholder_grid_data),e=this.widgets_below({col:d.col,row:d.row,size_y:d.size_y,size_x:d.size_x}),f=b+d.size_x-1;f>this.cols&&(b-=f-b);var g=this.placeholder_grid_data.row<c,h=this.placeholder_grid_data.col!==b;this.placeholder_grid_data.col=b,this.placeholder_grid_data.row=c,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":c,"data-col":b}),(g||h)&&e.each(a.proxy(function(c,e){this.move_widget_up(a(e),this.placeholder_grid_data.col-b+d.size_y)},this));var i=this.get_widgets_under_player(this.cells_occupied_by_placeholder);i.length&&i.each(a.proxy(function(b,e){var f=a(e);this.move_widget_down(f,c+d.size_y-f.data("coords").grid.row)},this))},f.can_go_player_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4,f=this.get_widgets_under_player();return this.for_each_column_occupied(a,function(a){var g=this.gridmap[a],h=b+1;for(d[a]=[];--h>0&&(this.is_empty(a,h)||this.is_player(a,h)||this.is_widget(a,h)&&g[h].is(f));)d[a].push(h),e=e>h?h:e;return 0===d[a].length?(c=!1,!0):void d[a].sort()}),c?this.get_valid_rows(a,d,e):!1},f.can_go_widget_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4;return this.for_each_column_occupied(a,function(f){var g=this.gridmap[f];d[f]=[];for(var h=b+1;--h>0&&(!this.is_widget(f,h)||this.is_player_in(f,h)||g[h].is(a.el));)!this.is_player(f,h)&&!this.is_placeholder_in(f,h)&&!this.is_player_in(f,h)&&d[f].push(h),e>h&&(e=h);return 0===d[f].length?(c=!1,!0):void d[f].sort()}),c?this.get_valid_rows(a,d,e):!1},f.get_valid_rows=function(b,c,d){for(var e=b.row,f=b.row+b.size_y-1,g=b.size_y,h=d-1,i=[];++h<=f;){var j=!0;if(a.each(c,function(b,c){a.isArray(c)&&-1===a.inArray(h,c)&&(j=!1)}),j===!0&&(i.push(h),i.length===g))break}var k=!1;return 1===g?i[0]!==e&&(k=i[0]||!1):i[0]!==e&&(k=this.get_consecutive_numbers_index(i,g)),k},f.get_consecutive_numbers_index=function(a,b){for(var c=a.length,d=[],e=!0,f=-1,g=0;c>g;g++){if(e||a[g]===f+1){if(d.push(g),d.length===b)break;e=!1}else d=[],e=!0;f=a[g]}return d.length>=b?a[d[0]]:!1},f.get_widgets_overlapped=function(){var b=a([]),c=[],d=this.cells_occupied_by_player.rows.slice(0);return d.reverse(),a.each(this.cells_occupied_by_player.cols,a.proxy(function(e,f){a.each(d,a.proxy(function(d,e){if(!this.gridmap[f])return!0;var g=this.gridmap[f][e];this.is_occupied(f,e)&&!this.is_player(g)&&-1===a.inArray(g,c)&&(b=b.add(g),c.push(g))},this))},this)),b},f.on_start_overlapping_column=function(a){this.set_player(a,!1)},f.on_start_overlapping_row=function(a){this.set_player(!1,a)},f.on_stop_overlapping_column=function(a){this.set_player(a,!1);var b=this;this.for_each_widget_below(a,this.cells_occupied_by_player.rows[0],function(){b.move_widget_up(this,b.player_grid_data.size_y)})},f.on_stop_overlapping_row=function(a){this.set_player(!1,a);for(var b=this,c=this.cells_occupied_by_player.cols,d=0,e=c.length;e>d;d++)this.for_each_widget_below(c[d],a,function(){b.move_widget_up(this,b.player_grid_data.size_y)})},f.move_widget_to=function(b,c){var d=this,e=b.coords().grid,f=(c-e.row,this.widgets_below(b)),g=this.can_move_to(e,e.col,c,b);return g===!1?!1:(this.remove_from_gridmap(e),e.row=c,this.add_to_gridmap(e),b.attr("data-row",c),this.$changed=this.$changed.add(b),f.each(function(b,c){var e=a(c),f=e.coords().grid,g=d.can_go_widget_up(f);g&&g!==f.row&&d.move_widget_to(e,g)}),this)},f.move_widget_up=function(b,c){var d=b.coords().grid,e=d.row,f=[];return c||(c=1),this.can_go_up(b)?void this.for_each_column_occupied(d,function(d){if(-1===a.inArray(b,f)){var g=b.coords().grid,h=e-c;if(h=this.can_go_up_to_row(g,d,h),!h)return!0;var i=this.widgets_below(b);this.remove_from_gridmap(g),g.row=h,this.add_to_gridmap(g),b.attr("data-row",g.row),this.$changed=this.$changed.add(b),f.push(b),i.each(a.proxy(function(b,d){this.move_widget_up(a(d),c)},this))}}):!1},f.move_widget_down=function(b,c){var d=b.coords().grid,e=d.row,f=[],g=c;if(!b)return!1;if(-1===a.inArray(b,f)){var h=b.coords().grid,i=e+c,j=this.widgets_below(b);this.remove_from_gridmap(h),j.each(a.proxy(function(b,c){var d=a(c),e=d.coords().grid,f=this.displacement_diff(e,h,g);f>0&&this.move_widget_down(d,f)},this)),h.row=i,this.update_widget_position(h,b),b.attr("data-row",h.row),this.$changed=this.$changed.add(b),f.push(b)}},f.can_go_up_to_row=function(b,c,d){var e,f=this.gridmap,g=!0,h=[],i=b.row;if(this.for_each_column_occupied(b,function(a){f[a];for(h[a]=[],e=i;e--&&this.is_empty(a,e)&&!this.is_placeholder_in(a,e);)h[a].push(e);return h[a].length?void 0:(g=!1,!0)}),!g)return!1;for(e=d,e=1;i>e;e++){for(var j=!0,k=0,l=h.length;l>k;k++)h[k]&&-1===a.inArray(e,h[k])&&(j=!1);if(j===!0){g=e;break}}return g},f.displacement_diff=function(a,b,c){var d=a.row,e=[],f=b.row+b.size_y;this.for_each_column_occupied(a,function(a){for(var b=0,c=f;d>c;c++)this.is_empty(a,c)&&(b+=1);e.push(b)});var g=Math.max.apply(Math,e);return c-=g,c>0?c:0},f.widgets_below=function(b){var c=a.isPlainObject(b)?b:b.coords().grid,d=this,e=(this.gridmap,c.row+c.size_y-1),f=a([]);return this.for_each_column_occupied(c,function(b){d.for_each_widget_below(b,e,function(){return d.is_player(this)||-1!==a.inArray(this,f)?void 0:(f=f.add(this),!0)})}),this.sort_by_row_asc(f)},f.set_cells_player_occupies=function(a,b){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=a,this.placeholder_grid_data.row=b,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},f.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},f.can_go_up=function(a){var b=a.coords().grid,c=b.row,d=c-1,e=(this.gridmap,!0);return 1===c?!1:(this.for_each_column_occupied(b,function(a){this.is_widget(a,d);return this.is_occupied(a,d)||this.is_player(a,d)||this.is_placeholder_in(a,d)||this.is_player_in(a,d)?(e=!1,!0):void 0}),e)},f.can_move_to=function(a,b,c,d){var e=(this.gridmap,a.el),f={size_y:a.size_y,size_x:a.size_x,col:b,row:c},g=!0,h=b+a.size_x-1;return h>this.cols?!1:d&&d<c+a.size_y-1?!1:(this.for_each_cell_occupied(f,function(b,c){var d=this.is_widget(b,c);d&&(!a.el||d.is(e))&&(g=!1)}),g)},f.get_targeted_columns=function(a){for(var b=(a||this.player_grid_data.col)+(this.player_grid_data.size_x-1),c=[],d=a;b>=d;d++)c.push(d);return c},f.get_targeted_rows=function(a){for(var b=(a||this.player_grid_data.row)+(this.player_grid_data.size_y-1),c=[],d=a;b>=d;d++)c.push(d);return c},f.get_cells_occupied=function(a){var b,c={cols:[],rows:[]};for(arguments[1]instanceof jQuery&&(a=arguments[1].coords().grid),b=0;b<a.size_x;b++){var d=a.col+b;c.cols.push(d)}for(b=0;b<a.size_y;b++){var e=a.row+b;c.rows.push(e)}return c},f.for_each_cell_occupied=function(a,b){return this.for_each_column_occupied(a,function(c){this.for_each_row_occupied(a,function(a){b.call(this,c,a)})}),this},f.for_each_column_occupied=function(a,b){for(var c=0;c<a.size_x;c++){var d=a.col+c;b.call(this,d,a)}},f.for_each_row_occupied=function(a,b){for(var c=0;c<a.size_y;c++){var d=a.row+c;b.call(this,d,a)}},f._traversing_widgets=function(b,c,d,e,f){var g=this.gridmap;if(g[d]){var h,i,j=b+"/"+c;if(arguments[2]instanceof jQuery){var k=arguments[2].coords().grid;d=k.col,e=k.row,f=arguments[3]}var l=[],m=e,n={"for_each/above":function(){for(;m--&&!(m>0&&this.is_widget(d,m)&&-1===a.inArray(g[d][m],l)&&(h=f.call(g[d][m],d,m),l.push(g[d][m]),h)););},"for_each/below":function(){for(m=e+1,i=g[d].length;i>m&&(!this.is_widget(d,m)||-1!==a.inArray(g[d][m],l)||(h=f.call(g[d][m],d,m),l.push(g[d][m]),!h));m++);}};n[j]&&n[j].call(this)}},f.for_each_widget_above=function(a,b,c){return this._traversing_widgets("for_each","above",a,b,c),this},f.for_each_widget_below=function(a,b,c){return this._traversing_widgets("for_each","below",a,b,c),this},f.get_highest_occupied_cell=function(){for(var a,b=this.gridmap,c=[],d=[],e=b.length-1;e>=1;e--)for(a=b[e].length-1;a>=1;a--)if(this.is_widget(e,a)){c.push(a),d[a]=e;break}var f=Math.max.apply(Math,c);return this.highest_occupied_cell={col:d[f],row:f},this.highest_occupied_cell},f.get_widgets_from=function(b,c){var d=(this.gridmap,a());return b&&(d=d.add(this.$widgets.filter(function(){var c=a(this).attr("data-col");return c===b||c>b}))),c&&(d=d.add(this.$widgets.filter(function(){var b=a(this).attr("data-row");return b===c||b>c}))),d},f.set_dom_grid_height=function(){var a=this.get_highest_occupied_cell().row;return this.$el.css("height",a*this.min_widget_height),this},f.generate_stylesheet=function(b){var c,e="",f=this.options.max_size_x;b||(b={}),b.cols||(b.cols=this.cols),b.rows||(b.rows=this.rows),b.namespace||(b.namespace=this.options.namespace),b.widget_base_dimensions||(b.widget_base_dimensions=this.options.widget_base_dimensions),b.widget_margins||(b.widget_margins=this.options.widget_margins),b.min_widget_width=2*b.widget_margins[0]+b.widget_base_dimensions[0],b.min_widget_height=2*b.widget_margins[1]+b.widget_base_dimensions[1];var g=a.param(b);if(a.inArray(g,d.generated_stylesheets)>=0)return!1;for(d.generated_stylesheets.push(g),c=b.cols;c>=0;c--)e+=b.namespace+' [data-col="'+(c+1)+'"] { left:'+(c*b.widget_base_dimensions[0]+c*b.widget_margins[0]+(c+1)*b.widget_margins[0])+"px;} ";for(c=b.rows;c>=0;c--)e+=b.namespace+' [data-row="'+(c+1)+'"] { top:'+(c*b.widget_base_dimensions[1]+c*b.widget_margins[1]+(c+1)*b.widget_margins[1])+"px;} ";for(var h=1;h<=b.rows;h++)e+=b.namespace+' [data-sizey="'+h+'"] { height:'+(h*b.widget_base_dimensions[1]+(h-1)*b.widget_margins[1]*2)+"px;}";for(var i=1;f>=i;i++)e+=b.namespace+' [data-sizex="'+i+'"] { width:'+(i*b.widget_base_dimensions[0]+(i-1)*b.widget_margins[0]*2)+"px;}";return this.add_style_tag(e)},f.add_style_tag=function(a){var b=c,d=b.createElement("style");return b.getElementsByTagName("head")[0].appendChild(d),d.setAttribute("type","text/css"),d.styleSheet?d.styleSheet.cssText=a:d.appendChild(c.createTextNode(a)),this},f.generate_faux_grid=function(a,b){this.faux_grid=[],this.gridmap=[];var c,d;for(c=b;c>0;c--)for(this.gridmap[c]=[],d=a;d>0;d--)this.add_faux_cell(d,c);return this},f.add_faux_cell=function(b,c){var d=a({left:this.baseX+(c-1)*this.min_widget_width,top:this.baseY+(b-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:c,row:b,original_col:c,original_row:b}).coords();return a.isArray(this.gridmap[c])||(this.gridmap[c]=[]),this.gridmap[c][b]=!1,this.faux_grid.push(d),this},f.add_faux_rows=function(a){for(var b=this.rows,c=b+(a||1),d=c;d>b;d--)for(var e=this.cols;e>=1;e--)this.add_faux_cell(d,e);return this.rows=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},f.add_faux_cols=function(a){for(var b=this.cols,c=b+(a||1),d=b;c>d;d++)for(var e=this.rows;e>=1;e--)this.add_faux_cell(e,d);return this.cols=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},f.recalculate_faux_grid=function(){var c=this.$wrapper.width();return this.baseX=(a(b).width()-c)/2,this.baseY=this.$wrapper.offset().top,a.each(this.faux_grid,a.proxy(function(a,b){this.faux_grid[a]=b.update({left:this.baseX+(b.data.col-1)*this.min_widget_width,top:this.baseY+(b.data.row-1)*this.min_widget_height})},this)),this},f.get_widgets_from_DOM=function(){return this.$widgets.each(a.proxy(function(b,c){this.register_widget(a(c))},this)),this},f.generate_grid_and_stylesheet=function(){var c=this.$wrapper.width(),d=(this.$wrapper.height(),Math.floor(c/this.min_widget_width)+this.options.extra_cols),e=this.$widgets.map(function(){return a(this).attr("data-col")});e=Array.prototype.slice.call(e,0),e.length||(e=[0]);var f=Math.max.apply(Math,e),g=this.options.extra_rows;return this.$widgets.each(function(b,c){g+=+a(c).attr("data-sizey")}),this.cols=Math.max(f,d,this.options.min_cols),this.rows=Math.max(g,this.options.min_rows),this.baseX=(a(b).width()-c)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},a.fn.gridster=function(b){return this.each(function(){a(this).data("gridster")||a(this).data("gridster",new d(this,b))})},a.Gridster=f}(jQuery,window,document),function(X,l,n){var L=function(h){var j=function(e){function o(a,b){var c=j.defaults.columns,d=a.aoColumns.length,c=h.extend({},j.models.oColumn,c,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:b?b:l.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.oDefaults:d});a.aoColumns.push(c),a.aoPreSearchCols[d]===n||null===a.aoPreSearchCols[d]?a.aoPreSearchCols[d]=h.extend({},j.models.oSearch):(c=a.aoPreSearchCols[d],c.bRegex===n&&(c.bRegex=!0),c.bSmart===n&&(c.bSmart=!0),c.bCaseInsensitive===n&&(c.bCaseInsensitive=!0)),m(a,d,null)}function m(a,b,c){var d=a.aoColumns[b];c!==n&&null!==c&&(c.mDataProp&&!c.mData&&(c.mData=c.mDataProp),c.sType!==n&&(d.sType=c.sType,d._bAutoType=!1),h.extend(d,c),p(d,c,"sWidth","sWidthOrig"),c.iDataSort!==n&&(d.aDataSort=[c.iDataSort]),p(d,c,"aDataSort"));var e=d.mRender?Q(d.mRender):null,f=Q(d.mData);d.fnGetData=function(a,b){var c=f(a,b);return d.mRender&&b&&""!==b?e(c,b,a):c},d.fnSetData=L(d.mData),a.oFeatures.bSort||(d.bSortable=!1),!d.bSortable||-1==h.inArray("asc",d.asSorting)&&-1==h.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableNone,d.sSortingClassJUI=""):-1==h.inArray("asc",d.asSorting)&&-1==h.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortable,d.sSortingClassJUI=a.oClasses.sSortJUI):-1!=h.inArray("asc",d.asSorting)&&-1==h.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableAsc,d.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):-1==h.inArray("asc",d.asSorting)&&-1!=h.inArray("desc",d.asSorting)&&(d.sSortingClass=a.oClasses.sSortableDesc,d.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function k(a){if(!1===a.oFeatures.bAutoWidth)return!1;da(a);for(var b=0,c=a.aoColumns.length;c>b;b++)a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}function G(a,b){var c=r(a,"bVisible");return"number"==typeof c[b]?c[b]:null}function R(a,b){var c=r(a,"bVisible"),c=h.inArray(b,c);return-1!==c?c:null}function t(a){return r(a,"bVisible").length}function r(a,b){var c=[];return h.map(a.aoColumns,function(a,d){a[b]&&c.push(d)}),c}function B(a){for(var b=j.ext.aTypes,c=b.length,d=0;c>d;d++){var e=b[d](a);if(null!==e)return e}return"string"}function u(a,b){for(var c=b.split(","),d=[],e=0,f=a.aoColumns.length;f>e;e++)for(var g=0;f>g;g++)if(a.aoColumns[e].sName==c[g]){d.push(g);break}return d}function M(a){for(var b="",c=0,d=a.aoColumns.length;d>c;c++)b+=a.aoColumns[c].sName+",";return b.length==d?"":b.slice(0,-1)}function ta(a,b,c,d){var e,f,g,i,j;if(b)for(e=b.length-1;e>=0;e--){var k=b[e].aTargets;for(h.isArray(k)||D(a,1,"aTargets must be an array of targets, not a "+typeof k),f=0,g=k.length;g>f;f++)if("number"==typeof k[f]&&0<=k[f]){for(;a.aoColumns.length<=k[f];)o(a);d(k[f],b[e])}else if("number"==typeof k[f]&&0>k[f])d(a.aoColumns.length+k[f],b[e]);else if("string"==typeof k[f])for(i=0,j=a.aoColumns.length;j>i;i++)("_all"==k[f]||h(a.aoColumns[i].nTh).hasClass(k[f]))&&d(i,b[e])}if(c)for(e=0,a=c.length;a>e;e++)d(e,c[e])}function H(a,b){var c;c=h.isArray(b)?b.slice():h.extend(!0,{},b);var d=a.aoData.length,e=h.extend(!0,{},j.models.oRow);e._aData=c,a.aoData.push(e);for(var f,e=0,g=a.aoColumns.length;g>e;e++)c=a.aoColumns[e],"function"==typeof c.fnRender&&c.bUseRendered&&null!==c.mData?F(a,d,e,S(a,d,e)):F(a,d,e,v(a,d,e)),c._bAutoType&&"string"!=c.sType&&(f=v(a,d,e,"type"),null!==f&&""!==f&&(f=B(f),null===c.sType?c.sType=f:c.sType!=f&&"html"!=c.sType&&(c.sType="string")));return a.aiDisplayMaster.push(d),a.oFeatures.bDeferRender||ea(a,d),d}function ua(a){var b,c,d,e,f,g,i;if(a.bDeferLoading||null===a.sAjaxSource)for(b=a.nTBody.firstChild;b;){if("TR"==b.nodeName.toUpperCase())for(c=a.aoData.length,b._DT_RowIndex=c,a.aoData.push(h.extend(!0,{},j.models.oRow,{nTr:b})),a.aiDisplayMaster.push(c),f=b.firstChild,d=0;f;)g=f.nodeName.toUpperCase(),("TD"==g||"TH"==g)&&(F(a,c,d,h.trim(f.innerHTML)),d++),f=f.nextSibling;b=b.nextSibling}for(e=T(a),d=[],b=0,c=e.length;c>b;b++)for(f=e[b].firstChild;f;)g=f.nodeName.toUpperCase(),("TD"==g||"TH"==g)&&d.push(f),f=f.nextSibling;for(c=0,e=a.aoColumns.length;e>c;c++){i=a.aoColumns[c],null===i.sTitle&&(i.sTitle=i.nTh.innerHTML);var k,l,m=i._bAutoType,n="function"==typeof i.fnRender,o=null!==i.sClass,p=i.bVisible;if(m||n||o||!p)for(g=0,b=a.aoData.length;b>g;g++)f=a.aoData[g],k=d[g*e+c],m&&"string"!=i.sType&&(l=v(a,g,c,"type"),""!==l&&(l=B(l),null===i.sType?i.sType=l:i.sType!=l&&"html"!=i.sType&&(i.sType="string"))),i.mRender?k.innerHTML=v(a,g,c,"display"):i.mData!==c&&(k.innerHTML=v(a,g,c,"display")),n&&(l=S(a,g,c),k.innerHTML=l,i.bUseRendered&&F(a,g,c,l)),o&&(k.className+=" "+i.sClass),p?f._anHidden[c]=null:(f._anHidden[c]=k,k.parentNode.removeChild(k)),i.fnCreatedCell&&i.fnCreatedCell.call(a.oInstance,k,v(a,g,c,"display"),f._aData,g,c)}if(0!==a.aoRowCreatedCallback.length)for(b=0,c=a.aoData.length;c>b;b++)f=a.aoData[b],A(a,"aoRowCreatedCallback",null,[f.nTr,f._aData,b])}function I(a,b){return b._DT_RowIndex!==n?b._DT_RowIndex:null}function fa(a,b,c){for(var b=J(a,b),d=0,a=a.aoColumns.length;a>d;d++)if(b[d]===c)return d;return-1}function Y(a,b,c,d){for(var e=[],f=0,g=d.length;g>f;f++)e.push(v(a,b,d[f],c));return e}function v(a,b,c,d){var e=a.aoColumns[c];if((c=e.fnGetData(a.aoData[b]._aData,d))===n)return a.iDrawError!=a.iDraw&&null===e.sDefaultContent&&(D(a,0,"Requested unknown parameter "+("function"==typeof e.mData?"{mData function}":"'"+e.mData+"'")+" from the data source for row "+b),a.iDrawError=a.iDraw),e.sDefaultContent;if(null===c&&null!==e.sDefaultContent)c=e.sDefaultContent;else if("function"==typeof c)return c();return"display"==d&&null===c?"":c}function F(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d)}function Q(a){if(null===a)return function(){return null};if("function"==typeof a)return function(b,c,d){return a(b,c,d)};if("string"==typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("["))){var b=function(a,c,d){var e,f=d.split(".");if(""!==d){var g=0;for(e=f.length;e>g;g++){if(d=f[g].match(U)){f[g]=f[g].replace(U,""),""!==f[g]&&(a=a[f[g]]),e=[],f.splice(0,g+1);for(var f=f.join("."),g=0,h=a.length;h>g;g++)e.push(b(a[g],c,f));a=d[0].substring(1,d[0].length-1),a=""===a?e:e.join(a);break}if(null===a||a[f[g]]===n)return n;a=a[f[g]]}}return a};return function(c,d){return b(c,d,a)}}return function(b){return b[a]}}function L(a){if(null===a)return function(){};if("function"==typeof a)return function(b,c){a(b,"set",c)};if("string"==typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("["))){var b=function(a,c,d){var e,f,d=d.split("."),g=0;for(f=d.length-1;f>g;g++){if(e=d[g].match(U)){d[g]=d[g].replace(U,""),a[d[g]]=[],e=d.slice(),e.splice(0,g+1),f=e.join(".");for(var h=0,i=c.length;i>h;h++)e={},b(e,c[h],f),a[d[g]].push(e);return}(null===a[d[g]]||a[d[g]]===n)&&(a[d[g]]={}),a=a[d[g]]}a[d[d.length-1].replace(U,"")]=c};return function(c,d){return b(c,d,a)}}return function(b,c){b[a]=c}}function Z(a){for(var b=[],c=a.aoData.length,d=0;c>d;d++)b.push(a.aoData[d]._aData);return b}function ga(a){a.aoData.splice(0,a.aoData.length),a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length),a.aiDisplay.splice(0,a.aiDisplay.length),y(a)}function ha(a,b){for(var c=-1,d=0,e=a.length;e>d;d++)a[d]==b?c=d:a[d]>b&&a[d]--;-1!=c&&a.splice(c,1)}function S(a,b,c){var d=a.aoColumns[c];return d.fnRender({iDataRow:b,iDataColumn:c,oSettings:a,aData:a.aoData[b]._aData,mDataProp:d.mData},v(a,b,c,"display"))}function ea(a,b){var c,d=a.aoData[b];if(null===d.nTr){d.nTr=l.createElement("tr"),d.nTr._DT_RowIndex=b,d._aData.DT_RowId&&(d.nTr.id=d._aData.DT_RowId),d._aData.DT_RowClass&&(d.nTr.className=d._aData.DT_RowClass);for(var e=0,f=a.aoColumns.length;f>e;e++){var g=a.aoColumns[e];c=l.createElement(g.sCellType),c.innerHTML="function"!=typeof g.fnRender||g.bUseRendered&&null!==g.mData?v(a,b,e,"display"):S(a,b,e),null!==g.sClass&&(c.className=g.sClass),g.bVisible?(d.nTr.appendChild(c),d._anHidden[e]=null):d._anHidden[e]=c,g.fnCreatedCell&&g.fnCreatedCell.call(a.oInstance,c,v(a,b,e,"display"),d._aData,b,e)}A(a,"aoRowCreatedCallback",null,[d.nTr,d._aData,b])}}function va(a){var b,c,d;if(0!==h("th, td",a.nTHead).length)for(b=0,d=a.aoColumns.length;d>b;b++)c=a.aoColumns[b].nTh,c.setAttribute("role","columnheader"),a.aoColumns[b].bSortable&&(c.setAttribute("tabindex",a.iTabIndex),c.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[b].sClass&&h(c).addClass(a.aoColumns[b].sClass),a.aoColumns[b].sTitle!=c.innerHTML&&(c.innerHTML=a.aoColumns[b].sTitle);else{var e=l.createElement("tr");for(b=0,d=a.aoColumns.length;d>b;b++)c=a.aoColumns[b].nTh,c.innerHTML=a.aoColumns[b].sTitle,c.setAttribute("tabindex","0"),null!==a.aoColumns[b].sClass&&h(c).addClass(a.aoColumns[b].sClass),e.appendChild(c);h(a.nTHead).html("")[0].appendChild(e),V(a.aoHeader,a.nTHead)}if(h(a.nTHead).children("tr").attr("role","row"),a.bJUI)for(b=0,d=a.aoColumns.length;d>b;b++){c=a.aoColumns[b].nTh,e=l.createElement("div"),e.className=a.oClasses.sSortJUIWrapper,h(c).contents().appendTo(e);var f=l.createElement("span");f.className=a.oClasses.sSortIcon,e.appendChild(f),c.appendChild(e)}if(a.oFeatures.bSort)for(b=0;b<a.aoColumns.length;b++)!1!==a.aoColumns[b].bSortable?ia(a,a.aoColumns[b].nTh,b):h(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone);if(""!==a.oClasses.sFooterTH&&h(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH),null!==a.nTFoot)for(c=N(a,null,a.aoFooter),b=0,d=a.aoColumns.length;d>b;b++)c[b]&&(a.aoColumns[b].nTf=c[b],a.aoColumns[b].sClass&&h(c[b]).addClass(a.aoColumns[b].sClass))}function W(a,b,c){var d,e,f,g,h=[],i=[],j=a.aoColumns.length;for(c===n&&(c=!1),d=0,e=b.length;e>d;d++){for(h[d]=b[d].slice(),h[d].nTr=b[d].nTr,f=j-1;f>=0;f--)!a.aoColumns[f].bVisible&&!c&&h[d].splice(f,1);i.push([])}for(d=0,e=h.length;e>d;d++){if(a=h[d].nTr)for(;f=a.firstChild;)a.removeChild(f);for(f=0,b=h[d].length;b>f;f++)if(g=j=1,i[d][f]===n){for(a.appendChild(h[d][f].cell),i[d][f]=1;h[d+j]!==n&&h[d][f].cell==h[d+j][f].cell;)i[d+j][f]=1,j++;for(;h[d][f+g]!==n&&h[d][f].cell==h[d][f+g].cell;){for(c=0;j>c;c++)i[d+c][f+g]=1;g++}h[d][f].cell.rowSpan=j,h[d][f].cell.colSpan=g}}}function x(a){var b=A(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,b))E(a,!1);else{var c,d,b=[],e=0,f=a.asStripeClasses.length;if(c=a.aoOpenRows.length,a.bDrawing=!0,a.iInitDisplayStart!==n&&-1!=a.iInitDisplayStart&&(a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,y(a)),a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++;else if(a.oFeatures.bServerSide){if(!a.bDestroying&&!wa(a))return}else a.iDraw++;if(0!==a.aiDisplay.length){var g=a._iDisplayStart;for(d=a._iDisplayEnd,a.oFeatures.bServerSide&&(g=0,d=a.aoData.length);d>g;g++){var i=a.aoData[a.aiDisplay[g]];null===i.nTr&&ea(a,a.aiDisplay[g]);var j=i.nTr;if(0!==f){var k=a.asStripeClasses[e%f];i._sRowStripe!=k&&(h(j).removeClass(i._sRowStripe).addClass(k),i._sRowStripe=k)}if(A(a,"aoRowCallback",null,[j,a.aoData[a.aiDisplay[g]]._aData,e,g]),b.push(j),e++,0!==c)for(i=0;c>i;i++)if(j==a.aoOpenRows[i].nParent){b.push(a.aoOpenRows[i].nTr);break}}}else b[0]=l.createElement("tr"),a.asStripeClasses[0]&&(b[0].className=a.asStripeClasses[0]),c=a.oLanguage,f=c.sZeroRecords,1!=a.iDraw||null===a.sAjaxSource||a.oFeatures.bServerSide?c.sEmptyTable&&0===a.fnRecordsTotal()&&(f=c.sEmptyTable):f=c.sLoadingRecords,c=l.createElement("td"),c.setAttribute("valign","top"),c.colSpan=t(a),c.className=a.oClasses.sRowEmpty,c.innerHTML=ja(a,f),b[e].appendChild(c);if(A(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],Z(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]),A(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],Z(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]),e=l.createDocumentFragment(),c=l.createDocumentFragment(),a.nTBody){if(f=a.nTBody.parentNode,c.appendChild(a.nTBody),!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered)for(;c=a.nTBody.firstChild;)a.nTBody.removeChild(c);for(c=0,d=b.length;d>c;c++)e.appendChild(b[c]);a.nTBody.appendChild(e),null!==f&&f.appendChild(a.nTBody)}A(a,"aoDrawCallback","draw",[a]),a.bSorted=!1,a.bFiltered=!1,a.bDrawing=!1,a.oFeatures.bServerSide&&(E(a,!1),a._bInitComplete||$(a))}}function aa(a){a.oFeatures.bSort?O(a,a.oPreviousSearch):a.oFeatures.bFilter?K(a,a.oPreviousSearch):(y(a),x(a))}function xa(a){var b=h("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable),a.nTableWrapper=h('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0],a.nTableReinsertBefore=a.nTable.nextSibling;for(var c,d,e,f,g,i,k,l=a.nTableWrapper,m=a.sDom.split(""),n=0;n<m.length;n++){if(d=0,e=m[n],"<"==e){if(f=h("<div></div>")[0],g=m[n+1],"'"==g||'"'==g){for(i="",k=2;m[n+k]!=g;)i+=m[n+k],k++;"H"==i?i=a.oClasses.sJUIHeader:"F"==i&&(i=a.oClasses.sJUIFooter),-1!=i.indexOf(".")?(g=i.split("."),f.id=g[0].substr(1,g[0].length-1),f.className=g[1]):"#"==i.charAt(0)?f.id=i.substr(1,i.length-1):f.className=i,n+=k}l.appendChild(f),l=f}else if(">"==e)l=l.parentNode;else if("l"==e&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange)c=ya(a),d=1;else if("f"==e&&a.oFeatures.bFilter)c=za(a),d=1;else if("r"==e&&a.oFeatures.bProcessing)c=Aa(a),d=1;else if("t"==e)c=Ba(a),d=1;else if("i"==e&&a.oFeatures.bInfo)c=Ca(a),d=1;else if("p"==e&&a.oFeatures.bPaginate)c=Da(a),d=1;else if(0!==j.ext.aoFeatures.length)for(f=j.ext.aoFeatures,k=0,g=f.length;g>k;k++)if(e==f[k].cFeature){(c=f[k].fnInit(a))&&(d=1);break}1==d&&null!==c&&("object"!=typeof a.aanFeatures[e]&&(a.aanFeatures[e]=[]),a.aanFeatures[e].push(c),l.appendChild(c))
}b.parentNode.replaceChild(a.nTableWrapper,b)}function V(a,b){var c,d,e,f,g,i,j,k,l,m,n=h(b).children("tr");for(a.splice(0,a.length),e=0,i=n.length;i>e;e++)a.push([]);for(e=0,i=n.length;i>e;e++)for(c=n[e],d=c.firstChild;d;){if("TD"==d.nodeName.toUpperCase()||"TH"==d.nodeName.toUpperCase()){for(k=1*d.getAttribute("colspan"),l=1*d.getAttribute("rowspan"),k=k&&0!==k&&1!==k?k:1,l=l&&0!==l&&1!==l?l:1,f=0,g=a[e];g[f];)f++;for(j=f,m=1===k?!0:!1,g=0;k>g;g++)for(f=0;l>f;f++)a[e+f][j+g]={cell:d,unique:m},a[e+f].nTr=c}d=d.nextSibling}}function N(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],V(c,b)));for(var b=0,e=c.length;e>b;b++)for(var f=0,g=c[b].length;g>f;f++)!c[b][f].unique||d[f]&&a.bSortCellsTop||(d[f]=c[b][f].cell);return d}function wa(a){if(a.bAjaxDataGet){a.iDraw++,E(a,!0);var b=Ea(a);return ka(a,b),a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){Fa(a,b)},a),!1}return!0}function Ea(a){var b,c,d,e,f=a.aoColumns.length,g=[];for(g.push({name:"sEcho",value:a.iDraw}),g.push({name:"iColumns",value:f}),g.push({name:"sColumns",value:M(a)}),g.push({name:"iDisplayStart",value:a._iDisplayStart}),g.push({name:"iDisplayLength",value:!1!==a.oFeatures.bPaginate?a._iDisplayLength:-1}),d=0;f>d;d++)b=a.aoColumns[d].mData,g.push({name:"mDataProp_"+d,value:"function"==typeof b?"function":b});if(!1!==a.oFeatures.bFilter)for(g.push({name:"sSearch",value:a.oPreviousSearch.sSearch}),g.push({name:"bRegex",value:a.oPreviousSearch.bRegex}),d=0;f>d;d++)g.push({name:"sSearch_"+d,value:a.aoPreSearchCols[d].sSearch}),g.push({name:"bRegex_"+d,value:a.aoPreSearchCols[d].bRegex}),g.push({name:"bSearchable_"+d,value:a.aoColumns[d].bSearchable});if(!1!==a.oFeatures.bSort){var h=0;for(b=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),d=0;d<b.length;d++)for(c=a.aoColumns[b[d][0]].aDataSort,e=0;e<c.length;e++)g.push({name:"iSortCol_"+h,value:c[e]}),g.push({name:"sSortDir_"+h,value:b[d][1]}),h++;for(g.push({name:"iSortingCols",value:h}),d=0;f>d;d++)g.push({name:"bSortable_"+d,value:a.aoColumns[d].bSortable})}return g}function ka(a,b){A(a,"aoServerParams","serverParams",[b])}function Fa(a,b){if(b.sEcho!==n){if(1*b.sEcho<a.iDraw)return;a.iDraw=1*b.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&ga(a),a._iRecordsTotal=parseInt(b.iTotalRecords,10),a._iRecordsDisplay=parseInt(b.iTotalDisplayRecords,10);var c,d=M(a),d=b.sColumns!==n&&""!==d&&b.sColumns!=d;d&&(c=u(a,b.sColumns));for(var e=Q(a.sAjaxDataProp)(b),f=0,g=e.length;g>f;f++)if(d){for(var h=[],i=0,j=a.aoColumns.length;j>i;i++)h.push(e[f][c[i]]);H(a,h)}else H(a,e[f]);a.aiDisplay=a.aiDisplayMaster.slice(),a.bAjaxDataGet=!1,x(a),a.bAjaxDataGet=!0,E(a,!1)}function za(a){var b=a.oPreviousSearch,c=a.oLanguage.sSearch,c=-1!==c.indexOf("_INPUT_")?c.replace("_INPUT_",'<input type="text" />'):""===c?'<input type="text" />':c+' <input type="text" />',d=l.createElement("div");return d.className=a.oClasses.sFilter,d.innerHTML="<label>"+c+"</label>",a.aanFeatures.f||(d.id=a.sTableId+"_filter"),c=h('input[type="text"]',d),d._DT_Input=c[0],c.val(b.sSearch.replace('"',"&quot;")),c.bind("keyup.DT",function(){for(var c=a.aanFeatures.f,d=""===this.value?"":this.value,e=0,f=c.length;f>e;e++)c[e]!=h(this).parents("div.dataTables_filter")[0]&&h(c[e]._DT_Input).val(d);d!=b.sSearch&&K(a,{sSearch:d,bRegex:b.bRegex,bSmart:b.bSmart,bCaseInsensitive:b.bCaseInsensitive})}),c.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){return 13==a.keyCode?!1:void 0}),d}function K(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch,d.bRegex=a.bRegex,d.bSmart=a.bSmart,d.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide)f(b);else{for(Ga(a,b.sSearch,c,b.bRegex,b.bSmart,b.bCaseInsensitive),f(b),b=0;b<a.aoPreSearchCols.length;b++)Ha(a,e[b].sSearch,b,e[b].bRegex,e[b].bSmart,e[b].bCaseInsensitive);Ia(a)}a.bFiltered=!0,h(a.oInstance).trigger("filter",a),a._iDisplayStart=0,y(a),x(a),la(a,0)}function Ia(a){for(var b=j.ext.afnFiltering,c=r(a,"bSearchable"),d=0,e=b.length;e>d;d++)for(var f=0,g=0,h=a.aiDisplay.length;h>g;g++){var i=a.aiDisplay[g-f];b[d](a,Y(a,i,"filter",c),i)||(a.aiDisplay.splice(g-f,1),f++)}}function Ha(a,b,c,d,e,f){if(""!==b)for(var g=0,b=ma(b,d,e,f),d=a.aiDisplay.length-1;d>=0;d--)e=Ja(v(a,a.aiDisplay[d],c,"filter"),a.aoColumns[c].sType),b.test(e)||(a.aiDisplay.splice(d,1),g++)}function Ga(a,b,c,d,e,f){if(d=ma(b,d,e,f),e=a.oPreviousSearch,c||(c=0),0!==j.ext.afnFiltering.length&&(c=1),0>=b.length)a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice();else if(a.aiDisplay.length==a.aiDisplayMaster.length||e.sSearch.length>b.length||1==c||0!==b.indexOf(e.sSearch))for(a.aiDisplay.splice(0,a.aiDisplay.length),la(a,1),b=0;b<a.aiDisplayMaster.length;b++)d.test(a.asDataSearch[b])&&a.aiDisplay.push(a.aiDisplayMaster[b]);else for(b=c=0;b<a.asDataSearch.length;b++)d.test(a.asDataSearch[b])||(a.aiDisplay.splice(b-c,1),c++)}function la(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch=[];for(var c=r(a,"bSearchable"),d=1===b?a.aiDisplayMaster:a.aiDisplay,e=0,f=d.length;f>e;e++)a.asDataSearch[e]=na(a,Y(a,d[e],"filter",c))}}function na(a,b){var c=b.join("  ");return-1!==c.indexOf("&")&&(c=h("<div>").html(c).text()),c.replace(/[\n\r]/g," ")}function ma(a,b,c,d){return c?(a=b?a.split(" "):oa(a).split(" "),a="^(?=.*?"+a.join(")(?=.*?")+").*$",RegExp(a,d?"i":"")):(a=b?a:oa(a),RegExp(a,d?"i":""))}function Ja(a,b){return"function"==typeof j.ext.ofnSearch[b]?j.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"==typeof a?a.replace(/[\r\n]/g," "):a}function oa(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function Ca(a){var b=l.createElement("div");return b.className=a.oClasses.sInfo,a.aanFeatures.i||(a.aoDrawCallback.push({fn:Ka,sName:"information"}),b.id=a.sTableId+"_info"),a.nTable.setAttribute("aria-describedby",a.sTableId+"_info"),b}function Ka(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b,c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay();for(b=0===g?c.sInfoEmpty:c.sInfo,g!=f&&(b+=" "+c.sInfoFiltered),b+=c.sInfoPostFix,b=ja(a,b),null!==c.fnInfoCallback&&(b=c.fnInfoCallback.call(a.oInstance,a,d,e,f,g,b)),a=a.aanFeatures.i,c=0,d=a.length;d>c;c++)h(a[c]).html(b)}}function ja(a,b){var c=a.fnFormatNumber(a._iDisplayStart+1),d=a.fnDisplayEnd(),d=a.fnFormatNumber(d),e=a.fnRecordsDisplay(),e=a.fnFormatNumber(e),f=a.fnRecordsTotal(),f=a.fnFormatNumber(f);return a.oScroll.bInfinite&&(c=a.fnFormatNumber(1)),b.replace(/_START_/g,c).replace(/_END_/g,d).replace(/_TOTAL_/g,e).replace(/_MAX_/g,f)}function ba(a){var b,c,d=a.iInitDisplayStart;if(!1===a.bInitialised)setTimeout(function(){ba(a)},200);else{for(xa(a),va(a),W(a,a.aoHeader),a.nTFoot&&W(a,a.aoFooter),E(a,!0),a.oFeatures.bAutoWidth&&da(a),b=0,c=a.aoColumns.length;c>b;b++)null!==a.aoColumns[b].sWidth&&(a.aoColumns[b].nTh.style.width=q(a.aoColumns[b].sWidth));a.oFeatures.bSort?O(a):a.oFeatures.bFilter?K(a,a.oPreviousSearch):(a.aiDisplay=a.aiDisplayMaster.slice(),y(a),x(a)),null===a.sAjaxSource||a.oFeatures.bServerSide?a.oFeatures.bServerSide||(E(a,!1),$(a)):(c=[],ka(a,c),a.fnServerData.call(a.oInstance,a.sAjaxSource,c,function(c){var e=""!==a.sAjaxDataProp?Q(a.sAjaxDataProp)(c):c;for(b=0;b<e.length;b++)H(a,e[b]);a.iInitDisplayStart=d,a.oFeatures.bSort?O(a):(a.aiDisplay=a.aiDisplayMaster.slice(),y(a),x(a)),E(a,!1),$(a,c)},a))}}function $(a,b){a._bInitComplete=!0,A(a,"aoInitComplete","init",[a,b])}function pa(a){var b=j.defaults.oLanguage;!a.sEmptyTable&&a.sZeroRecords&&"No data available in table"===b.sEmptyTable&&p(a,a,"sZeroRecords","sEmptyTable"),!a.sLoadingRecords&&a.sZeroRecords&&"Loading..."===b.sLoadingRecords&&p(a,a,"sZeroRecords","sLoadingRecords")}function ya(a){if(a.oScroll.bInfinite)return null;var b,c,d='<select size="1" '+('name="'+a.sTableId+'_length"')+">",e=a.aLengthMenu;if(2==e.length&&"object"==typeof e[0]&&"object"==typeof e[1])for(b=0,c=e[0].length;c>b;b++)d+='<option value="'+e[0][b]+'">'+e[1][b]+"</option>";else for(b=0,c=e.length;c>b;b++)d+='<option value="'+e[b]+'">'+e[b]+"</option>";return d+="</select>",e=l.createElement("div"),a.aanFeatures.l||(e.id=a.sTableId+"_length"),e.className=a.oClasses.sLength,e.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",d)+"</label>",h('select option[value="'+a._iDisplayLength+'"]',e).attr("selected",!0),h("select",e).bind("change.DT",function(){var d=h(this).val(),e=a.aanFeatures.l;for(b=0,c=e.length;c>b;b++)e[b]!=this.parentNode&&h("select",e[b]).val(d);a._iDisplayLength=parseInt(d,10),y(a),a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,a._iDisplayStart<0&&(a._iDisplayStart=0)),-1==a._iDisplayLength&&(a._iDisplayStart=0),x(a)}),h("select",e).attr("aria-controls",a.sTableId),e}function y(a){a._iDisplayEnd=!1===a.oFeatures.bPaginate?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Da(a){if(a.oScroll.bInfinite)return null;var b=l.createElement("div");return b.className=a.oClasses.sPaging+a.sPaginationType,j.ext.oPagination[a.sPaginationType].fnInit(a,b,function(a){y(a),x(a)}),a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){j.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){y(a),x(a)})},sName:"pagination"}),b}function qa(a,b){var c=a._iDisplayStart;if("number"==typeof b)a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()&&(a._iDisplayStart=0);else if("first"==b)a._iDisplayStart=0;else if("previous"==b)a._iDisplayStart=0<=a._iDisplayLength?a._iDisplayStart-a._iDisplayLength:0,0>a._iDisplayStart&&(a._iDisplayStart=0);else if("next"==b)0<=a._iDisplayLength?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0;else if("last"==b)if(0<=a._iDisplayLength){var d=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(d-1)*a._iDisplayLength}else a._iDisplayStart=0;else D(a,0,"Unknown paging action: "+b);return h(a.oInstance).trigger("page",a),c!=a._iDisplayStart}function Aa(a){var b=l.createElement("div");return a.aanFeatures.r||(b.id=a.sTableId+"_processing"),b.innerHTML=a.oLanguage.sProcessing,b.className=a.oClasses.sProcessing,a.nTable.parentNode.insertBefore(b,a.nTable),b}function E(a,b){if(a.oFeatures.bProcessing)for(var c=a.aanFeatures.r,d=0,e=c.length;e>d;d++)c[d].style.visibility=b?"visible":"hidden";h(a.oInstance).trigger("processing",[a,b])}function Ba(a){if(""===a.oScroll.sX&&""===a.oScroll.sY)return a.nTable;var b=l.createElement("div"),c=l.createElement("div"),d=l.createElement("div"),e=l.createElement("div"),f=l.createElement("div"),g=l.createElement("div"),i=a.nTable.cloneNode(!1),j=a.nTable.cloneNode(!1),k=a.nTable.getElementsByTagName("thead")[0],m=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],n=a.oClasses;return c.appendChild(d),f.appendChild(g),e.appendChild(a.nTable),b.appendChild(c),b.appendChild(e),d.appendChild(i),i.appendChild(k),null!==m&&(b.appendChild(f),g.appendChild(j),j.appendChild(m)),b.className=n.sScrollWrapper,c.className=n.sScrollHead,d.className=n.sScrollHeadInner,e.className=n.sScrollBody,f.className=n.sScrollFoot,g.className=n.sScrollFootInner,a.oScroll.bAutoCss&&(c.style.overflow="hidden",c.style.position="relative",f.style.overflow="hidden",e.style.overflow="auto"),c.style.border="0",c.style.width="100%",f.style.border="0",d.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%",i.removeAttribute("id"),i.style.marginLeft="0",a.nTable.style.marginLeft="0",null!==m&&(j.removeAttribute("id"),j.style.marginLeft="0"),d=h(a.nTable).children("caption"),0<d.length&&(d=d[0],"top"===d._captionSide?i.appendChild(d):"bottom"===d._captionSide&&m&&j.appendChild(d)),""!==a.oScroll.sX&&(c.style.width=q(a.oScroll.sX),e.style.width=q(a.oScroll.sX),null!==m&&(f.style.width=q(a.oScroll.sX)),h(e).scroll(function(){c.scrollLeft=this.scrollLeft,null!==m&&(f.scrollLeft=this.scrollLeft)})),""!==a.oScroll.sY&&(e.style.height=q(a.oScroll.sY)),a.aoDrawCallback.push({fn:La,sName:"scrolling"}),a.oScroll.bInfinite&&h(e).scroll(function(){!a.bDrawing&&0!==h(this).scrollTop()&&h(this).scrollTop()+h(this).height()>h(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(qa(a,"next"),y(a),x(a))}),a.nScrollHead=c,a.nScrollFoot=f,b}function La(a){var b,c,d,e,f,g,i,j,k=a.nScrollHead.getElementsByTagName("div")[0],l=k.getElementsByTagName("table")[0],m=a.nTable.parentNode,n=[],o=[],p=null!==a.nTFoot?a.nScrollFoot.getElementsByTagName("div")[0]:null,r=null!==a.nTFoot?p.getElementsByTagName("table")[0]:null,s=a.oBrowser.bScrollOversize,t=function(a){i=a.style,i.paddingTop="0",i.paddingBottom="0",i.borderTopWidth="0",i.borderBottomWidth="0",i.height=0};h(a.nTable).children("thead, tfoot").remove(),b=h(a.nTHead).clone()[0],a.nTable.insertBefore(b,a.nTable.childNodes[0]),d=a.nTHead.getElementsByTagName("tr"),e=b.getElementsByTagName("tr"),null!==a.nTFoot&&(f=h(a.nTFoot).clone()[0],a.nTable.insertBefore(f,a.nTable.childNodes[1]),g=a.nTFoot.getElementsByTagName("tr"),f=f.getElementsByTagName("tr")),""===a.oScroll.sX&&(m.style.width="100%",k.parentNode.style.width="100%");var u=N(a,b);for(b=0,c=u.length;c>b;b++)j=G(a,b),u[b].style.width=a.aoColumns[j].sWidth;null!==a.nTFoot&&C(function(a){a.style.width=""},f),a.oScroll.bCollapse&&""!==a.oScroll.sY&&(m.style.height=m.offsetHeight+a.nTHead.offsetHeight+"px"),b=h(a.nTable).outerWidth(),""===a.oScroll.sX?(a.nTable.style.width="100%",s&&(h("tbody",m).height()>m.offsetHeight||"scroll"==h(m).css("overflow-y"))&&(a.nTable.style.width=q(h(a.nTable).outerWidth()-a.oScroll.iBarWidth))):""!==a.oScroll.sXInner?a.nTable.style.width=q(a.oScroll.sXInner):b==h(m).width()&&h(m).height()<h(a.nTable).height()?(a.nTable.style.width=q(b-a.oScroll.iBarWidth),h(a.nTable).outerWidth()>b-a.oScroll.iBarWidth&&(a.nTable.style.width=q(b))):a.nTable.style.width=q(b),b=h(a.nTable).outerWidth(),C(t,e),C(function(a){n.push(q(h(a).width()))},e),C(function(a,b){a.style.width=n[b]},d),h(e).height(0),null!==a.nTFoot&&(C(t,f),C(function(a){o.push(q(h(a).width()))},f),C(function(a,b){a.style.width=o[b]},g),h(f).height(0)),C(function(a,b){a.innerHTML="",a.style.width=n[b]},e),null!==a.nTFoot&&C(function(a,b){a.innerHTML="",a.style.width=o[b]},f),h(a.nTable).outerWidth()<b?(d=m.scrollHeight>m.offsetHeight||"scroll"==h(m).css("overflow-y")?b+a.oScroll.iBarWidth:b,s&&(m.scrollHeight>m.offsetHeight||"scroll"==h(m).css("overflow-y"))&&(a.nTable.style.width=q(d-a.oScroll.iBarWidth)),m.style.width=q(d),a.nScrollHead.style.width=q(d),null!==a.nTFoot&&(a.nScrollFoot.style.width=q(d)),""===a.oScroll.sX?D(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&D(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):(m.style.width=q("100%"),a.nScrollHead.style.width=q("100%"),null!==a.nTFoot&&(a.nScrollFoot.style.width=q("100%"))),""===a.oScroll.sY&&s&&(m.style.height=q(a.nTable.offsetHeight+a.oScroll.iBarWidth)),""!==a.oScroll.sY&&a.oScroll.bCollapse&&(m.style.height=q(a.oScroll.sY),s=""!==a.oScroll.sX&&a.nTable.offsetWidth>m.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<m.offsetHeight&&(m.style.height=q(a.nTable.offsetHeight+s))),s=h(a.nTable).outerWidth(),l.style.width=q(s),k.style.width=q(s),l=h(a.nTable).height()>m.clientHeight||"scroll"==h(m).css("overflow-y"),k.style.paddingRight=l?a.oScroll.iBarWidth+"px":"0px",null!==a.nTFoot&&(r.style.width=q(s),p.style.width=q(s),p.style.paddingRight=l?a.oScroll.iBarWidth+"px":"0px"),h(m).scroll(),(a.bSorted||a.bFiltered)&&(m.scrollTop=0)}function C(a,b,c){for(var d,e,f=0,g=0,h=b.length;h>g;){for(d=b[g].firstChild,e=c?c[g].firstChild:null;d;)1===d.nodeType&&(c?a(d,e,f):a(d,f),f++),d=d.nextSibling,e=c?e.nextSibling:null;g++}}function Ma(a,b){if(!a||null===a||""===a)return 0;b||(b=l.body);var c,d=l.createElement("div");return d.style.width=q(a),b.appendChild(d),c=d.offsetWidth,b.removeChild(d),c}function da(a){var b,c,d,e=0,f=0,g=a.aoColumns.length,i=h("th",a.nTHead),j=a.nTable.getAttribute("width");for(d=a.nTable.parentNode,c=0;g>c;c++)a.aoColumns[c].bVisible&&(f++,null!==a.aoColumns[c].sWidth&&(b=Ma(a.aoColumns[c].sWidthOrig,d),null!==b&&(a.aoColumns[c].sWidth=q(b)),e++));if(g==i.length&&0===e&&f==g&&""===a.oScroll.sX&&""===a.oScroll.sY)for(c=0;c<a.aoColumns.length;c++)b=h(i[c]).width(),null!==b&&(a.aoColumns[c].sWidth=q(b));else{for(e=a.nTable.cloneNode(!1),c=a.nTHead.cloneNode(!0),f=l.createElement("tbody"),b=l.createElement("tr"),e.removeAttribute("id"),e.appendChild(c),null!==a.nTFoot&&(e.appendChild(a.nTFoot.cloneNode(!0)),C(function(a){a.style.width=""},e.getElementsByTagName("tr"))),e.appendChild(f),f.appendChild(b),f=h("thead th",e),0===f.length&&(f=h("tbody tr:eq(0)>td",e)),i=N(a,c),c=f=0;g>c;c++){var k=a.aoColumns[c];k.bVisible&&null!==k.sWidthOrig&&""!==k.sWidthOrig?i[c-f].style.width=q(k.sWidthOrig):k.bVisible?i[c-f].style.width="":f++}for(c=0;g>c;c++)a.aoColumns[c].bVisible&&(f=Na(a,c),null!==f&&(f=f.cloneNode(!0),""!==a.aoColumns[c].sContentPadding&&(f.innerHTML+=a.aoColumns[c].sContentPadding),b.appendChild(f)));if(d.appendChild(e),""!==a.oScroll.sX&&""!==a.oScroll.sXInner?e.style.width=q(a.oScroll.sXInner):""!==a.oScroll.sX?(e.style.width="",h(e).width()<d.offsetWidth&&(e.style.width=q(d.offsetWidth))):""!==a.oScroll.sY?e.style.width=q(d.offsetWidth):j&&(e.style.width=q(j)),e.style.visibility="hidden",Oa(a,e),g=h("tbody tr:eq(0)",e).children(),0===g.length&&(g=N(a,h("thead",e)[0])),""!==a.oScroll.sX){for(c=f=d=0;c<a.aoColumns.length;c++)a.aoColumns[c].bVisible&&(d=null===a.aoColumns[c].sWidthOrig?d+h(g[f]).outerWidth():d+(parseInt(a.aoColumns[c].sWidth.replace("px",""),10)+(h(g[f]).outerWidth()-h(g[f]).width())),f++);e.style.width=q(d),a.nTable.style.width=q(d)}for(c=f=0;c<a.aoColumns.length;c++)a.aoColumns[c].bVisible&&(d=h(g[f]).width(),null!==d&&d>0&&(a.aoColumns[c].sWidth=q(d)),f++);g=h(e).css("width"),a.nTable.style.width=-1!==g.indexOf("%")?g:q(h(e).outerWidth()),e.parentNode.removeChild(e)}j&&(a.nTable.style.width=q(j))}function Oa(a,b){""===a.oScroll.sX&&""!==a.oScroll.sY?(h(b).width(),b.style.width=q(h(b).outerWidth()-a.oScroll.iBarWidth)):""!==a.oScroll.sX&&(b.style.width=q(h(b).outerWidth()))}function Na(a,b){var c=Pa(a,b);if(0>c)return null;if(null===a.aoData[c].nTr){var d=l.createElement("td");return d.innerHTML=v(a,c,b,""),d}return J(a,c)[b]}function Pa(a,b){for(var c=-1,d=-1,e=0;e<a.aoData.length;e++){var f=v(a,e,b,"display")+"",f=f.replace(/<.*?>/g,"");f.length>c&&(c=f.length,d=e)}return d}function q(a){if(null===a)return"0px";if("number"==typeof a)return 0>a?"0px":a+"px";var b=a.charCodeAt(a.length-1);return 48>b||b>57?a:a+"px"}function Qa(){var a=l.createElement("p"),b=a.style;b.width="100%",b.height="200px",b.padding="0px";var c=l.createElement("div"),b=c.style;return b.position="absolute",b.top="0px",b.left="0px",b.visibility="hidden",b.width="200px",b.height="150px",b.padding="0px",b.overflow="hidden",c.appendChild(a),l.body.appendChild(c),b=a.offsetWidth,c.style.overflow="scroll",a=a.offsetWidth,b==a&&(a=c.clientWidth),l.body.removeChild(c),b-a}function O(a,b){var c,d,e,f,g,i,k=[],l=[],m=j.ext.oSort,o=a.aoData,p=a.aoColumns,q=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){for(k=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),c=0;c<k.length;c++)if(d=k[c][0],e=R(a,d),f=a.aoColumns[d].sSortDataType,j.ext.afnSortData[f])if(g=j.ext.afnSortData[f].call(a.oInstance,a,d,e),g.length===o.length)for(e=0,f=o.length;f>e;e++)F(a,e,d,g[e]);else D(a,0,"Returned data sort array (col "+d+") is the wrong length");for(c=0,d=a.aiDisplayMaster.length;d>c;c++)l[a.aiDisplayMaster[c]]=c;var r,s=k.length;for(c=0,d=o.length;d>c;c++)for(e=0;s>e;e++)for(r=p[k[e][0]].aDataSort,g=0,i=r.length;i>g;g++)f=p[r[g]].sType,f=m[(f?f:"string")+"-pre"],o[c]._aSortData[r[g]]=f?f(v(a,c,r[g],"sort")):v(a,c,r[g],"sort");a.aiDisplayMaster.sort(function(a,b){var c,d,e,f,g;for(c=0;s>c;c++)for(g=p[k[c][0]].aDataSort,d=0,e=g.length;e>d;d++)if(f=p[g[d]].sType,f=m[(f?f:"string")+"-"+k[c][1]](o[a]._aSortData[g[d]],o[b]._aSortData[g[d]]),0!==f)return f;return m["numeric-asc"](l[a],l[b])})}for((b===n||b)&&!a.oFeatures.bDeferRender&&P(a),c=0,d=a.aoColumns.length;d>c;c++)f=p[c].sTitle.replace(/<.*?>/g,""),e=p[c].nTh,e.removeAttribute("aria-sort"),e.removeAttribute("aria-label"),p[c].bSortable?0<k.length&&k[0][0]==c?(e.setAttribute("aria-sort","asc"==k[0][1]?"ascending":"descending"),e.setAttribute("aria-label",f+("asc"==(p[c].asSorting[k[0][2]+1]?p[c].asSorting[k[0][2]+1]:p[c].asSorting[0])?q.sSortAscending:q.sSortDescending))):e.setAttribute("aria-label",f+("asc"==p[c].asSorting[0]?q.sSortAscending:q.sSortDescending)):e.setAttribute("aria-label",f);a.bSorted=!0,h(a.oInstance).trigger("sort",a),a.oFeatures.bFilter?K(a,a.oPreviousSearch,1):(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,y(a),x(a))}function ia(a,b,c,d){Ra(b,{},function(b){if(!1!==a.aoColumns[c].bSortable){var e=function(){var d,e;if(b.shiftKey){for(var f=!1,g=0;g<a.aaSorting.length;g++)if(a.aaSorting[g][0]==c){f=!0,d=a.aaSorting[g][0],e=a.aaSorting[g][2]+1,a.aoColumns[d].asSorting[e]?(a.aaSorting[g][1]=a.aoColumns[d].asSorting[e],a.aaSorting[g][2]=e):a.aaSorting.splice(g,1);break}!1===f&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else 1==a.aaSorting.length&&a.aaSorting[0][0]==c?(d=a.aaSorting[0][0],e=a.aaSorting[0][2]+1,a.aoColumns[d].asSorting[e]||(e=0),a.aaSorting[0][1]=a.aoColumns[d].asSorting[e],a.aaSorting[0][2]=e):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]));O(a)};a.oFeatures.bProcessing?(E(a,!0),setTimeout(function(){e(),a.oFeatures.bServerSide||E(a,!1)},0)):e(),"function"==typeof d&&d(a)}})}function P(a){var b,c,d,e,f,g=a.aoColumns.length,i=a.oClasses;for(b=0;g>b;b++)a.aoColumns[b].bSortable&&h(a.aoColumns[b].nTh).removeClass(i.sSortAsc+" "+i.sSortDesc+" "+a.aoColumns[b].sSortingClass);for(c=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].bSortable){for(f=a.aoColumns[b].sSortingClass,e=-1,d=0;d<c.length;d++)if(c[d][0]==b){f="asc"==c[d][1]?i.sSortAsc:i.sSortDesc,e=d;break}h(a.aoColumns[b].nTh).addClass(f),a.bJUI&&(f=h("span."+i.sSortIcon,a.aoColumns[b].nTh),f.removeClass(i.sSortJUIAsc+" "+i.sSortJUIDesc+" "+i.sSortJUI+" "+i.sSortJUIAscAllowed+" "+i.sSortJUIDescAllowed),f.addClass(-1==e?a.aoColumns[b].sSortingClassJUI:"asc"==c[e][1]?i.sSortJUIAsc:i.sSortJUIDesc))}else h(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass);if(f=i.sSortColumn,a.oFeatures.bSort&&a.oFeatures.bSortClasses){for(a=J(a),e=[],b=0;g>b;b++)e.push("");for(b=0,d=1;b<c.length;b++)i=parseInt(c[b][0],10),e[i]=f+d,3>d&&d++;f=RegExp(f+"[123]");var j;for(b=0,c=a.length;c>b;b++)i=b%g,d=a[b].className,j=e[i],i=d.replace(f,j),i!=d?a[b].className=h.trim(i):0<j.length&&-1==d.indexOf(j)&&(a[b].className=d+" "+j)}}function ra(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,c;b=a.oScroll.bInfinite;var d={iCreate:(new Date).getTime(),iStart:b?0:a._iDisplayStart,iEnd:b?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:h.extend(!0,[],a.aaSorting),oSearch:h.extend(!0,{},a.oPreviousSearch),aoSearchCols:h.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};for(b=0,c=a.aoColumns.length;c>b;b++)d.abVisCols.push(a.aoColumns[b].bVisible);A(a,"aoStateSaveParams","stateSaveParams",[a,d]),a.fnStateSave.call(a.oInstance,a,d)}}function Sa(a,b){if(a.oFeatures.bStateSave){var c=a.fnStateLoad.call(a.oInstance,a);if(c){var d=A(a,"aoStateLoadParams","stateLoadParams",[a,c]);if(-1===h.inArray(!1,d)){for(a.oLoadedState=h.extend(!0,{},c),a._iDisplayStart=c.iStart,a.iInitDisplayStart=c.iStart,a._iDisplayEnd=c.iEnd,a._iDisplayLength=c.iLength,a.aaSorting=c.aaSorting.slice(),a.saved_aaSorting=c.aaSorting.slice(),h.extend(a.oPreviousSearch,c.oSearch),h.extend(!0,a.aoPreSearchCols,c.aoSearchCols),b.saved_aoColumns=[],d=0;d<c.abVisCols.length;d++)b.saved_aoColumns[d]={},b.saved_aoColumns[d].bVisible=c.abVisCols[d];A(a,"aoStateLoaded","stateLoaded",[a,c])}}}}function s(a){for(var b=0;b<j.settings.length;b++)if(j.settings[b].nTable===a)return j.settings[b];return null}function T(a){for(var b=[],a=a.aoData,c=0,d=a.length;d>c;c++)null!==a[c].nTr&&b.push(a[c].nTr);return b}function J(a,b){var c,d,e,f,g,h,i=[];d=0;var j=a.aoData.length;for(b!==n&&(d=b,j=b+1),e=d;j>e;e++)if(h=a.aoData[e],null!==h.nTr){for(d=[],c=h.nTr.firstChild;c;)f=c.nodeName.toLowerCase(),("td"==f||"th"==f)&&d.push(c),c=c.nextSibling;for(f=c=0,g=a.aoColumns.length;g>f;f++)a.aoColumns[f].bVisible?i.push(d[f-c]):(i.push(h._anHidden[f]),c++)}return i}function D(a,b,c){if(a=null===a?"DataTables warning: "+c:"DataTables warning (table id = '"+a.sTableId+"'): "+c,0===b){if("alert"!=j.ext.sErrMode)throw Error(a);alert(a)}else X.console&&console.log&&console.log(a)}function p(a,b,c,d){d===n&&(d=c),b[c]!==n&&(a[d]=b[c])}function Ta(a,b){var c,d;for(d in b)b.hasOwnProperty(d)&&(c=b[d],"object"==typeof e[d]&&null!==c&&!1===h.isArray(c)?h.extend(!0,a[d],c):a[d]=c);return a}function Ra(a,b,c){h(a).bind("click.DT",b,function(b){a.blur(),c(b)}).bind("keypress.DT",b,function(a){13===a.which&&c(a)}).bind("selectstart.DT",function(){return!1})}function z(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function A(a,b,c,d){for(var b=a[b],e=[],f=b.length-1;f>=0;f--)e.push(b[f].fn.apply(a.oInstance,d));return null!==c&&h(a.oInstance).trigger(c,d),e}function Ua(a){var b=h('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];l.body.appendChild(b),a.oBrowser.bScrollOversize=100===h("#DT_BrowserTest",b)[0].offsetWidth?!0:!1,l.body.removeChild(b)}function Va(a){return function(){var b=[s(this[j.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return j.ext.oApi[a].apply(this,b)}}var U=/\[.*?\]$/,Wa=X.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a)return"string"===b&&(a='"'+a+'"'),a+"";var c,d,e=[],f=h.isArray(a);for(c in a)d=a[c],b=typeof d,"string"===b?d='"'+d+'"':"object"===b&&null!==d&&(d=Wa(d)),e.push((f?"":'"'+c+'":')+d);return(f?"[":"{")+e+(f?"]":"}")};this.$=function(a,b){var c,d,e,f=[];d=s(this[j.ext.iApiIndex]);var g=d.aoData,i=d.aiDisplay,k=d.aiDisplayMaster;if(b||(b={}),b=h.extend({},{filter:"none",order:"current",page:"all"},b),"current"==b.page)for(c=d._iDisplayStart,d=d.fnDisplayEnd();d>c;c++)(e=g[i[c]].nTr)&&f.push(e);else if("current"==b.order&&"none"==b.filter)for(c=0,d=k.length;d>c;c++)(e=g[k[c]].nTr)&&f.push(e);else if("current"==b.order&&"applied"==b.filter)for(c=0,d=i.length;d>c;c++)(e=g[i[c]].nTr)&&f.push(e);else if("original"==b.order&&"none"==b.filter)for(c=0,d=g.length;d>c;c++)(e=g[c].nTr)&&f.push(e);else if("original"==b.order&&"applied"==b.filter)for(c=0,d=g.length;d>c;c++)e=g[c].nTr,-1!==h.inArray(c,i)&&e&&f.push(e);else D(d,1,"Unknown selection options");return f=h(f),c=f.filter(a),f=f.find(a),h([].concat(h.makeArray(c),h.makeArray(f)))},this._=function(a,b){var c,d,e=[],f=this.$(a,b);for(c=0,d=f.length;d>c;c++)e.push(this.fnGetData(f[c]));return e},this.fnAddData=function(a,b){if(0===a.length)return[];var c,d=[],e=s(this[j.ext.iApiIndex]);if("object"==typeof a[0]&&null!==a[0])for(var f=0;f<a.length;f++){if(c=H(e,a[f]),-1==c)return d;d.push(c)}else{if(c=H(e,a),-1==c)return d;d.push(c)}return e.aiDisplay=e.aiDisplayMaster.slice(),(b===n||b)&&aa(e),d},this.fnAdjustColumnSizing=function(a){var b=s(this[j.ext.iApiIndex]);k(b),a===n||a?this.fnDraw(!1):(""!==b.oScroll.sX||""!==b.oScroll.sY)&&this.oApi._fnScrollDraw(b)},this.fnClearTable=function(a){var b=s(this[j.ext.iApiIndex]);ga(b),(a===n||a)&&x(b)},this.fnClose=function(a){for(var b=s(this[j.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return(a=b.aoOpenRows[c].nTr.parentNode)&&a.removeChild(b.aoOpenRows[c].nTr),b.aoOpenRows.splice(c,1),0;return 1},this.fnDeleteRow=function(a,b,c){var d,e,f=s(this[j.ext.iApiIndex]),a="object"==typeof a?I(f,a):a,g=f.aoData.splice(a,1);for(d=0,e=f.aoData.length;e>d;d++)null!==f.aoData[d].nTr&&(f.aoData[d].nTr._DT_RowIndex=d);return d=h.inArray(a,f.aiDisplay),f.asDataSearch.splice(d,1),ha(f.aiDisplayMaster,a),ha(f.aiDisplay,a),"function"==typeof b&&b.call(this,f,g),f._iDisplayStart>=f.fnRecordsDisplay()&&(f._iDisplayStart-=f._iDisplayLength,0>f._iDisplayStart&&(f._iDisplayStart=0)),(c===n||c)&&(y(f),x(f)),g},this.fnDestroy=function(a){var b,c,d=s(this[j.ext.iApiIndex]),f=d.nTableWrapper.parentNode,g=d.nTBody,a=a===n?!1:a;if(d.bDestroying=!0,A(d,"aoDestroyCallback","destroy",[d]),!a)for(b=0,c=d.aoColumns.length;c>b;b++)!1===d.aoColumns[b].bVisible&&this.fnSetColumnVis(b,!0);for(h(d.nTableWrapper).find("*").andSelf().unbind(".DT"),h("tbody>tr>td."+d.oClasses.sRowEmpty,d.nTable).parent().remove(),d.nTable!=d.nTHead.parentNode&&(h(d.nTable).children("thead").remove(),d.nTable.appendChild(d.nTHead)),d.nTFoot&&d.nTable!=d.nTFoot.parentNode&&(h(d.nTable).children("tfoot").remove(),d.nTable.appendChild(d.nTFoot)),d.nTable.parentNode.removeChild(d.nTable),h(d.nTableWrapper).remove(),d.aaSorting=[],d.aaSortingFixed=[],P(d),h(T(d)).removeClass(d.asStripeClasses.join(" ")),h("th, td",d.nTHead).removeClass([d.oClasses.sSortable,d.oClasses.sSortableAsc,d.oClasses.sSortableDesc,d.oClasses.sSortableNone].join(" ")),d.bJUI&&(h("th span."+d.oClasses.sSortIcon+", td span."+d.oClasses.sSortIcon,d.nTHead).remove(),h("th, td",d.nTHead).each(function(){var a=h("div."+d.oClasses.sSortJUIWrapper,this),b=a.contents();h(this).append(b),a.remove()})),!a&&d.nTableReinsertBefore?f.insertBefore(d.nTable,d.nTableReinsertBefore):a||f.appendChild(d.nTable),b=0,c=d.aoData.length;c>b;b++)null!==d.aoData[b].nTr&&g.appendChild(d.aoData[b].nTr);if(!0===d.oFeatures.bAutoWidth&&(d.nTable.style.width=q(d.sDestroyWidth)),c=d.asDestroyStripes.length)for(a=h(g).children("tr"),b=0;c>b;b++)a.filter(":nth-child("+c+"n + "+b+")").addClass(d.asDestroyStripes[b]);for(b=0,c=j.settings.length;c>b;b++)j.settings[b]==d&&j.settings.splice(b,1);e=d=null},this.fnDraw=function(a){var b=s(this[j.ext.iApiIndex]);!1===a?(y(b),x(b)):aa(b)},this.fnFilter=function(a,b,c,d,e,f){var g=s(this[j.ext.iApiIndex]);if(g.oFeatures.bFilter)if((c===n||null===c)&&(c=!1),(d===n||null===d)&&(d=!0),(e===n||null===e)&&(e=!0),(f===n||null===f)&&(f=!0),b===n||null===b){if(K(g,{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f},1),e&&g.aanFeatures.f)for(b=g.aanFeatures.f,c=0,d=b.length;d>c;c++)try{b[c]._DT_Input!=l.activeElement&&h(b[c]._DT_Input).val(a)}catch(i){h(b[c]._DT_Input).val(a)}}else h.extend(g.aoPreSearchCols[b],{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f}),K(g,g.oPreviousSearch,1)},this.fnGetData=function(a,b){var c=s(this[j.ext.iApiIndex]);if(a!==n){var d=a;if("object"==typeof a){var e=a.nodeName.toLowerCase();"tr"===e?d=I(c,a):"td"===e&&(d=I(c,a.parentNode),b=fa(c,d,a))}return b!==n?v(c,d,b,""):c.aoData[d]!==n?c.aoData[d]._aData:null}return Z(c)},this.fnGetNodes=function(a){var b=s(this[j.ext.iApiIndex]);return a!==n?b.aoData[a]!==n?b.aoData[a].nTr:null:T(b)},this.fnGetPosition=function(a){var b=s(this[j.ext.iApiIndex]),c=a.nodeName.toUpperCase();return"TR"==c?I(b,a):"TD"==c||"TH"==c?(c=I(b,a.parentNode),a=fa(b,c,a),[c,R(b,a),a]):null},this.fnIsOpen=function(a){for(var b=s(this[j.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return!0;return!1},this.fnOpen=function(a,b,c){var d=s(this[j.ext.iApiIndex]),e=T(d);if(-1!==h.inArray(a,e)){this.fnClose(a);var e=l.createElement("tr"),f=l.createElement("td");
return e.appendChild(f),f.className=c,f.colSpan=t(d),"string"==typeof b?f.innerHTML=b:h(f).html(b),b=h("tr",d.nTBody),-1!=h.inArray(a,b)&&h(e).insertAfter(a),d.aoOpenRows.push({nTr:e,nParent:a}),e}},this.fnPageChange=function(a,b){var c=s(this[j.ext.iApiIndex]);qa(c,a),y(c),(b===n||b)&&x(c)},this.fnSetColumnVis=function(a,b,c){var d,e,f,g,h=s(this[j.ext.iApiIndex]),i=h.aoColumns,l=h.aoData;if(i[a].bVisible!=b){if(b){for(d=e=0;a>d;d++)i[d].bVisible&&e++;if(g=e>=t(h),!g)for(d=a;d<i.length;d++)if(i[d].bVisible){f=d;break}for(d=0,e=l.length;e>d;d++)null!==l[d].nTr&&(g?l[d].nTr.appendChild(l[d]._anHidden[a]):l[d].nTr.insertBefore(l[d]._anHidden[a],J(h,d)[f]))}else for(d=0,e=l.length;e>d;d++)null!==l[d].nTr&&(f=J(h,d)[a],l[d]._anHidden[a]=f,f.parentNode.removeChild(f));for(i[a].bVisible=b,W(h,h.aoHeader),h.nTFoot&&W(h,h.aoFooter),d=0,e=h.aoOpenRows.length;e>d;d++)h.aoOpenRows[d].nTr.colSpan=t(h);(c===n||c)&&(k(h),x(h)),ra(h)}},this.fnSettings=function(){return s(this[j.ext.iApiIndex])},this.fnSort=function(a){var b=s(this[j.ext.iApiIndex]);b.aaSorting=a,O(b)},this.fnSortListener=function(a,b,c){ia(s(this[j.ext.iApiIndex]),a,b,c)},this.fnUpdate=function(a,b,c,d,e){var f=s(this[j.ext.iApiIndex]),b="object"==typeof b?I(f,b):b;if(h.isArray(a)&&c===n)for(f.aoData[b]._aData=a.slice(),c=0;c<f.aoColumns.length;c++)this.fnUpdate(v(f,b,c),b,c,!1,!1);else if(h.isPlainObject(a)&&c===n)for(f.aoData[b]._aData=h.extend(!0,{},a),c=0;c<f.aoColumns.length;c++)this.fnUpdate(v(f,b,c),b,c,!1,!1);else{F(f,b,c,a);var a=v(f,b,c,"display"),g=f.aoColumns[c];null!==g.fnRender&&(a=S(f,b,c),g.bUseRendered&&F(f,b,c,a)),null!==f.aoData[b].nTr&&(J(f,b)[c].innerHTML=a)}return c=h.inArray(b,f.aiDisplay),f.asDataSearch[c]=na(f,Y(f,b,"filter",r(f,"bSearchable"))),(e===n||e)&&k(f),(d===n||d)&&aa(f),0},this.fnVersionCheck=j.ext.fnVersionCheck,this.oApi={_fnExternApiFunc:Va,_fnInitialise:ba,_fnInitComplete:$,_fnLanguageCompat:pa,_fnAddColumn:o,_fnColumnOptions:m,_fnAddData:H,_fnCreateTr:ea,_fnGatherData:ua,_fnBuildHead:va,_fnDrawHead:W,_fnDraw:x,_fnReDraw:aa,_fnAjaxUpdate:wa,_fnAjaxParameters:Ea,_fnAjaxUpdateDraw:Fa,_fnServerParams:ka,_fnAddOptionsHtml:xa,_fnFeatureHtmlTable:Ba,_fnScrollDraw:La,_fnAdjustColumnSizing:k,_fnFeatureHtmlFilter:za,_fnFilterComplete:K,_fnFilterCustom:Ia,_fnFilterColumn:Ha,_fnFilter:Ga,_fnBuildSearchArray:la,_fnBuildSearchRow:na,_fnFilterCreateSearch:ma,_fnDataToSearch:Ja,_fnSort:O,_fnSortAttachListener:ia,_fnSortingClasses:P,_fnFeatureHtmlPaginate:Da,_fnPageChange:qa,_fnFeatureHtmlInfo:Ca,_fnUpdateInfo:Ka,_fnFeatureHtmlLength:ya,_fnFeatureHtmlProcessing:Aa,_fnProcessingDisplay:E,_fnVisibleToColumnIndex:G,_fnColumnIndexToVisible:R,_fnNodeToDataIndex:I,_fnVisbleColumns:t,_fnCalculateEnd:y,_fnConvertToWidth:Ma,_fnCalculateColumnWidths:da,_fnScrollingWidthAdjust:Oa,_fnGetWidestNode:Na,_fnGetMaxLenString:Pa,_fnStringToCss:q,_fnDetectType:B,_fnSettingsFromNode:s,_fnGetDataMaster:Z,_fnGetTrNodes:T,_fnGetTdNodes:J,_fnEscapeRegex:oa,_fnDeleteIndex:ha,_fnReOrderIndex:u,_fnColumnOrdering:M,_fnLog:D,_fnClearTable:ga,_fnSaveState:ra,_fnLoadState:Sa,_fnCreateCookie:function(a,b,c,d,e){var f=new Date;f.setTime(f.getTime()+1e3*c);var c=X.location.pathname.split("/"),a=a+"_"+c.pop().replace(/[\/:]/g,"").toLowerCase(),g;if(null!==e?(g="function"==typeof h.parseJSON?h.parseJSON(b):eval("("+b+")"),b=e(a,g,f.toGMTString(),c.join("/")+"/")):b=a+"="+encodeURIComponent(b)+"; expires="+f.toGMTString()+"; path="+c.join("/")+"/",a=l.cookie.split(";"),e=b.split(";")[0].length,f=[],4096<e+l.cookie.length+10){for(var j=0,o=a.length;o>j;j++)if(-1!=a[j].indexOf(d)){var k=a[j].split("=");try{(g=eval("("+decodeURIComponent(k[1])+")"))&&g.iCreate&&f.push({name:k[0],time:g.iCreate})}catch(m){}}for(f.sort(function(a,b){return b.time-a.time});4096<e+l.cookie.length+10;){if(0===f.length)return;d=f.pop(),l.cookie=d.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c.join("/")+"/"}}l.cookie=b},_fnReadCookie:function(a){for(var b=X.location.pathname.split("/"),a=a+"_"+b[b.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",b=l.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return decodeURIComponent(d.substring(a.length,d.length))}return null},_fnDetectHeader:V,_fnGetUniqueThs:N,_fnScrollBarWidth:Qa,_fnApplyToChildren:C,_fnMap:p,_fnGetRowData:Y,_fnGetCellData:v,_fnSetCellData:F,_fnGetObjectDataFn:Q,_fnSetObjectDataFn:L,_fnApplyColumnDefs:ta,_fnBindAction:Ra,_fnExtend:Ta,_fnCallbackReg:z,_fnCallbackFire:A,_fnJsonString:Wa,_fnRender:S,_fnNodeToColumnIndex:fa,_fnInfoMacros:ja,_fnBrowserDetect:Ua,_fnGetColumns:r},h.extend(j.ext.oApi,this.oApi);for(var sa in j.ext.oApi)sa&&(this[sa]=Va(sa));var ca=this;return this.each(function(){var a,b,c,d=0;b=this.getAttribute("id");var f=!1,g=!1;if("table"!=this.nodeName.toLowerCase())D(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{for(d=0,a=j.settings.length;a>d;d++){if(j.settings[d].nTable==this){if(e===n||e.bRetrieve)return j.settings[d].oInstance;if(e.bDestroy){j.settings[d].oInstance.fnDestroy();break}return void D(j.settings[d],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy")}if(j.settings[d].sTableId==this.id){j.settings.splice(d,1);break}}(null===b||""===b)&&(this.id=b="DataTables_Table_"+j.ext._oExternConfig.iNextUnique++);var i=h.extend(!0,{},j.models.oSettings,{nTable:this,oApi:ca.oApi,oInit:e,sDestroyWidth:h(this).width(),sInstance:b,sTableId:b});if(j.settings.push(i),i.oInstance=1===ca.length?ca:h(this).dataTable(),e||(e={}),e.oLanguage&&pa(e.oLanguage),e=Ta(h.extend(!0,{},j.defaults),e),p(i.oFeatures,e,"bPaginate"),p(i.oFeatures,e,"bLengthChange"),p(i.oFeatures,e,"bFilter"),p(i.oFeatures,e,"bSort"),p(i.oFeatures,e,"bInfo"),p(i.oFeatures,e,"bProcessing"),p(i.oFeatures,e,"bAutoWidth"),p(i.oFeatures,e,"bSortClasses"),p(i.oFeatures,e,"bServerSide"),p(i.oFeatures,e,"bDeferRender"),p(i.oScroll,e,"sScrollX","sX"),p(i.oScroll,e,"sScrollXInner","sXInner"),p(i.oScroll,e,"sScrollY","sY"),p(i.oScroll,e,"bScrollCollapse","bCollapse"),p(i.oScroll,e,"bScrollInfinite","bInfinite"),p(i.oScroll,e,"iScrollLoadGap","iLoadGap"),p(i.oScroll,e,"bScrollAutoCss","bAutoCss"),p(i,e,"asStripeClasses"),p(i,e,"asStripClasses","asStripeClasses"),p(i,e,"fnServerData"),p(i,e,"fnFormatNumber"),p(i,e,"sServerMethod"),p(i,e,"aaSorting"),p(i,e,"aaSortingFixed"),p(i,e,"aLengthMenu"),p(i,e,"sPaginationType"),p(i,e,"sAjaxSource"),p(i,e,"sAjaxDataProp"),p(i,e,"iCookieDuration"),p(i,e,"sCookiePrefix"),p(i,e,"sDom"),p(i,e,"bSortCellsTop"),p(i,e,"iTabIndex"),p(i,e,"oSearch","oPreviousSearch"),p(i,e,"aoSearchCols","aoPreSearchCols"),p(i,e,"iDisplayLength","_iDisplayLength"),p(i,e,"bJQueryUI","bJUI"),p(i,e,"fnCookieCallback"),p(i,e,"fnStateLoad"),p(i,e,"fnStateSave"),p(i.oLanguage,e,"fnInfoCallback"),z(i,"aoDrawCallback",e.fnDrawCallback,"user"),z(i,"aoServerParams",e.fnServerParams,"user"),z(i,"aoStateSaveParams",e.fnStateSaveParams,"user"),z(i,"aoStateLoadParams",e.fnStateLoadParams,"user"),z(i,"aoStateLoaded",e.fnStateLoaded,"user"),z(i,"aoRowCallback",e.fnRowCallback,"user"),z(i,"aoRowCreatedCallback",e.fnCreatedRow,"user"),z(i,"aoHeaderCallback",e.fnHeaderCallback,"user"),z(i,"aoFooterCallback",e.fnFooterCallback,"user"),z(i,"aoInitComplete",e.fnInitComplete,"user"),z(i,"aoPreDrawCallback",e.fnPreDrawCallback,"user"),i.oFeatures.bServerSide&&i.oFeatures.bSort&&i.oFeatures.bSortClasses?z(i,"aoDrawCallback",P,"server_side_sort_classes"):i.oFeatures.bDeferRender&&z(i,"aoDrawCallback",P,"defer_sort_classes"),e.bJQueryUI?(h.extend(i.oClasses,j.ext.oJUIClasses),e.sDom===j.defaults.sDom&&"lfrtip"===j.defaults.sDom&&(i.sDom='<"H"lfr>t<"F"ip>')):h.extend(i.oClasses,j.ext.oStdClasses),h(this).addClass(i.oClasses.sTable),(""!==i.oScroll.sX||""!==i.oScroll.sY)&&(i.oScroll.iBarWidth=Qa()),i.iInitDisplayStart===n&&(i.iInitDisplayStart=e.iDisplayStart,i._iDisplayStart=e.iDisplayStart),e.bStateSave&&(i.oFeatures.bStateSave=!0,Sa(i,e),z(i,"aoDrawCallback",ra,"state_save")),null!==e.iDeferLoading&&(i.bDeferLoading=!0,d=h.isArray(e.iDeferLoading),i._iRecordsDisplay=d?e.iDeferLoading[0]:e.iDeferLoading,i._iRecordsTotal=d?e.iDeferLoading[1]:e.iDeferLoading),null!==e.aaData&&(g=!0),""!==e.oLanguage.sUrl?(i.oLanguage.sUrl=e.oLanguage.sUrl,h.getJSON(i.oLanguage.sUrl,null,function(a){pa(a),h.extend(!0,i.oLanguage,e.oLanguage,a),ba(i)}),f=!0):h.extend(!0,i.oLanguage,e.oLanguage),null===e.asStripeClasses&&(i.asStripeClasses=[i.oClasses.sStripeOdd,i.oClasses.sStripeEven]),a=i.asStripeClasses.length,i.asDestroyStripes=[],a){for(b=!1,c=h(this).children("tbody").children("tr:lt("+a+")"),d=0;a>d;d++)c.hasClass(i.asStripeClasses[d])&&(b=!0,i.asDestroyStripes.push(i.asStripeClasses[d]));b&&c.removeClass(i.asStripeClasses.join(" "))}if(b=[],d=this.getElementsByTagName("thead"),0!==d.length&&(V(i.aoHeader,d[0]),b=N(i)),null===e.aoColumns)for(c=[],d=0,a=b.length;a>d;d++)c.push(null);else c=e.aoColumns;for(d=0,a=c.length;a>d;d++)e.saved_aoColumns!==n&&e.saved_aoColumns.length==a&&(null===c[d]&&(c[d]={}),c[d].bVisible=e.saved_aoColumns[d].bVisible),o(i,b?b[d]:null);for(ta(i,e.aoColumnDefs,c,function(a,b){m(i,a,b)}),d=0,a=i.aaSorting.length;a>d;d++){i.aaSorting[d][0]>=i.aoColumns.length&&(i.aaSorting[d][0]=0);var k=i.aoColumns[i.aaSorting[d][0]];for(i.aaSorting[d][2]===n&&(i.aaSorting[d][2]=0),e.aaSorting===n&&i.saved_aaSorting===n&&(i.aaSorting[d][1]=k.asSorting[0]),b=0,c=k.asSorting.length;c>b;b++)if(i.aaSorting[d][1]==k.asSorting[b]){i.aaSorting[d][2]=b;break}}if(P(i),Ua(i),d=h(this).children("caption").each(function(){this._captionSide=h(this).css("caption-side")}),a=h(this).children("thead"),0===a.length&&(a=[l.createElement("thead")],this.appendChild(a[0])),i.nTHead=a[0],a=h(this).children("tbody"),0===a.length&&(a=[l.createElement("tbody")],this.appendChild(a[0])),i.nTBody=a[0],i.nTBody.setAttribute("role","alert"),i.nTBody.setAttribute("aria-live","polite"),i.nTBody.setAttribute("aria-relevant","all"),a=h(this).children("tfoot"),0===a.length&&0<d.length&&(""!==i.oScroll.sX||""!==i.oScroll.sY)&&(a=[l.createElement("tfoot")],this.appendChild(a[0])),0<a.length&&(i.nTFoot=a[0],V(i.aoFooter,i.nTFoot)),g)for(d=0;d<e.aaData.length;d++)H(i,e.aaData[d]);else ua(i);i.aiDisplay=i.aiDisplayMaster.slice(),i.bInitialised=!0,!1===f&&ba(i)}}),ca=null,this};j.fnVersionCheck=function(a){for(var b=function(a,b){for(;a.length<b;)a+="0";return a},c=j.ext.sVersion.split("."),a=a.split("."),d="",e="",f=0,g=a.length;g>f;f++)d+=b(c[f],3),e+=b(a[f],3);return parseInt(d,10)>=parseInt(e,10)},j.fnIsDataTable=function(a){for(var b=j.settings,c=0;c<b.length;c++)if(b[c].nTable===a||b[c].nScrollHead===a||b[c].nScrollFoot===a)return!0;return!1},j.fnTables=function(a){var b=[];return jQuery.each(j.settings,function(c,d){(!a||!0===a&&h(d.nTable).is(":visible"))&&b.push(d.nTable)}),b},j.version="1.9.4",j.settings=[],j.models={},j.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:j.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:j.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}},j.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},j.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""},j.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},j.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){if(1e3>a)return a;for(var b=a+"",a=b.split(""),c="",b=b.length,d=0;b>d;d++)0===d%3&&0!==d&&(c=this.oLanguage.sInfoThousands+c),c=a[b-d-1]+c;return c},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(a,b,c,d){d.jqXHR=h.ajax({url:a,data:b,success:function(a){a.sError&&d.oApi._fnLog(d,0,a.sError),h(d.oInstance).trigger("xhr",[d,a]),c(a)},dataType:"json",cache:!1,type:d.sServerMethod,error:function(a,b){"parsererror"==b&&d.oApi._fnLog(d,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(e){var e=this.oApi._fnReadCookie(e.sCookiePrefix+e.sInstance),j;try{j="function"==typeof h.parseJSON?h.parseJSON(e):eval("("+e+")")}catch(m){j=null}return j},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(a,b){this.oApi._fnCreateCookie(a.sCookiePrefix+a.sInstance,this.oApi._fnJsonString(b),a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},j.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"},j.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},j.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null},j.ext=h.extend(!0,{},j.models.ext),h.extend(j.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""}),h.extend(j.ext.oJUIClasses,j.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}),h.extend(j.ext.oPagination,{two_button:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,e=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)},d=a.bJUI?'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUIPrev+'"></span></a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUINext+'"></span></a>':'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+d.sPrevious+'</a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+d.sNext+"</a>";h(b).append(d);var f=h("a",b),d=f[0],f=f[1];a.oApi._fnBindAction(d,{action:"previous"},e),a.oApi._fnBindAction(f,{action:"next"},e),a.aanFeatures.p||(b.id=a.sTableId+"_paginate",d.id=a.sTableId+"_previous",f.id=a.sTableId+"_next",d.setAttribute("aria-controls",a.sTableId),f.setAttribute("aria-controls",a.sTableId))},fnUpdate:function(a){if(a.aanFeatures.p)for(var b,c=a.oClasses,d=a.aanFeatures.p,e=0,f=d.length;f>e;e++)(b=d[e].firstChild)&&(b.className=0===a._iDisplayStart?c.sPagePrevDisabled:c.sPagePrevEnabled,b=b.nextSibling,b.className=a.fnDisplayEnd()==a.fnRecordsDisplay()?c.sPageNextDisabled:c.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,e=a.oClasses,f=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)};h(b).append('<a  tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageFirst+'">'+d.sFirst+'</a><a  tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPagePrevious+'">'+d.sPrevious+'</a><span></span><a tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageNext+'">'+d.sNext+'</a><a tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageLast+'">'+d.sLast+"</a>");var g=h("a",b),d=g[0],e=g[1],i=g[2],g=g[3];a.oApi._fnBindAction(d,{action:"first"},f),a.oApi._fnBindAction(e,{action:"previous"},f),a.oApi._fnBindAction(i,{action:"next"},f),a.oApi._fnBindAction(g,{action:"last"},f),a.aanFeatures.p||(b.id=a.sTableId+"_paginate",d.id=a.sTableId+"_first",e.id=a.sTableId+"_previous",i.id=a.sTableId+"_next",g.id=a.sTableId+"_last")},fnUpdate:function(a,b){if(a.aanFeatures.p){var c,d,e=j.ext.oPagination.iFullNumbersShowPages,f=Math.floor(e/2),g=Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength),i=Math.ceil(a._iDisplayStart/a._iDisplayLength)+1,k="",l=a.oClasses,m=a.aanFeatures.p,n=function(d){a.oApi._fnBindAction(this,{page:d+c-1},function(c){a.oApi._fnPageChange(a,c.data.page),b(a),c.preventDefault()})};for(-1===a._iDisplayLength?i=f=c=1:e>g?(c=1,f=g):f>=i?(c=1,f=e):i>=g-f?(c=g-e+1,f=g):(c=i-Math.ceil(e/2)+1,f=c+e-1),e=c;f>=e;e++)k+=i!==e?'<a tabindex="'+a.iTabIndex+'" class="'+l.sPageButton+'">'+a.fnFormatNumber(e)+"</a>":'<a tabindex="'+a.iTabIndex+'" class="'+l.sPageButtonActive+'">'+a.fnFormatNumber(e)+"</a>";for(e=0,f=m.length;f>e;e++)d=m[e],d.hasChildNodes()&&(h("span:eq(0)",d).html(k).children("a").each(n),d=d.getElementsByTagName("a"),d=[d[0],d[1],d[d.length-2],d[d.length-1]],h(d).removeClass(l.sPageButton+" "+l.sPageButtonActive+" "+l.sPageButtonStaticDisabled),h([d[0],d[1]]).addClass(1==i?l.sPageButtonStaticDisabled:l.sPageButton),h([d[2],d[3]]).addClass(0===g||i===g||-1===a._iDisplayLength?l.sPageButtonStaticDisabled:l.sPageButton))}}}}),h.extend(j.ext.oSort,{"string-pre":function(a){return"string"!=typeof a&&(a=null!==a&&a.toString?a.toString():""),a.toLowerCase()},"string-asc":function(a,b){return b>a?-1:a>b?1:0},"string-desc":function(a,b){return b>a?1:a>b?-1:0},"html-pre":function(a){return a.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(a,b){return b>a?-1:a>b?1:0},"html-desc":function(a,b){return b>a?1:a>b?-1:0},"date-pre":function(a){return a=Date.parse(a),(isNaN(a)||""===a)&&(a=Date.parse("01/01/1970 00:00:00")),a},"date-asc":function(a,b){return a-b},"date-desc":function(a,b){return b-a},"numeric-pre":function(a){return"-"==a||""===a?0:1*a},"numeric-asc":function(a,b){return a-b},"numeric-desc":function(a,b){return b-a}}),h.extend(j.ext.aTypes,[function(a){if("number"==typeof a)return"numeric";if("string"!=typeof a)return null;var b,c=!1;if(b=a.charAt(0),-1=="0123456789-".indexOf(b))return null;for(var d=1;d<a.length;d++){if(b=a.charAt(d),-1=="0123456789.".indexOf(b))return null;if("."==b){if(c)return null;c=!0}}return"numeric"},function(a){var b=Date.parse(a);return null!==b&&!isNaN(b)||"string"==typeof a&&0===a.length?"date":null},function(a){return"string"==typeof a&&-1!=a.indexOf("<")&&-1!=a.indexOf(">")?"html":null}]),h.fn.DataTable=j,h.fn.dataTable=j,h.fn.dataTableSettings=j.settings,h.fn.dataTableExt=j.ext};"function"==typeof define&&define.amd?define(["jquery"],L):jQuery&&!jQuery.fn.dataTable&&L(jQuery)}(window,document),$.extend(!0,$.fn.dataTable.defaults,{sDom:"<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",oLanguage:{sLengthMenu:"_MENU_ records per page"}}),$.extend($.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline"}),$.fn.dataTableExt.oApi.fnPagingInfo=function(a){return{iStart:a._iDisplayStart,iEnd:a.fnDisplayEnd(),iLength:a._iDisplayLength,iTotal:a.fnRecordsTotal(),iFilteredTotal:a.fnRecordsDisplay(),iPage:Math.ceil(a._iDisplayStart/a._iDisplayLength),iTotalPages:Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength)}},$.extend($.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,e=function(b){b.preventDefault(),a.oApi._fnPageChange(a,b.data.action)&&c(a)};$(b).addClass("pagination").append('<ul><li class="prev disabled"><a href="#">&larr; '+d.sPrevious+'</a></li><li class="next disabled"><a href="#">'+d.sNext+" &rarr; </a></li></ul>");var f=$("a",b);$(f[0]).bind("click.DT",{action:"previous"},e),$(f[1]).bind("click.DT",{action:"next"},e)},fnUpdate:function(a,b){var c,d,e,f,g,h=5,i=a.oInstance.fnPagingInfo(),j=a.aanFeatures.p,k=Math.floor(h/2);for(i.iTotalPages<h?(f=1,g=i.iTotalPages):i.iPage<=k?(f=1,g=h):i.iPage>=i.iTotalPages-k?(f=i.iTotalPages-h+1,g=i.iTotalPages):(f=i.iPage-k+1,g=f+h-1),c=0,iLen=j.length;c<iLen;c++){for($("li:gt(0)",j[c]).filter(":not(:last)").remove(),d=f;g>=d;d++)e=d==i.iPage+1?'class="active"':"",$("<li "+e+'><a href="#">'+d+"</a></li>").insertBefore($("li:last",j[c])[0]).bind("click",function(c){c.preventDefault(),a._iDisplayStart=(parseInt($("a",this).text(),10)-1)*i.iLength,b(a)});0===i.iPage?$("li:first",j[c]).addClass("disabled"):$("li:first",j[c]).removeClass("disabled"),i.iPage===i.iTotalPages-1||0===i.iTotalPages?$("li:last",j[c]).addClass("disabled"):$("li:last",j[c]).removeClass("disabled")}}}}),$.fn.DataTable.TableTools&&($.extend(!0,$.fn.DataTable.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info modal"},select:{row:"active"}}),$.extend(!0,$.fn.DataTable.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}})),$(document).ready(function(){$("#example").dataTable({sDom:"<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",oLanguage:{sLengthMenu:"_MENU_ records per page"}})}),function(a,b,c){function d(a){for(var b=[],c=0,d=a.length;d>c;c++)b[a[c]]=c;return b}function e(a,b,c){b=a.splice(b,1)[0],a.splice(c,0,b)}function f(a,b,c){for(var d=[],e=0,f=a.childNodes.length;f>e;e++)1==a.childNodes[e].nodeType&&d.push(a.childNodes[e]);b=d[b],null!==c?a.insertBefore(b,d[c]):a.appendChild(b)}a.fn.dataTableExt.oApi.fnColReorder=function(b,c,g){var h,i,j,k,l,m=b.aoColumns.length;if(c!=g)if(0>c||c>=m)this.oApi._fnLog(b,1,"ColReorder 'from' index is out of bounds: "+c);else if(0>g||g>=m)this.oApi._fnLog(b,1,"ColReorder 'to' index is out of bounds: "+g);else{var n=[];for(h=0,i=m;i>h;h++)n[h]=h;for(e(n,c,g),n=d(n),h=0,i=b.aaSorting.length;i>h;h++)b.aaSorting[h][0]=n[b.aaSorting[h][0]];if(null!==b.aaSortingFixed)for(h=0,i=b.aaSortingFixed.length;i>h;h++)b.aaSortingFixed[h][0]=n[b.aaSortingFixed[h][0]];for(h=0,i=m;i>h;h++)for(l=b.aoColumns[h],j=0,k=l.aDataSort.length;k>j;j++)l.aDataSort[j]=n[l.aDataSort[j]];for(h=0,i=m;i>h;h++)l=b.aoColumns[h],"number"==typeof l.mData&&(l.mData=n[l.mData],l.fnGetData=b.oApi._fnGetObjectDataFn(l.mData),l.fnSetData=b.oApi._fnSetObjectDataFn(l.mData));if(b.aoColumns[c].bVisible){for(k=this.oApi._fnColumnIndexToVisible(b,c),l=null,h=c>g?g:g+1;null===l&&m>h;)l=this.oApi._fnColumnIndexToVisible(b,h),h++;for(j=b.nTHead.getElementsByTagName("tr"),h=0,i=j.length;i>h;h++)f(j[h],k,l);if(null!==b.nTFoot)for(j=b.nTFoot.getElementsByTagName("tr"),h=0,i=j.length;i>h;h++)f(j[h],k,l);for(h=0,i=b.aoData.length;i>h;h++)null!==b.aoData[h].nTr&&f(b.aoData[h].nTr,k,l)}for(e(b.aoColumns,c,g),e(b.aoPreSearchCols,c,g),h=0,i=b.aoData.length;i>h;h++)a.isArray(b.aoData[h]._aData)&&e(b.aoData[h]._aData,c,g),e(b.aoData[h]._anHidden,c,g);for(h=0,i=b.aoHeader.length;i>h;h++)e(b.aoHeader[h],c,g);if(null!==b.aoFooter)for(h=0,i=b.aoFooter.length;i>h;h++)e(b.aoFooter[h],c,g);for(h=0,i=m;i>h;h++)a(b.aoColumns[h].nTh).unbind("click"),this.oApi._fnSortAttachListener(b,b.aoColumns[h].nTh,h);a(b.oInstance).trigger("column-reorder",[b,{iFrom:c,iTo:g,aiInvertMapping:n}]),"undefined"!=typeof b.oInstance._oPluginFixedHeader&&b.oInstance._oPluginFixedHeader.fnUpdate()}},ColReorder=function(a,b){return(!this.CLASS||"ColReorder"!=this.CLASS)&&alert("Warning: ColReorder must be initialised with the keyword 'new'"),"undefined"==typeof b&&(b={}),this.s={dt:null,init:b,fixed:0,dropCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.dt=a.oInstance.fnSettings(),this._fnConstruct(),a.oApi._fnCallbackReg(a,"aoDestroyCallback",jQuery.proxy(this._fnDestroy,this),"ColReorder"),ColReorder.aoInstances.push(this),this},ColReorder.prototype={fnReset:function(){for(var a=[],b=0,c=this.s.dt.aoColumns.length;c>b;b++)a.push(this.s.dt.aoColumns[b]._ColReorder_iOrigCol);this._fnOrderColumns(a)},_fnConstruct:function(){var a,b,c=this;for("undefined"!=typeof this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),"undefined"!=typeof this.s.init.fnReorderCallback&&(this.s.dropCallback=this.s.init.fnReorderCallback),a=0,b=this.s.dt.aoColumns.length;b>a;a++)a>this.s.fixed-1&&this._fnMouseListener(a,this.s.dt.aoColumns[a].nTh),this.s.dt.aoColumns[a]._ColReorder_iOrigCol=a;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(a,b){c._fnStateSave.call(c,b)},"ColReorder_State");var e=null;if("undefined"!=typeof this.s.init.aiOrder&&(e=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(e=this.s.dt.oLoadedState.ColReorder),e)if(c.s.dt._bInitComplete)a=d(e),c._fnOrderColumns.call(c,a);else{var f=!1;this.s.dt.aoDrawCallback.push({fn:function(){if(!c.s.dt._bInitComplete&&!f){f=!0;var a=d(e);c._fnOrderColumns.call(c,a)}},sName:"ColReorder_Pre"})}},_fnOrderColumns:function(b){if(b.length!=this.s.dt.aoColumns.length)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");else{for(var c=0,d=b.length;d>c;c++){var f=a.inArray(c,b);c!=f&&(e(b,f,c),this.s.dt.oInstance.fnColReorder(f,c))}(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt)}},_fnStateSave:function(b){var c,d,e,f=this.s.dt;for(c=0;c<b.aaSorting.length;c++)b.aaSorting[c][0]=f.aoColumns[b.aaSorting[c][0]]._ColReorder_iOrigCol;for(aSearchCopy=a.extend(!0,[],b.aoSearchCols),b.ColReorder=[],c=0,d=f.aoColumns.length;d>c;c++)e=f.aoColumns[c]._ColReorder_iOrigCol,b.aoSearchCols[e]=aSearchCopy[c],b.abVisCols[e]=f.aoColumns[c].bVisible,b.ColReorder.push(e)},_fnMouseListener:function(b,c){var d=this;a(c).bind("mousedown.ColReorder",function(a){a.preventDefault(),d._fnMouseDown.call(d,a,c)})},_fnMouseDown:function(b,d){var e=this,f=this.s.dt.aoColumns,g="TH"==b.target.nodeName?b.target:a(b.target).parents("TH")[0],g=a(g).offset();this.s.mouse.startX=b.pageX,this.s.mouse.startY=b.pageY,this.s.mouse.offsetX=b.pageX-g.left,this.s.mouse.offsetY=b.pageY-g.top,this.s.mouse.target=d,this.s.mouse.targetIndex=a("th",d.parentNode).index(d),this.s.mouse.fromIndex=this.s.dt.oInstance.oApi._fnVisibleToColumnIndex(this.s.dt,this.s.mouse.targetIndex),this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:a(this.s.dt.nTable).offset().left,to:0});
for(var h=g=0,i=f.length;i>h;h++)h!=this.s.mouse.fromIndex&&g++,f[h].bVisible&&this.s.aoTargets.push({x:a(f[h].nTh).offset().left+a(f[h].nTh).outerWidth(),to:g});0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed),a(c).bind("mousemove.ColReorder",function(a){e._fnMouseMove.call(e,a)}),a(c).bind("mouseup.ColReorder",function(a){e._fnMouseUp.call(e,a)})},_fnMouseMove:function(a){if(null===this.dom.drag){if(5>Math.pow(Math.pow(a.pageX-this.s.mouse.startX,2)+Math.pow(a.pageY-this.s.mouse.startY,2),.5))return;this._fnCreateDragNode()}this.dom.drag.style.left=a.pageX-this.s.mouse.offsetX+"px",this.dom.drag.style.top=a.pageY-this.s.mouse.offsetY+"px";for(var b=!1,c=1,d=this.s.aoTargets.length;d>c;c++)if(a.pageX<this.s.aoTargets[c-1].x+(this.s.aoTargets[c].x-this.s.aoTargets[c-1].x)/2){this.dom.pointer.style.left=this.s.aoTargets[c-1].x+"px",this.s.mouse.toIndex=this.s.aoTargets[c-1].to,b=!0;break}b||(this.dom.pointer.style.left=this.s.aoTargets[this.s.aoTargets.length-1].x+"px",this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to)},_fnMouseUp:function(){a(c).unbind("mousemove.ColReorder"),a(c).unbind("mouseup.ColReorder"),null!==this.dom.drag&&(c.body.removeChild(this.dom.drag),c.body.removeChild(this.dom.pointer),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(),null!==this.s.dropCallback&&this.s.dropCallback.call(this),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt))},_fnCreateDragNode:function(){var b=this;for(this.dom.drag=a(this.s.dt.nTHead.parentNode).clone(!0)[0],this.dom.drag.className+=" DTCR_clonedTable";0<this.dom.drag.getElementsByTagName("caption").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("caption")[0]);for(;0<this.dom.drag.getElementsByTagName("tbody").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("tbody")[0]);for(;0<this.dom.drag.getElementsByTagName("tfoot").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("tfoot")[0]);a("thead tr:eq(0)",this.dom.drag).each(function(){a("th",this).eq(b.s.mouse.targetIndex).siblings().remove()}),a("tr",this.dom.drag).height(a("tr:eq(0)",b.s.dt.nTHead).height()),a("thead tr:gt(0)",this.dom.drag).remove(),a("thead th:eq(0)",this.dom.drag).each(function(){this.style.width=a("th:eq("+b.s.mouse.targetIndex+")",b.s.dt.nTHead).width()+"px"}),this.dom.drag.style.position="absolute",this.dom.drag.style.top="0px",this.dom.drag.style.left="0px",this.dom.drag.style.width=a("th:eq("+b.s.mouse.targetIndex+")",b.s.dt.nTHead).outerWidth()+"px",this.dom.pointer=c.createElement("div"),this.dom.pointer.className="DTCR_pointer",this.dom.pointer.style.position="absolute",""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY?(this.dom.pointer.style.top=a(this.s.dt.nTable).offset().top+"px",this.dom.pointer.style.height=a(this.s.dt.nTable).height()+"px"):(this.dom.pointer.style.top=a("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top+"px",this.dom.pointer.style.height=a("div.dataTables_scroll",this.s.dt.nTableWrapper).height()+"px"),c.body.appendChild(this.dom.pointer),c.body.appendChild(this.dom.drag)},_fnDestroy:function(){for(var b=0,c=ColReorder.aoInstances.length;c>b;b++)if(ColReorder.aoInstances[b]===this){ColReorder.aoInstances.splice(b,1);break}a(this.s.dt.nTHead).find("*").unbind(".ColReorder"),this.s=this.s.dt.oInstance._oPluginColReorder=null}},ColReorder.aoInstances=[],ColReorder.fnReset=function(a){for(var b=0,c=ColReorder.aoInstances.length;c>b;b++)ColReorder.aoInstances[b].s.dt.oInstance==a&&ColReorder.aoInstances[b].fnReset()},ColReorder.prototype.CLASS="ColReorder",ColReorder.VERSION="1.0.8",ColReorder.prototype.VERSION=ColReorder.VERSION,"function"==typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.9.3")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInstance;return"undefined"==typeof b._oPluginColReorder?b._oPluginColReorder=new ColReorder(a,"undefined"!=typeof a.oInit.oColReorder?a.oInit.oColReorder:{}):b.oApi._fnLog(a,1,"ColReorder attempted to initialise twice. Ignoring second"),null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.9.3 or greater - www.datatables.net/download")}(jQuery,window,document),window.jQuery&&function(a){a.extend({xml2json:function(b,c){function d(b,g){if(!b)return null;{var h="",i=null,j=null;b.nodeType,e(b.localName||b.nodeName),b.text||b.nodeValue||""}b.childNodes&&b.childNodes.length>0&&a.each(b.childNodes,function(a,b){var c=b.nodeType,g=e(b.localName||b.nodeName),j=b.text||b.nodeValue||"";if(8!=c)if(3!=c&&4!=c&&g)i=i||{},i[g]?(i[g].length||(i[g]=f(i[g])),i[g]=f(i[g]),i[g][i[g].length]=d(b,!0),i[g].length=i[g].length):i[g]=d(b);else{if(j.match(/^\s+$/))return;h+=j.replace(/^\s+/,"").replace(/\s+$/,"")}}),b.attributes&&b.attributes.length>0&&(j={},i=i||{},a.each(b.attributes,function(a,b){var c=e(b.name),d=b.value;j[c]=d,i[c]?(i[cnn]=f(i[cnn]),i[c][i[c].length]=d,i[c].length=i[c].length):i[c]=d})),i&&(i=a.extend(""!=h?new String(h):{},i||{}),h=i.text?("object"==typeof i.text?i.text:[i.text||""]).concat([h]):h,h&&(i.text=h),h="");var k=i||h;return c&&(h&&(k={}),h=k.text||h||"",h&&(k.text=h),g||(k=f(k))),k}if(!b)return{};var e=function(a){return String(a||"").replace(/-/g,"_")},f=function(b){return a.isArray(b)||(b=[b]),b.length=b.length,b};if("string"==typeof b&&(b=a.text2xml(b)),b.nodeType){if(3==b.nodeType||4==b.nodeType)return b.nodeValue;var g=9==b.nodeType?b.documentElement:b,h=d(g,!0);return b=null,g=null,h}},text2xml:function(b){var c;try{var d=a.browser.msie?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser;d.async=!1}catch(e){throw new Error("XML Parser could not be instantiated")}try{c=a.browser.msie?d.loadXML(b)?d:!1:d.parseFromString(b,"text/xml")}catch(e){throw new Error("Error parsing XML string")}return c}})}(jQuery),function(a){"use strict";function b(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(this).ajaxSubmit(c))}function c(b){var c=b.target,d=a(c);if(!d.is("[type=submit],[type=image]")){var e=d.closest("[type=submit]");if(0===e.length)return;c=e[0]}var f=this;if(f.clk=c,"image"==c.type)if(void 0!==b.offsetX)f.clk_x=b.offsetX,f.clk_y=b.offsetY;else if("function"==typeof a.fn.offset){var g=d.offset();f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top}else f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop;setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function d(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var e={};e.fileapi=void 0!==a("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var f=!!a.fn.prop;a.fn.attr2=function(){if(!f)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)},a.fn.ajaxSubmit=function(b){function c(c){var d,e,f=a.param(c,b.traditional).split("&"),g=f.length,h=[];for(d=0;g>d;d++)f[d]=f[d].replace(/\+/g," "),e=f[d].split("="),h.push([decodeURIComponent(e[0]),decodeURIComponent(e[1])]);return h}function g(d){for(var e=new FormData,f=0;d.length>f;f++)e.append(d[f].name,d[f].value);if(b.extraData){var g=c(b.extraData);for(f=0;g.length>f;f++)g[f]&&e.append(g[f][0],g[f][1])}b.data=null;var h=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});b.uploadProgress&&(h.xhr=function(){var c=a.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(a){var c=0,d=a.loaded||a.position,e=a.total;a.lengthComputable&&(c=Math.ceil(100*(d/e))),b.uploadProgress(a,d,e,c)},!1),c}),h.data=null;var j=h.beforeSend;return h.beforeSend=function(a,b){b.data=e,j&&j.call(this,a,b)},a.ajax(h)}function h(c){function e(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){d("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(c){d("cannot get iframe.contentDocument: "+c),b=a.document}return b}function g(){function b(){try{var a=e(r).readyState;d("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(c){d("Server abort: ",c," (",c.name,")"),h(A),w&&clearTimeout(w),w=void 0}}var c=l.attr2("target"),f=l.attr2("action");x.setAttribute("target",o),i||x.setAttribute("method","POST"),f!=m.url&&x.setAttribute("action",m.url),m.skipEncodingOverride||i&&!/post/i.test(i)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(w=setTimeout(function(){v=!0,h(z)},m.timeout));var g=[];try{if(m.extraData)for(var j in m.extraData)m.extraData.hasOwnProperty(j)&&g.push(a.isPlainObject(m.extraData[j])&&m.extraData[j].hasOwnProperty("name")&&m.extraData[j].hasOwnProperty("value")?a('<input type="hidden" name="'+m.extraData[j].name+'">').val(m.extraData[j].value).appendTo(x)[0]:a('<input type="hidden" name="'+j+'">').val(m.extraData[j]).appendTo(x)[0]);m.iframeTarget||(q.appendTo("body"),r.attachEvent?r.attachEvent("onload",h):r.addEventListener("load",h,!1)),setTimeout(b,15);try{x.submit()}catch(k){var n=document.createElement("form").submit;n.apply(x)}}finally{x.setAttribute("action",f),c?x.setAttribute("target",c):l.removeAttr("target"),a(g).remove()}}function h(b){if(!s.aborted&&!F){if(E=e(r),E||(d("cannot access response document"),b=A),b===z&&s)return s.abort("timeout"),void y.reject(s,"timeout");if(b==A&&s)return s.abort("server abort"),void y.reject(s,"error","server abort");if(E&&E.location.href!=m.iframeSrc||v){r.detachEvent?r.detachEvent("onload",h):r.removeEventListener("load",h,!1);var c,f="success";try{if(v)throw"timeout";var g="xml"==m.dataType||E.XMLDocument||a.isXMLDoc(E);if(d("isXml="+g),!g&&window.opera&&(null===E.body||!E.body.innerHTML)&&--G)return d("requeing onLoad callback, DOM not available"),void setTimeout(h,250);var i=E.body?E.body:E.documentElement;s.responseText=i?i.innerHTML:null,s.responseXML=E.XMLDocument?E.XMLDocument:E,g&&(m.dataType="xml"),s.getResponseHeader=function(a){var b={"content-type":m.dataType};return b[a]},i&&(s.status=Number(i.getAttribute("status"))||s.status,s.statusText=i.getAttribute("statusText")||s.statusText);var j=(m.dataType||"").toLowerCase(),k=/(json|script|text)/.test(j);if(k||m.textarea){var l=E.getElementsByTagName("textarea")[0];if(l)s.responseText=l.value,s.status=Number(l.getAttribute("status"))||s.status,s.statusText=l.getAttribute("statusText")||s.statusText;else if(k){var o=E.getElementsByTagName("pre")[0],p=E.getElementsByTagName("body")[0];o?s.responseText=o.textContent?o.textContent:o.innerText:p&&(s.responseText=p.textContent?p.textContent:p.innerText)}}else"xml"==j&&!s.responseXML&&s.responseText&&(s.responseXML=H(s.responseText));try{D=J(s,j,m)}catch(t){f="parsererror",s.error=c=t||f}}catch(t){d("error caught: ",t),f="error",s.error=c=t||f}s.aborted&&(d("upload aborted"),f=null),s.status&&(f=s.status>=200&&300>s.status||304===s.status?"success":"error"),"success"===f?(m.success&&m.success.call(m.context,D,"success",s),y.resolve(s.responseText,"success",s),n&&a.event.trigger("ajaxSuccess",[s,m])):f&&(void 0===c&&(c=s.statusText),m.error&&m.error.call(m.context,s,f,c),y.reject(s,"error",c),n&&a.event.trigger("ajaxError",[s,m,c])),n&&a.event.trigger("ajaxComplete",[s,m]),n&&!--a.active&&a.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,s,f),F=!0,m.timeout&&clearTimeout(w),setTimeout(function(){m.iframeTarget||q.remove(),s.responseXML=null},100)}}}var j,k,m,n,o,q,r,s,t,u,v,w,x=l[0],y=a.Deferred();if(c)for(k=0;p.length>k;k++)j=a(p[k]),f?j.prop("disabled",!1):j.removeAttr("disabled");if(m=a.extend(!0,{},a.ajaxSettings,b),m.context=m.context||m,o="jqFormIO"+(new Date).getTime(),m.iframeTarget?(q=a(m.iframeTarget),u=q.attr2("name"),u?o=u:q.attr2("name",o)):(q=a('<iframe name="'+o+'" src="'+m.iframeSrc+'" />'),q.css({position:"absolute",top:"-1000px",left:"-1000px"})),r=q[0],s={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";d("aborting upload... "+c),this.aborted=1;try{r.contentWindow.document.execCommand&&r.contentWindow.document.execCommand("Stop")}catch(e){}q.attr("src",m.iframeSrc),s.error=c,m.error&&m.error.call(m.context,s,c,b),n&&a.event.trigger("ajaxError",[s,m,c]),m.complete&&m.complete.call(m.context,s,c)}},n=m.global,n&&0===a.active++&&a.event.trigger("ajaxStart"),n&&a.event.trigger("ajaxSend",[s,m]),m.beforeSend&&m.beforeSend.call(m.context,s,m)===!1)return m.global&&a.active--,y.reject(),y;if(s.aborted)return y.reject(),y;t=x.clk,t&&(u=t.name,u&&!t.disabled&&(m.extraData=m.extraData||{},m.extraData[u]=t.value,"image"==t.type&&(m.extraData[u+".x"]=x.clk_x,m.extraData[u+".y"]=x.clk_y)));var z=1,A=2,B=a("meta[name=csrf-token]").attr("content"),C=a("meta[name=csrf-param]").attr("content");C&&B&&(m.extraData=m.extraData||{},m.extraData[C]=B),m.forceSync?g():setTimeout(g,10);var D,E,F,G=50,H=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},I=a.parseJSON||function(a){return window.eval("("+a+")")},J=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=I(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g};return y}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var i,j,k,l=this;"function"==typeof b&&(b={success:b}),i=b.type||this.attr2("method"),j=b.url||this.attr2("action"),k="string"==typeof j?a.trim(j):"",k=k||window.location.href||"",k&&(k=(k.match(/^([^#]+)/)||[])[1]),b=a.extend(!0,{url:k,success:a.ajaxSettings.success,type:i||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);var m={};if(this.trigger("form-pre-serialize",[this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&b.beforeSerialize(this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var n=b.traditional;void 0===n&&(n=a.ajaxSettings.traditional);var o,p=[],q=this.formToArray(b.semantic,p);if(b.data&&(b.extraData=b.data,o=a.param(b.data,n)),b.beforeSubmit&&b.beforeSubmit(q,this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[q,this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var r=a.param(q,n);o&&(r=r?r+"&"+o:o),"GET"==b.type.toUpperCase()?(b.url+=(b.url.indexOf("?")>=0?"&":"?")+r,b.data=null):b.data=r;var s=[];if(b.resetForm&&s.push(function(){l.resetForm()}),b.clearForm&&s.push(function(){l.clearForm(b.includeHidden)}),!b.dataType&&b.target){var t=b.success||function(){};s.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(t,arguments)})}else b.success&&s.push(b.success);if(b.success=function(a,c,d){for(var e=b.context||this,f=0,g=s.length;g>f;f++)s[f].apply(e,[a,c,d||l,l])},b.error){var u=b.error;b.error=function(a,c,d){var e=b.context||this;u.apply(e,[a,c,d,l])}}if(b.complete){var v=b.complete;b.complete=function(a,c){var d=b.context||this;v.apply(d,[a,c,l])}}var w=a('input[type=file]:enabled[value!=""]',this),x=w.length>0,y="multipart/form-data",z=l.attr("enctype")==y||l.attr("encoding")==y,A=e.fileapi&&e.formdata;d("fileAPI :"+A);var B,C=(x||z)&&!A;b.iframe!==!1&&(b.iframe||C)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){B=h(q)}):B=h(q):B=(x||z)&&A?g(q):a.ajax(b),l.removeData("jqxhr").data("jqxhr",B);for(var D=0;p.length>D;D++)p[D]=null;return this.trigger("form-submit-notify",[this,b]),this},a.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&a.isFunction(a.fn.on),!e.delegation&&0===this.length){var f={s:this.selector,c:this.context};return!a.isReady&&f.s?(d("DOM not ready, queuing ajaxForm"),a(function(){a(f.s,f.c).ajaxForm(e)}),this):(d("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return e.delegation?(a(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,e,b).on("click.form-plugin",this.selector,e,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,b).bind("click.form-plugin",e,c)},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b,c){var d=[];if(0===this.length)return d;var f=this[0],g=b?f.getElementsByTagName("*"):f.elements;if(!g)return d;var h,i,j,k,l,m,n;for(h=0,m=g.length;m>h;h++)if(l=g[h],j=l.name,j&&!l.disabled)if(b&&f.clk&&"image"==l.type)f.clk==l&&(d.push({name:j,value:a(l).val(),type:l.type}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}));else if(k=a.fieldValue(l,!0),k&&k.constructor==Array)for(c&&c.push(l),i=0,n=k.length;n>i;i++)d.push({name:j,value:k[i]});else if(e.fileapi&&"file"==l.type){c&&c.push(l);var o=l.files;if(o.length)for(i=0;o.length>i;i++)d.push({name:j,value:o[i],type:l.type});else d.push({name:j,value:"",type:l.type})}else null!==k&&void 0!==k&&(c&&c.push(l),d.push({name:j,value:k,type:l.type,required:l.required}));if(!b&&f.clk){var p=a(f.clk),q=p[0];j=q.name,j&&!q.disabled&&"image"==q.type&&(d.push({name:j,value:p.val()}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}))}return d},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var d=this.name;if(d){var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&void 0!==e&&c.push({name:this.name,value:e})}}),a.param(c)},a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;e>d;d++){var f=this[d],g=a.fieldValue(f,b);null===g||void 0===g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g))}return c},a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){var g=b.selectedIndex;if(0>g)return null;for(var h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;k>l;l++){var m=i[l];if(m.selected){var n=m.value;if(n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val(""):b&&(b===!0&&/hidden/.test(d)||"string"==typeof b&&a(this).is(b))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var c=this.type;if("checkbox"==c||"radio"==c)this.checked=b;else if("option"==this.tagName.toLowerCase()){var d=a(this).parent("select");b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b}})},a.fn.ajaxSubmit.debug=!1}(jQuery),function(a,b,c){a.fn.backstretch=function(d,e){return(d===c||0===d.length)&&a.error("No images were supplied for Backstretch"),0===a(b).scrollTop()&&b.scrollTo(0,0),this.each(function(){var b=a(this),c=b.data("backstretch");if(c){if("string"==typeof d&&"function"==typeof c[d])return void c[d](e);e=a.extend(c.options,e),c.destroy(!0)}c=new f(this,d,e),b.data("backstretch",c)})},a.backstretch=function(b,c){return a("body").backstretch(b,c).data("backstretch")},a.expr[":"].backstretch=function(b){return a(b).data("backstretch")!==c},a.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var d={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},e={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999},f=function(c,e,f){this.options=a.extend({},a.fn.backstretch.defaults,f||{}),this.images=a.isArray(e)?e:[e],a.each(this.images,function(){a("<img />")[0].src=this}),this.isBody=c===document.body,this.$container=a(c),this.$root=this.isBody?a(g?b:document):this.$container,c=this.$container.children(".backstretch").first(),this.$wrap=c.length?c:a('<div class="backstretch"></div>').css(d).appendTo(this.$container),this.isBody||(c=this.$container.css("position"),e=this.$container.css("zIndex"),this.$container.css({position:"static"===c?"relative":c,zIndex:"auto"===e?0:e,background:"none"}),this.$wrap.css({zIndex:-999998})),this.$wrap.css({position:this.isBody&&g?"fixed":"absolute"}),this.index=0,this.show(this.index),a(b).on("resize.backstretch",a.proxy(this.resize,this)).on("orientationchange.backstretch",a.proxy(function(){this.isBody&&0===b.pageYOffset&&(b.scrollTo(0,1),this.resize())},this))};f.prototype={resize:function(){try{var a,c={left:0,top:0},d=this.isBody?this.$root.width():this.$root.innerWidth(),e=d,f=this.isBody?b.innerHeight?b.innerHeight:this.$root.height():this.$root.innerHeight(),g=e/this.$img.data("ratio");g>=f?(a=(g-f)/2,this.options.centeredY&&(c.top="-"+a+"px")):(g=f,e=g*this.$img.data("ratio"),a=(e-d)/2,this.options.centeredX&&(c.left="-"+a+"px")),this.$wrap.css({width:d,height:f}).find("img:not(.deleteable)").css({width:e,height:g}).css(c)}catch(h){}return this},show:function(b){if(!(Math.abs(b)>this.images.length-1)){var c=this,d=c.$wrap.find("img").addClass("deleteable"),f={relatedTarget:c.$container[0]};return c.$container.trigger(a.Event("backstretch.before",f),[c,b]),this.index=b,clearInterval(c.interval),c.$img=a("<img />").css(e).bind("load",function(e){var g=this.width||a(e.target).width();e=this.height||a(e.target).height(),a(this).data("ratio",g/e),a(this).fadeIn(c.options.speed||c.options.fade,function(){d.remove(),c.paused||c.cycle(),a(["after","show"]).each(function(){c.$container.trigger(a.Event("backstretch."+this,f),[c,b])})}),c.resize()}).appendTo(c.$wrap),c.$img.attr("src",c.images[b]),c}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return 1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(a.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(c){a(b).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),c||this.$wrap.remove(),this.$container.removeData("backstretch")}};var g,h=navigator.userAgent,i=navigator.platform,j=h.match(/AppleWebKit\/([0-9]+)/),j=!!j&&j[1],k=h.match(/Fennec\/([0-9]+)/),k=!!k&&k[1],l=h.match(/Opera Mobi\/([0-9]+)/),m=!!l&&l[1],n=h.match(/MSIE ([0-9]+)/),n=!!n&&n[1];g=!((-1<i.indexOf("iPhone")||-1<i.indexOf("iPad")||-1<i.indexOf("iPod"))&&j&&534>j||b.operamini&&"[object OperaMini]"==={}.toString.call(b.operamini)||l&&7458>m||-1<h.indexOf("Android")&&j&&533>j||k&&6>k||"palmGetResource"in b&&j&&534>j||-1<h.indexOf("MeeGo")&&-1<h.indexOf("NokiaBrowser/8.5.0")||n&&6>=n)}(jQuery,window),function(a){a(["jquery"],function(a){return function(){function b(a,b,c){return j({type:r.error,iconClass:l().iconClasses.error,message:a,optionsOverride:c,title:b})}function c(a,b,c){return j({type:r.info,iconClass:l().iconClasses.info,message:a,optionsOverride:c,title:b})}function d(a){o=a}function e(a,b,c){return j({type:r.success,iconClass:l().iconClasses.success,message:a,optionsOverride:c,title:b})}function f(a,b,c){return j({type:r.warning,iconClass:l().iconClasses.warning,message:a,optionsOverride:c,title:b})}function g(b){var c=l();return n||k(c),b&&0===a(":focus",b).length?void b[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){m(b)}}):void(n.children().length&&n[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){n.remove()}}))}function h(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:"<button>&times;</button>",newestOnTop:!0}}function i(a){o&&o(a)}function j(b){function c(b){return!a(":focus",j).length||b?j[f.hideMethod]({duration:f.hideDuration,easing:f.hideEasing,complete:function(){m(j),f.onHidden&&f.onHidden(),s.state="hidden",s.endTime=new Date,i(s)}}):void 0}function d(){(f.timeOut>0||f.extendedTimeOut>0)&&(h=setTimeout(c,f.extendedTimeOut))}function e(){clearTimeout(h),j.stop(!0,!0)[f.showMethod]({duration:f.showDuration,easing:f.showEasing})}var f=l(),g=b.iconClass||f.iconClass;"undefined"!=typeof b.optionsOverride&&(f=a.extend(f,b.optionsOverride),g=b.optionsOverride.iconClass||g),q++,n=k(f);var h=null,j=a("<div/>"),o=a("<div/>"),p=a("<div/>"),r=a(f.closeHtml),s={toastId:q,state:"visible",startTime:new Date,options:f,map:b};return b.iconClass&&j.addClass(f.toastClass).addClass(g),b.title&&(o.append(b.title).addClass(f.titleClass),j.append(o)),b.message&&(p.append(b.message).addClass(f.messageClass),j.append(p)),f.closeButton&&(r.addClass("toast-close-button"),j.prepend(r)),j.hide(),f.newestOnTop?n.prepend(j):n.append(j),j[f.showMethod]({duration:f.showDuration,easing:f.showEasing,complete:f.onShown}),f.timeOut>0&&(h=setTimeout(c,f.timeOut)),j.hover(e,d),!f.onclick&&f.tapToDismiss&&j.click(c),f.closeButton&&r&&r.click(function(a){a.stopPropagation(),c(!0)}),f.onclick&&j.click(function(){f.onclick(),c()}),i(s),f.debug&&console&&console.log(s),j}function k(b){return b||(b=l()),n=a("#"+b.containerId),n.length?n:(n=a("<div/>").attr("id",b.containerId).addClass(b.positionClass),n.appendTo(a(b.target)),n)}function l(){return a.extend({},h(),s.options)}function m(a){n||(n=k()),a.is(":visible")||(a.remove(),a=null,0===n.children().length&&n.remove())}var n,o,p="2.0.0",q=0,r={error:"error",info:"info",success:"success",warning:"warning"},s={clear:g,error:b,getContainer:k,info:c,options:{},subscribe:d,success:e,version:p,warning:f};return s}()})}("function"==typeof define&&define.amd?define:function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require(a[0])):window.toastr=b(window.jQuery)}),function(){function a(a){var b={};return a.forEach(function(a,c){b[a]=c}),b}function b(a,b){Object.keys(a).forEach(function(c){b[c]=a[c]})}function c(a){return Math.min.apply(null,a)}function d(a){return Math.max.apply(null,a)}function e(a){return Array.prototype.concat.apply([],a)}function f(a){return Object.keys(a).map(function(b){return a[b]})}function g(a){for(var b={},c=0;c<a.length;++c)for(var d=a[c],e=0;e<d.length;++e){var f=d[e];b[f]=f}var g=[];for(var h in b)g.push(b[h]);return g}function h(a,b,c,d){return function(e){return arguments.length?(b[c]=e,d&&d(e),a):b[c]}}function i(){function a(b){var d=l,e=2*b,f=e+1,g=b;e<d.length&&(g=d[e].pri<d[g].pri?e:g,f<d.length&&(g=d[f].pri<d[g].pri?f:g),g!==b&&(c(b,g),a(g)))}function b(a){for(var b,d=l,e=d[a].pri;a>0&&(b=a>>1,!(d[b].pri<e));)c(a,b),a=b}function c(a,b){var c=l,d=m,e=c[a];c[a]=c[b],c[b]=e,d[c[a].key]=a,d[c[b].key]=b}function d(){return l.length}function e(){return Object.keys(m)}function f(a){return a in m}function g(a){var b=m[a];return void 0!==b?l[b].pri:void 0}function h(a,c){if(a in m)return!1;var d={key:a,pri:c},e=l.length;return m[a]=e,l.push(d),b(e),!0}function i(){return d()>0?l[0].key:void 0}function j(){c(0,l.length-1);var b=l.pop();return delete m[b.key],a(0),b.key}function k(a,c){var d=m[a];if(c>l[d].pri)throw new Error("New priority is greater than current priority. Key: "+a+" Old: "+l[d].pri+" New: "+c);l[d].pri=c,b(d)}var l=[],m={};return{size:d,keys:e,has:f,priority:g,add:h,min:i,removeMin:j,decrease:k}}dagre={},dagre.version="0.0.5",dagre.graph={},dagre.graph=function(){function a(a,b,c){var d=a[b];d||(d=a[b]={count:0,edges:{}}),d.count++,d.edges[c]=!0}function b(a,b,c){var d=a[b];0==--d.count?delete a[b]:delete d.edges[c]}function c(a){var b=h[a];if(a in h)return b;throw new Error("Node '"+a+"' is not in buildGraph:\n"+m.toString())}function d(a){var b=k[a];if(!b)throw new Error("Edge '"+a+"' is not in buildGraph:\n"+m.toString());return b}var h={},i={},j={},k={},m={};return m.addNode=function(a,b){if(m.hasNode(a))throw new Error("Graph already has node '"+a+"':\n"+m.toString());h[a]={id:a,value:b},i[a]={},j[a]={}},m.delNode=function(a){c(a),m.edges(a).forEach(function(a){m.delEdge(a)}),delete i[a],delete j[a],delete h[a]},m.node=function(a){return c(a).value},m.hasNode=function(a){return a in h},m.addEdge=function(b,d,e,f){if(c(d),c(e),m.hasEdge(b))throw new Error("Graph already has edge '"+b+"':\n"+m.toString());k[b]={id:b,source:d,target:e,value:f},a(i[e],d,b),a(j[d],e,b)},m.delEdge=function(a){var c=d(a);b(i[c.target],c.source,a),b(j[c.source],c.target,a),delete k[a]},m.edge=function(a){return d(a).value},m.source=function(a){return d(a).source},m.target=function(a){return d(a).target},m.hasEdge=function(a){return a in k},m.successors=function(a){return c(a),l(j[a]).map(function(a){return h[a].id})},m.predecessors=function(a){return c(a),l(i[a]).map(function(a){return h[a].id})},m.neighbors=function(a){c(a);var b={};return l(j[a]).map(function(a){b[a]=!0}),l(i[a]).map(function(a){b[a]=!0}),l(b).map(function(a){return h[a].id})},m.nodes=function(){var a=[];return m.eachNode(function(b){a.push(b)}),a},m.eachNode=function(a){for(var b in h){var c=h[b];a(c.id,c.value)}},m.edges=function(a,b){var d,e;return arguments.length?1===arguments.length?g([m.inEdges(a),m.outEdges(a)]):2===arguments.length?(c(a),c(b),e=j[a],d=b in e?l(e[b].edges):[],d.map(function(a){return k[a].id})):void 0:(d=[],m.eachEdge(function(a){d.push(a)}),d)},m.eachEdge=function(a){for(var b in k){var c=k[b];a(c.id,c.source,c.target,c.value)}},m.inEdges=function(a){return c(a),e(f(i[a]).map(function(a){return l(a.edges)}))},m.outEdges=function(a){return c(a),e(f(j[a]).map(function(a){return l(a.edges)}))},m.subgraph=function(a){var b=dagre.graph();return a.forEach(function(a){b.addNode(a,m.node(a))}),f(k).forEach(function(a){b.hasNode(a.source)&&b.hasNode(a.target)&&b.addEdge(a.id,a.source,a.target,m.edge(a.id))}),b},m.toString=function(){var a="GRAPH:\n";return a+="    Nodes:\n",l(h).forEach(function(b){a+="        "+b+": "+JSON.stringify(h[b].value)+"\n"}),a+="    Edges:\n",l(k).forEach(function(b){var c=k[b];a+="        "+b+" ("+c.source+" -> "+c.target+"): "+JSON.stringify(k[b].value)+"\n"}),a},m},dagre.layout=function(){function a(){var a=dagre.graph(),b=0;
return g.nodes.forEach(function(c){var d="id"in c?c.id:"_N"+b++;c.dagre={id:d,width:c.width,height:c.height},a.addNode(d,c.dagre)}),g.edges.forEach(function(c){var d=c.source.dagre.id;if(!a.hasNode(d))throw new Error("Source node for '"+c+"' not in node list");var e=c.target.dagre.id;if(!a.hasNode(e))throw new Error("Target node for '"+c+"' not in node list");if(c.dagre={points:[]},d!==e){var f="id"in c?c.id:"_E"+b++;c.dagre.id=f,c.dagre.minLen=c.minLen||1,c.dagre.width=c.width||0,c.dagre.height=c.height||0,a.addEdge(f,d,e,c.dagre)}}),a}function b(){var b=o.rankSep();try{if(!g.nodes.length)return;var f=a();f.eachEdge(function(a,b,c,d){d.minLen*=2}),o.rankSep(b/2),j.run(f),k.run(f),c(f),l.run(f),m.run(f),d(f),e(f),j.undo(f)}finally{o.rankSep(b)}return o}function c(a){var b=0;a.eachEdge(function(c,d,e,f){var g=a.node(d).rank,h=a.node(e).rank;if(h>g+1){for(var i=d,j=g+1,k=0;h>j;++j,++k){var l="_D"+ ++b,m={width:f.width,height:f.height,edge:{id:c,source:d,target:e,attrs:f},index:k,rank:j,dummy:!0};a.addNode(l,m),a.addEdge("_D"+ ++b,i,l,{}),i=l}a.addEdge("_D"+ ++b,i,e,{}),a.delEdge(c)}})}function d(a){a.eachNode(function(b,c){if(c.dummy){var d=c.edge;a.hasEdge(d.id)||a.addEdge(d.id,d.source,d.target,d.attrs);var e=a.edge(d.id).points;e[c.index]={x:c.x,y:c.y},a.delNode(b)}})}function e(a){a.eachEdge(function(a,b,c,d){d.reversed&&d.points.reverse()})}function f(a){return function(){return arguments.length?(a.apply(null,arguments),o):a()}}var g={nodes:[],edges:[],debugLevel:0},i=n(),j=dagre.layout.acyclic(),k=dagre.layout.rank(),l=dagre.layout.order(),m=dagre.layout.position(),o={};return o.nodes=h(o,g,"nodes"),o.edges=h(o,g,"edges"),o.orderIters=f(l.iterations),o.nodeSep=f(m.nodeSep),o.edgeSep=f(m.edgeSep),o.rankSep=f(m.rankSep),o.rankDir=f(m.rankDir),o.debugAlignment=f(m.debugAlignment),o.debugLevel=h(o,g,"debugLevel",function(a){i.enabled(a),j.debugLevel(a),k.debugLevel(a),l.debugLevel(a),m.debugLevel(a)}),o.run=i.wrap("Total layout",b),o},dagre.layout.acyclic=function(){function a(a){function c(b){b in e||(e[b]=d[b]=!0,a.outEdges(b).forEach(function(e){var g,h=a.target(e);h in d?(g=a.edge(e),a.delEdge(e),g.reversed=!0,++f,a.addEdge(e,h,b,g)):c(h)}),delete d[b])}var d={},e={},f=0;a.eachNode(function(a){c(a)}),b.debugLevel>=2&&console.log("Acyclic Phase: reversed "+f+" edge(s)")}var b={debugLevel:0},c=n(),d={};return d.debugLevel=h(d,b,"debugLevel",function(a){c.enabled(a)}),d.run=c.wrap("Acyclic Phase",a),d.undo=function(a){a.eachEdge(function(b,c,d,e){e.reversed&&(delete e.reversed,a.delEdge(b),a.addEdge(b,d,c,e))})},d},dagre.layout.rank=function(){function a(a){b(a),m(a).forEach(function(b){var c=a.subgraph(b);d(c),e(c)})}function b(a){var b={},c=i();for(a.eachNode(function(d){c.add(d,a.inEdges(d).length),b[d]=0});c.size()>0;){var d=c.min();if(c.priority(d)>0)throw new Error("Input buildGraph is not acyclic: "+a.toString());c.removeMin();var e=b[d];a.node(d).rank=e,a.outEdges(d).forEach(function(d){var f=a.target(d);b[f]=Math.max(b[f],e+(a.edge(d).minLen||1)),c.decrease(f,c.priority(f)-1)})}}function d(a){function b(g,h){e[g]=!0,a.node(g).rank=h,d[g].forEach(function(d){if(!(d in e)){var i=c[f(g,d)];b(d,h+(a.edges(g,d).length?i:-i))}})}var c={};a.eachEdge(function(a,b,d,e){var g=f(b,d);c[g]=Math.max(c[g]||1,e.minLen||1)});var d=dagre.util.prim(a,function(b,d){return Math.abs(a.node(b).rank-a.node(d).rank)-c[f(b,d)]}),e={};return b(a.nodes()[0],0),d}function e(a){var b=c(a.nodes().map(function(b){return a.node(b).rank}));a.eachNode(function(a,c){c.rank-=b})}function f(a,b){return b>a?a.length+":"+a+"-"+b:b.length+":"+b+"-"+a}var g={debugLevel:0},j=n(),k={};return k.debugLevel=h(k,g,"debugLevel",function(a){j.enabled(a)}),k.run=j.wrap("Rank Phase",a),k},dagre.layout.order=function(){function b(a){var b=c(a),e=g(b),f=j(a,b);i.debugLevel>=2&&console.log("Order phase start cross count: "+f);var h,k,l;for(k=0,l=0;4>l&&k<i.iterations;++k,++l)h=d(a,k,b),f>h&&(e=g(b),f=h,l=0),i.debugLevel>=3&&console.log("Order phase iter "+k+" cross count: "+f);return e.forEach(function(b){b.forEach(function(b,c){a.node(b).order=c})}),i.debugLevel>=2&&(console.log("Order iterations: "+k),console.log("Order phase best cross count: "+f)),e}function c(a){var b=[];return a.eachNode(function(a,c){var d=b[c.rank]||(b[c.rank]=[]);d.push(a)}),b}function d(a,b,c){var d,f=0;if(b%2===0)for(d=1;d<c.length;++d)e(a,c[d-1],c[d],"inEdges"),f+=k(a,c[d-1],c[d]);else for(d=c.length-2;d>=0;--d)e(a,c[d+1],c[d],"outEdges"),f+=k(a,c[d],c[d+1]);return f}function e(b,c,d,e){for(var g=a(d),h=f(b,c,d,e),i=d.slice(0).sort(function(a,b){return h[a]-h[b]||g[a]-g[b]}),j=d.length-1;j>=0;--j)-1!==h[d[j]]&&(d[j]=i.pop())}function f(b,c,d,e){var f=a(c),g={};return d.forEach(function(a){var c=-1,d=b[e](a);d.length>0&&(c=0,d.forEach(function(d){var e=b.source(d),g=e===a?b.target(d):e;c+=f[g]}),c/=d.length),g[a]=c}),g}function g(a){return a.map(function(a){return a.slice(0)})}var i={iterations:24,debugLevel:0},l=n(),m={};return m.iterations=h(m,i,"iterations"),m.debugLevel=h(m,i,"debugLevel",function(a){l.enabled(a)}),m.run=l.wrap("Order Phase",b),m};var j=dagre.layout.order.crossCount=function(a,b){var c,d=0;return b.forEach(function(b){c&&(d+=k(a,c,b)),c=b}),d},k=dagre.layout.order.bilayerCrossCount=function(b,c,d){var e=a(d),f=[];c.forEach(function(a){var c=[];b.outEdges(a).forEach(function(a){c.push(e[b.target(a)])}),c.sort(function(a,b){return a-b}),f=f.concat(c)});for(var g=1;g<d.length;)g<<=1;var h=2*g-1;g-=1;for(var i=[],j=0;h>j;++j)i[j]=0;var k=0;return f.forEach(function(a){var b=a+g;++i[b];for(;b>0;)b%2&&(k+=i[b+1]),b=b-1>>1,++i[b]}),k};dagre.layout.position=function(){function a(a){var e=[];a.eachNode(function(a,b){var c=e[b.rank]||(e[b.rank]=[]);c[b.order]=a});var h=b(a,e),i={};["up","down"].forEach(function(b){"down"===b&&e.reverse(),["left","right"].forEach(function(c){"right"===c&&q(e);var d=b+"-"+c;if(!v.debugAlignment||v.debugAlignment===d){var f=g(a,e,h,"up"===b?"predecessors":"successors");i[d]=j(a,e,f.pos,f.root,f.align),"right"===c&&p(e,i[d])}"right"===c&&q(e)}),"down"===b&&e.reverse()}),v.debugAlignment?a.eachNode(function(b){t(a,b,i[v.debugAlignment][b])}):(o(a,e,i),a.eachNode(function(b){var c=f(i).map(function(a){return a[b]}).sort(function(a,b){return a-b});t(a,b,(c[1]+c[2])/2)}));var k=c(a.nodes().map(function(b){return t(a,b)-r(a,b)/2}));a.eachNode(function(b){t(a,b,t(a,b)-k)});var l=0;e.forEach(function(b){var c=d(b.map(function(b){return s(a,b)}));l+=c/2,b.forEach(function(b){u(a,b,l)}),l+=c/2+v.rankSep})}function b(a,b){var c={},d={};b[0].forEach(function(a,b){d[a]=b});for(var e=1;e<b.length;++e)for(var f=b[e],g=0,h=0,i=0;i<f.length;++i){var j=f[i];d[j]=i;var k=null;if(a.node(j).dummy&&a.predecessors(j).some(function(b){return a.node(b).dummy?(k=d[b],!0):!1}),null===k&&i===f.length-1&&(k=b[e-1].length-1),null!==k){for(;i>=h;++h){var l=f[h];a.inEdges(l).forEach(function(b){var e=d[a.source(b)];(g>e||e>k)&&(c[b]=!0)})}g=k}}return c}function g(a,b,c,d){var f={},g={},h={};return b.forEach(function(a){a.forEach(function(a,b){g[a]=a,h[a]=a,f[a]=b})}),b.forEach(function(b){var i=-1;b.forEach(function(b){var j=a[d](b);if(j.length>0){j.sort(function(a,b){return f[a]-f[b]});var k=(j.length-1)/2;j.slice(Math.floor(k),Math.ceil(k)+1).forEach(function(d){h[b]===b&&!c[e([a.edges(b,d),a.edges(d,b)])[0]]&&i<f[d]&&(h[d]=b,h[b]=g[b]=g[d],i=f[d])})}})}),{pos:f,root:g,align:h}}function i(a,b){var c=a.node(b).dummy?v.edgeSep:v.nodeSep;return r(a,b)/2+c/2}function j(a,b,c,d,e){function g(b){if(!(b in l)){l[b]=0;var f=b;do{if(c[f]>0){var m=d[k[f]];g(m),h[b]===b&&(h[b]=h[m]);var n=i(a,k[f])+i(a,f);h[b]!==h[m]?j[h[m]]=Math.min(j[h[m]]||Number.POSITIVE_INFINITY,l[b]-l[m]-n):l[b]=Math.max(l[b],l[m]+n)}f=e[f]}while(f!==b)}}var h={},j={},k={},l={};b.forEach(function(a){a.forEach(function(b,c){h[b]=b,k[b]=c>0?a[c-1]:null})}),f(d).forEach(function(a){g(a)});var m=0;return b.forEach(function(a){var b=j[a[0]];void 0===b&&(b=0),m=j[a[0]]=b+m}),b.forEach(function(a){a.forEach(function(a){if(l[a]=l[d[a]],d[a]===a){var b=j[h[a]];b<Number.POSITIVE_INFINITY&&(l[a]+=b)}})}),l}function k(a,b,d){return c(b.map(function(b){var c=b[0];return d[c]-r(a,c)/2}))}function l(a,b,c){return d(b.map(function(b){var d=b[b.length-1];return c[d]-r(a,d)/2}))}function m(a,b){Object.keys(b).forEach(function(c){b[c]+=a})}function o(a,b,c){var d,e,g=Number.POSITIVE_INFINITY;f(c).forEach(function(c){var f=k(a,b,c),h=l(a,b,c),i=h-f;g>i&&(d=f,e=h,g=i)}),["up","down"].forEach(function(e){var f=c[e+"-left"],g=d-k(a,b,f);g&&m(g,f)}),["up","down"].forEach(function(d){var f=c[d+"-right"],g=e-l(a,b,f);g&&m(g,f)})}function p(a,b){var c=d(f(b));Object.keys(b).forEach(function(a){b[a]=c-b[a]})}function q(a){a.forEach(function(a){a.reverse()})}function r(a,b){switch(v.rankDir){case"LR":return a.node(b).height;default:return a.node(b).width}}function s(a,b){switch(v.rankDir){case"LR":return a.node(b).width;default:return a.node(b).height}}function t(a,b,c){switch(v.rankDir){case"LR":if(arguments.length<3)return a.node(b).y;a.node(b).y=c;break;default:if(arguments.length<3)return a.node(b).x;a.node(b).x=c}}function u(a,b,c){switch(v.rankDir){case"LR":if(arguments.length<3)return a.node(b).x;a.node(b).x=c;break;default:if(arguments.length<3)return a.node(b).y;a.node(b).y=c}}var v={nodeSep:50,edgeSep:10,rankSep:30,rankDir:"TB",debugAlignment:null,debugLevel:0},w=n(),x={};return x.nodeSep=h(x,v,"nodeSep"),x.edgeSep=h(x,v,"edgeSep"),x.rankSep=h(x,v,"rankSep"),x.rankDir=h(x,v,"rankDir"),x.debugAlignment=h(x,v,"debugAlignment"),x.debugLevel=h(x,v,"debugLevel",function(a){w.enabled(a)}),x.run=w.wrap("Position Phase",a),x},dagre.util={};var l=dagre.util.keys=Object.keys,m=dagre.util.components=function(a){function b(c,e){c in d||(d[c]=!0,e.push(c),a.neighbors(c).forEach(function(a){b(a,e)}))}var c=[],d={};return a.eachNode(function(a){var d=[];b(a,d),d.length>0&&c.push(d)}),c},n=(dagre.util.prim=function(a,b){var c={},d={},e=i();if(0===a.nodes().length)return c;a.eachNode(function(a){e.add(a,Number.POSITIVE_INFINITY),c[a]=[]}),e.decrease(a.nodes()[0],0);for(var f,g=!1;e.size()>0;){if(f=e.removeMin(),f in d)c[f].push(d[f]),c[d[f]].push(f);else{if(g)throw new Error("Input buildGraph is not connected:\n"+a.toString());g=!0}a.neighbors(f).forEach(function(a){var c=e.priority(a);if(void 0!==c){var g=b(f,a);c>g&&(d[a]=f,e.decrease(a,g))}})}return c},dagre.util.intersectRect=function(a,b){var c,d,e=a.x,f=a.y,g=b.x-e,h=b.y-f,i=a.width/2,j=a.height/2;return Math.abs(h)*i>Math.abs(g)*j?(0>h&&(j=-j),c=0===h?0:j*g/h,d=j):(0>g&&(i=-i),c=i,d=0===g?0:i*h/g),{x:e+c,y:f+d}},dagre.util.pointStr=function(a){return a.x+","+a.y},function(){var a={},b=!1;return a.enabled=function(c){return arguments.length?(b=c,a):b},a.wrap=function(a,c){return function(){var d=b?(new Date).getTime():null;try{return c.apply(null,arguments)}finally{d&&console.log(a+" time: "+((new Date).getTime()-d)+"ms")}}},a});dagre.dot={},dagre.dot.toGraph=function(a){function c(a,c){g.hasNode(a)||g.addNode(a,{id:a,label:a}),c&&b(c,g.node(a))}function d(a,c,d){var e=a+"-"+c,f=i[e];f||(f=i[e]=0),i[e]++;var h=d.id||e+"-"+f,j={};b(d,j),b({id:h},j),g.addEdge(h,a,c,j)}function e(a){switch(a.type){case"node":c(a.id,a.attrs);break;case"edge":var b;a.elems.forEach(function(c){switch(e(c),c.type){case"node":var f=c.id;b&&(d(b,f,a.attrs),h&&d(f,b,a.attrs)),b=f;break;default:throw new Error("Unsupported type incident on edge: "+c.type)}});break;case"attr":break;default:throw new Error("Unsupported statement type: "+a.type)}}var f=dot_parser.parse(a),g=dagre.graph(),h="buildGraph"===f.type,i={};return f.stmts&&f.stmts.forEach(function(a){e(a)}),g},dagre.dot.toObjects=function(a){var b=dagre.dot.toGraph(a),c=b.nodes().map(function(a){return b.node(a)}),d=b.edges().map(function(a){var c=b.edge(a);return c.source=b.node(b.source(a)),c.target=b.node(b.target(a)),c});return{nodes:c,edges:d}},dot_parser=function(){function a(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var b={parse:function(b,c){function d(a,b,c){for(var d=a,e=c-a.length,f=0;e>f;f++)d=b+d;return d}function e(a){O>M||(M>O&&(O=M,P=[]),P.push(a))}function f(){var a,c,d,f,h,i,j,k,l,m,n,o,p,q,r,s;for(q=M,r=M,a=[],c=G();null!==c;)a.push(c),c=G();if(null!==a)if(s=M,c=C(),null!==c?(d=G(),null!==d?c=[c,d]:(c=null,M=s)):(c=null,M=s),c=null!==c?c:"",null!==c)if(d=D(),null!==d){for(f=[],h=G();null!==h;)f.push(h),h=G();if(null!==f)if(h=w(),h=null!==h?h:"",null!==h){for(i=[],j=G();null!==j;)i.push(j),j=G();if(null!==i)if(123===b.charCodeAt(M)?(j="{",M++):(j=null,0===N&&e('"{"')),null!==j){for(k=[],l=G();null!==l;)k.push(l),l=G();if(null!==k)if(l=g(),l=null!==l?l:"",null!==l){for(m=[],n=G();null!==n;)m.push(n),n=G();if(null!==m)if(125===b.charCodeAt(M)?(n="}",M++):(n=null,0===N&&e('"}"')),null!==n){for(o=[],p=G();null!==p;)o.push(p),p=G();null!==o?a=[a,c,d,f,h,i,j,k,l,m,n,o]:(a=null,M=r)}else a=null,M=r;else a=null,M=r}else a=null,M=r;else a=null,M=r}else a=null,M=r;else a=null,M=r}else a=null,M=r;else a=null,M=r}else a=null,M=r;else a=null,M=r;else a=null,M=r;return null!==a&&(a=function(a,b,c,d){return{type:b,id:c,stmts:d}}(q,a[2],a[4],a[8])),null===a&&(M=q),a}function g(){var a,c,d,f,g,i,j,k,l,m,n;if(l=M,m=M,a=h(),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(59===b.charCodeAt(M)?(d=";",M++):(d=null,0===N&&e('";"')),d=null!==d?d:"",null!==d){for(f=[],n=M,g=[],i=G();null!==i;)g.push(i),i=G();if(null!==g)if(i=h(),null!==i){for(j=[],k=G();null!==k;)j.push(k),k=G();null!==j?(59===b.charCodeAt(M)?(k=";",M++):(k=null,0===N&&e('";"')),k=null!==k?k:"",null!==k?g=[g,i,j,k]:(g=null,M=n)):(g=null,M=n)}else g=null,M=n;else g=null,M=n;for(;null!==g;){for(f.push(g),n=M,g=[],i=G();null!==i;)g.push(i),i=G();if(null!==g)if(i=h(),null!==i){for(j=[],k=G();null!==k;)j.push(k),k=G();null!==j?(59===b.charCodeAt(M)?(k=";",M++):(k=null,0===N&&e('";"')),k=null!==k?k:"",null!==k?g=[g,i,j,k]:(g=null,M=n)):(g=null,M=n)}else g=null,M=n;else g=null,M=n}null!==f?a=[a,c,d,f]:(a=null,M=m)}else a=null,M=m;else a=null,M=m}else a=null,M=m;return null!==a&&(a=function(a,b,c){for(var d=[b],e=0;e<c.length;++e)d.push(c[e][1]);return d}(l,a[0],a[3])),null===a&&(M=l),a}function h(){var a;return a=i(),null===a&&(a=m(),null===a&&(a=j(),null===a&&(a=l(),null===a&&(a=k())))),a}function i(){var a,b,c,d,e;if(d=M,e=M,a=z(),null===a&&(a=x(),null===a&&(a=y())),null!==a){for(b=[],c=G();null!==c;)b.push(c),c=G();null!==b?(c=n(),null!==c?a=[a,b,c]:(a=null,M=e)):(a=null,M=e)}else a=null,M=e;return null!==a&&(a=function(a,b,c){return{type:"attr",attrType:b,attrs:c||{}}}(d,a[0],a[2])),null===a&&(M=d),a}function j(){var a,c,d,f,g,h,i;if(h=M,i=M,a=w(),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(61===b.charCodeAt(M)?(d="=",M++):(d=null,0===N&&e('"="')),null!==d){for(f=[],g=G();null!==g;)f.push(g),g=G();null!==f?(g=w(),null!==g?a=[a,c,d,f,g]:(a=null,M=i)):(a=null,M=i)}else a=null,M=i;else a=null,M=i}else a=null,M=i;return null!==a&&(a=function(a,b,c){var d={};return d[b]=c,{type:"inlineAttr",attrs:d}}(h,a[0],a[4])),null===a&&(M=h),a}function k(){var a,b,c,d,e;if(d=M,e=M,a=t(),null!==a){for(b=[],c=G();null!==c;)b.push(c),c=G();null!==b?(c=n(),c=null!==c?c:"",null!==c?a=[a,b,c]:(a=null,M=e)):(a=null,M=e)}else a=null,M=e;return null!==a&&(a=function(a,b,c){return{type:"node",id:b,attrs:c||{}}}(d,a[0],a[2])),null===a&&(M=d),a}function l(){var a,b,c,d,e,f,g;if(f=M,g=M,a=s(),null!==a){for(b=[],c=G();null!==c;)b.push(c),c=G();if(null!==b)if(c=q(),null!==c){for(d=[],e=G();null!==e;)d.push(e),e=G();null!==d?(e=n(),e=null!==e?e:"",null!==e?a=[a,b,c,d,e]:(a=null,M=g)):(a=null,M=g)}else a=null,M=g;else a=null,M=g}else a=null,M=g;return null!==a&&(a=function(a,b,c,d){for(var e=[b],f=0;f<c.length;++f)e.push(c[f]);return{type:"edge",elems:e,attrs:d||{}}}(f,a[0],a[2],a[4])),null===a&&(M=f),a}function m(){var a,c,d,f,h,i,j,k,l,m;if(j=M,k=M,l=M,a=B(),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c){if(m=M,d=w(),null!==d){for(f=[],h=G();null!==h;)f.push(h),h=G();null!==f?d=[d,f]:(d=null,M=m)}else d=null,M=m;d=null!==d?d:"",null!==d?a=[a,c,d]:(a=null,M=l)}else a=null,M=l}else a=null,M=l;if(a=null!==a?a:"",null!==a)if(123===b.charCodeAt(M)?(c="{",M++):(c=null,0===N&&e('"{"')),null!==c){for(d=[],f=G();null!==f;)d.push(f),f=G();if(null!==d)if(f=g(),null!==f){for(h=[],i=G();null!==i;)h.push(i),i=G();null!==h?(125===b.charCodeAt(M)?(i="}",M++):(i=null,0===N&&e('"}"')),null!==i?a=[a,c,d,f,h,i]:(a=null,M=k)):(a=null,M=k)}else a=null,M=k;else a=null,M=k}else a=null,M=k;else a=null,M=k;return null!==a&&(a=function(a,b,c){return b=b[2]||[],{type:"subgraph",id:b[0],stmts:c}}(j,a[0],a[3])),null===a&&(M=j),a}function n(){var a,b,c,d,e,f,g;if(e=M,f=M,a=o(),null!==a){for(b=[],g=M,c=[],d=G();null!==d;)c.push(d),d=G();for(null!==c?(d=o(),null!==d?c=[c,d]:(c=null,M=g)):(c=null,M=g);null!==c;){for(b.push(c),g=M,c=[],d=G();null!==d;)c.push(d),d=G();null!==c?(d=o(),null!==d?c=[c,d]:(c=null,M=g)):(c=null,M=g)}null!==b?a=[a,b]:(a=null,M=f)}else a=null,M=f;return null!==a&&(a=function(a,b,c){for(var d=b,e=0;e<c.length;++e)d=J(d,c[e][1]);return d}(e,a[0],a[1])),null===a&&(M=e),a}function o(){var a,c,d,f,g,h,i;if(h=M,i=M,91===b.charCodeAt(M)?(a="[",M++):(a=null,0===N&&e('"["')),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(d=p(),d=null!==d?d:"",null!==d){for(f=[],g=G();null!==g;)f.push(g),g=G();null!==f?(93===b.charCodeAt(M)?(g="]",M++):(g=null,0===N&&e('"]"')),null!==g?a=[a,c,d,f,g]:(a=null,M=i)):(a=null,M=i)}else a=null,M=i;else a=null,M=i}else a=null,M=i;return null!==a&&(a=function(a,b){return b}(h,a[2])),null===a&&(M=h),a}function p(){var a,c,d,f,g,h,i,j,k;if(i=M,j=M,a=r(),null!==a){for(c=[],k=M,d=[],f=G();null!==f;)d.push(f),f=G();if(null!==d)if(44===b.charCodeAt(M)?(f=",",M++):(f=null,0===N&&e('","')),f=null!==f?f:"",null!==f){for(g=[],h=G();null!==h;)g.push(h),h=G();null!==g?(h=r(),null!==h?d=[d,f,g,h]:(d=null,M=k)):(d=null,M=k)}else d=null,M=k;else d=null,M=k;for(;null!==d;){for(c.push(d),k=M,d=[],f=G();null!==f;)d.push(f),f=G();if(null!==d)if(44===b.charCodeAt(M)?(f=",",M++):(f=null,0===N&&e('","')),f=null!==f?f:"",null!==f){for(g=[],h=G();null!==h;)g.push(h),h=G();null!==g?(h=r(),null!==h?d=[d,f,g,h]:(d=null,M=k)):(d=null,M=k)}else d=null,M=k;else d=null,M=k}null!==c?a=[a,c]:(a=null,M=j)}else a=null,M=j;return null!==a&&(a=function(a,b,c){for(var d=b,e=0;e<c.length;++e)d=J(d,c[e][3]);return d}(i,a[0],a[1])),null===a&&(M=i),a}function q(){var a,c,d,f,g,h,i,j;if(h=M,i=M,j=M,"--"===b.substr(M,2)?(a="--",M+=2):(a=null,0===N&&e('"--"')),null!==a?(c=function(){return L}(M)?null:"",null!==c?a=[a,c]:(a=null,M=j)):(a=null,M=j),null===a&&(j=M,"->"===b.substr(M,2)?(a="->",M+=2):(a=null,0===N&&e('"->"')),null!==a?(c=function(){return L}(M)?"":null,null!==c?a=[a,c]:(a=null,M=j)):(a=null,M=j)),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(d=s(),null!==d){for(f=[],g=G();null!==g;)f.push(g),g=G();null!==f?(g=q(),g=null!==g?g:"",null!==g?a=[a,c,d,f,g]:(a=null,M=i)):(a=null,M=i)}else a=null,M=i;else a=null,M=i}else a=null,M=i;return null!==a&&(a=function(a,b,c){for(var d=[b],e=0;e<c.length;++e)d.push(c[e]);return d}(h,a[2],a[4])),null===a&&(M=h),a}function r(){var a,c,d,f,g,h,i,j;if(h=M,i=M,a=w(),null!==a){for(j=M,c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(61===b.charCodeAt(M)?(d="=",M++):(d=null,0===N&&e('"="')),null!==d){for(f=[],g=G();null!==g;)f.push(g),g=G();null!==f?(g=w(),null!==g?c=[c,d,f,g]:(c=null,M=j)):(c=null,M=j)}else c=null,M=j;else c=null,M=j;c=null!==c?c:"",null!==c?a=[a,c]:(a=null,M=i)}else a=null,M=i;return null!==a&&(a=function(a,b,c){var d={};return d[b]=c[3],d}(h,a[0],a[1])),null===a&&(M=h),a}function s(){var a,b;return a=m(),null===a&&(b=M,a=t(),null!==a&&(a=function(a,b){return{type:"node",id:b,attrs:{}}}(b,a)),null===a&&(M=b)),a}function t(){var a,b,c,d,e;if(d=M,e=M,a=w(),null!==a){for(b=[],c=G();null!==c;)b.push(c),c=G();null!==b?(c=u(),c=null!==c?c:"",null!==c?a=[a,b,c]:(a=null,M=e)):(a=null,M=e)}else a=null,M=e;return null!==a&&(a=function(a,b){return b}(d,a[0])),null===a&&(M=d),a}function u(){var a,c,d,f,g,h,i,j,k;if(j=M,58===b.charCodeAt(M)?(a=":",M++):(a=null,0===N&&e('":"')),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(d=w(),null!==d){for(f=[],g=G();null!==g;)f.push(g),g=G();if(null!==f){if(k=M,58===b.charCodeAt(M)?(g=":",M++):(g=null,0===N&&e('":"')),null!==g){for(h=[],i=G();null!==i;)h.push(i),i=G();null!==h?(i=v(),null!==i?g=[g,h,i]:(g=null,M=k)):(g=null,M=k)}else g=null,M=k;g=null!==g?g:"",null!==g?a=[a,c,d,f,g]:(a=null,M=j)}else a=null,M=j}else a=null,M=j;else a=null,M=j}else a=null,M=j;return a}function v(){var a;return 110===b.charCodeAt(M)?(a="n",M++):(a=null,0===N&&e('"n"')),null===a&&("ne"===b.substr(M,2)?(a="ne",M+=2):(a=null,0===N&&e('"ne"')),null===a&&(101===b.charCodeAt(M)?(a="e",M++):(a=null,0===N&&e('"e"')),null===a&&("se"===b.substr(M,2)?(a="se",M+=2):(a=null,0===N&&e('"se"')),null===a&&(115===b.charCodeAt(M)?(a="s",M++):(a=null,0===N&&e('"s"')),null===a&&("sw"===b.substr(M,2)?(a="sw",M+=2):(a=null,0===N&&e('"sw"')),null===a&&(119===b.charCodeAt(M)?(a="w",M++):(a=null,0===N&&e('"w"')),null===a&&("nw"===b.substr(M,2)?(a="nw",M+=2):(a=null,0===N&&e('"nw"')),null===a&&(99===b.charCodeAt(M)?(a="c",M++):(a=null,0===N&&e('"c"')),null===a&&(95===b.charCodeAt(M)?(a="_",M++):(a=null,0===N&&e('"_"'))))))))))),a}function w(){var a,c,d,f,g,h,i,j,k;if(N++,h=M,i=M,/^[a-zA-Z\u0200-\u0377_]/.test(b.charAt(M))?(a=b.charAt(M),M++):(a=null,0===N&&e("[a-zA-Z\\u0200-\\u0377_]")),null!==a){for(c=[],/^[a-zA-Z\u0200-\u0377_0-9]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==d;)c.push(d),/^[a-zA-Z\u0200-\u0377_0-9]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==c?a=[a,c]:(a=null,M=i)}else a=null,M=i;if(null!==a&&(a=function(a,b,c){return b+c.join("")}(h,a[0],a[1])),null===a&&(M=h),null===a){if(h=M,i=M,45===b.charCodeAt(M)?(a="-",M++):(a=null,0===N&&e('"-"')),a=null!==a?a:"",null!==a)if(46===b.charCodeAt(M)?(c=".",M++):(c=null,0===N&&e('"."')),null!==c){if(/^[0-9]/.test(b.charAt(M))?(f=b.charAt(M),M++):(f=null,0===N&&e("[0-9]")),null!==f)for(d=[];null!==f;)d.push(f),/^[0-9]/.test(b.charAt(M))?(f=b.charAt(M),M++):(f=null,0===N&&e("[0-9]"));else d=null;null!==d?a=[a,c,d]:(a=null,M=i)}else a=null,M=i;else a=null,M=i;if(null!==a&&(a=function(a,b,c,d){return b+c+d.join("")}(h,a[0],a[1],a[2])),null===a&&(M=h),null===a){if(h=M,i=M,45===b.charCodeAt(M)?(a="-",M++):(a=null,0===N&&e('"-"')),a=null!==a?a:"",null!==a){if(/^[0-9]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[0-9]")),null!==d)for(c=[];null!==d;)c.push(d),/^[0-9]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[0-9]"));else c=null;if(null!==c){if(j=M,46===b.charCodeAt(M)?(d=".",M++):(d=null,0===N&&e('"."')),null!==d){for(f=[],/^[0-9]/.test(b.charAt(M))?(g=b.charAt(M),M++):(g=null,0===N&&e("[0-9]"));null!==g;)f.push(g),/^[0-9]/.test(b.charAt(M))?(g=b.charAt(M),M++):(g=null,0===N&&e("[0-9]"));null!==f?d=[d,f]:(d=null,M=j)}else d=null,M=j;d=null!==d?d:"",null!==d?a=[a,c,d]:(a=null,M=i)}else a=null,M=i}else a=null,M=i;if(null!==a&&(a=function(a,b,c,d){return b+c.join("")+(d[0]||"")+(d[1]||[]).join("")}(h,a[0],a[1],a[2])),null===a&&(M=h),null===a){if(h=M,i=M,34===b.charCodeAt(M)?(a='"',M++):(a=null,0===N&&e('"\\""')),null!==a){if(j=M,'\\"'===b.substr(M,2)?(d='\\"',M+=2):(d=null,0===N&&e('"\\\\\\""')),null!==d&&(d=function(){return'"'}(j)),null===d&&(M=j),null===d&&(j=M,k=M,92===b.charCodeAt(M)?(d="\\",M++):(d=null,0===N&&e('"\\\\"')),null!==d?(/^[^"]/.test(b.charAt(M))?(f=b.charAt(M),M++):(f=null,0===N&&e('[^"]')),null!==f?d=[d,f]:(d=null,M=k)):(d=null,M=k),null!==d&&(d=function(a,b){return"\\"+b}(j,d[1])),null===d&&(M=j),null===d&&(/^[^"]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e('[^"]')))),null!==d)for(c=[];null!==d;)c.push(d),j=M,'\\"'===b.substr(M,2)?(d='\\"',M+=2):(d=null,0===N&&e('"\\\\\\""')),null!==d&&(d=function(){return'"'}(j)),null===d&&(M=j),null===d&&(j=M,k=M,92===b.charCodeAt(M)?(d="\\",M++):(d=null,0===N&&e('"\\\\"')),null!==d?(/^[^"]/.test(b.charAt(M))?(f=b.charAt(M),M++):(f=null,0===N&&e('[^"]')),null!==f?d=[d,f]:(d=null,M=k)):(d=null,M=k),null!==d&&(d=function(a,b){return"\\"+b}(j,d[1])),null===d&&(M=j),null===d&&(/^[^"]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e('[^"]'))));else c=null;null!==c?(34===b.charCodeAt(M)?(d='"',M++):(d=null,0===N&&e('"\\""')),null!==d?a=[a,c,d]:(a=null,M=i)):(a=null,M=i)}else a=null,M=i;null!==a&&(a=function(a,b){return b.join("")}(h,a[1])),null===a&&(M=h)}}}return N--,0===N&&null===a&&e("identifier"),a}function x(){var a,c;return c=M,"node"===b.substr(M,4).toLowerCase()?(a=b.substr(M,4),M+=4):(a=null,0===N&&e('"node"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(M=c),a}function y(){var a,c;return c=M,"edge"===b.substr(M,4).toLowerCase()?(a=b.substr(M,4),M+=4):(a=null,0===N&&e('"edge"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(M=c),a}function z(){var a,c;return c=M,"buildGraph"===b.substr(M,5).toLowerCase()?(a=b.substr(M,5),M+=5):(a=null,0===N&&e('"buildGraph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(M=c),a}function A(){var a,c;return c=M,"digraph"===b.substr(M,7).toLowerCase()?(a=b.substr(M,7),M+=7):(a=null,0===N&&e('"digraph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(M=c),a}function B(){var a,c;return c=M,"subgraph"===b.substr(M,8).toLowerCase()?(a=b.substr(M,8),M+=8):(a=null,0===N&&e('"subgraph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(M=c),a}function C(){var a,c;return c=M,"strict"===b.substr(M,6).toLowerCase()?(a=b.substr(M,6),M+=6):(a=null,0===N&&e('"strict"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(c,a)),null===a&&(M=c),a}function D(){var a,b;return a=z(),null===a&&(b=M,a=A(),null!==a&&(a=function(a,b){return L="digraph"===b,b}(b,a)),null===a&&(M=b)),a}function E(){var a,c;if(N++,/^[ \t\r\n]/.test(b.charAt(M))?(c=b.charAt(M),M++):(c=null,0===N&&e("[ \\t\\r\\n]")),null!==c)for(a=[];null!==c;)a.push(c),/^[ \t\r\n]/.test(b.charAt(M))?(c=b.charAt(M),M++):(c=null,0===N&&e("[ \\t\\r\\n]"));else a=null;return N--,0===N&&null===a&&e("whitespace"),a}function F(){var a,c,d,f,g,h,i;if(N++,g=M,"//"===b.substr(M,2)?(a="//",M+=2):(a=null,0===N&&e('"//"')),null!==a){for(c=[],/^[^\n]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[^\\n]"));null!==d;)c.push(d),/^[^\n]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[^\\n]"));null!==c?a=[a,c]:(a=null,M=g)}else a=null,M=g;if(null===a)if(g=M,"/*"===b.substr(M,2)?(a="/*",M+=2):(a=null,0===N&&e('"/*"')),null!==a){for(c=[],h=M,i=M,N++,"*/"===b.substr(M,2)?(d="*/",M+=2):(d=null,0===N&&e('"*/"')),N--,null===d?d="":(d=null,M=i),null!==d?(b.length>M?(f=b.charAt(M),M++):(f=null,0===N&&e("any character")),null!==f?d=[d,f]:(d=null,M=h)):(d=null,M=h);null!==d;)c.push(d),h=M,i=M,N++,"*/"===b.substr(M,2)?(d="*/",M+=2):(d=null,0===N&&e('"*/"')),N--,null===d?d="":(d=null,M=i),null!==d?(b.length>M?(f=b.charAt(M),M++):(f=null,0===N&&e("any character")),null!==f?d=[d,f]:(d=null,M=h)):(d=null,M=h);null!==c?("*/"===b.substr(M,2)?(d="*/",M+=2):(d=null,0===N&&e('"*/"')),null!==d?a=[a,c,d]:(a=null,M=g)):(a=null,M=g)}else a=null,M=g;return N--,0===N&&null===a&&e("comment"),a}function G(){var a;return a=E(),null===a&&(a=F()),a}function H(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}function I(){for(var a=1,c=1,d=!1,e=0;e<Math.max(M,O);e++){var f=b.charAt(e);"\n"===f?(d||a++,c=1,d=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(a++,c=1,d=!0):(c++,d=!1)}return{line:a,column:c}}function J(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}var K={start:f,stmtList:g,stmt:h,attrStmt:i,inlineAttrStmt:j,nodeStmt:k,edgeStmt:l,subgraphStmt:m,attrList:n,attrListBlock:o,aList:p,edgeRHS:q,idDef:r,nodeIdOrSubgraph:s,nodeId:t,port:u,compassPt:v,id:w,node:x,edge:y,graph:z,digraph:A,subgraph:B,strict:C,graphType:D,whitespace:E,comment:F,_:G};if(void 0!==c){if(void 0===K[c])throw new Error("Invalid rule name: "+a(c)+".")}else c="start";var L,M=0,N=0,O=0,P=[],Q=K[c]();if(null===Q||M!==b.length){var R=Math.max(M,O),S=R<b.length?b.charAt(R):null,T=I();throw new this.SyntaxError(H(P),S,R,T.line,T.column)}return Q},toSource:function(){return this._source}};return b.SyntaxError=function(b,c,d,e,f){function g(b,c){var d,e;switch(b.length){case 0:d="end of input";break;case 1:d=b[0];break;default:d=b.slice(0,b.length-1).join(", ")+" or "+b[b.length-1]}return e=c?a(c):"end of input","Expected "+d+" but "+e+" found."}this.name="SyntaxError",this.expected=b,this.found=c,this.message=g(b,c),this.offset=d,this.line=e,this.column=f},b.SyntaxError.prototype=Error.prototype,b}()}(),!function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(a){return 0==a?0:a>0?1:-1});var a={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},b=64,c=Math.pow(2,-b-1),d=function(b,c){for(var d=[],e=f(b,c),h=c.length-1,i=2*h-1,j=g(e,i,d,0),k=a.subtract(b,c[0]),m=a.square(k),n=0,o=0;j>o;o++){k=a.subtract(b,l(c,h,d[o],null,null));var p=a.square(k);m>p&&(m=p,n=d[o])}return k=a.subtract(b,c[h]),p=a.square(k),m>p&&(m=p,n=1),{location:n,distance:m}},e=function(a,b){var c=d(a,b);return{point:l(b,b.length-1,c.location,null,null),location:c.location}},f=function(b,c){for(var d=c.length-1,e=2*d-1,f=[],g=[],h=[],i=[],k=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],l=0;d>=l;l++)f[l]=a.subtract(c[l],b);for(var l=0;d-1>=l;l++)g[l]=a.subtract(c[l+1],c[l]),g[l]=a.scale(g[l],3);for(var m=0;d-1>=m;m++)for(var n=0;d>=n;n++)h[m]||(h[m]=[]),h[m][n]=a.dotProduct(g[m],f[n]);for(l=0;e>=l;l++)i[l]||(i[l]=[]),i[l].y=0,i[l].x=parseFloat(l)/e;for(var o=d,p=d-1,q=0;o+p>=q;q++){var r=Math.max(0,q-p),s=Math.min(q,o);for(l=r;s>=l;l++)j=q-l,i[l+j].y+=h[j][l]*k[j][l]}return i},g=function(a,c,d,e){var f,j,m=[],n=[],o=[],p=[];switch(h(a,c)){case 0:return 0;case 1:if(e>=b)return d[0]=(a[0].x+a[c].x)/2,1;if(i(a,c))return d[0]=k(a,c),1}l(a,c,.5,m,n),f=g(m,c,o,e+1),j=g(n,c,p,e+1);for(var q=0;f>q;q++)d[q]=o[q];for(var q=0;j>q;q++)d[q+f]=p[q];return f+j},h=function(a,b){var c,d,e=0;c=d=Math.sgn(a[0].y);for(var f=1;b>=f;f++)c=Math.sgn(a[f].y),c!=d&&e++,d=c;return e},i=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;i=a[0].y-a[b].y,j=a[b].x-a[0].x,k=a[0].x*a[b].y-a[b].x*a[0].y;for(var t=max_distance_below=0,u=1;b>u;u++){var v=i*a[u].x+j*a[u].y+k;v>t?t=v:max_distance_below>v&&(max_distance_below=v)}return n=0,o=1,p=0,q=i,r=j,s=k-t,l=n*r-q*o,m=1/l,e=(o*s-r*p)*m,q=i,r=j,s=k-max_distance_below,l=n*r-q*o,m=1/l,f=(o*s-r*p)*m,g=Math.min(e,f),h=Math.max(e,f),d=h-g,c>d?1:0},k=function(a,b){var c=1,d=0,e=a[b].x-a[0].x,f=a[b].y-a[0].y,g=a[0].x-0,h=a[0].y-0,i=e*d-f*c,j=1/i,k=(e*h-f*g)*j;return 0+c*k},l=function(a,b,c,d,e){for(var f=[[]],g=0;b>=g;g++)f[0][g]=a[g];for(var h=1;b>=h;h++)for(var g=0;b-h>=g;g++)f[h]||(f[h]=[]),f[h][g]||(f[h][g]={}),f[h][g].x=(1-c)*f[h-1][g].x+c*f[h-1][g+1].x,f[h][g].y=(1-c)*f[h-1][g].y+c*f[h-1][g+1].y;if(null!=d)for(g=0;b>=g;g++)d[g]=f[g][0];if(null!=e)for(g=0;b>=g;g++)e[g]=f[b-g][g];return f[b][0]},m={},n=function(a){var b=m[a];if(!b){b=[];var c=function(){return function(b){return Math.pow(b,a)}},d=function(){return function(b){return Math.pow(1-b,a)}},e=function(a){return function(){return a}},f=function(){return function(a){return a}},g=function(){return function(a){return 1-a}},h=function(a){return function(b){for(var c=1,d=0;d<a.length;d++)c*=a[d](b);return c}};b.push(new c);for(var i=1;a>i;i++){for(var j=[new e(a)],k=0;a-i>k;k++)j.push(new f);for(var k=0;i>k;k++)j.push(new g);b.push(new h(j))}b.push(new d),m[a]=b}return b},o=function(a,b){for(var c=n(a.length-1),d=0,e=0,f=0;f<a.length;f++)d+=a[f].x*c[f](b),e+=a[f].y*c[f](b);return{x:d,y:e}},p=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))
},q=function(a){return a[0].x==a[1].x&&a[0].y==a[1].y},r=function(a,b,c){if(q(a))return{point:a[0],location:b};for(var d=o(a,b),e=0,f=b,g=c>0?1:-1,h=null;e<Math.abs(c);)f+=.005*g,h=o(a,f),e+=p(h,d),d=h;return{point:h,location:f}},s=function(a){if(q(a))return 0;for(var b=o(a,0),c=0,d=0,e=1,f=null;1>d;)d+=.005*e,f=o(a,d),c+=p(f,b),b=f;return c},t=function(a,b,c){return r(a,b,c).point},u=function(a,b,c){return r(a,b,c).location},v=function(a,b){var c=o(a,b),d=o(a.slice(0,a.length-1),b),e=d.y-c.y,f=d.x-c.x;return 0==e?1/0:Math.atan(e/f)},w=function(a,b,c){var d=r(a,b,c);return d.location>1&&(d.location=1),d.location<0&&(d.location=0),v(a,d.location)},x=function(a,b,c,d){d=null==d?0:d;var e=r(a,b,d),f=v(a,e.location),g=Math.atan(-1/f),h=c/2*Math.sin(g),i=c/2*Math.cos(g);return[{x:e.point.x+i,y:e.point.y+h},{x:e.point.x-i,y:e.point.y-h}]};window.jsBezier={distanceFromCurve:d,gradientAtPoint:v,gradientAtPointAlongCurveFrom:w,nearestPointOnCurve:e,pointOnCurve:o,pointAlongCurveFrom:t,perpendicularToCurveAt:x,locationAlongCurveFrom:u,getLength:s}}(),function(){"use strict";var a=this.Biltong={},b=function(a){return"[object Array]"===Object.prototype.toString.call(a)},c=function(a,c,d){return a=b(a)?a:[a.x,a.y],c=b(c)?c:[c.x,c.y],d(a,c)},d=a.gradient=function(a,b){return c(a,b,function(a,b){return b[0]==a[0]?b[1]>a[1]?1/0:-1/0:b[1]==a[1]?b[0]>a[0]?0:-0:(b[1]-a[1])/(b[0]-a[0])})},e=(a.normal=function(a,b){return-1/d(a,b)},a.lineLength=function(a,b){return c(a,b,function(a,b){return Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2))})},a.quadrant=function(a,b){return c(a,b,function(a,b){return b[0]>a[0]?b[1]>a[1]?2:1:b[0]==a[0]?b[1]>a[1]?2:1:b[1]>a[1]?3:4})}),f=(a.theta=function(a,b){return c(a,b,function(a,b){var c=d(a,b),f=Math.atan(c),g=e(a,b);return(4==g||3==g)&&(f+=Math.PI),0>f&&(f+=2*Math.PI),f})},a.intersects=function(a,b){var c=a.x,d=a.x+a.w,e=a.y,f=a.y+a.h,g=b.x,h=b.x+b.w,i=b.y,j=b.y+b.h;return g>=c&&d>=g&&i>=e&&f>=i||h>=c&&d>=h&&i>=e&&f>=i||g>=c&&d>=g&&j>=e&&f>=j||h>=c&&d>=g&&j>=e&&f>=j||c>=g&&h>=c&&e>=i&&j>=e||d>=g&&h>=d&&e>=i&&j>=e||c>=g&&h>=c&&f>=i&&j>=f||d>=g&&h>=c&&f>=i&&j>=f},a.encloses=function(a,b,c){var d=a.x,e=a.x+a.w,f=a.y,g=a.y+a.h,h=b.x,i=b.x+b.w,j=b.y,k=b.y+b.h,l=function(a,b,d,e){return c?b>=a&&d>=e:b>a&&d>e};return l(d,h,e,i)&&l(f,j,g,k)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),g=[null,[-1,-1],[-1,1],[1,1],[1,-1]];a.pointOnLine=function(a,b,c){var h=d(a,b),i=e(a,b),j=c>0?f[i]:g[i],k=Math.atan(h),l=Math.abs(c*Math.sin(k))*j[1],m=Math.abs(c*Math.cos(k))*j[0];return{x:a.x+m,y:a.y+l}},a.perpendicularLineTo=function(a,b,c){var e=d(a,b),f=Math.atan(-1/e),g=c/2*Math.sin(f),h=c/2*Math.cos(f);return[{x:b.x+h,y:b.y+g},{x:b.x-h,y:b.y-g}]}}.call(this),function(){var a=function(a){return"[object Array]"===Object.prototype.toString.call(a)},b=function(a){return"[object Number]"===Object.prototype.toString.call(a)},c=function(a){return"string"==typeof a},d=function(a){return"boolean"==typeof a},e=function(a){return null==a},f=function(a){return null==a?!1:"[object Object]"===Object.prototype.toString.call(a)},g=function(a){return"[object Date]"===Object.prototype.toString.call(a)},h=function(a){return"[object Function]"===Object.prototype.toString.call(a)},i=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},j=this,k=j.jsPlumbUtil={isArray:a,isString:c,isBoolean:d,isNull:e,isObject:f,isDate:g,isFunction:h,isEmpty:i,isNumber:b,clone:function(b){if(c(b))return""+b;if(d(b))return!!b;if(g(b))return new Date(b.getTime());if(h(b))return b;if(a(b)){for(var e=[],i=0;i<b.length;i++)e.push(this.clone(b[i]));return e}if(f(b)){var j={};for(var k in b)j[k]=this.clone(b[k]);return j}return b},merge:function(b,e,g){var h,i,j={};for(g=g||[],i=0;i<g.length;i++)j[g[i]]=!0;var k=this.clone(b);for(i in e)if(null==k[i])k[i]=e[i];else if(c(e[i])||d(e[i]))j[i]?(h=[],h.push.apply(h,a(k[i])?k[i]:[k[i]]),h.push.apply(h,a(e[i])?e[i]:[e[i]]),k[i]=h):k[i]=e[i];else if(a(e[i]))h=[],a(k[i])&&h.push.apply(h,k[i]),h.push.apply(h,e[i]),k[i]=h;else if(f(e[i])){f(k[i])||(k[i]={});for(var l in e[i])k[i][l]=e[i][l]}return k},replace:function(a,b,c){var d=a,e=d;return b.replace(/([^\.])+/g,function(a,b,d,f){var g=a.match(/([^\[0-9]+){1}(\[)([0-9+])/),h=d+a.length>=f.length,i=function(){return e[g[1]]||function(){return e[g[1]]=[],e[g[1]]}()};if(h)g?i()[g[3]]=c:e[a]=c;else if(g){var j=i();e=j[g[3]]||function(){return j[g[3]]={},j[g[3]]}()}else e=e[a]||function(){return e[a]={},e[a]}()}),a},functionChain:function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d][0][c[d][1]].apply(c[d][0],c[d][2]);if(e===b)return e}return a},populate:function(b,d){var e=function(a){var b=a.match(/(\${.*?})/g);if(null!=b)for(var c=0;c<b.length;c++){var e=d[b[c].substring(2,b[c].length-1)]||"";null!=e&&(a=a.replace(b[c],e))}return a},g=function(b){if(null!=b){if(c(b))return e(b);if(a(b)){for(var d=[],h=0;h<b.length;h++)d.push(g(b[h]));return d}if(f(b)){var i={};for(var j in b)i[j]=g(b[j]);return i}return b}};return g(b)},convertStyle:function(a,b){if("transparent"===a)return a;var c=a,d=function(a){return 1==a.length?"0"+a:a},e=function(a){return d(Number(a).toString(16))},f=/(rgb[a]?\()(.*)(\))/;if(a.match(f)){var g=a.match(f)[2].split(",");c="#"+e(g[0])+e(g[1])+e(g[2]),b||4!=g.length||(c+=e(g[3]))}return c},findWithFunction:function(a,b){if(a)for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1},indexOf:function(a,b){return a.indexOf?a.indexOf(b):k.findWithFunction(a,function(a){return a==b})},removeWithFunction:function(a,b){var c=k.findWithFunction(a,b);return c>-1&&a.splice(c,1),-1!=c},remove:function(a,b){var c=k.indexOf(a,b);return c>-1&&a.splice(c,1),-1!=c},addWithFunction:function(a,b,c){-1==k.findWithFunction(a,c)&&a.push(b)},addToList:function(a,b,c,d){var e=a[b];return null==e&&(e=[],a[b]=e),e[d?"unshift":"push"](c),e},extend:function(b,c){var d;for(c=a(c)?c:[c],d=0;d<c.length;d++)for(var e in c[d].prototype)c[d].prototype.hasOwnProperty(e)&&(b.prototype[e]=c[d].prototype[e]);var f=function(a,b){return function(){for(d=0;d<c.length;d++)c[d].prototype[a]&&c[d].prototype[a].apply(this,arguments);return b.apply(this,arguments)}},g=function(a){for(var c in a)b.prototype[c]=f(c,a[c])};if(arguments.length>2)for(d=2;d<arguments.length;d++)g(arguments[d]);return b},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)})},logEnabled:!0,log:function(){if(k.logEnabled&&"undefined"!=typeof console)try{var a=arguments[arguments.length-1];console.log(a)}catch(b){}},wrap:function(a,b,c){return a=a||function(){},b=b||function(){},function(){var d=null;try{d=b.apply(this,arguments)}catch(e){k.log("jsPlumb function failed : "+e)}if(null==c||d!==c)try{d=a.apply(this,arguments)}catch(e){k.log("wrapped function failed : "+e)}return d}}};k.EventGenerator=function(){var a={},b=!1,c={ready:!0};this.bind=function(b,c,d){return k.addToList(a,b,c,d),this},this.fire=function(d,e,f){if(!b&&a[d]){var g=a[d].length,h=0,i=!1,j=null;if(!this.shouldFireEvent||this.shouldFireEvent(d,e,f))for(;!i&&g>h&&j!==!1;){if(c[d])a[d][h].apply(this,[e,f]);else try{j=a[d][h].apply(this,[e,f])}catch(l){k.log("jsPlumb: fire failed for event "+d+" : "+l)}h++,(null==a||null==a[d])&&(i=!0)}}return this},this.unbind=function(b){return b?delete a[b]:a={},this},this.getListener=function(b){return a[b]},this.setSuspendEvents=function(a){b=a},this.isSuspendEvents=function(){return b},this.cleanupListeners=function(){for(var b in a)a[b]=null}},k.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})}.call(this),function(){"use strict";var a=this,b=a.jsPlumbUtil;b.ieVersion=/MSIE\s([\d.]+)/.test(navigator.userAgent)?new Number(RegExp.$1):-1,b.oldIE=b.ieVersion>-1&&b.ieVersion<9,b.matchesSelector=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e<d.length;e++)if(d[e]===a)return!0;return!1},b.consume=function(a,b){a.stopPropagation?a.stopPropagation():a.returnValue=!1,!b&&a.preventDefault&&a.preventDefault()},b.sizeElement=function(a,b,c,d,e){a&&(a.style.height=e+"px",a.height=e,a.style.width=d+"px",a.width=d,a.style.left=b+"px",a.style.top=c+"px")}}.call(this),function(){var a=this,b=!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),c=function(){if(void 0===c.vml){var a=document.body.appendChild(document.createElement("div"));a.innerHTML='<v:shape id="vml_flag1" adj="1" />';var b=a.firstChild;null!=b&&null!=b.style?(b.style.behavior="url(#default#VML)",c.vml=b?"object"==typeof b.adj:!0):c.vml=!1,a.parentNode.removeChild(a)}return c.vml},d=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a}(),e=d>-1&&9>d,f=function(a,b){if(null==a)return[0,0];var c=k(a),d=j(c,0);return[d[b+"X"],d[b+"Y"]]},g=function(a){return null==a?[0,0]:e?[a.clientX+document.documentElement.scrollLeft,a.clientY+document.documentElement.scrollTop]:f(a,"page")},h=function(a){return f(a,"screen")},i=function(a){return f(a,"client")},j=function(a,b){return a.item?a.item(b):a[b]},k=function(a){return a.touches&&a.touches.length>0?a.touches:a.changedTouches&&a.changedTouches.length>0?a.changedTouches:a.targetTouches&&a.targetTouches.length>0?a.targetTouches:[a]},l=function(a){var b={},c=[],d={},e={},f={};this.register=function(g){var h=a.getId(g),i=jsPlumbAdapter.getOffset(g,a);b[h]||(b[h]=g,c.push(g),d[h]={});var j=function(b){if(b)for(var c=0;c<b.childNodes.length;c++)if(3!=b.childNodes[c].nodeType&&8!=b.childNodes[c].nodeType){var g=jsPlumb.getElementObject(b.childNodes[c]),k=a.getId(b.childNodes[c],null,!0);if(k&&e[k]&&e[k]>0){var l=jsPlumbAdapter.getOffset(g,a);d[h][k]={id:k,offset:{left:l.left-i.left,top:l.top-i.top}},f[k]=h}j(b.childNodes[c])}};j(g)},this.updateOffsets=function(b){if(null!=b){var c=jsPlumb.getDOMElement(b),e=a.getId(c),g=d[e],h=jsPlumbAdapter.getOffset(c,a);if(g)for(var i in g){var j=jsPlumb.getElementObject(i),k=jsPlumbAdapter.getOffset(j,a);d[e][i]={id:i,offset:{left:k.left-h.left,top:k.top-h.top}},f[i]=e}}},this.endpointAdded=function(c){var g=document.body,h=a.getId(c),i=jsPlumbAdapter.getOffset(c,a),j=c.parentNode;for(e[h]=e[h]?e[h]+1:1;null!=j&&j!=g;){var k=a.getId(j,null,!0);if(k&&b[k]){var l=jsPlumbAdapter.getOffset(j,a);null==d[k][h]&&(d[k][h]={id:h,offset:{left:i.left-l.left,top:i.top-l.top}},f[h]=k);break}j=j.parentNode}},this.endpointDeleted=function(a){if(e[a.elementId]&&(e[a.elementId]--,e[a.elementId]<=0))for(var b in d)d[b]&&(delete d[b][a.elementId],delete f[a.elementId])},this.changeId=function(a,b){d[b]=d[a],d[a]={},f[b]=f[a],f[a]=null},this.getElementsForDraggable=function(a){return d[a]},this.elementRemoved=function(a){var b=f[a];b&&(delete d[b][a],delete f[a])},this.reset=function(){b={},c=[],d={},e={}},this.dragEnded=function(b){var c=a.getId(b),d=f[c];d&&this.updateOffsets(d)},this.setParent=function(b,c,e,g){var h=f[c];if(h){d[g]||(d[g]={}),d[g][c]=d[h][c],delete d[h][c];var i=jsPlumbAdapter.getOffset(e,a),j=jsPlumbAdapter.getOffset(b,a);d[g][c].offset={left:j.left-i.left,top:j.top-i.top},f[c]=g}},this.getDragAncestor=function(b){var c=jsPlumb.getDOMElement(b),d=a.getId(c),e=f[d];return e?jsPlumb.getDOMElement(e):null}};window.console||(window.console={time:function(){},timeEnd:function(){},group:function(){},groupEnd:function(){},log:function(){}});var m=function(a){return null==a?null:a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},n=function(a,b){b=m(b),"undefined"!=typeof a.className.baseVal?a.className.baseVal=b:a.className=b},o=function(a){return"undefined"==typeof a.className.baseVal?a.className:a.className.baseVal},p=function(a,b,c){for(var d=jsPlumbUtil.isArray(c)?c:c.split(/\s+/),e=o(a),f=e.split(/\s+/),g=0;g<d.length;g++)if(b)-1==jsPlumbUtil.indexOf(f,d[g])&&f.push(d[g]);else{var h=jsPlumbUtil.indexOf(f,d[g]);-1!=h&&f.splice(h,1)}n(a,f.join(" "))},q=function(a,b){if(null!=a)if("string"==typeof a)b(jsPlumb.getDOMElement(a));else if(null!=a.length)for(var c=0;c<a.length;c++)b(jsPlumb.getDOMElement(a[c]));else b(a)};window.jsPlumbAdapter={headless:!1,pageLocation:g,screenLocation:h,clientLocation:i,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},appendToRoot:function(a){document.body.appendChild(a)},getRenderModes:function(){return["svg","vml"]},isRenderModeAvailable:function(a){return{svg:b,vml:c()}[a]},getDragManager:function(a){return new l(a)},setRenderMode:function(a){var b;if(a){a=a.toLowerCase();var c=this.isRenderModeAvailable("svg"),d=this.isRenderModeAvailable("vml");"svg"===a&&c?b="svg":d&&(b="vml")}return b},addClass:function(a,b){q(a,function(a){p(a,!0,b)})},hasClass:function(a,b){return a=jsPlumb.getDOMElement(a),a.classList?a.classList.contains(b):-1!=o(a).indexOf(b)},removeClass:function(a,b){q(a,function(a){p(a,!1,b)})},setClass:function(a,b){q(a,function(a){n(a,b)})},setPosition:function(a,b){a.style.left=b.left+"px",a.style.top=b.top+"px"},getPosition:function(a){var b=function(b){var c=a.style[b];return c?c.substring(0,c.length-2):0};return{left:b("left"),top:b("top")}},getOffset:function(a,b,c){a=jsPlumb.getDOMElement(a);for(var d=b.getContainer(),e=a.offsetLeft,f=a.offsetTop,g=c||null!=d&&a.offsetParent!=d?a.offsetParent:null;null!=g;)e+=g.offsetLeft,f+=g.offsetTop,g=c?g.offsetParent:g.offsetParent==d?null:g.offsetParent;return{left:e,top:f}},getPositionOnElement:function(a,b,c){var d="undefined"!=typeof b.getBoundingClientRect?b.getBoundingClientRect():{left:0,top:0,width:0,height:0},e=document.body,f=document.documentElement,g=(b.offsetParent,window.pageYOffset||f.scrollTop||e.scrollTop),h=window.pageXOffset||f.scrollLeft||e.scrollLeft,i=f.clientTop||e.clientTop||0,j=f.clientLeft||e.clientLeft||0,k=0,l=0,m=d.top+g-i+k*c,n=d.left+h-j+l*c,o=jsPlumbAdapter.pageLocation(a),p=d.width||b.offsetWidth*c,q=d.height||b.offsetHeight*c,r=(o[0]-n)/p,s=(o[1]-m)/q;return[r,s]},getAbsolutePosition:function(a){var b=function(b){var c=a.style[b];return c?parseFloat(c.substring(0,c.length-2)):void 0};return[b("left"),b("top")]},setAbsolutePosition:function(b,c,d,e){d?a.jsPlumb.animate(b,{left:"+="+(c[0]-d[0]),top:"+="+(c[1]-d[1])},e):(b.style.left=c[0]+"px",b.style.top=c[1]+"px")}}}.call(this),function(){"use strict";var a=jsPlumbUtil,b=function(a,b,c){return jsPlumbAdapter.getOffset(a,b,c)},c=function(){return""+(new Date).getTime()},d=function(a){if(a._jsPlumb.paintStyle&&a._jsPlumb.hoverPaintStyle){var b={};u.extend(b,a._jsPlumb.paintStyle),u.extend(b,a._jsPlumb.hoverPaintStyle),delete a._jsPlumb.hoverPaintStyle,b.gradient&&a._jsPlumb.paintStyle.fillStyle&&delete b.gradient,a._jsPlumb.hoverPaintStyle=b}},e=["click","dblclick","mouseenter","mouseout","mousemove","mousedown","mouseup","contextmenu"],f={mouseout:"mouseleave",mouseexit:"mouseleave"},g=function(a,b,c,d){var e=a.getAttachedElements();if(e)for(var f=0,g=e.length;g>f;f++)d&&d==e[f]||e[f].setHover(b,!0,c)},h=function(a){return null==a?null:a.split(" ")},i=function(b,c,d){if(b.getDefaultType){for(var e=b.getTypeDescriptor(),f=a.merge({},b.getDefaultType()),g=0,h=b._jsPlumb.types.length;h>g;g++)f=a.merge(f,b._jsPlumb.instance.getType(b._jsPlumb.types[g],e),["cssClass"]);c&&(f=a.populate(f,c)),b.applyType(f,d),d||b.repaint()}},j=window.jsPlumbUIComponent=function(b){jsPlumbUtil.EventGenerator.apply(this,arguments);var c=this,d=arguments,g=c.idPrefix,h=g+(new Date).getTime();if(this._jsPlumb={instance:b._jsPlumb,parameters:b.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:b.beforeDetach,beforeDrop:b.beforeDrop,overlayPlacements:[],hoverClass:b.hoverClass||b._jsPlumb.Defaults.HoverClass,types:[]},this.getId=function(){return h},b.events)for(var i in b.events)c.bind(i,b.events[i]);this.clone=function(){var a={};return this.constructor.apply(a,d),a}.bind(this),this.isDetachAllowed=function(b){var c=!0;if(this._jsPlumb.beforeDetach)try{c=this._jsPlumb.beforeDetach(b)}catch(d){a.log("jsPlumb: beforeDetach callback failed",d)}return c},this.isDropAllowed=function(b,c,d,e,f,g,h){var i=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f,source:g,target:h});if(this._jsPlumb.beforeDrop)try{i=this._jsPlumb.beforeDrop({sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f,source:g,target:h})}catch(j){a.log("jsPlumb: beforeDrop callback failed",j)}return i};var j=[],k=function(a,b,c){j.push([a,b,c]),a.bind(b,c)},l=[],m=function(a,b,c,d){var e=f[c]||c,g=function(a){d&&d(a)===!1||b.fire(e,b,a)};l.push([a,c,g,b]),b._jsPlumb.instance.on(a,c,g)},n=function(a,b,c,d){f[b]||b,d._jsPlumb.instance.off(a,b,c)};this.setListenerComponent=function(a){for(var b=0;b<l.length;b++)l[b][3]=a},this.bindListeners=function(a,b,c){k(a,"click",function(a,c){b.fire("click",b,c)}),k(a,"dblclick",function(a,c){b.fire("dblclick",b,c)}),k(a,"contextmenu",function(a,c){b.fire("contextmenu",b,c)}),k(a,"mouseleave",function(a,d){b.isHover()&&(c(!1),b.fire("mouseleave",b,d))}),k(a,"mouseenter",function(a,d){b.isHover()||(c(!0),b.fire("mouseenter",b,d))}),k(a,"mousedown",function(a,c){b.fire("mousedown",b,c)}),k(a,"mouseup",function(a,c){b.fire("mouseup",b,c)})},this.unbindListeners=function(){for(var a=0;a<j.length;a++){var b=j[a];b[0].unbind(b[1],b[2])}j=null},this.attachListeners=function(a,b,c){c=c||{};for(var d=0,f=e.length;f>d;d++)m(a,b,e[d],c[e[d]])},this.detachListeners=function(){for(var a=0;a<l.length;a++)n(l[a][0],l[a][1],l[a][2],l[a][3]);l=null},this.reattachListenersForElement=function(a){if(arguments.length>1){for(var b=0,c=e.length;c>b;b++)n(a,e[b]);for(b=1,c=arguments.length;c>b;b++)this.attachListeners(a,arguments[b])}}},k=function(a,b){var c=a._jsPlumb.types[b],d=a._jsPlumb.instance.getType(c,a.getTypeDescriptor());null!=d&&d.cssClass&&a.canvas&&a._jsPlumb.instance.removeClass(a.canvas,d.cssClass)};jsPlumbUtil.extend(j,jsPlumbUtil.EventGenerator,{getParameter:function(a){return this._jsPlumb.parameters[a]},setParameter:function(a,b){this._jsPlumb.parameters[a]=b},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(a){this._jsPlumb.parameters=a},addClass:function(a){jsPlumbAdapter.addClass(this.canvas,a)},removeClass:function(a){jsPlumbAdapter.removeClass(this.canvas,a)},setType:function(a,b,c){this.clearTypes(),this._jsPlumb.types=h(a)||[],i(this,b,c)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(a,b){i(this,a,b)},hasType:function(a){return-1!=jsPlumbUtil.indexOf(this._jsPlumb.types,a)},addType:function(a,b,c){var d=h(a),e=!1;if(null!=d){for(var f=0,g=d.length;g>f;f++)this.hasType(d[f])||(this._jsPlumb.types.push(d[f]),e=!0);e&&i(this,b,c)}},removeType:function(b,c){var d=h(b),e=!1,f=function(b){var c=a.indexOf(this._jsPlumb.types,b);return-1!=c?(k(this,c),this._jsPlumb.types.splice(c,1),!0):!1}.bind(this);if(null!=d){for(var g=0,j=d.length;j>g;g++)e=f(d[g])||e;e&&i(this,null,c)}},clearTypes:function(a){for(var b=this._jsPlumb.types.length,c=0;b>c;c++)k(this,0),this._jsPlumb.types.splice(0,1);i(this,{},a)},toggleType:function(a,b,c){var d=h(a);if(null!=d){for(var e=0,f=d.length;f>e;e++){var g=jsPlumbUtil.indexOf(this._jsPlumb.types,d[e]);-1!=g?(k(this,g),this._jsPlumb.types.splice(g,1)):this._jsPlumb.types.push(d[e])}i(this,b,c)}},applyType:function(a,b){if(this.setPaintStyle(a.paintStyle,b),this.setHoverPaintStyle(a.hoverPaintStyle,b),a.parameters)for(var c in a.parameters)this.setParameter(c,a.parameters[c])},setPaintStyle:function(a,b){this._jsPlumb.paintStyle=a,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,d(this),b||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(a,b){this._jsPlumb.hoverPaintStyle=a,d(this),b||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},cleanup:function(){this.unbindListeners(),this.detachListeners()},destroy:function(){this.cleanupListeners(),this.clone=null,this._jsPlumb=null},isHover:function(){return this._jsPlumb.hover},setHover:function(a,b,d){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){if(this._jsPlumb.hover=a,null!=this.canvas){if(null!=this._jsPlumb.instance.hoverClass){var e=a?"addClass":"removeClass";this._jsPlumb.instance[e](this.canvas,this._jsPlumb.instance.hoverClass)}null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[e](this.canvas,this._jsPlumb.hoverClass)}null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=a?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(d=d||c(),this.repaint({timestamp:d,recalc:!1}))),this.getAttachedElements&&!b&&g(this,a,c(),this)}}});var l="__label",m=function(a,b){for(var c=-1,d=0,e=a._jsPlumb.overlays.length;e>d;d++)if(b===a._jsPlumb.overlays[d].id){c=d;break}return c},n=function(a,b){var c={cssClass:b.cssClass,labelStyle:a.labelStyle,id:l,component:a,_jsPlumb:a._jsPlumb.instance},d=u.extend(c,b);return new(u.Overlays[a._jsPlumb.instance.getRenderMode()].Label)(d)},o=function(b,c){var d=null;if(a.isArray(c)){var e=c[0],f=u.extend({component:b,_jsPlumb:b._jsPlumb.instance},c[1]);3==c.length&&u.extend(f,c[2]),d=new(u.Overlays[b._jsPlumb.instance.getRenderMode()][e])(f)}else d=c.constructor==String?new(u.Overlays[b._jsPlumb.instance.getRenderMode()][c])({component:b,_jsPlumb:b._jsPlumb.instance}):c;b._jsPlumb.overlays.push(d)},p=function(a,b){var c=a.defaultOverlayKeys||[],d=b.overlays,e=function(b){return a._jsPlumb.instance.Defaults[b]||u.Defaults[b]||[]};d||(d=[]);for(var f=0,g=c.length;g>f;f++)d.unshift.apply(d,e(c[f]));return d},q=window.OverlayCapableJsPlumbUIComponent=function(a){j.apply(this,arguments),this._jsPlumb.overlays=[];var b=p(this,a);if(b)for(var c=0,d=b.length;d>c;c++)o(this,b[c]);if(a.label){var e=a.labelLocation||this.defaultLabelLocation||.5,f=a.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle;this._jsPlumb.overlays.push(n(this,{label:a.label,location:e,labelStyle:f}))}this.setListenerComponent=function(a){if(this._jsPlumb)for(var b=0;b<this._jsPlumb.overlays.length;b++)this._jsPlumb.overlays[b].setListenerComponent(a)}};jsPlumbUtil.extend(q,j,{applyType:function(a,b){if(this.removeAllOverlays(b),a.overlays)for(var c=0,d=a.overlays.length;d>c;c++)this.addOverlay(a.overlays[c],!0)},setHover:function(a){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var b=0,c=this._jsPlumb.overlays.length;c>b;b++)this._jsPlumb.overlays[b][a?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(a,b){o(this,a),b||this.repaint()},getOverlay:function(a){var b=m(this,a);return b>=0?this._jsPlumb.overlays[b]:null},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(a){var b=this.getOverlay(a);b&&b.hide()},hideOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b>a;a++)this._jsPlumb.overlays[a].hide()},showOverlay:function(a){var b=this.getOverlay(a);b&&b.show()},showOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b>a;a++)this._jsPlumb.overlays[a].show()},removeAllOverlays:function(a){for(var b=0,c=this._jsPlumb.overlays.length;c>b;b++)this._jsPlumb.overlays[b].cleanup&&this._jsPlumb.overlays[b].cleanup();this._jsPlumb.overlays.splice(0,this._jsPlumb.overlays.length),this._jsPlumb.overlayPositions=null,a||this.repaint()},removeOverlay:function(a){var b=m(this,a);if(-1!=b){var c=this._jsPlumb.overlays[b];c.cleanup&&c.cleanup(),this._jsPlumb.overlays.splice(b,1),this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[a]}},removeOverlays:function(){for(var a=0,b=arguments.length;b>a;a++)this.removeOverlay(arguments[a])},moveParent:function(a){this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),a.appendChild(this.bgCanvas)),this.canvas.parentNode.removeChild(this.canvas),a.appendChild(this.canvas);for(var b=0;b<this._jsPlumb.overlays.length;b++)this._jsPlumb.overlays[b].isAppendedAtTopLevel&&(this._jsPlumb.overlays[b].canvas.parentNode.removeChild(this._jsPlumb.overlays[b].canvas),a.appendChild(this._jsPlumb.overlays[b].canvas))},getLabel:function(){var a=this.getOverlay(l);return null!=a?a.getLabel():null},getLabelOverlay:function(){return this.getOverlay(l)},setLabel:function(a){var b=this.getOverlay(l);if(b)a.constructor==String||a.constructor==Function?b.setLabel(a):(a.label&&b.setLabel(a.label),a.location&&b.setLocation(a.location));else{var c=a.constructor==String||a.constructor==Function?{label:a}:a;b=n(this,c),this._jsPlumb.overlays.push(b)}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(){for(var a=0;a<this._jsPlumb.overlays.length;a++)this._jsPlumb.overlays[a].cleanup(),this._jsPlumb.overlays[a].destroy();this._jsPlumb.overlays.splice(0),this._jsPlumb.overlayPositions=null},setVisible:function(a){this[a?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(a,b){this._jsPlumb.overlayPositions=this._jsPlumb.overlayPositions||{},this._jsPlumb.overlayPositions[a.id]=b},getAbsoluteOverlayPosition:function(a){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[a.id]:null}});var r=0,s=function(){var a=r+1;return r++,a},t=window.jsPlumbInstance=function(d){this.Defaults={Anchor:"BottomCenter",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:8,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},d&&u.extend(this.Defaults,d),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},jsPlumbUtil.EventGenerator.apply(this);var e=this,f=s(),g=e.bind,h={},i=1,k=function(a){var b=e.getDOMElement(a);return{el:b,id:jsPlumbUtil.isString(a)&&null==b?a:Y(b)}};this.getInstanceIndex=function(){return f},this.setZoom=function(a,b){return jsPlumbUtil.oldIE||(i=a,e.fire("zoom",i),b&&e.repaintEverything()),!jsPlumbUtil.oldIE},this.getZoom=function(){return i};for(var l in this.Defaults)h[l]=this.Defaults[l];var m;this.setContainer=function(a){a=this.getDOMElement(a),this.select().each(function(b){b.moveParent(a)}),this.selectEndpoints().each(function(b){b.moveParent(a)}),m=a},this.getContainer=function(){return m},this.bind=function(a,b){"ready"===a&&o?b():g.apply(e,[a,b])},e.importDefaults=function(a){for(var b in a)e.Defaults[b]=a[b];return a.Container&&this.setContainer(a.Container),e},e.restoreDefaults=function(){return e.Defaults=u.extend({},h),e};var n=null,o=!1,p=[],q={},r={},t={},v={},w={},x={},y=!1,z=[],A=!1,B=null,C=this.Defaults.Scope,D=null,E=1,F=function(){return""+E++},G=function(a,b){m?m.appendChild(a):b?u.getDOMElement(b).appendChild(a):e.appendToRoot(a)},H=function(a){return a._nodes?a._nodes:a},I=function(a,b,d,f){if(!jsPlumbAdapter.headless&&!A){var g=Y(a),h=e.dragManager.getElementsForDraggable(g);null==d&&(d=c());var i=W({elId:g,offset:b,recalc:!1,timestamp:d});if(h)for(var j in h)W({elId:h[j].id,offset:{left:i.o.left+h[j].offset.left,top:i.o.top+h[j].offset.top},recalc:!1,timestamp:d});if(e.anchorManager.redraw(g,b,d,null,f),h)for(var k in h)e.anchorManager.redraw(h[k].id,b,d,h[k].offset,f,!0)}},J=function(b,c){var d,f,g,h=null;if(a.isArray(b)){h=[];for(var i=0,j=b.length;j>i;i++)d=e.getElementObject(b[i]),g=e.getDOMElement(d),f=e.getAttribute(g,"id"),h.push(c.apply(e,[g,f]))}else d=e.getDOMElement(b),f=e.getId(d),h=c.apply(e,[d,f]);return h},K=function(a){return r[a]},L=function(b,c,d){if(!jsPlumbAdapter.headless){var f=null==c?!1:c;if(f&&u.isDragSupported(b,e)&&!u.isAlreadyDraggable(b,e)){var g=d||e.Defaults.DragOptions;g=u.extend({},g);var h=u.dragEvents.drag,i=u.dragEvents.stop,j=u.dragEvents.start,k=e.getDOMElement(b),l=e.dragManager.getDragAncestor(k),m={left:0,top:0},n=m,o=!1;g[j]=a.wrap(g[j],function(){return n=null!=l?jsPlumbAdapter.getOffset(l,e):m,e.setHoverSuspended(!0),e.select({source:b}).addClass(e.elementDraggingClass+" "+e.sourceElementDraggingClass,!0),e.select({target:b}).addClass(e.elementDraggingClass+" "+e.targetElementDraggingClass,!0),e.setConnectionBeingDragged(!0),g.canDrag?d.canDrag():void 0},!1),g[h]=a.wrap(g[h],function(){var a=e.getUIPosition(arguments,e.getZoom());a.left+=n.left,a.top+=n.top,I(b,a,null,!0),o&&e.addClass(b,"jsPlumb_dragged"),o=!0}),g[i]=a.wrap(g[i],function(){var a=e.getUIPosition(arguments,e.getZoom(),!0);I(b,a),o=!1,e.removeClass(b,"jsPlumb_dragged"),e.setHoverSuspended(!1),e.select({source:b}).removeClass(e.elementDraggingClass+" "+e.sourceElementDraggingClass,!0),e.select({target:b}).removeClass(e.elementDraggingClass+" "+e.targetElementDraggingClass,!0),e.setConnectionBeingDragged(!1),e.dragManager.dragEnded(b)});var p=Y(b);x[p]=!0;var q=x[p];g.disabled=null==q?!1:!q,e.initDraggable(b,g,!1),e.dragManager.register(b)}}},M=function(b,c){var d=u.extend({},b);if(c&&u.extend(d,c),d.source&&(d.source.endpoint?d.sourceEndpoint=d.source:d.source=e.getDOMElement(d.source)),d.target&&(d.target.endpoint?d.targetEndpoint=d.target:d.target=e.getDOMElement(d.target)),b.uuids&&(d.sourceEndpoint=K(b.uuids[0]),d.targetEndpoint=K(b.uuids[1])),d.sourceEndpoint&&d.sourceEndpoint.isFull())return void a.log(e,"could not add connection; source endpoint is full");if(d.targetEndpoint&&d.targetEndpoint.isFull())return void a.log(e,"could not add connection; target endpoint is full");if(!d.type&&d.sourceEndpoint&&(d.type=d.sourceEndpoint.connectionType),d.sourceEndpoint&&d.sourceEndpoint.connectorOverlays){d.overlays=d.overlays||[];for(var f=0,g=d.sourceEndpoint.connectorOverlays.length;g>f;f++)d.overlays.push(d.sourceEndpoint.connectorOverlays[f])}!d["pointer-events"]&&d.sourceEndpoint&&d.sourceEndpoint.connectorPointerEvents&&(d["pointer-events"]=d.sourceEndpoint.connectorPointerEvents);var h,i,j,k=function(a,b){var c=u.extend({},a);for(var d in b)b[d]&&(c[d]=b[d]);return c},l=function(a,b,c){return e.addEndpoint(a,k(i.def,{anchor:d.anchors?d.anchors[c]:d.anchor,endpoint:d.endpoints?d.endpoints[c]:d.endpoint,paintStyle:d.endpointStyles?d.endpointStyles[c]:d.endpointStyle,hoverPaintStyle:d.endpointHoverStyles?d.endpointHoverStyles[c]:d.endpointHoverStyle}))};if(d.target&&!d.target.endpoint&&!d.targetEndpoint&&!d.newConnection&&(h=Y(d.target),i=this.targetEndpointDefinitions[h])){if(!i.enabled)return;i.isTarget=!0,j=null!=i.endpoint&&i.endpoint._jsPlumb?i.endpoint:l(d.target,i.def,1),i.uniqueEndpoint&&(i.endpoint=j),d.targetEndpoint=j,j._doNotDeleteOnDetach=!1,j._deleteOnDetach=!0}if(d.source&&!d.source.endpoint&&!d.sourceEndpoint&&!d.newConnection&&(h=Y(d.source),i=this.sourceEndpointDefinitions[h])){if(!i.enabled)return;j=null!=i.endpoint&&i.endpoint._jsPlumb?i.endpoint:l(d.source,i.def,0),i.uniqueEndpoint&&(i.endpoint=j),d.sourceEndpoint=j,j._doNotDeleteOnDetach=!1,j._deleteOnDetach=!0}return d}.bind(e),N=function(a){var b=e.Defaults.ConnectionType||e.getDefaultConnectionType();e.Defaults.EndpointType||u.Endpoint,a._jsPlumb=e,a.newConnection=N,a.newEndpoint=Q,a.endpointsByUUID=r,a.endpointsByElement=q,a.finaliseConnection=O;var c=new b(a);return c.id="con_"+F(),P("click","click",c),P("dblclick","dblclick",c),P("contextmenu","contextmenu",c),c.isDetachable()&&(c.endpoints[0].initDraggable(),c.endpoints[1].initDraggable()),c},O=function(a,b,c,d){if(b=b||{},a.suspendedEndpoint||p.push(a),a.endpoints[0].isTemporarySource=!1,(null==a.suspendedEndpoint||d)&&e.anchorManager.newConnection(a),I(a.source),!b.doNotFireConnectionEvent&&b.fireEvent!==!1){var f={connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]};
e.fire("connection",f,c)}},P=function(a,b,c){c.bind(a,function(a,d){e.fire(b,c,d)})},Q=function(a){var b=e.Defaults.EndpointType||u.Endpoint,c=u.extend({},a);c._jsPlumb=e,c.newConnection=N,c.newEndpoint=Q,c.endpointsByUUID=r,c.endpointsByElement=q,c.finaliseConnection=O,c.fireDetachEvent=_,c.fireMoveEvent=ab,c.floatingConnections=w,c.elementId=Y(c.source);var d=new b(c);return d.id="ep_"+F(),P("click","endpointClick",d),P("dblclick","endpointDblClick",d),P("contextmenu","contextmenu",d),jsPlumbAdapter.headless||e.dragManager.endpointAdded(c.source),d},R=function(a,b,c){var d=q[a];if(d&&d.length)for(var e=0,f=d.length;f>e;e++){for(var g=0,h=d[e].connections.length;h>g;g++){var i=b(d[e].connections[g]);if(i)return}c&&c(d[e])}},S=function(a,b){return J(a,function(a,c){x[c]=b,this.isDragSupported(a)&&this.setElementDraggable(a,b)})},T=function(a,b,c){b="block"===b;var d=null;c&&(d=b?function(a){a.setVisible(!0,!0,!0)}:function(a){a.setVisible(!1,!0,!0)});var e=k(a);R(e.id,function(a){if(b&&c){var d=a.sourceId===e.id?1:0;a.endpoints[d].isVisible()&&a.setVisible(!0)}else a.setVisible(b)},d)},U=function(a){return J(a,function(a,b){var c=null==x[b]?!1:x[b];return c=!c,x[b]=c,this.setDraggable(a,c),c})},V=function(a,b){var c=null;b&&(c=function(a){var b=a.isVisible();a.setVisible(!b)}),R(a,function(a){var b=a.isVisible();a.setVisible(!b)},c)},W=this.updateOffset=function(a){var c,d=a.timestamp,f=a.recalc,g=a.offset,h=a.elId;return A&&!d&&(d=B),!f&&d&&d===v[h]?{o:a.offset||t[h],s:z[h]}:(f||!g?(c=document.getElementById(h),null!=c&&(z[h]=e.getSize(c),t[h]=b(c,e),v[h]=d)):(t[h]=g,null==z[h]&&(c=document.getElementById(h),null!=c&&(z[h]=e.getSize(c))),v[h]=d),t[h]&&!t[h].right&&(t[h].right=t[h].left+z[h][0],t[h].bottom=t[h].top+z[h][1],t[h].width=z[h][0],t[h].height=z[h][1],t[h].centerx=t[h].left+t[h].width/2,t[h].centery=t[h].top+t[h].height/2),{o:t[h],s:z[h]})},X=function(a){var b=t[a];return b?{o:b,s:z[a]}:W({elId:a})},Y=function(a,b,c){if(jsPlumbUtil.isString(a))return a;if(null==a)return null;var d=e.getAttribute(a,"id");return d&&"undefined"!==d||(2==arguments.length&&void 0!==arguments[1]?d=b:(1==arguments.length||3==arguments.length&&!arguments[2])&&(d="jsPlumb_"+f+"_"+F()),c||e.setAttribute(a,"id",d)),d};this.setConnectionBeingDragged=function(a){y=a},this.isConnectionBeingDragged=function(){return y},this.connectorClass="_jsPlumb_connector",this.hoverClass="_jsPlumb_hover",this.endpointClass="_jsPlumb_endpoint",this.endpointConnectedClass="_jsPlumb_endpoint_connected",this.endpointFullClass="_jsPlumb_endpoint_full",this.endpointDropAllowedClass="_jsPlumb_endpoint_drop_allowed",this.endpointDropForbiddenClass="_jsPlumb_endpoint_drop_forbidden",this.overlayClass="_jsPlumb_overlay",this.draggingClass="_jsPlumb_dragging",this.elementDraggingClass="_jsPlumb_element_dragging",this.sourceElementDraggingClass="_jsPlumb_source_element_dragging",this.targetElementDraggingClass="_jsPlumb_target_element_dragging",this.endpointAnchorClassPrefix="_jsPlumb_endpoint_anchor",this.hoverSourceClass="_jsPlumb_source_hover",this.hoverTargetClass="_jsPlumb_target_hover",this.dragSelectClass="_jsPlumb_drag_select",this.Anchors={},this.Connectors={svg:{},vml:{}},this.Endpoints={svg:{},vml:{}},this.Overlays={svg:{},vml:{}},this.ConnectorRenderers={},this.SVG="svg",this.VML="vml",this.addEndpoint=function(b,c,d){d=d||{};var f=u.extend({},d);u.extend(f,c),f.endpoint=f.endpoint||e.Defaults.Endpoint,f.paintStyle=f.paintStyle||e.Defaults.EndpointStyle,b=H(b);for(var g=[],h=a.isArray(b)||null!=b.length&&!a.isString(b)?b:[b],i=0,j=h.length;j>i;i++){var k=e.getDOMElement(h[i]),l=Y(k);f.source=k,qb(f.source),W({elId:l,timestamp:B});var m=Q(f);f.parentAnchor&&(m.parentAnchor=f.parentAnchor),a.addToList(q,l,m);var n=t[l],o=z[l],p=m.anchor.compute({xy:[n.left,n.top],wh:o,element:m,timestamp:B}),r={anchorLoc:p,timestamp:B};A&&(r.recalc=!1),A||m.paint(r),g.push(m),m._doNotDeleteOnDetach=!0}return 1==g.length?g[0]:g},this.addEndpoints=function(b,c,d){for(var f=[],g=0,h=c.length;h>g;g++){var i=e.addEndpoint(b,c[g],d);a.isArray(i)?Array.prototype.push.apply(f,i):f.push(i)}return f},this.animate=function(b,c,d){d=d||{};var f=this.getElementObject(b),g=this.getDOMElement(b),h=Y(g),i=u.animEvents.step,j=u.animEvents.complete;d[i]=a.wrap(d[i],function(){e.repaint(h)}),d[j]=a.wrap(d[j],function(){e.repaint(h)}),e.doAnimate(f,c,d)},this.checkCondition=function(b,c){var d=e.getListener(b),f=!0;if(d&&d.length>0)try{for(var g=0,h=d.length;h>g;g++)f=f&&d[g](c)}catch(i){a.log(e,"cannot check condition ["+b+"]"+i)}return f},this.checkASyncCondition=function(b,c,d,f){var g=e.getListener(b);if(g&&g.length>0)try{g[0](c,d,f)}catch(h){a.log(e,"cannot asynchronously check condition ["+b+"]"+h)}},this.connect=function(a,b){var c,d=M(a,b);return d&&(qb(d.source),c=N(d),O(c,d)),c};var Z=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],$=function(a,b,c,d){var e,f,g,h=Z[c],i=a[h.elId],j=(a[h.el],a.endpoints[c]),k={index:c,originalSourceId:0===c?i:a.sourceId,newSourceId:a.sourceId,originalTargetId:1==c?i:a.targetId,newTargetId:a.targetId,connection:a};if(b.constructor==u.Endpoint)e=b,e.addConnection(a);else if(f=Y(b),g=this[h.epDefs][f],f===a[h.elId])e=null;else if(g){if(!g.enabled)return;e=null!=g.endpoint&&g.endpoint._jsPlumb?g.endpoint:this.addEndpoint(b,g.def),g.uniqueEndpoint&&(g.endpoint=e),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0,e.addConnection(a)}else e=a.makeEndpoint(0===c,b,f),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0;return null!=e&&(j.detachFromConnection(a),a.endpoints[c]=e,a[h.el]=e.element,a[h.elId]=e.elementId,k[0===c?"newSourceId":"newTargetId"]=e.elementId,ab(k),d||a.repaint()),k}.bind(this);this.setSource=function(a,b,c){var d=$(a,b,0,c);this.anchorManager.sourceChanged(d.originalSourceId,d.newSourceId,a)},this.setTarget=function(a,b,c){var d=$(a,b,1,c);this.anchorManager.updateOtherEndpoint(d.originalSourceId,d.originalTargetId,d.newTargetId,a)},this.deleteEndpoint=function(a,b){var c=e.setSuspendDrawing(!0),d="string"==typeof a?r[a]:a;return d&&e.deleteObject({endpoint:d}),c||e.setSuspendDrawing(!1,b),e},this.deleteEveryEndpoint=function(){var a=e.setSuspendDrawing(!0);for(var b in q){var c=q[b];if(c&&c.length)for(var d=0,f=c.length;f>d;d++)e.deleteEndpoint(c[d],!0)}return q={},r={},e.anchorManager.reset(),e.dragManager.reset(),a||e.setSuspendDrawing(!1),e};var _=function(a,b,c){var d=e.Defaults.ConnectionType||e.getDefaultConnectionType(),f=a.constructor==d,g=f?{connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]}:a;b&&e.fire("connectionDetached",g,c),e.anchorManager.connectionDetached(g)},ab=function(a,b){e.fire("connectionMoved",a,b)};this.unregisterEndpoint=function(a){a._jsPlumb.uuid&&(r[a._jsPlumb.uuid]=null),e.anchorManager.deleteEndpoint(a);for(var b in q){var c=q[b];if(c){for(var d=[],f=0,g=c.length;g>f;f++)c[f]!=a&&d.push(c[f]);q[b]=d}q[b].length<1&&delete q[b]}},this.detach=function(){if(0!==arguments.length){var a=e.Defaults.ConnectionType||e.getDefaultConnectionType(),b=arguments[0].constructor==a,c=2==arguments.length&&b?arguments[1]||{}:arguments[0],d=c.fireEvent!==!1,f=c.forceDetach,g=b?arguments[0]:c.connection;if(g)(f||jsPlumbUtil.functionChain(!0,!1,[[g.endpoints[0],"isDetachAllowed",[g]],[g.endpoints[1],"isDetachAllowed",[g]],[g,"isDetachAllowed",[g]],[e,"checkCondition",["beforeDetach",g]]]))&&g.endpoints[0].detach(g,!1,!0,d);else{var h=u.extend({},c);if(h.uuids)K(h.uuids[0]).detachFrom(K(h.uuids[1]),d);else if(h.sourceEndpoint&&h.targetEndpoint)h.sourceEndpoint.detachFrom(h.targetEndpoint);else{var i=Y(e.getDOMElement(h.source)),j=Y(e.getDOMElement(h.target));R(i,function(a){(a.sourceId==i&&a.targetId==j||a.targetId==i&&a.sourceId==j)&&e.checkCondition("beforeDetach",a)&&a.endpoints[0].detach(a,!1,!0,d)})}}}},this.detachAllConnections=function(a,b){b=b||{},a=e.getDOMElement(a);var c=Y(a),d=q[c];if(d&&d.length)for(var f=0,g=d.length;g>f;f++)d[f].detachAll(b.fireEvent!==!1);return e},this.detachEveryConnection=function(a){return a=a||{},e.doWhileSuspended(function(){for(var b in q){var c=q[b];if(c&&c.length)for(var d=0,e=c.length;e>d;d++)c[d].detachAll(a.fireEvent!==!1)}p.splice(0)}),e},this.deleteObject=function(a){var b={endpoints:{},connections:{},endpointCount:0,connectionCount:0},c=a.fireEvent!==!1,d=a.deleteAttachedObjects!==!1,f=function(a){if(null!=a&&null==b.connections[a.id]&&(null!=a._jsPlumb&&a.setHover(!1),b.connections[a.id]=a,b.connectionCount++,d))for(var c=0;c<a.endpoints.length;c++)a.endpoints[c]._deleteOnDetach&&g(a.endpoints[c])},g=function(a){if(null!=a&&null==b.endpoints[a.id]&&(null!=a._jsPlumb&&a.setHover(!1),b.endpoints[a.id]=a,b.endpointCount++,d))for(var c=0;c<a.connections.length;c++){var e=a.connections[c];f(e)}};a.connection?f(a.connection):g(a.endpoint);for(var h in b.connections){var i=b.connections[h];i._jsPlumb&&(jsPlumbUtil.removeWithFunction(p,function(a){return i.id==a.id}),_(i,c,a.originalEvent),i.endpoints[0].detachFromConnection(i),i.endpoints[1].detachFromConnection(i),i.cleanup(),i.destroy())}for(var j in b.endpoints){var k=b.endpoints[j];k._jsPlumb&&(e.unregisterEndpoint(k),k.cleanup(),k.destroy())}return b},this.draggable=function(a,b){var c,d,f;if("object"==typeof a&&a.length)for(c=0,d=a.length;d>c;c++)f=e.getDOMElement(a[c]),f&&L(f,!0,b);else if(a._nodes)for(c=0,d=a._nodes.length;d>c;c++)f=e.getDOMElement(a._nodes[c]),f&&L(f,!0,b);else f=e.getDOMElement(a),f&&L(f,!0,b);return e};var bb=function(a,b,c,d){for(var e=0,f=a.length;f>e;e++)a[e][b].apply(a[e],c);return d(a)},cb=function(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push([a[e][b].apply(a[e],c),a[e]]);return d},db=function(a,b,c){return function(){return bb(a,b,arguments,c)}},eb=function(a,b){return function(){return cb(a,b,arguments)}},fb=function(a,b){var c=[];if(a)if("string"==typeof a){if("*"===a)return a;c.push(a)}else if(b)c=a;else if(a.length)for(var d=0,e=a.length;e>d;d++)c.push(k(a[d]).id);else c.push(k(a).id);return c},gb=function(a,b,c){return"*"===a?!0:a.length>0?-1!=jsPlumbUtil.indexOf(a,b):!c};this.getConnections=function(a,b){a?a.constructor==String&&(a={scope:a}):a={};for(var c=a.scope||e.getDefaultScope(),d=fb(c,!0),f=fb(a.source),g=fb(a.target),h=!b&&d.length>1?{}:[],i=function(a,c){if(!b&&d.length>1){var e=h[a];null==e&&(e=h[a]=[]),e.push(c)}else h.push(c)},j=0,k=p.length;k>j;j++){var l=p[j];gb(d,l.scope)&&gb(f,l.sourceId)&&gb(g,l.targetId)&&i(l.scope,l)}return h};var hb=function(a,b){return function(c){for(var d=0,e=a.length;e>d;d++)c(a[d]);return b(a)}},ib=function(a){return function(b){return a[b]}},jb=function(a,b){var c,d,e={length:a.length,each:hb(a,b),get:ib(a)},f=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],g=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(c=0,d=f.length;d>c;c++)e[f[c]]=db(a,f[c],b);for(c=0,d=g.length;d>c;c++)e[g[c]]=eb(a,g[c]);return e},kb=function(a){var b=jb(a,kb);return u.extend(b,{setDetachable:db(a,"setDetachable",kb),setReattach:db(a,"setReattach",kb),setConnector:db(a,"setConnector",kb),detach:function(){for(var b=0,c=a.length;c>b;b++)e.detach(a[b])},isDetachable:eb(a,"isDetachable"),isReattach:eb(a,"isReattach")})},lb=function(a){var b=jb(a,lb);return u.extend(b,{setEnabled:db(a,"setEnabled",lb),setAnchor:db(a,"setAnchor",lb),isEnabled:eb(a,"isEnabled"),detachAll:function(){for(var b=0,c=a.length;c>b;b++)a[b].detachAll()},remove:function(){for(var b=0,c=a.length;c>b;b++)e.deleteObject({endpoint:a[b]})}})};this.select=function(a){return a=a||{},a.scope=a.scope||"*",kb(a.connections||e.getConnections(a,!0))},this.selectEndpoints=function(a){a=a||{},a.scope=a.scope||"*";var b=!a.element&&!a.source&&!a.target,c=b?"*":fb(a.element),d=b?"*":fb(a.source),e=b?"*":fb(a.target),f=fb(a.scope,!0),g=[];for(var h in q){var i=gb(c,h,!0),j=gb(d,h,!0),k="*"!=d,l=gb(e,h,!0),m="*"!=e;if(i||j||l)a:for(var n=0,o=q[h].length;o>n;n++){var p=q[h][n];if(gb(f,p.scope,!0)){var r=k&&d.length>0&&!p.isSource,s=m&&e.length>0&&!p.isTarget;if(r||s)continue a;g.push(p)}}}return lb(g)},this.getAllConnections=function(){return p},this.getDefaultScope=function(){return C},this.getEndpoint=K,this.getEndpoints=function(a){return q[k(a).id]},this.getDefaultEndpointType=function(){return u.Endpoint},this.getDefaultConnectionType=function(){return u.Connection},this.getId=Y,this.getOffset=function(a){return t[a],W({elId:a})},this.appendElement=G;var mb=!1;this.isHoverSuspended=function(){return mb},this.setHoverSuspended=function(a){mb=a};var nb=function(a){return function(){return jsPlumbAdapter.isRenderModeAvailable(a)}};this.isSVGAvailable=nb("svg"),this.isVMLAvailable=nb("vml"),this.hide=function(a,b){return T(a,"none",b),e},this.idstamp=F,this.connectorsInitialized=!1;var ob=[],pb=["svg","vml"];this.registerConnectorType=function(a,b){ob.push([a,b])};var qb=function(a){if(!m&&a){var b=e.getDOMElement(a);b.offsetParent&&(m=b.offsetParent)}},rb=function(){e.Defaults.Container&&(m=e.getDOMElement(e.Defaults.Container))};this.init=function(){var a=function(a,b,c){u.Connectors[a][b]=function(){c.apply(this,arguments),u.ConnectorRenderers[a].apply(this,arguments)},jsPlumbUtil.extend(u.Connectors[a][b],[c,u.ConnectorRenderers[a]])};if(!u.connectorsInitialized){for(var b=0;b<ob.length;b++)for(var c=0;c<pb.length;c++)a(pb[c],ob[b][1],ob[b][0]);u.connectorsInitialized=!0}o||(rb(),e.anchorManager=new u.AnchorManager({jsPlumbInstance:e}),e.setRenderMode(e.Defaults.RenderMode),o=!0,e.fire("ready",e))}.bind(this),this.log=n,this.jsPlumbUIComponent=j,this.makeAnchor=function(){var b,c=function(a,b){if(u.Anchors[a])return new u.Anchors[a](b);if(!e.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+a+"'"}};if(0===arguments.length)return null;var d=arguments[0],f=arguments[1],g=arguments[2],h=null;if(d.compute&&d.getOrientation)return d;if("string"==typeof d)h=c(arguments[0],{elementId:f,jsPlumbInstance:e});else if(a.isArray(d))if(a.isArray(d[0])||a.isString(d[0]))2==d.length&&a.isObject(d[1])?a.isString(d[0])?(b=u.extend({elementId:f,jsPlumbInstance:e},d[1]),h=c(d[0],b)):(b=u.extend({elementId:f,jsPlumbInstance:e,anchors:d[0]},d[1]),h=new u.DynamicAnchor(b)):h=new u.DynamicAnchor({anchors:d,selector:null,elementId:f,jsPlumbInstance:g});else{var i={x:d[0],y:d[1],orientation:d.length>=4?[d[2],d[3]]:[0,0],offsets:d.length>=6?[d[4],d[5]]:[0,0],elementId:f,jsPlumbInstance:g,cssClass:7==d.length?d[6]:null};h=new u.Anchor(i),h.clone=function(){return new u.Anchor(i)}}return h.id||(h.id="anchor_"+F()),h},this.makeAnchors=function(b,c,d){for(var f=[],g=0,h=b.length;h>g;g++)"string"==typeof b[g]?f.push(u.Anchors[b[g]]({elementId:c,jsPlumbInstance:d})):a.isArray(b[g])&&f.push(e.makeAnchor(b[g],c,d));return f},this.makeDynamicAnchor=function(a,b){return new u.DynamicAnchor({anchors:a,selector:b,elementId:null,jsPlumbInstance:e})},this.targetEndpointDefinitions={};var sb=function(a,b,c){a.paintStyle=a.paintStyle||c.Defaults.EndpointStyles[b]||c.Defaults.EndpointStyle,a.hoverPaintStyle=a.hoverPaintStyle||c.Defaults.EndpointHoverStyles[b]||c.Defaults.EndpointHoverStyle,a.anchor=a.anchor||c.Defaults.Anchors[b]||c.Defaults.Anchor,a.endpoint=a.endpoint||c.Defaults.Endpoints[b]||c.Defaults.Endpoint};this.sourceEndpointDefinitions={};var tb=function(a,b,c,d,e){for(var f=a.target||a.srcElement,g=!1,h=d.getSelector(b,c),i=0;i<h.length;i++)if(h[i]==f){g=!0;break}return e?!g:g};this.makeTarget=function(c,d,f){var g=u.extend({_jsPlumb:this},f);u.extend(g,d),sb(g,1,this);var h=g.scope||e.Defaults.Scope,i=!(g.deleteEndpointsOnDetach===!1),l=g.maxConnections||-1,m=g.onMaxConnections,n=function(c){var d=k(c),e=d.id,f=new j(g),n=u.extend({},g.dropOptions||{});qb(e),this.targetEndpointDefinitions[e]={def:g,uniqueEndpoint:g.uniqueEndpoint,maxConnections:l,enabled:!0};var o=function(){this.currentlyDragging=!1;var a=this.getDropEvent(arguments),c=this.select({target:e}).length,h=this.getDOMElement(this.getDragObject(arguments)),j=this.getAttribute(h,"dragId"),k=this.getAttribute(h,"originalScope"),l=w[j];if(null!=l){var n=l.endpoints[0].isFloating()?0:1,o=l.endpoints[0],p=(g.endpoint?u.extend({},g.endpoint):{},this.targetEndpointDefinitions[e]);if(!p.enabled||p.maxConnections>0&&c>=p.maxConnections)return m&&m({element:d.el,connection:l},a),!1;if(o.anchor.locked=!1,k&&this.setDragScope(h,k),null==l.suspendedEndpoint&&!l.pending)return!1;var q=f.isDropAllowed(0===n?e:l.sourceId,0===n?l.targetId:e,l.scope,l,null,0===n?d.el:l.source,0===n?l.target:d.el);if(l.suspendedEndpoint){l[n?"targetId":"sourceId"]=l.suspendedEndpoint.elementId,l[n?"target":"source"]=l.suspendedEndpoint.element,l.endpoints[n]=l.suspendedEndpoint;var r=(l.suspendedEndpoint.getElement(),l.suspendedEndpoint.elementId);ab({index:n,originalSourceId:0===n?r:l.sourceId,newSourceId:0===n?e:l.sourceId,originalTargetId:1==n?r:l.targetId,newTargetId:1==n?e:l.targetId,connection:l},a)}if(q){var s=this.getElementObject(d.el),t=p.endpoint;if((null==t||null==t._jsPlumb)&&(t=this.addEndpoint(s,g)),g.uniqueEndpoint&&(p.endpoint=t),t._doNotDeleteOnDetach=!1,t._deleteOnDetach=!0,l.isDetachable()&&t.initDraggable(),null!=t.anchor.positionFinder){var v=this.getUIPosition(arguments,this.getZoom()),x=b(s,this),y=this.getSize(s),z=t.anchor.positionFinder(v,x,y,t.anchor.constructorParams);t.anchor.x=z[0],t.anchor.y=z[1]}l[n?"target":"source"]=t.element,l[n?"targetId":"sourceId"]=t.elementId,l.endpoints[n].detachFromConnection(l),l.endpoints[n]._deleteOnDetach&&(l.endpoints[n].deleteAfterDragStop=!0),t.addConnection(l),l.endpoints[n]=t,l.deleteEndpointsOnDetach=i,1==n?this.anchorManager.updateOtherEndpoint(l.sourceId,l.suspendedElementId,l.targetId,l):this.anchorManager.sourceChanged(l.suspendedEndpoint.elementId,l.sourceId,l),O(l,null,a),l.pending=!1}else l.suspendedEndpoint&&(l.isReattach()?(l.setHover(!1),l.floatingAnchorIndex=null,l.suspendedEndpoint.addConnection(l),this.repaint(o.elementId)):l.deleteConnectionNow=!0)}}.bind(this),p=u.dragEvents.drop;n.scope=n.scope||h,n[p]=a.wrap(n[p],o),g.allowLoopback===!1&&(n.canDrop=function(a){var b=a.getDragElement()._jsPlumbRelatedElement;return b!=d.el}),this.initDroppable(this.getElementObject(d.el),n,!0)}.bind(this);c=H(c);for(var o=c.length&&c.constructor!=String?c:[c],p=0,q=o.length;q>p;p++)n(o[p]);return this},this.unmakeTarget=function(a,b){var c=k(a);return u.destroyDroppable(c.el),b||delete this.targetEndpointDefinitions[c.id],this},this.makeSource=function(c,d,f){var g=u.extend({},f);u.extend(g,d),sb(g,0,this);var h=g.maxConnections||1,j=g.onMaxConnections,l=function(c){var d=c.id,f=this.getElementObject(c.el),k=this.getDOMElement(f),l=function(){return null==g.parent?null:"parent"===g.parent?c.el.parentNode:e.getDOMElement(g.parent)},n=null!=g.parent?this.getId(l()):d;qb(n),this.sourceEndpointDefinitions[n]={def:g,uniqueEndpoint:g.uniqueEndpoint,maxConnections:h,enabled:!0};var o=u.dragEvents.stop,p=u.dragEvents.drag,q=u.extend({},g.dragOptions||{}),r=q.drag,s=q.stop,t=null,v=!1;q.scope=q.scope||g.scope,q[p]=a.wrap(q[p],function(){r&&r.apply(this,arguments),v=!1}),q[o]=a.wrap(q[o],function(){if(s&&s.apply(this,arguments),this.currentlyDragging=!1,null!=t._jsPlumb){var a=g.anchor||this.Defaults.Anchor,c=t.anchor,e=t.connections[0],f=this.makeAnchor(a,d,this),h=t.element;if(null!=f.positionFinder){var i=b(h,this),j=this.getSize(h),k={left:i.left+c.x*j[0],top:i.top+c.y*j[1]},n=f.positionFinder(k,i,j,f.constructorParams);f.x=n[0],f.y=n[1]}if(t.setAnchor(f,!0),g.parent){var o=l();if(o){var p=g.container||m;t.setElement(o,p)}}t.repaint(),this.repaint(t.elementId),this.repaint(e.targetId)}}.bind(this));var w=function(a){var b=this.getOriginalEvent(a),c=this.sourceEndpointDefinitions[n];if(d=this.getId(this.getDOMElement(f)),c.enabled){if(g.filter){var m=jsPlumbUtil.isString(g.filter)?tb(b,f,g.filter,this,g.filterExclude):g.filter(b,f);if(m===!1)return}var o=this.select({source:n}).length;if(c.maxConnections>=0&&c.uniqueEndpoint&&o>=c.maxConnections)return j&&j({element:f,maxConnections:h},a),!1;var p=jsPlumbAdapter.getPositionOnElement(b,k,i),r=p;g.parent&&(r=jsPlumbAdapter.getPositionOnElement(b,l(),i));var s={};u.extend(s,g),s.isTemporarySource=!0,s.anchor=[p[0],p[1],0,0],s.parentAnchor=[r[0],r[1],0,0],s.dragOptions=q,t=this.addEndpoint(d,s),v=!0,t.endpointWillMoveTo=g.parent?l():null,t._doNotDeleteOnDetach=!1,t._deleteOnDetach=!0;var w=function(){v&&(v=!1,e.deleteEndpoint(t))};e.registerListener(t.canvas,"mouseup",w),e.registerListener(f,"mouseup",w),e.trigger(t.canvas,"mousedown",a),jsPlumbUtil.consume(a)}}.bind(this);this.registerListener(f,"mousedown",w),this.sourceEndpointDefinitions[n].trigger=w,g.filter&&jsPlumbUtil.isString(g.filter)&&e.setDragFilter(f,g.filter)}.bind(this);c=H(c);for(var n=c.length&&c.constructor!=String?c:[c],o=0,p=n.length;p>o;o++)l(k(n[o]));return this},this.unmakeSource=function(a,b){var c=k(a),d=this.sourceEndpointDefinitions[c.id].trigger;return d&&e.unregisterListener(c.el,"mousedown",d),b||delete this.sourceEndpointDefinitions[c.id],this},this.unmakeEverySource=function(){for(var a in this.sourceEndpointDefinitions)e.unmakeSource(a,!0);return this.sourceEndpointDefinitions={},this},this.unmakeEveryTarget=function(){for(var a in this.targetEndpointDefinitions)e.unmakeTarget(a,!0);return this.targetEndpointDefinitions={},this};var ub=function(b,c,d,e){var f="source"==b?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(c=H(c),a.isString(c))f[c].enabled=e?!f[c].enabled:d;else if(c.length)for(var g=0,h=c.length;h>g;g++){var i=k(c[g]);f[i.id]&&(f[i.id].enabled=e?!f[i.id].enabled:d)}else{var j=k(c).id;f[j].enabled=e?!f[j].enabled:d}return this}.bind(this),vb=function(b,c){return b=H(b),a.isString(b)||!b.length?c.apply(this,[b]):b.length?c.apply(this,[b[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(a){return ub("source",a,null,!0),this.isSourceEnabled(a)},this.setSourceEnabled=function(a,b){return ub("source",a,b)},this.isSource=function(a){return vb(a,function(a){return null!=this.sourceEndpointDefinitions[k(a).id]})},this.isSourceEnabled=function(a){return vb(a,function(a){var b=this.sourceEndpointDefinitions[k(a).id];return b&&b.enabled===!0})},this.toggleTargetEnabled=function(a){return ub("target",a,null,!0),this.isTargetEnabled(a)},this.isTarget=function(a){return vb(a,function(a){return null!=this.targetEndpointDefinitions[k(a).id]})},this.isTargetEnabled=function(a){return vb(a,function(a){var b=this.targetEndpointDefinitions[k(a).id];return b&&b.enabled===!0})},this.setTargetEnabled=function(a,b){return ub("target",a,b)},this.ready=function(a){e.bind("ready",a)},this.repaint=function(a,b,c){if("object"==typeof a&&a.length)for(var d=0,f=a.length;f>d;d++)I(a[d],b,c);else I(a,b,c);return e},this.repaintEverything=function(a){var b=c();for(var d in q)I(d,null,b,a);return this},this.removeAllEndpoints=function(a,b){var c=function(a){var d,f,g=k(a),h=q[g.id];if(h)for(d=0,f=h.length;f>d;d++)e.deleteEndpoint(h[d]);if(delete q[g.id],b&&g.el&&3!=g.el.nodeType&&8!=g.el.nodeType)for(d=0,f=g.el.childNodes.length;f>d;d++)c(g.el.childNodes[d])};return c(a),this},this.remove=function(a,b){var c=k(a);return e.doWhileSuspended(function(){e.removeAllEndpoints(c.id,!0),e.dragManager.elementRemoved(c.id),delete w[c.id],e.anchorManager.clearFor(c.id),e.anchorManager.removeFloatingConnection(c.id)},b===!1),c.el&&e.removeElement(c.el),e};var wb={},xb=function(){for(var a in wb)for(var b=0,c=wb[a].length;c>b;b++){var d=wb[a][b];e.off(d.el,d.event,d.listener)}wb={}};this.registerListener=function(a,b,c){e.on(a,b,c),jsPlumbUtil.addToList(wb,b,{el:a,event:b,listener:c})},this.unregisterListener=function(a,b,c){e.off(a,b,c),jsPlumbUtil.removeWithFunction(wb,function(a){return a.type==b&&a.listener==c})},this.reset=function(){e.deleteEveryEndpoint(),e.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},p.splice(0),xb(),e.anchorManager.reset(),jsPlumbAdapter.headless||e.dragManager.reset()},this.setDefaultScope=function(a){return C=a,e},this.setDraggable=S,this.setId=function(a,b,c){var d;jsPlumbUtil.isString(a)?d=a:(a=this.getDOMElement(a),d=this.getId(a));var e=this.getConnections({source:d,scope:"*"},!0),f=this.getConnections({target:d,scope:"*"},!0);b=""+b,c?a=this.getDOMElement(b):(a=this.getDOMElement(d),this.setAttribute(a,"id",b)),q[b]=q[d]||[];for(var g=0,h=q[b].length;h>g;g++)q[b][g].setElementId(b),q[b][g].setReferenceElement(a);delete q[d],this.anchorManager.changeId(d,b),this.dragManager&&this.dragManager.changeId(d,b);var i=function(c,d,e){for(var f=0,g=c.length;g>f;f++)c[f].endpoints[d].setElementId(b),c[f].endpoints[d].setReferenceElement(a),c[f][e+"Id"]=b,c[f][e]=a};i(e,0,"source"),i(f,1,"target"),this.repaint(b)},this.setDebugLog=function(a){n=a},this.setSuspendDrawing=function(a,b){var c=A;return A=a,B=a?(new Date).getTime():null,b&&this.repaintEverything(),c},this.isSuspendDrawing=function(){return A},this.getSuspendedAt=function(){return B},this.doWhileSuspended=function(b,c){var d=this.isSuspendDrawing();d||this.setSuspendDrawing(!0);try{b()}catch(e){a.log("Function run while suspended failed",e)}d||this.setSuspendDrawing(!1,!c)},this.getOffset=function(a){return t[a]},this.getCachedData=X,this.timestamp=c,this.setRenderMode=function(a){if(a!==u.SVG&&a!==u.VML)throw new TypeError("Render mode ["+a+"] not supported");return D=jsPlumbAdapter.setRenderMode(a)},this.getRenderMode=function(){return D},this.show=function(a,b){return T(a,"block",b),e},this.toggleVisible=V,this.toggleDraggable=U,this.addListener=this.bind,jsPlumbAdapter.headless||(e.dragManager=jsPlumbAdapter.getDragManager(e),e.recalculateOffsets=e.dragManager.updateOffsets)};jsPlumbUtil.extend(t,jsPlumbUtil.EventGenerator,{setAttribute:function(a,b,c){this.setAttribute(a,b,c)},getAttribute:function(a,b){return this.getAttribute(u.getDOMElement(a),b)},registerConnectionType:function(a,b){this._connectionTypes[a]=u.extend({},b)},registerConnectionTypes:function(a){for(var b in a)this._connectionTypes[b]=u.extend({},a[b])},registerEndpointType:function(a,b){this._endpointTypes[a]=u.extend({},b)},registerEndpointTypes:function(a){for(var b in a)this._endpointTypes[b]=u.extend({},a[b])},getType:function(a,b){return"connection"===b?this._connectionTypes[a]:this._endpointTypes[a]},setIdChanged:function(a,b){this.setId(a,b,!0)},setParent:function(a,b){var c=this.getElementObject(a),d=this.getDOMElement(c),e=this.getId(d),f=this.getElementObject(b),g=this.getDOMElement(f),h=this.getId(g);d.parentNode.removeChild(d),g.appendChild(d),this.dragManager.setParent(c,e,f,h)},getSize:function(a){return[a.offsetWidth,a.offsetHeight]},getWidth:function(a){return a.offsetWidth},getHeight:function(a){return a.offsetHeight},extend:function(a,b,c){var d;if(c)for(d=0;d<c.length;d++)a[c[d]]=b[c[d]];else for(d in b)a[d]=b[d];return a}},jsPlumbAdapter);var u=new t;"undefined"!=typeof window&&(window.jsPlumb=u),u.getInstance=function(a){var b=new t(a);return b.init(),b},"function"==typeof define&&(define("jsplumb",[],function(){return u}),define("jsplumbinstance",[],function(){return u.getInstance()})),"undefined"!=typeof exports&&(exports.jsPlumb=u)}(),function(){"use strict";var a=function(a,b){var c=!1;return{drag:function(){if(c)return c=!1,!0;var d=jsPlumb.getUIPosition(arguments,b.getZoom());a.element&&(jsPlumbAdapter.setPosition(a.element,d),b.repaint(a.element,d))},stopDrag:function(){c=!0}}},b=function(a,b){var c=document.createElement("div");c.style.position="absolute";var d=b.getContainer()||document.body;d.appendChild(c);var e=b.getId(c);b.updateOffset({elId:e}),a.id=e,a.element=c},c=function(a,b,c,d,e,f,g){var h=new jsPlumb.FloatingAnchor({reference:b,referenceCanvas:d,jsPlumbInstance:f});return g({paintStyle:a,endpoint:c,anchor:h,source:e,scope:"__floating"})},d=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],e=function(a,b){var c=0;if(null!=b)for(var d=0;d<a.connections.length;d++)if(a.connections[d].sourceId==b||a.connections[d].targetId==b){c=d;break}return a.connections[c]},f=function(a,b){return jsPlumbUtil.findWithFunction(b.connections,function(b){return b.id==a.id})};jsPlumb.Endpoint=function(g){var h=g._jsPlumb,i=(jsPlumbAdapter.getAttribute,jsPlumb.getElementObject),j=jsPlumbUtil,k=g.newConnection,l=g.newEndpoint,m=g.finaliseConnection,n=(g.fireDetachEvent,g.fireMoveEvent),o=g.floatingConnections;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.getDefaultType=function(){return{parameters:{},scope:null,maxConnections:this._jsPlumb.instance.Defaults.MaxConnections,paintStyle:this._jsPlumb.instance.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,endpoint:this._jsPlumb.instance.Defaults.Endpoint||jsPlumb.Defaults.Endpoint,hoverPaintStyle:this._jsPlumb.instance.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,overlays:this._jsPlumb.instance.Defaults.EndpointOverlays||jsPlumb.Defaults.EndpointOverlays,connectorStyle:g.connectorStyle,connectorHoverStyle:g.connectorHoverStyle,connectorClass:g.connectorClass,connectorHoverClass:g.connectorHoverClass,connectorOverlays:g.connectorOverlays,connector:g.connector,connectorTooltip:g.connectorTooltip}},this._jsPlumb.enabled=!(g.enabled===!1),this._jsPlumb.visible=!0,this.element=jsPlumb.getDOMElement(g.source),this._jsPlumb.uuid=g.uuid,this._jsPlumb.floatingEndpoint=null;var p=null;this._jsPlumb.uuid&&(g.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=g.elementId,this._jsPlumb.connectionCost=g.connectionCost,this._jsPlumb.connectionsDirected=g.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var q=function(){jsPlumbAdapter.removeClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.removeClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this._jsPlumb.currentAnchorClass=this.anchor.getCssClass(),this.addClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),jsPlumbAdapter.addClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass)}.bind(this);this.setAnchor=function(a,b){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=this._jsPlumb.instance.makeAnchor(a,this.elementId,h),q(),this.anchor.bind("anchorChanged",function(a){this.fire("anchorChanged",{endpoint:this,anchor:a}),q()}.bind(this)),b||this._jsPlumb.instance.repaint(this.elementId),this};var r=g.anchor?g.anchor:g.anchors?g.anchors:h.Defaults.Anchor||"Top";this.setAnchor(r,!0);var s=function(a){this.connections.length>0?this.connections[0].setHover(a,!1):this.setHover(a)}.bind(this);g._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.setEndpoint=function(a){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy());var b=function(a,b){var c=h.getRenderMode();if(jsPlumb.Endpoints[c][a])return new jsPlumb.Endpoints[c][a](b);if(!h.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+a+"'"}},c={_jsPlumb:this._jsPlumb.instance,cssClass:g.cssClass,container:g.container,tooltip:g.tooltip,connectorTooltip:g.connectorTooltip,endpoint:this};j.isString(a)?this.endpoint=b(a,c):j.isArray(a)?(c=j.merge(a[1],c),this.endpoint=b(a[0],c)):this.endpoint=a.clone(),jsPlumb.extend({},c),this.endpoint.clone=function(){return j.isString(a)?b(a,c):j.isArray(a)?(c=j.merge(a[1],c),b(a[0],c)):void 0}.bind(this),this.type=this.endpoint.type,this.bindListeners(this.endpoint,this,s)},this.setEndpoint(g.endpoint||h.Defaults.Endpoint||jsPlumb.Defaults.Endpoint||"Dot"),this.setPaintStyle(g.paintStyle||g.style||h.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,!0),this.setHoverPaintStyle(g.hoverPaintStyle||h.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle(),jsPlumb.extend(this,g,d),this.isSource=g.isSource||!1,this.isTemporarySource=g.isTemporarySource||!1,this.isTarget=g.isTarget||!1,this._jsPlumb.maxConnections=g.maxConnections||h.Defaults.MaxConnections,this.canvas=this.endpoint.canvas,this.addClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),jsPlumbAdapter.addClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.connections=g.connections||[],this.connectorPointerEvents=g["connector-pointer-events"],this.scope=g.scope||h.getDefaultScope(),this.timestamp=null,this.reattachConnections=g.reattach||h.Defaults.ReattachConnections,this.connectionsDetachable=h.Defaults.ConnectionsDetachable,(g.connectionsDetachable===!1||g.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=g.dragAllowedWhenFull!==!1,g.onMaxConnections&&this.bind("maxConnections",g.onMaxConnections),this.addConnection=function(a){this.connections.push(a),this[(this.connections.length>0?"add":"remove")+"Class"](h.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](h.endpointFullClass)
},this.detachFromConnection=function(a,b,c){b=null==b?f(a,this):b,b>=0&&(this.connections.splice(b,1),this[(this.connections.length>0?"add":"remove")+"Class"](h.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](h.endpointFullClass)),!c&&this._deleteOnDetach&&0===this.connections.length&&h.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!1})},this.detach=function(a,b,c,d,e,g,i){var j=null==i?f(a,this):i,k=!1;return d=d!==!1,j>=0&&(c||a._forceDetach||a.isDetachable()&&a.isDetachAllowed(a)&&this.isDetachAllowed(a)&&h.checkCondition("beforeDetach",a))&&(h.deleteObject({connection:a,fireEvent:!b&&d,originalEvent:e,deleteAttachedObjects:!1}),k=!0),k},this.detachAll=function(a,b){for(;this.connections.length>0;)this.detach(this.connections[0],!1,!0,a!==!1,b,this,0);return this},this.detachFrom=function(a,b,c){for(var d=[],e=0;e<this.connections.length;e++)(this.connections[e].endpoints[1]==a||this.connections[e].endpoints[0]==a)&&d.push(this.connections[e]);for(var f=0;f<d.length;f++)this.detach(d[f],!1,!0,b,c);return this},this.getElement=function(){return this.element},this.setElement=function(a){var b=this._jsPlumb.instance.getId(a),c=this.elementId;return j.removeWithFunction(g.endpointsByElement[this.elementId],function(a){return a.id==this.id}.bind(this)),this.element=jsPlumb.getDOMElement(a),this.elementId=h.getId(this.element),h.anchorManager.rehomeEndpoint(this,c,this.element),h.dragManager.endpointAdded(this.element),j.addToList(g.endpointsByElement,b,this),this},this.makeInPlaceCopy=function(){var a=this.anchor.getCurrentLocation({element:this}),b=this.anchor.getOrientation(this),c=this.anchor.getCssClass(),d={bind:function(){},compute:function(){return[a[0],a[1]]},getCurrentLocation:function(){return[a[0],a[1]]},getOrientation:function(){return b},getCssClass:function(){return c}};return l({dropOptions:g.dropOptions,anchor:d,source:this.element,paintStyle:this.getPaintStyle(),endpoint:g.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope})},this.connectorSelector=function(){var a=this.connections[0];return this.isTarget&&a?a:this.connections.length<this._jsPlumb.maxConnections||-1==this._jsPlumb.maxConnections?null:a},this.setStyle=this.setPaintStyle,this.paint=function(a){a=a||{};var b=a.timestamp,c=!(a.recalc===!1);if(!b||this.timestamp!==b){var d=h.updateOffset({elId:this.elementId,timestamp:b}),f=a.offset?a.offset.o:d.o;if(null!=f){var g=a.anchorPoint,i=a.connectorPaintStyle;if(null==g){var j=a.dimensions||d.s,k={xy:[f.left,f.top],wh:j,element:this,timestamp:b};if(c&&this.anchor.isDynamic&&this.connections.length>0){var l=e(this,a.elementWithPrecedence),m=l.endpoints[0]==this?1:0,n=0===m?l.sourceId:l.targetId,o=h.getCachedData(n),p=o.o,q=o.s;k.txy=[p.left,p.top],k.twh=q,k.tElement=l.endpoints[m]}g=this.anchor.compute(k)}this.endpoint.compute(g,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,i||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=b;for(var r=0;r<this._jsPlumb.overlays.length;r++){var s=this._jsPlumb.overlays[r];s.isVisible()&&(this._jsPlumb.overlayPlacements[r]=s.draw(this.endpoint,this._jsPlumb.paintStyleInUse),s.paint(this._jsPlumb.overlayPlacements[r]))}}}},this.repaint=this.paint;var t=!1;this.initDraggable=function(){if(!t&&jsPlumb.isDragSupported(this.element)){var d={id:null,element:null},e=null,f=!1,m=null,n=a(d,h),q=function(){e=this.connectorSelector();var a=!0;if(this.isEnabled()||(a=!1),null!=e||this.isSource||this.isTemporarySource||(a=!1),this.isSource&&this.isFull()&&!this.dragAllowedWhenFull&&(a=!1),null==e||e.isDetachable()||(a=!1),a===!1)return h.stopDrag&&h.stopDrag(this.canvas),n.stopDrag(),!1;for(var q=0;q<this.connections.length;q++)this.connections[q].setHover(!1);this.addClass("endpointDrag"),h.setConnectionBeingDragged(!0),e&&!this.isFull()&&this.isSource&&(e=null),h.updateOffset({elId:this.elementId}),p=this.makeInPlaceCopy(),p.referenceEndpoint=this,p.paint(),b(d,h);var r=i(p.canvas),s=jsPlumbAdapter.getOffset(r,this._jsPlumb.instance),t=i(this.canvas);if(jsPlumbAdapter.setPosition(d.element,s),this.parentAnchor&&(this.anchor=h.makeAnchor(this.parentAnchor,this.elementId,h)),h.setAttribute(this.canvas,"dragId",d.id),h.setAttribute(this.canvas,"elId",this.elementId),this._jsPlumb.floatingEndpoint=c(this.getPaintStyle(),this.anchor,this.endpoint,this.canvas,d.element,h,l),this.canvas.style.visibility="hidden",null==e)this.anchor.locked=!0,this.setHover(!1,!1),e=k({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.endpointWillMoveTo||this.element,target:d.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:g.connectorStyle,hoverPaintStyle:g.connectorHoverStyle,connector:g.connector,overlays:g.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass}),e.pending=!0,e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass),h.fire("connectionDrag",e);else{f=!0,e.setHover(!1);var u=e.endpoints[0].id==this.id?0:1;e.floatingAnchorIndex=u,this.detachFromConnection(e,null,!0);var v=h.getDragScope(t);h.setAttribute(this.canvas,"originalScope",v);var w=h.getDropScope(t);h.setDragScope(t,w),h.fire("connectionDrag",e),0===u?(m=[e.source,e.sourceId,t,v],e.source=d.element,e.sourceId=d.id):(m=[e.target,e.targetId,t,v],e.target=d.element,e.targetId=d.id),e.endpoints[0===u?1:0].anchor.locked=!0,e.suspendedEndpoint=e.endpoints[u],e.suspendedElement=e.endpoints[u].getElement(),e.suspendedElementId=e.endpoints[u].elementId,e.suspendedElementType=0===u?"source":"target",e.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=e.suspendedEndpoint,e.endpoints[u]=this._jsPlumb.floatingEndpoint,e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass)}o[d.id]=e,h.anchorManager.addFloatingConnection(d.id,e),j.addToList(g.endpointsByElement,d.id,this._jsPlumb.floatingEndpoint),h.currentlyDragging=!0}.bind(this),r=g.dragOptions||{},s={},u=jsPlumb.dragEvents.start,v=jsPlumb.dragEvents.stop,w=jsPlumb.dragEvents.drag;r=jsPlumb.extend(s,r),r.scope=r.scope||this.scope,r[u]=j.wrap(r[u],q,!1),r[w]=j.wrap(r[w],n.drag),r[v]=j.wrap(r[v],function(){if(h.setConnectionBeingDragged(!1),e&&null!=e.endpoints){var a=h.getDropEvent(arguments),b=null==e.floatingAnchorIndex?1:e.floatingAnchorIndex;if(e.endpoints[0===b?1:0].anchor.locked=!1,e.removeClass(h.draggingClass),this._jsPlumb&&(e.deleteConnectionNow||e.endpoints[b]==this._jsPlumb.floatingEndpoint)&&f&&e.suspendedEndpoint){0===b?(e.source=m[0],e.sourceId=m[1]):(e.target=m[0],e.targetId=m[1]);var c=this._jsPlumb.floatingEndpoint;h.setDragScope(m[2],m[3]),e.endpoints[b]=e.suspendedEndpoint,e.isReattach()||e._forceReattach||e._forceDetach||!e.endpoints[0===b?1:0].detach(e,!1,!1,!0,a)?(e.setHover(!1),e.floatingAnchorIndex=null,e._forceDetach=null,e._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(e),e.suspendedEndpoint.addConnection(e),h.repaint(m[1])):h.deleteObject({endpoint:c})}h.remove(d.element,!1),h.deleteObject({endpoint:p}),this.deleteAfterDragStop?h.deleteObject({endpoint:this}):this._jsPlumb&&(this._jsPlumb.floatingEndpoint=null,this.canvas.style.visibility="visible",this.anchor.locked=!1,this.paint({recalc:!1})),h.fire("connectionDragStop",e,a),h.currentlyDragging=!1,e=null}}.bind(this));var x=i(this.canvas);h.initDraggable(x,r,!0),this.canvas._jsPlumbRelatedElement=this.element,t=!0}},(this.isSource||this.isTarget||this.isTemporarySource)&&this.initDraggable();var u=function(a,b,c,d){if((this.isTarget||b)&&jsPlumb.isDropSupported(this.element)){var e=g.dropOptions||h.Defaults.DropOptions||jsPlumb.Defaults.DropOptions;e=jsPlumb.extend({},e),e.scope=e.scope||this.scope;var f=jsPlumb.dragEvents.drop,i=jsPlumb.dragEvents.over,k=jsPlumb.dragEvents.out,l=function(){this.removeClass(h.endpointDropAllowedClass),this.removeClass(h.endpointDropForbiddenClass);var a=h.getDropEvent(arguments),b=h.getDOMElement(h.getDragObject(arguments)),c=h.getAttribute(b,"dragId"),e=(h.getAttribute(b,"elId"),h.getAttribute(b,"originalScope")),f=o[c];if(null!=f){var g=f.suspendedEndpoint&&(f.suspendedEndpoint.id==this.id||this.referenceEndpoint&&f.suspendedEndpoint.id==this.referenceEndpoint.id);if(g)return void(f._forceReattach=!0);var i=null==f.floatingAnchorIndex?1:f.floatingAnchorIndex;e&&h.setDragScope(b,e);var j=null!=d?d.isEnabled():!0;if(this.isFull()&&this.fire("maxConnections",{endpoint:this,connection:f,maxConnections:this._jsPlumb.maxConnections},a),!this.isFull()&&(0!==i||this.isSource)&&(1!=i||this.isTarget)&&j){var k=!0;f.suspendedEndpoint&&f.suspendedEndpoint.id!=this.id&&(0===i?(f.source=f.suspendedEndpoint.element,f.sourceId=f.suspendedEndpoint.elementId):(f.target=f.suspendedEndpoint.element,f.targetId=f.suspendedEndpoint.elementId),f.isDetachAllowed(f)&&f.endpoints[i].isDetachAllowed(f)&&f.suspendedEndpoint.isDetachAllowed(f)&&h.checkCondition("beforeDetach",f)||(k=!1)),0===i?(f.source=this.element,f.sourceId=this.elementId):(f.target=this.element,f.targetId=this.elementId);var l=function(){f.floatingAnchorIndex=null},p=function(){f.pending=!1,f.endpoints[i].detachFromConnection(f),f.suspendedEndpoint&&f.suspendedEndpoint.detachFromConnection(f),f.endpoints[i]=this,this.addConnection(f);var b=this.getParameters();for(var c in b)f.setParameter(c,b[c]);if(f.suspendedEndpoint){var d=(f.suspendedEndpoint.getElement(),f.suspendedEndpoint.elementId);n({index:i,originalSourceId:0===i?d:f.sourceId,newSourceId:0===i?this.elementId:f.sourceId,originalTargetId:1==i?d:f.targetId,newTargetId:1==i?this.elementId:f.targetId,originalSourceEndpoint:0===i?f.suspendedEndpoint:f.endpoints[0],newSourceEndpoint:0===i?this:f.endpoints[0],originalTargetEndpoint:1==i?f.suspendedEndpoint:f.endpoints[1],newTargetEndpoint:1==i?this:f.endpoints[1],connection:f},a)}else b.draggable&&jsPlumb.initDraggable(this.element,dragOptions,!0,h);1==i?h.anchorManager.updateOtherEndpoint(f.sourceId,f.suspendedElementId,f.targetId,f):h.anchorManager.sourceChanged(f.suspendedEndpoint.elementId,f.sourceId,f),m(f,null,a),l()}.bind(this),q=function(){f.suspendedEndpoint&&(f.endpoints[i]=f.suspendedEndpoint,f.setHover(!1),f._forceDetach=!0,0===i?(f.source=f.suspendedEndpoint.element,f.sourceId=f.suspendedEndpoint.elementId):(f.target=f.suspendedEndpoint.element,f.targetId=f.suspendedEndpoint.elementId),f.suspendedEndpoint.addConnection(f),f.endpoints[0].repaint(),f.repaint(),h.repaint(f.sourceId),f._forceDetach=!1),l()};k=k&&this.isDropAllowed(f.sourceId,f.targetId,f.scope,f,this),k?p():q()}h.currentlyDragging=!1}}.bind(this);e[f]=j.wrap(e[f],l),e[i]=j.wrap(e[i],function(){var a=jsPlumb.getDragObject(arguments),b=h.getAttribute(jsPlumb.getDOMElement(a),"dragId"),c=o[b];if(null!=c){var d=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,e=this.isTarget&&0!==c.floatingAnchorIndex||c.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==c.suspendedEndpoint.id;if(e){var f=h.checkCondition("checkDropAllowed",{sourceEndpoint:c.endpoints[d],targetEndpoint:this,connection:c});this[(f?"add":"remove")+"Class"](h.endpointDropAllowedClass),this[(f?"remove":"add")+"Class"](h.endpointDropForbiddenClass),c.endpoints[d].anchor.over(this.anchor,this)}}}.bind(this)),e[k]=j.wrap(e[k],function(){var a=jsPlumb.getDragObject(arguments),b=null==a?null:h.getAttribute(jsPlumb.getDOMElement(a),"dragId"),c=b?o[b]:null;if(null!=c){var d=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex,e=this.isTarget&&0!==c.floatingAnchorIndex||c.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==c.suspendedEndpoint.id;e&&(this.removeClass(h.endpointDropAllowedClass),this.removeClass(h.endpointDropForbiddenClass),c.endpoints[d].anchor.out())}}.bind(this)),h.initDroppable(a,e,!0,c)}}.bind(this);return this.anchor.isFloating||u(i(this.canvas),!0,!(g._transient||this.anchor.isFloating),this),g.type&&this.addType(g.type,g.data,h.isSuspendDrawing()),this},jsPlumbUtil.extend(jsPlumb.Endpoint,OverlayCapableJsPlumbUIComponent,{getTypeDescriptor:function(){return"endpoint"},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a,b,c){if(this._jsPlumb.visible=a,this.canvas&&(this.canvas.style.display=a?"block":"none"),this[a?"showOverlays":"hideOverlays"](),!b)for(var d=0;d<this.connections.length;d++)if(this.connections[d].setVisible(a),!c){var e=this===this.connections[d].endpoints[0]?1:0;1==this.connections[d].endpoints[e].connections.length&&this.connections[d].endpoints[e].setVisible(a,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(a){null!=a.maxConnections&&(this._jsPlumb.maxConnections=a.maxConnections),a.scope&&(this.scope=a.scope),jsPlumb.extend(this,a,d),a.anchor&&(this.anchor=this._jsPlumb.instance.makeAnchor(a.anchor)),null!=a.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(a){this._jsPlumb.enabled=a},cleanup:function(){jsPlumbAdapter.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.anchor=null,this.endpoint.cleanup(),this.endpoint.destroy(),this.endpoint=null;var a=jsPlumb.getElementObject(this.canvas);this._jsPlumb.instance.destroyDraggable(a),this._jsPlumb.instance.destroyDroppable(a)},setHover:function(a){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(a)},isFull:function(){return!(this.isFloating()||this._jsPlumb.maxConnections<1||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(a){this._jsPlumb.connectionCost=a},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(a){this._jsPlumb.connectionsDirected=a},setElementId:function(a){this.elementId=a,this.anchor.elementId=a},setReferenceElement:function(a){this.element=jsPlumb.getDOMElement(a)},setDragAllowedWhenFull:function(a){this.dragAllowedWhenFull=a},equals:function(a){return this.anchor.equals(a.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(a){return this.anchor.compute(a)}})}(),function(){"use strict";var a=function(a,b,c,d){if(!a.Defaults.DoNotThrowErrors&&null==jsPlumb.Connectors[b][c])throw{msg:"jsPlumb: unknown connector type '"+c+"'"};return new jsPlumb.Connectors[b][c](d)},b=function(a,b,c){return a?c.makeAnchor(a,b,c):null};jsPlumb.Connection=function(a){var b=(a.newConnection,a.newEndpoint),c=(jsPlumb.getElementObject,jsPlumbUtil);this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=a.previousConnection,this.source=jsPlumb.getDOMElement(a.source),this.target=jsPlumb.getDOMElement(a.target),a.sourceEndpoint&&(this.source=a.sourceEndpoint.endpointWillMoveTo||a.sourceEndpoint.getElement()),a.targetEndpoint&&(this.target=a.targetEndpoint.getElement()),OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=a.scope,this.endpoints=[],this.endpointStyles=[];var d=this._jsPlumb.instance;this._jsPlumb.visible=!0,this._jsPlumb.editable=a.editable===!0,this._jsPlumb.params={cssClass:a.cssClass,container:a.container,"pointer-events":a["pointer-events"],editorParams:a.editorParams},this._jsPlumb.lastPaintedAt=null,this.getDefaultType=function(){return{parameters:{},scope:null,detachable:this._jsPlumb.instance.Defaults.ConnectionsDetachable,rettach:this._jsPlumb.instance.Defaults.ReattachConnections,paintStyle:this._jsPlumb.instance.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,connector:this._jsPlumb.instance.Defaults.Connector||jsPlumb.Defaults.Connector,hoverPaintStyle:this._jsPlumb.instance.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,overlays:this._jsPlumb.instance.Defaults.ConnectorOverlays||jsPlumb.Defaults.ConnectorOverlays}},this.makeEndpoint=function(c,e,f,g){return f=f||this._jsPlumb.instance.getId(e),this.prepareEndpoint(d,b,this,g,c?0:1,a,e,f)};var e=this.makeEndpoint(!0,this.source,this.sourceId,a.sourceEndpoint),f=this.makeEndpoint(!1,this.target,this.targetId,a.targetEndpoint);e&&c.addToList(a.endpointsByElement,this.sourceId,e),f&&c.addToList(a.endpointsByElement,this.targetId,f),this.scope||(this.scope=this.endpoints[0].scope),null!=a.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=a.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=a.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0)),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||a.connector||d.Defaults.Connector||jsPlumb.Defaults.Connector,!0,!0),a.path&&this.connector.setPath(a.path),this.setPaintStyle(this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||a.paintStyle||d.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,!0),this.setHoverPaintStyle(this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||a.hoverPaintStyle||d.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle();var g=d.getSuspendedAt();if(d.updateOffset({elId:this.sourceId,timestamp:g}),d.updateOffset({elId:this.targetId,timestamp:g}),!d.isSuspendDrawing()){var h=d.getCachedData(this.sourceId),i=h.o,j=h.s,k=d.getCachedData(this.targetId),l=k.o,m=k.s,n=g||d.timestamp(),o=this.endpoints[0].anchor.compute({xy:[i.left,i.top],wh:j,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[l.left,l.top],twh:m,tElement:this.endpoints[1],timestamp:n});this.endpoints[0].paint({anchorLoc:o,timestamp:n}),o=this.endpoints[1].anchor.compute({xy:[l.left,l.top],wh:m,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[i.left,i.top],twh:j,tElement:this.endpoints[0],timestamp:n}),this.endpoints[1].paint({anchorLoc:o,timestamp:n})}this._jsPlumb.detachable=d.Defaults.ConnectionsDetachable,a.detachable===!1&&(this._jsPlumb.detachable=!1),this.endpoints[0].connectionsDetachable===!1&&(this._jsPlumb.detachable=!1),this.endpoints[1].connectionsDetachable===!1&&(this._jsPlumb.detachable=!1),this._jsPlumb.reattach=a.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||d.Defaults.ReattachConnections,this._jsPlumb.cost=a.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=a.directed,null==a.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var p=jsPlumb.extend({},this.endpoints[1].getParameters());jsPlumb.extend(p,this.endpoints[0].getParameters()),jsPlumb.extend(p,this.getParameters()),this.setParameters(p);var q=[a.type,this.endpoints[0].connectionType,this.endpoints[1].connectionType].join(" ");/[^\s]/.test(q)&&this.addType(q,a.data,!0)},jsPlumbUtil.extend(jsPlumb.Connection,OverlayCapableJsPlumbUIComponent,{applyType:function(a,b){null!=a.detachable&&this.setDetachable(a.detachable),null!=a.reattach&&this.setReattach(a.reattach),a.scope&&(this.scope=a.scope),this.setConnector(a.connector,b),null!=a.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass),a.anchor?(this.endpoints[0].anchor=this._jsPlumb.instance.makeAnchor(a.anchor),this.endpoints[1].anchor=this._jsPlumb.instance.makeAnchor(a.anchor)):a.anchors&&(this.endpoints[0].anchor=this._jsPlumb.instance.makeAnchor(a.anchors[0]),this.endpoints[1].anchor=this._jsPlumb.instance.makeAnchor(a.anchors[1]))},getTypeDescriptor:function(){return"connection"},getAttachedElements:function(){return this.endpoints},addClass:function(a,b){b&&(this.endpoints[0].addClass(a),this.endpoints[1].addClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(a)),this.connector&&this.connector.addClass(a)},removeClass:function(a,b){b&&(this.endpoints[0].removeClass(a),this.endpoints[1].removeClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(a)),this.connector&&this.connector.removeClass(a)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a){this._jsPlumb.visible=a,this.connector&&this.connector.setVisible(a),this.repaint()},cleanup:function(){this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(),this.connector.destroy()),this.connector=null},isDetachable:function(){return this._jsPlumb.detachable===!0},setDetachable:function(a){this._jsPlumb.detachable=a===!0},isReattach:function(){return this._jsPlumb.reattach===!0},setReattach:function(a){this._jsPlumb.reattach=a===!0},setHover:function(a){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(a),jsPlumbAdapter[a?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),jsPlumbAdapter[a?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getCost:function(){return this._jsPlumb.cost},setCost:function(a){this._jsPlumb.cost=a},isDirected:function(){return this._jsPlumb.directed===!0},getConnector:function(){return this.connector},setConnector:function(b,c,d){var e=jsPlumbUtil;null!=this.connector&&(this.connector.cleanup(),this.connector.destroy());var f={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},g=this._jsPlumb.instance.getRenderMode();e.isString(b)?this.connector=a(this._jsPlumb.instance,g,b,f):e.isArray(b)&&(this.connector=1==b.length?a(this._jsPlumb.instance,g,b[0],f):a(this._jsPlumb.instance,g,b[0],e.merge(b[1],f))),this.bindListeners(this.connector,this,function(a){this.setHover(a,!1)}.bind(this)),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,d||this.setListenerComponent(this.connector),this._jsPlumb.editable&&null!=jsPlumb.ConnectorEditors&&jsPlumb.ConnectorEditors[this.connector.type]&&this.connector.isEditable()?new jsPlumb.ConnectorEditors[this.connector.type]({connector:this.connector,connection:this,params:this._jsPlumb.params.editorParams||{}}):this._jsPlumb.editable=!1,c||this.repaint()},paint:function(a){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){a=a||{};var b=(a.elId,a.ui),c=a.recalc,d=a.timestamp,e=!1,f=e?this.sourceId:this.targetId,g=e?this.targetId:this.sourceId,h=e?0:1,i=e?1:0;if(null==d||d!=this._jsPlumb.lastPaintedAt){var j=this._jsPlumb.instance.updateOffset({elId:g,offset:b,recalc:c,timestamp:d}).o,k=this._jsPlumb.instance.updateOffset({elId:f,timestamp:d}).o,l=this.endpoints[i],m=this.endpoints[h];a.clearEdits&&(this._jsPlumb.overlayPositions=null,l.anchor.clearUserDefinedLocation(),m.anchor.clearUserDefinedLocation(),this.connector.setEdited(!1));var n=l.anchor.getCurrentLocation({xy:[j.left,j.top],wh:[j.width,j.height],element:l,timestamp:d}),o=m.anchor.getCurrentLocation({xy:[k.left,k.top],wh:[k.width,k.height],element:m,timestamp:d});this.connector.resetBounds(),this.connector.compute({sourcePos:n,targetPos:o,sourceEndpoint:this.endpoints[i],targetEndpoint:this.endpoints[h],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:j,targetInfo:k,clearEdits:a.clearEdits===!0});for(var p={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},q=0;q<this._jsPlumb.overlays.length;q++){var r=this._jsPlumb.overlays[q];r.isVisible()&&(this._jsPlumb.overlayPlacements[q]=r.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(r)),p.minX=Math.min(p.minX,this._jsPlumb.overlayPlacements[q].minX),p.maxX=Math.max(p.maxX,this._jsPlumb.overlayPlacements[q].maxX),p.minY=Math.min(p.minY,this._jsPlumb.overlayPlacements[q].minY),p.maxY=Math.max(p.maxY,this._jsPlumb.overlayPlacements[q].maxY))}var s=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,t=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),u={xmin:Math.min(this.connector.bounds.minX-(s+t),p.minX),ymin:Math.min(this.connector.bounds.minY-(s+t),p.minY),xmax:Math.max(this.connector.bounds.maxX+(s+t),p.maxX),ymax:Math.max(this.connector.bounds.maxY+(s+t),p.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,u);for(var v=0;v<this._jsPlumb.overlays.length;v++){var w=this._jsPlumb.overlays[v];w.isVisible()&&w.paint(this._jsPlumb.overlayPlacements[v],u)}}this._jsPlumb.lastPaintedAt=d}},repaint:function(a){a=a||{},this.paint({elId:this.sourceId,recalc:!(a.recalc===!1),timestamp:a.timestamp,clearEdits:a.clearEdits})},prepareEndpoint:function(a,c,d,e,f,g,h,i){var j;if(e)d.endpoints[f]=e,e.addConnection(d);else{g.endpoints||(g.endpoints=[null,null]);var k=g.endpoints[f]||g.endpoint||a.Defaults.Endpoints[f]||jsPlumb.Defaults.Endpoints[f]||a.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;g.endpointStyles||(g.endpointStyles=[null,null]),g.endpointHoverStyles||(g.endpointHoverStyles=[null,null]);var l=g.endpointStyles[f]||g.endpointStyle||a.Defaults.EndpointStyles[f]||jsPlumb.Defaults.EndpointStyles[f]||a.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==l.fillStyle&&null!=g.paintStyle&&(l.fillStyle=g.paintStyle.strokeStyle),null==l.outlineColor&&null!=g.paintStyle&&(l.outlineColor=g.paintStyle.outlineColor),null==l.outlineWidth&&null!=g.paintStyle&&(l.outlineWidth=g.paintStyle.outlineWidth);var m=g.endpointHoverStyles[f]||g.endpointHoverStyle||a.Defaults.EndpointHoverStyles[f]||jsPlumb.Defaults.EndpointHoverStyles[f]||a.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=g.hoverPaintStyle&&(null==m&&(m={}),null==m.fillStyle&&(m.fillStyle=g.hoverPaintStyle.strokeStyle));var n=g.anchors?g.anchors[f]:g.anchor?g.anchor:b(a.Defaults.Anchors[f],i,a)||b(jsPlumb.Defaults.Anchors[f],i,a)||b(a.Defaults.Anchor,i,a)||b(jsPlumb.Defaults.Anchor,i,a),o=g.uuids?g.uuids[f]:null;j=c({paintStyle:l,hoverPaintStyle:m,endpoint:k,connections:[d],uuid:o,anchor:n,source:h,scope:g.scope,reattach:g.reattach||a.Defaults.ReattachConnections,detachable:g.detachable||a.Defaults.ConnectionsDetachable}),d.endpoints[f]=j,g.drawEndpoints===!1&&j.setVisible(!1,!0,!0)}return j}})}(),function(){"use strict";jsPlumb.AnchorManager=function(a){var b={},c={},d={},e={},f={},g={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},h=["left","top","right","bottom"],i={},j=this,k={},l=a.jsPlumbInstance,m={},n=function(a,b,c,d,e,f){if(a===b)return{orientation:g.IDENTITY,a:["top","top"]};var i=Math.atan2(d.centery-c.centery,d.centerx-c.centerx),j=Math.atan2(c.centery-d.centery,c.centerx-d.centerx),k=[],l={};!function(a,b){for(var c=0;c<a.length;c++)l[a[c]]={left:[b[c].left,b[c].centery],right:[b[c].right,b[c].centery],top:[b[c].centerx,b[c].top],bottom:[b[c].centerx,b[c].bottom]}}(["source","target"],[c,d]);for(var m=0;m<h.length;m++)for(var n=0;n<h.length;n++)m!=n&&k.push({source:h[m],target:h[n],dist:Biltong.lineLength(l.source[h[m]],l.target[h[n]])});k.sort(function(a,b){return a.dist<b.dist?-1:a.dist>b.dist?1:0});for(var o=k[0].source,p=k[0].target,q=0;q<k.length&&(o=!e.isContinuous||e.isEdgeSupported(k[q].source)?k[q].source:null,p=!f.isContinuous||f.isEdgeSupported(k[q].target)?k[q].target:null,null==o||null==p);q++);return{a:[o,p],theta:i,theta2:j}},o=function(a,b,c,d,e,f,g){for(var h=[],i=b[e?0:1]/(d.length+1),j=0;j<d.length;j++){var k=(j+1)*i,l=f*b[e?1:0];g&&(k=b[e?0:1]-k);var m=e?k:l,n=c[0]+m,o=m/b[0],p=e?l:k,q=c[1]+p,r=p/b[1];h.push([n,q,o,r,d[j][1],d[j][2]])}return h},p=function(a){return function(b,c){var d=!0;return d=a?b[0][0]<c[0][0]:b[0][0]>c[0][0],d===!1?-1:1}},q=function(a,b){var c=a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0],d=b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0];return c>d?1:a[0][1]>b[0][1]?1:-1},r={top:function(a,b){return a[0]>b[0]?1:-1},right:p(!0),bottom:p(!0),left:q},s=function(a,b){return a.sort(b)},t=function(a,b){var c=l.getCachedData(a),e=c.s,g=c.o,h=function(b,c,e,g,h,i,j){if(g.length>0)for(var k=s(g,r[b]),l="right"===b||"top"===b,m=o(b,c,e,k,h,i,l),n=function(a,b){d[a.id]=[b[0],b[1],b[2],b[3]],f[a.id]=j},p=0;p<m.length;p++){var q=m[p][4],t=q.endpoints[0].elementId===a,u=q.endpoints[1].elementId===a;t?n(q.endpoints[0],m[p]):u&&n(q.endpoints[1],m[p])}};h("bottom",e,[g.left,g.top],b.bottom,!0,1,[0,1]),h("top",e,[g.left,g.top],b.top,!0,0,[0,-1]),h("left",e,[g.left,g.top],b.left,!1,0,[-1,0]),h("right",e,[g.left,g.top],b.right,!1,1,[1,0])};this.reset=function(){b={},i={},k={}},this.addFloatingConnection=function(a,b){m[a]=b},this.removeFloatingConnection=function(a){delete m[a]},this.newConnection=function(a){var b=a.sourceId,c=a.targetId,d=a.endpoints,e=!0,f=function(f,g,h,j,k){b==c&&h.isContinuous&&(a._jsPlumb.instance.removeElement(d[1].canvas),e=!1),jsPlumbUtil.addToList(i,j,[k,g,h.constructor==jsPlumb.DynamicAnchor])};f(0,d[0],d[0].anchor,c,a),e&&f(1,d[1],d[1].anchor,b,a)};var u=function(a){!function(a,b){if(a){var c=function(a){return a[4]==b};jsPlumbUtil.removeWithFunction(a.top,c),jsPlumbUtil.removeWithFunction(a.left,c),jsPlumbUtil.removeWithFunction(a.bottom,c),jsPlumbUtil.removeWithFunction(a.right,c)}}(k[a.elementId],a.id)};this.connectionDetached=function(a){var b=a.connection||a,c=a.sourceId,d=a.targetId,e=b.endpoints,f=function(a,b,c,d,e){null!=c&&c.constructor==jsPlumb.FloatingAnchor||jsPlumbUtil.removeWithFunction(i[d],function(a){return a[0].id==e.id})};f(1,e[1],e[1].anchor,c,b),f(0,e[0],e[0].anchor,d,b),u(b.endpoints[0]),u(b.endpoints[1]),j.redraw(b.sourceId),j.redraw(b.targetId)},this.add=function(a,c){jsPlumbUtil.addToList(b,c,a)},this.changeId=function(a,c){i[c]=i[a],b[c]=b[a],delete i[a],delete b[a]},this.getConnectionsFor=function(a){return i[a]||[]},this.getEndpointsFor=function(a){return b[a]||[]},this.deleteEndpoint=function(a){jsPlumbUtil.removeWithFunction(b[a.elementId],function(b){return b.id==a.id}),u(a)},this.clearFor=function(a){delete b[a],b[a]=[]};var v=function(b,c,d,e,f,g,h,i,j,k,l,m){var n=-1,o=-1,p=e.endpoints[h],q=p.id,r=[1,0][h],s=[[c,d],e,f,g,q],t=b[j],u=p._continuousAnchorEdge?b[p._continuousAnchorEdge]:null;if(u){var v=jsPlumbUtil.findWithFunction(u,function(a){return a[4]==q});if(-1!=v){u.splice(v,1);for(var w=0;w<u.length;w++)jsPlumbUtil.addWithFunction(l,u[w][1],function(a){return a.id==u[w][1].id}),jsPlumbUtil.addWithFunction(m,u[w][1].endpoints[h],function(a){return a.id==u[w][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,u[w][1].endpoints[r],function(a){return a.id==u[w][1].endpoints[r].id})}}for(w=0;w<t.length;w++)1==a.idx&&t[w][3]===g&&-1==o&&(o=w),jsPlumbUtil.addWithFunction(l,t[w][1],function(a){return a.id==t[w][1].id}),jsPlumbUtil.addWithFunction(m,t[w][1].endpoints[h],function(a){return a.id==t[w][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,t[w][1].endpoints[r],function(a){return a.id==t[w][1].endpoints[r].id});if(-1!=n)t[n]=s;else{var x=i?-1!=o?o:0:t.length;t.splice(x,0,s)}p._continuousAnchorEdge=j};this.updateOtherEndpoint=function(a,b,c,d){var e=jsPlumbUtil.findWithFunction(i[a],function(a){return a[0].id===d.id}),f=jsPlumbUtil.findWithFunction(i[b],function(a){return a[0].id===d.id});-1!=e&&(i[a][e][0]=d,i[a][e][1]=d.endpoints[1],i[a][e][2]=d.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor),f>-1&&(i[b].splice(f,1),jsPlumbUtil.addToList(i,c,[d,d.endpoints[0],d.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor]))},this.sourceChanged=function(a,b,c){if(a!==b){jsPlumbUtil.removeWithFunction(i[a],function(a){return a[0].id===c.id});var d=jsPlumbUtil.findWithFunction(i[c.targetId],function(a){return a[0].id===c.id});d>-1&&(i[c.targetId][d][0]=c,i[c.targetId][d][1]=c.endpoints[0],i[c.targetId][d][2]=c.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor),jsPlumbUtil.addToList(i,b,[c,c.endpoints[1],c.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor])}},this.rehomeEndpoint=function(a,c,d){var e=b[c]||[],f=l.getId(d);if(f!==c){var g=jsPlumbUtil.indexOf(e,a);if(g>-1){var h=e.splice(g,1)[0];
j.add(h,f)}}for(var i=0;i<a.connections.length;i++)a.connections[i].sourceId==c?(a.connections[i].sourceId=a.elementId,a.connections[i].source=a.element,j.sourceChanged(c,a.elementId,a.connections[i])):a.connections[i].targetId==c&&(a.connections[i].targetId=a.elementId,a.connections[i].target=a.element,j.updateOtherEndpoint(a.connections[i].sourceId,c,a.elementId,a.connections[i]))},this.redraw=function(a,c,d,e,f,g){if(!l.isSuspendDrawing()){var h=b[a]||[],j=i[a]||[],o=[],p=[],q=[];d=d||l.timestamp(),e=e||{left:0,top:0},c&&(c={left:c.left+e.left,top:c.top+e.top});for(var r=l.updateOffset({elId:a,offset:c,recalc:!1,timestamp:d}),s={},u=0;u<j.length;u++){var w=j[u][0],x=w.sourceId,y=w.targetId,z=w.endpoints[0].anchor.isContinuous,A=w.endpoints[1].anchor.isContinuous;if(z||A){var B=x+"_"+y,C=s[B],D=w.sourceId==a?1:0;z&&!k[x]&&(k[x]={top:[],right:[],bottom:[],left:[]}),A&&!k[y]&&(k[y]={top:[],right:[],bottom:[],left:[]}),a!=y&&l.updateOffset({elId:y,timestamp:d}),a!=x&&l.updateOffset({elId:x,timestamp:d});var E=l.getCachedData(y),F=l.getCachedData(x);y==x&&(z||A)?v(k[x],-Math.PI/2,0,w,!1,y,0,!1,"top",x,o,p):(C||(C=n(x,y,F.o,E.o,w.endpoints[0].anchor,w.endpoints[1].anchor),s[B]=C),z&&v(k[x],C.theta,0,w,!1,y,0,!1,C.a[0],x,o,p),A&&v(k[y],C.theta2,-1,w,!0,x,1,!0,C.a[1],y,o,p)),z&&jsPlumbUtil.addWithFunction(q,x,function(a){return a===x}),A&&jsPlumbUtil.addWithFunction(q,y,function(a){return a===y}),jsPlumbUtil.addWithFunction(o,w,function(a){return a.id==w.id}),(z&&0===D||A&&1===D)&&jsPlumbUtil.addWithFunction(p,w.endpoints[D],function(a){return a.id==w.endpoints[D].id})}}for(u=0;u<h.length;u++)0===h[u].connections.length&&h[u].anchor.isContinuous&&(k[a]||(k[a]={top:[],right:[],bottom:[],left:[]}),v(k[a],-Math.PI/2,0,{endpoints:[h[u],h[u]],paint:function(){}},!1,a,0,!1,"top",a,o,p),jsPlumbUtil.addWithFunction(q,a,function(b){return b===a}));for(u=0;u<q.length;u++)t(q[u],k[q[u]]);for(u=0;u<h.length;u++)h[u].paint({timestamp:d,offset:r,dimensions:r.s,recalc:g!==!0});for(u=0;u<p.length;u++){var G=l.getCachedData(p[u].elementId);p[u].paint({timestamp:d,offset:G,dimensions:G.s})}for(u=0;u<j.length;u++){var H=j[u][1];if(H.anchor.constructor==jsPlumb.DynamicAnchor){H.paint({elementWithPrecedence:a,timestamp:d}),jsPlumbUtil.addWithFunction(o,j[u][0],function(a){return a.id==j[u][0].id});for(var I=0;I<H.connections.length;I++)H.connections[I]!==j[u][0]&&jsPlumbUtil.addWithFunction(o,H.connections[I],function(a){return a.id==H.connections[I].id})}else H.anchor.constructor==jsPlumb.Anchor&&jsPlumbUtil.addWithFunction(o,j[u][0],function(a){return a.id==j[u][0].id})}var J=m[a];for(J&&J.paint({timestamp:d,recalc:!1,elId:a}),u=0;u<o.length;u++){var K=d;o[u].paint({elId:a,timestamp:K,recalc:!1,clearEdits:f})}}};var w=function(a){jsPlumbUtil.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var b=a.faces||["top","right","bottom","left"],c=!(a.clockwise===!1),g={},h={top:"bottom",right:"left",left:"right",bottom:"top"},i={top:"right",right:"bottom",left:"top",bottom:"left"},j={top:"left",right:"top",left:"bottom",bottom:"right"},k=c?i:j,l=c?j:i,m=a.cssClass||"",n=0;n<b.length;n++)g[b[n]]=!0;this.verifyEdge=function(a){return g[a]?a:g[h[a]]?h[a]:g[k[a]]?k[a]:g[l[a]]?l[a]:a},this.isEdgeSupported=function(a){return g[a]===!0},this.compute=function(a){return e[a.element.id]||d[a.element.id]||[0,0]},this.getCurrentLocation=function(a){return e[a.element.id]||d[a.element.id]||[0,0]},this.getOrientation=function(a){return f[a.id]||[0,0]},this.clearUserDefinedLocation=function(){delete e[a.elementId]},this.setUserDefinedLocation=function(b){e[a.elementId]=b},this.getCssClass=function(){return m},this.setCssClass=function(a){m=a}};l.continuousAnchorFactory={get:function(a){var b=c[a.elementId];return b||(b=new w(a),c[a.elementId]=b),b},clear:function(a){delete c[a]}}},jsPlumb.Anchor=function(a){this.x=a.x||0,this.y=a.y||0,this.elementId=a.elementId,this.cssClass=a.cssClass||"",this.userDefinedLocation=null,this.orientation=a.orientation||[0,0],jsPlumbUtil.EventGenerator.apply(this),a.jsPlumbInstance,this.lastReturnValue=null,this.offsets=a.offsets||[0,0],this.timestamp=null,this.compute=function(a){var b=a.xy,c=a.wh,d=(a.element,a.timestamp);return a.clearUserDefinedLocation&&(this.userDefinedLocation=null),d&&d===self.timestamp?this.lastReturnValue:(this.lastReturnValue=null!=this.userDefinedLocation?this.userDefinedLocation:[b[0]+this.x*c[0]+this.offsets[0],b[1]+this.y*c[1]+this.offsets[1]],this.timestamp=d,this.lastReturnValue)},this.getCurrentLocation=function(a){return null==this.lastReturnValue||null!=a.timestamp&&this.timestamp!=a.timestamp?this.compute(a):this.lastReturnValue}},jsPlumbUtil.extend(jsPlumb.Anchor,jsPlumbUtil.EventGenerator,{equals:function(a){if(!a)return!1;var b=a.getOrientation(),c=this.getOrientation();return this.x==a.x&&this.y==a.y&&this.offsets[0]==a.offsets[0]&&this.offsets[1]==a.offsets[1]&&c[0]==b[0]&&c[1]==b[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(a){this.userDefinedLocation=a},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),jsPlumb.FloatingAnchor=function(a){jsPlumb.Anchor.apply(this,arguments);var b=a.reference,c=(a.jsPlumbInstance,a.referenceCanvas),d=jsPlumb.getSize(c),e=0,f=0,g=null,h=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(a){var b=a.xy,c=(a.element,[b[0]+d[0]/2,b[1]+d[1]/2]);return h=c,c},this.getOrientation=function(a){if(g)return g;var c=b.getOrientation(a);return[-1*Math.abs(c[0])*e,-1*Math.abs(c[1])*f]},this.over=function(a,b){g=a.getOrientation(b)},this.out=function(){g=null},this.getCurrentLocation=function(a){return null==h?this.compute(a):h}},jsPlumbUtil.extend(jsPlumb.FloatingAnchor,jsPlumb.Anchor);var a=function(a,b,c){return a.constructor==jsPlumb.Anchor?a:b.makeAnchor(a,c,b)};jsPlumb.DynamicAnchor=function(b){jsPlumb.Anchor.apply(this,arguments),this.isSelective=!0,this.isDynamic=!0,this.anchors=[],this.elementId=b.elementId,this.jsPlumbInstance=b.jsPlumbInstance;for(var c=0;c<b.anchors.length;c++)this.anchors[c]=a(b.anchors[c],this.jsPlumbInstance,this.elementId);this.addAnchor=function(b){this.anchors.push(a(b,this.jsPlumbInstance,this.elementId))},this.getAnchors=function(){return this.anchors},this.locked=!1;var d=this.anchors.length>0?this.anchors[0]:null,e=(this.anchors.length>0?0:-1,d),f=this,g=function(a,b,c,d,e){var f=d[0]+a.x*e[0],g=d[1]+a.y*e[1],h=d[0]+e[0]/2,i=d[1]+e[1]/2;return Math.sqrt(Math.pow(b-f,2)+Math.pow(c-g,2))+Math.sqrt(Math.pow(h-f,2)+Math.pow(i-g,2))},h=b.selector||function(a,b,c,d,e){for(var f=c[0]+d[0]/2,h=c[1]+d[1]/2,i=-1,j=1/0,k=0;k<e.length;k++){var l=g(e[k],f,h,a,b);j>l&&(i=k+0,j=l)}return e[i]};this.compute=function(a){var b=a.xy,c=a.wh,g=a.timestamp,i=a.txy,j=a.twh;a.clearUserDefinedLocation&&(userDefinedLocation=null),this.timestamp=g;var k=f.getUserDefinedLocation();return null!=k?k:this.locked||null==i||null==j?d.compute(a):(a.timestamp=null,d=h(b,c,i,j,this.anchors),this.x=d.x,this.y=d.y,d!=e&&this.fire("anchorChanged",d),e=d,d.compute(a))},this.getCurrentLocation=function(a){return this.getUserDefinedLocation()||(null!=d?d.getCurrentLocation(a):null)},this.getOrientation=function(a){return null!=d?d.getOrientation(a):[0,0]},this.over=function(a,b){null!=d&&d.over(a,b)},this.out=function(){null!=d&&d.out()},this.getCssClass=function(){return d&&d.getCssClass()||""}},jsPlumbUtil.extend(jsPlumb.DynamicAnchor,jsPlumb.Anchor);var b=function(a,b,c,d,e,f){jsPlumb.Anchors[e]=function(g){var h=g.jsPlumbInstance.makeAnchor([a,b,c,d,0,0],g.elementId,g.jsPlumbInstance);return h.type=e,f&&f(h,g),h}};b(.5,0,0,-1,"TopCenter"),b(.5,1,0,1,"BottomCenter"),b(0,.5,-1,0,"LeftMiddle"),b(1,.5,1,0,"RightMiddle"),b(.5,0,0,-1,"Top"),b(.5,1,0,1,"Bottom"),b(0,.5,-1,0,"Left"),b(1,.5,1,0,"Right"),b(.5,.5,0,0,"Center"),b(1,0,0,-1,"TopRight"),b(1,1,0,1,"BottomRight"),b(0,0,0,-1,"TopLeft"),b(0,1,0,1,"BottomLeft"),jsPlumb.Defaults.DynamicAnchors=function(a){return a.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],a.elementId,a.jsPlumbInstance)},jsPlumb.Anchors.AutoDefault=function(a){var b=a.jsPlumbInstance.makeDynamicAnchor(jsPlumb.Defaults.DynamicAnchors(a));return b.type="AutoDefault",b};var c=function(a,b){jsPlumb.Anchors[a]=function(c){var d=c.jsPlumbInstance.makeAnchor(["Continuous",{faces:b}],c.elementId,c.jsPlumbInstance);return d.type=a,d}};jsPlumb.Anchors.Continuous=function(a){return a.jsPlumbInstance.continuousAnchorFactory.get(a)},c("ContinuousLeft",["left"]),c("ContinuousTop",["top"]),c("ContinuousBottom",["bottom"]),c("ContinuousRight",["right"]),b(0,0,0,0,"Assign",function(a,b){var c=b.position||"Fixed";a.positionFinder=c.constructor==String?b.jsPlumbInstance.AnchorPositionFinders[c]:c,a.constructorParams=b}),jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(a,b,c){return[(a.left-b.left)/c[0],(a.top-b.top)/c[1]]},Grid:function(a,b,c,d){var e=a.left-b.left,f=a.top-b.top,g=c[0]/d.grid[0],h=c[1]/d.grid[1],i=Math.floor(e/g),j=Math.floor(f/h);return[(i*g+g/2)/c[0],(j*h+h/2)/c[1]]}},jsPlumb.Anchors.Perimeter=function(a){a=a||{};var b=a.anchorCount||60,c=a.shape;if(!c)throw new Error("no shape supplied to Perimeter Anchor type");var d=function(){for(var a=.5,c=2*Math.PI/b,d=0,e=[],f=0;b>f;f++){var g=a+a*Math.sin(d),h=a+a*Math.cos(d);e.push([g,h,0,0]),d+=c}return e},e=function(a){for(var c=b/a.length,d=[],e=function(a,e,f,g,h){c=b*h;for(var i=(f-a)/c,j=(g-e)/c,k=0;c>k;k++)d.push([a+i*k,e+j*k,0,0])},f=0;f<a.length;f++)e.apply(null,a[f]);return d},f=function(a){for(var b=[],c=0;c<a.length;c++)b.push([a[c][0],a[c][1],a[c][2],a[c][3],1/a.length]);return e(b)},g=function(){return f([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},h={Circle:d,Ellipse:d,Diamond:function(){return f([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:g,Square:g,Triangle:function(){return f([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(a){for(var b=a.points,c=[],d=0,f=0;f<b.length-1;f++){var g=Math.sqrt(Math.pow(b[f][2]-b[f][0])+Math.pow(b[f][3]-b[f][1]));d+=g,c.push([b[f][0],b[f][1],b[f+1][0],b[f+1][1],g])}for(var h=0;h<c.length;h++)c[h][4]=c[h][4]/d;return e(c)}},i=function(a,b){for(var c=[],d=b/180*Math.PI,e=0;e<a.length;e++){var f=a[e][0]-.5,g=a[e][1]-.5;c.push([.5+(f*Math.cos(d)-g*Math.sin(d)),.5+(f*Math.sin(d)+g*Math.cos(d)),a[e][2],a[e][3]])}return c};if(!h[c])throw new Error("Shape ["+c+"] is unknown by Perimeter Anchor type");var j=h[c](a);a.rotation&&(j=i(j,a.rotation));var k=a.jsPlumbInstance.makeDynamicAnchor(j);return k.type="Perimeter",k}}(),function(){"use strict";jsPlumb.DOMElementComponent=jsPlumbUtil.extend(jsPlumb.jsPlumbUIComponent,function(){this.mousemove=this.dblclick=this.click=this.mousedown=this.mouseup=function(){}}),jsPlumb.Segments={AbstractSegment:function(a){this.params=a,this.findClosestPointOnPath=function(){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(a.x1,a.x2),minY:Math.min(a.y1,a.y2),maxX:Math.max(a.x1,a.x2),maxY:Math.max(a.y1,a.y2)}}},Straight:function(a){var b,c,d,e,f,g,h,i=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(){b=Math.sqrt(Math.pow(f-e,2)+Math.pow(h-g,2)),c=Biltong.gradient({x:e,y:g},{x:f,y:h}),d=-1/c});this.type="Straight",this.getLength=function(){return b},this.getGradient=function(){return c},this.getCoordinates=function(){return{x1:e,y1:g,x2:f,y2:h}},this.setCoordinates=function(a){e=a.x1,g=a.y1,f=a.x2,h=a.y2,i()},this.setCoordinates({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}),this.getBounds=function(){return{minX:Math.min(e,f),minY:Math.min(g,h),maxX:Math.max(e,f),maxY:Math.max(g,h)}},this.pointOnPath=function(a,c){if(0!==a||c){if(1!=a||c){var d=c?a>0?a:b+a:a*b;return Biltong.pointOnLine({x:e,y:g},{x:f,y:h},d)}return{x:f,y:h}}return{x:e,y:g}},this.gradientAtPoint=function(){return c},this.pointAlongPathFrom=function(a,b,c){var d=this.pointOnPath(a,c),i=0>=b?{x:e,y:g}:{x:f,y:h};return 0>=b&&Math.abs(b)>1&&(b*=-1),Biltong.pointOnLine(d,i,b)};var j=function(a,b,c){return c>=Math.min(a,b)&&c<=Math.max(a,b)},k=function(a,b,c){return Math.abs(c-a)<Math.abs(c-b)?a:b};this.findClosestPointOnPath=function(a,i){var l={d:1/0,x:null,y:null,l:null,x1:e,x2:f,y1:g,y2:h};if(0===c)l.y=g,l.x=j(e,f,a)?a:k(e,f,a);else if(1/0==c||c==-1/0)l.x=e,l.y=j(g,h,i)?i:k(g,h,i);else{var m=g-c*e,n=i-d*a,o=(n-m)/(c-d),p=c*o+m;l.x=j(e,f,o)?o:k(e,f,o),l.y=j(g,h,p)?p:k(g,h,p)}var q=Biltong.lineLength([l.x,l.y],[e,g]);return l.d=Biltong.lineLength([a,i],[l.x,l.y]),l.l=q/b,l}},Arc:function(a){var b=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(b,c){return Biltong.theta([a.cx,a.cy],[b,c])}),c=function(a,b){if(a.anticlockwise){var c=a.startAngle<a.endAngle?a.startAngle+d:a.startAngle,e=Math.abs(c-a.endAngle);return c-e*b}var f=a.endAngle<a.startAngle?a.endAngle+d:a.endAngle,g=Math.abs(f-a.startAngle);return a.startAngle+g*b},d=2*Math.PI;this.radius=a.r,this.anticlockwise=a.ac,this.type="Arc",a.startAngle&&a.endAngle?(this.startAngle=a.startAngle,this.endAngle=a.endAngle,this.x1=a.cx+this.radius*Math.cos(a.startAngle),this.y1=a.cy+this.radius*Math.sin(a.startAngle),this.x2=a.cx+this.radius*Math.cos(a.endAngle),this.y2=a.cy+this.radius*Math.sin(a.endAngle)):(this.startAngle=b(a.x1,a.y1),this.endAngle=b(a.x2,a.y2),this.x1=a.x1,this.y1=a.y1,this.x2=a.x2,this.y2=a.y2),this.endAngle<0&&(this.endAngle+=d),this.startAngle<0&&(this.startAngle+=d),this.segment=Biltong.quadrant([this.x1,this.y1],[this.x2,this.y2]);var e=this.endAngle<this.startAngle?this.endAngle+d:this.endAngle;this.sweep=Math.abs(e-this.startAngle),this.anticlockwise&&(this.sweep=d-this.sweep);var f=2*Math.PI*this.radius,g=this.sweep/d,h=f*g;this.getLength=function(){return h},this.getBounds=function(){return{minX:a.cx-a.r,maxX:a.cx+a.r,minY:a.cy-a.r,maxY:a.cy+a.r}};var i=1e-10,j=function(a){var b=Math.floor(a),c=Math.ceil(a);return i>a-b?b:i>c-a?c:a};this.pointOnPath=function(b,d){if(0===b)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1==b)return{x:this.x2,y:this.y2,theta:this.endAngle};d&&(b/=h);var e=c(this,b),f=a.cx+a.r*Math.cos(e),g=a.cy+a.r*Math.sin(e);return{x:j(f),y:j(g),theta:e}},this.gradientAtPoint=function(b,c){var d=this.pointOnPath(b,c),e=Biltong.normal([a.cx,a.cy],[d.x,d.y]);return this.anticlockwise||1/0!=e&&e!=-1/0||(e*=-1),e},this.pointAlongPathFrom=function(b,c,d){var e=this.pointOnPath(b,d),g=2*(c/f)*Math.PI,h=this.anticlockwise?-1:1,i=e.theta+h*g,j=a.cx+this.radius*Math.cos(i),k=a.cy+this.radius*Math.sin(i);return{x:j,y:k}}},Bezier:function(a){var b=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),[{x:a.x1,y:a.y1},{x:a.cp1x,y:a.cp1y},{x:a.cp2x,y:a.cp2y},{x:a.x2,y:a.y2}]),c={minX:Math.min(a.x1,a.x2,a.cp1x,a.cp2x),minY:Math.min(a.y1,a.y2,a.cp1y,a.cp2y),maxX:Math.max(a.x1,a.x2,a.cp1x,a.cp2x),maxY:Math.max(a.y1,a.y2,a.cp1y,a.cp2y)};this.type="Bezier";var d=function(a,b,c){return c&&(b=jsBezier.locationAlongCurveFrom(a,b>0?0:1,b)),b};this.pointOnPath=function(a,c){return a=d(b,a,c),jsBezier.pointOnCurve(b,a)},this.gradientAtPoint=function(a,c){return a=d(b,a,c),jsBezier.gradientAtPoint(b,a)},this.pointAlongPathFrom=function(a,c,e){return a=d(b,a,e),jsBezier.pointAlongCurveFrom(b,a,c)},this.getLength=function(){return jsBezier.getLength(b)},this.getBounds=function(){return c}}};var a=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};jsPlumb.Connectors.AbstractConnector=function(b){a.apply(this,arguments);var c=[],d=0,e=[],f=[],g=b.stub||0,h=jsPlumbUtil.isArray(g)?g[0]:g,i=jsPlumbUtil.isArray(g)?g[1]:g,j=b.gap||0,k=jsPlumbUtil.isArray(j)?j[0]:j,l=jsPlumbUtil.isArray(j)?j[1]:j,m=null,n=!1,o=null;this.isEditable=function(){return!1},this.setEdited=function(a){n=a},this.getPath=function(){},this.setPath=function(){},this.findSegmentForPoint=function(a,b){for(var d={d:1/0,s:null,x:null,y:null,l:null},e=0;e<c.length;e++){var f=c[e].findClosestPointOnPath(a,b);f.d<d.d&&(d.d=f.d,d.l=f.l,d.x=f.x,d.y=f.y,d.s=c[e],d.x1=f.x1,d.x2=f.x2,d.y1=f.y1,d.y2=f.y2,d.index=e)}return d};var p=function(){for(var a=0,b=0;b<c.length;b++){var g=c[b].getLength();f[b]=g/d,e[b]=[a,a+=g/d]}},q=function(a,b){b&&(a=a>0?a/d:(d+a)/d);for(var g=e.length-1,h=1,i=0;i<e.length;i++)if(e[i][1]>=a){g=i,h=1==a?1:0===a?0:(a-e[i][0])/f[i];break}return{segment:c[g],proportion:h,index:g}},r=function(a,b,e){if(e.x1!=e.x2||e.y1!=e.y2){var f=new jsPlumb.Segments[b](e);c.push(f),d+=f.getLength(),a.updateBounds(f)}},s=function(){d=c.length=e.length=f.length=0};this.setSegments=function(a){m=[],d=0;for(var b=0;b<a.length;b++)m.push(a[b]),d+=a[b].getLength()};var t=function(a){this.lineWidth=a.lineWidth;var b=Biltong.quadrant(a.sourcePos,a.targetPos),c=a.targetPos[0]<a.sourcePos[0],d=a.targetPos[1]<a.sourcePos[1],e=a.lineWidth||1,f=a.sourceEndpoint.anchor.getOrientation(a.sourceEndpoint),g=a.targetEndpoint.anchor.getOrientation(a.targetEndpoint),j=c?a.targetPos[0]:a.sourcePos[0],m=d?a.targetPos[1]:a.sourcePos[1],n=Math.abs(a.targetPos[0]-a.sourcePos[0]),o=Math.abs(a.targetPos[1]-a.sourcePos[1]);if(0===f[0]&&0===f[1]||0===g[0]&&0===g[1]){var p=n>o?0:1,q=[1,0][p];f=[],g=[],f[p]=a.sourcePos[p]>a.targetPos[p]?-1:1,g[p]=a.sourcePos[p]>a.targetPos[p]?1:-1,f[q]=0,g[q]=0}var r=c?n+k*f[0]:k*f[0],s=d?o+k*f[1]:k*f[1],t=c?l*g[0]:n+l*g[0],u=d?l*g[1]:o+l*g[1],v=f[0]*g[0]+f[1]*g[1],w={sx:r,sy:s,tx:t,ty:u,lw:e,xSpan:Math.abs(t-r),ySpan:Math.abs(u-s),mx:(r+t)/2,my:(s+u)/2,so:f,to:g,x:j,y:m,w:n,h:o,segment:b,startStubX:r+f[0]*h,startStubY:s+f[1]*h,endStubX:t+g[0]*i,endStubY:u+g[1]*i,isXGreaterThanStubTimes2:Math.abs(r-t)>h+i,isYGreaterThanStubTimes2:Math.abs(s-u)>h+i,opposite:-1==v,perpendicular:0===v,orthogonal:1==v,sourceAxis:0===f[0]?"y":"x",points:[j,m,n,o,r,s,t,u]};return w.anchorOrientation=w.opposite?"opposite":w.orthogonal?"orthogonal":"perpendicular",w};return this.getSegments=function(){return c},this.updateBounds=function(a){var b=a.getBounds();this.bounds.minX=Math.min(this.bounds.minX,b.minX),this.bounds.maxX=Math.max(this.bounds.maxX,b.maxX),this.bounds.minY=Math.min(this.bounds.minY,b.minY),this.bounds.maxY=Math.max(this.bounds.maxY,b.maxY)},this.pointOnPath=function(a,b){var c=q(a,b);return c.segment&&c.segment.pointOnPath(c.proportion,!1)||[0,0]},this.gradientAtPoint=function(a,b){var c=q(a,b);return c.segment&&c.segment.gradientAtPoint(c.proportion,!1)||0},this.pointAlongPathFrom=function(a,b,c){var d=q(a,c);return d.segment&&d.segment.pointAlongPathFrom(d.proportion,b,!1)||[0,0]},this.compute=function(a){n||(o=t.call(this,a)),s(),this._compute(o,a),this.x=o.points[0],this.y=o.points[1],this.w=o.points[2],this.h=o.points[3],this.segment=o.segment,p()},{addSegment:r,prepareCompute:t,sourceStub:h,targetStub:i,maxStub:Math.max(h,i),sourceGap:k,targetGap:l,maxGap:Math.max(k,l)}},jsPlumbUtil.extend(jsPlumb.Connectors.AbstractConnector,a);var b=jsPlumb.Connectors.Straight=function(){this.type="Straight";var a=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(b){a.addSegment(this,"Straight",{x1:b.sx,y1:b.sy,x2:b.startStubX,y2:b.startStubY}),a.addSegment(this,"Straight",{x1:b.startStubX,y1:b.startStubY,x2:b.endStubX,y2:b.endStubY}),a.addSegment(this,"Straight",{x1:b.endStubX,y1:b.endStubY,x2:b.tx,y2:b.ty})}};jsPlumbUtil.extend(jsPlumb.Connectors.Straight,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(b,"Straight"),jsPlumb.Endpoints.AbstractEndpoint=function(b){a.apply(this,arguments);var c=this.compute=function(){var a=this._compute.apply(this,arguments);return this.x=a[0],this.y=a[1],this.w=a[2],this.h=a[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,a};return{compute:c,cssClass:b.cssClass}},jsPlumbUtil.extend(jsPlumb.Endpoints.AbstractEndpoint,a),jsPlumb.Endpoints.Dot=function(a){this.type="Dot",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.radius=a.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(a,b,c){this.radius=c.radius||this.radius;var d=a[0]-this.radius,e=a[1]-this.radius,f=2*this.radius,g=2*this.radius;if(c.strokeStyle){var h=c.lineWidth||1;d-=h,e-=h,f+=2*h,g+=2*h}return[d,e,f,g,this.radius]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Dot,jsPlumb.Endpoints.AbstractEndpoint),jsPlumb.Endpoints.Rectangle=function(a){this.type="Rectangle",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.width=a.width||20,this.height=a.height||20,this._compute=function(a,b,c){var d=c.width||this.width,e=c.height||this.height,f=a[0]-d/2,g=a[1]-e/2;return[f,g,d,e]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Rectangle,jsPlumb.Endpoints.AbstractEndpoint);var c=function(){jsPlumb.DOMElementComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};jsPlumbUtil.extend(c,jsPlumb.DOMElementComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(a){this._jsPlumb.displayElements.push(a)}}),jsPlumb.Endpoints.Image=function(a){this.type="Image",c.apply(this,arguments),jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);var b=a.onload,d=a.src||a.url,e=a.cssClass?" "+a.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=a.width,this._jsPlumb.heightToUse=a.height,this._jsPlumb.endpoint=a.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,b&&b(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(a,c){var d=a.constructor==String?a:a.src;b=c,this._jsPlumb.img.src=d,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(d,b),this._compute=function(a){return this.anchorPoint=a,this._jsPlumb.ready?[a[0]-this._jsPlumb.widthToUse/2,a[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=document.createElement("img"),this.canvas.style.margin=0,this.canvas.style.padding=0,this.canvas.style.outline=0,this.canvas.style.position="absolute",this.canvas.className=this._jsPlumb.instance.endpointClass+e,this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.attachListeners(this.canvas,this),this.actuallyPaint=function(){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var a=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,b=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;jsPlumbUtil.sizeElement(this.canvas,a,b,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(a,b){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(a,b):window.setTimeout(function(){this.paint(a,b)}.bind(this),200))}},jsPlumbUtil.extend(jsPlumb.Endpoints.Image,[c,jsPlumb.Endpoints.AbstractEndpoint],{cleanup:function(){this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null}}),jsPlumb.Endpoints.Blank=function(){jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",c.apply(this,arguments),this._compute=function(a){return[a[0],a[1],10,0]},this.canvas=document.createElement("div"),this.canvas.style.display="block",this.canvas.style.width="1px",this.canvas.style.height="1px",this.canvas.style.background="transparent",this.canvas.style.position="absolute",this.canvas.className=this._jsPlumb.endpointClass,jsPlumb.appendElement(this.canvas),this.paint=function(){jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},jsPlumbUtil.extend(jsPlumb.Endpoints.Blank,[jsPlumb.Endpoints.AbstractEndpoint,c],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),jsPlumb.Endpoints.Triangle=function(a){this.type="Triangle",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},a.width=a.width||55,a.height=a.height||55,this.width=a.width,this.height=a.height,this._compute=function(a,b,c){var d=c.width||self.width,e=c.height||self.height,f=a[0]-d/2,g=a[1]-e/2;return[f,g,d,e]}};var d=jsPlumb.Overlays.AbstractOverlay=function(a){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=a.component,this.loc=null==a.location?.5:a.location,this.endpointLoc=null==a.endpointLocation?[.5,.5]:a.endpointLocation};d.prototype={cleanup:function(){this.component=null,this.canvas=null,this.endpointLoc=null},setVisible:function(a){this.visible=a,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(a){this.loc+=a,this.component.repaint()},setLocation:function(a){this.loc=a,this.component.repaint()},getLocation:function(){return this.loc}},jsPlumb.Overlays.Arrow=function(a){this.type="Arrow",d.apply(this,arguments),this.isAppendedAtTopLevel=!1,a=a||{};var b=jsPlumbUtil,c=Biltong;this.length=a.length||20,this.width=a.width||20,this.id=a.id;var e=(a.direction||1)<0?-1:1,f=a.paintStyle||{lineWidth:1},g=a.foldback||.623;this.computeMaxSize=function(){return 1.5*self.width},this.draw=function(a,d){var h,i,j,k,l;if(a.pointAlongPathFrom){if(b.isString(this.loc)||this.loc>1||this.loc<0){var m=parseInt(this.loc,10),n=this.loc<0?1:0;h=a.pointAlongPathFrom(n,m,!1),i=a.pointAlongPathFrom(n,m-e*this.length/2,!1),j=c.pointOnLine(h,i,this.length)}else if(1==this.loc){if(h=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,-this.length),j=c.pointOnLine(h,i,this.length),-1==e){var o=j;j=h,h=o}}else if(0===this.loc){if(j=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,this.length),h=c.pointOnLine(j,i,this.length),-1==e){var p=j;j=h,h=p}}else h=a.pointAlongPathFrom(this.loc,e*this.length/2),i=a.pointOnPath(this.loc),j=c.pointOnLine(h,i,this.length);k=c.perpendicularLineTo(h,j,this.width),l=c.pointOnLine(h,j,g*this.length);var q={hxy:h,tail:k,cxy:l},r=f.strokeStyle||d.strokeStyle,s=f.fillStyle||d.strokeStyle,t=f.lineWidth||d.lineWidth,u={component:a,d:q,lineWidth:t,strokeStyle:r,fillStyle:s,minX:Math.min(h.x,k[0].x,k[1].x),maxX:Math.max(h.x,k[0].x,k[1].x),minY:Math.min(h.y,k[0].y,k[1].y),maxY:Math.max(h.y,k[0].y,k[1].y)};return u}return{component:a,minX:0,maxX:0,minY:0,maxY:0}}},jsPlumbUtil.extend(jsPlumb.Overlays.Arrow,d),jsPlumb.Overlays.PlainArrow=function(a){a=a||{};var b=jsPlumb.extend(a,{foldback:1});jsPlumb.Overlays.Arrow.call(this,b),this.type="PlainArrow"},jsPlumbUtil.extend(jsPlumb.Overlays.PlainArrow,jsPlumb.Overlays.Arrow),jsPlumb.Overlays.Diamond=function(a){a=a||{};var b=a.length||40,c=jsPlumb.extend(a,{length:b/2,foldback:2});jsPlumb.Overlays.Arrow.call(this,c),this.type="Diamond"},jsPlumbUtil.extend(jsPlumb.Overlays.Diamond,jsPlumb.Overlays.Arrow);var e=function(a,b){return(null==a._jsPlumb.cachedDimensions||b)&&(a._jsPlumb.cachedDimensions=a.getDimensions()),a._jsPlumb.cachedDimensions},f=function(a){jsPlumb.DOMElementComponent.apply(this,arguments),d.apply(this,arguments),this.id=a.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=a.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=a.create,this._jsPlumb.initiallyInvisible=a.visible===!1,this.getElement=function(){if(null==this._jsPlumb.div){var b=this._jsPlumb.div=jsPlumb.getDOMElement(this._jsPlumb.create(this._jsPlumb.component));b.style.position="absolute";var c=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:a.cssClass?a.cssClass:"");b.className=c,this._jsPlumb.instance.appendElement(b),this._jsPlumb.instance.getId(b),this.attachListeners(b,this),this.canvas=b,a.visible===!1&&(b.style.display="none")}return this._jsPlumb.div},this.draw=function(a,b,c){var d=e(this);if(null!=d&&2==d.length){var f={x:0,y:0};if(c)f={x:c[0],y:c[1]};else if(a.pointOnPath){var g=this.loc,h=!1;(jsPlumbUtil.isString(this.loc)||this.loc<0||this.loc>1)&&(g=parseInt(this.loc,10),h=!0),f=a.pointOnPath(g,h)}else{var i=this.loc.constructor==Array?this.loc:this.endpointLoc;f={x:i[0]*a.w,y:i[1]*a.h}}var j=f.x-d[0]/2,k=f.y-d[1]/2;return{component:a,d:{minx:j,miny:k,td:d,cxy:f},minX:j,maxX:j+d[0],minY:k,maxY:k+d[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};jsPlumbUtil.extend(f,[jsPlumb.DOMElementComponent,d],{getDimensions:function(){return jsPlumb.getSize(this.getElement())},setVisible:function(a){this._jsPlumb.div.style.display=a?"block":"none",a&&this._jsPlumb.initiallyInvisible&&(e(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1)},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(){null!=this._jsPlumb.div&&this._jsPlumb.instance.removeElement(this._jsPlumb.div)},computeMaxSize:function(){var a=e(this);return Math.max(a[0],a[1])},reattachListeners:function(a){this._jsPlumb.div&&this.reattachListenersForElement(this._jsPlumb.div,this,a)},paint:function(a){this._jsPlumb.initialised||(this.getElement(),a.component.appendDisplayElement(this._jsPlumb.div),this.attachListeners(this._jsPlumb.div,a.component),this._jsPlumb.initialised=!0),this._jsPlumb.div.style.left=a.component.x+a.d.minx+"px",this._jsPlumb.div.style.top=a.component.y+a.d.miny+"px"}}),jsPlumb.Overlays.Custom=function(){this.type="Custom",f.apply(this,arguments)},jsPlumbUtil.extend(jsPlumb.Overlays.Custom,f),jsPlumb.Overlays.GuideLines=function(){var a=this;a.length=50,a.lineWidth=5,this.type="GuideLines",d.apply(this,arguments),jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.draw=function(b){var c=b.pointAlongPathFrom(a.loc,a.length/2),d=b.pointOnPath(a.loc),e=Biltong.pointOnLine(c,d,a.length),f=Biltong.perpendicularLineTo(c,e,40),g=Biltong.perpendicularLineTo(e,c,20);return{connector:b,head:c,tail:e,headLine:g,tailLine:f,minX:Math.min(c.x,e.x,g[0].x,g[1].x),minY:Math.min(c.y,e.y,g[0].y,g[1].y),maxX:Math.max(c.x,e.x,g[0].x,g[1].x),maxY:Math.max(c.y,e.y,g[0].y,g[1].y)}}},jsPlumb.Overlays.Label=function(a){this.labelStyle=a.labelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var b=jsPlumb.extend({create:function(){return document.createElement("div")}},a);if(jsPlumb.Overlays.Custom.call(this,b),this.type="Label",this.label=a.label||"",this.labelText=null,this.labelStyle){var c=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",c.style.font=this.labelStyle.font,c.style.color=this.labelStyle.color||"black",this.labelStyle.fillStyle&&(c.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth>0){var d=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";c.style.border=this.labelStyle.borderWidth+"px solid "+d}this.labelStyle.padding&&(c.style.padding=this.labelStyle.padding)}},jsPlumbUtil.extend(jsPlumb.Overlays.Label,jsPlumb.Overlays.Custom,{cleanup:function(){this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null},getLabel:function(){return this.label},setLabel:function(a){this.label=a,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),f.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var a=this.label(this);this.getElement().innerHTML=a.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))}})}(),function(){"use strict";var a=function(a){this.type="Flowchart",a=a||{},a.stub=null==a.stub?30:a.stub;var b,c=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),d=null==a.midpoint?.5:a.midpoint,e=[],f=(a.grid,a.alwaysRespectStubs),g=null,h=null,i=null,j=null!=a.cornerRadius?a.cornerRadius:0,k=function(a){return 0>a?-1:0===a?0:1
},l=function(a,b,c,d){if(h!=b||i!=c){var e=null==h?d.sx:h,f=null==i?d.sy:i,g=e==b?"v":"h",j=k(b-e),l=k(c-f);h=b,i=c,a.push([e,f,b,c,g,j,l])}},m=function(a){return Math.sqrt(Math.pow(a[0]-a[2],2)+Math.pow(a[1]-a[3],2))},n=function(a){var b=[];return b.push.apply(b,a),b},o=function(a,b,d){for(var e,f,g=0;g<b.length-1;g++){if(e=e||n(b[g]),f=n(b[g+1]),j>0&&e[4]!=f[4]){var h=Math.min(j,m(e),m(f));e[2]-=e[5]*h,e[3]-=e[6]*h,f[0]+=f[5]*h,f[1]+=f[6]*h;var i=e[6]==f[5]&&1==f[5]||e[6]==f[5]&&0===f[5]&&e[5]!=f[6]||e[6]==f[5]&&-1==f[5],k=f[1]>e[3]?1:-1,l=f[0]>e[2]?1:-1,o=k==l,p=o&&i||!o&&!i?f[0]:e[2],q=o&&i||!o&&!i?e[3]:f[1];c.addSegment(a,"Straight",{x1:e[0],y1:e[1],x2:e[2],y2:e[3]}),c.addSegment(a,"Arc",{r:h,x1:e[2],y1:e[3],x2:f[0],y2:f[1],cx:p,cy:q,ac:i})}else{var r=e[2]==e[0]?0:e[2]>e[0]?d.lw/2:-(d.lw/2),s=e[3]==e[1]?0:e[3]>e[1]?d.lw/2:-(d.lw/2);c.addSegment(a,"Straight",{x1:e[0]-r,y1:e[1]-s,x2:e[2]+r,y2:e[3]+s})}e=f}null!=f&&c.addSegment(a,"Straight",{x1:f[0],y1:f[1],x2:f[2],y2:f[3]})};this.setSegments=function(a){g=a},this.isEditable=function(){return!0},this.getOriginalSegments=function(){return g||e},this._compute=function(a,j){if(j.clearEdits&&(g=null),null!=g)return void o(this,g,a);e=[],h=null,i=null,b=null;var k=a.startStubX+(a.endStubX-a.startStubX)*d,m=a.startStubY+(a.endStubY-a.startStubY)*d,n={x:[0,1],y:[1,0]},p=function(){return[a.startStubX,a.startStubY,a.endStubX,a.endStubY]},q={perpendicular:p,orthogonal:p,opposite:function(b){var c=a,d="x"==b?0:1,e={x:function(){return 1==c.so[d]&&(c.startStubX>c.endStubX&&c.tx>c.startStubX||c.sx>c.endStubX&&c.tx>c.sx)||-1==c.so[d]&&(c.startStubX<c.endStubX&&c.tx<c.startStubX||c.sx<c.endStubX&&c.tx<c.sx)},y:function(){return 1==c.so[d]&&(c.startStubY>c.endStubY&&c.ty>c.startStubY||c.sy>c.endStubY&&c.ty>c.sy)||-1==c.so[d]&&(c.startStubY<c.endStubY&&c.ty<c.startStubY||c.sy<c.endStubY&&c.ty<c.sy)}};return!f&&e[b]()?{x:[(a.sx+a.tx)/2,a.startStubY,(a.sx+a.tx)/2,a.endStubY],y:[a.startStubX,(a.sy+a.ty)/2,a.endStubX,(a.sy+a.ty)/2]}[b]:[a.startStubX,a.startStubY,a.endStubX,a.endStubY]}},r={perpendicular:function(b){var c=a,d={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},e={x:[[c.startStubX,c.endStubX],null,[c.endStubX,c.startStubX]],y:[[c.startStubY,c.endStubY],null,[c.endStubY,c.startStubY]]},f={x:[[k,c.startStubY],[k,c.endStubY]],y:[[c.startStubX,m],[c.endStubX,m]]},g={x:[[c.endStubX,c.startStubY]],y:[[c.startStubX,c.endStubY]]},h={x:[[c.startStubX,c.endStubY],[c.endStubX,c.endStubY]],y:[[c.endStubX,c.startStubY],[c.endStubX,c.endStubY]]},i={x:[[c.startStubX,m],[c.endStubX,m],[c.endStubX,c.endStubY]],y:[[k,c.startStubY],[k,c.endStubY],[c.endStubX,c.endStubY]]},j={x:[c.startStubY,c.endStubY],y:[c.startStubX,c.endStubX]},l=n[b][0],o=n[b][1],p=c.so[l]+1,q=c.to[o]+1,r=-1==c.to[o]&&j[b][1]<j[b][0]||1==c.to[o]&&j[b][1]>j[b][0],s=e[b][p][0],t=e[b][p][1],u=d[b][p][q];return c.segment==u[3]||c.segment==u[2]&&r?f[b]:c.segment==u[2]&&s>t?g[b]:c.segment==u[2]&&t>=s||c.segment==u[1]&&!r?i[b]:c.segment==u[0]||c.segment==u[1]&&r?h[b]:void 0},orthogonal:function(b,c,d,e,f){var g=a,h={x:-1==g.so[0]?Math.min(c,e):Math.max(c,e),y:-1==g.so[1]?Math.min(c,e):Math.max(c,e)}[b];return{x:[[h,d],[h,f],[e,f]],y:[[d,h],[f,h],[f,e]]}[b]},opposite:function(b,d,e,f){var g=a,h={x:"y",y:"x"}[b],i={x:"height",y:"width"}[b],l=g["is"+b.toUpperCase()+"GreaterThanStubTimes2"];if(j.sourceEndpoint.elementId==j.targetEndpoint.elementId){var n=e+(1-j.sourceEndpoint.anchor[h])*j.sourceInfo[i]+c.maxStub;return{x:[[d,n],[f,n]],y:[[n,d],[n,f]]}[b]}return!l||1==g.so[t]&&d>f||-1==g.so[t]&&f>d?{x:[[d,m],[f,m]],y:[[k,d],[k,f]]}[b]:1==g.so[t]&&f>d||-1==g.so[t]&&d>f?{x:[[k,g.sy],[k,g.ty]],y:[[g.sx,m],[g.tx,m]]}[b]:void 0}},s=q[a.anchorOrientation](a.sourceAxis),t="x"==a.sourceAxis?0:1,u="x"==a.sourceAxis?1:0,v=s[t],w=s[u],x=s[t+2],y=s[u+2];l(e,s[0],s[1],a);var z=r[a.anchorOrientation](a.sourceAxis,v,w,x,y);if(z)for(var A=0;A<z.length;A++)l(e,z[A][0],z[A][1],a);l(e,s[2],s[3],a),l(e,a.tx,a.ty,a),o(this,e,a)},this.getPath=function(){for(var a=null,b=null,c=[],d=g||e,f=0;f<d.length;f++){var h=d[f],i=h[4],j="v"==i?3:2;null!=a&&b===i?a[j]=h[j]:(h[0]!=h[2]||h[1]!=h[3])&&(c.push({start:[h[0],h[1]],end:[h[2],h[3]]}),a=h,b=h[4])}return c},this.setPath=function(a){g=[];for(var b=0;b<a.length;b++){var c=a[b].start[0],d=a[b].start[1],e=a[b].end[0],f=a[b].end[1],h=c==e?"v":"h",i=k(e-c),j=k(f-d);g.push([c,d,e,f,h,i,j])}}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(a,"Flowchart")}(),function(){"use strict";var a=function(a,b,c,d){return c>=a&&b>=d?1:c>=a&&d>=b?2:a>=c&&d>=b?3:4},b=function(a,b,c,d,e,f,g,h,i){return i>=h?[a,b]:1===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:2===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:3===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:4===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:void 0},c=function(c){c=c||{},this.type="StateMachine";var d=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),e=c.curviness||10,f=c.margin||5,g=c.proximityLimit||80,h=c.orientation&&"clockwise"===c.orientation,i=c.loopbackRadius||25,j=c.showLoopback!==!1;this._compute=function(c,k){var l=Math.abs(k.sourcePos[0]-k.targetPos[0]),m=Math.abs(k.sourcePos[1]-k.targetPos[1]);if(Math.min(k.sourcePos[0],k.targetPos[0]),Math.min(k.sourcePos[1],k.targetPos[1]),j&&k.sourceEndpoint.elementId===k.targetEndpoint.elementId){var n=k.sourcePos[0],o=(k.sourcePos[0],k.sourcePos[1]-f),p=(k.sourcePos[1]-f,n),q=o-i,r=2*i,s=2*i,t=p-i,u=q-i;c.points[0]=t,c.points[1]=u,c.points[2]=r,c.points[3]=s,d.addSegment(this,"Arc",{loopback:!0,x1:n-t+4,y1:o-u,startAngle:0,endAngle:2*Math.PI,r:i,ac:!h,x2:n-t-4,y2:o-u,cx:p-t,cy:q-u})}else{var v=k.sourcePos[0]<k.targetPos[0]?0:l,w=k.sourcePos[1]<k.targetPos[1]?0:m,x=k.sourcePos[0]<k.targetPos[0]?l:0,y=k.sourcePos[1]<k.targetPos[1]?m:0;0===k.sourcePos[2]&&(v-=f),1===k.sourcePos[2]&&(v+=f),0===k.sourcePos[3]&&(w-=f),1===k.sourcePos[3]&&(w+=f),0===k.targetPos[2]&&(x-=f),1===k.targetPos[2]&&(x+=f),0===k.targetPos[3]&&(y-=f),1===k.targetPos[3]&&(y+=f);var z=(v+x)/2,A=(w+y)/2,B=-1*z/A,C=Math.atan(B),D=(1/0==B||B==-1/0?0:Math.abs(e/2*Math.sin(C)),1/0==B||B==-1/0?0:Math.abs(e/2*Math.cos(C)),a(v,w,x,y)),E=Math.sqrt(Math.pow(x-v,2)+Math.pow(y-w,2)),F=b(z,A,D,k.sourcePos,k.targetPos,e,e,E,g);d.addSegment(this,"Bezier",{x1:x,y1:y,x2:v,y2:w,cp1x:F[0],cp1y:F[1],cp2x:F[0],cp2y:F[1]})}}};jsPlumb.registerConnectorType(c,"StateMachine")}(),function(){var a=function(a){a=a||{};var b=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),c=(a.stub||50,a.curviness||150),d=10;this.type="Bezier",this.getCurviness=function(){return c},this._findControlPoint=function(a,b,e,f,g){var h=f.anchor.getOrientation(f),i=g.anchor.getOrientation(g),j=h[0]!=i[0]||h[1]==i[1],k=[];return j?(k.push(0===i[0]?e[0]<b[0]?a[0]+d:a[0]-d:a[0]+c*i[0]),k.push(0===i[1]?e[1]<b[1]?a[1]+d:a[1]-d:a[1]+c*h[1])):(k.push(0===h[0]?b[0]<e[0]?a[0]+d:a[0]-d:a[0]-c*h[0]),k.push(0===h[1]?b[1]<e[1]?a[1]+d:a[1]-d:a[1]+c*i[1])),k},this._compute=function(a,c){var d=c.sourcePos,e=c.targetPos,f=Math.abs(d[0]-e[0]),g=Math.abs(d[1]-e[1]),h=d[0]<e[0]?f:0,i=d[1]<e[1]?g:0,j=d[0]<e[0]?0:f,k=d[1]<e[1]?0:g,l=this._findControlPoint([h,i],d,e,c.sourceEndpoint,c.targetEndpoint),m=this._findControlPoint([j,k],e,d,c.targetEndpoint,c.sourceEndpoint);b.addSegment(this,"Bezier",{x1:h,y1:i,x2:j,y2:k,cp1x:l[0],cp1y:l[1],cp2x:m[0],cp2y:m[1]})}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(a,"Bezier")}(),function(){"use strict";var a={joinstyle:"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},b="stroke-dasharray",c="dashstyle",d="linearGradient",e="radialGradient",f="defs",g="fill",h="stop",i="stroke",j="stroke-width",k="style",l="none",m="jsplumb_gradient_",n="lineWidth",o={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},p=function(a,b){for(var c in b)a.setAttribute(c,""+b[c])},q=function(a,b){var c=document.createElementNS(o.svg,a);return b=b||{},b.version="1.1",b.xmlns=o.xhtml,p(c,b),c},r=function(a){return"position:absolute;left:"+a[0]+"px;top:"+a[1]+"px"},s=function(a){for(var b=0;b<a.childNodes.length;b++)(a.childNodes[b].tagName==f||a.childNodes[b].tagName==d||a.childNodes[b].tagName==e)&&a.removeChild(a.childNodes[b])},t=function(a,b,c,j,k){var l=m+k._jsPlumb.instance.idstamp();s(a);var n;n=c.gradient.offset?q(e,{id:l}):q(d,{id:l,gradientUnits:"userSpaceOnUse"});var o=q(f);a.appendChild(o),o.appendChild(n);for(var p=0;p<c.gradient.stops.length;p++){var r=1==k.segment||2==k.segment?p:c.gradient.stops.length-1-p,t=jsPlumbUtil.convertStyle(c.gradient.stops[r][1],!0),u=q(h,{offset:Math.floor(100*c.gradient.stops[p][0])+"%","stop-color":t});n.appendChild(u)}var v=c.strokeStyle?i:g;b.setAttribute(v,"url(#"+l+")")},u=function(d,e,f,h,m){if(e.setAttribute(g,f.fillStyle?jsPlumbUtil.convertStyle(f.fillStyle,!0):l),e.setAttribute(i,f.strokeStyle?jsPlumbUtil.convertStyle(f.strokeStyle,!0):l),f.gradient?t(d,e,f,h,m):(s(d),e.setAttribute(k,"")),f.lineWidth&&e.setAttribute(j,f.lineWidth),f[c]&&f[n]&&!f[b]){var o=-1==f[c].indexOf(",")?" ":",",p=f[c].split(o),q="";p.forEach(function(a){q+=Math.floor(a*f.lineWidth)+o}),e.setAttribute(b,q)}else f[b]&&e.setAttribute(b,f[b]);for(var r in a)f[r]&&e.setAttribute(a[r],f[r])},v=function(a,b,c){a.childNodes.length>c?a.insertBefore(b,a.childNodes[c]):a.appendChild(b)};jsPlumbUtil.svg={node:q,attr:p,pos:r};var w=function(a){var b=a.pointerEventsSpec||"all",c={};jsPlumb.jsPlumbUIComponent.apply(this,a.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var d=a.cssClass+" "+(a.originalArgs[0].cssClass||""),e={style:"",width:0,height:0,"pointer-events":b,position:"absolute"};this.svg=q("svg",e),a.useDivWrapper?(this.canvas=document.createElement("div"),this.canvas.style.position="absolute",jsPlumbUtil.sizeElement(this.canvas,0,0,1,1),this.canvas.className=d):(p(this.svg,{"class":d}),this.canvas=this.svg),a._jsPlumb.appendElement(this.canvas,a.originalArgs[0].parent),a.useDivWrapper&&this.canvas.appendChild(this.svg);var f=[this.canvas];return this.getDisplayElements=function(){return f},this.appendDisplayElement=function(a){f.push(a)},this.paint=function(b,d,e){if(null!=b){var f,g=[this.x,this.y],h=[this.w,this.h];null!=e&&(e.xmin<0&&(g[0]+=e.xmin),e.ymin<0&&(g[1]+=e.ymin),h[0]=e.xmax+(e.xmin<0?-e.xmin:0),h[1]=e.ymax+(e.ymin<0?-e.ymin:0)),a.useDivWrapper?(jsPlumbUtil.sizeElement(this.canvas,g[0],g[1],h[0],h[1]),g[0]=0,g[1]=0,f=r([0,0])):f=r([g[0],g[1]]),c.paint.apply(this,arguments),p(this.svg,{style:f,width:h[0],height:h[1]})}},{renderer:c}};jsPlumbUtil.extend(w,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.bgCanvas=null,this.path=null,this.group=null},setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none"),this.bgCanvas&&(this.bgCanvas.style.display=a?"block":"none")}}),jsPlumb.ConnectorRenderers.svg=function(a){var b=this,c=w.apply(this,[{cssClass:a._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:a._jsPlumb}]);c.renderer.paint=function(c,d,e){var f=b.getSegments(),g="",h=[0,0];if(e.xmin<0&&(h[0]=-e.xmin),e.ymin<0&&(h[1]=-e.ymin),f.length>0){for(var i=0;i<f.length;i++)g+=jsPlumb.Segments.svg.SegmentRenderer.getPath(f[i]),g+=" ";var j={d:g,transform:"translate("+h[0]+","+h[1]+")","pointer-events":a["pointer-events"]||"visibleStroke"},k=null,l=[b.x,b.y,b.w,b.h],m={mouseenter:function(a){var c=a.relatedTarget;return null==c||c!=b.path&&c!=b.bgPath},mouseout:function(a){var c=a.relatedTarget;return null==c||c!=b.path&&c!=b.bgPath}};if(c.outlineColor){var n=c.outlineWidth||1,o=c.lineWidth+2*n;k=jsPlumb.extend({},c),k.strokeStyle=jsPlumbUtil.convertStyle(c.outlineColor),k.lineWidth=o,null==b.bgPath?(b.bgPath=q("path",j),v(b.svg,b.bgPath,0),b.attachListeners(b.bgPath,b,m)):p(b.bgPath,j),u(b.svg,b.bgPath,k,l,b)}null==b.path?(b.path=q("path",j),v(b.svg,b.path,c.outlineColor?1:0),b.attachListeners(b.path,b,m)):p(b.path,j),u(b.svg,b.path,c,l,b)}},this.reattachListeners=function(){this.bgPath&&this.reattachListenersForElement(this.bgPath,this),this.path&&this.reattachListenersForElement(this.path,this)}},jsPlumbUtil.extend(jsPlumb.ConnectorRenderers.svg,w),jsPlumb.Segments.svg={SegmentRenderer:{getPath:function(a){return{Straight:function(){var b=a.getCoordinates();return"M "+b.x1+" "+b.y1+" L "+b.x2+" "+b.y2},Bezier:function(){var b=a.params;return"M "+b.x1+" "+b.y1+" C "+b.cp1x+" "+b.cp1y+" "+b.cp2x+" "+b.cp2y+" "+b.x2+" "+b.y2},Arc:function(){var b=a.params,c=a.sweep>Math.PI?1:0,d=a.anticlockwise?0:1;return"M"+a.x1+" "+a.y1+" A "+a.radius+" "+b.r+" 0 "+c+","+d+" "+a.x2+" "+a.y2}}[a.type]()}}};var x=window.SvgEndpoint=function(a){var b=w.apply(this,[{cssClass:a._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:a._jsPlumb}]);b.renderer.paint=function(a){var b=jsPlumb.extend({},a);b.outlineColor&&(b.strokeWidth=b.outlineWidth,b.strokeStyle=jsPlumbUtil.convertStyle(b.outlineColor,!0)),null==this.node?(this.node=this.makeNode(b),this.svg.appendChild(this.node),this.attachListeners(this.node,this)):null!=this.updateNode&&this.updateNode(this.node),u(this.svg,this.node,b,[this.x,this.y,this.w,this.h],this),r(this.node,[this.x,this.y])}.bind(this)};jsPlumbUtil.extend(x,w,{reattachListeners:function(){this.node&&this.reattachListenersForElement(this.node,this)}}),jsPlumb.Endpoints.svg.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(){return q("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(a){p(a,{cx:this.w/2,cy:this.h/2,r:this.radius})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Dot,[jsPlumb.Endpoints.Dot,x]),jsPlumb.Endpoints.svg.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(){return q("rect",{width:this.w,height:this.h})},this.updateNode=function(a){p(a,{width:this.w,height:this.h})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Rectangle,[jsPlumb.Endpoints.Rectangle,x]),jsPlumb.Endpoints.svg.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.svg.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.svg.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.svg.Custom=jsPlumb.Overlays.Custom;var y=function(a,b){a.apply(this,b),jsPlumb.jsPlumbUIComponent.apply(this,b),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(a,d){if(a.component.svg&&d){null==this.path&&(this.path=q("path",{"pointer-events":"all"}),a.component.svg.appendChild(this.path),this.canvas=a.component.svg,this.attachListeners(this.path,a.component),this.attachListeners(this.path,this));var e=b&&1==b.length?b[0].cssClass||"":"",f=[0,0];d.xmin<0&&(f[0]=-d.xmin),d.ymin<0&&(f[1]=-d.ymin),p(this.path,{d:c(a.d),"class":e,stroke:a.strokeStyle?a.strokeStyle:null,fill:a.fillStyle?a.fillStyle:null,transform:"translate("+f[0]+","+f[1]+")"})}};var c=function(a){return"M"+a.hxy.x+","+a.hxy.y+" L"+a.tail[0].x+","+a.tail[0].y+" L"+a.cxy.x+","+a.cxy.y+" L"+a.tail[1].x+","+a.tail[1].y+" L"+a.hxy.x+","+a.hxy.y};this.reattachListeners=function(){this.path&&this.reattachListenersForElement(this.path,this)}};jsPlumbUtil.extend(y,[jsPlumb.jsPlumbUIComponent,jsPlumb.Overlays.AbstractOverlay],{cleanup:function(){null!=this.path&&this._jsPlumb.instance.removeElement(this.path)},setVisible:function(a){null!=this.path&&(this.path.style.display=a?"block":"none")}}),jsPlumb.Overlays.svg.Arrow=function(){y.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Arrow,[jsPlumb.Overlays.Arrow,y]),jsPlumb.Overlays.svg.PlainArrow=function(){y.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.PlainArrow,[jsPlumb.Overlays.PlainArrow,y]),jsPlumb.Overlays.svg.Diamond=function(){y.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Diamond,[jsPlumb.Overlays.Diamond,y]),jsPlumb.Overlays.svg.GuideLines=function(){var a,b,c=null,d=this;jsPlumb.Overlays.GuideLines.apply(this,arguments),this.paint=function(f,g){null==c&&(c=q("path"),f.connector.svg.appendChild(c),d.attachListeners(c,f.connector),d.attachListeners(c,d),a=q("path"),f.connector.svg.appendChild(a),d.attachListeners(a,f.connector),d.attachListeners(a,d),b=q("path"),f.connector.svg.appendChild(b),d.attachListeners(b,f.connector),d.attachListeners(b,d));var h=[0,0];g.xmin<0&&(h[0]=-g.xmin),g.ymin<0&&(h[1]=-g.ymin),p(c,{d:e(f.head,f.tail),stroke:"red",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),p(a,{d:e(f.tailLine[0],f.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),p(b,{d:e(f.headLine[0],f.headLine[1]),stroke:"green",fill:null,transform:"translate("+h[0]+","+h[1]+")"})};var e=function(a,b){return"M "+a.x+","+a.y+" L"+b.x+","+b.y}},jsPlumbUtil.extend(jsPlumb.Overlays.svg.GuideLines,jsPlumb.Overlays.GuideLines)}(),function(){"use strict";var a={"stroke-linejoin":"joinstyle",joinstyle:"joinstyle",endcap:"endcap",miterlimit:"miterlimit"},b=null;if(document.createStyleSheet&&document.namespaces){var c=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],d="behavior:url(#default#VML);position:absolute;";b=document.createStyleSheet();for(var e=0;e<c.length;e++)b.addRule(c[e],d);document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml")}jsPlumb.vml={};var f=1e3,g=function(a,b){for(var c in b)a[c]=b[c]},h=function(a,b,c,d,e,f){c=c||{};var h=document.createElement("jsplumb:"+a);return f?e.appendElement(h,d):d.appendChild(h),h.className=(c["class"]?c["class"]+" ":"")+"jsplumb_vml",i(h,b),g(h,c),h},i=function(a,b,c){a.style.left=b[0]+"px",a.style.top=b[1]+"px",a.style.width=b[2]+"px",a.style.height=b[3]+"px",a.style.position="absolute",c&&(a.style.zIndex=c)},j=jsPlumb.vml.convertValue=function(a){return Math.floor(a*f)},k=function(a,b,c,d){"transparent"===b?d.setOpacity(c,"0.0"):d.setOpacity(c,"1.0")},l=function(a,b,c,d){var e={};if(b.strokeStyle){e.stroked="true";var f=jsPlumbUtil.convertStyle(b.strokeStyle,!0);e.strokecolor=f,k(e,f,"stroke",c),e.strokeweight=b.lineWidth+"px"}else e.stroked="false";if(b.fillStyle){e.filled="true";var i=jsPlumbUtil.convertStyle(b.fillStyle,!0);e.fillcolor=i,k(e,i,"fill",c)}else e.filled="false";if(b.dashstyle)null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:b.dashstyle},a,d):c.strokeNode.dashstyle=b.dashstyle;else if(b["stroke-dasharray"]&&b.lineWidth){for(var j=-1==b["stroke-dasharray"].indexOf(",")?" ":",",l=b["stroke-dasharray"].split(j),m="",n=0;n<l.length;n++)m+=Math.floor(l[n]/b.lineWidth)+j;null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:m},a,d):c.strokeNode.dashstyle=m}g(a,e)},m=function(){var a=this;jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.opacityNodes={stroke:null,fill:null},this.initOpacityNodes=function(b){a.opacityNodes.stroke=h("stroke",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb.instance),a.opacityNodes.fill=h("fill",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb.instance)},this.setOpacity=function(b,c){var d=a.opacityNodes[b];d&&(d.opacity=""+c)};var b=[];this.getDisplayElements=function(){return b},this.appendDisplayElement=function(c,d){d||a.canvas.parentNode.appendChild(c),b.push(c)}};jsPlumbUtil.extend(m,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.bgCanvas&&this.bgCanvas.parentNode.removeChild(this.bgCanvas),this.canvas&&this.canvas.parentNode.removeChild(this.canvas)}});var n=jsPlumb.ConnectorRenderers.vml=function(b){this.strokeNode=null,this.canvas=null,m.apply(this,arguments);var c=this._jsPlumb.instance.connectorClass+(b.cssClass?" "+b.cssClass:"");this.paint=function(d){if(null!==d){this.w=Math.max(this.w,1),this.h=Math.max(this.h,1);for(var e=this.getSegments(),j={path:""},k=[this.x,this.y,this.w,this.h],m=0;m<e.length;m++)j.path+=jsPlumb.Segments.vml.SegmentRenderer.getPath(e[m]),j.path+=" ";if(d.outlineColor){var n=d.outlineWidth||1,o=d.lineWidth+2*n,p={strokeStyle:jsPlumbUtil.convertStyle(d.outlineColor),lineWidth:o};for(var q in a)p[q]=d[q];null==this.bgCanvas?(j["class"]=c,j.coordsize=k[2]*f+","+k[3]*f,this.bgCanvas=h("shape",k,j,b.parent,this._jsPlumb.instance,!0),i(this.bgCanvas,k),this.appendDisplayElement(this.bgCanvas,!0),this.attachListeners(this.bgCanvas,this),this.initOpacityNodes(this.bgCanvas,["stroke"])):(j.coordsize=k[2]*f+","+k[3]*f,i(this.bgCanvas,k),g(this.bgCanvas,j)),l(this.bgCanvas,p,this)}null==this.canvas?(j["class"]=c,j.coordsize=k[2]*f+","+k[3]*f,this.canvas=h("shape",k,j,b.parent,this._jsPlumb.instance,!0),this.appendDisplayElement(this.canvas,!0),this.attachListeners(this.canvas,this),this.initOpacityNodes(this.canvas,["stroke"])):(j.coordsize=k[2]*f+","+k[3]*f,i(this.canvas,k),g(this.canvas,j)),l(this.canvas,d,this,this._jsPlumb.instance)}}};jsPlumbUtil.extend(n,m,{reattachListeners:function(){this.canvas&&this.reattachListenersForElement(this.canvas,this)},setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none"),this.bgCanvas&&(this.bgCanvas.style.display=a?"block":"none")}});var o=window.VmlEndpoint=function(a){m.apply(this,arguments),this._jsPlumb.vml=null,this.canvas=document.createElement("div"),this.canvas.style.position="absolute",this._jsPlumb.clazz=this._jsPlumb.instance.endpointClass+(a.cssClass?" "+a.cssClass:""),a._jsPlumb.appendElement(this.canvas,a.parent),this.paint=function(a,b){var c={},d=this._jsPlumb.vml;jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h),null==this._jsPlumb.vml?(c["class"]=this._jsPlumb.clazz,d=this._jsPlumb.vml=this.getVml([0,0,this.w,this.h],c,b,this.canvas,this._jsPlumb.instance),this.attachListeners(d,this),this.appendDisplayElement(d,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(d,["fill"])):(i(d,[0,0,this.w,this.h]),g(d,c)),l(d,a,this)}};jsPlumbUtil.extend(o,m,{reattachListeners:function(){this._jsPlumb.vml&&this.reattachListenersForElement(this._jsPlumb.vml,this)}}),jsPlumb.Segments.vml={SegmentRenderer:{getPath:function(a){return{Straight:function(a){var b=a.params;return"m"+j(b.x1)+","+j(b.y1)+" l"+j(b.x2)+","+j(b.y2)+" e"},Bezier:function(a){var b=a.params;return"m"+j(b.x1)+","+j(b.y1)+" c"+j(b.cp1x)+","+j(b.cp1y)+","+j(b.cp2x)+","+j(b.cp2y)+","+j(b.x2)+","+j(b.y2)+" e"},Arc:function(a){var b=a.params,c=Math.min(b.x1,b.x2),d=(Math.max(b.x1,b.x2),Math.min(b.y1,b.y2)),e=(Math.max(b.y1,b.y2),a.anticlockwise?1:0),f=a.anticlockwise?"at ":"wa ",g=function(){if(b.loopback)return"0,0,"+j(2*b.r)+","+j(2*b.r);var f=[null,[function(){return[c,d]},function(){return[c-b.r,d-b.r]}],[function(){return[c-b.r,d]},function(){return[c,d-b.r]}],[function(){return[c-b.r,d-b.r]},function(){return[c,d]}],[function(){return[c,d-b.r]},function(){return[c-b.r,d]}]][a.segment][e]();return j(f[0])+","+j(f[1])+","+j(f[0]+2*b.r)+","+j(f[1]+2*b.r)};return f+" "+g()+","+j(b.x1)+","+j(b.y1)+","+j(b.x2)+","+j(b.y2)+" e"}}[a.type](a)}}},jsPlumb.Endpoints.vml.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("oval",a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Dot,o),jsPlumb.Endpoints.vml.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("rect",a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Rectangle,o),jsPlumb.Endpoints.vml.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.vml.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.vml.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.vml.Custom=jsPlumb.Overlays.Custom;var p=function(a,b){a.apply(this,b),m.apply(this,b);var c=this;this.canvas=null,this.isAppendedAtTopLevel=!0;var d=function(a){return"m "+j(a.hxy.x)+","+j(a.hxy.y)+" l "+j(a.tail[0].x)+","+j(a.tail[0].y)+" "+j(a.cxy.x)+","+j(a.cxy.y)+" "+j(a.tail[1].x)+","+j(a.tail[1].y)+" x e"};this.paint=function(a,e){if(a.component.canvas&&e){var j={},k=a.d,l=a.component;a.strokeStyle&&(j.stroked="true",j.strokecolor=jsPlumbUtil.convertStyle(a.strokeStyle,!0)),a.lineWidth&&(j.strokeweight=a.lineWidth+"px"),a.fillStyle&&(j.filled="true",j.fillcolor=a.fillStyle);var m=Math.min(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),n=Math.min(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),o=Math.max(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),p=Math.max(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),q=Math.abs(o-m),r=Math.abs(p-n),s=[m,n,q,r];if(j.path=d(k),j.coordsize=l.w*f+","+l.h*f,s[0]=l.x,s[1]=l.y,s[2]=l.w,s[3]=l.h,null==c.canvas){var t=l._jsPlumb.overlayClass||"",u=b&&1==b.length?b[0].cssClass||"":"";j["class"]=u+" "+t,c.canvas=h("shape",s,j,l.canvas.parentNode,l._jsPlumb.instance,!0),l.appendDisplayElement(c.canvas,!0),c.attachListeners(c.canvas,l),c.attachListeners(c.canvas,c)}else i(c.canvas,s),g(c.canvas,j)}},this.reattachListeners=function(){this.canvas&&this.reattachListenersForElement(c.canvas,this)},this.cleanup=function(){null!=this.canvas&&this._jsPlumb.instance.removeElement(this.canvas)}};jsPlumbUtil.extend(p,[m,jsPlumb.Overlays.AbstractOverlay],{setVisible:function(a){this.canvas.style.display=a?"block":"none"}}),jsPlumb.Overlays.vml.Arrow=function(){p.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Arrow,[jsPlumb.Overlays.Arrow,p]),jsPlumb.Overlays.vml.PlainArrow=function(){p.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.PlainArrow,[jsPlumb.Overlays.PlainArrow,p]),jsPlumb.Overlays.vml.Diamond=function(){p.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Diamond,[jsPlumb.Overlays.Diamond,p])}(),function(a){"use strict";var b=function(b){return a("string"==typeof b?"#"+b:b)};a.extend(jsPlumbInstance.prototype,{getDOMElement:function(a){return null==a?null:"string"==typeof a?document.getElementById(a):a.context||null!=a.length?a[0]:a},getElementObject:b,removeElement:function(a){b(a).remove()},doAnimate:function(a,b,c){a.animate(b,c)},getSelector:function(c,d){return 2==arguments.length?b(c).find(d):a(c)},destroyDraggable:function(b){a(b).data("draggable")&&a(b).draggable("destroy")},destroyDroppable:function(b){a(b).data("droppable")&&a(b).droppable("destroy")},initDraggable:function(b,c,d){c=c||{},b=a(b),c.start=jsPlumbUtil.wrap(c.start,function(){a("body").addClass(this.dragSelectClass)},!1),c.stop=jsPlumbUtil.wrap(c.stop,function(){a("body").removeClass(this.dragSelectClass)}),c.doNotRemoveHelper||(c.helper=null),d&&(c.scope=c.scope||jsPlumb.Defaults.Scope),b.draggable(c)},initDroppable:function(b,c){c.scope=c.scope||jsPlumb.Defaults.Scope,a(b).droppable(c)},isAlreadyDraggable:function(b){return a(b).hasClass("ui-draggable")},isDragSupported:function(b){return a(b).draggable},isDropSupported:function(b){return a(b).droppable},getDragObject:function(a){return a[1].helper||a[1].draggable},getDragScope:function(b){return a(b).draggable("option","scope")},getDropEvent:function(a){return a[0]},getDropScope:function(b){return a(b).droppable("option","scope")},getUIPosition:function(a,b,c){var d;if(b=b||1,1==a.length)d={left:a[0].pageX,top:a[0].pageY};else{var e=a[1],f=e.position;d=f||e.absolutePosition,c||(e.position.left/=b,e.position.top/=b)}return{left:d.left,top:d.top}},isDragFilterSupported:function(){return!0},setDragFilter:function(b,c){jsPlumb.isAlreadyDraggable(b)&&a(b).draggable("option","cancel",c)},setElementDraggable:function(b,c){a(b).draggable("option","disabled",!c)},setDragScope:function(b,c){a(b).draggable("option","scope",c)},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete"},animEvents:{step:"step",complete:"complete"},trigger:function(a,c,d){var e=jQuery._data(b(a)[0],"handle");e(d)},getOriginalEvent:function(a){return a.originalEvent},on:function(a){a=b(a);var c=[];c.push.apply(c,arguments),a.on.apply(a,c.slice(1))},off:function(a){a=b(a);var c=[];c.push.apply(c,arguments),a.off.apply(a,c.slice(1))}}),a(document).ready(jsPlumb.init)}(jQuery),angular.module("dangle",[]),angular.module("dangle").directive("fsArea",[function(){"use strict";return{restrict:"E",scope:{onClick:"=",width:"=",height:"=",bind:"=",label:"@",field:"@",duration:"@",delay:"@",plot:"@",pointRadius:"@"},link:function(a,b,c){var d={top:20,right:20,bottom:30,left:80},e=a.width||1280,f=a.height||300,g=(c.interpolate||"false",c.label||"Frequency"),h=c["class"]||"";e=e-d.left-d.right,f=f-d.top-d.bottom;var i=d3.time.scale().range([0,e]),j=d3.scale.linear().range([f,0]),k=d3.svg.axis().scale(i).orient("bottom"),l=d3.svg.axis().scale(j).orient("left"),m=d3.svg.line().x(function(a){return i(a.time)}).y(function(a){return j(a.count)}),n=d3.svg.area().x(function(a){return i(a.time)}).y0(f).y1(function(a){return j(a.count)});"true"==c.interpolate&&(m.interpolate("cardinal"),n.interpolate("cardinal"));var o=d3.select(b[0]).append("svg").attr("preserveAspectRatio","xMinYMin").attr("viewBox","0 0 "+(e+d.left+d.right)+" "+(f+d.top+d.bottom)).append("g").attr("transform","translate("+d.left+","+d.top+")");o.append("path").datum([]).attr("class","area fill "+h).attr("d",n),o.append("g").attr("class","area x axis "+h).attr("transform","translate(0,"+f+")").call(k),o.append("g").attr("class","area y axis "+h).call(l).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(g),o.append("path").datum([]).attr("class","area line "+h).attr("d",m),a.$watch("bind",function(b){var d=a.duration||0,e=(a.delay||0,a.plot||"true"),f=a.pointRadius||8,g=a.field||c.bind.split(".").pop().toLowerCase();if(b){b=b.entries||[],i.domain(d3.extent(b,function(a){return a.time})),j.domain([0,d3.max(b,function(a){return a.count})]);var p=o.transition().duration(d);if(p.select(".area").attr("d",n(b)),p.select(".line").attr("d",m(b)),"true"==e){var q=o.selectAll("circle").data(b.filter(function(a){return a.count}),function(){return Math.random()});q.enter().append("circle").attr("class","area line points "+h).attr("cursor","pointer").attr("cx",m.x()).attr("cy",m.y()).style("opacity",0).transition().duration(d).style("opacity",1).attr("cx",m.x()).attr("cy",m.y()).attr("r",f),q.on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(g,b.time)})}),q.exit().remove()}p.select(".x").call(k),p.select(".y").call(l)}})}}}]),angular.module("dangle").directive("fsBar",[function(){"user strict";return{restrict:"E",scope:{onClick:"=",width:"=",height:"=",bind:"=",duration:"@"},link:function(a,b,c){var d={top:10,right:10,bottom:10,left:10},e=a.width||300,f=a.height||1020;e=e-d.left-d.right,f=f-d.top-d.bottom;var g=c["class"]||"",h=c.align||"left",i="right"===h?"xMaxYMin":"xMinYMin",j=d3.scale.linear().range([0,e]),k=d3.scale.ordinal().rangeBands([0,f],.1),l=d3.select(b[0]).append("svg").attr("preserveAspectRatio",i+" meet").attr("viewBox","0 0 "+(e+d.left+d.right)+" "+(f+d.top+d.bottom)).append("g").attr("transform","translate("+d.left+","+d.top+")");a.$watch("bind",function(b){var d=a.duration||0,f=(a.delay||0,a.field||c.bind.split(".").pop().toLowerCase());if(b){b=b.terms||[],j.domain([0,2*d3.max(b,function(a){return a.count})]),k.domain(b.map(function(a){return a.term}));var i=l.selectAll("rect").data(b,function(){return Math.random()});i.enter().append("rect").attr("class","bar rect "+g).attr("cursor","pointer").attr("y",function(a){return k(a.term)}).attr("height",k.rangeBand()).attr("x",function(){return"right"===h?e:0}).transition().duration(d).attr("width",function(a){return j(a.count)}).attr("x",function(a){return"right"===h?e-j(a.count):0}),i.on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(f,b.term)})}),i.exit().remove();
var m=l.selectAll("text").data(b,function(){return Math.random()});m.enter().append("text").attr("class","bar text "+g).attr("cursor","pointer").attr("y",function(a){return k(a.term)+k.rangeBand()/2}).attr("x",function(a){return"right"===h?e-j(a.count)-3:j(a.count)+3}).attr("dy",".35em").attr("text-anchor",function(){return"right"===h?"end":"start"}).text(function(a){return"right"===h?"("+a.count+") "+a.term:a.term+" ("+a.count+")"}),m.on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(f,b.term)})}),m.exit().remove()}})}}}]),angular.module("dangle").directive("fsColumn",[function(){"use strict";return{restrict:"E",scope:{fontSize:"=",onClick:"=",width:"=",height:"=",bind:"="},link:function(a,b,c){var d={top:20,right:20,bottom:30,left:40},e=a.width||960,f=a.height||500,g=c.color||"steelblue",h=c.fontColor||"#000",i=a.fontSize||14,j=c.label||"Frequency";void 0==c.field&&(c.field=c.bind.split(".").pop().toLowerCase()),e=e-d.left-d.right,f=f-d.top-d.bottom;var k=d3.scale.ordinal().rangeRoundBands([0,e],.1),l=d3.scale.linear().range([f,0]),m=d3.svg.axis().scale(k).orient("bottom"),n=d3.svg.axis().scale(l).orient("left"),o=d3.select(b[0]).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+(e+d.left+d.right)+" "+(f+d.top+d.bottom)).append("g").attr("transform","translate("+d.left+","+d.top+")");a.$watch("bind",function(b){b&&(b=b.terms||[],o.selectAll("*").remove(),k.domain(b.map(function(a){return a.term})),l.domain([0,d3.max(b,function(a){return a.count})]),o.append("g").attr("fill",h).attr("font-size",i).attr("class","x axis").attr("transform","translate(0,"+f+")").call(m),o.append("g").attr("class","y axis").attr("font-size",i).attr("fill",h).call(n).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".51em").style("text-anchor","end").text(j),o.selectAll(".bar").data(b).enter().append("rect").attr("fill",g).attr("x",function(a){return k(a.term)}).attr("width",k.rangeBand()).attr("y",function(a){return l(a.count)}).attr("height",function(a){return f-l(a.count)}).on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(c.field,b.term)})}))})}}}]),angular.module("dangle").directive("fsDateHisto",[function(){"use strict";return{restrict:"E",scope:{onClick:"=",width:"=",height:"=",bind:"=",label:"@",field:"@",duration:"@",delay:"@",interval:"@"},link:function(a,b,c){var d={top:20,right:20,bottom:30,left:80},e=a.width||1280,f=a.height||300,g=c.label||"Frequency",h=c["class"]||"";e=e-d.left-d.right,f=f-d.top-d.bottom;var i=d3.time.scale().range([0,e]),j=d3.scale.linear().range([f,0]),k=d3.svg.axis().scale(i).orient("bottom"),l=d3.svg.axis().scale(j).orient("left"),m=d3.select(b[0]).append("svg").attr("preserveAspectRatio","xMinYMin").attr("viewBox","0 0 "+(e+d.left+d.right)+" "+(f+d.top+d.bottom)).append("g").attr("transform","translate("+d.left+","+d.top+")");m.append("g").attr("class","histo x axis "+h).attr("transform","translate(0,"+f+")").call(k),m.append("g").attr("class","histo y axis "+h).call(l).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".51em").style("text-anchor","end").text(g),a.$watch("bind",function(b){var d=a.duration||0,g=a.delay||0,n=a.field||c.bind.split(".").pop().toLowerCase(),o=a.interval||"day";if(b){b=b.entries||[];var p=e/b.length-2,q=864e5;switch(o.toLowerCase()){case"minute":q=6e4;break;case"hour":q=36e5;break;case"day":q=864e5;break;case"week":q=6048e5;break;case"month":q=263e7;break;case"year":q=3156e7}i.domain([d3.min(b,function(a){return a.time}),d3.max(b,function(a){return a.time})+q]),j.domain([0,d3.max(b,function(a){return a.count})]);var r=m.transition().duration(d),s=m.selectAll("rect").data(b,function(){return Math.random()});s.enter().append("rect").attr("class","histo rect "+h).attr("cursor","pointer").attr("x",function(a){return i(a.time)}).attr("y",function(){return f}).attr("width",p).transition().delay(function(a,b){return b*g}).duration(d).attr("height",function(a){return f-j(a.count)}).attr("y",function(a){return j(a.count)}),s.on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(n,b.time)})}),s.exit().remove(),r.select(".x").call(k),r.select(".y").call(l)}},!0)}}}]),angular.module("dangle").directive("fsDonut",[function(){"use strict";return{restrict:"E",scope:{outerRadius:"=",innerRadius:"=",fontSize:"=",domain:"=",colorMap:"=",onClick:"=",bind:"=",duration:"@"},link:function(a,b,c){var d=a.outerRadius||200,e=a.innerRadius||0,f=(a.fontSize||14,c.fontColor||"#fff",void 0);void 0==c.field&&(c.field=c.bind.split(".").pop().toLowerCase()),void 0===a.colorMap?(f=d3.scale.category20c(),void 0!==a.domain&&f.domain(a.domain)):f=function(b){return a.colorMap[b]};var g=3*d+30,h=3*d,i=d3.svg.arc().outerRadius(d-10).innerRadius(e),j=d3.layout.pie().sort(null).value(function(a){return a.count}),k=d3.select(b[0]).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+g+" "+h),l=k.append("g").attr("transform","translate("+g/2+","+h/2+") rotate(180) scale(-1, -1)"),m=k.append("g").attr("class","label_group").attr("transform","translate("+g/2+","+h/2+")");a.$watch("bind",function(b){function e(a,b){var b=d3.interpolate(this._current,a);return this._current=b(0),function(a){return i(b(a))}}function g(a){var b=(this._current.startAngle+this._current.endAngle-Math.PI)/2,c=(a.startAngle+a.endAngle-Math.PI)/2,e=d3.interpolateNumber(b,c);return function(a){var b=e(a);return"translate("+Math.cos(b)*(d+o)+","+Math.sin(b)*(d+o)+")"}}var h=a.duration||0,n=function(a){return(a.startAngle+a.endAngle)/2<Math.PI?"beginning":"end"},o=14;if(b){b=b.terms||[];for(var p=j(b),q=0,r=0;r<b.length;r++)q+=b[r].count;if(q>0){var s=l.selectAll("path").data(p);s.enter().append("path").attr("d",i).attr("stroke","#fff").attr("stroke-width","1.5").attr("cursor","pointer").style("fill",function(a){return f(a.data.term)}).each(function(a){this._current=a}).on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(c.field,b.data.term)})}),s.transition().duration(h).attrTween("d",e);var t=m.selectAll("line").data(p);t.enter().append("line").attr("x1",0).attr("x2",0).attr("y1",-d-3).attr("y2",-d-8).attr("stroke","grey").attr("stroke-width",2).attr("transform",function(a){return"rotate("+(a.startAngle+a.endAngle)/2*(180/Math.PI)+")"}).each(function(a){this._current=a}),t.transition().duration(750).attr("transform",function(a){return"rotate("+(a.startAngle+a.endAngle)/2*(180/Math.PI)+")"}),t.exit().remove();var u=m.selectAll("text.value").data(p).attr("dy",function(a){return(a.startAngle+a.endAngle)/2>Math.PI/2&&(a.startAngle+a.endAngle)/2<1.5*Math.PI?17:-17}).attr("text-anchor",n).text(function(a){var b=a.value/q*100;return b.toFixed(1)+"%"});u.enter().append("text").attr("class","value").attr("font-size",20).attr("font-weight","bold").attr("transform",function(a){return"translate("+Math.cos((a.startAngle+a.endAngle-Math.PI)/2)*(d+o)+","+Math.sin((a.startAngle+a.endAngle-Math.PI)/2)*(d+o)+")"}).attr("dy",function(a){return(a.startAngle+a.endAngle)/2>Math.PI/2&&(a.startAngle+a.endAngle)/2<1.5*Math.PI?17:-17}).attr("text-anchor",n).text(function(a){var b=a.value/q*100;return b.toFixed(1)+"%"}).each(function(a){this._current=a}),u.transition().duration(h).attrTween("transform",g),u.exit().remove();var v=m.selectAll("text.units").data(p).attr("dy",function(a){return(a.startAngle+a.endAngle)/2>Math.PI/2&&(a.startAngle+a.endAngle)/2<1.5*Math.PI?36:2}).attr("text-anchor",function(a){return(a.startAngle+a.endAngle)/2<Math.PI?"beginning":"end"}).text(function(a){return"T"===a.data.term?"TRUE ("+a.value+")":"F"===a.data.term?"FALSE ("+a.value+")":a.data.term+" ("+a.value+")"});v.enter().append("text").attr("class","units").attr("font-size",16).attr("stroke","none").attr("fill","#000").attr("transform",function(a){return"translate("+Math.cos((a.startAngle+a.endAngle-Math.PI)/2)*(d+o)+","+Math.sin((a.startAngle+a.endAngle-Math.PI)/2)*(d+o)+")"}).attr("dy",function(a){return(a.startAngle+a.endAngle)/2>Math.PI/2&&(a.startAngle+a.endAngle)/2<1.5*Math.PI?36:2}).attr("text-anchor",n).text(function(a){return"T"===a.data.term?"TRUE ("+a.value+")":"F"===a.data.term?"FALSE ("+a.value+")":a.data.term+" ("+a.value+")"}).each(function(a){this._current=a}),v.transition().duration(h).attrTween("transform",g),v.exit().remove()}else k.selectAll("path").remove(),m.selectAll("line").remove(),m.selectAll("text.value").remove(),m.selectAll("text.units").remove()}})}}}]),angular.module("dangle").directive("fsPie",[function(){"use strict";return{restrict:"E",scope:{outerRadius:"=",innerRadius:"=",fontSize:"=",domain:"=",colorMap:"=",onClick:"=",bind:"="},link:function(a,b,c){var d=a.outerRadius||200,e=a.innerRadius||0,f=a.fontSize||14,g=c.fontColor||"#fff",h=void 0;void 0==c.field&&(c.field=c.bind.split(".").pop().toLowerCase()),void 0==a.colorMap?(h=d3.scale.category20c(),void 0!==a.domain&&h.domain(a.domain)):h=function(b){return a.colorMap[b]};var i=d3.svg.arc().outerRadius(d-10).innerRadius(e),j=d3.layout.pie().sort(null).value(function(a){return a.count}),k=d3.select(b[0]).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+2*d+" "+2*d).append("g").attr("transform","translate("+d+","+d+") rotate(180) scale(-1, -1)");a.$watch("bind",function(b){if(b){b=b.terms||[],k.selectAll("*").remove();var d=k.selectAll(".arc").data(j(b)).enter().append("g").attr("class","arc").on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(c.field,b.data.term)})});d.append("path").attr("d",i).style("fill",function(a){return h(a.data.term)}),d.append("text").attr("transform",function(a){return"translate("+i.centroid(a)+")"}).attr("dy",".55em").style("text-anchor","middle").attr("fill",g).attr("font-size",f).text(function(a){return a.data.term})}})}}}]),d3.gantt=function(){function a(b){r(b),s();var d=d3.select("body").append("svg").attr("class","chart").attr("width",j+c.left+c.right).attr("height",i+c.top+c.bottom).append("g").attr("class","gantt-chart").attr("width",j+c.left+c.right).attr("height",i+c.top+c.bottom).attr("transform","translate("+c.left+", "+c.top+")");return d.selectAll(".chart").data(b,l).enter().append("rect").attr("rx",5).attr("ry",5).attr("class",function(a){return null==h[a.status]?"bar":h[a.status]}).attr("y",0).attr("transform",m).attr("height",function(){return o.rangeBand()}).attr("width",function(a){return n(a.endDate)-n(a.startDate)}),d.append("g").attr("class","x axis").attr("transform","translate(0, "+(i-c.top-c.bottom)+")").transition().call(p),d.append("g").attr("class","y axis").transition().call(q),a}var b="fit",c={top:20,right:40,bottom:20,left:150},d=d3.time.day.offset(new Date,-3),e=d3.time.hour.offset(new Date,3),f=b,g=[],h=[],i=document.body.clientHeight-c.top-c.bottom-5,j=document.body.clientWidth-c.right-c.left-5,k="%H:%M",l=function(a){return a.startDate+a.taskName+a.endDate},m=function(a){return"translate("+n(a.startDate)+","+o(a.taskName)+")"},n=d3.time.scale().domain([d,e]).range([0,j]).clamp(!0),o=d3.scale.ordinal().domain(g).rangeRoundBands([0,i-c.top-c.bottom],.1),p=d3.svg.axis().scale(n).orient("bottom").tickFormat(d3.time.format(k)).tickSubdivide(!0).tickSize(8).tickPadding(8),q=d3.svg.axis().scale(o).orient("left").tickSize(0),r=function(a){if(f===b){if(void 0===a||a.length<1)return d=d3.time.day.offset(new Date,-3),void(e=d3.time.hour.offset(new Date,3));a.sort(function(a,b){return a.endDate-b.endDate}),e=a[a.length-1].endDate,a.sort(function(a,b){return a.startDate-b.startDate}),d=a[0].startDate}},s=function(){n=d3.time.scale().domain([d,e]).range([0,j]).clamp(!0),o=d3.scale.ordinal().domain(g).rangeRoundBands([0,i-c.top-c.bottom],.1),p=d3.svg.axis().scale(n).orient("bottom").tickFormat(d3.time.format(k)).tickSubdivide(!0).tickSize(8).tickPadding(8),q=d3.svg.axis().scale(o).orient("left").tickSize(0)};return a.redraw=function(b){r(b),s();var c=d3.select("svg"),d=c.select(".gantt-chart"),e=d.selectAll("rect").data(b,l);return e.enter().insert("rect",":first-child").attr("rx",5).attr("ry",5).attr("class",function(a){return null==h[a.status]?"bar":h[a.status]}).transition().attr("y",0).attr("transform",m).attr("height",function(){return o.rangeBand()}).attr("width",function(a){return n(a.endDate)-n(a.startDate)}),e.transition().attr("transform",m).attr("height",function(){return o.rangeBand()}).attr("width",function(a){return n(a.endDate)-n(a.startDate)}),e.exit().remove(),c.select(".x").transition().call(p),c.select(".y").transition().call(q),a},a.margin=function(b){return arguments.length?(c=b,a):c},a.timeDomain=function(b){return arguments.length?(d=+b[0],e=+b[1],a):[d,e]},a.timeDomainMode=function(b){return arguments.length?(f=b,a):f},a.taskTypes=function(b){return arguments.length?(g=b,a):g},a.taskStatus=function(b){return arguments.length?(h=b,a):h},a.width=function(b){return arguments.length?(j=+b,a):j},a.height=function(b){return arguments.length?(i=+b,a):i},a.tickFormat=function(b){return arguments.length?(k=b,a):k},a},window.CodeMirror=function(){"use strict";function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d||{};for(var e in Te)!d.hasOwnProperty(e)&&Te.hasOwnProperty(e)&&(d[e]=Te[e]);m(d);var f="string"==typeof d.value?0:d.value.first,g=this.display=b(c,f);g.wrapper.CodeMirror=this,j(this),d.autofocus&&!Be&&jb(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Nd},h(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var i=d.value;"string"==typeof i&&(i=new df(d.value,d.mode)),bb(this,hd)(this,i),oe&&setTimeout(Wd(ib,this,!0),20),lb(this);var k;try{k=document.activeElement==g.input}catch(l){}k||d.autofocus&&!Be?setTimeout(Wd(Bb,this),20):Cb(this),bb(this,function(){for(var a in Se)Se.propertyIsEnumerable(a)&&Se[a](this,d[a],Ue);for(var b=0;b<Ye.length;++b)Ye[b](this)})()}function b(a,b){var c={},d=c.input=Zd("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");re?d.style.width="1000px":d.setAttribute("wrap","off"),Ae&&(d.style.border="1px solid black"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),c.inputDiv=Zd("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),c.scrollbarH=Zd("div",[Zd("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),c.scrollbarV=Zd("div",[Zd("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),c.scrollbarFiller=Zd("div",null,"CodeMirror-scrollbar-filler"),c.lineDiv=Zd("div"),c.selectionDiv=Zd("div",null,null,"position: relative; z-index: 1"),c.cursor=Zd("div"," ","CodeMirror-cursor"),c.otherCursor=Zd("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),c.measure=Zd("div",null,"CodeMirror-measure"),c.lineSpace=Zd("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none"),c.mover=Zd("div",[Zd("div",[c.lineSpace],"CodeMirror-lines")],null,"position: relative"),c.sizer=Zd("div",[c.mover],"CodeMirror-sizer"),c.heightForcer=Zd("div",null,null,"position: absolute; height: "+jf+"px; width: 1px;"),c.gutters=Zd("div",null,"CodeMirror-gutters"),c.lineGutter=null;var e=Zd("div",[c.sizer,c.heightForcer,c.gutters],null,"position: relative; min-height: 100%");return c.scroller=Zd("div",[e],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=Zd("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.scroller],"CodeMirror"),pe&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),a.appendChild?a.appendChild(c.wrapper):a(c.wrapper),Ae&&(d.style.width="0px"),re||(c.scroller.draggable=!0),we?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):pe&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px"),c.viewOffset=c.lastSizeC=0,c.showingFrom=c.showingTo=b,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.prevInput="",c.alignWidgets=!1,c.pollingFast=!1,c.poll=new Nd,c.cachedCharWidth=c.cachedTextHeight=null,c.measureLineCache=[],c.measureLineCachePos=0,c.inaccurateSelection=!1,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption),b.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),b.doc.frontier=b.doc.first,F(b,100),b.state.modeGen++,b.curOp&&eb(b)}function d(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",""),l(a)),f(a),eb(a),R(a),setTimeout(function(){n(a.display,a.doc.height)},100)}function e(a){var b=Z(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/$(a.display)-3);return function(e){return Kc(a.doc,e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function f(a){var b=a.doc,c=e(a);b.iter(function(a){var b=c(a);b!=a.height&&ld(a,b)})}function g(a){var b=$e[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),R(a)}function i(a){j(a),eb(a)}function j(a){var b=a.display.gutters,c=a.options.gutters;$d(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(Zd("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function k(a,b){if(0==b.height)return 0;for(var c,d=b.text.length,e=b;c=Hc(e);){var f=c.find();e=id(a,f.from.line),d+=f.from.ch-f.to.ch}for(e=b;c=Ic(e);){var f=c.find();d-=e.text.length-f.from.ch,e=id(a,f.to.line),d+=e.text.length-f.to.ch}return d}function l(a){var b=a.display,c=a.doc;b.maxLine=id(c,c.first),b.maxLineLength=k(c,b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var d=k(c,a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function m(a){for(var b=!1,c=0;c<a.gutters.length;++c)"CodeMirror-linenumbers"==a.gutters[c]&&(a.lineNumbers?b=!0:a.gutters.splice(c--,1));!b&&a.lineNumbers&&a.gutters.push("CodeMirror-linenumbers")}function n(a,b){var c=b+K(a);a.sizer.style.minHeight=a.heightForcer.style.top=c+"px";var d=Math.max(c,a.scroller.scrollHeight),e=a.scroller.scrollWidth>a.scroller.clientWidth,f=d>a.scroller.clientHeight;f?(a.scrollbarV.style.display="block",a.scrollbarV.style.bottom=e?ce(a.measure)+"px":"0",a.scrollbarV.firstChild.style.height=d-a.scroller.clientHeight+a.scrollbarV.clientHeight+"px"):a.scrollbarV.style.display="",e?(a.scrollbarH.style.display="block",a.scrollbarH.style.right=f?ce(a.measure)+"px":"0",a.scrollbarH.firstChild.style.width=a.scroller.scrollWidth-a.scroller.clientWidth+a.scrollbarH.clientWidth+"px"):a.scrollbarH.style.display="",e&&f?(a.scrollbarFiller.style.display="block",a.scrollbarFiller.style.height=a.scrollbarFiller.style.width=ce(a.measure)+"px"):a.scrollbarFiller.style.display="",xe&&0===ce(a.measure)&&(a.scrollbarV.style.minWidth=a.scrollbarH.style.minHeight=ye?"18px":"12px")}function o(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top),d=Math.floor(d-J(a));var f=Math.ceil(d+e);return{from:nd(b,d),to:nd(b,f)}}function p(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var c=s(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,h=f.alignable;g<h.length;++g)h[g].style.left=e;a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function q(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=r(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(Zd("div",[Zd("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g),d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",!0}return!1}function r(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function s(a){return be(a.scroller).left-be(a.sizer).left}function t(a,b,c){for(var d,e=a.display.showingFrom,f=a.display.showingTo,g=o(a.display,a.doc,c);u(a,b,g)&&(d=!0,Kd(a,"update",a),(a.display.showingFrom!=e||a.display.showingTo!=f)&&Kd(a,"viewportChange",a,a.display.showingFrom,a.display.showingTo),B(a),n(a.display,a.doc.height),c&&(c=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,"number"==typeof c?c:c.top)),g=o(a.display,a.doc,c),!(g.from>=a.display.showingFrom&&g.to<=a.display.showingTo));)b=[];return d}function u(a,b,c){var d=a.display,e=a.doc;if(!d.wrapper.clientWidth)return d.showingFrom=d.showingTo=e.first,void(d.viewOffset=0);if(!(0==b.length&&c.from>d.showingFrom&&c.to<d.showingTo)){q(a)&&(b=[{from:e.first,to:e.first+e.size}]);var f=d.sizer.style.marginLeft=d.gutters.offsetWidth+"px";d.scrollbarH.style.left=a.options.fixedGutter?f:"0";var g=1/0;if(a.options.lineNumbers)for(var h=0;h<b.length;++h)if(b[h].diff){g=b[h].from;break}var i=e.first+e.size,j=Math.max(c.from-a.options.viewportMargin,e.first),k=Math.min(i,c.to+a.options.viewportMargin);if(d.showingFrom<j&&j-d.showingFrom<20&&(j=Math.max(e.first,d.showingFrom)),d.showingTo>k&&d.showingTo-k<20&&(k=Math.min(i,d.showingTo)),Le)for(j=md(Jc(e,id(e,j)));i>k&&Kc(e,id(e,k));)++k;var l=[{from:Math.max(d.showingFrom,e.first),to:Math.min(d.showingTo,i)}];if(l=l[0].from>=l[0].to?[]:w(l,b),Le)for(var h=0;h<l.length;++h)for(var m,n=l[h];m=Ic(id(e,n.to-1));){var o=m.find().from.line;if(!(o>n.from)){l.splice(h--,1);break}n.to=o}for(var p=0,h=0;h<l.length;++h){var n=l[h];n.from<j&&(n.from=j),n.to>k&&(n.to=k),n.from>=n.to?l.splice(h--,1):p+=n.to-n.from}if(p==k-j&&j==d.showingFrom&&k==d.showingTo)return void v(a);l.sort(function(a,b){return a.from-b.from});try{var r=document.activeElement}catch(s){}.7*(k-j)>p&&(d.lineDiv.style.display="none"),y(a,j,k,l,g),d.lineDiv.style.display="",r&&document.activeElement!=r&&r.offsetHeight&&r.focus();var t=j!=d.showingFrom||k!=d.showingTo||d.lastSizeC!=d.wrapper.clientHeight;t&&(d.lastSizeC=d.wrapper.clientHeight),d.showingFrom=j,d.showingTo=k,F(a,100);for(var u,x=d.lineDiv.offsetTop,z=d.lineDiv.firstChild;z;z=z.nextSibling)if(z.lineObj){if(pe){var A=z.offsetTop+z.offsetHeight;u=A-x,x=A}else{var B=be(z);u=B.bottom-B.top}var C=z.lineObj.height-u;if(2>u&&(u=Z(d)),C>.001||-.001>C){ld(z.lineObj,u);var D=z.lineObj.widgets;if(D)for(var h=0;h<D.length;++h)D[h].height=D[h].node.offsetHeight}}return v(a),!0}}function v(a){var b=a.display.viewOffset=od(a,id(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function w(a,b){for(var c=0,d=b.length||0;d>c;++c){for(var e=b[c],f=[],g=e.diff||0,h=0,i=a.length;i>h;++h){var j=a[h];e.to<=j.from&&e.diff?f.push({from:j.from+g,to:j.to+g}):e.to<=j.from||e.from>=j.to?f.push(j):(e.from>j.from&&f.push({from:j.from,to:e.from}),e.to<j.to&&f.push({from:e.to+g,to:j.to+g}))}a=f}return a}function x(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:s(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function y(a,b,c,d,e){function f(b){var c=b.nextSibling;return re&&Ce&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b),c}var g=x(a),h=a.display,i=a.options.lineNumbers;d.length||re&&a.display.currentWheelTarget||$d(h.lineDiv);var j=h.lineDiv,k=j.firstChild,l=d.shift(),m=b;for(a.doc.iter(b,c,function(b){if(l&&l.to==m&&(l=d.shift()),Kc(a.doc,b)){if(0!=b.height&&ld(b,0),b.widgets&&k.previousSibling)for(var c=0;c<b.widgets.length;++c)if(b.widgets[c].showIfHidden){var h=k.previousSibling;if(/pre/i.test(h.nodeName)){var n=Zd("div",null,null,"position: relative");h.parentNode.replaceChild(n,h),n.appendChild(h),h=n}var o=h.appendChild(Zd("div",[b.widgets[c].node],"CodeMirror-linewidget"));A(b.widgets[c],o,h,g)}}else if(l&&l.from<=m&&l.to>m){for(;k.lineObj!=b;)k=f(k);i&&m>=e&&k.lineNumber&&ae(k.lineNumber,r(a.options,m)),k=k.nextSibling}else{if(b.widgets)for(var p,q=0,s=k;s&&20>q;++q,s=s.nextSibling)if(s.lineObj==b&&/div/i.test(s.nodeName)){p=s;break}var t=z(a,b,m,g,p);if(t!=p)j.insertBefore(t,k);else{for(;k!=p;)k=f(k);k=k.nextSibling}t.lineObj=b}++m});k;)k=f(k)}function z(a,b,c,d,e){var f,g=Zc(a,b),h=b.gutterMarkers,i=a.display;if(!(a.options.lineNumbers||h||b.bgClass||b.wrapClass||b.widgets))return g;if(e){e.alignable=null;for(var j,k=!0,l=0,m=e.firstChild;m;m=j)if(j=m.nextSibling,/\bCodeMirror-linewidget\b/.test(m.className)){for(var n=0,o=!0;n<b.widgets.length;++n){var p=b.widgets[n],q=!1;if(p.above||(q=o,o=!1),p.node==m.firstChild){A(p,m,e,d),++l,q&&e.insertBefore(g,m);break}}if(n==b.widgets.length){k=!1;break}}else e.removeChild(m);k&&l==b.widgets.length&&(f=e,e.className=b.wrapClass||"")}if(f||(f=Zd("div",null,b.wrapClass,"position: relative"),f.appendChild(g)),b.bgClass&&f.insertBefore(Zd("div",null,b.bgClass+" CodeMirror-linebackground"),f.firstChild),a.options.lineNumbers||h){var s=f.insertBefore(Zd("div",null,null,"position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),f.firstChild);if(a.options.fixedGutter&&(f.alignable||(f.alignable=[])).push(s),!a.options.lineNumbers||h&&h["CodeMirror-linenumbers"]||(f.lineNumber=s.appendChild(Zd("div",r(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+i.lineNumInnerWidth+"px"))),h)for(var t=0;t<a.options.gutters.length;++t){var u=a.options.gutters[t],v=h.hasOwnProperty(u)&&h[u];v&&s.appendChild(Zd("div",[v],"CodeMirror-gutter-elt","left: "+d.gutterLeft[u]+"px; width: "+d.gutterWidth[u]+"px"))}}if(pe&&(f.style.zIndex=2),b.widgets&&f!=e)for(var n=0,w=b.widgets;n<w.length;++n){var p=w[n],x=Zd("div",[p.node],"CodeMirror-linewidget");A(p,x,f,d),p.above?f.insertBefore(x,a.options.lineNumbers&&0!=b.height?s:g):f.appendChild(x),Kd(p,"redraw")}return f}function A(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function B(a){var b=a.display,c=Qb(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting?C(a):b.cursor.style.display=b.otherCursor.style.display="none",c?b.selectionDiv.style.display="none":D(a),a.options.moveInputWithCursor){var d=V(a,a.doc.sel.head,"div"),e=be(b.wrapper),f=be(b.lineDiv);b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,d.top+f.top-e.top))+"px",b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,d.left+f.left-e.left))+"px"}}function C(a){var b=a.display,c=V(a,a.doc.sel.head,"div");b.cursor.style.left=c.left+"px",b.cursor.style.top=c.top+"px",b.cursor.style.height=Math.max(0,c.bottom-c.top)*a.options.cursorHeight+"px",b.cursor.style.display="",c.other?(b.otherCursor.style.display="",b.otherCursor.style.left=c.other.left+"px",b.otherCursor.style.top=c.other.top+"px",b.otherCursor.style.height=.85*(c.other.bottom-c.other.top)+"px"):b.otherCursor.style.display="none"}function D(a){function b(a,b,c,d){0>b&&(b=0),g.appendChild(Zd("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?h-a:c)+"px; height: "+(d-b)+"px"))}function c(c,d,f,g){function j(b){return U(a,Pb(c,b),"div",k)}var k=id(e,c),l=k.text.length,m=g?1/0:-1/0;return ee(pd(k),d||0,null==f?l:f,function(a,c,e){var k,n,o,p=j(a);if(a==c)k=p,n=o=p.left;else{if(k=j(c-1),"rtl"==e){var q=p;p=k,k=q}n=p.left,o=k.right}k.top-p.top>3&&(b(n,p.top,null,p.bottom),n=i,p.bottom<k.top&&b(n,p.bottom,null,k.top)),null==f&&c==l&&(o=h),null==d&&0==a&&(n=i),m=g?Math.min(k.top,m):Math.max(k.bottom,m),i+1>n&&(n=i),b(n,k.top,o-n,k.bottom)}),m}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),h=d.lineSpace.offsetWidth,i=L(a.display);if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{for(var j,k,l=id(e,f.from.line),m=l,n=[f.from.line,f.from.ch];j=Ic(m);){var o=j.find();if(n.push(o.from.ch,o.to.line,o.to.ch),o.to.line==f.to.line){n.push(f.to.ch),k=!0;break}m=id(e,o.to.line)}if(k)for(var p=0;p<n.length;p+=3)c(n[p],n[p+1],n[p+2]);else{var q,r,s=id(e,f.to.line);q=f.from.ch?c(f.from.line,f.from.ch,null,!1):od(a,l)-d.viewOffset,r=f.to.ch?c(f.to.line,Hc(s)?null:0,f.to.ch,!0):od(a,s)-d.viewOffset,r>q&&b(i,q,null,r)}}_d(d.selectionDiv,g),d.selectionDiv.style.display=""}function E(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="",b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate)}}function F(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.showingTo&&a.state.highlight.set(b,Wd(G,a))}function G(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.showingTo)){var c,d=+new Date+a.options.workTime,e=nc(b.mode,I(a,b.frontier)),f=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var h=g.styles;g.styles=Vc(a,g,e);for(var i=!h||h.length!=g.styles.length,j=0;!i&&j<h.length;++j)i=h[j]!=g.styles[j];i&&(c&&c.end==b.frontier?c.end++:f.push(c={start:b.frontier,end:b.frontier+1})),g.stateAfter=nc(b.mode,e)}else Xc(a,g,e),g.stateAfter=b.frontier%5==0?nc(b.mode,e):null;return++b.frontier,+new Date>d?(F(a,a.options.workDelay),!0):void 0}),f.length&&bb(a,function(){for(var a=0;a<f.length;++a)eb(this,f[a].start,f[a].end)})()}}function H(a,b){for(var c,d,e=a.doc,f=b,g=b-100;f>g;--f){if(f<=e.first)return e.first;var h=id(e,f-1);if(h.stateAfter)return f;var i=Od(h.text,null,a.options.tabSize);(null==d||c>i)&&(d=f-1,c=i)}return d}function I(a,b){var c=a.doc,d=a.display;if(!c.mode.startState)return!0;var e=H(a,b),f=e>c.first&&id(c,e-1).stateAfter;return f=f?nc(c.mode,f):oc(c.mode),c.iter(e,b,function(g){Xc(a,g,f);var h=e==b-1||e%5==0||e>=d.showingFrom&&e<d.showingTo;g.stateAfter=h?nc(c.mode,f):null,++e}),f}function J(a){return a.lineSpace.offsetTop}function K(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function L(a){var b=_d(a.measure,Zd("pre",null,null,"text-align: left")).appendChild(Zd("span","x"));return b.offsetLeft}function M(a,b,c,d){var e=-1;d=d||O(a,b);for(var f=c;;f+=e){var g=d[f];if(g)break;0>e&&0==f&&(e=1)}return{left:c>f?g.right:g.left,right:f>c?g.left:g.right,top:g.top,bottom:g.bottom}}function N(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.bgClass+"|"+b.wrapClass)return e.measure}}function O(a,b){var c=N(a,b);if(!c){c=P(a,b);var d=a.display.measureLineCache,e={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:c,classes:b.textClass+"|"+b.bgClass+"|"+b.wrapClass};16==d.length?d[++a.display.measureLineCachePos%16]=e:d.push(e)}return c}function P(a,b){var c=a.display,d=Vd(b.text.length),e=Zc(a,b,d);if(oe&&!pe&&!a.options.lineWrapping&&e.childNodes.length>100){for(var f=document.createDocumentFragment(),g=10,h=e.childNodes.length,i=0,j=Math.ceil(h/g);j>i;++i){for(var k=Zd("div",null,null,"display: inline-block"),l=0;g>l&&h;++l)k.appendChild(e.firstChild),--h;f.appendChild(k)}e.appendChild(f)}_d(c.measure,e);var m=be(c.lineDiv),n=[],o=Vd(b.text.length),p=e.offsetHeight;qe&&c.measure.first!=e&&_d(c.measure,e);for(var q,i=0;i<d.length;++i)if(q=d[i]){for(var r=be(q),s=Math.max(0,r.top-m.top),t=Math.min(r.bottom-m.top,p),l=0;l<n.length;l+=2){var u=n[l],v=n[l+1];
if(!(u>t||s>v)&&(s>=u&&v>=t||u>=s&&t>=v||Math.min(t,v)-Math.max(s,u)>=t-s>>1)){n[l]=Math.min(s,u),n[l+1]=Math.max(t,v);break}}l==n.length&&n.push(s,t);var w=r.right;q.measureRight&&(w=be(q.measureRight).left),o[i]={left:r.left-m.left,right:w-m.left,top:l}}for(var q,i=0;i<o.length;++i)if(q=o[i]){var x=q.top;q.top=n[x],q.bottom=n[x+1]}return o}function Q(a,b){var c=!1;if(b.markedSpans)for(var d=0;d<b.markedSpans;++d){var e=b.markedSpans[d];!e.collapsed||null!=e.to&&e.to!=b.text.length||(c=!0)}var f=!c&&N(a,b);if(f)return M(a,b,b.text.length,f).right;var g=Zc(a,b),h=g.appendChild(de(a.display.measure));return _d(a.display.measure,g),be(h).right-be(a.display.lineDiv).left}function R(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0,a.display.cachedCharWidth=a.display.cachedTextHeight=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function S(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Pc(b.widgets[e]);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=od(a,b);if("local"!=d&&(g-=a.display.viewOffset),"page"==d){var h=be(a.display.lineSpace);g+=h.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var i=h.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function T(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;"page"==c&&(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,e-=window.pageYOffset||(document.documentElement||document.body).scrollTop);var f=be(a.display.lineSpace);if(d-=f.left,e-=f.top,"local"==c||!c){var g=be(a.display.wrapper);d+=g.left,e+=g.top}return{left:d,top:e}}function U(a,b,c,d){return d||(d=id(a.doc,b.line)),S(a,d,M(a,d,b.ch),c)}function V(a,b,c,d,e){function f(b,f){var g=M(a,d,b,e);return f?g.left=g.right:g.right=g.left,S(a,d,g,c)}d=d||id(a.doc,b.line),e||(e=O(a,d));var g=pd(d),h=b.ch;if(!g)return f(h);for(var i,j,k=g[0].level,l=0;l<g.length;++l){var m,n,o=g[l],p=o.level%2;if(o.from<h&&o.to>h)return f(h,p);var q=p?o.to:o.from,r=p?o.from:o.to;if(q==h)n=l&&o.level<(m=g[l-1]).level?f(m.level%2?m.from:m.to-1,!0):f(p&&o.from!=o.to?h-1:h),p==k?i=n:j=n;else if(r==h){var m=l<g.length-1&&g[l+1];if(!p&&m&&m.from==m.to)continue;n=m&&o.level<m.level?f(m.level%2?m.to-1:m.from):f(p?h:h-1,!0),p==k?i=n:j=n}}return k&&!h&&(j=f(g[0].to-1)),i?(j&&(i.other=j),i):j}function W(a,b,c){var d=new Pb(a,b);return c&&(d.outside=!0),d}function X(a,b,c){var d=a.doc;if(c+=a.display.viewOffset,0>c)return W(d.first,0,!0);var e=nd(d,c),f=d.first+d.size-1;if(e>f)return W(d.first+d.size-1,id(d,f).text.length,!0);for(0>b&&(b=0);;){var g=id(d,e),h=Y(a,g,e,b,c),i=Ic(g),j=i&&i.find();if(!(i&&h.ch>=j.from.ch))return h;e=j.to.line}}function Y(a,b,c,d,e){function f(d){var e=V(a,Pb(c,d),"line",b,j);return h=!0,g>e.bottom?e.left-i:g<e.top?e.left+i:(h=!1,e.left)}var g=e-od(a,b),h=!1,i=2*a.display.wrapper.clientWidth,j=O(a,b),k=pd(b),l=b.text.length,m=he(b),n=ie(b),o=f(m),p=h,q=f(n),r=h;if(d>q)return W(c,n,r);for(;;){if(k?n==m||n==le(b,m,1):1>=n-m){for(var s=q-d>d-o,t=s?m:n;nf.test(b.text.charAt(t));)++t;var u=W(c,t,s?p:r);return u.after=s,u}var v=Math.ceil(l/2),w=m+v;if(k){w=m;for(var x=0;v>x;++x)w=le(b,w,1)}var y=f(w);y>d?(n=w,q=y,(r=h)&&(q+=1e3),l=v):(m=w,o=y,p=h,l-=v)}}function Z(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Fe){Fe=Zd("pre");for(var b=0;49>b;++b)Fe.appendChild(document.createTextNode("x")),Fe.appendChild(Zd("br"));Fe.appendChild(document.createTextNode("x"))}_d(a.measure,Fe);var c=Fe.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),$d(a.measure),c||1}function $(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=Zd("span","x"),c=Zd("pre",[b]);_d(a.measure,c);var d=b.offsetWidth;return d>2&&(a.cachedCharWidth=d),d||10}function _(a){a.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Me},hf++||(gf=[])}function ab(a){var b=a.curOp,c=a.doc,d=a.display;if(a.curOp=null,b.updateMaxLine&&l(a),d.maxLineChanged&&!a.options.lineWrapping&&d.maxLine){var e=Q(a,d.maxLine);d.sizer.style.minWidth=Math.max(0,e+3+jf)+"px",d.maxLineChanged=!1;var f=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);f<c.scrollLeft&&!b.updateScrollPos&&tb(a,Math.min(d.scroller.scrollLeft,f),!0)}var g,h;if(b.updateScrollPos)g=b.updateScrollPos;else if(b.selectionChanged&&d.scroller.clientHeight){var i=V(a,c.sel.head);g=dc(a,i.left,i.top,i.left,i.bottom)}(b.changes.length||g&&null!=g.scrollTop)&&(h=t(a,b.changes,g&&g.scrollTop),a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop)),!h&&b.selectionChanged&&B(a),b.updateScrollPos?(d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=g.scrollTop,d.scroller.scrollLeft=d.scrollbarH.scrollLeft=c.scrollLeft=g.scrollLeft,p(a),b.scrollToPos&&bc(a,Ub(a.doc,b.scrollToPos),b.scrollToPosMargin)):g&&ac(a),b.selectionChanged&&E(a),a.state.focused&&b.updateInput&&ib(a,b.userSelChange);var j=b.maybeHiddenMarkers,k=b.maybeUnhiddenMarkers;if(j)for(var m=0;m<j.length;++m)j[m].lines.length||Jd(j[m],"hide");if(k)for(var m=0;m<k.length;++m)k[m].lines.length&&Jd(k[m],"unhide");var n;if(--hf||(n=gf,gf=null),b.textChanged&&Jd(a,"change",a,b.textChanged),b.cursorActivity&&Jd(a,"cursorActivity",a),n)for(var m=0;m<n.length;++m)n[m]()}function bb(a,b){return function(){var c=a||this,d=!c.curOp;d&&_(c);try{var e=b.apply(c,arguments)}finally{d&&ab(c)}return e}}function cb(a){return function(){var b,c=this.cm&&!this.cm.curOp;c&&_(this.cm);try{b=a.apply(this,arguments)}finally{c&&ab(this.cm)}return b}}function db(a,b){var c,d=!a.curOp;d&&_(a);try{c=b()}finally{d&&ab(a)}return c}function eb(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),a.curOp.changes.push({from:b,to:c,diff:d})}function fb(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){hb(a),a.state.focused&&fb(a)})}function gb(a){function b(){var d=hb(a);d||c?(a.display.pollingFast=!1,fb(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0,a.display.poll.set(20,b)}function hb(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||tf(b)||kb(a))return!1;var f=b.value;if(f==c&&Qb(e.from,e.to))return!1;if(oe&&!qe&&a.display.inputHasSelection===f)return ib(a,!0),!1;var g=!a.curOp;g&&_(a),e.shift=!1;for(var h=0,i=Math.min(c.length,f.length);i>h&&c.charCodeAt(h)==f.charCodeAt(h);)++h;var j=e.from,k=e.to;h<c.length?j=Pb(j.line,j.ch-(c.length-h)):a.state.overwrite&&Qb(j,k)&&!a.state.pasteIncoming&&(k=Pb(k.line,Math.min(id(d,k.line).text.length,k.ch+(f.length-h))));var l=a.curOp.updateInput;return Ib(a.doc,{from:j,to:k,text:sf(f.slice(h)),origin:a.state.pasteIncoming?"paste":"+input"},"end"),a.curOp.updateInput=l,f.length>1e3||f.indexOf("\n")>-1?b.value=a.display.prevInput="":a.display.prevInput=f,g&&ab(a),a.state.pasteIncoming=!1,!0}function ib(a,b){var c,d,e=a.doc;if(Qb(e.sel.from,e.sel.to))b&&(a.display.prevInput=a.display.input.value="",oe&&!qe&&(a.display.inputHasSelection=null));else{a.display.prevInput="",c=uf&&(e.sel.to.line-e.sel.from.line>100||(d=a.getSelection()).length>1e3);var f=c?"-":d||a.getSelection();a.display.input.value=f,a.state.focused&&Rd(a.display.input),oe&&!qe&&(a.display.inputHasSelection=f)}a.display.inaccurateSelection=c}function jb(a){"nocursor"==a.options.readOnly||Be&&document.activeElement==a.display.input||a.display.input.focus()}function kb(a){return a.options.readOnly||a.doc.cantEdit}function lb(a){function b(){a.state.focused&&setTimeout(Wd(jb,a),0)}function c(){g.cachedCharWidth=g.cachedTextHeight=null,R(a),db(a,Wd(eb,a))}function d(){for(var a=g.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5e3):Id(window,"resize",c)}function e(b){a.options.onDragEvent&&a.options.onDragEvent(a,Bd(b))||Ed(b)}function f(){g.inaccurateSelection&&(g.prevInput="",g.inaccurateSelection=!1,g.input.value=a.getSelection(),Rd(g.input))}var g=a.display;Hd(g.scroller,"mousedown",bb(a,ob)),oe?Hd(g.scroller,"dblclick",bb(a,function(b){var c=nb(a,b);if(c&&!qb(a,b)&&!mb(a.display,b)){Cd(b);var d=kc(id(a.doc,c.line).text,c);Xb(a.doc,d.from,d.to)}})):Hd(g.scroller,"dblclick",Cd),Hd(g.lineSpace,"selectstart",function(a){mb(g,a)||Cd(a)}),Je||Hd(g.scroller,"contextmenu",function(b){Db(a,b)}),Hd(g.scroller,"scroll",function(){g.scroller.clientHeight&&(sb(a,g.scroller.scrollTop),tb(a,g.scroller.scrollLeft,!0),Jd(a,"scroll",a))}),Hd(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&sb(a,g.scrollbarV.scrollTop)}),Hd(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&tb(a,g.scrollbarH.scrollLeft)}),Hd(g.scroller,"mousewheel",function(b){ub(a,b)}),Hd(g.scroller,"DOMMouseScroll",function(b){ub(a,b)}),Hd(g.scrollbarH,"mousedown",b),Hd(g.scrollbarV,"mousedown",b),Hd(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=0}),Hd(window,"resize",c),setTimeout(d,5e3),Hd(g.input,"keyup",bb(a,function(b){a.options.onKeyEvent&&a.options.onKeyEvent(a,Bd(b))||16==b.keyCode&&(a.doc.sel.shift=!1)})),Hd(g.input,"input",Wd(gb,a)),Hd(g.input,"keydown",bb(a,zb)),Hd(g.input,"keypress",bb(a,Ab)),Hd(g.input,"focus",Wd(Bb,a)),Hd(g.input,"blur",Wd(Cb,a)),a.options.dragDrop&&(Hd(g.scroller,"dragstart",function(b){rb(a,b)}),Hd(g.scroller,"dragenter",e),Hd(g.scroller,"dragover",e),Hd(g.scroller,"drop",bb(a,pb))),Hd(g.scroller,"paste",function(b){mb(g,b)||(jb(a),gb(a))}),Hd(g.input,"paste",function(){a.state.pasteIncoming=!0,gb(a)}),Hd(g.input,"cut",f),Hd(g.input,"copy",f),we&&Hd(g.sizer,"mouseup",function(){document.activeElement==g.input&&g.input.blur(),jb(a)})}function mb(a,b){for(var c=Fd(b);c!=a.wrapper;c=c.parentNode){if(!c)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(c.className)||c.parentNode==a.sizer&&c!=a.mover)return!0}}function nb(a,b,c){var d=a.display;if(!c){var e=Fd(b);if(e==d.scrollbarH||e==d.scrollbarH.firstChild||e==d.scrollbarV||e==d.scrollbarV.firstChild||e==d.scrollbarFiller)return null}var f,g,h=be(d.lineSpace);try{f=b.clientX,g=b.clientY}catch(b){return null}return X(a,f-h.left,g-h.top)}function ob(a){function b(a){if(!Qb(r,a)){if(r=a,"single"==k)return void Xb(e.doc,Ub(g,i),a);if(p=Ub(g,p),q=Ub(g,q),"double"==k){var b=kc(id(g,a.line).text,a);Rb(a,p)?Xb(e.doc,b.from,q):Xb(e.doc,p,b.to)}else"triple"==k&&(Rb(a,p)?Xb(e.doc,q,Ub(g,Pb(a.line,0))):Xb(e.doc,p,Ub(g,Pb(a.line+1,0))))}}function c(a){var d=++t,h=nb(e,a,!0);if(h)if(Qb(h,m)){var i=a.clientY<s.top?-20:a.clientY>s.bottom?20:0;i&&setTimeout(bb(e,function(){t==d&&(f.scroller.scrollTop+=i,c(a))}),50)}else{e.state.focused||Bb(e),m=h,b(h);var j=o(f,g);(h.line>=j.to||h.line<j.from)&&setTimeout(bb(e,function(){t==d&&c(a)}),150)}}function d(a){t=1/0;var c=nb(e,a);c&&b(c),Cd(a),jb(e),Id(document,"mousemove",u),Id(document,"mouseup",v)}var e=this,f=e.display,g=e.doc,h=g.sel;if(h.shift=a.shiftKey,mb(f,a))return void(re||(f.scroller.draggable=!1,setTimeout(function(){f.scroller.draggable=!0},100)));if(!qb(e,a)){var i=nb(e,a);switch(Gd(a)){case 3:return void(Je&&Db.call(e,e,a));case 2:return i&&Xb(e.doc,i),setTimeout(Wd(jb,e),20),void Cd(a)}if(!i)return void(Fd(a)==f.scroller&&Cd(a));e.state.focused||Bb(e);var j=+new Date,k="single";if(He&&He.time>j-400&&Qb(He.pos,i))k="triple",Cd(a),setTimeout(Wd(jb,e),20),lc(e,i.line);else if(Ge&&Ge.time>j-400&&Qb(Ge.pos,i)){k="double",He={time:j,pos:i},Cd(a);var l=kc(id(g,i.line).text,i);Xb(e.doc,l.from,l.to)}else Ge={time:j,pos:i};var m=i;if(e.options.dragDrop&&of&&!kb(e)&&!Qb(h.from,h.to)&&!Rb(i,h.from)&&!Rb(h.to,i)&&"single"==k){var n=bb(e,function(b){re&&(f.scroller.draggable=!1),e.state.draggingText=!1,Id(document,"mouseup",n),Id(f.scroller,"drop",n),Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10&&(Cd(b),Xb(e.doc,i),jb(e))});return re&&(f.scroller.draggable=!0),e.state.draggingText=n,f.scroller.dragDrop&&f.scroller.dragDrop(),Hd(document,"mouseup",n),void Hd(f.scroller,"drop",n)}Cd(a),"single"==k&&Xb(e.doc,Ub(g,i));var p=h.from,q=h.to,r=i,s=be(f.wrapper),t=0,u=bb(e,function(a){oe||Gd(a)?c(a):d(a)}),v=bb(e,d);Hd(document,"mousemove",u),Hd(document,"mouseup",v)}}function pb(a){var b=this;if(!(mb(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,Bd(a)))){Cd(a);var c=nb(b,a,!0),d=a.dataTransfer.files;if(c&&!kb(b))if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){var h=new FileReader;h.onload=function(){f[d]=h.result,++g==e&&(c=Ub(b.doc,c),Ib(b.doc,{from:c,to:c,text:sf(f.join("\n")),origin:"paste"},"around"))},h.readAsText(a)},i=0;e>i;++i)h(d[i],i);else{if(b.state.draggingText&&!Rb(c,b.doc.sel.from)&&!Rb(b.doc.sel.to,c))return b.state.draggingText(a),void setTimeout(Wd(jb,b),20);try{var f=a.dataTransfer.getData("Text");if(f){var j=b.doc.sel.from,k=b.doc.sel.to;Zb(b.doc,c,c),b.state.draggingText&&Ob(b.doc,"",j,k,"paste"),b.replaceSelection(f,null,"paste"),jb(b),Bb(b)}}catch(a){}}}}function qb(a,b){var c=a.display;try{var d=b.clientX,e=b.clientY}catch(b){return!1}if(d>=Math.floor(be(c.gutters).right))return!1;if(Cd(b),!Md(a,"gutterClick"))return!0;var f=be(c.lineDiv);if(e>f.bottom)return!0;e-=f.top-c.viewOffset;for(var g=0;g<a.options.gutters.length;++g){var h=c.gutters.childNodes[g];if(h&&be(h).right>=d){var i=nd(a.doc,e),j=a.options.gutters[g];Kd(a,"gutterClick",a,i,j,b);break}}return!0}function rb(a,b){if(oe&&!a.state.draggingText)return void Ed(b);if(!mb(a.display,b)){var c=a.getSelection();if(b.dataTransfer.setData("Text",c),b.dataTransfer.setDragImage){var d=Zd("img",null,null,"position: fixed; left: 0; top: 0;");ue&&(d.width=d.height=1,a.display.wrapper.appendChild(d),d._top=d.offsetTop),ve&&(a.display.dragImg?d=a.display.dragImg:(a.display.dragImg=d,d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a.display.wrapper.appendChild(d))),b.dataTransfer.setDragImage(d,0,0),ue&&d.parentNode.removeChild(d)}}}function sb(a,b){Math.abs(a.doc.scrollTop-b)<2||(a.doc.scrollTop=b,ne||t(a,[],b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),ne&&t(a,[]))}function tb(a,b,c){(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,p(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function ub(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail),null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&Ce&&re)for(var g=b.target;g!=f;g=g.parentNode)if(g.lineObj){a.display.currentWheelTarget=g;break}if(c&&!ne&&!ue&&null!=Oe)return d&&sb(a,Math.max(0,Math.min(f.scrollTop+d*Oe,f.scrollHeight-f.clientHeight))),tb(a,Math.max(0,Math.min(f.scrollLeft+c*Oe,f.scrollWidth-f.clientWidth))),Cd(b),void(e.wheelStartX=null);if(d&&null!=Oe){var h=d*Oe,i=a.doc.scrollTop,j=i+e.wrapper.clientHeight;0>h?i=Math.max(0,i+h-50):j=Math.min(a.doc.height,j+h+50),t(a,[],{top:i,bottom:j})}20>Ne&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,c=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null,c&&(Oe=(Oe*Ne+c)/(Ne+1),++Ne)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}}function vb(a,b,c){if("string"==typeof b&&(b=Ze[b],!b))return!1;a.display.pollingFast&&hb(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,f=!1;try{kb(a)&&(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),f=b(a)!=kf}finally{d.sel.shift=e,a.state.suppressEdits=!1}return f}function wb(a){var b=a.state.keyMaps.slice(0);return a.options.extraKeys&&b.push(a.options.extraKeys),b.push(a.options.keyMap),b}function xb(a,b){var c=pc(a.options.keyMap),d=c.auto;clearTimeout(Pe),d&&!rc(b)&&(Pe=setTimeout(function(){pc(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d)},50));var e=sc(b,!0),f=!1;if(!e)return!1;var g=wb(a);return f=b.shiftKey?qc("Shift-"+e,g,function(b){return vb(a,b,!0)})||qc(e,g,function(b){return"string"==typeof b&&/^go[A-Z]/.test(b)?vb(a,b):void 0}):qc(e,g,function(b){return vb(a,b)}),"stop"==f&&(f=!1),f&&(Cd(b),E(a),qe&&(b.oldKeyCode=b.keyCode,b.keyCode=0)),f}function yb(a,b,c){var d=qc("'"+c+"'",wb(a),function(b){return vb(a,b,!0)});return d&&(Cd(b),E(a)),d}function zb(a){var b=this;if(b.state.focused||Bb(b),oe&&27==a.keyCode&&(a.returnValue=!1),!b.options.onKeyEvent||!b.options.onKeyEvent(b,Bd(a))){var c=a.keyCode;b.doc.sel.shift=16==c||a.shiftKey;var d=xb(b,a);ue&&(Re=d?c:null,!d&&88==c&&!uf&&(Ce?a.metaKey:a.ctrlKey)&&b.replaceSelection(""))}}function Ab(a){var b=this;if(!b.options.onKeyEvent||!b.options.onKeyEvent(b,Bd(a))){var c=a.keyCode,d=a.charCode;if(ue&&c==Re)return Re=null,void Cd(a);if(!(ue&&(!a.which||a.which<10)||we)||!xb(b,a)){var e=String.fromCharCode(null==d?c:d);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!kb(this)&&this.doc.mode.electricChars.indexOf(e)>-1&&setTimeout(bb(b,function(){gc(b,b.doc.sel.to.line,"smart")}),75),yb(b,a,e)||(oe&&!qe&&(b.display.inputHasSelection=null),gb(b))}}}function Bb(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Jd(a,"focus",a),a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),ib(a,!0)),fb(a),E(a))}function Cb(a){a.state.focused&&(Jd(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.doc.sel.shift=!1)},150)}function Db(a,b){function c(){if(d.inputDiv.style.position="relative",d.input.style.cssText=h,qe&&(d.scrollbarV.scrollTop=d.scroller.scrollTop=g),fb(a),null!=d.input.selectionStart&&(!oe||qe)){clearTimeout(Qe);var b=d.input.value=" "+(Qb(e.from,e.to)?"":d.input.value),c=0;d.prevInput=" ",d.input.selectionStart=1,d.input.selectionEnd=b.length;var f=function(){" "==d.prevInput&&0==d.input.selectionStart?bb(a,Ze.selectAll)(a):c++<10?Qe=setTimeout(f,500):ib(a)};Qe=setTimeout(f,200)}}var d=a.display,e=a.doc.sel;if(!mb(d,b)){var f=nb(a,b),g=d.scroller.scrollTop;if(f&&!ue){(Qb(e.from,e.to)||Rb(f,e.from)||!Rb(f,e.to))&&bb(a,Zb)(a.doc,f,f);var h=d.input.style.cssText;if(d.inputDiv.style.position="absolute",d.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",jb(a),ib(a,!0),Qb(e.from,e.to)&&(d.input.value=d.prevInput=" "),Je){Ed(b);var i=function(){Id(window,"mouseup",i),setTimeout(c,20)};Hd(window,"mouseup",i)}else setTimeout(c,50)}}}function Eb(a){return a.text?Pb(a.from.line+a.text.length-1,Qd(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function Fb(a,b,c){if(!Rb(b.from,c))return Ub(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+d){var e=c.line-d,f=a.first+a.size-1;return e>f?Pb(f,id(a,f).text.length):Vb(c,id(a,e).text.length)}if(c.line==b.to.line+d)return Vb(c,Qd(b.text).length+(1==b.text.length?b.from.ch:0)+id(a,b.to.line).text.length-b.to.ch);var g=c.line-b.from.line;return Vb(c,b.text[g].length+(g?0:b.from.ch))}function Gb(a,b,c){if(c&&"object"==typeof c)return{anchor:Fb(a,b,c.anchor),head:Fb(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=Eb(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,head:d};var e=function(a){if(Rb(a,b.from))return a;if(!Rb(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;return a.line==b.to.line&&(e+=d.ch-b.to.ch),Pb(c,e)};return{anchor:e(a.sel.anchor),head:e(a.sel.head)}}function Hb(a,b){var c={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,update:function(b,c,d,e){b&&(this.from=Ub(a,b)),c&&(this.to=Ub(a,c)),d&&(this.text=d),void 0!==e&&(this.origin=e)},cancel:function(){this.canceled=!0}};return Jd(a,"beforeChange",a,c),a.cm&&Jd(a.cm,"beforeChange",a.cm,c),c.canceled?null:{from:c.from,to:c.to,text:c.text,origin:c.origin}}function Ib(a,b,c,d){if(a.cm){if(!a.cm.curOp)return bb(a.cm,Ib)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(!(Md(a,"beforeChange")||a.cm&&Md(a.cm,"beforeChange"))||(b=Hb(a,b))){var e=Ke&&!d&&Fc(a,b.from,b.to);if(e){for(var f=e.length-1;f>=1;--f)Jb(a,{from:e[f].from,to:e[f].to,text:[""]});e.length&&Jb(a,{from:e[0].from,to:e[0].to,text:b.text},c)}else Jb(a,b,c)}}function Jb(a,b,c){var d=Gb(a,b,c);td(a,b,d,a.cm?a.cm.curOp.id:0/0),Mb(a,b,d,Dc(a,b));var e=[];gd(a,function(a,c){c||-1!=Sd(e,a.history)||(zd(a.history,b),e.push(a.history)),Mb(a,b,null,Dc(a,b))})}function Kb(a,b){if(!a.cm||!a.cm.state.suppressEdits){var c=a.history,d=("undo"==b?c.done:c.undone).pop();if(d){c.dirtyCounter+="undo"==b?-1:1;var e={changes:[],anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore};("undo"==b?c.undone:c.done).push(e);for(var f=d.changes.length-1;f>=0;--f){var g=d.changes[f];g.origin=b,e.changes.push(sd(a,g));var h=f?Gb(a,g,null):{anchor:d.anchorBefore,head:d.headBefore};Mb(a,g,h,Ec(a,g));var i=[];gd(a,function(a,b){b||-1!=Sd(i,a.history)||(zd(a.history,g),i.push(a.history)),Mb(a,g,null,Ec(a,g))})}}}}function Lb(a,b){function c(a){return Pb(a.line+b,a.ch)}a.first+=b,a.cm&&eb(a.cm,a.first,a.first,b),a.sel.head=c(a.sel.head),a.sel.anchor=c(a.sel.anchor),a.sel.from=c(a.sel.from),a.sel.to=c(a.sel.to)}function Mb(a,b,c,d){if(a.cm&&!a.cm.curOp)return bb(a.cm,Mb)(a,b,c,d);if(b.to.line<a.first)return void Lb(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Lb(a,e),b={from:Pb(a.first,0),to:Pb(b.to.line+e,b.to.ch),text:[Qd(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:Pb(f,id(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=jd(a,b.from,b.to),c||(c=Gb(a,b,null)),a.cm?Nb(a.cm,b,d,c):dd(a,b,d,c)}}function Nb(a,b,c,d){var f=a.doc,g=a.display,h=b.from,i=b.to,j=!1,l=h.line;a.options.lineWrapping||(l=md(Jc(f,id(f,h.line))),f.iter(l,i.line+1,function(a){return a==g.maxLine?(j=!0,!0):void 0})),Rb(f.sel.head,b.from)||Rb(b.to,f.sel.head)||(a.curOp.cursorActivity=!0),dd(f,b,c,d,e(a)),a.options.lineWrapping||(f.iter(l,h.line+b.text.length,function(a){var b=k(f,a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=b,g.maxLineChanged=!0,j=!1)}),j&&(a.curOp.updateMaxLine=!0)),f.frontier=Math.min(f.frontier,h.line),F(a,400);var m=b.text.length-(i.line-h.line)-1;if(eb(a,h.line,i.line+1,m),Md(a,"change")){var n={from:h,to:i,text:b.text,removed:b.removed,origin:b.origin};if(a.curOp.textChanged){for(var o=a.curOp.textChanged;o.next;o=o.next);o.next=n}else a.curOp.textChanged=n}}function Ob(a,b,c,d,e){if(d||(d=c),Rb(d,c)){var f=d;d=c,c=f}"string"==typeof b&&(b=sf(b)),Ib(a,{from:c,to:d,text:b,origin:e},null)}function Pb(a,b){return this instanceof Pb?(this.line=a,void(this.ch=b)):new Pb(a,b)}function Qb(a,b){return a.line==b.line&&a.ch==b.ch}function Rb(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function Sb(a){return Pb(a.line,a.ch)}function Tb(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function Ub(a,b){if(b.line<a.first)return Pb(a.first,0);var c=a.first+a.size-1;return b.line>c?Pb(c,id(a,c).text.length):Vb(b,id(a,b.line).text.length)}function Vb(a,b){var c=a.ch;return null==c||c>b?Pb(a.line,b):0>c?Pb(a.line,0):a}function Wb(a,b){return b>=a.first&&b<a.first+a.size}function Xb(a,b,c,d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=Rb(b,e);f!=Rb(c,e)?(e=b,b=c):f!=Rb(b,c)&&(b=c)}Zb(a,e,b,d)}else Zb(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function Yb(a,b,c){var d={anchor:b,head:c};return Jd(a,"beforeSelectionChange",a,d),a.cm&&Jd(a.cm,"beforeSelectionChange",a.cm,d),d.anchor=Ub(a,d.anchor),d.head=Ub(a,d.head),d}function Zb(a,b,c,d,e){if(!e&&Md(a,"beforeSelectionChange")||a.cm&&Md(a.cm,"beforeSelectionChange")){var f=Yb(a,b,c);c=f.head,b=f.anchor}var g=a.sel;if(g.goalColumn=null,(e||!Qb(b,g.anchor))&&(b=_b(a,b,d,"push"!=e)),(e||!Qb(c,g.head))&&(c=_b(a,c,d,"push"!=e)),!Qb(g.anchor,b)||!Qb(g.head,c)){g.anchor=b,g.head=c;var h=Rb(c,b);g.from=h?c:b,g.to=h?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=!0),Kd(a,"cursorActivity",a)}}function $b(a){Zb(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function _b(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=id(a,f.line);if(h.markedSpans)for(var i=0;i<h.markedSpans.length;++i){var j=h.markedSpans[i],k=j.marker;if((null==j.from||(k.inclusiveLeft?j.from<=f.ch:j.from<f.ch))&&(null==j.to||(k.inclusiveRight?j.to>=f.ch:j.to>f.ch))){if(d&&(Jd(k,"beforeCursorEnter"),k.explicitlyCleared)){if(h.markedSpans){--i;continue}break}if(!k.atomic)continue;var l=k.find()[0>g?"from":"to"];if(Qb(l,f)&&(l.ch+=g,l.ch<0?l=l.line>a.first?Ub(a,Pb(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?Pb(l.line+1,0):null),!l)){if(e)return d?(a.cantEdit=!0,Pb(a.first,0)):_b(a,b,c,!0);e=!0,l=b,g=-g}f=l;continue a}}return f}}function ac(a){var b=bc(a,a.doc.sel.head);if(a.state.focused){var c=a.display,d=be(c.sizer),e=null,f=J(a.display);if(b.top+f+d.top<0?e=!0:b.bottom+f+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null!=e&&!ze){var g="none"==c.cursor.style.display;g&&(c.cursor.style.display="",c.cursor.style.left=b.left+"px",c.cursor.style.top=b.top-c.viewOffset+"px"),c.cursor.scrollIntoView(e),g&&(c.cursor.style.display="none")}}}function bc(a,b,c){for(null==c&&(c=0);;){var d=!1,e=V(a,b),f=dc(a,e.left,e.top-c,e.left,e.bottom+c),g=a.doc.scrollTop,h=a.doc.scrollLeft;if(null!=f.scrollTop&&(sb(a,f.scrollTop),Math.abs(a.doc.scrollTop-g)>1&&(d=!0)),null!=f.scrollLeft&&(tb(a,f.scrollLeft),Math.abs(a.doc.scrollLeft-h)>1&&(d=!0)),!d)return e}}function cc(a,b,c,d,e){var f=dc(a,b,c,d,e);null!=f.scrollTop&&sb(a,f.scrollTop),null!=f.scrollLeft&&tb(a,f.scrollLeft)}function dc(a,b,c,d,e){var f=a.display,g=J(f);c+=g,e+=g,0>c&&(c=0);var h=f.scroller.clientHeight-jf,i=f.scroller.scrollTop,j={},k=a.doc.height+K(f),l=g+10>c,m=e+g>k-10;if(i>c)j.scrollTop=l?0:c;else if(e>i+h){var n=Math.min(c,(m?k:e)-h);n!=i&&(j.scrollTop=n)}var o=f.scroller.clientWidth-jf,p=f.scroller.scrollLeft;b+=f.gutters.offsetWidth,d+=f.gutters.offsetWidth;var q=f.gutters.offsetWidth,r=q+10>b;return p+q>b||r?(r&&(b=0),j.scrollLeft=Math.max(0,b-10-q)):d>o+p-3&&(j.scrollLeft=d+10-o),j}function ec(a,b,c){a.curOp.updateScrollPos={scrollLeft:null==b?a.doc.scrollLeft:b,scrollTop:null==c?a.doc.scrollTop:c}}function fc(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop}),e=a.display.scroller;d.scrollTop=Math.max(0,Math.min(e.scrollHeight-e.clientHeight,d.scrollTop+c)),d.scrollLeft=Math.max(0,Math.min(e.scrollWidth-e.clientWidth,d.scrollLeft+b))}function gc(a,b,c,d){var e=a.doc;if(c||(c="add"),"smart"==c)if(a.doc.mode.indent)var f=I(a,b);else c="prev";var g,h=a.options.tabSize,i=id(e,b),j=Od(i.text,null,h),k=i.text.match(/^\s*/)[0];if("smart"==c&&(g=a.doc.mode.indent(f,i.text.slice(k.length),i.text),g==kf)){if(!d)return;c="prev"}"prev"==c?g=b>e.first?Od(id(e,b-1).text,null,h):0:"add"==c?g=j+a.options.indentUnit:"subtract"==c&&(g=j-a.options.indentUnit),g=Math.max(0,g);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(g/h);n;--n)m+=h,l+="	";g>m&&(l+=Pd(g-m)),l!=k&&Ob(a.doc,l,Pb(b,0),Pb(b,k.length),"+input"),i.stateAfter=null}function hc(a,b,c){var d=b,e=b,f=a.doc;return"number"==typeof b?e=id(f,Tb(f,b)):d=md(b),null==d?null:c(e,d)?(eb(a,d,d+1),e):null}function ic(a,b,c,d,e){function f(){var b=h+c;return b<a.first||b>=a.first+a.size?k=!1:(h=b,j=id(a,b))}function g(a){var b=(e?le:me)(j,i,c,!0);if(null==b){if(a||!f())return k=!1;i=e?(0>c?ie:he)(j):0>c?j.text.length:0}else i=b;return!0}var h=b.line,i=b.ch,j=id(a,h),k=!0;if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var l=null,m="group"==d,n=!0;!(0>c)||g(!n);n=!1){var o=j.text.charAt(i)||"\n",p=Xd(o)?"w":m?/\s/.test(o)?null:"p":null;if(l&&l!=p){0>c&&(c=1,g());break}if(p&&(l=p),c>0&&!g(!n))break}var q=_b(a,Pb(h,i),c,!0);return k||(q.hitSide=!0),q}function jc(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);e=b.top+c*(h-(0>c?1.5:.5)*Z(a.display))}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(;;){var i=X(a,g,e);if(!i.outside)break;if(0>c?0>=e:e>=f.height){i.hitSide=!0;break}e+=5*c}return i}function kc(a,b){var c=b.ch,d=b.ch;if(a){b.after===!1||d==a.length?--c:++d;for(var e=a.charAt(c),f=Xd(e)?Xd:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Xd(a)};c>0&&f(a.charAt(c-1));)--c;for(;d<a.length&&f(a.charAt(d));)++d}return{from:Pb(b.line,c),to:Pb(b.line,d)}}function lc(a,b){Xb(a.doc,Pb(b,0),Ub(a.doc,Pb(b+1,0)))}function mc(b,c,d,e){a.defaults[b]=c,d&&(Se[b]=e?function(a,b,c){c!=Ue&&d(a,b,c)}:d)}function nc(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function oc(a,b,c){return a.startState?a.startState(b,c):!0}function pc(a){return"string"==typeof a?$e[a]:a}function qc(a,b,c){function d(b){b=pc(b);var e=b[a];if(e===!1)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";var f=b.fallthrough;if(null==f)return!1;if("[object Array]"!=Object.prototype.toString.call(f))return d(f);for(var g=0,h=f.length;h>g;++g){var i=d(f[g]);if(i)return i}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return f}}function rc(a){var b=vf[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function sc(a,b){if(ue&&34==a.keyCode&&a["char"])return!1;var c=vf[a.keyCode];return null==c||a.altGraphKey?!1:(a.altKey&&(c="Alt-"+c),(Ie?a.metaKey:a.ctrlKey)&&(c="Ctrl-"+c),(Ie?a.ctrlKey:a.metaKey)&&(c="Cmd-"+c),!b&&a.shiftKey&&(c="Shift-"+c),c)}function tc(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0}function uc(a,b){this.lines=[],this.type=b,this.doc=a}function vc(a,b,c,d,e){if(d&&d.shared)return xc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return bb(a.cm,vc)(a,b,c,d,e);var f=new uc(a,e);if("range"==e&&!Rb(b,c))return f;d&&Ud(d,f),f.replacedWith&&(f.collapsed=!0,f.replacedWith=Zd("span",[f.replacedWith],"CodeMirror-widget")),f.collapsed&&(Le=!0),f.addToHistory&&td(a,{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},0/0);var g,h,i,j=b.line,k=0,l=a.cm;if(a.iter(j,c.line+1,function(d){l&&f.collapsed&&!l.options.lineWrapping&&Jc(a,d)==l.display.maxLine&&(i=!0);var e={from:null,to:null,marker:f};k+=d.text.length,j==b.line&&(e.from=b.ch,k-=b.ch),j==c.line&&(e.to=c.ch,k-=d.text.length-c.ch),f.collapsed&&(j==c.line&&(h=Gc(d,c.ch)),j==b.line?g=Gc(d,b.ch):ld(d,0)),Ac(d,e),++j}),f.collapsed&&a.iter(b.line,c.line+1,function(b){Kc(a,b)&&ld(b,0)}),f.clearOnEnter&&Hd(f,"beforeCursorEnter",function(){f.clear()}),f.readOnly&&(Ke=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),f.collapsed){if(g!=h)throw new Error("Inserting collapsed marker overlapping an existing one");f.size=k,f.atomic=!0}return l&&(i&&(l.curOp.updateMaxLine=!0),(f.className||f.startStyle||f.endStyle||f.collapsed)&&eb(l,b.line,c.line+1),f.atomic&&$b(l)),f}function wc(a,b){this.markers=a,this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,Hd(a[c],"clear",function(){d.clear()})}function xc(a,b,c,d,e){d=Ud(d),d.shared=!1;var f=[vc(a,b,c,d,e)],g=f[0],h=d.replacedWith;return gd(a,function(a){h&&(d.replacedWith=h.cloneNode(!0)),f.push(vc(a,Ub(a,b),Ub(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;
g=Qd(f)}),new wc(f,g)}function yc(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function zc(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function Ac(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function Bc(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||"bookmark"==g.type&&f.from==b&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push({from:f.from,to:i?null:f.to,marker:g})}}return d}function Cc(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||"bookmark"==g.type&&f.from==b&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push({from:i?null:f.from-b,to:null==f.to?null:f.to-b,marker:g})}}return d}function Dc(a,b){var c=Wb(a,b.from.line)&&id(a,b.from.line).markedSpans,d=Wb(a,b.to.line)&&id(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=Qb(b.from,b.to),h=Bc(c,e,g),i=Cc(d,f,g),j=1==b.text.length,k=Qd(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=yc(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var l=0;l<i.length;++l){var m=i[l];if(null!=m.to&&(m.to+=k),null==m.from){var n=yc(h,m.marker);n||(m.from=k,j&&(h||(h=[])).push(m))}else m.from+=k,j&&(h||(h=[])).push(m)}var o=[h];if(!j){var p,q=b.text.length-2;if(q>0&&h)for(var l=0;l<h.length;++l)null==h[l].to&&(p||(p=[])).push({from:null,to:null,marker:h[l].marker});for(var l=0;q>l;++l)o.push(p);o.push(i)}return o}function Ec(a,b){var c=vd(a,b),d=Dc(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function Fc(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Sd(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(),i=0;i<e.length;++i){var j=e[i];if(!Rb(j.to,h.from)&&!Rb(h.to,j.from)){var k=[i,1];(Rb(j.from,h.from)||!g.inclusiveLeft&&Qb(j.from,h.from))&&k.push({from:j.from,to:h.from}),(Rb(h.to,j.to)||!g.inclusiveRight&&Qb(j.to,h.to))&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-1}}return e}function Gc(a,b){var c,d=Le&&a.markedSpans;if(d)for(var e,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&(null==e.from||e.from<b)&&(null==e.to||e.to>b)&&(!c||c.width<e.marker.width)&&(c=e.marker);return c}function Hc(a){return Gc(a,-1)}function Ic(a){return Gc(a,a.text.length+1)}function Jc(a,b){for(var c;c=Hc(b);)b=id(a,c.find().from.line);return b}function Kc(a,b){var c=Le&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(0==d.from&&d.marker.inclusiveLeft&&Lc(a,b,d))return!0}}function Lc(a,b,c){if(null==c.to){var d=c.marker.find().to,e=id(a,d.line);return Lc(a,e,yc(e.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var f,g=0;g<b.markedSpans.length;++g)if(f=b.markedSpans[g],f.marker.collapsed&&f.from==c.to&&(f.marker.inclusiveLeft||c.marker.inclusiveRight)&&Lc(a,b,f))return!0}function Mc(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Nc(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Oc(a){return function(){var b=!this.cm.curOp;b&&_(this.cm);try{var c=a.apply(this,arguments)}finally{b&&ab(this.cm)}return c}}function Pc(a){return null!=a.height?a.height:(a.node.parentNode&&1==a.node.parentNode.nodeType||_d(a.cm.display.measure,Zd("div",[a.node],null,"position: relative")),a.height=a.node.offsetHeight)}function Qc(a,b,c,d){var e=new _e(a,c,d);return e.noHScroll&&(a.display.alignWidgets=!0),hc(a,b,function(b){if((b.widgets||(b.widgets=[])).push(e),e.line=b,!Kc(a.doc,b)||e.showIfHidden){var c=od(a,b)<a.display.scroller.scrollTop;ld(b,b.height+Pc(e)),c&&fc(a,0,e.height)}return!0}),e}function Rc(a,b,c){var d={text:a};return Nc(d,b),d.height=c?c(d):1,d}function Sc(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),Mc(a),Nc(a,c);var e=d?d(a):1;e!=a.height&&ld(a,e)}function Tc(a){a.parent=null,Mc(a)}function Uc(a,b,c,d,e){var f=c.flattenSpans;null==f&&(f=a.options.flattenSpans);var g,h="",i=null,j=new tc(b,a.options.tabSize);for(""==b&&c.blankLine&&c.blankLine(d);!j.eol();){j.pos>a.options.maxHighlightLength?(f=!1,j.pos=Math.min(b.length,j.start+5e4),g=null):g=c.token(j,d);var k=j.current();j.start=j.pos,f&&i==g?h+=k:(h&&e(h,i),h=k,i=g)}h&&e(h,i)}function Vc(a,b,c){var d=[a.state.modeGen];Uc(a,b.text,a.doc.mode,c,function(a,b){d.push(a,b)});for(var e=0;e<a.state.overlays.length;++e){var f=a.state.overlays[e],g=1;Uc(a,b.text,f.mode,!0,function(a,b){for(var c=g,e=a.length;e;){var h=d[g],i=h.length;e>=i?e-=i:(d.splice(g,1,h.slice(0,e),d[g+1],h.slice(e)),e=0),g+=2}if(b)if(f.opaque)d.splice(c,g-c,a,b),g=c+2;else for(;g>c;c+=2){var h=d[c+1];d[c+1]=h?h+" "+b:b}})}return d}function Wc(a,b){return b.styles&&b.styles[0]==a.state.modeGen||(b.styles=Vc(a,b,b.stateAfter=I(a,md(b)))),b.styles}function Xc(a,b,c){var d=a.doc.mode,e=new tc(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!e.eol()&&e.pos<=a.options.maxHighlightLength;)d.token(e,c),e.start=e.pos}function Yc(a){return a?af[a]||(af[a]="cm-"+a.replace(/ +/g," cm-")):null}function Zc(a,b,c){for(var d,e,f,g=b,h=!0;d=Hc(g);)h=!1,g=id(a.doc,d.find().from.line),e||(e=g);var i={pre:Zd("pre"),col:0,pos:0,display:!c,measure:null,addedOne:!1,cm:a};g.textClass&&(i.pre.className=g.textClass);do{i.measure=g==b&&c,i.pos=0,i.addToken=i.measure?_c:$c,(oe||re)&&a.getOption("lineWrapping")&&(i.addToken=ad(i.addToken)),c&&f&&g!=b&&!i.addedOne&&(c[0]=i.pre.appendChild(de(a.display.measure)),i.addedOne=!0);var j=cd(g,i,Wc(a,g));f=g==e,j&&(g=id(a.doc,j.to.line),h=!1)}while(j);c&&!i.addedOne&&(c[0]=i.pre.appendChild(h?Zd("span"," "):de(a.display.measure))),i.pre.firstChild||Kc(a.doc,b)||i.pre.appendChild(document.createTextNode(" "));var k;if(c&&oe&&(k=pd(g))){var l=k.length-1;k[l].from==k[l].to&&--l;var m=k[l],n=k[l-1];if(m.from+1==m.to&&n&&m.level<n.level){var o=c[i.pos-1];o&&o.parentNode.insertBefore(o.measureRight=de(a.display.measure),o.nextSibling)}}return Jd(a,"renderLine",a,b,i.pre),i.pre}function $c(a,b,c,d,e){if(b){if(bf.test(b))for(var f=document.createDocumentFragment(),g=0;;){bf.lastIndex=g;var h=bf.exec(b),i=h?h.index-g:b.length-g;if(i&&(f.appendChild(document.createTextNode(b.slice(g,g+i))),a.col+=i),!h)break;if(g+=i+1,"	"==h[0]){var j=a.cm.options.tabSize,k=j-a.col%j;f.appendChild(Zd("span",Pd(k),"cm-tab")),a.col+=k}else{var l=Zd("span","•","cm-invalidchar");l.title="\\u"+h[0].charCodeAt(0).toString(16),f.appendChild(l),a.col+=1}}else{a.col+=b.length;var f=document.createTextNode(b)}if(c||d||e||a.measure){var m=c||"";return d&&(m+=d),e&&(m+=e),a.pre.appendChild(Zd("span",[f],m))}a.pre.appendChild(f)}}function _c(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){var h=b.charAt(g),i=0==g;h>="�"&&"�">h&&g<b.length-1?(h=b.slice(g,g+2),++g):g&&f&&pf.test(b.slice(g-1,g+1))&&a.pre.appendChild(Zd("wbr"));var j=a.measure[a.pos]=$c(a,h,c,i&&d,g==b.length-1&&e);oe&&f&&" "==h&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+1))&&(j.style.whiteSpace="normal"),a.pos+=h.length}b.length&&(a.addedOne=!0)}function ad(a){function b(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":" ";return b+=" "}return function(c,d,e,f,g){return a(c,d.replace(/ {3,}/,b),e,f,g)}}function bd(a,b,c){c&&(a.display||(c=c.cloneNode(!0)),a.pre.appendChild(c),a.measure&&b&&(a.measure[a.pos]=c,a.addedOne=!0)),a.pos+=b}function cd(a,b,c){var d=a.markedSpans;if(d)for(var e,f,g,h,i,j=a.text,k=j.length,l=0,m=1,n="",o=0;;){if(o==l){f=g=h="",i=null,o=1/0;for(var p=null,q=0;q<d.length;++q){var r=d[q],s=r.marker;r.from<=l&&(null==r.to||r.to>l)?(null!=r.to&&o>r.to&&(o=r.to,g=""),s.className&&(f+=" "+s.className),s.startStyle&&r.from==l&&(h+=" "+s.startStyle),s.endStyle&&r.to==o&&(g+=" "+s.endStyle),s.collapsed&&(!i||i.marker.width<s.width)&&(i=r)):r.from>l&&o>r.from&&(o=r.from),"bookmark"==s.type&&r.from==l&&s.replacedWith&&(p=s.replacedWith)}if(i&&(i.from||0)==l&&(bd(b,(null==i.to?k:i.to)-l,null!=i.from&&i.marker.replacedWith),null==i.to))return i.marker.find();p&&!i&&bd(b,0,p)}if(l>=k)break;for(var t=Math.min(k,o);;){if(n){var u=l+n.length;if(!i){var v=u>t?n.slice(0,t-l):n;b.addToken(b,v,e?e+f:f,h,l+v.length==o?g:"")}if(u>=t){n=n.slice(t-l),l=t;break}l=u,h=""}n=c[m++],e=Yc(c[m++])}}else for(var m=1;m<c.length;m+=2)b.addToken(b,c[m],Yc(c[m+1]))}function dd(a,b,c,d,e){function f(a){return c?c[a]:null}function g(a,c,d){Sc(a,c,d,e),Kd(a,"change",a,b)}var h=b.from,i=b.to,j=b.text,k=id(a,h.line),l=id(a,i.line),m=Qd(j),n=f(j.length-1),o=i.line-h.line;if(0==h.ch&&0==i.ch&&""==m){for(var p=0,q=j.length-1,r=[];q>p;++p)r.push(Rc(j[p],f(p),e));g(l,l.text,n),o&&a.remove(h.line,o),r.length&&a.insert(h.line,r)}else if(k==l)if(1==j.length)g(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{for(var r=[],p=1,q=j.length-1;q>p;++p)r.push(Rc(j[p],f(p),e));r.push(Rc(m+k.text.slice(i.ch),n,e)),g(k,k.text.slice(0,h.ch)+j[0],f(0)),a.insert(h.line+1,r)}else if(1==j.length)g(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),f(0)),a.remove(h.line+1,o);else{g(k,k.text.slice(0,h.ch)+j[0],f(0)),g(l,m+l.text.slice(i.ch),n);for(var p=1,q=j.length-1,r=[];q>p;++p)r.push(Rc(j[p],f(p),e));o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,r)}Kd(a,"change",a,b),Zb(a,d.anchor,d.head,null,!0)}function ed(a){this.lines=a,this.parent=null;for(var b=0,c=a.length,d=0;c>b;++b)a[b].parent=this,d+=a[b].height;this.height=d}function fd(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;e>d;++d){var f=a[d];b+=f.chunkSize(),c+=f.height,f.parent=this}this.size=b,this.height=c,this.parent=null}function gd(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;(!c||i)&&(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function hd(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,f(a),c(a),a.options.lineWrapping||l(a),a.options.mode=b.modeOption,eb(a)}function id(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(e>b){a=d;break}b-=e}return a.lines[b]}function jd(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function kd(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function ld(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function md(a){if(null==a.parent)return null;for(var b=a.parent,c=Sd(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function nd(a,b){var c=a.first;a:do{for(var d=0,e=a.children.length;e>d;++d){var f=a.children[d],g=f.height;if(g>b){a=f;continue a}b-=g,c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;e>d;++d){var h=a.lines[d],i=h.height;if(i>b)break;b-=i}return c+d}function od(a,b){b=Jc(a.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;c+=f.height}for(var g=d.parent;g;d=g,g=d.parent)for(var e=0;e<g.children.length;++e){var h=g.children[e];if(h==d)break;c+=h.height}return c}function pd(a){var b=a.order;return null==b&&(b=a.order=wf(a.text)),b}function qd(){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function rd(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function sd(a,b){var c={from:b.from,to:Eb(b),text:jd(a,b.from,b.to)};return rd(a,c,b.from.line,b.to.line+1),gd(a,function(a){rd(a,c,b.from.line,b.to.line+1)},!0),c}function td(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=Qd(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))){var h=Qd(g.changes);Qb(b.from,b.to)&&Qb(b.from,h.to)?h.to=Eb(b):g.changes.push(sd(a,b)),g.anchorAfter=c.anchor,g.headAfter=c.head}else{for(g={changes:[sd(a,b)],anchorBefore:a.sel.anchor,headBefore:a.sel.head,anchorAfter:c.anchor,headAfter:c.head},e.done.push(g);e.done.length>e.undoDepth;)e.done.shift();e.dirtyCounter<0?e.dirtyCounter=0/0:e.dirtyCounter++}e.lastTime=f,e.lastOp=d,e.lastOrigin=b.origin}function ud(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function vd(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=0,e=[];d<b.text.length;++d)e.push(ud(c[d]));return e}function wd(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,headAfter:e.headAfter});for(var h=0;h<f.length;++h){var i,j=f[h];if(g.push({from:j.from,to:j.to,text:j.text}),b)for(var k in j)(i=k.match(/^spans_(\d+)$/))&&Sd(b,Number(i[1]))>-1&&(Qd(g)[k]=j[k],delete j[k])}}return d}function xd(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function yd(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=!0,h=0;h<f.changes.length;++h){var i=f.changes[h];if(f.copied||(i.from=Sb(i.from),i.to=Sb(i.to)),c<i.from.line)i.from.line+=d,i.to.line+=d;else if(b<=i.to.line){g=!1;break}}f.copied||(f.anchorBefore=Sb(f.anchorBefore),f.headBefore=Sb(f.headBefore),f.anchorAfter=Sb(f.anchorAfter),f.readAfter=Sb(f.headAfter),f.copied=!0),g?(xd(f.anchorBefore),xd(f.headBefore),xd(f.anchorAfter),xd(f.headAfter)):(a.splice(0,e+1),e=0)}}function zd(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;yd(a.done,c,d,e),yd(a.undone,c,d,e)}function Ad(){Ed(this)}function Bd(a){return a.stop||(a.stop=Ad),a}function Cd(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Dd(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Ed(a){Cd(a),Dd(a)}function Fd(a){return a.target||a.srcElement}function Gd(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),Ce&&a.ctrlKey&&1==b&&(b=3),b}function Hd(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={}),e=d[b]||(d[b]=[]);e.push(c)}}function Id(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers&&a._handlers[b];if(!d)return;for(var e=0;e<d.length;++e)if(d[e]==c){d.splice(e,1);break}}}function Jd(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function Kd(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);gf||(++hf,gf=[],setTimeout(Ld,0));for(var f=0;f<d.length;++f)gf.push(c(d[f]))}}function Ld(){--hf;var a=gf;gf=null;for(var b=0;b<a.length;++b)a[b]()}function Md(a,b){var c=a._handlers&&a._handlers[b];return c&&c.length>0}function Nd(){this.id=null}function Od(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var f=d||0,g=e||0;b>f;++f)"	"==a.charAt(f)?g+=c-g%c:++g;return g}function Pd(a){for(;lf.length<=a;)lf.push(Qd(lf)+" ");return lf[a]}function Qd(a){return a[a.length-1]}function Rd(a){Ae?(a.selectionStart=0,a.selectionEnd=a.value.length):a.select()}function Sd(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;++c)if(a[c]==b)return c;return-1}function Td(a,b){function c(){}c.prototype=a;var d=new c;return b&&Ud(b,d),d}function Ud(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function Vd(a){for(var b=[],c=0;a>c;++c)b.push(void 0);return b}function Wd(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Xd(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||mf.test(a))}function Yd(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Zd(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)ae(e,b);else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function $d(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function _d(a,b){return $d(a).appendChild(b)}function ae(a,b){qe?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function be(a){return a.getBoundingClientRect()}function ce(a){if(null!=qf)return qf;var b=Zd("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return _d(a,b),b.offsetWidth&&(qf=b.offsetHeight-b.clientHeight),qf||0}function de(a){if(null==rf){var b=Zd("span","​");_d(a,Zd("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(rf=b.offsetWidth<=1&&b.offsetHeight>2&&!pe)}return rf?Zd("span","​"):Zd("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function ee(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=0;e<a.length;++e){var f=a[e];(f.from<c&&f.to>b||b==c&&f.to==b)&&d(Math.max(f.from,b),Math.min(f.to,c),1==f.level?"rtl":"ltr")}}function fe(a){return a.level%2?a.to:a.from}function ge(a){return a.level%2?a.from:a.to}function he(a){var b=pd(a);return b?fe(b[0]):0}function ie(a){var b=pd(a);return b?ge(Qd(b)):a.text.length}function je(a,b){var c=id(a.doc,b),d=Jc(a.doc,c);d!=c&&(b=md(d));var e=pd(d),f=e?e[0].level%2?ie(d):he(d):0;return Pb(b,f)}function ke(a,b){for(var c,d;c=Ic(d=id(a.doc,b));)b=c.find().to.line;var e=pd(d),f=e?e[0].level%2?he(d):ie(d):d.text.length;return Pb(b,f)}function le(a,b,c,d){var e=pd(a);if(!e)return me(a,b,c,d);for(var f=d?function(b,c){do b+=c;while(b>0&&nf.test(a.text.charAt(b)));return b}:function(a,b){return a+b},g=e[0].level,h=0;h<e.length;++h){var i=e[h],j=i.level%2==g;if(i.from<b&&i.to>b||j&&(i.from==b||i.to==b))break}for(var k=f(b,i.level%2?-c:c);null!=k;)if(i.level%2==g){if(!(k<i.from||k>i.to))break;i=e[h+=c],k=i&&(c>0==i.level%2?f(i.to,-1):f(i.from,1))}else if(k==fe(i))i=e[--h],k=i&&ge(i);else{if(k!=ge(i))break;i=e[++h],k=i&&fe(i)}return 0>k||k>a.text.length?null:k}function me(a,b,c,d){var e=b+c;if(d)for(;e>0&&nf.test(a.text.charAt(e));)e+=c;return 0>e||e>a.text.length?null:e}var ne=/gecko\/\d/i.test(navigator.userAgent),oe=/MSIE \d/.test(navigator.userAgent),pe=oe&&(null==document.documentMode||document.documentMode<8),qe=oe&&(null==document.documentMode||document.documentMode<9),re=/WebKit\//.test(navigator.userAgent),se=re&&/Qt\/\d+\.\d+/.test(navigator.userAgent),te=/Chrome\//.test(navigator.userAgent),ue=/Opera\//.test(navigator.userAgent),ve=/Apple Computer/.test(navigator.vendor),we=/KHTML\//.test(navigator.userAgent),xe=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),ye=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),ze=/PhantomJS/.test(navigator.userAgent),Ae=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Be=Ae||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Ce=Ae||/Mac/.test(navigator.platform),De=/windows/i.test(navigator.platform),Ee=ue&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Ee&&(Ee=Number(Ee[1]));var Fe,Ge,He,Ie=Ce&&(se||ue&&(null==Ee||12.11>Ee)),Je=ne||oe&&!qe,Ke=!1,Le=!1,Me=0,Ne=0,Oe=null;oe?Oe=-.53:ne?Oe=15:te?Oe=-.7:ve&&(Oe=-1/3);var Pe,Qe,Re=null;a.Pos=Pb,a.prototype={focus:function(){window.focus(),jb(this),Bb(this),gb(this)},setOption:function(a,b){var c=this.options,d=c[a];(c[a]!=b||"mode"==a)&&(c[a]=b,Se.hasOwnProperty(a)&&bb(this,Se[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(("string"==typeof a?b[c].name:b[c])==a)return b.splice(c,1),!0},addOverlay:bb(null,function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque}),this.state.modeGen++,eb(this)}),removeOverlay:bb(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c)if(b[c].modeSpec==a)return b.splice(c,1),this.state.modeGen++,void eb(this)}),indentLine:bb(null,function(a,b,c){"string"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),Wb(this.doc,a)&&gc(this,a,b,c)}),indentSelection:bb(null,function(a){var b=this.doc.sel;if(Qb(b.from,b.to))return gc(this,b.from.line,a);for(var c=b.to.line-(b.to.ch?0:1),d=b.from.line;c>=d;++d)gc(this,d,a)}),getTokenAt:function(a){var b=this.doc;a=Ub(b,a);for(var c=I(this,a.line),d=this.doc.mode,e=id(b,a.line),f=new tc(e.text,this.options.tabSize);f.pos<a.ch&&!f.eol();){f.start=f.pos;var g=d.token(f,c)}return{start:f.start,end:f.pos,string:f.current(),className:g||null,type:g||null,state:c}},getStateAfter:function(a){var b=this.doc;return a=Tb(b,null==a?b.first+b.size-1:a),I(this,a+1)},cursorCoords:function(a,b){var c,d=this.doc.sel;return c=null==a?d.head:"object"==typeof a?Ub(this.doc,a):a?d.from:d.to,V(this,c,b||"page")},charCoords:function(a,b){return U(this,Ub(this.doc,a),b||"page")},coordsChar:function(a,b){return a=T(this,a,b||"page"),X(this,a.left,a.top)},defaultTextHeight:function(){return Z(this.display)},defaultCharWidth:function(){return $(this.display)},setGutterMarker:bb(null,function(a,b,c){return hc(this,a,function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&Yd(d)&&(a.gutterMarkers=null),!0})}),clearGutter:bb(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,eb(b,d,d+1),Yd(c.gutterMarkers)&&(c.gutterMarkers=null)),++d})}),addLineClass:bb(null,function(a,b,c){return hc(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(new RegExp("\\b"+c+"\\b").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:bb(null,function(a,b,c){return hc(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.replace(new RegExp("^"+c+"\\b\\s*|\\s*\\b"+c+"\\b"),"");if(f==e)return!1;a[d]=f||null}return!0})}),addLineWidget:bb(null,function(a,b,c){return Qc(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!Wb(this.doc,a))return null;var b=a;if(a=id(this.doc,a),!a)return null}else{var b=md(a);if(null==b)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=V(this,Ub(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+J(f)+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&cc(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:bb(null,zb),execCommand:function(a){return Ze[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);for(var f=0,g=Ub(this.doc,a);b>f&&(g=ic(this.doc,g,e,c,d),!g.hitSide);++f);return g},moveH:bb(null,function(a,b){var c,d=this.doc.sel;c=d.shift||d.extend||Qb(d.from,d.to)?ic(this.doc,d.head,a,b,this.options.rtlMoveVisually):0>a?d.from:d.to,Xb(this.doc,c,c,a)}),deleteH:bb(null,function(a,b){var c=this.doc.sel;Qb(c.from,c.to)?Ob(this.doc,"",c.from,ic(this.doc,c.head,a,b,!1),"+delete"):Ob(this.doc,"",c.from,c.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(a,b,c,d){var e=1,f=d;0>b&&(e=-1,b=-b);for(var g=0,h=Ub(this.doc,a);b>g;++g){var i=V(this,h,"div");if(null==f?f=i.left:i.left=f,h=jc(this,i,e,c),h.hitSide)break}return h},moveV:bb(null,function(a,b){var c=this.doc.sel,d=V(this,c.head,"div");null!=c.goalColumn&&(d.left=c.goalColumn);var e=jc(this,d,a,b);"page"==b&&fc(this,0,U(this,e,"div").top-d.top),Xb(this.doc,e,e,a),c.goalColumn=d.left}),toggleOverwrite:function(){(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:bb(null,function(a,b){ec(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller,b=jf;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:bb(null,function(a,b){"number"==typeof a&&(a=Pb(a,0)),b||(b=0);var c=a;a&&null==a.line||(this.curOp.scrollToPos=a?Ub(this.doc,a):this.doc.sel.head,this.curOp.scrollToPosMargin=b,c=V(this,this.curOp.scrollToPos));var d=dc(this,c.left,c.top-b,c.right,c.bottom+b);ec(this,d.scrollLeft,d.scrollTop)}),setSize:function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a)),null!=b&&(this.display.wrapper.style.height=c(b)),this.refresh()},on:function(a,b){Hd(this,a,b)},off:function(a,b){Id(this,a,b)},operation:function(a){return db(this,a)},refresh:bb(null,function(){R(this),ec(this,this.doc.scrollLeft,this.doc.scrollTop),eb(this)}),swapDoc:bb(null,function(a){var b=this.doc;return b.cm=null,hd(this,a),R(this),ib(this,!0),ec(this,a.scrollLeft,a.scrollTop),b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Se=a.optionHandlers={},Te=a.defaults={},Ue=a.Init={toString:function(){return"CodeMirror.Init"}};mc("value","",function(a,b){a.setValue(b)},!0),mc("mode",null,function(a,b){a.doc.modeOption=b,c(a)},!0),mc("indentUnit",2,c,!0),mc("indentWithTabs",!1),mc("smartIndent",!0),mc("tabSize",4,function(a){c(a),R(a),eb(a)},!0),mc("electricChars",!0),mc("rtlMoveVisually",!De),mc("theme","default",function(a){h(a),i(a)},!0),mc("keyMap","default",g),mc("extraKeys",null),mc("onKeyEvent",null),mc("onDragEvent",null),mc("lineWrapping",!1,d,!0),mc("gutters",[],function(a){m(a.options),i(a)},!0),mc("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?s(a.display)+"px":"0",a.refresh()},!0),mc("lineNumbers",!1,function(a){m(a.options),i(a)},!0),mc("firstLineNumber",1,i,!0),mc("lineNumberFormatter",function(a){return a},i,!0),mc("showCursorWhenSelecting",!1,B,!0),mc("readOnly",!1,function(a,b){"nocursor"==b?(Cb(a),a.display.input.blur()):b||ib(a,!0)}),mc("dragDrop",!0),mc("cursorBlinkRate",530),mc("cursorHeight",1),mc("workTime",100),mc("workDelay",100),mc("flattenSpans",!0),mc("pollInterval",100),mc("undoDepth",40,function(a,b){a.doc.history.undoDepth=b}),mc("historyEventDelay",500),mc("viewportMargin",10,function(a){a.refresh()},!0),mc("maxHighlightLength",1e4,function(a){c(a),a.refresh()},!0),mc("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)}),mc("tabindex",null,function(a,b){a.display.input.tabIndex=b||""}),mc("autofocus",null);var Ve=a.modes={},We=a.mimeModes={};a.defineMode=function(b,c){if(a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}Ve[b]=c},a.defineMIME=function(a,b){We[a]=b},a.resolveMode=function(b){if("string"==typeof b&&We.hasOwnProperty(b))b=We[b];else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){c=a.resolveMode(c);var d=Ve[c.name];if(!d)return a.getMode(b,"text/plain");var e=d(b,c);if(Xe.hasOwnProperty(c.name)){var f=Xe[c.name];for(var g in f)f.hasOwnProperty(g)&&(e.hasOwnProperty(g)&&(e["_"+g]=e[g]),e[g]=f[g])}return e.name=c.name,e},a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var Xe=a.modeExtensions={};a.extendMode=function(a,b){var c=Xe.hasOwnProperty(a)?Xe[a]:Xe[a]={};Ud(b,c)},a.defineExtension=function(b,c){a.prototype[b]=c},a.defineDocExtension=function(a,b){df.prototype[a]=b},a.defineOption=mc;var Ye=[];a.defineInitHook=function(a){Ye.push(a)},a.copyState=nc,a.startState=oc,a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);b=c.state,a=c.mode}return c||{mode:a,state:b}};var Ze=a.commands={selectAll:function(a){a.setSelection(Pb(a.firstLine(),0),Pb(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!Qb(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:Pb(b.line),"+delete"):a.replaceRange("",b,Pb(b.line+1,0),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",Pb(b,0),Pb(b),"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(Pb(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(Pb(a.lastLine()))},goLineStart:function(a){a.extendSelection(je(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=je(a,b.line),d=a.getLineHandle(c.line),e=pd(d);if(e&&0!=e[0].level)a.extendSelection(c);else{var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;a.extendSelection(Pb(c.line,g?0:f))}},goLineEnd:function(a){a.extendSelection(ke(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("	","end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);b.ch>0&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),Pb(b.line,b.ch-1),Pb(b.line,b.ch+1))},newlineAndIndent:function(a){bb(a,function(){a.replaceSelection("\n","end","+input"),a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},$e=a.keyMap={};$e.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},$e.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},$e.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},$e["default"]=Ce?$e.macDefault:$e.pcDefault,$e.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},a.lookupKey=qc,a.isModifierKey=rc,a.keyName=sc,a.fromTextArea=function(b,c){function d(){b.value=j.getValue()
}if(c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex),!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder),null==c.autofocus){var e=document.body;try{e=document.activeElement}catch(f){}c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(Hd(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var g=b.form,h=g.submit;try{var i=g.submit=function(){d(),g.submit=h,g.submit(),g.submit=i}}catch(f){}}b.style.display="none";var j=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return j.save=d,j.getTextArea=function(){return b},j.toTextArea=function(){d(),b.parentNode.removeChild(j.getWrapperElement()),b.style.display="",b.form&&(Id(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=h))},j},tc.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));return c?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Od(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Od(this.string,null,this.tabSize)},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);return e(f)==e(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},a.StringStream=tc,a.TextMarker=uc,uc.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&_(a);for(var c=null,d=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=yc(f.markedSpans,this);null!=g.to&&(d=md(f)),f.markedSpans=zc(f.markedSpans,g),null!=g.from?c=md(f):this.collapsed&&!Kc(this.doc,f)&&a&&ld(f,Z(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var e=0;e<this.lines.length;++e){var h=Jc(a.doc,this.lines[e]),i=k(a.doc,h);i>a.display.maxLineLength&&(a.display.maxLine=h,a.display.maxLineLength=i,a.display.maxLineChanged=!0)}null!=c&&a&&eb(a,c,d+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&$b(a)),b&&ab(a),Kd(this,"clear")}},uc.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=yc(d.markedSpans,this);if(null!=e.from||null!=e.to){var f=md(d);null!=e.from&&(a=Pb(f,e.from)),null!=e.to&&(b=Pb(f,e.to))}}return"bookmark"==this.type?a:a&&{from:a,to:b}},uc.prototype.getOptions=function(a){var b=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,replacedWith:a?b&&b.cloneNode(!0):b,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}},uc.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=Sd(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},uc.prototype.detachLine=function(a){if(this.lines.splice(Sd(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},a.SharedTextMarker=wc,wc.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Kd(this,"clear")}},wc.prototype.find=function(){return this.primary.find()},wc.prototype.getOptions=function(a){var b=this.primary.getOptions(a);return b.shared=!0,b};var _e=a.LineWidget=function(a,b,c){for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a,this.node=b};_e.prototype.clear=Oc(function(){var a=this.line.widgets,b=md(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=null),ld(this.line,Math.max(0,this.line.height-Pc(this))),eb(this.cm,b,b+1)}}),_e.prototype.changed=Oc(function(){var a=this.height;this.height=null;var b=Pc(this)-a;if(b){ld(this.line,this.line.height+b);var c=md(this.line);eb(this.cm,c,c+1)}});var af={},bf=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;ed.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;d>c;++c){var e=this.lines[c];this.height-=e.height,Tc(e),Kd(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0,e=b.length;e>d;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;d>a;++a)if(c(this.lines[a]))return!0}},fd.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(e>a){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25){var h=[];this.collapse(h),this.children=[new ed(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;c>b;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>=a){if(f.insertInner(a,b,c),f.lines&&f.lines.length>50){for(;f.lines.length>50;){var h=f.lines.splice(f.lines.length-25,25),i=new ed(h);f.height-=i.height,this.children.splice(d+1,0,i),i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new fd(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=Sd(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new fd(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>a){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=g}}};var cf=0,df=a.Doc=function(a,b,c){if(!(this instanceof df))return new df(a,b,c);null==c&&(c=0),fd.call(this,[new ed([Rc("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=qd(),this.frontier=c;var d=Pb(c,0);this.sel={from:d,to:d,head:d,anchor:d,shift:!1,extend:!1,goalColumn:null},this.id=++cf,this.modeOption=b,"string"==typeof a&&(a=sf(a)),dd(this,{from:d,to:d,text:a},null,{head:d,anchor:d})};df.prototype=Td(fd.prototype,{iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0,e=b.length;e>d;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=kd(this,this.first,this.first+this.size);return a===!1?b:b.join(a||"\n")},setValue:function(a){var b=Pb(this.first,0),c=this.first+this.size-1;Ib(this,{from:b,to:Pb(c,id(this,c).text.length),text:sf(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=Ub(this,b),c=c?Ub(this,c):b,Ob(this,a,b,c,d)},getRange:function(a,b,c){var d=jd(this,Ub(this,a),Ub(this,b));return c===!1?d:d.join(c||"\n")},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},setLine:function(a,b){Wb(this,a)&&Ob(this,b,Pb(a,0),Ub(this,Pb(a)))},removeLine:function(a){a?Ob(this,"",Ub(this,Pb(a-1)),Ub(this,Pb(a))):Ob(this,"",Pb(0,0),Ub(this,Pb(1,0)))},getLineHandle:function(a){return Wb(this,a)?id(this,a):void 0},getLineNumber:function(a){return md(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return Ub(this,a)},getCursor:function(a){var b,c=this.sel;return b=null==a||"head"==a?c.head:"anchor"==a?c.anchor:"end"==a||a===!1?c.to:c.from,Sb(b)},somethingSelected:function(){return!Qb(this.sel.head,this.sel.anchor)},setCursor:cb(function(a,b,c){var d=Ub(this,"number"==typeof a?Pb(a,b||0):a);c?Xb(this,d):Zb(this,d,d)}),setSelection:cb(function(a,b){Zb(this,Ub(this,a),Ub(this,b||a))}),extendSelection:cb(function(a,b){Xb(this,Ub(this,a),b&&Ub(this,b))}),getSelection:function(a){return this.getRange(this.sel.from,this.sel.to,a)},replaceSelection:function(a,b,c){Ib(this,{from:this.sel.from,to:this.sel.to,text:sf(a),origin:c},b||"around")},undo:cb(function(){Kb(this,"undo")}),redo:cb(function(){Kb(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=qd()},markClean:function(){this.history.dirtyCounter=0,this.history.lastOp=this.history.lastOrigin=null},isClean:function(){return 0==this.history.dirtyCounter},getHistory:function(){return{done:wd(this.history.done),undone:wd(this.history.undone)}},setHistory:function(a){var b=this.history=qd();b.done=a.done.slice(0),b.undone=a.undone.slice(0)},markText:function(a,b,c){return vc(this,Ub(this,a),Ub(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft};return a=Ub(this,a),vc(this,a,a,c,"bookmark")},findMarksAt:function(a){a=Ub(this,a);var b=[],c=id(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first;return this.iter(function(d){var e=d.text.length+1;return e>a?(b=a,!0):(a-=e,void++c)}),Ub(this,Pb(c,b))},indexFromPos:function(a){a=Ub(this,a);var b=a.ch;return a.line<this.first||a.ch<0?0:(this.iter(this.first,a.line,function(a){b+=a.text.length+1}),b)},copy:function(a){var b=new df(kd(this,this.first,this.first+this.size),this.modeOption,this.first);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new df(kd(this,b,c),a.mode||this.modeOption,b);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],d},unlinkDoc:function(b){if(b instanceof a&&(b=b.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=this.linked[c];if(d.doc==b){this.linked.splice(c,1),b.unlinkDoc(this);break}}if(b.history==this.history){var e=[b.id];gd(b,function(a){e.push(a.id)},!0),b.history=qd(),b.history.done=wd(this.history.done,e),b.history.undone=wd(this.history.undone,e)}},iterLinkedDocs:function(a){gd(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),df.prototype.eachLine=df.prototype.iter;var ef="iter insert remove copy getEditor".split(" ");for(var ff in df.prototype)df.prototype.hasOwnProperty(ff)&&Sd(ef,ff)<0&&(a.prototype[ff]=function(a){return function(){return a.apply(this.doc,arguments)}}(df.prototype[ff]));a.e_stop=Ed,a.e_preventDefault=Cd,a.e_stopPropagation=Dd;var gf,hf=0;a.on=Hd,a.off=Id,a.signal=Jd;var jf=30,kf=a.Pass={toString:function(){return"CodeMirror.Pass"}};Nd.prototype={set:function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)}},a.countColumn=Od;var lf=[""],mf=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,nf=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;a.replaceGetRect=function(a){be=a};var of=function(){if(qe)return!1;var a=Zd("div");return"draggable"in a||"dragDrop"in a}(),pf=/^$/;ne?pf=/$'/:ve&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?pf=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:re&&(pf=/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.]|\?[\w~`@#$%\^&*(_=+{[|><]/);var qf,rf,sf=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=sf;var tf=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},uf=function(){var a=Zd("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),vf={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};a.keyNames=vf,function(){for(var a=0;10>a;a++)vf[a+48]=String(a);for(var a=65;90>=a;a++)vf[a]=String.fromCharCode(a);for(var a=1;12>=a;a++)vf[a+111]=vf[a+63235]="F"+a}();var wf=function(){function a(a){return 255>=a?b.charAt(a):a>=1424&&1524>=a?"R":a>=1536&&1791>=a?c.charAt(a-1536):a>=1792&&2220>=a?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,h=/[1n]/,i="L";return function(b){if(!d.test(b))return!1;for(var c,j=b.length,k=[],l=0;j>l;++l)k.push(c=a(b.charCodeAt(l)));for(var l=0,m=i;j>l;++l){var c=k[l];"m"==c?k[l]=m:m=c}for(var l=0,n=i;j>l;++l){var c=k[l];"1"==c&&"r"==n?k[l]="n":f.test(c)&&(n=c,"r"==c&&(k[l]="R"))}for(var l=1,m=k[0];j-1>l;++l){var c=k[l];"+"==c&&"1"==m&&"1"==k[l+1]?k[l]="1":","!=c||m!=k[l+1]||"1"!=m&&"n"!=m||(k[l]=m),m=c}for(var l=0;j>l;++l){var c=k[l];if(","==c)k[l]="N";else if("%"==c){for(var o=l+1;j>o&&"%"==k[o];++o);for(var p=l&&"!"==k[l-1]||j-1>o&&"1"==k[o]?"1":"N",q=l;o>q;++q)k[q]=p;l=o-1}}for(var l=0,n=i;j>l;++l){var c=k[l];"L"==n&&"1"==c?k[l]="L":f.test(c)&&(n=c)}for(var l=0;j>l;++l)if(e.test(k[l])){for(var o=l+1;j>o&&e.test(k[o]);++o);for(var r="L"==(l?k[l-1]:i),s="L"==(j-1>o?k[o]:i),p=r||s?"L":"R",q=l;o>q;++q)k[q]=p;l=o-1}for(var t,u=[],l=0;j>l;)if(g.test(k[l])){var v=l;for(++l;j>l&&g.test(k[l]);++l);u.push({from:v,to:l,level:0})}else{var w=l,x=u.length;for(++l;j>l&&"L"!=k[l];++l);for(var q=w;l>q;)if(h.test(k[q])){q>w&&u.splice(x,0,{from:w,to:q,level:1});var y=q;for(++q;l>q&&h.test(k[q]);++q);u.splice(x,0,{from:y,to:q,level:2}),w=q}else++q;l>w&&u.splice(x,0,{from:w,to:l,level:1})}return 1==u[0].level&&(t=b.match(/^\s+/))&&(u[0].from=t[0].length,u.unshift({from:0,to:t[0].length,level:0})),1==Qd(u).level&&(t=b.match(/\s+$/))&&(Qd(u).to-=t[0].length,u.push({from:j-t[0].length,to:j,level:0})),u[0].level!=Qd(u).level&&u.push({from:j,to:j,level:u[0].level}),u}}();return a.version="3.12",a}(),function(){function a(a,e){var f=a.getCursor(),g=a.getTokenAt(f),h=CodeMirror.innerMode(a.getMode(),g.state),i=h.state;if("xml"!=h.mode.name)return CodeMirror.Pass;var j=a.getOption("autoCloseTags"),k="html"==h.mode.configuration,l="object"==typeof j&&j.dontCloseTags||k&&c,m="object"==typeof j&&j.indentTags||k&&d;if(">"==e&&i.tagName){var n=i.tagName;g.end>f.ch&&(n=n.slice(0,n.length-g.end+f.ch));var o=n.toLowerCase();if("tag"==g.type&&"closeTag"==i.type||g.string.indexOf("/")==g.string.length-1||l&&b(l,o)>-1)return CodeMirror.Pass;var p=m&&b(m,o)>-1,q=p?CodeMirror.Pos(f.line+1,0):CodeMirror.Pos(f.line,f.ch+1);return a.replaceSelection(">"+(p?"\n\n":"")+"</"+n+">",{head:q,anchor:q}),void(p&&(a.indentLine(f.line+1),a.indentLine(f.line+2)))}if("/"==e&&"<"==g.string){var n=i.context&&i.context.tagName;return void(n&&a.replaceSelection("/"+n+">","end"))}return CodeMirror.Pass}function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;++c)if(a[c]==b)return c;return-1}CodeMirror.defineOption("autoCloseTags",!1,function(b,c,d){if(!c||d!=CodeMirror.Init&&d)!c&&d!=CodeMirror.Init&&d&&b.removeKeyMap("autoCloseTags");else{var e={name:"autoCloseTags"};("object"!=typeof c||c.whenClosing)&&(e["'/'"]=function(b){return a(b,"/")}),("object"!=typeof c||c.whenOpening)&&(e["'>'"]=function(b){return a(b,">")}),b.addKeyMap(e)}});var c=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],d=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"]}(),function(){function a(a){var b,c=a.getCursor(),d=a.getTokenAt(c),e=CodeMirror.innerMode(a.getMode(),d.state).mode;if("comment"==d.type&&e.blockCommentStart){var f,g=d.string.indexOf(e.blockCommentEnd),h=a.getRange(CodeMirror.Pos(c.line,0),CodeMirror.Pos(c.line,d.end));if(-1!=g&&g==d.string.length-e.blockCommentEnd.length);else if(0==d.string.indexOf(e.blockCommentStart)){if(b=h.slice(0,d.start),!/^\s*$/.test(b)){b="";for(var i=0;i<d.start;++i)b+=" "}}else-1!=(f=h.indexOf(e.blockCommentContinue))&&f+e.blockCommentContinue.length>d.start&&/^\s*$/.test(h.slice(0,f))&&(b=h.slice(0,f))}return null==b?CodeMirror.Pass:void a.replaceSelection("\n"+b+e.blockCommentContinue,"end")}for(var b=["clike","css","javascript"],c=0;c<b.length;++c)CodeMirror.extendMode(b[c],{blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * "});CodeMirror.defineOption("continueComments",null,function(b,c,d){d&&d!=CodeMirror.Init&&b.removeKeyMap("continueComment");var e={name:"continueComment"};e["string"==typeof c?c:"Enter"]=a,b.addKeyMap(e)})}(),function(){"use strict";var a=/^(\s*)([*+-]|(\d+)\.)(\s*)/,b="*+-";CodeMirror.commands.newlineAndIndentContinueMarkdownList=function(c){var d,e=c.getCursor(),f=c.getStateAfter(e.line).list;if(!f||!(d=c.getLine(e.line).match(a)))return void c.execCommand("newlineAndIndent");var g=d[1],h=d[4],i=b.indexOf(d[2])>=0?d[2]:parseInt(d[3],10)+1+".";c.replaceSelection("\n"+g+i+h,"end")}}(),function(){function a(a){function b(b,d,g){if(b.text){var h=k?0:b.text.length-1,i=k?b.text.length:-1;if(b.text.length>c)return null;var j=b.text.length<1e3;for(null!=g&&(h=g+l);h!=i;h+=l){var p=b.text.charAt(h);if(o.test(p)&&(!j||a.getTokenAt(e(d,h+1)).type==m)){var q=f[p];if(">"==q.charAt(1)==k)n.push(p);else{if(n.pop()!=q.charAt(0))return{pos:h,match:!1};if(!n.length)return{pos:h,match:!0}}}}}}var c=a.state._matchBrackets.maxScanLineLength||1e4,d=a.getCursor(),g=a.getLineHandle(d.line),h=d.ch-1,i=h>=0&&f[g.text.charAt(h)]||f[g.text.charAt(++h)];if(!i)return null;for(var j,k=">"==i.charAt(1),l=k?1:-1,m=a.getTokenAt(e(d.line,h+1)).type,n=[g.text.charAt(h)],o=/[(){}[\]]/,p=d.line,q=k?Math.min(p+100,a.lineCount()):Math.max(-1,p-100);p!=q&&!(j=p==d.line?b(g,p,h):b(a.getLineHandle(p),p));p+=l);return{from:e(d.line,h),to:j&&e(p,j.pos),match:j&&j.match}}function b(b,c){var f=b.state._matchBrackets.maxHighlightLineLength||1e3,g=a(b);if(!(!g||b.getLine(g.from.line).length>f||g.to&&b.getLine(g.to.line).length>f)){var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",i=b.markText(g.from,e(g.from.line,g.from.ch+1),{className:h}),j=g.to&&b.markText(g.to,e(g.to.line,g.to.ch+1),{className:h});d&&b.state.focused&&b.display.input.focus();var k=function(){b.operation(function(){i.clear(),j&&j.clear()})};return c?void setTimeout(k,800):k}}function c(a){a.operation(function(){g&&(g(),g=null),a.somethingSelected()||(g=b(a,!1))})}var d=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),e=CodeMirror.Pos,f={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},g=null;CodeMirror.defineOption("matchBrackets",!1,function(a,b,d){d&&d!=CodeMirror.Init&&a.off("cursorActivity",c),b&&(a.state._matchBrackets="object"==typeof b?b:{},a.on("cursorActivity",c))}),CodeMirror.defineExtension("matchBrackets",function(){b(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(){return a(this)})}(),CodeMirror.newFoldFunction=function(a,b){if(null==b&&(b="↔"),"string"==typeof b){var c=document.createTextNode(b);b=document.createElement("span"),b.appendChild(c),b.className="CodeMirror-foldmarker"}return function(c,d){"number"==typeof d&&(d=CodeMirror.Pos(d,0));var e=a(c,d);if(e){for(var f=c.findMarksAt(e.from),g=0,h=0;h<f.length;++h)f[h].__isFold&&(++g,f[h].clear());if(!g){var i=b.cloneNode(!0);CodeMirror.on(i,"mousedown",function(){j.clear()});var j=c.markText(e.from,e.to,{replacedWith:i,clearOnEnter:!0,__isFold:!0})}}}},CodeMirror.braceRangeFinder=function(a,b){for(var c,d,e=b.line,f=a.getLine(e),g=f.length;g>0;){var h=f.lastIndexOf("{",g);if(h<b.ch)break;if(d=a.getTokenAt(CodeMirror.Pos(e,h+1)).type,!/^(comment|string)/.test(d)){c=h;break}g=h-1}if(!(null==c||f.lastIndexOf("}")>c)){var i,j,k=1,l=a.lineCount();a:for(var m=e+1;l>m;++m)for(var n=a.getLine(m),o=0;;){var p=n.indexOf("{",o),q=n.indexOf("}",o);if(0>p&&(p=n.length),0>q&&(q=n.length),o=Math.min(p,q),o==n.length)break;if(a.getTokenAt(CodeMirror.Pos(m,o+1)).type==d)if(o==p)++k;else if(!--k){i=m,j=o;break a}++o}if(null!=i&&i!=e+1)return{from:CodeMirror.Pos(e,c+1),to:CodeMirror.Pos(i,j)}}},CodeMirror.tagRangeFinder=function(){var a="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",b=a+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",c=new RegExp("<(/?)(["+a+"]["+b+"]*)","g");return function(a,b){function d(){return h>=a.lastLine()?void 0:(i=0,j=a.getLine(++h),!0)}function e(){for(;;){var a=j.indexOf(">",i);if(-1==a){if(d())continue;return}var b=j.lastIndexOf("/",a),c=b>-1&&/^\s*$/.test(j.slice(b+1,a));return i=a+1,c?"selfClose":"regular"}}function f(){for(;;){c.lastIndex=i;var a=c.exec(j);if(!a){if(d())continue;return}return i=a.index+a[0].length,a}}for(var g,h=b.line,i=b.ch,j=a.getLine(h),k=[];;){var l,m=f();if(!m||h!=b.line||!(l=e()))return;if(!m[1]&&"selfClose"!=l){k.push(m[2]),g=i;break}}for(;;){var l,n=f(),o=h,p=i-(n?n[0].length:0);if(!n||!(l=e()))return;if("selfClose"!=l)if(n[1]){for(var q=k.length-1;q>=0;--q)if(k[q]==n[2]){k.length=q;break}if(!k.length)return{from:CodeMirror.Pos(b.line,g),to:CodeMirror.Pos(o,p)}}else k.push(n[2])}}}(),function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,b){return/^[;{}]$/.test(b)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,b,c,d){return this.jsonMode?/^[\[,{]$/.test(b)||/^}/.test(c):";"==b&&d.lexical&&")"==d.lexical.type?!1:/^[;{}]$/.test(b)&&!/^;/.test(c)}});var a=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(b,c,d,e){var f=!1;return"html"==this.configuration&&(f=e.context?a.test(e.context.tagName):!1),!f&&("tag"==b&&/>$/.test(c)&&e.context||/^</.test(d))}}),CodeMirror.defineExtension("commentRange",function(a,b,c){var d=this,e=CodeMirror.innerMode(d.getMode(),d.getTokenAt(b).state).mode;d.operation(function(){if(a)d.replaceRange(e.commentEnd,c),d.replaceRange(e.commentStart,b),b.line==c.line&&b.ch==c.ch&&d.setCursor(b.line,b.ch+e.commentStart.length);else{var f=d.getRange(b,c),g=f.indexOf(e.commentStart),h=f.lastIndexOf(e.commentEnd);g>-1&&h>-1&&h>g&&(f=f.substr(0,g)+f.substring(g+e.commentStart.length,h)+f.substr(h+e.commentEnd.length)),d.replaceRange(f,b,c)}})}),CodeMirror.defineExtension("autoIndentRange",function(a,b){var c=this;this.operation(function(){for(var d=a.line;d<=b.line;d++)c.indentLine(d,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(a,b){function c(){i+="\n",k=!0,++j}for(var d=this,e=d.getMode(),f=d.getRange(a,b).split("\n"),g=CodeMirror.copyState(e,d.getTokenAt(a).state),h=d.getOption("tabSize"),i="",j=0,k=0==a.ch,l=0;l<f.length;++l){for(var m=new CodeMirror.StringStream(f[l],h);!m.eol();){var n=CodeMirror.innerMode(e,g),o=e.token(m,g),p=m.current();m.start=m.pos,(!k||/\S/.test(p))&&(i+=p,k=!1),!k&&n.mode.newlineAfterToken&&n.mode.newlineAfterToken(o,p,m.string.slice(m.pos)||f[l+1]||"",n.state)&&c()}!m.pos&&e.blankLine&&e.blankLine(g),!k&&l<f.length-1&&c()}d.operation(function(){d.replaceRange(i,a,b);for(var c=a.line+1,e=a.line+j;e>=c;++c)d.indentLine(c,"smart");d.setSelection(a,d.getCursor(!1))})})}(),CodeMirror.defineMode("javascript",function(a,b){function c(a,b,c){return b.tokenize=c,c(a,b)}function d(a,b){for(var c,d=!1;null!=(c=a.next());){if(c==b&&!d)return!1;d=!d&&"\\"==c}return d}function e(a,b,c){return R=a,S=c,b}function f(a,b){var f=a.next();if('"'==f||"'"==f)return c(a,b,g(f));if(/[\[\]{}\(\),;\:\.]/.test(f))return e(f);if("0"==f&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),e("number","number");if(/\d/.test(f)||"-"==f&&a.eat(/\d/))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),e("number","number");if("/"==f)return a.eat("*")?c(a,b,h):a.eat("/")?(a.skipToEnd(),e("comment","comment")):"operator"==b.lastType||"keyword c"==b.lastType||/^[\[{}\(,;:]$/.test(b.lastType)?(d(a,"/"),a.eatWhile(/[gimy]/),e("regexp","string-2")):(a.eatWhile(X),e("operator",null,a.current()));if("#"==f)return a.skipToEnd(),e("error","error");if(X.test(f))return a.eatWhile(X),e("operator",null,a.current());a.eatWhile(/[\w\$_]/);var i=a.current(),j=W.propertyIsEnumerable(i)&&W[i];return j&&"."!=b.lastType?e(j.type,j.style,i):e("variable","variable",i)}function g(a){return function(b,c){return d(b,a)||(c.tokenize=f),e("string","string")}}function h(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=f;break}d="*"==c}return e("comment","comment")}function i(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,null!=d&&(this.align=d)}function j(a,b){for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0}function k(a,b,c,d,e){var f=a.cc;for(Z.state=a,Z.stream=e,Z.marked=null,Z.cc=f,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;){var g=f.length?f.pop():U?u:t;if(g(c,d)){for(;f.length&&f[f.length-1].lex;)f.pop()();return Z.marked?Z.marked:"variable"==c&&j(a,d)?"variable-2":b}}}function l(){for(var a=arguments.length-1;a>=0;a--)Z.cc.push(arguments[a])}function m(){return l.apply(null,arguments),!0}function n(a){function b(b){for(var c=b;c;c=c.next)if(c.name==a)return!0;return!1}var c=Z.state;if(c.context){if(Z.marked="def",b(c.localVars))return;c.localVars={name:a,next:c.localVars}}else{if(b(c.globalVars))return;c.globalVars={name:a,next:c.globalVars}}}function o(){Z.state.context={prev:Z.state.context,vars:Z.state.localVars},Z.state.localVars=$}function p(){Z.state.localVars=Z.state.context.vars,Z.state.context=Z.state.context.prev}function q(a,b){var c=function(){var c=Z.state;c.lexical=new i(c.indented,Z.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function r(){var a=Z.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function s(a){return function(b){return b==a?m():";"==a?l():m(arguments.callee)}}function t(a){return"var"==a?m(q("vardef"),I,s(";"),r):"keyword a"==a?m(q("form"),u,t,r):"keyword b"==a?m(q("form"),t,r):"{"==a?m(q("}"),F,r):";"==a?m():"if"==a?m(q("form"),u,t,r,K(Z.state.indented)):"function"==a?m(P):"for"==a?m(q("form"),s("("),q(")"),L,s(")"),r,t,r):"variable"==a?m(q("stat"),A):"switch"==a?m(q("form"),u,q("}","switch"),s("{"),F,r,r):"case"==a?m(u,s(":")):"default"==a?m(s(":")):"catch"==a?m(q("form"),o,s("("),Q,s(")"),t,r,p):l(q("stat"),u,s(";"),r)}function u(a){return w(a,y)}function v(a){return w(a,z)}function w(a,b){return Y.hasOwnProperty(a)?m(b):"function"==a?m(P):"keyword c"==a?m(x):"("==a?m(q(")"),x,s(")"),r,b):"operator"==a?m(u):"["==a?m(q("]"),E(v,"]"),r,b):"{"==a?m(q("}"),E(C,"}"),r,b):m()}function x(a){return a.match(/[;\}\)\],]/)?l():l(u)}function y(a,b){return","==a?m(u):z(a,b,y)}function z(a,b,c){return c||(c=z),"operator"==a?/\+\+|--/.test(b)?m(c):"?"==b?m(u,s(":"),u):m(u):";"!=a?"("==a?m(q(")","call"),E(v,")"),r,c):"."==a?m(B,c):"["==a?m(q("]"),u,s("]"),r,c):void 0:void 0}function A(a){return":"==a?m(r,t):l(y,s(";"),r)}function B(a){return"variable"==a?(Z.marked="property",m()):void 0}function C(a,b){if("variable"==a){if(Z.marked="property","get"==b||"set"==b)return m(D)}else("number"==a||"string"==a)&&(Z.marked=a+" property");return Y.hasOwnProperty(a)?m(s(":"),v):void 0}function D(a){return":"==a?m(u):"variable"!=a?m(s(":"),u):(Z.marked="property",m(P))}function E(a,b){function c(d){if(","==d){var e=Z.state.lexical;return"call"==e.info&&(e.pos=(e.pos||0)+1),m(a,c)}return d==b?m():m(s(b))}return function(d){return d==b?m():l(a,c)}}function F(a){return"}"==a?m():l(t,F)}function G(a){return":"==a?m(H):l()}function H(a){return"variable"==a?(Z.marked="variable-3",m()):l()}function I(a,b){return"variable"==a?(n(b),V?m(G,J):m(J)):l()}function J(a,b){return"="==b?m(v,J):","==a?m(I):void 0}function K(a){return function(b,c){return"keyword b"==b&&"else"==c?(Z.state.lexical=new i(a,0,"form",null,Z.state.lexical),m(t,r)):l()}}function L(a){return"var"==a?m(I,s(";"),N):";"==a?m(N):"variable"==a?m(M):l(u,s(";"),N)}function M(a,b){return"in"==b?m(u):m(y,N)}function N(a,b){return";"==a?m(O):"in"==b?m(u):l(u,s(";"),O)}function O(a){")"!=a&&m(u)}function P(a,b){return"variable"==a?(n(b),m(P)):"("==a?m(q(")"),o,E(Q,")"),r,t,p):void 0}function Q(a,b){return"variable"==a?(n(b),V?m(G):m()):void 0}var R,S,T=a.indentUnit,U=b.json,V=b.typescript,W=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},g={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this")};if(V){var h={type:"variable",style:"variable-3"},i={"interface":a("interface"),"class":a("class"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),"super":a("super"),string:h,number:h,bool:h,any:h};
for(var j in i)g[j]=i[j]}return g}(),X=/[+\-*&%=<>!?|~^]/,Y={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},Z={state:null,column:null,marked:null,cc:null},$={name:"this",next:{name:"arguments"}};return r.lex=!0,{startState:function(a){return{tokenize:f,lastType:null,cc:[],lexical:new i((a||0)-T,0,"block",!1),localVars:b.localVars,globalVars:b.globalVars,context:b.localVars&&{vars:b.localVars},indented:0}},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation()),b.tokenize!=h&&a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"==R?c:(b.lastType="operator"!=R||"++"!=S&&"--"!=S?R:"incdec",k(b,c,R,S,a))},indent:function(a,c){if(a.tokenize==h)return CodeMirror.Pass;if(a.tokenize!=f)return 0;var d=c&&c.charAt(0),e=a.lexical;"stat"==e.type&&"}"==d&&(e=e.prev);var g=e.type,i=d==g;return null!=b.statementIndent&&(")"==g&&e.prev&&"stat"==e.prev.type&&(e=e.prev),"stat"==e.type)?e.indented+b.statementIndent:"vardef"==g?e.indented+("operator"==a.lastType||","==a.lastType?4:0):"form"==g&&"{"==d?e.indented:"form"==g?e.indented+T:"stat"==g?e.indented+("operator"==a.lastType||","==a.lastType?T:0):"switch"!=e.info||i?e.align?e.column+(i?0:1):e.indented+(i?0:T):e.indented+(/^(?:case|default)\b/.test(c)?T:2*T)},electricChars:":{}",jsonMode:U}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMode("xml",function(a,b){function c(a,b){function c(c){return b.tokenize=c,c(a,b)}var e=a.next();if("<"==e){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?c(f("atom","]]>")):null:a.match("--")?c(f("comment","-->")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(g(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=f("meta","?>"),"meta";var h=a.eat("/");t="";for(var i;i=a.eat(/[^\s\u00a0=<>\"\'\/?]/);)t+=i;return t?(u=h?"closeTag":"openTag",b.tokenize=d,"tag"):"error"}if("&"==e){var j;return j=a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"),j?"atom":"error"}return a.eatWhile(/[^&<]/),null}function d(a,b){var d=a.next();return">"==d||"/"==d&&a.eat(">")?(b.tokenize=c,u=">"==d?"endTag":"selfcloseTag","tag"):"="==d?(u="equals",null):/[\'\"]/.test(d)?(b.tokenize=e(d),b.tokenize(a,b)):(a.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function e(a){return function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=d;break}return"string"}}function f(a,b){return function(d,e){for(;!d.eol();){if(d.match(b)){e.tokenize=c;break}d.next()}return a}}function g(a){return function(b,d){for(var e;null!=(e=b.next());){if("<"==e)return d.tokenize=g(a+1),d.tokenize(b,d);if(">"==e){if(1==a){d.tokenize=c;break}return d.tokenize=g(a-1),d.tokenize(b,d)}}return"meta"}}function h(){for(var a=arguments.length-1;a>=0;a--)v.cc.push(arguments[a])}function i(){return h.apply(null,arguments),!0}function j(a,b){var c=A.doNotIndent.hasOwnProperty(a)||v.context&&v.context.noIndent;v.context={prev:v.context,tagName:a,indent:v.indented,startOfLine:b,noIndent:c}}function k(){v.context&&(v.context=v.context.prev)}function l(a){if("openTag"==a)return v.tagName=t,v.tagStart=w.column(),i(p,m(v.startOfLine));if("closeTag"==a){var b=!1;return v.context?v.context.tagName!=t&&(A.implicitlyClosed.hasOwnProperty(v.context.tagName.toLowerCase())&&k(),b=!v.context||v.context.tagName!=t):b=!0,b&&(x="error"),i(n(b))}return i()}function m(a){return function(b){var c=v.tagName;return v.tagName=v.tagStart=null,"selfcloseTag"==b||"endTag"==b&&A.autoSelfClosers.hasOwnProperty(c.toLowerCase())?(o(c.toLowerCase()),i()):"endTag"==b?(o(c.toLowerCase()),j(c,a),i()):i()}}function n(a){return function(b){return a&&(x="error"),"endTag"==b?(k(),i()):(x="error",i(arguments.callee))}}function o(a){for(var b;;){if(!v.context)return;if(b=v.context.tagName.toLowerCase(),!A.contextGrabbers.hasOwnProperty(b)||!A.contextGrabbers[b].hasOwnProperty(a))return;k()}}function p(a){return"word"==a?(x="attribute",i(q,p)):"endTag"==a||"selfcloseTag"==a?h():(x="error",i(p))}function q(a){return"equals"==a?i(r,p):(A.allowMissing?"word"==a&&(x="attribute"):x="error","endTag"==a||"selfcloseTag"==a?h():i())}function r(a){return"string"==a?i(s):"word"==a&&A.allowUnquoted?(x="string",i()):(x="error","endTag"==a||"selfCloseTag"==a?h():i())}function s(a){return"string"==a?i(s):h()}var t,u,v,w,x,y=a.indentUnit,z=b.multilineTagIndentFactor||1,A=b.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},B=b.alignCDATA;return{startState:function(){return{tokenize:c,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(a,b){if(!b.tagName&&a.sol()&&(b.startOfLine=!0,b.indented=a.indentation()),a.eatSpace())return null;x=u=t=null;var c=b.tokenize(a,b);if(b.type=u,(c||u)&&"comment"!=c)for(v=b,w=a;;){var d=b.cc.pop()||l;if(d(u||c))break}return b.startOfLine=!1,x||c},indent:function(a,b,e){var f=a.context;if(a.tokenize!=d&&a.tokenize!=c||f&&f.noIndent)return e?e.match(/^(\s*)/)[0].length:0;if(a.tagName)return a.tagStart+y*z;if(B&&/<!\[CDATA\[/.test(b))return 0;for(f&&/^<\//.test(b)&&(f=f.prev);f&&!f.startOfLine;)f=f.prev;return f?f.indent+y:0},electricChars:"/",configuration:b.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),CodeMirror.defineMode("css",function(a){return CodeMirror.getMode(a,"text/css")}),CodeMirror.defineMode("css-base",function(a,b){"use strict";function c(a,b){return o=b,a}function d(a,b){var d=a.next();if(h[d]){var g=h[d](a,b);if(g!==!1)return g}if("@"==d)return a.eatWhile(/[\w\\\-]/),c("def",a.current());if("="==d)c(null,"compare");else{if(("~"==d||"|"==d)&&a.eat("="))return c(null,"compare");if('"'==d||"'"==d)return b.tokenize=e(d),b.tokenize(a,b);if("#"==d)return a.eatWhile(/[\w\\\-]/),c("atom","hash");if("!"==d)return a.match(/^\s*\w*/),c("keyword","important");if(/\d/.test(d))return a.eatWhile(/[\w.%]/),c("number","unit");if("-"!==d)return/[,+>*\/]/.test(d)?c(null,"select-op"):"."==d&&a.match(/^-?[_a-z][_a-z0-9-]*/i)?c("qualifier","qualifier"):":"==d?c("operator",d):/[;{}\[\]\(\)]/.test(d)?c(null,d):"u"==d&&a.match("rl(")?(a.backUp(1),b.tokenize=f,c("property","variable")):(a.eatWhile(/[\w\\\-]/),c("property","variable"));if(/\d/.test(a.peek()))return a.eatWhile(/[\w.%]/),c("number","unit");if(a.match(/^[^-]+-/))return c("meta","meta")}}function e(a,b){return function(e,f){for(var g,h=!1;null!=(g=e.next())&&(g!=a||h);)h=!h&&"\\"==g;return h||(b&&e.backUp(1),f.tokenize=d),c("string","string")}}function f(a,b){return a.next(),b.tokenize=a.match(/\s*[\"\']/,!1)?d:e(")",!0),c(null,"(")}var g=a.indentUnit,h=b.hooks||{},i=b.atMediaTypes||{},j=b.atMediaFeatures||{},k=b.propertyKeywords||{},l=b.colorKeywords||{},m=b.valueKeywords||{},n=!!b.allowNested,o=null;return{startState:function(a){return{tokenize:d,baseIndent:a||0,stack:[]}},token:function(a,b){if(b.tokenize=b.tokenize||d,b.tokenize==d&&a.eatSpace())return null;var e=b.tokenize(a,b);e&&"string"!=typeof e&&(e=c(e[0],e[1]));var f=b.stack[b.stack.length-1];if("variable"==e)return"variable-definition"==o&&b.stack.push("propertyValue"),"variable-2";if("property"==e?"propertyValue"==f?e=m[a.current()]?"string-2":l[a.current()]?"keyword":"variable-2":"rule"==f?k[a.current()]||(e+=" error"):"block"==f?e=k[a.current()]?"property":l[a.current()]?"keyword":m[a.current()]?"string-2":"tag":f&&"@media{"!=f?"@media"==f?e=i[a.current()]?"attribute":/^(only|not)$/i.test(a.current())?"keyword":"and"==a.current().toLowerCase()?"error":j[a.current()]?"error":"attribute error":"@mediaType"==f?e=i[a.current()]?"attribute":"and"==a.current().toLowerCase()?"operator":/^(only|not)$/i.test(a.current())?"error":(j[a.current()],"error"):"@mediaType("==f?k[a.current()]||(i[a.current()]?e="error":"and"==a.current().toLowerCase()?e="operator":/^(only|not)$/i.test(a.current())?e="error":e+=" error"):e="error":e="tag":"atom"==e?f&&"@media{"!=f&&"block"!=f?"propertyValue"==f?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(a.current())||(e+=" error"):e="error":e="builtin":"@media"==f&&"{"==o&&(e="error"),"{"==o)if("@media"==f||"@mediaType"==f)b.stack.pop(),b.stack[b.stack.length-1]="@media{";else{var g=n?"block":"rule";b.stack.push(g)}else if("}"==o){var h=b.stack[b.stack.length-1];"interpolation"==h&&(e="operator"),b.stack.pop(),"propertyValue"==f&&b.stack.pop()}else"interpolation"==o?b.stack.push("interpolation"):"@media"==o?b.stack.push("@media"):"@media"==f&&/\b(keyword|attribute)\b/.test(e)?b.stack.push("@mediaType"):"@mediaType"==f&&","==a.current()?b.stack.pop():"@mediaType"==f&&"("==o?b.stack.push("@mediaType("):"@mediaType("==f&&")"==o?b.stack.pop():"rule"!=f&&"block"!=f||":"!=o?"propertyValue"==f&&";"==o&&b.stack.pop():b.stack.push("propertyValue");return e},indent:function(a,b){var c=a.stack.length;return/^\}/.test(b)&&(c-="propertyValue"==a.stack[a.stack.length-1]?2:1),a.baseIndent+c*g},electricChars:"}"}}),function(){function a(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=!0;return b}function b(a,b){for(var c,d=!1;null!=(c=a.next());){if(d&&"/"==c){b.tokenize=null;break}d="*"==c}return["comment","comment"]}var c=a(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),d=a(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),e=a(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),f=a(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),g=a(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"]);CodeMirror.defineMIME("text/css",{atMediaTypes:c,atMediaFeatures:d,propertyKeywords:e,colorKeywords:f,valueKeywords:g,hooks:{"<":function(a,b){function c(a,b){for(var c,d=0;null!=(c=a.next());){if(d>=2&&">"==c){b.tokenize=null;break}d="-"==c?d+1:0}return["comment","comment"]}return a.eat("!")?(b.tokenize=c,c(a,b)):void 0},"/":function(a,c){return a.eat("*")?(c.tokenize=b,b(a,c)):!1}},name:"css-base"}),CodeMirror.defineMIME("text/x-scss",{atMediaTypes:c,atMediaFeatures:d,propertyKeywords:e,colorKeywords:f,valueKeywords:g,allowNested:!0,hooks:{$:function(a){return a.match(/^[\w-]+/),":"==a.peek()?["variable","variable-definition"]:["variable","variable"]},"/":function(a,c){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(c.tokenize=b,b(a,c)):["operator","operator"]},"#":function(a){return a.eat("{")?["operator","interpolation"]:(a.eatWhile(/[\w\\\-]/),["atom","hash"])}},name:"css-base"})}(),CodeMirror.defineMode("htmlmixed",function(a,b){function c(a,b){var c=b.htmlState.tagName,d=g.token(a,b.htmlState);if("script"==c&&/\btag\b/.test(d)&&">"==a.current()){var j=a.string.slice(Math.max(0,a.pos-100),a.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);j=j?j[1]:"",j&&/[\"\']/.test(j.charAt(0))&&(j=j.slice(1,j.length-1));for(var k=0;k<i.length;++k){var l=i[k];if("string"==typeof l.matches?j==l.matches:l.matches.test(j)){l.mode&&(b.token=e,b.localMode=l.mode,b.localState=l.mode.startState&&l.mode.startState(g.indent(b.htmlState,"")));break}}}else"style"==c&&/\btag\b/.test(d)&&">"==a.current()&&(b.token=f,b.localMode=h,b.localState=h.startState(g.indent(b.htmlState,"")));return d}function d(a,b,c){var d,e=a.current(),f=e.search(b);return f>-1?a.backUp(e.length-f):(d=e.match(/<\/?$/))&&(a.backUp(e.length),a.match(b,!1)||a.match(e[0])),c}function e(a,b){return a.match(/^<\/\s*script\s*>/i,!1)?(b.token=c,b.localState=b.localMode=null,c(a,b)):d(a,/<\/\s*script\s*>/,b.localMode.token(a,b.localState))}function f(a,b){return a.match(/^<\/\s*style\s*>/i,!1)?(b.token=c,b.localState=b.localMode=null,c(a,b)):d(a,/<\/\s*style\s*>/,h.token(a,b.localState))}var g=CodeMirror.getMode(a,{name:"xml",htmlMode:!0}),h=CodeMirror.getMode(a,"css"),i=[],j=b&&b.scriptTypes;if(i.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:CodeMirror.getMode(a,"javascript")}),j)for(var k=0;k<j.length;++k){var l=j[k];i.push({matches:l.matches,mode:l.mode&&CodeMirror.getMode(a,l.mode)})}return i.push({matches:/./,mode:CodeMirror.getMode(a,"text/plain")}),{startState:function(){var a=g.startState();return{token:c,localMode:null,localState:null,htmlState:a}},copyState:function(a){if(a.localState)var b=CodeMirror.copyState(a.localMode,a.localState);return{token:a.token,localMode:a.localMode,localState:b,htmlState:CodeMirror.copyState(g,a.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(a,b){return!a.localMode||/^\s*<\//.test(b)?g.indent(a.htmlState,b):a.localMode.indent?a.localMode.indent(a.localState,b):CodeMirror.Pass},electricChars:"/{}:",innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||g}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed"),CodeMirror.defineMode("markdown",function(a,b){function c(a,b,c){return b.f=b.inline=c,c(a,b)}function d(a,b,c){return b.f=b.block=c,c(a,b)}function e(a){return a.linkTitle=!1,a.em=!1,a.strong=!1,a.quote=0,q||a.f!=g||(a.f=k,a.block=f),a.thisLineHasContent=!1,null}function f(a,e){var f=e.list!==!1;if(e.list!==!1&&e.indentationDiff>=0?(e.indentationDiff<4&&(e.indentation-=e.indentationDiff),e.list=null):e.list!==!1&&e.indentation>0?(e.list=null,e.listDepth=Math.floor(e.indentation/4)):e.list!==!1&&(e.list=!1,e.listDepth=0),e.indentationDiff>=4)return e.indentation-=4,a.skipToEnd(),w;if(a.eatSpace())return null;if("#"===a.peek()||e.prevLineHasContent&&a.match(O))e.header=!0;else if(a.eat(">"))for(e.indentation++,e.quote=1,a.eatSpace();a.eat(">");)a.eatSpace(),e.quote++;else{if("["===a.peek())return c(a,e,m);if(a.match(K,!0))return C;if(e.prevLineHasContent&&!f||!a.match(L,!0)&&!a.match(M,!0)){if(b.fencedCodeBlocks&&a.match(/^```([\w+#]*)/,!0))return e.localMode=t(RegExp.$1),e.localMode&&(e.localState=e.localMode.startState()),d(a,e,h),w}else e.indentation+=4,e.list=!0,e.listDepth++,b.taskLists&&a.match(N,!1)&&(e.taskList=!0)}return c(a,e,e.inline)}function g(a,b){var c=r.token(a,b.htmlState);return q&&"tag"===c&&"openTag"!==b.htmlState.type&&!b.htmlState.context&&(b.f=k,b.block=f),b.md_inside&&-1!=a.current().indexOf(">")&&(b.f=k,b.block=f,b.htmlState.context=void 0),c}function h(a,b){return a.sol()&&a.match(/^```/,!0)?(b.localMode=b.localState=null,b.f=k,b.block=f,w):b.localMode?b.localMode.token(a,b.localState):(a.skipToEnd(),w)}function i(a){var b=[];if(a.taskOpen)return"meta";if(a.taskClosed)return"property";if(a.strong&&b.push(J),a.em&&b.push(I),a.linkText&&b.push(G),a.code&&b.push(w),a.header&&b.push(v),a.quote&&b.push(a.quote%2?x:y),a.list!==!1){var c=(a.listDepth-1)%3;b.push(c?1===c?A:B:z)}return b.length?b.join(" "):null}function j(a,b){return a.match(P,!0)?i(b):void 0}function k(a,e){var f=e.text(a,e);if("undefined"!=typeof f)return f;if(e.list)return e.list=null,i(e);if(e.taskList){var h="x"!==a.match(N,!0)[1];return h?e.taskOpen=!0:e.taskClosed=!0,e.taskList=!1,i(e)}e.taskOpen=!1,e.taskClosed=!1;var j=a.next();if("\\"===j)return a.next(),i(e);if(e.linkTitle){e.linkTitle=!1;var k=j;"("===j&&(k=")"),k=(k+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var m="^\\s*(?:[^"+k+"\\\\]+|\\\\\\\\|\\\\.)"+k;if(a.match(new RegExp(m),!0))return H}if("`"===j){var n=i(e),o=a.pos;a.eatWhile("`");var q=1+a.pos-o;return e.code?q===u?(e.code=!1,n):i(e):(u=q,e.code=!0,i(e))}if(e.code)return i(e);if("!"===j&&a.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return a.match(/\[[^\]]*\]/),e.inline=e.f=l,D;if("["===j&&a.match(/.*\](\(| ?\[)/,!1))return e.linkText=!0,i(e);if("]"===j&&e.linkText){var r=i(e);return e.linkText=!1,e.inline=e.f=l,r}if("<"===j&&a.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!0))return c(a,e,p(E,">"));if("<"===j&&a.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!0))return c(a,e,p(F,">"));if("<"===j&&a.match(/^\w/,!1)){if(-1!=a.string.indexOf(">")){var s=a.string.substring(1,a.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(s)&&(e.md_inside=!0)}return a.backUp(1),d(a,e,g)}if("<"===j&&a.match(/^\/\w*?>/))return e.md_inside=!1,"tag";var t=!1;if(!b.underscoresBreakWords&&"_"===j&&"_"!==a.peek()&&a.match(/(\w)/,!1)){var v=a.pos-2;if(v>=0){var w=a.string.charAt(v);"_"!==w&&w.match(/(\w)/,!1)&&(t=!0)}}var n=i(e);if("*"===j||"_"===j&&!t){if(e.strong===j&&a.eat(j))return e.strong=!1,n;if(!e.strong&&a.eat(j))return e.strong=j,i(e);if(e.em===j)return e.em=!1,n;if(!e.em)return e.em=j,i(e)}else if(" "===j&&(a.eat("*")||a.eat("_"))){if(" "===a.peek())return i(e);a.backUp(1)}return i(e)}function l(a,b){if(a.eatSpace())return null;var d=a.next();return"("===d||"["===d?c(a,b,p(H,"("===d?")":"]")):"error"}function m(a,b){return a.match(/^[^\]]*\]:/,!0)?(b.f=n,G):c(a,b,k)}function n(a,b){return a.eatSpace()?null:(a.match(/^[^\s]+/,!0),void 0===a.peek()?b.linkTitle=!0:a.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),b.f=b.inline=k,H)}function o(a){return Q[a]||(a=(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),Q[a]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+a+")")),Q[a]}function p(a,b,c){return c=c||k,function(d,e){return d.match(o(b)),e.inline=e.f=c,a}}var q=CodeMirror.mimeModes.hasOwnProperty("text/html"),r=CodeMirror.getMode(a,q?"text/html":"text/plain"),s={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},t=function(){var b,c,d={},e={},f=[];for(var g in CodeMirror.modes)CodeMirror.modes.propertyIsEnumerable(g)&&f.push(g);for(b=0;b<f.length;b++)d[f[b]]=f[b];var h=[];for(var g in CodeMirror.mimeModes)CodeMirror.mimeModes.propertyIsEnumerable(g)&&h.push({mime:g,mode:CodeMirror.mimeModes[g]});for(b=0;b<h.length;b++)c=h[b].mime,e[c]=h[b].mime;for(var i in s)(s[i]in d||s[i]in e)&&(d[i]=s[i]);return function(b){return d[b]?CodeMirror.getMode(a,d[b]):null}}();void 0===b.underscoresBreakWords&&(b.underscoresBreakWords=!0),void 0===b.fencedCodeBlocks&&(b.fencedCodeBlocks=!1),void 0===b.taskLists&&(b.taskLists=!1);var u=0,v="header",w="comment",x="atom",y="number",z="variable-2",A="variable-3",B="keyword",C="hr",D="tag",E="link",F="link",G="link",H="string",I="em",J="strong",K=/^([*\-=_])(?:\s*\1){2,}\s*$/,L=/^[*\-+]\s+/,M=/^[0-9]+\.\s+/,N=/^\[(x| )\](?=\s)/,O=/^(?:\={1,}|-{1,})$/,P=/^[^!\[\]*_\\<>` "'(]+/,Q=[];return{startState:function(){return{f:f,prevLineHasContent:!1,thisLineHasContent:!1,block:f,htmlState:CodeMirror.startState(r),indentation:0,inline:k,text:j,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:!1,taskList:!1,list:!1,listDepth:0,quote:0}},copyState:function(a){return{f:a.f,prevLineHasContent:a.prevLineHasContent,thisLineHasContent:a.thisLineHasContent,block:a.block,htmlState:CodeMirror.copyState(r,a.htmlState),indentation:a.indentation,localMode:a.localMode,localState:a.localMode?CodeMirror.copyState(a.localMode,a.localState):null,inline:a.inline,text:a.text,linkTitle:a.linkTitle,em:a.em,strong:a.strong,header:a.header,taskList:a.taskList,list:a.list,listDepth:a.listDepth,quote:a.quote,md_inside:a.md_inside}},token:function(a,b){if(a.sol()){if(a.match(/^\s*$/,!0))return b.prevLineHasContent=!1,e(b);b.prevLineHasContent=b.thisLineHasContent,b.thisLineHasContent=!0,b.header=!1,b.taskList=!1,b.code=!1,b.f=b.block;var c=a.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,d=4*Math.floor((c-b.indentation)/4);d>4&&(d=4);var f=b.indentation+d;if(b.indentationDiff=f-b.indentation,b.indentation=f,c>0)return null}return b.f(a,b)},blankLine:e,getType:i}},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown"),CodeMirror.defineMode("diff",function(){var a={"+":"positive","-":"negative","@":"meta"};return{token:function(b){var c=b.string.search(/[\t ]+?$/);if(!b.sol()||0===c)return b.skipToEnd(),("error "+(a[b.string.charAt(0)]||"")).replace(/ $/,"");var d=a[b.peek()]||b.skipToEnd();return-1===c?b.skipToEnd():b.pos=c,d}}}),CodeMirror.defineMIME("text/x-diff","diff"),CodeMirror.defineMode("properties",function(){return{token:function(a,b){var c=a.sol()||b.afterSection,d=a.eol();if(b.afterSection=!1,c&&(b.nextMultiline?(b.inMultiline=!0,b.nextMultiline=!1):b.position="def"),d&&!b.nextMultiline&&(b.inMultiline=!1,b.position="def"),c)for(;a.eatSpace(););var e=a.next();return!c||"#"!==e&&"!"!==e&&";"!==e?c&&"["===e?(b.afterSection=!0,a.skipTo("]"),a.eat("]"),"header"):"="===e||":"===e?(b.position="quote",null):("\\"===e&&"quote"===b.position&&"u"!==a.next()&&(b.nextMultiline=!0),b.position):(b.position="comment",a.skipToEnd(),"comment")
},startState:function(){return{position:"def",nextMultiline:!1,inMultiline:!1,afterSection:!1}}}}),CodeMirror.defineMIME("text/x-properties","properties"),CodeMirror.defineMIME("text/x-ini","properties"),CodeMirror.defineMode("clike",function(a,b){function c(a,b){var c=a.next();if(q[c]){var f=q[c](a,b);if(f!==!1)return f}if('"'==c||"'"==c)return b.tokenize=d(c),b.tokenize(a,b);if(/[\[\]{}\(\),;\:\.]/.test(c))return i=c,null;if(/\d/.test(c))return a.eatWhile(/[\w\.]/),"number";if("/"==c){if(a.eat("*"))return b.tokenize=e,e(a,b);if(a.eat("/"))return a.skipToEnd(),"comment"}if(s.test(c))return a.eatWhile(s),"operator";a.eatWhile(/[\w\$_]/);var g=a.current();return m.propertyIsEnumerable(g)?(o.propertyIsEnumerable(g)&&(i="newstatement"),"keyword"):n.propertyIsEnumerable(g)?(o.propertyIsEnumerable(g)&&(i="newstatement"),"builtin"):p.propertyIsEnumerable(g)?"atom":"variable"}function d(a){return function(b,c){for(var d,e=!1,f=!1;null!=(d=b.next());){if(d==a&&!e){f=!0;break}e=!e&&"\\"==d}return(f||!e&&!r)&&(c.tokenize=null),"string"}}function e(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=null;break}d="*"==c}return"comment"}function f(a,b,c,d,e){this.indented=a,this.column=b,this.type=c,this.align=d,this.prev=e}function g(a,b,c){var d=a.indented;return a.context&&"statement"==a.context.type&&(d=a.context.indented),a.context=new f(d,b,c,null,a.context)}function h(a){var b=a.context.type;return(")"==b||"]"==b||"}"==b)&&(a.indented=a.context.indented),a.context=a.context.prev}var i,j=a.indentUnit,k=b.statementIndentUnit||j,l=b.dontAlignCalls,m=b.keywords||{},n=b.builtin||{},o=b.blockKeywords||{},p=b.atoms||{},q=b.hooks||{},r=b.multiLineStrings,s=/[+\-*&%=<>!?|\/]/;return{startState:function(a){return{tokenize:null,context:new f((a||0)-j,0,"top",!1),indented:0,startOfLine:!0}},token:function(a,b){var d=b.context;if(a.sol()&&(null==d.align&&(d.align=!1),b.indented=a.indentation(),b.startOfLine=!0),a.eatSpace())return null;i=null;var e=(b.tokenize||c)(a,b);if("comment"==e||"meta"==e)return e;if(null==d.align&&(d.align=!0),";"!=i&&":"!=i&&","!=i||"statement"!=d.type)if("{"==i)g(b,a.column(),"}");else if("["==i)g(b,a.column(),"]");else if("("==i)g(b,a.column(),")");else if("}"==i){for(;"statement"==d.type;)d=h(b);for("}"==d.type&&(d=h(b));"statement"==d.type;)d=h(b)}else i==d.type?h(b):(("}"==d.type||"top"==d.type)&&";"!=i||"statement"==d.type&&"newstatement"==i)&&g(b,a.column(),"statement");else h(b);return b.startOfLine=!1,e},indent:function(a,b){if(a.tokenize!=c&&null!=a.tokenize)return CodeMirror.Pass;var d=a.context,e=b&&b.charAt(0);"statement"==d.type&&"}"==e&&(d=d.prev);var f=e==d.type;return"statement"==d.type?d.indented+("{"==e?0:k):l&&")"==d.type&&!f?d.indented+k:d.align?d.column+(f?0:1):d.indented+(f?0:j)},electricChars:"{}"}}),function(){function a(a){for(var b={},c=a.split(" "),d=0;d<c.length;++d)b[c[d]]=!0;return b}function b(a,c){if(!c.startOfLine)return!1;for(;;){if(!a.skipTo("\\")){a.skipToEnd(),c.tokenize=null;break}if(a.next(),a.eol()){c.tokenize=b;break}}return"meta"}function c(a,b){for(var c;null!=(c=a.next());)if('"'==c&&!a.eat('"')){b.tokenize=null;break}return"string"}function d(a,b){for(var c=0;c<a.length;++c)CodeMirror.defineMIME(a[c],b)}var e="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";d(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:a(e),blockKeywords:a("case do else for if switch while struct"),atoms:a("null"),hooks:{"#":b}}),d(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:a(e+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t"),blockKeywords:a("catch class do else finally for if struct switch try while"),atoms:a("true false null"),hooks:{"#":b}}),CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:a("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:a("catch class do else finally for if switch try while"),atoms:a("true false null"),hooks:{"@":function(a){return a.eatWhile(/[\w\$_]/),"meta"}}}),CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:a("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:a("catch class do else finally for foreach if struct switch try while"),builtin:a("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:a("true false null"),hooks:{"@":function(a,b){return a.eat('"')?(b.tokenize=c,c(a,b)):(a.eatWhile(/[\w\$_]/),"meta")}}}),CodeMirror.defineMIME("text/x-scala",{name:"clike",keywords:a("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:a("catch class do else finally for forSome if match switch try while"),atoms:a("true false null"),hooks:{"@":function(a){return a.eatWhile(/[\w\$_]/),"meta"}}})}(),CodeMirror.defineMode("yaml",function(){var a=["true","false","on","off","yes","no"],b=new RegExp("\\b(("+a.join(")|(")+"))$","i");return{token:function(a,c){var d=a.peek(),e=c.escaped;if(c.escaped=!1,"#"==d)return a.skipToEnd(),"comment";if(c.literal&&a.indentation()>c.keyCol)return a.skipToEnd(),"string";if(c.literal&&(c.literal=!1),a.sol()){if(c.keyCol=0,c.pair=!1,c.pairStart=!1,a.match(/---/))return"def";if(a.match(/\.\.\./))return"def";if(a.match(/\s*-\s+/))return"meta"}if(!c.pair&&a.match(/^\s*([a-z0-9\._-])+(?=\s*:)/i))return c.pair=!0,c.keyCol=a.indentation(),"atom";if(c.pair&&a.match(/^:\s*/))return c.pairStart=!0,"meta";if(a.match(/^(\{|\}|\[|\])/))return"{"==d?c.inlinePairs++:"}"==d?c.inlinePairs--:"["==d?c.inlineList++:c.inlineList--,"meta";if(c.inlineList>0&&!e&&","==d)return a.next(),"meta";if(c.inlinePairs>0&&!e&&","==d)return c.keyCol=0,c.pair=!1,c.pairStart=!1,a.next(),"meta";if(c.pairStart){if(a.match(/^\s*(\||\>)\s*/))return c.literal=!0,"meta";if(a.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(0==c.inlinePairs&&a.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(c.inlinePairs>0&&a.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(a.match(b))return"keyword"}return c.pairStart=!1,c.escaped="\\"==d,a.next(),null},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}}}),CodeMirror.defineMIME("text/x-yaml","yaml"),angular.module("ui.config",[]).value("ui.config",{}),angular.module("ui.filters",["ui.config"]),angular.module("ui.directives",["ui.config"]),angular.module("ui",["ui.filters","ui.directives","ui.config"]),angular.module("ui.directives").directive("uiAnimate",["ui.config","$timeout",function(a,b){var c={};return angular.isString(a.animate)?c["class"]=a.animate:a.animate&&(c=a.animate),{restrict:"A",link:function(a,d,e){var f={};e.uiAnimate&&(f=a.$eval(e.uiAnimate),angular.isString(f)&&(f={"class":f})),f=angular.extend({"class":"ui-animate"},c,f),d.addClass(f["class"]),b(function(){d.removeClass(f["class"])},20,!1)}}}]),angular.module("ui.directives").directive("uiCalendar",["ui.config","$parse",function(a){return a.uiCalendar=a.uiCalendar||{},{require:"ngModel",restrict:"A",link:function(b,c,d){function e(){b.calendar=c.html("");var e=b.calendar.fullCalendar("getView");e&&(e=e.name);var g,h={defaultView:e,eventSources:f};g=d.uiCalendar?b.$eval(d.uiCalendar):{},angular.extend(h,a.uiCalendar,g),b.calendar.fullCalendar(h)}var f=b.$eval(d.ngModel),g=0,h=function(){var a=b.$eval(d.equalsTracker);return g=0,angular.forEach(f,function(a){angular.isArray(a)&&(g+=a.length)}),angular.isNumber(a)?g+f.length+a:g+f.length};e(),b.$watch(h,function(){e()})}}}]),angular.module("ui.directives").directive("uiCodemirror",["ui.config","$timeout",function(a,b){"use strict";var c=["cursorActivity","viewportChange","gutterClick","focus","blur","scroll","update"];return{restrict:"A",require:"ngModel",link:function(d,e,f,g){var h,i,j,k,l;if("textarea"!==e[0].type)throw new Error("uiCodemirror3 can only be applied to a textarea element");h=a.codemirror||{},i=angular.extend({},h,d.$eval(f.uiCodemirror)),j=function(a){return function(b,c){var e=b.getValue();e!==g.$viewValue&&(g.$setViewValue(e),d.$apply()),"function"==typeof a&&a(b,c)}},k=function(){l=CodeMirror.fromTextArea(e[0],i),l.on("change",j(i.onChange));for(var a,h=0,k=c.length;k>h;++h)a=i["on"+c[h].charAt(0).toUpperCase()+c[h].slice(1)],void 0!==a&&"function"==typeof a&&l.on(c[h],a);g.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-codemirror cannot use an object or an array as a model");return a}),g.$render=function(){l.setValue(g.$viewValue)},f.uiRefresh&&d.$watch(f.uiRefresh,function(a,c){a!==c&&b(l.refresh)})},b(k)}}}]),angular.module("ui.directives").directive("uiCurrency",["ui.config","currencyFilter",function(a,b){var c={pos:"ui-currency-pos",neg:"ui-currency-neg",zero:"ui-currency-zero"};return a.currency&&angular.extend(c,a.currency),{restrict:"EAC",require:"ngModel",link:function(a,d,e,f){var g,h,i;g=angular.extend({},c,a.$eval(e.uiCurrency)),h=function(a){var c;return c=1*a,d.toggleClass(g.pos,c>0),d.toggleClass(g.neg,0>c),d.toggleClass(g.zero,0===c),d.text(""===a?"":b(c,g.symbol)),!0},f.$render=function(){i=f.$viewValue,d.val(i),h(i)}}}}]),angular.module("ui.directives").directive("uiDate",["ui.config",function(a){"use strict";var b;return b={},angular.isObject(a.date)&&angular.extend(b,a.date),{require:"?ngModel",link:function(b,c,d,e){var f=function(){return angular.extend({},a.date,b.$eval(d.uiDate))},g=function(){var a=f();if(e){var d=function(){b.$apply(function(){var a=c.datepicker("getDate");c.datepicker("setDate",c.val()),e.$setViewValue(a),c.blur()})};if(a.onSelect){var g=a.onSelect;a.onSelect=function(a,c){d(),b.$apply(function(){g(a,c)})}}else a.onSelect=d;c.bind("change",d),e.$render=function(){var a=e.$viewValue;if(angular.isDefined(a)&&null!==a&&!angular.isDate(a))throw new Error("ng-Model value must be a Date object - currently it is a "+typeof a+" - use ui-date-format to convert it from a string");c.datepicker("setDate",a)}}c.datepicker("destroy"),c.datepicker(a),e&&e.$render()};b.$watch(f,g,!0)}}}]).directive("uiDateFormat",["ui.config",function(a){var b={require:"ngModel",link:function(b,c,d,e){var f=d.uiDateFormat||a.dateFormat;f?(e.$formatters.push(function(a){return angular.isString(a)?$.datepicker.parseDate(f,a):void 0}),e.$parsers.push(function(a){return a?$.datepicker.formatDate(f,a):void 0})):(e.$formatters.push(function(a){return angular.isString(a)?new Date(a):void 0}),e.$parsers.push(function(a){return a?a.toISOString():void 0}))}};return b}]),angular.module("ui.directives").directive("uiEvent",["$parse",function(a){return function(b,c,d){var e=b.$eval(d.uiEvent);angular.forEach(e,function(d,e){var f=a(d);c.bind(e,function(a){var c=Array.prototype.slice.call(arguments);c=c.splice(1),b.$apply(function(){f(b,{$event:a,$params:c})})})})}}]),angular.module("ui.directives").directive("uiIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(a,b,c){return function(a,b,d){var e,f;a.$watch(d.uiIf,function(d){e&&(e.remove(),e=void 0),f&&(f.$destroy(),f=void 0),d&&(f=a.$new(),c(f,function(a){e=a,b.after(a)}))})}}}}]),angular.module("ui.directives").directive("uiJq",["ui.config","$timeout",function(a,b){return{restrict:"A",compile:function(c,d){if(!angular.isFunction(c[d.uiJq]))throw new Error('ui-jq: The "'+d.uiJq+'" function does not exist');var e=a.jq&&a.jq[d.uiJq];return function(a,c,d){function f(){b(function(){c[d.uiJq].apply(c,g)},0,!1)}var g=[];d.uiOptions?(g=a.$eval("["+d.uiOptions+"]"),angular.isObject(e)&&angular.isObject(g[0])&&(g[0]=angular.extend({},e,g[0]))):e&&(g=[e]),d.ngModel&&c.is("select,input,textarea")&&c.on("change",function(){c.trigger("input")}),d.uiRefresh&&a.$watch(d.uiRefresh,function(){f()}),f()}}}}]),angular.module("ui.directives").factory("keypressHelper",["$parse",function(a){var b={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},c=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};return function(d,e,f,g){var h,i=[];h=e.$eval(g["ui"+c(d)]),angular.forEach(h,function(b,c){var d,e;e=a(b),angular.forEach(c.split(" "),function(a){d={expression:e,keys:{}},angular.forEach(a.split("-"),function(a){d.keys[a]=!0}),i.push(d)})}),f.bind(d,function(a){var c=a.metaKey||a.altKey,f=a.ctrlKey,g=a.shiftKey,h=a.keyCode;"keypress"===d&&!g&&h>=97&&122>=h&&(h-=32),angular.forEach(i,function(d){var h=d.keys[b[a.keyCode]]||d.keys[a.keyCode.toString()]||!1,i=d.keys.alt||!1,j=d.keys.ctrl||!1,k=d.keys.shift||!1;h&&i==c&&j==f&&k==g&&e.$apply(function(){d.expression(e,{$event:a})})})})}}]),angular.module("ui.directives").directive("uiKeydown",["keypressHelper",function(a){return{link:function(b,c,d){a("keydown",b,c,d)}}}]),angular.module("ui.directives").directive("uiKeypress",["keypressHelper",function(a){return{link:function(b,c,d){a("keypress",b,c,d)}}}]),angular.module("ui.directives").directive("uiKeyup",["keypressHelper",function(a){return{link:function(b,c,d){a("keyup",b,c,d)}}}]),function(){function a(a,b,c,d){angular.forEach(b.split(" "),function(b){var e={type:"map-"+b};google.maps.event.addListener(c,b,function(b){d.triggerHandler(angular.extend({},e,b)),a.$$phase||a.$apply()})})}function b(b,d){c.directive(b,[function(){return{restrict:"A",link:function(c,e,f){c.$watch(f[b],function(b){a(c,d,b,e)})}}}])}var c=angular.module("ui.directives");c.directive("uiMap",["ui.config","$parse",function(b,c){var d="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed",e=b.map||{};return{restrict:"A",link:function(b,f,g){var h=angular.extend({},e,b.$eval(g.uiOptions)),i=new google.maps.Map(f[0],h),j=c(g.uiMap);j.assign(b,i),a(b,d,i,f)}}}]),c.directive("uiMapInfoWindow",["ui.config","$parse","$compile",function(b,c,d){var e="closeclick content_change domready position_changed zindex_changed",f=b.mapInfoWindow||{};return{link:function(b,g,h){var i=angular.extend({},f,b.$eval(h.uiOptions));i.content=g[0];var j=c(h.uiMapInfoWindow),k=j(b);k||(k=new google.maps.InfoWindow(i),j.assign(b,k)),a(b,e,k,g),g.replaceWith("<div></div>");var l=k.open;k.open=function(a,c,e,f,h,i){d(g.contents())(b),l.call(k,a,c,e,f,h,i)}}}}]),b("uiMapMarker","animation_changed click clickable_changed cursor_changed dblclick drag dragend draggable_changed dragstart flat_changed icon_changed mousedown mouseout mouseover mouseup position_changed rightclick shadow_changed shape_changed title_changed visible_changed zindex_changed"),b("uiMapPolyline","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),b("uiMapPolygon","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),b("uiMapRectangle","bounds_changed click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),b("uiMapCircle","center_changed click dblclick mousedown mousemove mouseout mouseover mouseup radius_changed rightclick"),b("uiMapGroundOverlay","click dblclick")}(),angular.module("ui.directives").directive("uiMask",[function(){return{require:"ngModel",link:function(a,b,c,d){d.$render=function(){var e=d.$viewValue||"";b.val(e),b.mask(a.$eval(c.uiMask))},d.$parsers.push(function(a){var c=b.isMaskValid()||angular.isUndefined(b.isMaskValid())&&b.val().length>0;return d.$setValidity("mask",c),c?a:void 0}),b.bind("keyup",function(){a.$apply(function(){d.$setViewValue(b.mask())})})}}}]),angular.module("ui.directives").directive("uiReset",["ui.config",function(a){var b=null;return void 0!==a.reset&&(b=a.reset),{require:"ngModel",link:function(a,c,d,e){var f;f=angular.element('<a class="ui-reset" />'),c.wrap('<span class="ui-resetwrap" />').after(f),f.bind("click",function(c){c.preventDefault(),a.$apply(function(){e.$setViewValue(d.uiReset?a.$eval(d.uiReset):b),e.$render()})})}}}]),angular.module("ui.directives").directive("uiRoute",["$location","$parse",function(a,b){return{restrict:"AC",compile:function(c,d){var e;if(d.uiRoute)e="uiRoute";else if(d.ngHref)e="ngHref";else{if(!d.href)throw new Error("uiRoute missing a route or href property on "+c[0]);e="href"}return function(c,d,f){function g(b){(hash=b.indexOf("#"))>-1&&(b=b.substr(hash+1)),(j=function(){i(c,a.path().indexOf(b)>-1)})()}function h(b){(hash=b.indexOf("#"))>-1&&(b=b.substr(hash+1)),(j=function(){var d=new RegExp("^"+b+"$",["i"]);i(c,d.test(a.path()))})()}var i=b(f.ngModel||f.routeModel||"$uiRoute").assign,j=angular.noop;switch(e){case"uiRoute":f.uiRoute?h(f.uiRoute):f.$observe("uiRoute",h);break;case"ngHref":f.ngHref?g(f.ngHref):f.$observe("ngHref",g);break;case"href":g(f.href)}c.$on("$routeChangeSuccess",function(){j()})}}}}]),angular.module("ui.directives").directive("uiScrollfix",["$window",function(a){"use strict";return{link:function(b,c,d){var e=c.offset().top;d.uiScrollfix?"-"===d.uiScrollfix.charAt(0)?d.uiScrollfix=e-d.uiScrollfix.substr(1):"+"===d.uiScrollfix.charAt(0)&&(d.uiScrollfix=e+parseFloat(d.uiScrollfix.substr(1))):d.uiScrollfix=e,angular.element(a).on("scroll.ui-scrollfix",function(){var b;if(angular.isDefined(a.pageYOffset))b=a.pageYOffset;else{var e=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;b=e.scrollTop}!c.hasClass("ui-scrollfix")&&b>d.uiScrollfix?c.addClass("ui-scrollfix"):c.hasClass("ui-scrollfix")&&b<d.uiScrollfix&&c.removeClass("ui-scrollfix")})}}}]),angular.module("ui.directives").directive("uiSelect2",["ui.config","$timeout",function(a,b){var c={};return a.select2&&angular.extend(c,a.select2),{require:"?ngModel",compile:function(a,d){var e,f,g,h=a.is("select"),i=void 0!==d.multiple;return a.is("select")&&(f=a.find("option[ng-repeat], option[data-ng-repeat]"),f.length&&(g=f.attr("ng-repeat")||f.attr("data-ng-repeat"),e=jQuery.trim(g.split("|")[0]).split(" ").pop())),function(a,d,f,g){var j=angular.extend({},c,a.$eval(f.uiSelect2));if(h?(delete j.multiple,delete j.initSelection):i&&(j.multiple=!0),g&&(g.$render=function(){h?d.select2("val",g.$modelValue):i?g.$modelValue?angular.isArray(g.$modelValue)?d.select2("data",g.$modelValue):d.select2("val",g.$modelValue):d.select2("data",[]):angular.isObject(g.$modelValue)?d.select2("data",g.$modelValue):d.select2("val",g.$modelValue)},e&&a.$watch(e,function(a){a&&b(function(){d.select2("val",g.$viewValue),d.trigger("change")})}),!h&&(d.bind("change",function(){a.$apply(function(){g.$setViewValue(d.select2("data"))})}),j.initSelection))){var k=j.initSelection;j.initSelection=function(a,b){k(a,function(a){g.$setViewValue(a),b(a)})}}f.$observe("disabled",function(a){d.select2(a&&"disable"||"enable")}),f.ngMultiple&&a.$watch(f.ngMultiple,function(){d.select2(j)}),d.val(a.$eval(f.ngModel)),b(function(){d.select2(j),j.initSelection||h||g.$setViewValue(d.select2("data"))})}}}}]),angular.module("ui.directives").directive("uiShow",[function(){return function(a,b,c){a.$watch(c.uiShow,function(a){a?b.addClass("ui-show"):b.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(a,b,c){a.$watch(c.uiHide,function(a){a?b.addClass("ui-hide"):b.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(a,b,c){a.$watch(c.uiToggle,function(a){a?b.removeClass("ui-hide").addClass("ui-show"):b.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.directives").directive("uiSortable",["ui.config",function(a){return{require:"?ngModel",link:function(b,c,d,e){var f,g,h,i,j,k,l,m,n;j=angular.extend({},a.sortable,b.$eval(d.uiSortable)),e&&(e.$render=function(){c.sortable("refresh")},h=function(a,b){b.item.sortable={index:b.item.index()}},i=function(a,b){b.item.sortable.resort=e},f=function(a,b){b.item.sortable.relocate=!0,e.$modelValue.splice(b.item.index(),0,b.item.sortable.moved)},g=function(a,b){b.item.sortable.moved=1===e.$modelValue.length?e.$modelValue.splice(0,1)[0]:e.$modelValue.splice(b.item.sortable.index,1)[0]},onStop=function(a,c){if(c.item.sortable.resort&&!c.item.sortable.relocate){var d,e;e=c.item.sortable.index,d=c.item.index(),d>e&&d--,c.item.sortable.resort.$modelValue.splice(d,0,c.item.sortable.resort.$modelValue.splice(e,1)[0])}(c.item.sortable.resort||c.item.sortable.relocate)&&b.$apply()},m=j.start,j.start=function(a,b){h(a,b),"function"==typeof m&&m(a,b)},_stop=j.stop,j.stop=function(a,b){onStop(a,b),"function"==typeof _stop&&_stop(a,b)},n=j.update,j.update=function(a,b){i(a,b),"function"==typeof n&&n(a,b)},k=j.receive,j.receive=function(a,b){f(a,b),"function"==typeof k&&k(a,b)},l=j.remove,j.remove=function(a,b){g(a,b),"function"==typeof l&&l(a,b)}),c.sortable(j)}}}]),angular.module("ui.directives").directive("uiTinymce",["ui.config",function(a){return a.tinymce=a.tinymce||{},{require:"ngModel",link:function(b,c,d,e){var f,g={onchange_callback:function(a){a.isDirty()&&(a.save(),e.$setViewValue(c.val()),b.$$phase||b.$apply())},handle_event_callback:function(){return this.isDirty()&&(this.save(),e.$setViewValue(c.val()),b.$$phase||b.$apply()),!0},setup:function(a){a.onSetContent.add(function(a){a.isDirty()&&(a.save(),e.$setViewValue(c.val()),b.$$phase||b.$apply())})}};f=d.uiTinymce?b.$eval(d.uiTinymce):{},angular.extend(g,a.tinymce,f),setTimeout(function(){c.tinymce(g)})}}}]),angular.module("ui.directives").directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e,f,g={},h=a.$eval(c.uiValidate);h&&(angular.isString(h)&&(h={validator:h}),angular.forEach(h,function(b,c){e=function(e){return a.$eval(b,{$value:e})?(d.$setValidity(c,!0),e):void d.$setValidity(c,!1)},g[c]=e,d.$formatters.push(e),d.$parsers.push(e)}),c.uiValidateWatch&&(f=a.$eval(c.uiValidateWatch),angular.isString(f)?a.$watch(f,function(){angular.forEach(g,function(a){a(d.$modelValue)})}):angular.forEach(f,function(b,c){a.$watch(b,function(){g[c](d.$modelValue)})})))}}}),angular.module("ui.filters").filter("format",function(){return function(a,b){if(!a)return a;var c,d=a.toString();return void 0===b?d:angular.isArray(b)||angular.isObject(b)?(c=angular.isArray(b)&&"$"||":",angular.forEach(b,function(a,b){d=d.split(c+b).join(a)}),d):d.split("$0").join(b)}}),angular.module("ui.filters").filter("highlight",function(){return function(a,b,c){return b||angular.isNumber(b)?(a=a.toString(),b=b.toString(),c?a.split(b).join('<span class="ui-match">'+b+"</span>"):a.replace(new RegExp(b,"gi"),'<span class="ui-match">$&</span>')):a}}),angular.module("ui.filters").filter("inflector",function(){function a(a){return a.replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})}function b(a,b){return a.replace(/[A-Z]/g,function(a){return b+a})}var c={humanize:function(c){return a(b(c," ").split("_").join(" "))},underscore:function(a){return a.substr(0,1).toLowerCase()+b(a.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(b){return b=b.substr(0,1).toLowerCase()+a(b.split("_").join(" ")).substr(1).split(" ").join("")}};return function(a,b){return b!==!1&&angular.isString(a)?(b=b||"humanize",c[b](a)):a}}),angular.module("ui.filters").filter("unique",function(){return function(a,b){if(b===!1)return a;if((b||angular.isUndefined(b))&&angular.isArray(a)){var c=[],d=function(a){return angular.isObject(a)&&angular.isString(b)?a[b]:a};angular.forEach(a,function(a){for(var b=!1,e=0;e<c.length;e++)if(angular.equals(d(c[e]),d(a))){b=!0;break}b||c.push(a)}),a=c}return a}}),angular.module("ui.bootstrap",["ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.datepicker","ui.bootstrap.dialog","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.position","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){var b=function(a,b,c){b.removeClass("collapse"),b.css({height:c}),b[0].offsetWidth,b.addClass("collapse")};return{link:function(c,d,e){var f,g=!0;c.$watch(function(){return d[0].scrollHeight},function(){0!==d[0].scrollHeight&&(f||(g?b(c,d,d[0].scrollHeight+"px"):b(c,d,"auto")))}),c.$watch(e.collapse,function(a){a?k():j()});var h,i=function(b){return h&&h.cancel(),h=a(d,b),h.then(function(){h=void 0},function(){h=void 0}),h},j=function(){g?(g=!1,f||b(c,d,"auto")):i({height:d[0].scrollHeight+"px"}).then(function(){f||b(c,d,"auto")}),f=!1},k=function(){f=!0,g?(g=!1,b(c,d,0)):(b(c,d,d[0].scrollHeight+"px"),i({height:"0"}))}}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse","$transition","$timeout",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:["$scope",function(){this.setHeading=function(a){this.heading=a}}],link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$watch(function(){return f(b.$parent)},function(a){b.isOpen=a}),b.isOpen=f?f(b.$parent):!1),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).directive("alert",function(){return{restrict:"EA",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"},link:function(a,b,c){a.closeable="close"in c}}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).directive("btnRadio",["buttonConfig",function(a){var b=a.activeClass||"active",c=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,e,f){f.$render=function(){d.toggleClass(b,angular.equals(f.$modelValue,a.$eval(e.btnRadio)))},d.bind(c,function(){d.hasClass(b)||a.$apply(function(){f.$setViewValue(a.$eval(e.btnRadio)),f.$render()})})}}}]).directive("btnCheckbox",["buttonConfig",function(a){var b=a.activeClass||"active",c=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,e,f){var g=a.$eval(e.btnCheckboxTrue),h=a.$eval(e.btnCheckboxFalse);g=angular.isDefined(g)?g:!0,h=angular.isDefined(h)?h:!1,f.$render=function(){d.toggleClass(b,angular.equals(f.$modelValue,g))},d.bind(c,function(){a.$apply(function(){f.$setViewValue(d.hasClass(b)?h:g),f.$render()})})}}}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){function c(){f?(a.next(),d()):a.pause()}e&&b.cancel(e);var g=+a.interval;!isNaN(g)&&g>=0&&(e=b(c,g))}var e,f,g=this,h=g.slides=[],i=-1;g.currentSlide=null,g.select=function(e,f){function j(){g.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element?(e.$element.addClass(f),e.$element[0].offsetWidth=e.$element[0].offsetWidth,angular.forEach(h,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(g.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){k(b,c)},function(){k(b,c)})}(e,g.currentSlide)):k(e,g.currentSlide),g.currentSlide=e,i=l,d()}function k(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var l=h.indexOf(e);void 0===f&&(f=l>i?"next":"prev"),e&&e!==g.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(j)):j())},g.indexOfSlide=function(a){return h.indexOf(a)},a.next=function(){var b=(i+1)%h.length;return a.$currentTransition?void 0:g.select(h[b],"next")},a.prev=function(){var b=0>i-1?h.length-1:i-1;
return a.$currentTransition?void 0:g.select(h[b],"prev")},a.select=function(a){g.select(a)},a.isActive=function(a){return g.currentSlide===a},a.slides=function(){return h},a.$watch("interval",d),a.play=function(){f||(f=!0,d())},a.pause=function(){a.noPause||(f=!1,e&&b.cancel(e))},g.addSlide=function(b,c){b.$element=c,h.push(b),1===h.length||b.active?(g.select(h[h.length-1]),1==h.length&&a.play()):b.active=!1},g.removeSlide=function(a){var b=h.indexOf(a);h.splice(b,1),h.length>0&&a.active?g.select(b>=h.length?h[b-1]:h[b]):i>b&&i--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.datepicker",[]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20}).directive("datepicker",["dateFilter","$parse","datepickerConfig",function(a,b,c){return{restrict:"EA",replace:!0,scope:{model:"=ngModel",dateDisabled:"&"},templateUrl:"template/datepicker/datepicker.html",link:function(d,e,f){function g(a,b,c){d.rows=a,d.labels=b,d.title=c}function h(){d.showWeekNumbers="day"===d.mode&&l}function j(a,b){return"year"===d.mode?b.getFullYear()-a.getFullYear():"month"===d.mode?new Date(b.getFullYear(),b.getMonth())-new Date(a.getFullYear(),a.getMonth()):"day"===d.mode?new Date(b.getFullYear(),b.getMonth(),b.getDate())-new Date(a.getFullYear(),a.getMonth(),a.getDate()):void 0}function k(a){return m&&j(a,m)>0||n&&0>j(a,n)||d.dateDisabled&&d.dateDisabled({date:a,mode:d.mode})}d.mode="day";var l,m,n,o=new Date,p={};p.day=angular.isDefined(f.dayFormat)?d.$eval(f.dayFormat):c.dayFormat,p.month=angular.isDefined(f.monthFormat)?d.$eval(f.monthFormat):c.monthFormat,p.year=angular.isDefined(f.yearFormat)?d.$eval(f.yearFormat):c.yearFormat,p.dayHeader=angular.isDefined(f.dayHeaderFormat)?d.$eval(f.dayHeaderFormat):c.dayHeaderFormat,p.dayTitle=angular.isDefined(f.dayTitleFormat)?d.$eval(f.dayTitleFormat):c.dayTitleFormat,p.monthTitle=angular.isDefined(f.monthTitleFormat)?d.$eval(f.monthTitleFormat):c.monthTitleFormat;var q=angular.isDefined(f.startingDay)?d.$eval(f.startingDay):c.startingDay,r=angular.isDefined(f.yearRange)?d.$eval(f.yearRange):c.yearRange;f.showWeeks?d.$parent.$watch(b(f.showWeeks),function(a){l=!!a,h()}):(l=c.showWeeks,h()),f.min&&d.$parent.$watch(b(f.min),function(a){m=new Date(a),v()}),f.max&&d.$parent.$watch(b(f.max),function(a){n=new Date(a),v()});var s=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},t=function(a,b){return new Date(a,b+1,0).getDate()},u={day:function(){function b(b,d,f){for(var g=0;d>g;g++)c.push({date:new Date(b),isCurrent:f,isSelected:w(b),label:a(b,p.day),disabled:k(b)}),b.setDate(b.getDate()+1);e=b}var c=[],d=[],e=null,f=new Date(o);f.setDate(1);var h=q-f.getDay(),j=h>0?7-h:-h;for(j>0&&(f.setDate(-j+1),b(f,j,!1)),b(e||f,t(o.getFullYear(),o.getMonth()),!0),b(e,(7-c.length%7)%7,!1),i=0;7>i;i++)d.push(a(c[i].date,p.dayHeader));g(s(c,7),d,a(o,p.dayTitle))},month:function(){for(var b=[],c=0,d=o.getFullYear();12>c;){var e=new Date(d,c++,1);b.push({date:e,isCurrent:!0,isSelected:w(e),label:a(e,p.month),disabled:k(e)})}g(s(b,3),[],a(o,p.monthTitle))},year:function(){for(var b=[],c=parseInt((o.getFullYear()-1)/r,10)*r+1,d=0;r>d;d++){var e=new Date(c+d,0,1);b.push({date:e,isCurrent:!0,isSelected:w(e),label:a(e,p.year),disabled:k(e)})}var f=b[0].label+" - "+b[b.length-1].label;g(s(b,5),[],f)}},v=function(){u[d.mode]()},w=function(a){if(d.model&&d.model.getFullYear()===a.getFullYear()){if("year"===d.mode)return!0;if(d.model.getMonth()===a.getMonth())return"month"===d.mode||"day"===d.mode&&d.model.getDate()===a.getDate()}return!1};d.$watch("model",function(a,b){angular.isDate(a)&&(o=angular.copy(a)),angular.equals(a,b)||v()}),d.$watch("mode",function(){h(),v()}),d.select=function(a){o=new Date(a),"year"===d.mode?(d.mode="month",o.setFullYear(a.getFullYear())):"month"===d.mode?(d.mode="day",o.setMonth(a.getMonth())):"day"===d.mode&&(d.model=new Date(o))},d.move=function(a){"day"===d.mode?o.setMonth(o.getMonth()+a):"month"===d.mode?o.setFullYear(o.getFullYear()+a):"year"===d.mode&&o.setFullYear(o.getFullYear()+a*r),v()},d.toggleMode=function(){d.mode="day"===d.mode?"month":"month"===d.mode?"year":"day"},d.getWeekNumber=function(a){if("day"===d.mode&&d.showWeekNumbers&&7===a.length){var b=q>4?11-q:4-q,c=new Date(a[b].date);return c.setHours(0,0,0),Math.ceil(((c-new Date(c.getFullYear(),0,1))/864e5+1)/7)}}}}}]);var dialogModule=angular.module("ui.bootstrap.dialog",["ui.bootstrap.transition"]);dialogModule.controller("MessageBoxController",["$scope","dialog","model",function(a,b,c){a.title=c.title,a.message=c.message,a.buttons=c.buttons,a.close=function(a){b.close(a)}}]),dialogModule.provider("$dialog",function(){var a={backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",resolve:{},backdropFade:!1,dialogFade:!1,keyboard:!0,backdropClick:!0},b={},c={value:0};this.options=function(a){b=a},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function(d,e,f,g,h,i,j,k,l){function m(a){var b=angular.element("<div>");return b.addClass(a),b}function n(c){var d=this,e=this.options=angular.extend({},a,b,c);this._open=!1,this.backdropEl=m(e.backdropClass),e.backdropFade&&(this.backdropEl.addClass(e.transitionClass),this.backdropEl.removeClass(e.triggerClass)),this.modalEl=m(e.dialogClass),e.dialogFade&&(this.modalEl.addClass(e.transitionClass),this.modalEl.removeClass(e.triggerClass)),this.handledEscapeKey=function(a){27===a.which&&(d.close(),a.preventDefault(),d.$scope.$apply())},this.handleBackDropClick=function(a){d.close(),a.preventDefault(),d.$scope.$apply()},this.handleLocationChange=function(){d.close()}}var o=e.find("body");return n.prototype.isOpen=function(){return this._open},n.prototype.open=function(a,b){var c=this,d=this.options;if(a&&(d.templateUrl=a),b&&(d.controller=b),!d.template&&!d.templateUrl)throw Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(a){var b=a.$scope=c.$scope=a.$scope?a.$scope:g.$new();if(c.modalEl.html(a.$template),c.options.controller){var d=h(c.options.controller,a);c.modalEl.children().data("ngControllerController",d)}f(c.modalEl)(b),c._addElementsToDom(),setTimeout(function(){c.options.dialogFade&&c.modalEl.addClass(c.options.triggerClass),c.options.backdropFade&&c.backdropEl.addClass(c.options.triggerClass)}),c._bindEvents()}),this.deferred=j.defer(),this.deferred.promise},n.prototype.close=function(a){function b(a){a.removeClass(d.options.triggerClass)}function c(){d._open&&d._onCloseComplete(a)}var d=this,e=this._getFadingElements();if(e.length>0)for(var f=e.length-1;f>=0;f--)k(e[f],b).then(c);else this._onCloseComplete(a)},n.prototype._getFadingElements=function(){var a=[];return this.options.dialogFade&&a.push(this.modalEl),this.options.backdropFade&&a.push(this.backdropEl),a},n.prototype._bindEvents=function(){this.options.keyboard&&o.bind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.bind("click",this.handleBackDropClick)},n.prototype._unbindEvents=function(){this.options.keyboard&&o.unbind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.unbind("click",this.handleBackDropClick)},n.prototype._onCloseComplete=function(a){this._removeElementsFromDom(),this._unbindEvents(),this.deferred.resolve(a)},n.prototype._addElementsToDom=function(){o.append(this.modalEl),this.options.backdrop&&(0===c.value&&o.append(this.backdropEl),c.value++),this._open=!0},n.prototype._removeElementsFromDom=function(){this.modalEl.remove(),this.options.backdrop&&(c.value--,0===c.value&&this.backdropEl.remove()),this._open=!1},n.prototype._loadResolves=function(){var a,b=[],c=[],e=this;return this.options.template?a=j.when(this.options.template):this.options.templateUrl&&(a=d.get(this.options.templateUrl,{cache:i}).then(function(a){return a.data})),angular.forEach(this.options.resolve||[],function(a,d){c.push(d),b.push(angular.isString(a)?l.get(a):l.invoke(a))}),c.push("$template"),b.push(a),j.all(b).then(function(a){var b={};return angular.forEach(a,function(a,d){b[c[d]]=a}),b.dialog=e,b})},{dialog:function(a){return new n(a)},messageBox:function(a,b,c){return new n({templateUrl:"template/dialog/message.html",controller:"MessageBoxController",resolve:{model:function(){return{title:a,message:b,buttons:c}}}})}}}]}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.dialog"]).directive("modal",["$parse","$dialog",function(a,b){return{restrict:"EA",terminal:!0,link:function(c,d,e){var f,g=angular.extend({},c.$eval(e.uiOptions||e.bsOptions||e.options)),h=e.modal||e.show;g=angular.extend(g,{template:d.html(),resolve:{$scope:function(){return c}}});var i=b.dialog(g);d.remove(),f=e.close?function(){a(e.close)(c)}:function(){angular.isFunction(a(h).assign)&&a(h).assign(c,!1)},c.$watch(h,function(a){a?i.open().then(function(){f()}):i.isOpen()&&i.close()})}}}]),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope",function(a){a.noPrevious=function(){return 1===a.currentPage},a.noNext=function(){return a.currentPage===a.numPages},a.isActive=function(b){return a.currentPage===b},a.selectPage=function(b){!a.isActive(b)&&b>0&&a.numPages>=b&&(a.currentPage=b,a.onSelectPage({page:b}))}}]).constant("paginationConfig",{boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["paginationConfig",function(a){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",maxSize:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(b,c,d){function e(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var f=angular.isDefined(d.boundaryLinks)?b.$eval(d.boundaryLinks):a.boundaryLinks,g=angular.isDefined(d.directionLinks)?b.$eval(d.directionLinks):a.directionLinks,h=angular.isDefined(d.firstText)?b.$parent.$eval(d.firstText):a.firstText,i=angular.isDefined(d.previousText)?b.$parent.$eval(d.previousText):a.previousText,j=angular.isDefined(d.nextText)?b.$parent.$eval(d.nextText):a.nextText,k=angular.isDefined(d.lastText)?b.$parent.$eval(d.lastText):a.lastText,l=angular.isDefined(d.rotate)?b.$eval(d.rotate):a.rotate;b.$watch("numPages + currentPage + maxSize",function(){b.pages=[];var a=1,c=b.numPages,d=angular.isDefined(b.maxSize)&&b.maxSize<b.numPages;d&&(l?(a=Math.max(b.currentPage-Math.floor(b.maxSize/2),1),c=a+b.maxSize-1,c>b.numPages&&(c=b.numPages,a=c-b.maxSize+1)):(a=(Math.ceil(b.currentPage/b.maxSize)-1)*b.maxSize+1,c=Math.min(a+b.maxSize-1,b.numPages)));for(var m=a;c>=m;m++){var n=e(m,m,b.isActive(m),!1);b.pages.push(n)}if(d&&!l){if(a>1){var o=e(a-1,"...",!1,!1);b.pages.unshift(o)}if(b.numPages>c){var p=e(c+1,"...",!1,!1);b.pages.push(p)}}if(g){var q=e(b.currentPage-1,i,!1,b.noPrevious());b.pages.unshift(q);var r=e(b.currentPage+1,j,!1,b.noNext());b.pages.push(r)}if(f){var s=e(1,h,!1,b.noPrevious());b.pages.unshift(s);var t=e(b.numPages,k,!1,b.noNext());b.pages.push(t)}b.currentPage>b.numPages&&b.selectPage(b.numPages)})}}}]).constant("pagerConfig",{previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d){function e(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:h&&d,next:h&&e}}var f=angular.isDefined(d.previousText)?b.$parent.$eval(d.previousText):a.previousText,g=angular.isDefined(d.nextText)?b.$parent.$eval(d.nextText):a.nextText,h=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align;b.$watch("numPages + currentPage",function(){b.pages=[];var a=e(b.currentPage-1,f,b.noPrevious(),!0,!1);b.pages.unshift(a);var c=e(b.currentPage+1,g,b.noNext(),!1,!0);b.pages.push(c),b.currentPage>b.numPages&&b.selectPage(b.numPages)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e,f;a.bind("mousemove",function(a){e=a.pageX,f=a.pageY});var g=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},e=g(b[0]);return e!=a[0]&&(d=this.offset(angular.element(e)),d.top+=e.clientTop,d.left+=e.clientLeft),{width:b.prop("offsetWidth"),height:b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:c.prop("offsetWidth"),height:c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft)}},mouse:function(){return{x:e,y:f}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b,d;return b=a||o.trigger||m,d=angular.isDefined(o.trigger)?c[o.trigger]||b:c[b]||b,{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=n(void 0),r=k.startSymbol(),s=k.endSymbol(),t="<"+p+'-popup title="'+r+"tt_title"+s+'" content="'+r+"tt_content"+s+'" placement="'+r+"tt_placement"+s+'" animation="tt_animation()" is-open="tt_isOpen"></'+p+"-popup>";return{restrict:"EA",scope:!0,link:function(a,b,c){function d(){a.tt_isOpen?m():k()}function k(){a.tt_popupDelay?u=g(p,a.tt_popupDelay):a.$apply(p)}function m(){a.$apply(function(){r()})}function p(){var c,d,e,f;if(a.tt_content){switch(s&&g.cancel(s),w.css({top:0,left:0,display:"block"}),x?(v=v||i.find("body"),v.append(w)):b.after(w),c=o.appendToBody?j.offset(b):j.position(b),d=w.prop("offsetWidth"),e=w.prop("offsetHeight"),a.tt_placement){case"mouse":var h=j.mouse();f={top:h.y,left:h.x};break;case"right":f={top:c.top+c.height/2-e/2,left:c.left+c.width};break;case"bottom":f={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"left":f={top:c.top+c.height/2-e/2,left:c.left-d};break;default:f={top:c.top-e,left:c.left+c.width/2-d/2}}f.top+="px",f.left+="px",w.css(f),a.tt_isOpen=!0}}function r(){a.tt_isOpen=!1,g.cancel(u),angular.isDefined(a.tt_animation)&&a.tt_animation()?s=g(function(){w.remove()},500):w.remove()}var s,u,v,w=f(t)(a),x=angular.isDefined(o.appendToBody)?o.appendToBody:!1;a.tt_isOpen=!1,c.$observe(e,function(b){a.tt_content=b}),c.$observe(l+"Title",function(b){a.tt_title=b}),c.$observe(l+"Placement",function(b){a.tt_placement=angular.isDefined(b)?b:o.placement}),c.$observe(l+"Animation",function(b){a.tt_animation=angular.isDefined(b)?h(b):function(){return o.animation}}),c.$observe(l+"PopupDelay",function(b){var c=parseInt(b,10);a.tt_popupDelay=isNaN(c)?o.popupDelay:c}),c.$observe(l+"Trigger",function(a){b.unbind(q.show),b.unbind(q.hide),q=n(a),q.show===q.hide?b.bind(q.show,d):(b.bind(q.show,k),b.bind(q.hide,m))}),c.$observe(l+"AppendToBody",function(b){x=angular.isDefined(b)?h(b)(a):x}),x&&a.$on("$locationChangeSuccess",function(){a.tt_isOpen&&r()}),a.$on("$destroy",function(){a.tt_isOpen?r():w.remove()})}}}}]}).directive("tooltipPopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$compile","$timeout","$parse","$window","$tooltip",function(a,b,c,d,e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,autoType:!1,stackedTypes:["success","info","warning","danger"]}).controller("ProgressBarController",["$scope","$attrs","progressConfig",function(a,b,c){function d(a){return g[a]}var e=angular.isDefined(b.animate)?a.$eval(b.animate):c.animate,f=angular.isDefined(b.autoType)?a.$eval(b.autoType):c.autoType,g=angular.isDefined(b.stackedTypes)?a.$eval("["+b.stackedTypes+"]"):c.stackedTypes;this.makeBar=function(a,b,c){var g=angular.isObject(a)?a.value:a||0,h=angular.isObject(b)?b.value:b||0,i=angular.isObject(a)&&angular.isDefined(a.type)?a.type:f?d(c||0):null;return{from:h,to:g,type:i,animate:e}},this.addBar=function(b){a.bars.push(b),a.totalPercent+=b.to},this.clearBars=function(){a.bars=[],a.totalPercent=0},this.clearBars()}]).directive("progress",function(){return{restrict:"EA",replace:!0,controller:"ProgressBarController",scope:{value:"=percent",onFull:"&",onEmpty:"&"},templateUrl:"template/progressbar/progress.html",link:function(a,b,c,d){a.$watch("value",function(a,b){if(d.clearBars(),angular.isArray(a))for(var c=0,e=a.length;e>c;c++)d.addBar(d.makeBar(a[c],b[c],c));else d.addBar(d.makeBar(a,b))},!0),a.$watch("totalPercent",function(b){b>=100?a.onFull():0>=b&&a.onEmpty()},!0)}}}).directive("progressbar",["$transition",function(a){return{restrict:"EA",replace:!0,scope:{width:"=",old:"=",type:"=",animate:"="},templateUrl:"template/progressbar/bar.html",link:function(b,c){b.$watch("width",function(d){b.animate?(c.css("width",b.old+"%"),a(c,{width:d+"%"})):c.css("width",d+"%")})}}}]),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5}).directive("rating",["ratingConfig","$parse",function(a,b){return{restrict:"EA",scope:{value:"="},templateUrl:"template/rating/rating.html",replace:!0,link:function(c,d,e){var f=angular.isDefined(e.max)?c.$eval(e.max):a.max;c.range=[];for(var g=1;f>=g;g++)c.range.push(g);c.rate=function(a){c.readonly||(c.value=a)},c.enter=function(a){c.readonly||(c.val=a)},c.reset=function(){c.val=angular.copy(c.value)},c.reset(),c.$watch("value",function(a){c.val=a}),c.readonly=!1,e.readonly&&c.$parent.$watch(b(e.readonly),function(a){c.readonly=!!a})}}}]),angular.module("ui.bootstrap.tabs",[]).directive("tabs",function(){return function(){throw Error("The `tabs` directive is deprecated, please migrate to `tabset`. Instructions can be found at http://github.com/angular-ui/bootstrap/tree/master/CHANGELOG.md")}}).controller("TabsetController",["$scope","$element",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),1==c.length&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$eval(c.vertical):!1,a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"}}}).directive("tab",["$parse","$http","$templateCache","$compile",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;b.active=!1,e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a){a&&b.disabled?h(b.$parent,!1):b.active=!!a})):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a&&(f.select(b),b.onSelect())}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.active&&h(b.$parent,!0),d(b.$parent,function(a){var c,d=[];angular.forEach(a,function(a){a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"==a.tagName.toLowerCase()||"data-tab-heading"==a.tagName.toLowerCase())?c=a:d.push(a)}),c&&(b.headingElement=angular.element(c)),b.contentElement=angular.element(d)})}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",["$parse",function(a){return{restrict:"A",require:"^tabset",link:function(b,c,d){b.$watch(a(d.tabContentTransclude),function(a){c.html(""),a&&c.append(a.contentElement)})}}}]),angular.module("ui.bootstrap.timepicker",[]).filter("pad",function(){return function(a){return angular.isDefined(a)&&2>(""+a).length&&(a="0"+a),a}}).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:["AM","PM"],readonlyInput:!1,mousewheel:!0}).directive("timepicker",["padFilter","$parse","timepickerConfig",function(a,b,c){return{restrict:"EA",require:"ngModel",replace:!0,templateUrl:"template/timepicker/timepicker.html",scope:{model:"=ngModel"},link:function(d,e,f){function g(){var a=parseInt(d.hours,10),b=d.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(d.showMeridian&&(12===a&&(a=0),d.meridian===k[1]&&(a+=12)),a):void 0}function h(){var b=j.getHours();d.showMeridian&&(b=0===b||12===b?12:b%12),d.hours="h"===s?b:a(b),d.validHours=!0;var c=j.getMinutes();d.minutes="m"===s?c:a(c),d.validMinutes=!0,d.meridian=d.showMeridian?12>j.getHours()?k[0]:k[1]:"",s=!1}function i(a){var b=new Date(j.getTime()+6e4*a);b.getDate()!==j.getDate()&&b.setDate(b.getDate()-1),j.setTime(b.getTime()),d.model=new Date(j)}var j=new Date,k=c.meridians,l=c.hourStep;f.hourStep&&d.$parent.$watch(b(f.hourStep),function(a){l=parseInt(a,10)});var m=c.minuteStep;f.minuteStep&&d.$parent.$watch(b(f.minuteStep),function(a){m=parseInt(a,10)}),d.showMeridian=c.showMeridian,f.showMeridian&&d.$parent.$watch(b(f.showMeridian),function(a){if(d.showMeridian=!!a,d.model)h();else{var b=new Date(j),c=g();angular.isDefined(c)&&b.setHours(c),d.model=new Date(b)}});var n=e.find("input"),o=n.eq(0),p=n.eq(1),q=angular.isDefined(f.mousewheel)?d.$eval(f.mousewheel):c.mousewheel;if(q){var r=function(a){return a.originalEvent&&(a=a.originalEvent),a.detail||a.wheelDelta>0};o.bind("mousewheel",function(a){d.$apply(r(a)?d.incrementHours():d.decrementHours()),a.preventDefault()}),p.bind("mousewheel",function(a){d.$apply(r(a)?d.incrementMinutes():d.decrementMinutes()),a.preventDefault()})}var s=!1;d.readonlyInput=angular.isDefined(f.readonlyInput)?d.$eval(f.readonlyInput):c.readonlyInput,d.readonlyInput?(d.updateHours=angular.noop,d.updateMinutes=angular.noop):(d.updateHours=function(){var a=g();angular.isDefined(a)?(s="h",null===d.model&&(d.model=new Date(j)),d.model.setHours(a)):(d.model=null,d.validHours=!1)},o.bind("blur",function(){d.validHours&&10>d.hours&&d.$apply(function(){d.hours=a(d.hours)})}),d.updateMinutes=function(){var a=parseInt(d.minutes,10);a>=0&&60>a?(s="m",null===d.model&&(d.model=new Date(j)),d.model.setMinutes(a)):(d.model=null,d.validMinutes=!1)},p.bind("blur",function(){d.validMinutes&&10>d.minutes&&d.$apply(function(){d.minutes=a(d.minutes)})})),d.$watch(function(){return+d.model},function(a){!isNaN(a)&&a>0&&(j=new Date(a),h())}),d.incrementHours=function(){i(60*l)},d.decrementHours=function(){i(60*-l)},d.incrementMinutes=function(){i(m)},d.decrementMinutes=function(){i(-m)},d.toggleMeridian=function(){i(720*(12>j.getHours()?1:-1))}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=g.parse(k.typeahead),q=i.$eval(k.typeaheadEditable)!==!1,r=b(k.typeaheadLoading).assign||angular.noop,s=b(k.typeaheadOnSelect),t=angular.element("<typeahead-popup></typeahead-popup>");t.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"});var u=i.$new();i.$on("$destroy",function(){u.$destroy()});var v=function(){u.matches=[],u.activeIdx=-1},w=function(a){var b={$viewValue:a};r(i,!0),c.when(p.source(u,b)).then(function(c){if(a===l.$viewValue){if(c.length>0){u.activeIdx=0,u.matches.length=0;for(var d=0;c.length>d;d++)b[p.itemName]=c[d],u.matches.push({label:p.viewMapper(u,b),model:c[d]});u.query=a,u.position=f.position(j),u.position.top=u.position.top+j.prop("offsetHeight")}else v();r(i,!1)}},function(){v(),r(i,!1)})};v(),u.query=void 0,l.$parsers.push(function(a){var b;return v(),m?a:(a&&a.length>=n&&(o>0?(b&&d.cancel(b),b=d(function(){w(a)},o)):w(a)),q?a:void 0)}),l.$render=function(){var a={};a[p.itemName]=m||l.$viewValue,j.val(p.viewMapper(u,a)||l.$viewValue),m=void 0},u.select=function(a){var b,c,d={};d[p.itemName]=c=m=u.matches[a].model,b=p.modelMapper(u,d),l.$setViewValue(b),l.$render(),s(u,{$item:c,$model:b,$label:p.viewMapper(u,d)}),j[0].focus()},j.bind("keydown",function(a){0!==u.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(u.activeIdx=(u.activeIdx+1)%u.matches.length,u.$digest()):38===a.which?(u.activeIdx=(u.activeIdx?u.activeIdx:u.matches.length)-1,u.$digest()):13===a.which||9===a.which?u.$apply(function(){u.select(u.activeIdx)}):27===a.which&&(a.stopPropagation(),v(),u.$digest()))}),e.bind("click",function(){v(),u.$digest()}),j.after(a(t)(u))}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead.html",link:function(a){a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(RegExp(a(c),"gi"),"<strong>$&</strong>"):c}}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.datepicker","ui.bootstrap.dialog","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.position","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/dialog/message.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){var b=function(a,b,c){b.removeClass("collapse"),b.css({height:c}),b[0].offsetWidth,b.addClass("collapse")};return{link:function(c,d,e){var f,g=!0;c.$watch(function(){return d[0].scrollHeight},function(){0!==d[0].scrollHeight&&(f||(g?b(c,d,d[0].scrollHeight+"px"):b(c,d,"auto")))}),c.$watch(e.collapse,function(a){a?k():j()});var h,i=function(b){return h&&h.cancel(),h=a(d,b),h.then(function(){h=void 0},function(){h=void 0}),h},j=function(){g?(g=!1,f||b(c,d,"auto")):i({height:d[0].scrollHeight+"px"}).then(function(){f||b(c,d,"auto")}),f=!1},k=function(){f=!0,g?(g=!1,b(c,d,0)):(b(c,d,d[0].scrollHeight+"px"),i({height:"0"}))}}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}
}).directive("accordionGroup",["$parse","$transition","$timeout",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:["$scope",function(){this.setHeading=function(a){this.heading=a}}],link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$watch(function(){return f(b.$parent)},function(a){b.isOpen=a}),b.isOpen=f?f(b.$parent):!1),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).directive("alert",function(){return{restrict:"EA",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"},link:function(a,b,c){a.closeable="close"in c}}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).directive("btnRadio",["buttonConfig",function(a){var b=a.activeClass||"active",c=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,e,f){f.$render=function(){d.toggleClass(b,angular.equals(f.$modelValue,a.$eval(e.btnRadio)))},d.bind(c,function(){d.hasClass(b)||a.$apply(function(){f.$setViewValue(a.$eval(e.btnRadio)),f.$render()})})}}}]).directive("btnCheckbox",["buttonConfig",function(a){var b=a.activeClass||"active",c=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,e,f){var g=a.$eval(e.btnCheckboxTrue),h=a.$eval(e.btnCheckboxFalse);g=angular.isDefined(g)?g:!0,h=angular.isDefined(h)?h:!1,f.$render=function(){d.toggleClass(b,angular.equals(f.$modelValue,g))},d.bind(c,function(){a.$apply(function(){f.$setViewValue(d.hasClass(b)?h:g),f.$render()})})}}}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){function c(){f?(a.next(),d()):a.pause()}e&&b.cancel(e);var g=+a.interval;!isNaN(g)&&g>=0&&(e=b(c,g))}var e,f,g=this,h=g.slides=[],i=-1;g.currentSlide=null,g.select=function(e,f){function j(){g.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element?(e.$element.addClass(f),e.$element[0].offsetWidth=e.$element[0].offsetWidth,angular.forEach(h,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(g.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){k(b,c)},function(){k(b,c)})}(e,g.currentSlide)):k(e,g.currentSlide),g.currentSlide=e,i=l,d()}function k(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var l=h.indexOf(e);void 0===f&&(f=l>i?"next":"prev"),e&&e!==g.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(j)):j())},g.indexOfSlide=function(a){return h.indexOf(a)},a.next=function(){var b=(i+1)%h.length;return a.$currentTransition?void 0:g.select(h[b],"next")},a.prev=function(){var b=0>i-1?h.length-1:i-1;return a.$currentTransition?void 0:g.select(h[b],"prev")},a.select=function(a){g.select(a)},a.isActive=function(a){return g.currentSlide===a},a.slides=function(){return h},a.$watch("interval",d),a.play=function(){f||(f=!0,d())},a.pause=function(){a.noPause||(f=!1,e&&b.cancel(e))},g.addSlide=function(b,c){b.$element=c,h.push(b),1===h.length||b.active?(g.select(h[h.length-1]),1==h.length&&a.play()):b.active=!1},g.removeSlide=function(a){var b=h.indexOf(a);h.splice(b,1),h.length>0&&a.active?g.select(b>=h.length?h[b-1]:h[b]):i>b&&i--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.datepicker",[]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20}).directive("datepicker",["dateFilter","$parse","datepickerConfig",function(a,b,c){return{restrict:"EA",replace:!0,scope:{model:"=ngModel",dateDisabled:"&"},templateUrl:"template/datepicker/datepicker.html",link:function(d,e,f){function g(a,b,c){d.rows=a,d.labels=b,d.title=c}function h(){d.showWeekNumbers="day"===d.mode&&l}function j(a,b){return"year"===d.mode?b.getFullYear()-a.getFullYear():"month"===d.mode?new Date(b.getFullYear(),b.getMonth())-new Date(a.getFullYear(),a.getMonth()):"day"===d.mode?new Date(b.getFullYear(),b.getMonth(),b.getDate())-new Date(a.getFullYear(),a.getMonth(),a.getDate()):void 0}function k(a){return m&&j(a,m)>0||n&&0>j(a,n)||d.dateDisabled&&d.dateDisabled({date:a,mode:d.mode})}d.mode="day";var l,m,n,o=new Date,p={};p.day=angular.isDefined(f.dayFormat)?d.$eval(f.dayFormat):c.dayFormat,p.month=angular.isDefined(f.monthFormat)?d.$eval(f.monthFormat):c.monthFormat,p.year=angular.isDefined(f.yearFormat)?d.$eval(f.yearFormat):c.yearFormat,p.dayHeader=angular.isDefined(f.dayHeaderFormat)?d.$eval(f.dayHeaderFormat):c.dayHeaderFormat,p.dayTitle=angular.isDefined(f.dayTitleFormat)?d.$eval(f.dayTitleFormat):c.dayTitleFormat,p.monthTitle=angular.isDefined(f.monthTitleFormat)?d.$eval(f.monthTitleFormat):c.monthTitleFormat;var q=angular.isDefined(f.startingDay)?d.$eval(f.startingDay):c.startingDay,r=angular.isDefined(f.yearRange)?d.$eval(f.yearRange):c.yearRange;f.showWeeks?d.$parent.$watch(b(f.showWeeks),function(a){l=!!a,h()}):(l=c.showWeeks,h()),f.min&&d.$parent.$watch(b(f.min),function(a){m=new Date(a),v()}),f.max&&d.$parent.$watch(b(f.max),function(a){n=new Date(a),v()});var s=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},t=function(a,b){return new Date(a,b+1,0).getDate()},u={day:function(){function b(b,d,f){for(var g=0;d>g;g++)c.push({date:new Date(b),isCurrent:f,isSelected:w(b),label:a(b,p.day),disabled:k(b)}),b.setDate(b.getDate()+1);e=b}var c=[],d=[],e=null,f=new Date(o);f.setDate(1);var h=q-f.getDay(),j=h>0?7-h:-h;for(j>0&&(f.setDate(-j+1),b(f,j,!1)),b(e||f,t(o.getFullYear(),o.getMonth()),!0),b(e,(7-c.length%7)%7,!1),i=0;7>i;i++)d.push(a(c[i].date,p.dayHeader));g(s(c,7),d,a(o,p.dayTitle))},month:function(){for(var b=[],c=0,d=o.getFullYear();12>c;){var e=new Date(d,c++,1);b.push({date:e,isCurrent:!0,isSelected:w(e),label:a(e,p.month),disabled:k(e)})}g(s(b,3),[],a(o,p.monthTitle))},year:function(){for(var b=[],c=parseInt((o.getFullYear()-1)/r,10)*r+1,d=0;r>d;d++){var e=new Date(c+d,0,1);b.push({date:e,isCurrent:!0,isSelected:w(e),label:a(e,p.year),disabled:k(e)})}var f=b[0].label+" - "+b[b.length-1].label;g(s(b,5),[],f)}},v=function(){u[d.mode]()},w=function(a){if(d.model&&d.model.getFullYear()===a.getFullYear()){if("year"===d.mode)return!0;if(d.model.getMonth()===a.getMonth())return"month"===d.mode||"day"===d.mode&&d.model.getDate()===a.getDate()}return!1};d.$watch("model",function(a,b){angular.isDate(a)&&(o=angular.copy(a)),angular.equals(a,b)||v()}),d.$watch("mode",function(){h(),v()}),d.select=function(a){o=new Date(a),"year"===d.mode?(d.mode="month",o.setFullYear(a.getFullYear())):"month"===d.mode?(d.mode="day",o.setMonth(a.getMonth())):"day"===d.mode&&(d.model=new Date(o))},d.move=function(a){"day"===d.mode?o.setMonth(o.getMonth()+a):"month"===d.mode?o.setFullYear(o.getFullYear()+a):"year"===d.mode&&o.setFullYear(o.getFullYear()+a*r),v()},d.toggleMode=function(){d.mode="day"===d.mode?"month":"month"===d.mode?"year":"day"},d.getWeekNumber=function(a){if("day"===d.mode&&d.showWeekNumbers&&7===a.length){var b=q>4?11-q:4-q,c=new Date(a[b].date);return c.setHours(0,0,0),Math.ceil(((c-new Date(c.getFullYear(),0,1))/864e5+1)/7)}}}}}]);var dialogModule=angular.module("ui.bootstrap.dialog",["ui.bootstrap.transition"]);dialogModule.controller("MessageBoxController",["$scope","dialog","model",function(a,b,c){a.title=c.title,a.message=c.message,a.buttons=c.buttons,a.close=function(a){b.close(a)}}]),dialogModule.provider("$dialog",function(){var a={backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",resolve:{},backdropFade:!1,dialogFade:!1,keyboard:!0,backdropClick:!0},b={},c={value:0};this.options=function(a){b=a},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function(d,e,f,g,h,i,j,k,l){function m(a){var b=angular.element("<div>");return b.addClass(a),b}function n(c){var d=this,e=this.options=angular.extend({},a,b,c);this._open=!1,this.backdropEl=m(e.backdropClass),e.backdropFade&&(this.backdropEl.addClass(e.transitionClass),this.backdropEl.removeClass(e.triggerClass)),this.modalEl=m(e.dialogClass),e.dialogFade&&(this.modalEl.addClass(e.transitionClass),this.modalEl.removeClass(e.triggerClass)),this.handledEscapeKey=function(a){27===a.which&&(d.close(),a.preventDefault(),d.$scope.$apply())},this.handleBackDropClick=function(a){d.close(),a.preventDefault(),d.$scope.$apply()},this.handleLocationChange=function(){d.close()}}var o=e.find("body");return n.prototype.isOpen=function(){return this._open},n.prototype.open=function(a,b){var c=this,d=this.options;if(a&&(d.templateUrl=a),b&&(d.controller=b),!d.template&&!d.templateUrl)throw Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(a){var b=a.$scope=c.$scope=a.$scope?a.$scope:g.$new();if(c.modalEl.html(a.$template),c.options.controller){var d=h(c.options.controller,a);c.modalEl.children().data("ngControllerController",d)}f(c.modalEl)(b),c._addElementsToDom(),setTimeout(function(){c.options.dialogFade&&c.modalEl.addClass(c.options.triggerClass),c.options.backdropFade&&c.backdropEl.addClass(c.options.triggerClass)}),c._bindEvents()}),this.deferred=j.defer(),this.deferred.promise},n.prototype.close=function(a){function b(a){a.removeClass(d.options.triggerClass)}function c(){d._open&&d._onCloseComplete(a)}var d=this,e=this._getFadingElements();if(e.length>0)for(var f=e.length-1;f>=0;f--)k(e[f],b).then(c);else this._onCloseComplete(a)},n.prototype._getFadingElements=function(){var a=[];return this.options.dialogFade&&a.push(this.modalEl),this.options.backdropFade&&a.push(this.backdropEl),a},n.prototype._bindEvents=function(){this.options.keyboard&&o.bind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.bind("click",this.handleBackDropClick)},n.prototype._unbindEvents=function(){this.options.keyboard&&o.unbind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.unbind("click",this.handleBackDropClick)},n.prototype._onCloseComplete=function(a){this._removeElementsFromDom(),this._unbindEvents(),this.deferred.resolve(a)},n.prototype._addElementsToDom=function(){o.append(this.modalEl),this.options.backdrop&&(0===c.value&&o.append(this.backdropEl),c.value++),this._open=!0},n.prototype._removeElementsFromDom=function(){this.modalEl.remove(),this.options.backdrop&&(c.value--,0===c.value&&this.backdropEl.remove()),this._open=!1},n.prototype._loadResolves=function(){var a,b=[],c=[],e=this;return this.options.template?a=j.when(this.options.template):this.options.templateUrl&&(a=d.get(this.options.templateUrl,{cache:i}).then(function(a){return a.data})),angular.forEach(this.options.resolve||[],function(a,d){c.push(d),b.push(angular.isString(a)?l.get(a):l.invoke(a))}),c.push("$template"),b.push(a),j.all(b).then(function(a){var b={};return angular.forEach(a,function(a,d){b[c[d]]=a}),b.dialog=e,b})},{dialog:function(a){return new n(a)},messageBox:function(a,b,c){return new n({templateUrl:"template/dialog/message.html",controller:"MessageBoxController",resolve:{model:function(){return{title:a,message:b,buttons:c}}}})}}}]}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.dialog"]).directive("modal",["$parse","$dialog",function(a,b){return{restrict:"EA",terminal:!0,link:function(c,d,e){var f,g=angular.extend({},c.$eval(e.uiOptions||e.bsOptions||e.options)),h=e.modal||e.show;g=angular.extend(g,{template:d.html(),resolve:{$scope:function(){return c}}});var i=b.dialog(g);d.remove(),f=e.close?function(){a(e.close)(c)}:function(){angular.isFunction(a(h).assign)&&a(h).assign(c,!1)},c.$watch(h,function(a){a?i.open().then(function(){f()}):i.isOpen()&&i.close()})}}}]),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope",function(a){a.noPrevious=function(){return 1===a.currentPage},a.noNext=function(){return a.currentPage===a.numPages},a.isActive=function(b){return a.currentPage===b},a.selectPage=function(b){!a.isActive(b)&&b>0&&a.numPages>=b&&(a.currentPage=b,a.onSelectPage({page:b}))}}]).constant("paginationConfig",{boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["paginationConfig",function(a){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",maxSize:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(b,c,d){function e(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var f=angular.isDefined(d.boundaryLinks)?b.$eval(d.boundaryLinks):a.boundaryLinks,g=angular.isDefined(d.directionLinks)?b.$eval(d.directionLinks):a.directionLinks,h=angular.isDefined(d.firstText)?b.$parent.$eval(d.firstText):a.firstText,i=angular.isDefined(d.previousText)?b.$parent.$eval(d.previousText):a.previousText,j=angular.isDefined(d.nextText)?b.$parent.$eval(d.nextText):a.nextText,k=angular.isDefined(d.lastText)?b.$parent.$eval(d.lastText):a.lastText,l=angular.isDefined(d.rotate)?b.$eval(d.rotate):a.rotate;b.$watch("numPages + currentPage + maxSize",function(){b.pages=[];var a=1,c=b.numPages,d=angular.isDefined(b.maxSize)&&b.maxSize<b.numPages;d&&(l?(a=Math.max(b.currentPage-Math.floor(b.maxSize/2),1),c=a+b.maxSize-1,c>b.numPages&&(c=b.numPages,a=c-b.maxSize+1)):(a=(Math.ceil(b.currentPage/b.maxSize)-1)*b.maxSize+1,c=Math.min(a+b.maxSize-1,b.numPages)));for(var m=a;c>=m;m++){var n=e(m,m,b.isActive(m),!1);b.pages.push(n)}if(d&&!l){if(a>1){var o=e(a-1,"...",!1,!1);b.pages.unshift(o)}if(b.numPages>c){var p=e(c+1,"...",!1,!1);b.pages.push(p)}}if(g){var q=e(b.currentPage-1,i,!1,b.noPrevious());b.pages.unshift(q);var r=e(b.currentPage+1,j,!1,b.noNext());b.pages.push(r)}if(f){var s=e(1,h,!1,b.noPrevious());b.pages.unshift(s);var t=e(b.numPages,k,!1,b.noNext());b.pages.push(t)}b.currentPage>b.numPages&&b.selectPage(b.numPages)})}}}]).constant("pagerConfig",{previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d){function e(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:h&&d,next:h&&e}}var f=angular.isDefined(d.previousText)?b.$parent.$eval(d.previousText):a.previousText,g=angular.isDefined(d.nextText)?b.$parent.$eval(d.nextText):a.nextText,h=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align;b.$watch("numPages + currentPage",function(){b.pages=[];var a=e(b.currentPage-1,f,b.noPrevious(),!0,!1);b.pages.unshift(a);var c=e(b.currentPage+1,g,b.noNext(),!1,!0);b.pages.push(c),b.currentPage>b.numPages&&b.selectPage(b.numPages)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e,f;a.bind("mousemove",function(a){e=a.pageX,f=a.pageY});var g=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},e=g(b[0]);return e!=a[0]&&(d=this.offset(angular.element(e)),d.top+=e.clientTop,d.left+=e.clientLeft),{width:b.prop("offsetWidth"),height:b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:c.prop("offsetWidth"),height:c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft)}},mouse:function(){return{x:e,y:f}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b,d;return b=a||o.trigger||m,d=angular.isDefined(o.trigger)?c[o.trigger]||b:c[b]||b,{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=n(void 0),r=k.startSymbol(),s=k.endSymbol(),t="<"+p+'-popup title="'+r+"tt_title"+s+'" content="'+r+"tt_content"+s+'" placement="'+r+"tt_placement"+s+'" animation="tt_animation()" is-open="tt_isOpen"></'+p+"-popup>";return{restrict:"EA",scope:!0,link:function(a,b,c){function d(){a.tt_isOpen?m():k()}function k(){a.tt_popupDelay?u=g(p,a.tt_popupDelay):a.$apply(p)}function m(){a.$apply(function(){r()})}function p(){var c,d,e,f;if(a.tt_content){switch(s&&g.cancel(s),w.css({top:0,left:0,display:"block"}),x?(v=v||i.find("body"),v.append(w)):b.after(w),c=o.appendToBody?j.offset(b):j.position(b),d=w.prop("offsetWidth"),e=w.prop("offsetHeight"),a.tt_placement){case"mouse":var h=j.mouse();f={top:h.y,left:h.x};break;case"right":f={top:c.top+c.height/2-e/2,left:c.left+c.width};break;case"bottom":f={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"left":f={top:c.top+c.height/2-e/2,left:c.left-d};break;default:f={top:c.top-e,left:c.left+c.width/2-d/2}}f.top+="px",f.left+="px",w.css(f),a.tt_isOpen=!0}}function r(){a.tt_isOpen=!1,g.cancel(u),angular.isDefined(a.tt_animation)&&a.tt_animation()?s=g(function(){w.remove()},500):w.remove()}var s,u,v,w=f(t)(a),x=angular.isDefined(o.appendToBody)?o.appendToBody:!1;a.tt_isOpen=!1,c.$observe(e,function(b){a.tt_content=b}),c.$observe(l+"Title",function(b){a.tt_title=b}),c.$observe(l+"Placement",function(b){a.tt_placement=angular.isDefined(b)?b:o.placement}),c.$observe(l+"Animation",function(b){a.tt_animation=angular.isDefined(b)?h(b):function(){return o.animation}}),c.$observe(l+"PopupDelay",function(b){var c=parseInt(b,10);a.tt_popupDelay=isNaN(c)?o.popupDelay:c}),c.$observe(l+"Trigger",function(a){b.unbind(q.show),b.unbind(q.hide),q=n(a),q.show===q.hide?b.bind(q.show,d):(b.bind(q.show,k),b.bind(q.hide,m))}),c.$observe(l+"AppendToBody",function(b){x=angular.isDefined(b)?h(b)(a):x}),x&&a.$on("$locationChangeSuccess",function(){a.tt_isOpen&&r()}),a.$on("$destroy",function(){a.tt_isOpen?r():w.remove()})}}}}]}).directive("tooltipPopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$compile","$timeout","$parse","$window","$tooltip",function(a,b,c,d,e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,autoType:!1,stackedTypes:["success","info","warning","danger"]}).controller("ProgressBarController",["$scope","$attrs","progressConfig",function(a,b,c){function d(a){return g[a]}var e=angular.isDefined(b.animate)?a.$eval(b.animate):c.animate,f=angular.isDefined(b.autoType)?a.$eval(b.autoType):c.autoType,g=angular.isDefined(b.stackedTypes)?a.$eval("["+b.stackedTypes+"]"):c.stackedTypes;this.makeBar=function(a,b,c){var g=angular.isObject(a)?a.value:a||0,h=angular.isObject(b)?b.value:b||0,i=angular.isObject(a)&&angular.isDefined(a.type)?a.type:f?d(c||0):null;return{from:h,to:g,type:i,animate:e}},this.addBar=function(b){a.bars.push(b),a.totalPercent+=b.to},this.clearBars=function(){a.bars=[],a.totalPercent=0},this.clearBars()}]).directive("progress",function(){return{restrict:"EA",replace:!0,controller:"ProgressBarController",scope:{value:"=percent",onFull:"&",onEmpty:"&"},templateUrl:"template/progressbar/progress.html",link:function(a,b,c,d){a.$watch("value",function(a,b){if(d.clearBars(),angular.isArray(a))for(var c=0,e=a.length;e>c;c++)d.addBar(d.makeBar(a[c],b[c],c));else d.addBar(d.makeBar(a,b))},!0),a.$watch("totalPercent",function(b){b>=100?a.onFull():0>=b&&a.onEmpty()},!0)}}}).directive("progressbar",["$transition",function(a){return{restrict:"EA",replace:!0,scope:{width:"=",old:"=",type:"=",animate:"="},templateUrl:"template/progressbar/bar.html",link:function(b,c){b.$watch("width",function(d){b.animate?(c.css("width",b.old+"%"),a(c,{width:d+"%"})):c.css("width",d+"%")})}}}]),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5}).directive("rating",["ratingConfig","$parse",function(a,b){return{restrict:"EA",scope:{value:"="},templateUrl:"template/rating/rating.html",replace:!0,link:function(c,d,e){var f=angular.isDefined(e.max)?c.$eval(e.max):a.max;c.range=[];for(var g=1;f>=g;g++)c.range.push(g);c.rate=function(a){c.readonly||(c.value=a)},c.enter=function(a){c.readonly||(c.val=a)},c.reset=function(){c.val=angular.copy(c.value)},c.reset(),c.$watch("value",function(a){c.val=a}),c.readonly=!1,e.readonly&&c.$parent.$watch(b(e.readonly),function(a){c.readonly=!!a})}}}]),angular.module("ui.bootstrap.tabs",[]).directive("tabs",function(){return function(){throw Error("The `tabs` directive is deprecated, please migrate to `tabset`. Instructions can be found at http://github.com/angular-ui/bootstrap/tree/master/CHANGELOG.md")}}).controller("TabsetController",["$scope","$element",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),1==c.length&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$eval(c.vertical):!1,a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"}}}).directive("tab",["$parse","$http","$templateCache","$compile",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;b.active=!1,e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a){a&&b.disabled?h(b.$parent,!1):b.active=!!a})):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a&&(f.select(b),b.onSelect())}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.active&&h(b.$parent,!0),d(b.$parent,function(a){var c,d=[];angular.forEach(a,function(a){a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"==a.tagName.toLowerCase()||"data-tab-heading"==a.tagName.toLowerCase())?c=a:d.push(a)}),c&&(b.headingElement=angular.element(c)),b.contentElement=angular.element(d)})}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",["$parse",function(a){return{restrict:"A",require:"^tabset",link:function(b,c,d){b.$watch(a(d.tabContentTransclude),function(a){c.html(""),a&&c.append(a.contentElement)})}}}]),angular.module("ui.bootstrap.timepicker",[]).filter("pad",function(){return function(a){return angular.isDefined(a)&&2>(""+a).length&&(a="0"+a),a}}).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:["AM","PM"],readonlyInput:!1,mousewheel:!0}).directive("timepicker",["padFilter","$parse","timepickerConfig",function(a,b,c){return{restrict:"EA",require:"ngModel",replace:!0,templateUrl:"template/timepicker/timepicker.html",scope:{model:"=ngModel"},link:function(d,e,f){function g(){var a=parseInt(d.hours,10),b=d.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(d.showMeridian&&(12===a&&(a=0),d.meridian===k[1]&&(a+=12)),a):void 0}function h(){var b=j.getHours();d.showMeridian&&(b=0===b||12===b?12:b%12),d.hours="h"===s?b:a(b),d.validHours=!0;var c=j.getMinutes();d.minutes="m"===s?c:a(c),d.validMinutes=!0,d.meridian=d.showMeridian?12>j.getHours()?k[0]:k[1]:"",s=!1}function i(a){var b=new Date(j.getTime()+6e4*a);b.getDate()!==j.getDate()&&b.setDate(b.getDate()-1),j.setTime(b.getTime()),d.model=new Date(j)}var j=new Date,k=c.meridians,l=c.hourStep;f.hourStep&&d.$parent.$watch(b(f.hourStep),function(a){l=parseInt(a,10)});var m=c.minuteStep;f.minuteStep&&d.$parent.$watch(b(f.minuteStep),function(a){m=parseInt(a,10)}),d.showMeridian=c.showMeridian,f.showMeridian&&d.$parent.$watch(b(f.showMeridian),function(a){if(d.showMeridian=!!a,d.model)h();else{var b=new Date(j),c=g();angular.isDefined(c)&&b.setHours(c),d.model=new Date(b)}});var n=e.find("input"),o=n.eq(0),p=n.eq(1),q=angular.isDefined(f.mousewheel)?d.$eval(f.mousewheel):c.mousewheel;if(q){var r=function(a){return a.originalEvent&&(a=a.originalEvent),a.detail||a.wheelDelta>0};o.bind("mousewheel",function(a){d.$apply(r(a)?d.incrementHours():d.decrementHours()),a.preventDefault()}),p.bind("mousewheel",function(a){d.$apply(r(a)?d.incrementMinutes():d.decrementMinutes()),a.preventDefault()})}var s=!1;d.readonlyInput=angular.isDefined(f.readonlyInput)?d.$eval(f.readonlyInput):c.readonlyInput,d.readonlyInput?(d.updateHours=angular.noop,d.updateMinutes=angular.noop):(d.updateHours=function(){var a=g();angular.isDefined(a)?(s="h",null===d.model&&(d.model=new Date(j)),d.model.setHours(a)):(d.model=null,d.validHours=!1)},o.bind("blur",function(){d.validHours&&10>d.hours&&d.$apply(function(){d.hours=a(d.hours)})}),d.updateMinutes=function(){var a=parseInt(d.minutes,10);a>=0&&60>a?(s="m",null===d.model&&(d.model=new Date(j)),d.model.setMinutes(a)):(d.model=null,d.validMinutes=!1)},p.bind("blur",function(){d.validMinutes&&10>d.minutes&&d.$apply(function(){d.minutes=a(d.minutes)})})),d.$watch(function(){return+d.model},function(a){!isNaN(a)&&a>0&&(j=new Date(a),h())}),d.incrementHours=function(){i(60*l)},d.decrementHours=function(){i(60*-l)},d.incrementMinutes=function(){i(m)},d.decrementMinutes=function(){i(-m)},d.toggleMeridian=function(){i(720*(12>j.getHours()?1:-1))}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=g.parse(k.typeahead),q=i.$eval(k.typeaheadEditable)!==!1,r=b(k.typeaheadLoading).assign||angular.noop,s=b(k.typeaheadOnSelect),t=angular.element("<typeahead-popup></typeahead-popup>");t.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"});var u=i.$new();i.$on("$destroy",function(){u.$destroy()});var v=function(){u.matches=[],u.activeIdx=-1},w=function(a){var b={$viewValue:a};r(i,!0),c.when(p.source(u,b)).then(function(c){if(a===l.$viewValue){if(c.length>0){u.activeIdx=0,u.matches.length=0;for(var d=0;c.length>d;d++)b[p.itemName]=c[d],u.matches.push({label:p.viewMapper(u,b),model:c[d]});u.query=a,u.position=f.position(j),u.position.top=u.position.top+j.prop("offsetHeight")}else v();r(i,!1)}},function(){v(),r(i,!1)})};v(),u.query=void 0,l.$parsers.push(function(a){var b;return v(),m?a:(a&&a.length>=n&&(o>0?(b&&d.cancel(b),b=d(function(){w(a)},o)):w(a)),q?a:void 0)}),l.$render=function(){var a={};a[p.itemName]=m||l.$viewValue,j.val(p.viewMapper(u,a)||l.$viewValue),m=void 0},u.select=function(a){var b,c,d={};d[p.itemName]=c=m=u.matches[a].model,b=p.modelMapper(u,d),l.$setViewValue(b),l.$render(),s(u,{$item:c,$model:b,$label:p.viewMapper(u,d)}),j[0].focus()},j.bind("keydown",function(a){0!==u.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(u.activeIdx=(u.activeIdx+1)%u.matches.length,u.$digest()):38===a.which?(u.activeIdx=(u.activeIdx?u.activeIdx:u.matches.length)-1,u.$digest()):13===a.which||9===a.which?u.$apply(function(){u.select(u.activeIdx)}):27===a.which&&(a.stopPropagation(),v(),u.$digest()))}),e.bind("click",function(){v(),u.$digest()}),j.after(a(t)(u))}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead.html",link:function(a){a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(RegExp(a(c),"gi"),"<strong>$&</strong>"):c}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="accordion-group">\n  <div class="accordion-heading" ><a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a></div>\n  <div class="accordion-body" collapse="!isOpen">\n    <div class="accordion-inner" ng-transclude></div>  </div>\n</div>')
}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="accordion" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html","<div class='alert' ng-class='type && \"alert-\" + type'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a ng-click="prev()" class="carousel-control left" ng-show="slides().length > 1">&lsaquo;</a>\n    <a ng-click="next()" class="carousel-control right" ng-show="slides().length > 1">&rsaquo;</a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<table class="well well-large">\n  <thead>\n    <tr class="text-center">\n      <th><button class="btn pull-left" ng-click="move(-1)"><i class="icon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button class="btn btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button class="btn pull-right" ng-click="move(1)"><i class="icon-chevron-right"></i></button></th>\n    </tr>\n    <tr class="text-center" ng-show="labels.length > 0">\n      <th ng-show="showWeekNumbers">#</th>\n      <th ng-repeat="label in labels">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button style="width:100%;" class="btn" ng-class="{\'btn-info\': dt.isSelected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{muted: ! dt.isCurrent}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/dialog/message.html",[]).run(["$templateCache",function(a){a.put("template/dialog/message.html",'<div class="modal-header">\n	<h3>{{ title }}</h3>\n</div>\n<div class="modal-body">\n	<p>{{ message }}</p>\n</div>\n<div class="modal-footer">\n	<button ng-repeat="btn in buttons" ng-click="close(btn.result)" class="btn" ng-class="btn.cssClass">{{ btn.label }}</button>\n</div>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div class="modal in" ng-transclude></div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<div class="pager">\n  <ul>\n    <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<div class="pagination"><ul>\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="bar" ng-class=\'type && "bar-" + type\'></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress"><progressbar ng-repeat="bar in bars" width="bar.to" old="bar.from" animate="bar.animate" type="bar.type"></progressbar></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n	<i ng-repeat="number in range" ng-mouseenter="enter(number)" ng-click="rate(number)" ng-class="{\'icon-star\': number <= val, \'icon-star-empty\': number > val}"></i>\n</span>\n')}]),angular.module("template/tabs/pane.html",[]).run(["$templateCache",function(a){a.put("template/tabs/pane.html",'<div class="tab-pane" ng-class="{active: selected}" ng-show="selected" ng-transclude></div>\n')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabs.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabs.html",'<div class="tabbable">\n  <ul class="nav nav-tabs">\n    <li ng-repeat="pane in panes" ng-class="{active:pane.selected}">\n      <a ng-click="select(pane)">{{pane.heading}}</a>\n    </li>\n  </ul>\n  <div class="tab-content" ng-transclude></div>\n</div>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div class="tabbable">\n  <ul class="nav {{type && \'nav-\' + type}}" ng-class="{\'nav-stacked\': vertical}" ng-transclude>\n  </ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab" tt="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table class="form-inline">\n	<tr class="text-center">\n		<td><a ng-click="incrementHours()" class="btn btn-link"><i class="icon-chevron-up"></i></a></td>\n		<td>&nbsp;</td>\n		<td><a ng-click="incrementMinutes()" class="btn btn-link"><i class="icon-chevron-up"></i></a></td>\n		<td ng-show="showMeridian"></td>\n	</tr>\n	<tr>\n		<td class="control-group" ng-class="{\'error\': !validHours}"><input type="text" ng-model="hours" ng-change="updateHours()" class="span1 text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2" /></td>\n		<td>:</td>\n		<td class="control-group" ng-class="{\'error\': !validMinutes}"><input type="text" ng-model="minutes" ng-change="updateMinutes()" class="span1 text-center" ng-readonly="readonlyInput" maxlength="2"></td>\n		<td ng-show="showMeridian"><button ng-click="toggleMeridian()" class="btn text-center">{{meridian}}</button></td>\n	</tr>\n	<tr class="text-center">\n		<td><a ng-click="decrementHours()" class="btn btn-link"><i class="icon-chevron-down"></i></a></td>\n		<td>&nbsp;</td>\n		<td><a ng-click="decrementMinutes()" class="btn btn-link"><i class="icon-chevron-down"></i></a></td>\n		<td ng-show="showMeridian"></td>\n	</tr>\n</table>')}]),angular.module("template/typeahead/typeahead.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead.html",'<ul class="typeahead dropdown-menu" ng-style="{display: isOpen()&&\'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}">\n    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)">\n        <a tabindex="-1" ng-click="selectMatch($index)" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>\n    </li>\n</ul>')}]),function(){function a(a){return function(){return a}}function b(a){var b="Array"===a&&lc.isArray||function(b,c){return(c||sc.call(b))==="[object "+a+"]"};return xc[a]=b}function c(a,b){function c(c){return p(c)?sc.call(c)==="[object "+b+"]":typeof c===a}return xc[b]=c}function d(a){a.SugarMethods||(i(a,"SugarMethods",{}),e(a,!1,!0,{extend:function(b,c,d){e(a,!1!==d,c,b)},sugarRestore:function(){return g(this,a,arguments,function(a,b,c){i(a,b,c.method)})},sugarRevert:function(){return g(this,a,arguments,function(a,b,c){c.existed?i(a,b,c.original):delete a[b]})}}))}function e(a,b,c,e){var f=b?a.prototype:a;d(a),s(e,function(d,e){var g=f[d],j=o(f,d);Gc(c)&&g&&(e=h(g,e,c)),!1===c&&g||i(f,d,e),a.SugarMethods[d]={method:e,existed:j,original:g,instance:b}})}function f(a,b,c,d,f){var g={};d=Cc(d)?d.split(","):d,d.forEach(function(a,b){f(g,a,b)}),e(a,b,c,g)}function g(a,b,c,d){var e=0===c.length,f=j(c),g=!1;return s(b.SugarMethods,function(b,c){(e||-1!==f.indexOf(b))&&(g=!0,d(c.instance?a.prototype:a,b,c))}),g}function h(a,b,c){return function(){return c.apply(this,arguments)?b.apply(this,arguments):a.apply(this,arguments)}}function i(a,b,c){uc?kc.defineProperty(a,b,{value:c,configurable:!0,enumerable:!1,writable:!0}):a[b]=c}function j(a,b,c){var d=[];c=c||0;var e;for(e=a.length;e>c;c++)d.push(a[c]),b&&b.call(a,a[c],c);return d}function k(a,b,c){var d=a[c||0];Dc(d)&&(a=d,c=0),j(a,b,c)}function l(a){if(!a||!a.call)throw new TypeError("Callback is not callable")}function m(a){return void 0!==a}function n(a){return void 0===a}function o(a,b){return!!a&&tc.call(a,b)}function p(a){return!!a&&("object"==typeof a||vc&&Fc(a))}function q(a){var b=typeof a;return null==a||"string"===b||"number"===b||"boolean"===b}function r(a,b){b=b||sc.call(a);try{if(a&&a.constructor&&!o(a,"constructor")&&!o(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}return!!a&&"[object Object]"===b&&"hasOwnProperty"in a}function s(a,b){for(var c in a)if(o(a,c)&&!1===b.call(a,c,a[c],a))break}function t(a,b){for(var c=0;a>c;c++)b(c)}function u(a,b){return s(b,function(c){a[c]=b[c]}),a}function v(a){if(q(a)&&(a=kc(a)),wc&&Cc(a))for(var b,c=a,d=0;b=c.charAt(d);)c[d++]=b;return a}function w(a){u(this,v(a))}function x(a,b,c){var d=Jc(10,Ic(b||0));return c=c||Mc,0>b&&(d=1/d),c(a*d)/d}function y(){return"	\n\f\r   ᠎             \u2028\u2029　﻿"}function z(a,b){var c="";for(a=a.toString();b>0;)1&b&&(c+=a),(b>>=1)&&(a+=a);return c}function A(a,b){var c,d;return c=a.replace(Hc,function(a){return a=Vc[a],a===Tc&&(d=!0),a}),d?parseFloat(c):parseInt(c,b||10)}function B(a,b,c,d){return d=Ic(a).toString(d||10),d=z("0",b-d.replace(/\.\d+/,"").length)+d,(c||0>a)&&(d=(0>a?"-":"+")+d),d}function C(a){if(a>=11&&13>=a)return"th";switch(a%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function D(a,b){function c(a,c){(a||-1<b.indexOf(c))&&(d+=c)}var d="";return b=b||"",c(a.multiline,"m"),c(a.ignoreCase,"i"),c(a.global,"g"),c(a.u,"y"),d}function E(a){return Cc(a)||(a=oc(a)),a.replace(/([\\/\'*+?|()\[\]{}.^$])/g,"\\$1")}function F(a,b){return a["get"+(a._utc?"UTC":"")+b]()}function G(a,b,c){return a["set"+(a._utc&&"ISOWeek"!=b?"UTC":"")+b](c)}function H(a,b){var c,d,e,f,g,h,i,j=typeof a;if("string"===j)return a;if(e=sc.call(a),c=r(a,e),d=Dc(a,e),null!=a&&c||d){if(b||(b=[]),1<b.length)for(h=b.length;h--;)if(b[h]===a)return"CYC";for(b.push(a),c=a.valueOf()+oc(a.constructor),f=d?a:kc.keys(a).sort(),h=0,i=f.length;i>h;h++)g=d?h:f[h],c+=g+H(a[g],b);b.pop()}else c=-1/0===1/a?"-0":oc(a&&a.valueOf?a.valueOf():a);return j+e+c}function I(a,b){return a===b?0!==a||1/a===1/b:J(a)&&J(b)?H(a)===H(b):!1}function J(a){var b=sc.call(a);return yc.test(b)||r(a,b)}function K(a,b,c){var d,e=a.length,f=b.length,g=!1!==b[f-1];return f>(g?1:2)?(d=[],j(b,function(b){return Ac(b)?!1:void d.push(L(a,e,b,g,c))}),d):L(a,e,b[0],g,c)}function L(a,b,c,d,e){return d&&(c%=b,0>c&&(c=b+c)),e?a.charAt(c):a[c]}function M(a,b){f(b,!0,!1,a,function(a,b){a[b+("equal"===b?"s":"")]=function(){return kc[b].apply(null,[this].concat(j(arguments)))}})}function N(a,b,c,d){var e=a.length,f=-1==d,g=f?e-1:0;for(c=isNaN(c)?g:parseInt(c>>0),0>c&&(c=e+c),(!f&&0>c||f&&c>=e)&&(c=g);f&&c>=0||!f&&e>c;){if(a[c]===b)return c;c+=d}return-1}function O(a,b,c,d){var e=a.length,f=0,g=m(c);if(l(b),0==e&&!g)throw new TypeError("Reduce called on empty array with no initial value");for(g||(c=a[d?e-1:f],f++);e>f;)g=d?e-f-1:f,g in a&&(c=b(c,a[g],g,a)),f++;return c}function P(a){if(0===a.length)throw new TypeError("First argument must be defined")}function Q(a){return a=mc(a),function(b){return a.test(b)}}function R(a){var b=a.getTime();return function(a){return!(!a||!a.getTime)&&a.getTime()===b}}function S(a){return function(b,c,d){return b===a||a.call(this,b,c,d)}}function T(a){return function(b,c,d){return b===a||a.call(d,c,b,d)}}function U(a,b){var c={};return function(d,e,f){var g;if(!p(d))return!1;for(g in a)if(c[g]=c[g]||W(a[g],b),!1===c[g].call(f,d[g],e,f))return!1;return!0}}function V(a){return function(b){return b===a||I(b,a)}}function W(a,b){if(!q(a)){if(Fc(a))return Q(a);if(Ec(a))return R(a);if(Gc(a))return b?T(a):S(a);if(r(a))return U(a,b)}return V(a)}function X(a,b,c,d){return b?b.apply?b.apply(c,d||[]):Gc(a[b])?a[b].call(a):a[b]:a}function Y(a,b,c,d){var e=+a.length;for(0>c&&(c=a.length+c),c=isNaN(c)?0:c,!0===d&&(e+=c);e>c;){if(d=c%a.length,!(d in a)){Z(a,b,c);break}if(!1===b.call(a,a[d],d,a))break;c++}}function Z(a,b,c){var d,e=[];for(d in a)d in a&&d>>>0==d&&4294967295!=d&&d>=c&&e.push(parseInt(d));e.sort().each(function(c){return b.call(a,a[c],c,a)})}function $(a,b,c,d,e,f){var g,h,i;return 0<a.length&&(i=W(b),Y(a,function(b,c){return i.call(f,b,c,a)?(g=b,h=c,!1):void 0},c,d)),e?h:g}function _(a,b){var c,d=[],e={};return Y(a,function(f,g){c=b?X(f,b,a,[f,g,a]):f,eb(e,c)||d.push(f)}),d}function ab(a,b,c){var d=[],e={};return b.each(function(a){eb(e,a)}),a.each(function(a){var b=H(a),f=!J(a);if(db(e,b,a,f)!==c){var g=0;if(f)for(b=e[b];g<b.length;)b[g]===a?b.splice(g,1):g+=1;else delete e[b];d.push(a)}}),d}function bb(a,b,c){b=b||1/0,c=c||0;var d=[];return Y(a,function(a){Dc(a)&&b>c?d=d.concat(bb(a,b,c+1)):d.push(a)}),d}function cb(a){var b=[];return j(a,function(a){b=b.concat(a)}),b}function db(a,b,c,d){var e=b in a;return d&&(a[b]||(a[b]=[]),e=-1!==a[b].indexOf(c)),e}function eb(a,b){var c=H(b),d=!J(b),e=db(a,c,b,d);return d?a[c].push(b):a[c]=b,e}function fb(a,b,c,d){var e,f,g,h=[],i="max"===c,j="min"===c,k=lc.isArray(a);for(e in a)if(a.hasOwnProperty(e)){if(c=a[e],g=X(c,b,a,k?[c,parseInt(e),a]:[]),n(g))throw new TypeError("Cannot compare with undefined");g===f?h.push(c):(n(f)||i&&g>f||j&&f>g)&&(h=[c],f=g)}return k||(h=bb(h,1)),d?h:h[0]}function gb(a,b){var c,d,e,f,g=0,h=0;c=lc[Zc],d=lc[$c];var i=lc[_c],j=lc[Yc],k=lc[ad];a=hb(a,c,d),b=hb(b,c,d);do c=a.charAt(g),e=i[c]||c,c=b.charAt(g),f=i[c]||c,c=e?j.indexOf(e):null,d=f?j.indexOf(f):null,-1===c||-1===d?(c=a.charCodeAt(g)||null,d=b.charCodeAt(g)||null,k&&(c>=Pc&&Qc>=c||c>=Rc&&Sc>=c)&&(d>=Pc&&Qc>=d||d>=Rc&&Sc>=d)&&(c=A(a.slice(g)),d=A(b.slice(g)))):(e=e!==a.charAt(g),f=f!==b.charAt(g),e!==f&&0===h&&(h=e-f)),g+=1;while(null!=c&&null!=d&&c===d);return c===d?h:c-d}function hb(a,b,c){return Cc(a)||(a=oc(a)),c&&(a=a.toLowerCase()),b&&(a=a.replace(b,"")),a}function ib(a,b){f(kc,!1,!0,a,function(a,c){a[c]=function(a,d,e){var f,g=kc.keys(v(a));return b||(f=W(d,!0)),e=lc.prototype[c].call(g,function(c){var e=a[c];return b?X(e,d,a,[c,e,a]):f(e,c,a)},e),Dc(e)&&(e=e.reduce(function(b,c){return b[c]=a[c],b},{})),e}}),M(a,w)}function jb(a){u(this,a),this.g=nd.concat()}function kb(a,b,c){var d,e,f=b[0],g=b[1],h=b[2];return b=a[c]||a.relative,Gc(b)?b.call(a,f,g,h,c):(e=a.units[8*(a.plural&&f>1?1:0)+g]||a.units[g],a.capitalizeUnit&&(e=rb(e)),d=a.modifiers.filter(function(a){return"sign"==a.name&&a.value==(h>0?1:-1)})[0],b.replace(/\{(.*?)\}/g,function(a,b){switch(b){case"num":return f;case"unit":return e;case"sign":return d.src}}))}function lb(a,b){return b=b||a.code,"en"===b||"en-US"===b?!0:a.variant}function mb(a,b){return b.replace(mc(a.num,"g"),function(b){return nb(a,b)||""})}function nb(a,b){var c;return Bc(b)?b:b&&-1!==(c=a.numbers.indexOf(b))?(c+1)%10:1}function ob(a,b){var c;if(Cc(a)||(a=""),c=rd[a]||rd[a.slice(0,2)],!1===b&&!c)throw new TypeError("Invalid locale.");return c||gd}function pb(a,b){function c(a){var b=h[a];Cc(b)?h[a]=b.split(","):b||(h[a]=[])}function d(a,b){a=a.split("+").map(function(a){return a.replace(/(.+):(.+)$/,function(a,b,c){return c.split("|").map(function(a){return b+a}).join("|")})}).join("|"),a.split("|").forEach(b)}function e(a,b,c){var e=[];h[a].forEach(function(a,f){b&&(a+="+"+a.slice(0,3)),d(a,function(a,b){e[b*c+f]=a.toLowerCase()})}),h[a]=e}function f(a,b,c){return a="\\d{"+a+","+b+"}",c&&(a+="|(?:"+sb(h.numbers)+")+"),a}function g(a,b){h[a]=h[a]||b}var h,i;return h=new jb(b),c("modifiers"),"months weekdays units numbers articles tokens timeMarker ampm timeSuffixes dateParse timeParse".split(" ").forEach(c),i=!h.monthSuffix,e("months",i,12),e("weekdays",i,7),e("units",!1,8),e("numbers",!1,10),g("code",a),g("date",f(1,2,h.digitDate)),g("year","'\\d{2}|"+f(4,4)),g("num",function(){var a=["-?\\d+"].concat(h.articles);return h.numbers&&(a=a.concat(h.numbers)),sb(a)}()),function(){var a=[];h.i={},h.modifiers.push({name:"day",src:"yesterday",value:-1}),h.modifiers.push({name:"day",src:"today",value:0}),h.modifiers.push({name:"day",src:"tomorrow",value:1}),h.modifiers.forEach(function(b){var c=b.name;d(b.src,function(d){var e=h[c];h.i[d]=b,a.push({name:c,src:d,value:b.value}),h[c]=e?e+"|"+d:d})}),h.day+="|"+sb(h.weekdays),h.modifiers=a}(),h.monthSuffix&&(h.month=f(1,2),h.months="1 2 3 4 5 6 7 8 9 10 11 12".split(" ").map(function(a){return a+h.monthSuffix})),h.full_month=f(1,2)+"|"+sb(h.months),0<h.timeSuffixes.length&&h.addFormat(Lb(h),!1,kd),h.addFormat("{day}",!0),h.addFormat("{month}"+(h.monthSuffix||"")),h.addFormat("{year}"+(h.yearSuffix||"")),h.timeParse.forEach(function(a){h.addFormat(a,!0)}),h.dateParse.forEach(function(a){h.addFormat(a)}),rd[a]=h}function qb(a,b,c,d){a.g.unshift({r:d,locale:a,q:mc("^"+b+"$","i"),to:c})}function rb(a){return a.slice(0,1).toUpperCase()+a.slice(1)}function sb(a){return a.filter(function(a){return!!a}).join("|")}function tb(){var a=nc.SugarNewDate;return a?a():new nc}function ub(a,b){var c;return p(a[0])?a:Bc(a[0])&&!Bc(a[1])?[a[0]]:Cc(a[0])&&b?[vb(a[0]),a[1]]:(c={},id.forEach(function(b,d){c[b.name]=a[d]}),[c])}function vb(a){var b,c={};return(a=a.match(/^(\d+)?\s?(\w+?)s?$/i))&&(n(b)&&(b=parseInt(a[1])||1),c[a[2].toLowerCase()]=b),c}function wb(a,b,c){var d;for(n(c)&&(c=jd.length),b=b||0;c>b&&(d=jd[b],!1!==a(d.name,d,b));b++);}function xb(a,b){var c,d,e={};return b.forEach(function(b,f){c=a[f+1],n(c)||""===c||("year"===b&&(e.t=c.replace(/'/,"")),d=parseFloat(c.replace(/'/,"").replace(/,/,".")),e[b]=isNaN(d)?c.toLowerCase():d)}),e}function yb(a){return a=a.trim().replace(/^just (?=now)|\.+$/i,""),zb(a)}function zb(a){return a.replace(hd,function(a,b,c){var d,e,f=0,g=1;return b?a:(c.split("").reverse().forEach(function(a){a=md[a];var b=a>9;b?(d&&(f+=g),g*=a/(e||1),e=a):(!1===d&&(g*=10),f+=g*a),d=b}),d&&(f+=g),f)})}function Ab(a,b,c,d){function e(a){n.push(a)}function f(){n.forEach(function(a){a.call()})}function g(){var a=j.getWeekday();j.setWeekday(7*(q.num-1)+(a>u?u+7:u))}function h(){var a=o.i[q.edge];wb(function(a){return m(q[a])?(r=a,!1):void 0},4),"year"===r?q.e="month":("month"===r||"week"===r)&&(q.e="day"),j[(0>a.value?"endOf":"beginningOf")+rb(r)](),-2===a.value&&j.reset()}function i(){var a;wb(function(b,c,d){if("day"===b&&(b="date"),m(q[b])){if(d>=t)return j.setTime(0/0),!1;a=a||{},a[b]=q[b],delete q[b]}}),a&&e(function(){j.set(a,!0)})}var j,k,l,n,o,q,r,t,u,v,w;return j=tb(),n=[],j.utc(d),Ec(a)?j.utc(a.isUTC()).setTime(a.getTime()):Bc(a)?j.setTime(a):p(a)?(j.set(a,!0),q=a):Cc(a)&&(l=ob(b),a=yb(a),l&&s(l.o?[l.o].concat(l.g):l.g,function(c,d){var f=a.match(d.q);return f?(o=d.locale,q=xb(f,d.to),o.o=d,q.utc&&j.utc(),q.timestamp?(q=q.timestamp,!1):(d.r&&!Cc(q.month)&&(Cc(q.date)||lb(l,b))&&(w=q.month,q.month=q.date,q.date=w),q.year&&2===q.t.length&&(q.year=100*Mc(F(tb(),"FullYear")/100)-100*Mc(q.year/100)+q.year),q.month&&(q.month=o.getMonth(q.month),q.shift&&!q.unit&&(q.unit=o.units[7])),q.weekday&&q.date?delete q.weekday:q.weekday&&(q.weekday=o.getWeekday(q.weekday),q.shift&&!q.unit&&(q.unit=o.units[5])),q.day&&(w=o.i[q.day])?(q.day=w.value,j.reset(),k=!0):q.day&&-1<(u=o.getWeekday(q.day))&&(delete q.day,q.num&&q.month?(e(g),q.day=1):q.weekday=u),q.date&&!Bc(q.date)&&(q.date=mb(o,q.date)),q.ampm&&q.ampm===o.ampm[1]&&12>q.hour?q.hour+=12:q.ampm===o.ampm[0]&&12===q.hour&&(q.hour=0),("offset_hours"in q||"offset_minutes"in q)&&(j.utc(),q.offset_minutes=q.offset_minutes||0,q.offset_minutes+=60*q.offset_hours,"-"===q.offset_sign&&(q.offset_minutes*=-1),q.minute-=q.offset_minutes),q.unit&&(k=!0,v=nb(o,q.num),t=o.units.indexOf(q.unit)%8,r=fd.units[t],i(),q.shift&&(v*=(w=o.i[q.shift])?w.value:0),q.sign&&(w=o.i[q.sign])&&(v*=w.value),m(q.weekday)&&(j.set({weekday:q.weekday},!0),delete q.weekday),q[r]=(q[r]||0)+v),q.edge&&e(h),"-"===q.year_sign&&(q.year*=-1),wb(function(a,b,c){b=q[a];var d=b%1;d&&(q[jd[c-1].name]=Mc(d*("second"===a?1e3:60)),q[a]=Lc(b))},1,4),!1)):void 0}),q?k?j.advance(q):(j._utc&&j.reset(),Kb(j,q,!0,!1,c)):("now"!==a&&(j=new nc(a)),d&&j.addMinutes(-j.getTimezoneOffset())),f(),j.utc(!1)),{c:j,set:q}}function Bb(a){var b,c=Ic(a),d=c,e=0;return wb(function(a,f,g){b=Lc(x(c/f.b(),1)),b>=1&&(d=b,e=g)},1),[d,e,a]}function Cb(a){var b=Bb(a.millisecondsFromNow());return(6===b[1]||5===b[1]&&4===b[0]&&a.daysFromNow()>=tb().daysInMonth())&&(b[0]=Ic(a.monthsFromNow()),b[1]=6),b}function Db(a,b,c){function d(a,c){var d=F(a,"Month");return ob(c).months[d+12*b]}Eb(a,d,c),Eb(rb(a),d,c,1)}function Eb(a,b,c,d){pd[a]=function(a,e){var f=b(a,e);return c&&(f=f.slice(0,c)),d&&(f=f.slice(0,d).toUpperCase()+f.slice(d)),f}}function Fb(a,b,c){pd[a]=b,pd[a+a]=function(a,c){return B(b(a,c),2)},c&&(pd[a+a+a]=function(a,c){return B(b(a,c),3)},pd[a+a+a+a]=function(a,c){return B(b(a,c),4)})}function Gb(a){var b=a.match(/(\{\w+\})|[^{}]+/g);od[a]=b.map(function(a){return a.replace(/\{(\w+)\}/,function(b,c){return a=pd[c]||c,c}),a})}function Hb(a,b,c,d){var e;if(!a.isValid())return"Invalid Date";if(Date[b]?b=Date[b]:Gc(b)&&(e=Cb(a),b=b.apply(a,e.concat(ob(d)))),!b&&c)return e=e||Cb(a),0===e[1]&&(e[1]=1,e[0]=1),a=ob(d),kb(a,e,0<e[2]?"future":"past");b=b||"long",("short"===b||"long"===b||"full"===b)&&(b=ob(d)[b]),od[b]||Gb(b);var f,g;for(e="",b=od[b],f=0,c=b.length;c>f;f++)g=b[f],e+=Gc(g)?g(a,d):g;return e}function Ib(a,b,c,d,e){var f,g,h,i=0,j=0,k=0;return f=Ab(b,c,null,e),d>0&&(j=k=d,g=!0),f.c.isValid()?(f.set&&f.set.e&&(qd.forEach(function(b){b.name===f.set.e&&(i=b.b(f.c,a-f.c)-1)}),b=rb(f.set.e),(f.set.edge||f.set.shift)&&f.c["beginningOf"+b](),"month"===f.set.e&&(h=f.c.clone()["endOf"+b]().getTime()),!g&&f.set.sign&&"millisecond"!=f.set.e&&(j=50,k=-50)),g=a.getTime(),b=f.c.getTime(),h=Jb(a,b,h||b+i),g>=b-j&&h+k>=g):!1}function Jb(a,b,c){return b=new nc(b),a=new nc(c).utc(a.isUTC()),23!==F(a,"Hours")&&(b=b.getTimezoneOffset(),a=a.getTimezoneOffset(),b!==a&&(c+=(a-b).minutes())),c}function Kb(a,b,c,d,e){function f(a){return m(b[a])?b[a]:b[a+"s"]}function g(a){return m(f(a))}var h;if(Bc(b)&&d)b={milliseconds:b};else if(Bc(b))return a.setTime(b),a;m(b.date)&&(b.day=b.date),wb(function(d,e,f){var i="day"===d;return g(d)||i&&g("weekday")?(b.e=d,h=+f,!1):void(!c||"week"===d||i&&g("week")||G(a,e.method,i?1:0))}),qd.forEach(function(c){var e=c.name;c=c.method;var h;h=f(e),n(h)||(d?("week"===e&&(h=(b.day||0)+7*h,c="Date"),h=h*d+F(a,c)):"month"===e&&g("day")&&G(a,"Date",15),G(a,c,h),d&&"month"===e&&(e=h,0>e&&(e=e%12+12),e%12!=F(a,"Month")&&G(a,"Date",0)))}),d||g("day")||!g("weekday")||a.setWeekday(f("weekday"));var i;a:{switch(e){case-1:i=a>tb();break a;case 1:i=a<tb();break a}i=void 0}return i&&wb(function(b,c){return(c.k||"week"===b&&g("weekday"))&&!(g(b)||"day"===b&&g("weekday"))?(a[c.j](e),!1):void 0},h+1),a}function Lb(a,b){var c,d=ld,e={h:0,m:1,s:2};return a=a||fd,d.replace(/{([a-z])}/g,function(d,f){var g=[],h="h"===f,i=h&&!b;return"t"===f?a.ampm.join("|"):(h&&g.push(":"),(c=a.timeSuffixes[e[f]])&&g.push(c+"\\s*"),0===g.length?"":"(?:"+g.join("|")+")"+(i?"":"?"))})}function Mb(a,b,c){var d,e;return Bc(a[1])?d=ub(a)[0]:(d=a[0],e=a[1]),Ab(d,e,b,c).c}function Nb(a,b){function c(){return Mc(this*b)}function d(){return Mb(arguments)[a.j](this)}function e(){return Mb(arguments)[a.j](-this)}var f=a.name,g={};g[f]=c,g[f+"s"]=c,g[f+"Before"]=e,g[f+"sBefore"]=e,g[f+"Ago"]=e,g[f+"sAgo"]=e,g[f+"After"]=d,g[f+"sAfter"]=d,g[f+"FromNow"]=d,g[f+"sFromNow"]=d,pc.extend(g)}function Ob(a,b,c,d,e){1/0!==b&&(a.timers||(a.timers=[]),Bc(b)||(b=1),a.n=!1,a.timers.push(setTimeout(function(){a.n||c.apply(d,e||[])},b)))}function Pb(a,b,c,d,e,f){var g=a.toFixed(20),h=g.search(/\./),g=g.search(/[1-9]/),h=h-g;return h>0&&(h-=1),e=Oc(Nc(Lc(h/3),!1===e?c.length:e),-d),d=c.charAt(e+d-1),-9>h&&(e=-3,b=Ic(h)-9,d=c.slice(0,1)),c=f?Jc(2,10*e):Jc(10,3*e),x(a/c,b||0).format()+d.trim()}function Qb(a,b,c,d){var e,f,g;(f=b.match(/^(.+?)(\[.*\])$/))?(g=f[1],b=f[2].replace(/^\[|\]$/g,"").split("]["),b.forEach(function(b){e=!b||b.match(/^\d+$/),!g&&Dc(a)&&(g=a.length),o(a,g)||(a[g]=e?[]:{}),a=a[g],g=b}),!g&&e&&(g=a.length.toString()),Qb(a,g,c,d)):a[b]=d&&"true"===c?!0:d&&"false"===c?!1:c}function Rb(a,b){var c;return Dc(b)||p(b)&&b.toString===sc?(c=[],s(b,function(b,d){a&&(b=a+"["+b+"]"),c.push(Rb(b,d))}),c.join("&")):a?Sb(a)+"="+(Ec(b)?b.getTime():Sb(b)):""}function Sb(a){return a||!1===a||0===a?encodeURIComponent(a).replace(/%20/g,"+"):""}function Tb(a,b,c){var d,e=a instanceof w?new w:{};return s(a,function(a,f){d=!1,k(b,function(b){(Fc(b)?b.test(a):p(b)?b[a]===f:a===oc(b))&&(d=!0)},1),d===c&&(e[a]=f)}),e}function Ub(a,b){this.start=Vb(a),this.end=Vb(b)}function Vb(a){return Ec(a)?new nc(a.getTime()):null==a?a:Ec(a)?a.getTime():a.valueOf()}function Wb(a){return a=null==a?a:Ec(a)?a.getTime():a.valueOf(),!!a||0===a}function Xb(a,b){var c,d,e,f;return Bc(b)?new nc(a.getTime()+b):(c=b[0],d=b[1],e=F(a,d),f=new nc(a.getTime()),G(f,d,e+c),f)}function Yb(a,b){return oc.fromCharCode(a.charCodeAt(0)+b)}function Zb(a,b){return a+b}function $b(a){if(a=+a,0>a||1/0===a)throw new RangeError("Invalid number");return a}function _b(a,b){return z(m(b)?b:" ",a)}function ac(a,b,c,d,e){var f;if(a.length<=b)return a.toString();switch(d=n(d)?"...":d,c){case"left":return a=e?bc(a,b,!0):a.slice(a.length-b),d+a;case"middle":return c=Kc(b/2),f=Lc(b/2),b=e?bc(a,c):a.slice(0,c),a=e?bc(a,f,!0):a.slice(a.length-f),b+d+a;default:return b=e?bc(a,b):a.slice(0,b),b+d}}function bc(a,b,c){if(c)return bc(a.reverse(),b).reverse();c=mc("(?=["+y()+"])");var d=0;return a.split(c).filter(function(a){return d+=a.length,b>=d}).join("")}function cc(a,b,c){return Cc(b)&&(b=a.indexOf(b),-1===b&&(b=c?a.length:0)),b}function dc(a){var b=Ad;a=b.indexOf(a),a>-1&&b.splice(a,1)}function ec(a,b,c){Cc(b)&&dc(b),dc(c),a.unshift({l:b,p:c})}function fc(a,b){return a==b||"all"==a||!a}function gc(a){return Ad.some(function(b){return new mc("\\b"+b+"$","i").test(a)})}function hc(a,b){return a=Cc(a)?a.toString():"",a.isBlank()||gc(a)?a:ic(a,b?yd:zd)}function ic(a,b){return s(b,function(b,c){return a.match(c.l)?(a=a.replace(c.l,c.p),!1):void 0}),a}function jc(a){return a.replace(/^\W*[a-z]/,function(a){return a.toUpperCase()})}var kc=Object,lc=Array,mc=RegExp,nc=Date,oc=String,pc=Number,qc=Math,rc="undefined"!=typeof global?global:this,sc=kc.prototype.toString,tc=kc.prototype.hasOwnProperty,uc=kc.defineProperty&&kc.defineProperties,vc="function"==typeof mc(),wc=!("0"in new oc("a")),xc={},yc=/^\[object Date|Array|String|Number|RegExp|Boolean|Arguments\]$/,zc="Boolean Number String Array Date RegExp Function".split(" "),Ac=c("boolean",zc[0]),Bc=c("number",zc[1]),Cc=c("string",zc[2]),Dc=b(zc[3]),Ec=b(zc[4]),Fc=b(zc[5]),Gc=b(zc[6]);w.prototype.constructor=kc;var Hc,Ic=qc.abs,Jc=qc.pow,Kc=qc.ceil,Lc=qc.floor,Mc=qc.round,Nc=qc.min,Oc=qc.max,Pc=48,Qc=57,Rc=65296,Sc=65305,Tc=".",Uc="",Vc={};d(kc),s(zc,function(a,b){d(rc[b])});var Wc,Xc;for(Xc=0;9>=Xc;Xc++)Wc=oc.fromCharCode(Xc+Rc),Uc+=Wc,Vc[Wc]=oc.fromCharCode(Xc+Pc);Vc[","]="",Vc["．"]=Tc,Vc[Tc]=Tc,Hc=mc("["+Uc+"．,"+Tc+"]","g"),e(kc,!1,!1,{keys:function(a){var b=[];if(!p(a)&&!Fc(a)&&!Gc(a))throw new TypeError("Object required");return s(a,function(a){b.push(a)}),b}}),e(lc,!1,!1,{isArray:function(a){return Dc(a)}}),e(lc,!0,!1,{every:function(a,b){var c=this.length,d=0;for(P(arguments);c>d;){if(d in this&&!a.call(b,this[d],d,this))return!1;d++}return!0},some:function(a,b){var c=this.length,d=0;for(P(arguments);c>d;){if(d in this&&a.call(b,this[d],d,this))return!0;d++}return!1},map:function(a,b){b=arguments[1];var c=this.length,d=0,e=Array(c);for(P(arguments);c>d;)d in this&&(e[d]=a.call(b,this[d],d,this)),d++;return e},filter:function(a){var b=arguments[1],c=this.length,d=0,e=[];for(P(arguments);c>d;)d in this&&a.call(b,this[d],d,this)&&e.push(this[d]),d++;return e},indexOf:function(a,b){return Cc(this)?this.indexOf(a,b):N(this,a,b,1)},lastIndexOf:function(a,b){return Cc(this)?this.lastIndexOf(a,b):N(this,a,b,-1)},forEach:function(a,b){var c=this.length,d=0;for(l(a);c>d;)d in this&&a.call(b,this[d],d,this),d++},reduce:function(a,b){return O(this,a,b)},reduceRight:function(a,b){return O(this,a,b,!0)}}),e(Function,!0,!1,{bind:function(a){var b,c=this,d=j(arguments,null,1);if(!Gc(this))throw new TypeError("Function.prototype.bind called on a non-function");return b=function(){return c.apply(c.prototype&&this instanceof c?this:a,d.concat(j(arguments)))},b.prototype=this.prototype,b}}),e(nc,!1,!1,{now:function(){return(new nc).getTime()}}),function(){var a=y().match(/^\s+$/);try{oc.prototype.trim.call([1])}catch(b){a=!1}e(oc,!0,!a,{trim:function(){return this.toString().trimLeft().trimRight()},trimLeft:function(){return this.replace(mc("^["+y()+"]+"),"")},trimRight:function(){return this.replace(mc("["+y()+"]+$"),"")}})}(),function(){var a=new nc(nc.UTC(1999,11,31)),a=a.toISOString&&"1999-12-31T00:00:00.000Z"===a.toISOString();f(nc,!0,!a,"toISOString,toJSON",function(a,b){a[b]=function(){return B(this.getUTCFullYear(),4)+"-"+B(this.getUTCMonth()+1,2)+"-"+B(this.getUTCDate(),2)+"T"+B(this.getUTCHours(),2)+":"+B(this.getUTCMinutes(),2)+":"+B(this.getUTCSeconds(),2)+"."+B(this.getUTCMilliseconds(),3)+"Z"}})}();var Yc="AlphanumericSortOrder",Zc="AlphanumericSortIgnore",$c="AlphanumericSortIgnoreCase",_c="AlphanumericSortEquivalents",ad="AlphanumericSortNatural";e(lc,!1,!0,{create:function(){var a=[];return j(arguments,function(b){(!q(b)&&"length"in b&&("[object Arguments]"===sc.call(b)||b.callee)||!q(b)&&"length"in b&&!Cc(b)&&!r(b))&&(b=lc.prototype.slice.call(b,0)),a=a.concat(b)
}),a}}),e(lc,!0,!1,{find:function(a,b){return l(a),$(this,a,0,!1,!1,b)},findIndex:function(a,b){var c;return l(a),c=$(this,a,0,!1,!0,b),n(c)?-1:c}}),e(lc,!0,!0,{findFrom:function(a,b,c){return $(this,a,b,c)},findIndexFrom:function(a,b,c){return b=$(this,a,b,c,!0),n(b)?-1:b},findAll:function(a,b,c){var d,e=[];return 0<this.length&&(d=W(a),Y(this,function(a,b,c){d(a,b,c)&&e.push(a)},b,c)),e},count:function(a){return n(a)?this.length:this.findAll(a).length},removeAt:function(a,b){return n(a)?this:(n(b)&&(b=a),this.splice(a,b-a+1),this)},include:function(a,b){return this.clone().add(a,b)},exclude:function(){return lc.prototype.remove.apply(this.clone(),arguments)},clone:function(){return u([],this)},unique:function(a){return _(this,a)},flatten:function(a){return bb(this,a)},union:function(){return _(this.concat(cb(arguments)))},intersect:function(){return ab(this,cb(arguments),!1)},subtract:function(){return ab(this,cb(arguments),!0)},at:function(){return K(this,arguments)},first:function(a){return n(a)?this[0]:(0>a&&(a=0),this.slice(0,a))},last:function(a){return n(a)?this[this.length-1]:this.slice(0>this.length-a?0:this.length-a)},from:function(a){return this.slice(a)},to:function(a){return n(a)&&(a=this.length),this.slice(0,a)},min:function(a,b){return fb(this,a,"min",b)},max:function(a,b){return fb(this,a,"max",b)},least:function(a,b){return fb(this.groupBy.apply(this,[a]),"length","min",b)},most:function(a,b){return fb(this.groupBy.apply(this,[a]),"length","max",b)},sum:function(a){return a=a?this.map(a):this,0<a.length?a.reduce(function(a,b){return a+b}):0},average:function(a){return a=a?this.map(a):this,0<a.length?a.sum()/a.length:0},inGroups:function(a,b){var c=1<arguments.length,d=this,e=[],f=Kc(this.length/a);return t(a,function(a){a*=f;var g=d.slice(a,a+f);c&&g.length<f&&t(f-g.length,function(){g=g.add(b)}),e.push(g)}),e},inGroupsOf:function(a,b){var c,d=[],e=this.length,f=this;return 0===e||0===a?f:(n(a)&&(a=1),n(b)&&(b=null),t(Kc(e/a),function(e){for(c=f.slice(a*e,a*e+a);c.length<a;)c.push(b);d.push(c)}),d)},isEmpty:function(){return 0==this.compact().length},sortBy:function(a,b){var c=this.clone();return c.sort(function(d,e){var f,g;return f=X(d,a,c,[d]),g=X(e,a,c,[e]),(Cc(f)&&Cc(g)?gb(f,g):g>f?-1:f>g?1:0)*(b?-1:1)}),c},randomize:function(){for(var a,b,c=this.concat(),d=c.length;d;)a=qc.random()*d|0,b=c[--d],c[d]=c[a],c[a]=b;return c},zip:function(){var a=j(arguments);return this.map(function(b,c){return[b].concat(a.map(function(a){return c in a?a[c]:null}))})},sample:function(a){var b=this.randomize();return 0<arguments.length?b.slice(0,a):b[0]},each:function(a,b,c){return Y(this,a,b,c),this},add:function(a,b){return(!Bc(pc(b))||isNaN(b))&&(b=this.length),lc.prototype.splice.apply(this,[b,0].concat(a)),this},remove:function(){var a=this;return j(arguments,function(b){var c=0;for(b=W(b);c<a.length;)b(a[c],c,a)?a.splice(c,1):c++}),a},compact:function(a){var b=[];return Y(this,function(c){Dc(c)?b.push(c.compact()):a&&c?b.push(c):a||null==c||c.valueOf()!==c.valueOf()||b.push(c)}),b},groupBy:function(a,b){var c,d=this,e={};return Y(d,function(b,f){c=X(b,a,d,[b,f,d]),e[c]||(e[c]=[]),e[c].push(b)}),b&&s(e,b),e},none:function(){return!this.any.apply(this,arguments)}}),e(lc,!0,!0,{all:lc.prototype.every,any:lc.prototype.some,insert:lc.prototype.add}),e(kc,!1,!0,{map:function(a,b){var c,d,e={};for(c in a)o(a,c)&&(d=a[c],e[c]=X(d,b,a,[c,d,a]));return e},reduce:function(a){var b=kc.keys(v(a)).map(function(b){return a[b]});return b.reduce.apply(b,j(arguments,null,1))},each:function(a,b){return l(b),s(a,b),a},size:function(a){return kc.keys(v(a)).length}});var bd="any all none count find findAll isEmpty".split(" "),cd="sum average min max least most".split(" "),dd=["map","reduce","size"],ed=bd.concat(cd).concat(dd);!function(){function a(){var a=arguments;return 0<a.length&&!Gc(a[0])}var b=lc.prototype.map;f(lc,!0,a,"every,all,some,filter,any,none,find,findIndex",function(a,b){var c=lc.prototype[b];a[b]=function(a){var b=W(a);return c.call(this,function(a,c){return b(a,c,this)})}}),e(lc,!0,a,{map:function(a){return b.call(this,function(b,c){return X(b,a,this,[b,c,this])})}})}(),function(){lc[Yc]="AÁÀÂÃĄBCĆČÇDĎÐEÉÈĚÊËĘFGĞHıIÍÌİÎÏJKLŁMNŃŇÑOÓÒÔPQRŘSŚŠŞTŤUÚÙŮÛÜVWXYÝZŹŻŽÞÆŒØÕÅÄÖ".split("").map(function(a){return a+a.toLowerCase()}).join("");var a={};Y("AÁÀÂÃÄ CÇ EÉÈÊË IÍÌİÎÏ OÓÒÔÕÖ Sß UÚÙÛÜ".split(" "),function(b){var c=b.charAt(0);Y(b.slice(1).split(""),function(b){a[b]=c,a[b.toLowerCase()]=c.toLowerCase()})}),lc[ad]=!0,lc[$c]=!0,lc[_c]=a}(),ib(bd),ib(cd,!0),M(dd,w),lc.AlphanumericSort=gb;var fd,gd,hd,id,jd,kd="ampm hour minute second ampm utc offset_sign offset_hours offset_minutes ampm".split(" "),ld="({t})?\\s*(\\d{1,2}(?:[,.]\\d+)?)(?:{h}([0-5]\\d(?:[,.]\\d+)?)?{m}(?::?([0-5]\\d(?:[,.]\\d+)?){s})?\\s*(?:({t})|(Z)|(?:([+-])(\\d{2,2})(?::?(\\d{2,2}))?)?)?|\\s*({t}))",md={},nd=[],od={},pd={yyyy:function(a){return F(a,"FullYear")},yy:function(a){return F(a,"FullYear")%100},ord:function(a){return a=F(a,"Date"),a+C(a)},tz:function(a){return a.getUTCOffset()},isotz:function(a){return a.getUTCOffset(!0)},Z:function(a){return a.getUTCOffset()},ZZ:function(a){return a.getUTCOffset().replace(/(\d{2})$/,":$1")}},qd=[{name:"year",method:"FullYear",k:!0,b:function(a){return 864e5*(365+(a?a.isLeapYear()?1:0:.25))}},{name:"month",error:.919,method:"Month",k:!0,b:function(a,b){var c,d=30.4375;return a&&(c=a.daysInMonth(),b<=c.days()&&(d=c)),864e5*d}},{name:"week",method:"ISOWeek",b:a(6048e5)},{name:"day",error:.958,method:"Date",k:!0,b:a(864e5)},{name:"hour",method:"Hours",b:a(36e5)},{name:"minute",method:"Minutes",b:a(6e4)},{name:"second",method:"Seconds",b:a(1e3)},{name:"millisecond",method:"Milliseconds",b:a(1)}],rd={};jb.prototype={getMonth:function(a){return Bc(a)?a-1:this.months.indexOf(a)%12},getWeekday:function(a){return this.weekdays.indexOf(a)%7},addFormat:function(a,b,c,d,e){var f,g=c||[],h=this;a=a.replace(/\s+/g,"[,. ]*"),a=a.replace(/\{([^,]+?)\}/g,function(a,b){var d,e,f,i=b.match(/\?$/);f=b.match(/^(\d+)\??$/);var j=b.match(/(\d)(?:-(\d))?/),k=b.replace(/[^a-z]+$/,"");return f?d=h.tokens[f[1]]:h[k]?d=h[k]:h[k+"s"]&&(d=h[k+"s"],j&&(e=[],d.forEach(function(a,b){var c=b%(h.units?8:d.length);c>=j[1]&&c<=(j[2]||j[1])&&e.push(a)}),d=e),d=sb(d)),f?f="(?:"+d+")":(c||g.push(k),f="("+d+")"),i&&(f+="?"),f}),b?(b=Lb(h,e),e=["t","[\\s\\u3000]"].concat(h.timeMarker),f=a.match(/\\d\{\d,\d\}\)+\??$/),qb(h,"(?:"+b+")[,\\s\\u3000]+?"+a,kd.concat(g),d),qb(h,a+"(?:[,\\s]*(?:"+e.join("|")+(f?"+":"*")+")"+b+")?",g.concat(kd),d)):qb(h,a,g,d)}},e(nc,!1,!0,{create:function(){return Mb(arguments)},past:function(){return Mb(arguments,-1)},future:function(){return Mb(arguments,1)},addLocale:function(a,b){return pb(a,b)},setLocale:function(a){var b=ob(a,!1);return gd=b,a&&a!=b.code&&(b.code=a),b},getLocale:function(a){return a?ob(a,!1):gd},addFormat:function(a,b,c){qb(ob(c),a,b)}}),e(nc,!0,!0,{set:function(){var a=ub(arguments);return Kb(this,a[0],a[1])},setWeekday:function(a){return n(a)?void 0:G(this,"Date",F(this,"Date")+a-F(this,"Day"))},setISOWeek:function(a){var b=F(this,"Day")||7;return n(a)?void 0:(this.set({month:0,date:4}),this.set({weekday:1}),a>1&&this.addWeeks(a-1),1!==b&&this.advance({days:b-1}),this.getTime())},getISOWeek:function(){var a;a=this.clone();var b=F(a,"Day")||7;return a.addDays(4-b).reset(),1+Lc(a.daysSince(a.clone().beginningOfYear())/7)},beginningOfISOWeek:function(){var a=this.getDay();return 0===a?a=-6:1!==a&&(a=1),this.setWeekday(a),this.reset()},endOfISOWeek:function(){return 0!==this.getDay()&&this.setWeekday(7),this.endOfDay()},getUTCOffset:function(a){var b=this._utc?0:this.getTimezoneOffset(),c=!0===a?":":"";return!b&&a?"Z":B(Lc(-b/60),2,!0)+c+B(Ic(b%60),2)},utc:function(a){return i(this,"_utc",!0===a||0===arguments.length),this},isUTC:function(){return!!this._utc||0===this.getTimezoneOffset()},advance:function(){var a=ub(arguments,!0);return Kb(this,a[0],a[1],1)},rewind:function(){var a=ub(arguments,!0);return Kb(this,a[0],a[1],-1)},isValid:function(){return!isNaN(this.getTime())},isAfter:function(a,b){return this.getTime()>nc.create(a).getTime()-(b||0)},isBefore:function(a,b){return this.getTime()<nc.create(a).getTime()+(b||0)},isBetween:function(a,b,c){var d=this.getTime();a=nc.create(a).getTime();var e=nc.create(b).getTime();return b=Nc(a,e),a=Oc(a,e),c=c||0,d>b-c&&a+c>d},isLeapYear:function(){var a=F(this,"FullYear");return 0===a%4&&0!==a%100||0===a%400},daysInMonth:function(){return 32-F(new nc(F(this,"FullYear"),F(this,"Month"),32),"Date")},format:function(a,b){return Hb(this,a,!1,b)},relative:function(a,b){return Cc(a)&&(b=a,a=null),Hb(this,a,!0,b)},is:function(a,b,c){var d,e;if(this.isValid()){if(Cc(a))switch(a=a.trim().toLowerCase(),e=this.clone().utc(c),!0){case"future"===a:return this.getTime()>tb().getTime();case"past"===a:return this.getTime()<tb().getTime();case"weekday"===a:return 0<F(e,"Day")&&6>F(e,"Day");case"weekend"===a:return 0===F(e,"Day")||6===F(e,"Day");case-1<(d=fd.weekdays.indexOf(a)%7):return F(e,"Day")===d;case-1<(d=fd.months.indexOf(a)%12):return F(e,"Month")===d}return Ib(this,a,null,b,c)}},reset:function(a){var b,c={};return a=a||"hours","date"===a&&(a="days"),b=qd.some(function(b){return a===b.name||a===b.name+"s"}),c[a]=a.match(/^days?/)?1:0,b?this.set(c,!0):this},clone:function(){var a=new nc(this.getTime());return a.utc(!!this._utc),a}}),e(nc,!0,!0,{iso:function(){return this.toISOString()},getWeekday:nc.prototype.getDay,getUTCWeekday:nc.prototype.getUTCDay}),e(pc,!0,!0,{duration:function(a){return a=ob(a),kb(a,Bb(this),"duration")}}),fd=gd=nc.addLocale("en",{plural:!0,timeMarker:"at",ampm:"am,pm",months:"January,February,March,April,May,June,July,August,September,October,November,December",weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",units:"millisecond:|s,second:|s,minute:|s,hour:|s,day:|s,week:|s,month:|s,year:|s",numbers:"one,two,three,four,five,six,seven,eight,nine,ten",articles:"a,an,the",tokens:"the,st|nd|rd|th,of","short":"{Month} {d}, {yyyy}","long":"{Month} {d}, {yyyy} {h}:{mm}{tt}",full:"{Weekday} {Month} {d}, {yyyy} {h}:{mm}:{ss}{tt}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",modifiers:[{name:"sign",src:"ago|before",value:-1},{name:"sign",src:"from now|after|from|in|later",value:1},{name:"edge",src:"last day",value:-2},{name:"edge",src:"end",value:-1},{name:"edge",src:"first day|beginning",value:1},{name:"shift",src:"last",value:-1},{name:"shift",src:"the|this",value:0},{name:"shift",src:"next",value:1}],dateParse:["{month} {year}","{shift} {unit=5-7}","{0?} {date}{1}","{0?} {edge} of {shift?} {unit=4-7?}{month?}{year?}"],timeParse:"{num} {unit} {sign};{sign} {num} {unit};{0} {num}{1} {day} of {month} {year?};{weekday?} {month} {date}{1?} {year?};{date} {month} {year};{date} {month};{shift} {weekday};{shift} week {weekday};{weekday} {2?} {shift} week;{num} {unit=4-5} {sign} {day};{0?} {date}{1} of {month};{0?}{month?} {date?}{1?} of {shift} {unit=6-7}".split(";")}),jd=qd.concat().reverse(),id=qd.concat(),id.splice(2,1),f(nc,!0,!0,qd,function(a,b,c){function d(a){a/=i;var c=a%1,d=b.error||.999;return c&&Ic(c%1)>d&&(a=Mc(a)),0>a?Kc(a):Lc(a)}var e,f,g=b.name,h=rb(g),i=b.b();b.j="add"+h+"s",e=function(a,b){return d(this.getTime()-nc.create(a,b).getTime())},f=function(a,b){return d(nc.create(a,b).getTime()-this.getTime())},a[g+"sAgo"]=f,a[g+"sUntil"]=f,a[g+"sSince"]=e,a[g+"sFromNow"]=e,a[b.j]=function(a,b){var c={};return c[g]=a,this.advance(c,b)},Nb(b,i),3>c&&["Last","This","Next"].forEach(function(b){a["is"+b+h]=function(){return Ib(this,b+" "+g,"en")}}),4>c&&(a["beginningOf"+h]=function(){var a={};switch(g){case"year":a.year=F(this,"FullYear");break;case"month":a.month=F(this,"Month");break;case"day":a.day=F(this,"Date");break;case"week":a.weekday=0}return this.set(a,!0)},a["endOf"+h]=function(){var a={hours:23,minutes:59,seconds:59,milliseconds:999};switch(g){case"year":a.month=11,a.day=31;break;case"month":a.day=this.daysInMonth();break;case"week":a.weekday=6}return this.set(a,!0)})}),fd.addFormat("([+-])?(\\d{4,4})[-.]?{full_month}[-.]?(\\d{1,2})?",!0,["year_sign","year","month","date"],!1,!0),fd.addFormat("(\\d{1,2})[-.\\/]{full_month}(?:[-.\\/](\\d{2,4}))?",!0,["date","month","year"],!0),fd.addFormat("{full_month}[-.](\\d{4,4})",!1,["month","year"]),fd.addFormat("\\/Date\\((\\d+(?:[+-]\\d{4,4})?)\\)\\/",!1,["timestamp"]),fd.addFormat(Lb(fd),!1,kd),nd=fd.g.slice(0,7).reverse(),fd.g=fd.g.slice(7).concat(nd),Fb("f",function(a){return F(a,"Milliseconds")},!0),Fb("s",function(a){return F(a,"Seconds")}),Fb("m",function(a){return F(a,"Minutes")}),Fb("h",function(a){return F(a,"Hours")%12||12}),Fb("H",function(a){return F(a,"Hours")}),Fb("d",function(a){return F(a,"Date")}),Fb("M",function(a){return F(a,"Month")+1}),function(){function a(a,b){var c=F(a,"Hours");return ob(b).ampm[Lc(c/12)]||""}Eb("t",a,1),Eb("tt",a),Eb("T",a,1,1),Eb("TT",a,null,2)}(),function(){function a(a,b){var c=F(a,"Day");return ob(b).weekdays[c]}Eb("dow",a,3),Eb("Dow",a,3,1),Eb("weekday",a),Eb("Weekday",a,null,1)}(),Db("mon",0,3),Db("month",0),Db("month2",1),Db("month3",2),pd.ms=pd.f,pd.milliseconds=pd.f,pd.seconds=pd.s,pd.minutes=pd.m,pd.hours=pd.h,pd["24hr"]=pd.H,pd["12hr"]=pd.h,pd.date=pd.d,pd.day=pd.d,pd.year=pd.yyyy,f(nc,!0,!0,"short,long,full",function(a,b){a[b]=function(a){return Hb(this,b,!1,a)}}),"〇一二三四五六七八九十百千万".split("").forEach(function(a,b){b>9&&(b=Jc(10,b-9)),md[a]=b}),u(md,Vc),hd=mc("([期週周])?([〇一二三四五六七八九十百千万"+Uc+"]+)(?!昨)","g"),function(){var a=fd.weekdays.slice(0,7),b=fd.months.slice(0,12);f(nc,!0,!0,"today yesterday tomorrow weekday weekend future past".split(" ").concat(a).concat(b),function(a,b){a["is"+rb(b)]=function(a){return this.is(b,0,a)}})}(),nc.utc||(nc.utc={create:function(){return Mb(arguments,0,!0)},past:function(){return Mb(arguments,-1,!0)},future:function(){return Mb(arguments,1,!0)}}),e(nc,!1,!0,{RFC1123:"{Dow}, {dd} {Mon} {yyyy} {HH}:{mm}:{ss} {tz}",RFC1036:"{Weekday}, {dd}-{Mon}-{yy} {HH}:{mm}:{ss} {tz}",ISO8601_DATE:"{yyyy}-{MM}-{dd}",ISO8601_DATETIME:"{yyyy}-{MM}-{dd}T{HH}:{mm}:{ss}.{fff}{isotz}"}),e(Function,!0,!0,{lazy:function(a,b,c){function d(){return j.length<c-(k&&b?1:0)&&j.push([this,arguments]),k||(k=!0,b?e():Ob(d,f,e)),h}var e,f,g,h,i=this,j=[],k=!1;return a=a||1,c=c||1/0,f=Kc(a),g=Mc(f/a)||1,e=function(){var a,b=j.length;if(0!=b){for(a=Oc(b-g,0);b>a;)h=Function.prototype.apply.apply(i,j.shift()),b--;Ob(d,f,function(){k=!1,e()})}},d},throttle:function(a){return this.lazy(a,!0,1)},debounce:function(a){function b(){b.cancel(),Ob(b,a,c,this,arguments)}var c=this;return b},delay:function(a){var b=j(arguments,null,1);return Ob(this,a,this,this,b),this},every:function(a){function b(){c.apply(c,d),Ob(c,a,b)}var c=this,d=arguments,d=1<d.length?j(d,null,1):[];return Ob(c,a,b),c},cancel:function(){var a,b=this.timers;if(Dc(b))for(;a=b.shift();)clearTimeout(a);return this.n=!0,this},after:function(a){var b=this,c=0,d=[];if(Bc(a)){if(0===a)return b.call(),b}else a=1;return function(){var e;return d.push(j(arguments)),c++,c==a?(e=b.call(this,d),c=0,d=[],e):void 0}},once:function(){return this.throttle(1/0,!0)},fill:function(){var a=this,b=j(arguments);return function(){var c=j(arguments);return b.forEach(function(a,b){(null!=a||b>=c.length)&&c.splice(b,0,a)}),a.apply(this,c)}}}),e(pc,!1,!0,{random:function(a,b){var c,d;return 1==arguments.length&&(b=a,a=0),c=Nc(a||0,n(b)?1:b),d=Oc(a||0,n(b)?1:b)+1,Lc(qc.random()*(d-c)+c)}}),e(pc,!0,!0,{log:function(a){return qc.log(this)/(a?qc.log(a):1)},abbr:function(a){return Pb(this,a,"kmbt",0,4)},metric:function(a,b){return Pb(this,a,"nμm kMGTPE",4,n(b)?1:b)},bytes:function(a,b){return Pb(this,a,"kMGTPE",0,n(b)?4:b,!0)+"B"},isInteger:function(){return 0==this%1},isOdd:function(){return!isNaN(this)&&!this.isMultipleOf(2)},isEven:function(){return this.isMultipleOf(2)},isMultipleOf:function(a){return 0===this%a},format:function(a,b,c){var d,e,f,g="";for(n(b)&&(b=","),n(c)&&(c="."),d=(Bc(a)?x(this,a||0).toFixed(Oc(a,0)):this.toString()).replace(/^-/,"").split("."),e=d[0],f=d[1],d=e.length;d>0;d-=3)d<e.length&&(g=b+g),g=e.slice(Oc(0,d-3),d)+g;return f&&(g+=c+z("0",(a||0)-f.length)+f),(0>this?"-":"")+g},hex:function(a){return this.pad(a||1,!1,16)},times:function(a){if(a)for(var b=0;this>b;b++)a.call(this,b);return this.toNumber()},chr:function(){return oc.fromCharCode(this)},pad:function(a,b,c){return B(this,a,b,c)},ordinalize:function(){var a=Ic(this),a=parseInt(a.toString().slice(-2));return this+C(a)},toNumber:function(){return parseFloat(this,10)}}),function(){function a(a){return function(b){return b?x(this,b,a):a(this)}}e(pc,!0,!0,{ceil:a(Kc),round:a(Mc),floor:a(Lc)}),f(pc,!0,!0,"abs,pow,sin,asin,cos,acos,tan,atan,exp,pow,sqrt",function(a,b){a[b]=function(a,c){return qc[b](this,a,c)}})}();var sd=["isObject","isNaN"],td="keys values select reject each merge clone equal watch tap has toQueryString".split(" ");e(kc,!1,!0,{watch:function(a,b,c){if(uc){var d=a[b];kc.defineProperty(a,b,{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=c.call(a,b,d,e)}})}}}),e(kc,!1,function(){return 1<arguments.length},{keys:function(a,b){var c=kc.keys(a);return c.forEach(function(c){b.call(a,c,a[c])}),c}}),e(kc,!1,!0,{isObject:function(a){return r(a)},isNaN:function(a){return Bc(a)&&a.valueOf()!==a.valueOf()},equal:function(a,b){return I(a,b)},extended:function(a){return new w(a)},merge:function(a,b,c,d){var e,f,g,h,i,j,k;if(a&&"string"!=typeof b)for(e in b)if(o(b,e)&&a){if(h=b[e],i=a[e],j=m(i),f=p(h),g=p(i),k=j&&!1===d?i:h,j&&Gc(d)&&(k=d.call(b,e,i,h)),c&&(f||g))if(Ec(h))k=new nc(h.getTime());else{if(!Fc(h)){g||(a[e]=lc.isArray(h)?[]:{}),kc.merge(a[e],h,c,d);continue}k=new mc(h.source,D(h))}a[e]=k}return a},values:function(a,b){var c=[];return s(a,function(d,e){c.push(e),b&&b.call(a,e)}),c},clone:function(a,b){var c;if(!p(a))return a;if(c=sc.call(a),Ec(a,c)&&a.clone)return a.clone();if(Ec(a,c)||Fc(a,c))return new a.constructor(a);if(a instanceof w)c=new w;else if(Dc(a,c))c=[];else{if(!r(a,c))throw new TypeError("Clone must be a basic data type.");c={}}return kc.merge(c,a,b)},fromQueryString:function(a,b){var c=kc.extended();return a=a&&a.toString?a.toString():"",a.replace(/^.*?\?/,"").split("&").forEach(function(a){a=a.split("="),2===a.length&&Qb(c,a[0],decodeURIComponent(a[1]),b)}),c},toQueryString:function(a,b){return Rb(b,a)},tap:function(a,b){var c=b;return Gc(b)||(c=function(){b&&a[b]()}),c.call(a,a),a},has:function(a,b){return o(a,b)},select:function(a){return Tb(a,arguments,!0)},reject:function(a){return Tb(a,arguments,!1)}}),f(kc,!1,!0,zc,function(a,b){var c="is"+b;sd.push(c),a[c]=xc[b]}),e(kc,!1,function(){return 0===arguments.length},{extend:function(){var a=sd.concat(td);"undefined"!=typeof ed&&(a=a.concat(ed)),M(a,kc)}}),M(td,w),Ub.prototype.toString=function(){return this.isValid()?this.start+".."+this.end:"Invalid Range"},e(Ub,!0,!0,{isValid:function(){return Wb(this.start)&&Wb(this.end)&&typeof this.start==typeof this.end},span:function(){return this.isValid()?Ic((Cc(this.end)?this.end.charCodeAt(0):this.end)-(Cc(this.start)?this.start.charCodeAt(0):this.start))+1:0/0},contains:function(a){return null==a?!1:a.start&&a.end?a.start>=this.start&&a.start<=this.end&&a.end>=this.start&&a.end<=this.end:a>=this.start&&a<=this.end},every:function(a,b){var c,d=this.start,e=this.end,f=d>e,g=d,h=0,i=[];for(Gc(a)&&(b=a,a=null),a=a||1,Bc(d)?c=Zb:Cc(d)?c=Yb:Ec(d)&&(c=a,Bc(c)?a=c:(d=c.toLowerCase().match(/^(\d+)?\s?(\w+?)s?$/i),c=parseInt(d[1])||1,d=d[2].slice(0,1).toUpperCase()+d[2].slice(1),d.match(/hour|minute|second/i)?d+="s":"Year"===d?d="FullYear":"Day"===d&&(d="Date"),a=[c,d]),c=Xb),f&&a>0&&(a*=-1);f?g>=e:e>=g;)i.push(g),b&&b(g,h),g=c(g,a),h++;return i},union:function(a){return new Ub(this.start<a.start?this.start:a.start,this.end>a.end?this.end:a.end)},intersect:function(a){return a.start>this.end||a.end<this.start?new Ub(0/0,0/0):new Ub(this.start>a.start?this.start:a.start,this.end<a.end?this.end:a.end)},clone:function(){return new Ub(this.start,this.end)},clamp:function(a){var b=this.start,c=this.end,d=b>c?c:b,b=b>c?b:c;return Vb(d>a?d:a>b?b:a)}}),[pc,oc,nc].forEach(function(a){e(a,!1,!0,{range:function(b,c){return a.create&&(b=a.create(b),c=a.create(c)),new Ub(b,c)}})}),e(pc,!0,!0,{upto:function(a,b,c){return pc.range(this,a).every(c,b)},clamp:function(a,b){return new Ub(a,b).clamp(this)},cap:function(a){return this.clamp(void 0,a)}}),e(pc,!0,!0,{downto:pc.prototype.upto}),e(lc,!1,function(a){return a instanceof Ub},{create:function(a){return a.every()}}),e(mc,!1,!0,{escape:function(a){return E(a)}}),e(mc,!0,!0,{getFlags:function(){return D(this)},setFlags:function(a){return mc(this.source,a)},addFlag:function(a){return this.setFlags(D(this,a))},removeFlag:function(a){return this.setFlags(D(this).replace(a,""))}});var ud,vd;e(oc,!0,!1,{repeat:function(a){return a=$b(a),z(this,a)}}),e(oc,!0,function(a){return Fc(a)||2<arguments.length},{startsWith:function(a){var b=arguments,c=b[1],b=b[2],d=this;return c&&(d=d.slice(c)),n(b)&&(b=!0),c=Fc(a)?a.source.replace("^",""):E(a),mc("^"+c,b?"":"i").test(d)},endsWith:function(a){var b=arguments,c=b[1],b=b[2],d=this;return m(c)&&(d=d.slice(0,c)),n(b)&&(b=!0),c=Fc(a)?a.source.replace("$",""):E(a),mc(c+"$",b?"":"i").test(d)}}),e(oc,!0,!0,{escapeRegExp:function(){return E(this)},escapeURL:function(a){return a?encodeURIComponent(this):encodeURI(this)},unescapeURL:function(a){return a?decodeURI(this):decodeURIComponent(this)},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2f;")},unescapeHTML:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&#x2f;/g,"/").replace(/&amp;/g,"&")},encodeBase64:function(){return ud(unescape(encodeURIComponent(this)))},decodeBase64:function(){return decodeURIComponent(escape(vd(this)))},each:function(a,b){var c,d,e;if(Gc(a)?(b=a,a=/[\s\S]/g):a?Cc(a)?a=mc(E(a),"gi"):Fc(a)&&(a=mc(a.source,D(a,"g"))):a=/[\s\S]/g,c=this.match(a)||[],b)for(d=0,e=c.length;e>d;d++)c[d]=b.call(this,c[d],d,c)||c[d];return c},shift:function(a){var b="";return a=a||0,this.codes(function(c){b+=oc.fromCharCode(c+a)}),b},codes:function(a){var b,c,d=[];for(b=0,c=this.length;c>b;b++){var e=this.charCodeAt(b);d.push(e),a&&a.call(this,e,b)}return d},chars:function(a){return this.each(a)},words:function(a){return this.trim().each(/\S+/g,a)},lines:function(a){return this.trim().each(/^.*$/gm,a)},paragraphs:function(a){var b=this.trim().split(/[\r\n]{2,}/);return b=b.map(function(b){if(a)var c=a.call(b);return c?c:b})},isBlank:function(){return 0===this.trim().length},has:function(a){return-1!==this.search(Fc(a)?a:E(a))},add:function(a,b){return b=n(b)?this.length:b,this.slice(0,b)+a+this.slice(b)},remove:function(a){return this.replace(a,"")},reverse:function(){return this.split("").reverse().join("")},compact:function(){return this.trim().replace(/([\r\n\s\u3000])+/g,function(a,b){return"　"===b?b:" "})},at:function(){return K(this,arguments,!0)},from:function(a){return this.slice(cc(this,a,!0))},to:function(a){return n(a)&&(a=this.length),this.slice(0,cc(this,a))},dasherize:function(){return this.underscore().replace(/_/g,"-")},underscore:function(){return this.replace(/[-\s]+/g,"_").replace(oc.Inflector&&oc.Inflector.acronymRegExp,function(a,b){return(b>0?"_":"")+a.toLowerCase()}).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()},camelize:function(a){return this.underscore().replace(/(^|_)([^_]+)/g,function(b,c,d,e){return b=(b=oc.Inflector)&&b.acronyms[d],b=Cc(b)?b:void 0,e=!1!==a||e>0,b?e?b:b.toLowerCase():e?d.capitalize():d})},spacify:function(){return this.underscore().replace(/_/g," ")},stripTags:function(){var a=this;return k(0<arguments.length?arguments:[""],function(b){a=a.replace(mc("</?"+E(b)+"[^<>]*>","gi"),"")}),a},removeTags:function(){var a=this;return k(0<arguments.length?arguments:["\\S+"],function(b){b=mc("<("+b+")[^<>]*(?:\\/>|>.*?<\\/\\1>)","gi"),a=a.replace(b,"")}),a},truncate:function(a,b,c){return ac(this,a,b,c)},truncateOnWord:function(a,b,c){return ac(this,a,b,c,!0)},pad:function(a,b){var c,d;return a=$b(a),c=Oc(0,a-this.length)/2,d=Lc(c),c=Kc(c),_b(d,b)+this+_b(c,b)},padLeft:function(a,b){return a=$b(a),_b(Oc(0,a-this.length),b)+this},padRight:function(a,b){return a=$b(a),this+_b(Oc(0,a-this.length),b)},first:function(a){return n(a)&&(a=1),this.substr(0,a)},last:function(a){return n(a)&&(a=1),this.substr(0>this.length-a?0:this.length-a)},toNumber:function(a){return A(this,a)},capitalize:function(a){var b;return this.toLowerCase().replace(a?/[^']/g:/^\S/,function(a){var c,d=a.toUpperCase();return c=b?a:d,b=d!==a,c})},assign:function(){var a={};return k(arguments,function(b,c){p(b)?u(a,b):a[c+1]=b}),this.replace(/\{([^{]+?)\}/g,function(b,c){return o(a,c)?a[c]:b})}}),e(oc,!0,!0,{insert:oc.prototype.add}),function(a){if(rc.btoa)ud=rc.btoa,vd=rc.atob;else{var b=/[^A-Za-z0-9\+\/\=]/g;ud=function(b){var c,d,e,f,g,h,i="",j=0;do c=b.charCodeAt(j++),d=b.charCodeAt(j++),e=b.charCodeAt(j++),f=c>>2,c=(3&c)<<4|d>>4,g=(15&d)<<2|e>>6,h=63&e,isNaN(d)?g=h=64:isNaN(e)&&(h=64),i=i+a.charAt(f)+a.charAt(c)+a.charAt(g)+a.charAt(h);while(j<b.length);return i},vd=function(c){var d,e,f,g,h,i="",j=0;if(c.match(b))throw Error("String contains invalid base64 characters");c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");do d=a.indexOf(c.charAt(j++)),e=a.indexOf(c.charAt(j++)),g=a.indexOf(c.charAt(j++)),h=a.indexOf(c.charAt(j++)),d=d<<2|e>>4,e=(15&e)<<4|g>>2,f=(3&g)<<6|h,i+=oc.fromCharCode(d),64!=g&&(i+=oc.fromCharCode(e)),64!=h&&(i+=oc.fromCharCode(f));while(j<c.length);return i}}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=");var wd,xd,yd=[],zd=[],Ad=[],Bd=[],Cd={};xd={acronym:function(a){Cd[a.toLowerCase()]=a,a=kc.keys(Cd).map(function(a){return Cd[a]}),xd.acronymRegExp=mc(a.join("|"),"g")},plural:function(a,b){ec(yd,a,b)},singular:function(a,b){ec(zd,a,b)},irregular:function(a,b){var c=a.first(),d=a.from(1),e=b.first(),f=b.from(1),g=e.toUpperCase(),h=e.toLowerCase(),i=c.toUpperCase(),j=c.toLowerCase();dc(a),dc(b),i==g?(xd.plural(new mc("({1}){2}$".assign(c,d),"i"),"$1"+f),xd.plural(new mc("({1}){2}$".assign(e,f),"i"),"$1"+f),xd.singular(new mc("({1}){2}$".assign(e,f),"i"),"$1"+d)):(xd.plural(new mc("{1}{2}$".assign(i,d)),g+f),xd.plural(new mc("{1}{2}$".assign(j,d)),h+f),xd.plural(new mc("{1}{2}$".assign(g,f)),g+f),xd.plural(new mc("{1}{2}$".assign(h,f)),h+f),xd.singular(new mc("{1}{2}$".assign(g,f)),i+d),xd.singular(new mc("{1}{2}$".assign(h,f)),j+d))},uncountable:function(a){var b=lc.isArray(a)?a:j(arguments);Ad=Ad.concat(b)},human:function(a,b){Bd.unshift({l:a,p:b})},clear:function(a){fc(a,"singulars")&&(zd=[]),fc(a,"plurals")&&(yd=[]),fc(a,"uncountables")&&(Ad=[]),fc(a,"humans")&&(Bd=[]),fc(a,"acronyms")&&(Cd={})}},wd="and or nor a an the so but to of at by from into on onto off out in over with for".split(" "),xd.plural(/$/,"s"),xd.plural(/s$/gi,"s"),xd.plural(/(ax|test)is$/gi,"$1es"),xd.plural(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1i"),xd.plural(/(census|alias|status)$/gi,"$1es"),xd.plural(/(bu)s$/gi,"$1ses"),xd.plural(/(buffal|tomat)o$/gi,"$1oes"),xd.plural(/([ti])um$/gi,"$1a"),xd.plural(/([ti])a$/gi,"$1a"),xd.plural(/sis$/gi,"ses"),xd.plural(/f+e?$/gi,"ves"),xd.plural(/(cuff|roof)$/gi,"$1s"),xd.plural(/([ht]ive)$/gi,"$1s"),xd.plural(/([^aeiouy]o)$/gi,"$1es"),xd.plural(/([^aeiouy]|qu)y$/gi,"$1ies"),xd.plural(/(x|ch|ss|sh)$/gi,"$1es"),xd.plural(/(matr|vert|ind)(?:ix|ex)$/gi,"$1ices"),xd.plural(/([ml])ouse$/gi,"$1ice"),xd.plural(/([ml])ice$/gi,"$1ice"),xd.plural(/^(ox)$/gi,"$1en"),xd.plural(/^(oxen)$/gi,"$1"),xd.plural(/(quiz)$/gi,"$1zes"),xd.plural(/(phot|cant|hom|zer|pian|portic|pr|quart|kimon)o$/gi,"$1os"),xd.plural(/(craft)$/gi,"$1"),xd.plural(/([ft])[eo]{2}(th?)$/gi,"$1ee$2"),xd.singular(/s$/gi,""),xd.singular(/([pst][aiu]s)$/gi,"$1"),xd.singular(/([aeiouy])ss$/gi,"$1ss"),xd.singular(/(n)ews$/gi,"$1ews"),xd.singular(/([ti])a$/gi,"$1um"),xd.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/gi,"$1$2sis"),xd.singular(/(^analy)ses$/gi,"$1sis"),xd.singular(/(i)(f|ves)$/i,"$1fe"),xd.singular(/([aeolr]f?)(f|ves)$/i,"$1f"),xd.singular(/([ht]ive)s$/gi,"$1"),xd.singular(/([^aeiouy]|qu)ies$/gi,"$1y"),xd.singular(/(s)eries$/gi,"$1eries"),xd.singular(/(m)ovies$/gi,"$1ovie"),xd.singular(/(x|ch|ss|sh)es$/gi,"$1"),xd.singular(/([ml])(ous|ic)e$/gi,"$1ouse"),xd.singular(/(bus)(es)?$/gi,"$1"),xd.singular(/(o)es$/gi,"$1"),xd.singular(/(shoe)s?$/gi,"$1"),xd.singular(/(cris|ax|test)[ie]s$/gi,"$1is"),xd.singular(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1us"),xd.singular(/(census|alias|status)(es)?$/gi,"$1"),xd.singular(/^(ox)(en)?/gi,"$1"),xd.singular(/(vert|ind)(ex|ices)$/gi,"$1ex"),xd.singular(/(matr)(ix|ices)$/gi,"$1ix"),xd.singular(/(quiz)(zes)?$/gi,"$1"),xd.singular(/(database)s?$/gi,"$1"),xd.singular(/ee(th?)$/gi,"oo$1"),xd.irregular("person","people"),xd.irregular("man","men"),xd.irregular("child","children"),xd.irregular("sex","sexes"),xd.irregular("move","moves"),xd.irregular("save","saves"),xd.irregular("cow","kine"),xd.irregular("goose","geese"),xd.irregular("zombie","zombies"),xd.uncountable("equipment information rice money species series fish sheep jeans".split(" ")),e(oc,!0,!0,{pluralize:function(){return hc(this,!0)},singularize:function(){return hc(this,!1)},humanize:function(){var a,b=ic(this,Bd),b=b.replace(/_id$/g,""),b=b.replace(/(_)?([a-z\d]*)/gi,function(b,c,d){return a=o(Cd,d)?Cd[d]:null,(c?" ":"")+(a||d.toLowerCase())});return jc(b)},titleize:function(){var a,b,c,d=/[.:;!]$/;return this.spacify().humanize().words(function(e,f,g){return a=d.test(e),c=0==f||f==g.length-1||a||b,b=a,c||-1===wd.indexOf(e)?jc(e):e}).join(" ")},parameterize:function(a){var b=this;return void 0===a&&(a="-"),b.normalize&&(b=b.normalize()),b=b.replace(/[^a-z0-9\-_]+/gi,a),a&&(b=b.replace(new mc("^{sep}+|{sep}+$|({sep}){sep}+".assign({sep:E(a)}),"g"),"$1")),encodeURI(b.toLowerCase())}}),oc.Inflector=xd,oc.Inflector.acronyms=Cd}(),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.IPv6=b(a)}(this,function(a){var b=a&&a.IPv6;return{best:function(a){a=a.toLowerCase().split(":");var b=a.length,c=8;""===a[0]&&""===a[1]&&""===a[2]?(a.shift(),a.shift()):""===a[0]&&""===a[1]?a.shift():""===a[b-1]&&""===a[b-2]&&a.pop(),b=a.length,-1!==a[b-1].indexOf(".")&&(c=7);var d;for(d=0;b>d&&""!==a[d];d++);if(c>d)for(a.splice(d,1,"0000");a.length<c;)a.splice(d,0,"0000");for(d=0;c>d;d++){for(var b=a[d].split(""),e=0;3>e&&("0"===b[0]&&1<b.length);e++)b.splice(0,1);a[d]=b.join("")}var b=-1,f=e=0,g=-1,h=!1;for(d=0;c>d;d++)h?"0"===a[d]?f+=1:(h=!1,f>e&&(b=g,e=f)):"0"===a[d]&&(h=!0,g=d,f=1);for(f>e&&(b=g,e=f),e>1&&a.splice(b,e,""),b=a.length,c="",""===a[0]&&(c=":"),d=0;b>d&&(c+=a[d],d!==b-1);d++)c+=":";return""===a[b-1]&&(c+=":"),c},noConflict:function(){return a.IPv6===this&&(a.IPv6=b),this}}}),function(a){function b(a){throw RangeError(s[a])}function c(a,b){for(var c=a.length;c--;)a[c]=b(a[c]);return a}function d(a,b){return c(a.split(r),b).join(".")}function e(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function f(a){return c(a,function(a){var b="";return a>65535&&(a-=65536,b+=u(a>>>10&1023|55296),a=56320|1023&a),b+=u(a)}).join("")}function g(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function h(a,b,c){var d=0;for(a=c?t(a/700):a>>1,a+=t(a/b);a>455;d+=36)a=t(a/35);return t(d+36*a/(a+38))}function i(a){var c,d,e,g,i,j,k=[],l=a.length,m=0,n=128,o=72;for(d=a.lastIndexOf("-"),0>d&&(d=0),e=0;d>e;++e)128<=a.charCodeAt(e)&&b("not-basic"),k.push(a.charCodeAt(e));for(d=d>0?d+1:0;l>d;){for(e=m,c=1,g=36;d>=l&&b("invalid-input"),i=a.charCodeAt(d++),i=10>i-48?i-22:26>i-65?i-65:26>i-97?i-97:36,(i>=36||i>t((2147483647-m)/c))&&b("overflow"),m+=i*c,j=o>=g?1:g>=o+26?26:g-o,!(j>i);g+=36)i=36-j,c>t(2147483647/i)&&b("overflow"),c*=i;
c=k.length+1,o=h(m-e,c,0==e),t(m/c)>2147483647-n&&b("overflow"),n+=t(m/c),m%=c,k.splice(m++,0,n)}return f(k)}function j(a){var c,d,f,i,j,k,l,m,n,o,p,q,r=[];for(a=e(a),o=a.length,c=128,d=0,j=72,k=0;o>k;++k)n=a[k],128>n&&r.push(u(n));for((f=i=r.length)&&r.push("-");o>f;){for(l=2147483647,k=0;o>k;++k)n=a[k],n>=c&&l>n&&(l=n);for(p=f+1,l-c>t((2147483647-d)/p)&&b("overflow"),d+=(l-c)*p,c=l,k=0;o>k;++k)if(n=a[k],c>n&&2147483647<++d&&b("overflow"),n==c){for(m=d,l=36;n=j>=l?1:l>=j+26?26:l-j,!(n>m);l+=36)q=m-n,m=36-n,r.push(u(g(n+q%m,0))),m=t(q/m);r.push(u(g(m,0))),j=h(d,p,f==i),d=0,++f}++d,++c}return r.join("")}var k="object"==typeof exports&&exports,l="object"==typeof module&&module&&module.exports==k&&module,m="object"==typeof global&&global;(m.global===m||m.window===m)&&(a=m);var n,o,p=/^xn--/,q=/[^ -~]/,r=/\x2E|\u3002|\uFF0E|\uFF61/g,s={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},t=Math.floor,u=String.fromCharCode;if(n={version:"1.2.3",ucs2:{decode:e,encode:f},decode:i,encode:j,toASCII:function(a){return d(a,function(a){return q.test(a)?"xn--"+j(a):a})},toUnicode:function(a){return d(a,function(a){return p.test(a)?i(a.slice(4).toLowerCase()):a})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return n});else if(k&&!k.nodeType)if(l)l.exports=n;else for(o in n)n.hasOwnProperty(o)&&(k[o]=n[o]);else a.punycode=n}(this),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.SecondLevelDomains=b(a)}(this,function(a){var b=a&&a.SecondLevelDomains,c={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(a){var b=a.lastIndexOf(".");if(0>=b||b>=a.length-1)return!1;var d=a.lastIndexOf(".",b-1);if(0>=d||d>=b-1)return!1;var e=c.list[a.slice(b+1)];return e?0<=e.indexOf(" "+a.slice(d+1,b)+" "):!1},is:function(a){var b=a.lastIndexOf(".");if(0>=b||b>=a.length-1||0<=a.lastIndexOf(".",b-1))return!1;var d=c.list[a.slice(b+1)];return d?0<=d.indexOf(" "+a.slice(0,b)+" "):!1},get:function(a){var b=a.lastIndexOf(".");if(0>=b||b>=a.length-1)return null;var d=a.lastIndexOf(".",b-1);if(0>=d||d>=b-1)return null;var e=c.list[a.slice(b+1)];return!e||0>e.indexOf(" "+a.slice(d+1,b)+" ")?null:a.slice(d+1)},noConflict:function(){return a.SecondLevelDomains===this&&(a.SecondLevelDomains=b),this}};return c}),function(a,b){"object"==typeof exports?module.exports=b(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],b):a.URI=b(a.punycode,a.IPv6,a.SecondLevelDomains,a)}(this,function(a,b,c,d){function e(a,b){return this instanceof e?(void 0===a&&(a="undefined"!=typeof location?location.href+"":""),this.href(a),void 0!==b?this.absoluteTo(b):this):new e(a,b)}function f(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function g(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1)}function h(a){return"Array"===g(a)}function i(a,b){var c,d;if(h(b)){for(c=0,d=b.length;d>c;c++)if(!i(a,b[c]))return!1;return!0}var e=g(b);for(c=0,d=a.length;d>c;c++)if("RegExp"===e){if("string"==typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function j(a,b){if(!h(a)||!h(b)||a.length!==b.length)return!1;a.sort(),b.sort();for(var c=0,d=a.length;d>c;c++)if(a[c]!==b[c])return!1;return!0}function k(a){return escape(a)}function l(a){return encodeURIComponent(a).replace(/[!'()*]/g,k).replace(/\*/g,"%2A")}var m=d&&d.URI;e.version="1.14.0";var n=e.prototype,o=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}},e.duplicateQueryParameters=!1,e.escapeQuerySpace=!0,e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,e.idn_expression=/[^a-z0-9\.-]/i,e.punycode_expression=/(xn--)/i,e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi,e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/},e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},e.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:e.domAttributes[b]}},e.encode=l,e.decode=decodeURIComponent,e.iso8859=function(){e.encode=escape,e.decode=unescape},e.unicode=function(){e.encode=l,e.decode=decodeURIComponent},e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},e.encodeQuery=function(a,b){var c=e.encode(a+"");return void 0===b&&(b=e.escapeQuerySpace),b?c.replace(/%20/g,"+"):c},e.decodeQuery=function(a,b){a+="",void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}},e.recodePath=function(a){a=(a+"").split("/");for(var b=0,c=a.length;c>b;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")},e.decodePath=function(a){a=(a+"").split("/");for(var b=0,c=a.length;c>b;b++)a[b]=e.decodePathSegment(a[b]);return a.join("/")};var p,q={encode:"encode",decode:"decode"},r=function(a,b){return function(c){try{return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}catch(d){return c}}};for(p in q)e[p+"PathSegment"]=r("pathname",q[p]);e.encodeReserved=r("reserved","encode"),e.parse=function(a,b){var c;return b||(b={}),c=a.indexOf("#"),c>-1&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c)),c=a.indexOf("?"),c>-1&&(b.query=a.substring(c+1)||null,a=a.substring(0,c)),"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"),c>-1&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0))),b.path=a,b},e.parseHost=function(a,b){var c,d=a.indexOf("/");return-1===d&&(d=a.length),"["===a.charAt(0)?(c=a.indexOf("]"),b.hostname=a.substring(1,c)||null,b.port=a.substring(c+2,d)||null,"/"===b.port&&(b.port=null)):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,d)||null,b.port=null):(c=a.substring(0,d).split(":"),b.hostname=c[0]||null,b.port=c[1]||null),b.hostname&&"/"!==a.substring(d).charAt(0)&&(d++,a="/"+a),a.substring(d)||"/"},e.parseAuthority=function(a,b){return a=e.parseUserinfo(a,b),e.parseHost(a,b)},e.parseUserinfo=function(a,b){var c=a.indexOf("/"),d=a.lastIndexOf("@",c>-1?c:a.length-1);return d>-1&&(-1===c||c>d)?(c=a.substring(0,d).split(":"),b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(d+1)):(b.username=null,b.password=null),a},e.parseQuery=function(a,b){if(!a)return{};if(a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!a)return{};for(var c,d,f={},g=a.split("&"),h=g.length,i=0;h>i;i++)c=g[i].split("="),d=e.decodeQuery(c.shift(),b),c=c.length?e.decodeQuery(c.join("="),b):null,f[d]?("string"==typeof f[d]&&(f[d]=[f[d]]),f[d].push(c)):f[d]=c;return f},e.build=function(a){var b="";return a.protocol&&(b+=a.protocol+":"),a.urn||!b&&!a.hostname||(b+="//"),b+=e.buildAuthority(a)||"","string"==typeof a.path&&("/"!==a.path.charAt(0)&&"string"==typeof a.hostname&&(b+="/"),b+=a.path),"string"==typeof a.query&&a.query&&(b+="?"+a.query),"string"==typeof a.fragment&&a.fragment&&(b+="#"+a.fragment),b},e.buildHost=function(a){var b="";return a.hostname?(b=e.ip6_expression.test(a.hostname)?b+("["+a.hostname+"]"):b+a.hostname,a.port&&(b+=":"+a.port),b):""},e.buildAuthority=function(a){return e.buildUserinfo(a)+e.buildHost(a)},e.buildUserinfo=function(a){var b="";return a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@"),b},e.buildQuery=function(a,b,c){var d,f,g,i,j="";for(f in a)if(o.call(a,f)&&f)if(h(a[f]))for(d={},g=0,i=a[f].length;i>g;g++)void 0!==a[f][g]&&void 0===d[a[f][g]+""]&&(j+="&"+e.buildQueryParameter(f,a[f][g],c),!0!==b&&(d[a[f][g]+""]=!0));else void 0!==a[f]&&(j+="&"+e.buildQueryParameter(f,a[f],c));return j.substring(1)},e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")},e.addQuery=function(a,b,c){if("object"==typeof b)for(var d in b)o.call(b,d)&&e.addQuery(a,d,b[d]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");void 0===a[b]?a[b]=c:("string"==typeof a[b]&&(a[b]=[a[b]]),h(c)||(c=[c]),a[b]=a[b].concat(c))}},e.removeQuery=function(a,b,c){var d;if(h(b))for(c=0,d=b.length;d>c;c++)a[b[c]]=void 0;else if("object"==typeof b)for(d in b)o.call(b,d)&&e.removeQuery(a,d,b[d]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");if(void 0!==c){if(a[b]===c)a[b]=void 0;else if(h(a[b])){d=a[b];var f,g,i={};if(h(c))for(f=0,g=c.length;g>f;f++)i[c[f]]=!0;else i[c]=!0;for(f=0,g=d.length;g>f;f++)void 0!==i[d[f]]&&(d.splice(f,1),g--,f--);a[b]=d}}else a[b]=void 0}},e.hasQuery=function(a,b,c,d){if("object"==typeof b){for(var f in b)if(o.call(b,f)&&!e.hasQuery(a,f,b[f]))return!1;return!0}if("string"!=typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(g(c)){case"Undefined":return b in a;case"Boolean":return a=Boolean(h(a[b])?a[b].length:a[b]),c===a;case"Function":return!!c(a[b],b,a);case"Array":return h(a[b])?(d?i:j)(a[b],c):!1;case"RegExp":return h(a[b])?d?i(a[b],c):!1:Boolean(a[b]&&a[b].match(c));case"Number":c=String(c);case"String":return h(a[b])?d?i(a[b],c):!1:a[b]===c;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},e.commonPath=function(a,b){var c,d=Math.min(a.length,b.length);for(c=0;d>c;c++)if(a.charAt(c)!==b.charAt(c)){c--;break}return 1>c?a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"":(("/"!==a.charAt(c)||"/"!==b.charAt(c))&&(c=a.substring(0,c).lastIndexOf("/")),a.substring(0,c+1))},e.withinString=function(a,b,c){c||(c={});var d=c.start||e.findUri.start,f=c.end||e.findUri.end,g=c.trim||e.findUri.trim,h=/[a-z0-9-]=["']?$/i;for(d.lastIndex=0;;){var i=d.exec(a);if(!i)break;if(i=i.index,c.ignoreHtml){var j=a.slice(Math.max(i-3,0),i);if(j&&h.test(j))continue}var j=i+a.slice(i).search(f),k=a.slice(i,j).replace(g,"");c.ignore&&c.ignore.test(k)||(j=i+k.length,k=b(k,i,j,a),a=a.slice(0,i)+k+a.slice(j),d.lastIndex=i+k.length)}return d.lastIndex=0,a},e.ensureValidHostname=function(b){if(b.match(e.invalid_hostname_characters)){if(!a)throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(a.toASCII(b).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-]')}},e.noConflict=function(a){return a?(a={URI:this.noConflict()},d.URITemplate&&"function"==typeof d.URITemplate.noConflict&&(a.URITemplate=d.URITemplate.noConflict()),d.IPv6&&"function"==typeof d.IPv6.noConflict&&(a.IPv6=d.IPv6.noConflict()),d.SecondLevelDomains&&"function"==typeof d.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=d.SecondLevelDomains.noConflict()),a):(d.URI===this&&(d.URI=m),this)},n.build=function(a){return!0===a?this._deferred_build=!0:(void 0===a||this._deferred_build)&&(this._string=e.build(this._parts),this._deferred_build=!1),this},n.clone=function(){return new e(this)},n.valueOf=n.toString=function(){return this.build(!1)._string},q={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},r=function(a){return function(b,c){return void 0===b?this._parts[a]||"":(this._parts[a]=b||null,this.build(!c),this)}};for(p in q)n[p]=r(q[p]);q={query:"?",fragment:"#"},r=function(a,b){return function(c,d){return void 0===c?this._parts[a]||"":(null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!d),this)}};for(p in q)n[p]=r(p,q[p]);q={search:["?","query"],hash:["#","fragment"]},r=function(a,b){return function(c,d){var e=this[a](c,d);return"string"==typeof e&&e.length?b+e:e}};for(p in q)n[p]=r(q[p][1],q[p][0]);n.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}return this._parts.path=a?e.recodePath(a):"/",this.build(!b),this},n.path=n.pathname,n.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="",this._parts=e._parts();var d=a instanceof e,f="object"==typeof a&&(a.hostname||a.path||a.pathname);if(a.nodeName&&(f=e.getDomAttribute(a),a=a[f]||"",f=!1),!d&&f&&void 0!==a.pathname&&(a=a.toString()),"string"==typeof a)this._parts=e.parse(a,this._parts);else{if(!d&&!f)throw new TypeError("invalid input");for(c in d=d?a._parts:a)o.call(this._parts,c)&&(this._parts[c]=d[c])}return this.build(!b),this},n.is=function(a){var b=!1,d=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!this._parts.urn;switch(this._parts.hostname&&(k=!1,d=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=d||f,h=(g=!b)&&c&&c.has(this._parts.hostname),i=g&&e.idn_expression.test(this._parts.hostname),j=g&&e.punycode_expression.test(this._parts.hostname)),a.toLowerCase()){case"relative":return k;case"absolute":return!k;case"domain":case"name":return g;case"sld":return h;case"ip":return b;case"ip4":case"ipv4":case"inet4":return d;case"ip6":case"ipv6":case"inet6":return f;case"idn":return i;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var s=n.protocol,t=n.port,u=n.hostname;n.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return s.call(this,a,b)},n.scheme=n.protocol,n.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');return t.call(this,a,b)},n.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};e.parseHost(a,c),a=c.hostname}return u.call(this,a,b)},n.host=function(a,b){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?e.buildHost(this._parts):"":(e.parseHost(a,this._parts),this.build(!b),this)},n.authority=function(a,b){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?e.buildAuthority(this._parts):"":(e.parseAuthority(a,this._parts),this.build(!b),this)},n.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}return"@"!==a[a.length-1]&&(a+="@"),e.parseUserinfo(a,this._parts),this.build(!b),this},n.resource=function(a,b){var c;return void 0===a?this.path()+this.search()+this.hash():(c=e.parse(a),this._parts.path=c.path,this._parts.query=c.query,this._parts.fragment=c.fragment,this.build(!b),this)},n.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}return c=this._parts.hostname.length-this.domain().length,c=this._parts.hostname.substring(0,c),c=new RegExp("^"+f(c)),a&&"."!==a.charAt(a.length-1)&&(a+="."),a&&e.ensureValidHostname(a),this._parts.hostname=this._parts.hostname.replace(c,a),this.build(!b),this},n.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);return c&&2>c.length?this._parts.hostname:(c=this._parts.hostname.length-this.tld(b).length-1,c=this._parts.hostname.lastIndexOf(".",c-1)+1,this._parts.hostname.substring(c)||"")}if(!a)throw new TypeError("cannot set domain empty");return e.ensureValidHostname(a),!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(c=new RegExp(f(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a)),this.build(!b),this},n.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.lastIndexOf("."),d=this._parts.hostname.substring(d+1);return!0!==b&&c&&c.list[d.toLowerCase()]?c.get(this._parts.hostname)||d:d}if(!a)throw new TypeError("cannot set TLD empty");if(a.match(/[^a-zA-Z0-9-]/)){if(!c||!c.is(a))throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');d=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(d,a)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");d=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(d,a)}return this.build(!b),this},n.directory=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}return c=this._parts.path.length-this.filename().length,c=this._parts.path.substring(0,c),c=new RegExp("^"+f(c)),this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a)),a&&"/"!==a.charAt(a.length-1)&&(a+="/"),a=e.recodePath(a),this._parts.path=this._parts.path.replace(c,a),this.build(!b),this},n.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),c=this._parts.path.substring(c+1);return a?e.decodePathSegment(c):c}c=!1,"/"===a.charAt(0)&&(a=a.substring(1)),a.match(/\.?\//)&&(c=!0);var d=new RegExp(f(this.filename())+"$");return a=e.recodePath(a),this._parts.path=this._parts.path.replace(d,a),c?this.normalizePath(b):this.build(!b),this},n.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),d=c.lastIndexOf(".");return-1===d?"":(c=c.substring(d+1),c=/^[a-z0-9%]+$/i.test(c)?c:"",a?e.decodePathSegment(c):c)}if("."===a.charAt(0)&&(a=a.substring(1)),c=this.suffix())d=new RegExp(a?f(c)+"$":f("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}return d&&(a=e.recodePath(a),this._parts.path=this._parts.path.replace(d,a)),this.build(!b),this},n.segment=function(a,b,c){var d=this._parts.urn?":":"/",e=this.path(),f="/"===e.substring(0,1),e=e.split(d);if(void 0!==a&&"number"!=typeof a&&(c=b,b=a,a=void 0),void 0!==a&&"number"!=typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');if(f&&e.shift(),0>a&&(a=Math.max(e.length+a,0)),void 0===b)return void 0===a?e:e[a];if(null===a||void 0===e[a])if(h(b)){e=[],a=0;for(var g=b.length;g>a;a++)(b[a].length||e.length&&e[e.length-1].length)&&(e.length&&!e[e.length-1].length&&e.pop(),e.push(b[a]))}else(b||"string"==typeof b)&&(""===e[e.length-1]?e[e.length-1]=b:e.push(b));else b||"string"==typeof b&&b.length?e[a]=b:e.splice(a,1);return f&&e.unshift(""),this.path(e.join(d),c)},n.segmentCoded=function(a,b,c){var d,f;if("number"!=typeof a&&(c=b,b=a,a=void 0),void 0===b){if(a=this.segment(a,b,c),h(a))for(d=0,f=a.length;f>d;d++)a[d]=e.decode(a[d]);else a=void 0!==a?e.decode(a):void 0;return a}if(h(b))for(d=0,f=b.length;f>d;d++)b[d]=e.decode(b[d]);else b="string"==typeof b?e.encode(b):b;return this.segment(a,b,c)};var v=n.query;return n.query=function(a,b){if(!0===a)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);return this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this}return void 0!==a&&"string"!=typeof a?(this._parts.query=e.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):v.call(this,a,b)},n.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof a)for(var f in a)o.call(a,f)&&(d[f]=a[f]);else{if("string"!=typeof a)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");d[a]=void 0!==b?b:null}return this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},n.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.addQuery(d,a,void 0===b?null:b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},n.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.removeQuery(d,a,b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},n.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)},n.setSearch=n.setQuery,n.addSearch=n.addQuery,n.removeSearch=n.removeQuery,n.hasSearch=n.hasQuery,n.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},n.normalizeProtocol=function(a){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a)),this},n.normalizeHostname=function(c){return this._parts.hostname&&(this.is("IDN")&&a?this._parts.hostname=a.toASCII(this._parts.hostname):this.is("IPv6")&&b&&(this._parts.hostname=b.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!c)),this},n.normalizePort=function(a){return"string"==typeof this._parts.protocol&&this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a)),this},n.normalizePath=function(a){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var b,c,d,f=this._parts.path,g="";for("/"!==f.charAt(0)&&(b=!0,f="/"+f),f=f.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),b&&(g=f.substring(1).match(/^(\.\.\/)+/)||"")&&(g=g[0]);c=f.indexOf("/.."),-1!==c;)0!==c?(d=f.substring(0,c).lastIndexOf("/"),-1===d&&(d=c),f=f.substring(0,d)+f.substring(c+3)):f=f.substring(3);
return b&&this.is("relative")&&(f=g+f.substring(1)),f=e.recodePath(f),this._parts.path=f,this.build(!a),this},n.normalizePathname=n.normalizePath,n.normalizeQuery=function(a){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a)),this},n.normalizeFragment=function(a){return this._parts.fragment||(this._parts.fragment=null,this.build(!a)),this},n.normalizeSearch=n.normalizeQuery,n.normalizeHash=n.normalizeFragment,n.iso8859=function(){var a=e.encode,b=e.decode;return e.encode=escape,e.decode=decodeURIComponent,this.normalize(),e.encode=a,e.decode=b,this},n.unicode=function(){var a=e.encode,b=e.decode;return e.encode=l,e.decode=unescape,this.normalize(),e.encode=a,e.decode=b,this},n.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";if(b._parts.protocol&&(c+=b._parts.protocol+"://"),b._parts.hostname&&(b.is("punycode")&&a?(c+=a.toUnicode(b._parts.hostname),b._parts.port&&(c+=":"+b._parts.port)):c+=b.host()),b._parts.hostname&&b._parts.path&&"/"!==b._parts.path.charAt(0)&&(c+="/"),c+=b.path(!0),b._parts.query){for(var d="",f=0,g=b._parts.query.split("&"),h=g.length;h>f;f++){var i=(g[f]||"").split("="),d=d+("&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==i[1]&&(d+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=e.decodeQuery(b.hash(),!0)},n.absoluteTo=function(a){var b,c,d=this.clone(),f=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(a instanceof e||(a=new e(a)),d._parts.protocol||(d._parts.protocol=a._parts.protocol),this._parts.hostname)return d;for(b=0;c=f[b];b++)d._parts[c]=a._parts[c];return d._parts.path?".."===d._parts.path.substring(-2)&&(d._parts.path+="/"):(d._parts.path=a._parts.path,d._parts.query||(d._parts.query=a._parts.query)),"/"!==d.path().charAt(0)&&(a=a.directory(),d._parts.path=(a?a+"/":"")+d._parts.path,d.normalizePath()),d.build(),d},n.relativeTo=function(a){var b,c,d,f,g=this.clone().normalize();if(g._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(a=new e(a).normalize(),b=g._parts,c=a._parts,d=g.path(),f=a.path(),"/"!==d.charAt(0))throw Error("URI is already relative");if("/"!==f.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");return b.protocol===c.protocol&&(b.protocol=null),b.username!==c.username||b.password!==c.password||null!==b.protocol||null!==b.username||null!==b.password||b.hostname!==c.hostname||b.port!==c.port?g.build():(b.hostname=null,b.port=null,d===f?(b.path="",g.build()):(a=e.commonPath(g.path(),a.path()))?(c=c.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../"),b.path=c+b.path.substring(a.length),g.build()):g.build())},n.equals=function(a){var b=this.clone();a=new e(a);var c,d={},f={},g={};if(b.normalize(),a.normalize(),b.toString()===a.toString())return!0;if(d=b.query(),f=a.query(),b.query(""),a.query(""),b.toString()!==a.toString()||d.length!==f.length)return!1;d=e.parseQuery(d,this._parts.escapeQuerySpace),f=e.parseQuery(f,this._parts.escapeQuerySpace);for(c in d)if(o.call(d,c)){if(h(d[c])){if(!j(d[c],f[c]))return!1}else if(d[c]!==f[c])return!1;g[c]=!0}for(c in f)if(o.call(f,c)&&!g[c])return!1;return!0},n.duplicateQueryParameters=function(a){return this._parts.duplicateQueryParameters=!!a,this},n.escapeQuerySpace=function(a){return this._parts.escapeQuerySpace=!!a,this},e}),function(a,b){"object"==typeof exports?module.exports=b(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],b):a.URITemplate=b(a.URI,a)}(this,function(a,b){function c(a){return c._cache[a]?c._cache[a]:this instanceof c?(this.expression=a,c._cache[a]=this,this):new c(a)}function d(a){this.data=a,this.cache={}}var e=b&&b.URITemplate,f=Object.prototype.hasOwnProperty,g=c.prototype,h={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return c._cache={},c.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,c.VARIABLE_PATTERN=/^([^*:]+)((\*)|:(\d+))?$/,c.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_]/,c.expand=function(a,b){var d,e,f,g=h[a.operator],i=g.named?"Named":"Unnamed",j=a.variables,k=[];for(f=0;e=j[f];f++)d=b.get(e.name),d.val.length?k.push(c["expand"+i](d,g,e.explode,e.explode&&g.separator||",",e.maxlength,e.name)):d.type&&k.push("");return k.length?g.prefix+k.join(g.separator):""},c.expandNamed=function(b,c,d,e,f,g){var h="",i=c.encode;c=c.empty_name_separator;var j,k,l,m=!b[i].length,n=2===b.type?"":a[i](g);for(k=0,l=b.val.length;l>k;k++)f?(j=a[i](b.val[k][1].substring(0,f)),2===b.type&&(n=a[i](b.val[k][0].substring(0,f)))):m?(j=a[i](b.val[k][1]),2===b.type?(n=a[i](b.val[k][0]),b[i].push([n,j])):b[i].push([void 0,j])):(j=b[i][k][1],2===b.type&&(n=b[i][k][0])),h&&(h+=e),d?h+=n+(c||j?"=":"")+j:(k||(h+=a[i](g)+(c||j?"=":"")),2===b.type&&(h+=n+","),h+=j);return h},c.expandUnnamed=function(b,c,d,e,f){var g="",h=c.encode;c=c.empty_name_separator;var i,j,k,l,m=!b[h].length;for(k=0,l=b.val.length;l>k;k++)f?j=a[h](b.val[k][1].substring(0,f)):m?(j=a[h](b.val[k][1]),b[h].push([2===b.type?a[h](b.val[k][0]):void 0,j])):j=b[h][k][1],g&&(g+=e),2===b.type&&(i=f?a[h](b.val[k][0].substring(0,f)):b[h][k][0],g+=i,g=d?g+(c||j?"=":""):g+","),g+=j;return g},c.noConflict=function(){return b.URITemplate===c&&(b.URITemplate=e),c},g.expand=function(a){var b="";this.parts&&this.parts.length||this.parse(),a instanceof d||(a=new d(a));for(var e=0,f=this.parts.length;f>e;e++)b+="string"==typeof this.parts[e]?this.parts[e]:c.expand(this.parts[e],a);return b},g.parse=function(){var a,b,d,e=this.expression,f=c.EXPRESSION_PATTERN,g=c.VARIABLE_PATTERN,i=c.VARIABLE_NAME_PATTERN,j=[],k=0;for(f.lastIndex=0;;){if(b=f.exec(e),null===b){j.push(e.substring(k));break}if(j.push(e.substring(k,b.index)),k=b.index+b[0].length,!h[b[1]])throw Error('Unknown Operator "'+b[1]+'" in "'+b[0]+'"');if(!b[3])throw Error('Unclosed Expression "'+b[0]+'"');a=b[2].split(",");for(var l=0,m=a.length;m>l;l++){if(d=a[l].match(g),null===d)throw Error('Invalid Variable "'+a[l]+'" in "'+b[0]+'"');if(d[1].match(i))throw Error('Invalid Variable Name "'+d[1]+'" in "'+b[0]+'"');a[l]={name:d[1],explode:!!d[3],maxlength:d[4]&&parseInt(d[4],10)}}if(!a.length)throw Error('Expression Missing Variable(s) "'+b[0]+'"');j.push({expression:b[0],operator:b[1],variables:a})}return j.length||j.push(e),this.parts=j,this},d.prototype.get=function(a){var b,c=this.data,d={type:0,val:[],encode:[],encodeReserved:[]};if(void 0!==this.cache[a])return this.cache[a];if(this.cache[a]=d,c="[object Function]"===String(Object.prototype.toString.call(c))?c(a):"[object Function]"===String(Object.prototype.toString.call(c[a]))?c[a](a):c[a],void 0!==c&&null!==c)if("[object Array]"===String(Object.prototype.toString.call(c))){for(b=0,a=c.length;a>b;b++)void 0!==c[b]&&null!==c[b]&&d.val.push([void 0,String(c[b])]);d.val.length&&(d.type=3)}else if("[object Object]"===String(Object.prototype.toString.call(c))){for(b in c)f.call(c,b)&&void 0!==c[b]&&null!==c[b]&&d.val.push([b,String(c[b])]);d.val.length&&(d.type=2)}else d.type=1,d.val.push([void 0,String(c)]);return d},a.expand=function(b,d){var e=new c(b).expand(d);return new a(e)},c});var _apacheCamelModel={definitions:{endpoint:{title:"Endpoint",type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},group:"Endpoints",description:"Represents a camel endpoint which is used to consume messages or send messages to some kind of middleware or technology",icon:"endpoint24.png",properties:{uri:{type:"string"},ref:{type:"string"}}},from:{title:"From",type:"object","extends":{type:"endpoint"},description:"Consumes from an endpoint",tooltip:"Consumes from an endpoint",icon:"endpoint24.png"},to:{title:"To",type:"object","extends":{type:"endpoint"},description:"Sends messages to an endpoint",tooltip:"Sends messages to an endpoint",icon:"endpoint24.png"},route:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Route",group:"Miscellaneous",description:"Route",tooltip:"Route",icon:"route24.png",acceptInput:!0,acceptOutput:!0,properties:{autoStartup:{type:"string",description:"Auto Startup",tooltip:"Auto Startup",optional:!0,title:"Auto Startup"},delayer:{type:"string",description:"Delayer",tooltip:"Delayer",optional:!0,title:"Delayer"},errorHandlerRef:{type:"string",description:"Error Handler Ref",tooltip:"Error Handler Ref",optional:!0,title:"Error Handler Ref"},group:{type:"string",description:"Group",tooltip:"Group",optional:!0,title:"Group"},handleFault:{type:"string",description:"Handle Fault",tooltip:"Handle Fault",optional:!0,title:"Handle Fault"},messageHistory:{type:"string",description:"Message History",tooltip:"Message History",optional:!0,title:"Message History"},routePolicyRef:{type:"string",description:"Route Policy Ref",tooltip:"Route Policy Ref",optional:!0,title:"Route Policy Ref"},streamCache:{type:"string",description:"Stream Cache",tooltip:"Stream Cache",optional:!0,title:"Stream Cache"},trace:{type:"string",description:"Trace",tooltip:"Trace",optional:!0,title:"Trace"}}},"org.apache.camel.model.OptionalIdentifiedDefinition":{type:"object",properties:{id:{type:"string"},inheritErrorHandler:{type:"java.lang.Boolean"}}},"org.apache.camel.model.language.ExpressionDefinition":{description:"A Camel expression",tooltip:"Pick an expression language and enter an expression",type:"object",properties:{expression:{type:"string",description:"The expression",tooltip:"Enter the expression in your chosen language syntax",title:"Expression"},language:{type:"string","enum":["constant","el","header","javaScript","jxpath","method","mvel","ognl","groovy","property","python","php","ref","ruby","simple","spel","sql","tokenize","xpath","xquery"],description:"The camel expression language ot use",tooltip:"Pick the expression language you want to use",title:"Language"}}},aggregate:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Aggregate",group:"Routing",description:"Aggregate",tooltip:"Aggregate",icon:"aggregate24.png",acceptInput:!0,acceptOutput:!0,properties:{correlationExpression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Correlation Expression",tooltip:"Correlation Expression",title:"Correlation Expression"},completionPredicate:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Completion Predicate",tooltip:"Completion Predicate",title:"Completion Predicate"},completionTimeoutExpression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Completion Timeout Expression",tooltip:"Completion Timeout Expression",title:"Completion Timeout Expression"},completionSizeExpression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Completion Size Expression",tooltip:"Completion Size Expression",title:"Completion Size Expression"},executorServiceRef:{type:"string",description:"Executor Service Ref",tooltip:"Executor Service Ref",title:"Executor Service Ref"},timeoutCheckerExecutorServiceRef:{type:"string",description:"Timeout Checker Executor Service Ref",tooltip:"Timeout Checker Executor Service Ref",title:"Timeout Checker Executor Service Ref"},aggregationRepositoryRef:{type:"string",description:"Aggregation Repository Ref",tooltip:"Aggregation Repository Ref",title:"Aggregation Repository Ref"},strategyRef:{type:"string",description:"Strategy Ref",tooltip:"Strategy Ref",title:"Strategy Ref"},strategyMethodName:{type:"string",description:"Strategy Method Name",tooltip:"Strategy Method Name",title:"Strategy Method Name"},optimisticLockRetryPolicyDefinition:{type:"org.apache.camel.model.OptimisticLockRetryPolicyDefinition",description:"Optimistic Lock Retry Policy Definition",tooltip:"Optimistic Lock Retry Policy Definition",title:"Optimistic Lock Retry Policy Definition"},parallelProcessing:{type:"bool",description:"Parallel Processing",tooltip:"Parallel Processing",title:"Parallel Processing"},optimisticLocking:{type:"bool",description:"Optimistic Locking",tooltip:"Optimistic Locking",title:"Optimistic Locking"},strategyMethodAllowNull:{type:"bool",description:"Strategy Method Allow Null",tooltip:"Strategy Method Allow Null",title:"Strategy Method Allow Null"},completionSize:{type:"number",description:"Completion Size",tooltip:"Completion Size",title:"Completion Size"},completionInterval:{type:"number",description:"Completion Interval",tooltip:"Completion Interval",title:"Completion Interval"},completionTimeout:{type:"number",description:"Completion Timeout",tooltip:"Completion Timeout",title:"Completion Timeout"},completionFromBatchConsumer:{type:"bool",description:"Completion From Batch Consumer",tooltip:"Completion From Batch Consumer",title:"Completion From Batch Consumer"},groupExchanges:{type:"bool",description:"Group Exchanges",tooltip:"Group Exchanges",title:"Group Exchanges"},eagerCheckCompletion:{type:"bool",description:"Eager Check Completion",tooltip:"Eager Check Completion",title:"Eager Check Completion"},ignoreInvalidCorrelationKeys:{type:"bool",description:"Ignore Invalid Correlation Keys",tooltip:"Ignore Invalid Correlation Keys",title:"Ignore Invalid Correlation Keys"},closeCorrelationKeyOnCompletion:{type:"number",description:"Close Correlation Key On Completion",tooltip:"Close Correlation Key On Completion",title:"Close Correlation Key On Completion"},discardOnCompletionTimeout:{type:"bool",description:"Discard On Completion Timeout",tooltip:"Discard On Completion Timeout",title:"Discard On Completion Timeout"},forceCompletionOnStop:{type:"bool",description:"Force Completion On Stop",tooltip:"Force Completion On Stop",title:"Force Completion On Stop"}}},AOP:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"AOP",group:"Miscellaneous",description:"AOP",tooltip:"AOP",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{beforeUri:{type:"string",description:"Before Uri",tooltip:"Before Uri",title:"Before Uri"},afterUri:{type:"string",description:"After Uri",tooltip:"After Uri",title:"After Uri"},afterFinallyUri:{type:"string",description:"After Finally Uri",tooltip:"After Finally Uri",title:"After Finally Uri"}}},bean:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Bean",group:"Endpoints",description:"Bean",tooltip:"Bean",icon:"bean24.png",nextSiblingAddedAsChild:!0,properties:{ref:{control:"combo",kind:"beanRef",title:"Ref",type:"string",description:"Ref",tooltip:"Ref"},method:{control:"combo",kind:"beanMethod",title:"Method",type:"string",description:"Method",tooltip:"Method"},beanType:{type:"string",description:"Bean Type",tooltip:"Bean Type",title:"Bean Type"},cache:{type:"bool",description:"Cache",tooltip:"Cache",title:"Cache"}}},"catch":{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Catch",group:"Control Flow",description:"Catch",tooltip:"Catch",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{exceptions:{type:"array",items:{type:"string"},description:"Exceptions",tooltip:"Exceptions",title:"Exceptions"},handled:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Handled",tooltip:"Handled",title:"Handled"}}},choice:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Choice",group:"Routing",description:"Choice",tooltip:"Choice",icon:"choice24.png",acceptInput:!0,acceptOutput:!0,properties:{}},convertBodyTo:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Convert Body To",group:"Transformation",description:"Convert Body To",tooltip:"Convert Body To",icon:"convertBody24.png",nextSiblingAddedAsChild:!0,properties:{type:{type:"string",description:"Type",tooltip:"Type",title:"Type"},charset:{type:"string",description:"Charset",tooltip:"Charset",title:"Charset"}}},delay:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Delay",group:"Control Flow",description:"Delay",tooltip:"Delay",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},executorServiceRef:{type:"string",description:"Executor Service Ref",tooltip:"Executor Service Ref",title:"Executor Service Ref"},asyncDelayed:{type:"bool",description:"Async Delayed",tooltip:"Async Delayed",title:"Async Delayed"},callerRunsWhenRejected:{type:"bool",description:"Caller Runs When Rejected",tooltip:"Caller Runs When Rejected",title:"Caller Runs When Rejected"}}},dynamicRouter:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Dynamic Router",group:"Routing",description:"Dynamic Router",tooltip:"Dynamic Router",icon:"dynamicRouter24.png",nextSiblingAddedAsChild:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},uriDelimiter:{type:"string",description:"Uri Delimiter",tooltip:"Uri Delimiter",title:"Uri Delimiter"},ignoreInvalidEndpoints:{type:"bool",description:"Ignore Invalid Endpoints",tooltip:"Ignore Invalid Endpoints",title:"Ignore Invalid Endpoints"}}},enrich:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Enrich",group:"Transformation",description:"Enrich",tooltip:"Enrich",icon:"enrich24.png",nextSiblingAddedAsChild:!0,properties:{resourceUri:{type:"string",description:"Resource Uri",tooltip:"Resource Uri",title:"Resource Uri"},aggregationStrategyRef:{type:"string",description:"Aggregation Strategy Ref",tooltip:"Aggregation Strategy Ref",title:"Aggregation Strategy Ref"},aggregationStrategyMethodName:{type:"string",description:"Aggregation Strategy Method Name",tooltip:"Aggregation Strategy Method Name",title:"Aggregation Strategy Method Name"},aggregationStrategyMethodAllowNull:{type:"bool",description:"Aggregation Strategy Method Allow Null",tooltip:"Aggregation Strategy Method Allow Null",title:"Aggregation Strategy Method Allow Null"}}},filter:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Filter",group:"Routing",description:"Filter",tooltip:"Filter",icon:"filter24.png",acceptInput:!0,acceptOutput:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"}}},"finally":{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Finally",group:"Control Flow",description:"Finally",tooltip:"Finally",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{}},idempotentConsumer:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Idempotent Consumer",group:"Routing",description:"Idempotent Consumer",tooltip:"Idempotent Consumer",icon:"idempotentConsumer24.png",acceptInput:!0,acceptOutput:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},messageIdRepositoryRef:{type:"string",description:"Message Id Repository Ref",tooltip:"Message Id Repository Ref",title:"Message Id Repository Ref"},eager:{type:"bool",description:"Eager",tooltip:"Eager",title:"Eager"},skipDuplicate:{type:"bool",description:"Skip Duplicate",tooltip:"Skip Duplicate",title:"Skip Duplicate"},removeOnFailure:{type:"bool",description:"Remove On Failure",tooltip:"Remove On Failure",title:"Remove On Failure"}}},inOnly:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"In Only",group:"Transformation",description:"In Only",tooltip:"In Only",icon:"transform24.png",nextSiblingAddedAsChild:!0,properties:{uri:{type:"string",description:"Uri",tooltip:"Uri",title:"Uri"}}},inOut:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"In Out",group:"Transformation",description:"In Out",tooltip:"In Out",icon:"transform24.png",nextSiblingAddedAsChild:!0,properties:{uri:{type:"string",description:"Uri",tooltip:"Uri",title:"Uri"}}},intercept:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Intercept",group:"Control Flow",description:"Intercept",tooltip:"Intercept",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{}},interceptFrom:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Intercept From",group:"Control Flow",description:"Intercept From",tooltip:"Intercept From",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{uri:{type:"string",description:"Uri",tooltip:"Uri",title:"Uri"}}},interceptSendToEndpoint:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Intercept Send To Endpoint",group:"Control Flow",description:"Intercept Send To Endpoint",tooltip:"Intercept Send To Endpoint",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{uri:{type:"string",description:"Uri",tooltip:"Uri",title:"Uri"},skipSendToOriginalEndpoint:{type:"bool",description:"Skip Send To Original Endpoint",tooltip:"Skip Send To Original Endpoint",title:"Skip Send To Original Endpoint"}}},loadBalance:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Load Balance",group:"Routing",description:"Load Balance",tooltip:"Load Balance",icon:"loadBalance24.png",acceptInput:!0,acceptOutput:!0,properties:{ref:{type:"string",description:"Ref",tooltip:"Ref",title:"Ref"},loadBalancerType:{type:["org.apache.camel.model.loadbalancer.FailoverLoadBalancerDefinition","org.apache.camel.model.loadbalancer.RandomLoadBalancerDefinition","org.apache.camel.model.loadbalancer.CustomLoadBalancerDefinition","org.apache.camel.model.loadbalancer.RoundRobinLoadBalancerDefinition","org.apache.camel.model.loadbalancer.StickyLoadBalancerDefinition","org.apache.camel.model.loadbalancer.TopicLoadBalancerDefinition","org.apache.camel.model.loadbalancer.WeightedLoadBalancerDefinition"],description:"Load Balancer Type",tooltip:"Load Balancer Type",title:"Load Balancer Type"}}},log:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Log",group:"Endpoints",description:"Log",tooltip:"Log",icon:"log24.png",nextSiblingAddedAsChild:!0,properties:{message:{type:"string",description:"Message",tooltip:"Message",title:"Message"},logName:{type:"string",description:"Log Name",tooltip:"Log Name",title:"Log Name"},marker:{type:"string",description:"Marker",tooltip:"Marker",title:"Marker"},loggingLevel:{type:"org.apache.camel.LoggingLevel",description:"Logging Level",tooltip:"Logging Level",title:"Logging Level"}}},loop:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Loop",group:"Control Flow",description:"Loop",tooltip:"Loop",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},copy:{type:"bool",description:"Copy",tooltip:"Copy",title:"Copy"}}},marshal:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Marshal",group:"Transformation",description:"Marshal",tooltip:"Marshal",icon:"marshal24.png",nextSiblingAddedAsChild:!0,properties:{ref:{type:"string",description:"Ref",tooltip:"Ref",title:"Ref"},dataFormatType:{type:["org.apache.camel.model.dataformat.AvroDataFormat","org.apache.camel.model.dataformat.Base64DataFormat","org.apache.camel.model.dataformat.BeanioDataFormat","org.apache.camel.model.dataformat.BindyDataFormat","org.apache.camel.model.dataformat.CastorDataFormat","org.apache.camel.model.dataformat.C24IODataFormat","org.apache.camel.model.dataformat.CryptoDataFormat","org.apache.camel.model.dataformat.CsvDataFormat","org.apache.camel.model.dataformat.CustomDataFormat","org.apache.camel.model.dataformat.FlatpackDataFormat","org.apache.camel.model.dataformat.GzipDataFormat","org.apache.camel.model.dataformat.HL7DataFormat","org.apache.camel.model.dataformat.JaxbDataFormat","org.apache.camel.model.dataformat.JibxDataFormat","org.apache.camel.model.dataformat.JsonDataFormat","org.apache.camel.model.dataformat.ProtobufDataFormat","org.apache.camel.model.dataformat.RssDataFormat","org.apache.camel.model.dataformat.XMLSecurityDataFormat","org.apache.camel.model.dataformat.SerializationDataFormat","org.apache.camel.model.dataformat.SoapJaxbDataFormat","org.apache.camel.model.dataformat.StringDataFormat","org.apache.camel.model.dataformat.SyslogDataFormat","org.apache.camel.model.dataformat.TidyMarkupDataFormat","org.apache.camel.model.dataformat.XMLBeansDataFormat","org.apache.camel.model.dataformat.XmlJsonDataFormat","org.apache.camel.model.dataformat.XmlRpcDataFormat","org.apache.camel.model.dataformat.XStreamDataFormat","org.apache.camel.model.dataformat.PGPDataFormat","org.apache.camel.model.dataformat.ZipDataFormat","org.apache.camel.model.dataformat.ZipFileDataFormat"],description:"Data Format Type",tooltip:"Data Format Type",title:"Data Format Type"}}},multicast:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Multicast",group:"Routing",description:"Multicast",tooltip:"Multicast",icon:"multicast24.png",acceptInput:!0,acceptOutput:!0,properties:{strategyRef:{type:"string",description:"Strategy Ref",tooltip:"Strategy Ref",title:"Strategy Ref"},strategyMethodName:{type:"string",description:"Strategy Method Name",tooltip:"Strategy Method Name",title:"Strategy Method Name"},executorServiceRef:{type:"string",description:"Executor Service Ref",tooltip:"Executor Service Ref",title:"Executor Service Ref"},onPrepareRef:{type:"string",description:"On Prepare Ref",tooltip:"On Prepare Ref",title:"On Prepare Ref"},parallelProcessing:{type:"bool",description:"Parallel Processing",tooltip:"Parallel Processing",title:"Parallel Processing"},strategyMethodAllowNull:{type:"bool",description:"Strategy Method Allow Null",tooltip:"Strategy Method Allow Null",title:"Strategy Method Allow Null"},streaming:{type:"bool",description:"Streaming",tooltip:"Streaming",title:"Streaming"},stopOnException:{type:"bool",description:"Stop On Exception",tooltip:"Stop On Exception",title:"Stop On Exception"},timeout:{type:"number",description:"Timeout",tooltip:"Timeout",title:"Timeout"},shareUnitOfWork:{type:"bool",description:"Share Unit Of Work",tooltip:"Share Unit Of Work",title:"Share Unit Of Work"}}},onCompletion:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"On Completion",group:"Control Flow",description:"On Completion",tooltip:"On Completion",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{executorServiceRef:{type:"string",description:"Executor Service Ref",tooltip:"Executor Service Ref",title:"Executor Service Ref"},onCompleteOnly:{type:"bool",description:"On Complete Only",tooltip:"On Complete Only",title:"On Complete Only"},onFailureOnly:{type:"bool",description:"On Failure Only",tooltip:"On Failure Only",title:"On Failure Only"},useOriginalMessagePolicy:{type:"bool",description:"Use Original Message Policy",tooltip:"Use Original Message Policy",title:"Use Original Message Policy"}}},onException:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"On Exception",group:"Control Flow",description:"On Exception",tooltip:"On Exception",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{exceptions:{type:"array",items:{type:"string"},description:"Exceptions",tooltip:"Exceptions",title:"Exceptions"},retryWhile:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Retry While",tooltip:"Retry While",title:"Retry While"},redeliveryPolicyRef:{type:"string",description:"Redelivery Policy Ref",tooltip:"Redelivery Policy Ref",title:"Redelivery Policy Ref"},handled:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Handled",tooltip:"Handled",title:"Handled"},continued:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Continued",tooltip:"Continued",title:"Continued"},onRedeliveryRef:{type:"string",description:"On Redelivery Ref",tooltip:"On Redelivery Ref",title:"On Redelivery Ref"},redeliveryPolicy:{type:"org.apache.camel.model.RedeliveryPolicyDefinition",description:"Redelivery Policy",tooltip:"Redelivery Policy",title:"Redelivery Policy"},useOriginalMessagePolicy:{type:"bool",description:"Use Original Message Policy",tooltip:"Use Original Message Policy",title:"Use Original Message Policy"}}},otherwise:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Otherwise",group:"Routing",description:"Otherwise",tooltip:"Otherwise",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{}},pipeline:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Pipeline",group:"Routing",description:"Pipeline",tooltip:"Pipeline",icon:"pipeline24.png",acceptInput:!0,acceptOutput:!0,properties:{}},policy:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Policy",group:"Miscellaneous",description:"Policy",tooltip:"Policy",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,nextSiblingAddedAsChild:!0,properties:{ref:{type:"string",description:"Ref",tooltip:"Ref",title:"Ref"}}},pollEnrich:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Poll Enrich",group:"Transformation",description:"Poll Enrich",tooltip:"Poll Enrich",icon:"pollEnrich24.png",nextSiblingAddedAsChild:!0,properties:{resourceUri:{type:"string",description:"Resource Uri",tooltip:"Resource Uri",title:"Resource Uri"},aggregationStrategyRef:{type:"string",description:"Aggregation Strategy Ref",tooltip:"Aggregation Strategy Ref",title:"Aggregation Strategy Ref"},aggregationStrategyMethodName:{type:"string",description:"Aggregation Strategy Method Name",tooltip:"Aggregation Strategy Method Name",title:"Aggregation Strategy Method Name"},timeout:{type:"number",description:"Timeout",tooltip:"Timeout",title:"Timeout"},aggregationStrategyMethodAllowNull:{type:"bool",description:"Aggregation Strategy Method Allow Null",tooltip:"Aggregation Strategy Method Allow Null",title:"Aggregation Strategy Method Allow Null"}}},process:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Process",group:"Endpoints",description:"Process",tooltip:"Process",icon:"process24.png",nextSiblingAddedAsChild:!0,properties:{ref:{type:"string",description:"Ref",tooltip:"Ref",title:"Ref"}}},recipientList:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Recipient List",group:"Routing",description:"Recipient List",tooltip:"Recipient List",icon:"recipientList24.png",nextSiblingAddedAsChild:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},delimiter:{type:"string",description:"Delimiter",tooltip:"Delimiter",title:"Delimiter"},strategyRef:{type:"string",description:"Strategy Ref",tooltip:"Strategy Ref",title:"Strategy Ref"},strategyMethodName:{type:"string",description:"Strategy Method Name",tooltip:"Strategy Method Name",title:"Strategy Method Name"},executorServiceRef:{type:"string",description:"Executor Service Ref",tooltip:"Executor Service Ref",title:"Executor Service Ref"},onPrepareRef:{type:"string",description:"On Prepare Ref",tooltip:"On Prepare Ref",title:"On Prepare Ref"},parallelProcessing:{type:"bool",description:"Parallel Processing",tooltip:"Parallel Processing",title:"Parallel Processing"},strategyMethodAllowNull:{type:"bool",description:"Strategy Method Allow Null",tooltip:"Strategy Method Allow Null",title:"Strategy Method Allow Null"},stopOnException:{type:"bool",description:"Stop On Exception",tooltip:"Stop On Exception",title:"Stop On Exception"},ignoreInvalidEndpoints:{type:"bool",description:"Ignore Invalid Endpoints",tooltip:"Ignore Invalid Endpoints",title:"Ignore Invalid Endpoints"},streaming:{type:"bool",description:"Streaming",tooltip:"Streaming",title:"Streaming"},timeout:{type:"number",description:"Timeout",tooltip:"Timeout",title:"Timeout"},shareUnitOfWork:{type:"bool",description:"Share Unit Of Work",tooltip:"Share Unit Of Work",title:"Share Unit Of Work"}}},removeHeader:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Remove Header",group:"Transformation",description:"Remove Header",tooltip:"Remove Header",icon:"transform24.png",nextSiblingAddedAsChild:!0,properties:{headerName:{type:"string",description:"Header Name",tooltip:"Header Name",title:"Header Name"}}},removeHeaders:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Remove Headers",group:"Transformation",description:"Remove Headers",tooltip:"Remove Headers",icon:"transform24.png",nextSiblingAddedAsChild:!0,properties:{pattern:{type:"string",description:"Pattern",tooltip:"Pattern",title:"Pattern"},excludePattern:{type:"string",description:"Exclude Pattern",tooltip:"Exclude Pattern",title:"Exclude Pattern"}}},removeProperty:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Remove Property",group:"Transformation",description:"Remove Property",tooltip:"Remove Property",icon:"transform24.png",nextSiblingAddedAsChild:!0,properties:{propertyName:{type:"string",description:"Property Name",tooltip:"Property Name",title:"Property Name"}}},resequence:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Resequence",group:"Routing",description:"Resequence",tooltip:"Resequence",icon:"resequence24.png",acceptInput:!0,acceptOutput:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},resequencerConfig:{type:["org.apache.camel.model.config.BatchResequencerConfig","org.apache.camel.model.config.StreamResequencerConfig"],description:"Resequencer Config",tooltip:"Resequencer Config",title:"Resequencer Config"}}},rollback:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Rollback",group:"Control Flow",description:"Rollback",tooltip:"Rollback",icon:"generic24.png",nextSiblingAddedAsChild:!0,properties:{message:{type:"string",description:"Message",tooltip:"Message",title:"Message"},markRollbackOnly:{type:"bool",description:"Mark Rollback Only",tooltip:"Mark Rollback Only",title:"Mark Rollback Only"},markRollbackOnlyLast:{type:"bool",description:"Mark Rollback Only Last",tooltip:"Mark Rollback Only Last",title:"Mark Rollback Only Last"}}},routingSlip:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Routing Slip",group:"Routing",description:"Routing Slip",tooltip:"Routing Slip",icon:"routingSlip24.png",nextSiblingAddedAsChild:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},uriDelimiter:{type:"string",description:"Uri Delimiter",tooltip:"Uri Delimiter",title:"Uri Delimiter"},ignoreInvalidEndpoints:{type:"bool",description:"Ignore Invalid Endpoints",tooltip:"Ignore Invalid Endpoints",title:"Ignore Invalid Endpoints"}}},sampling:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Sampling",group:"Miscellaneous",description:"Sampling",tooltip:"Sampling",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{samplePeriod:{type:"number",description:"Sample Period",tooltip:"Sample Period",title:"Sample Period"},messageFrequency:{type:"number",description:"Message Frequency",tooltip:"Message Frequency",title:"Message Frequency"},units:{type:"java.util.concurrent.TimeUnit",description:"Units",tooltip:"Units",title:"Units"}}},setBody:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Set Body",group:"Transformation",description:"Set Body",tooltip:"Set Body",icon:"setBody24.png",nextSiblingAddedAsChild:!1,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"}}},setExchangePattern:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Set Exchange Pattern",group:"Transformation",description:"Set Exchange Pattern",tooltip:"Set Exchange Pattern",icon:"transform24.png",nextSiblingAddedAsChild:!0,properties:{pattern:{type:"org.apache.camel.ExchangePattern",description:"Pattern",tooltip:"Pattern",title:"Pattern"}}},setFaultBody:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Set Fault Body",group:"Transformation",description:"Set Fault Body",tooltip:"Set Fault Body",icon:"transform24.png",nextSiblingAddedAsChild:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"}}},setHeader:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Set Header",group:"Transformation",description:"Set Header",tooltip:"Set Header",icon:"transform24.png",nextSiblingAddedAsChild:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},headerName:{type:"string",description:"Header Name",tooltip:"Header Name",title:"Header Name"}}},setOutHeader:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Set Out Header",group:"Transformation",description:"Set Out Header",tooltip:"Set Out Header",icon:"transform24.png",nextSiblingAddedAsChild:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},headerName:{type:"string",description:"Header Name",tooltip:"Header Name",title:"Header Name"}}},setProperty:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Set Property",group:"Transformation",description:"Set Property",tooltip:"Set Property",icon:"transform24.png",nextSiblingAddedAsChild:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},propertyName:{type:"string",description:"Property Name",tooltip:"Property Name",title:"Property Name"}}},sort:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Sort",group:"Routing",description:"Sort",tooltip:"Sort",icon:"generic24.png",nextSiblingAddedAsChild:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},comparatorRef:{type:"string",description:"Comparator Ref",tooltip:"Comparator Ref",title:"Comparator Ref"}}},split:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Split",group:"Routing",description:"Split",tooltip:"Split",icon:"split24.png",acceptInput:!0,acceptOutput:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},strategyRef:{type:"string",description:"Strategy Ref",tooltip:"Strategy Ref",title:"Strategy Ref"},strategyMethodName:{type:"string",description:"Strategy Method Name",tooltip:"Strategy Method Name",title:"Strategy Method Name"},executorServiceRef:{type:"string",description:"Executor Service Ref",tooltip:"Executor Service Ref",title:"Executor Service Ref"},onPrepareRef:{type:"string",description:"On Prepare Ref",tooltip:"On Prepare Ref",title:"On Prepare Ref"},parallelProcessing:{type:"bool",description:"Parallel Processing",tooltip:"Parallel Processing",title:"Parallel Processing"},strategyMethodAllowNull:{type:"bool",description:"Strategy Method Allow Null",tooltip:"Strategy Method Allow Null",title:"Strategy Method Allow Null"},streaming:{type:"bool",description:"Streaming",tooltip:"Streaming",title:"Streaming"},stopOnException:{type:"bool",description:"Stop On Exception",tooltip:"Stop On Exception",title:"Stop On Exception"},timeout:{type:"number",description:"Timeout",tooltip:"Timeout",title:"Timeout"},shareUnitOfWork:{type:"bool",description:"Share Unit Of Work",tooltip:"Share Unit Of Work",title:"Share Unit Of Work"}}},stop:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Stop",group:"Miscellaneous",description:"Stop",tooltip:"Stop",icon:"generic24.png",nextSiblingAddedAsChild:!0,properties:{}},threads:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Threads",group:"Miscellaneous",description:"Threads",tooltip:"Threads",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{executorServiceRef:{type:"string",description:"Executor Service Ref",tooltip:"Executor Service Ref",title:"Executor Service Ref"},threadName:{type:"string",description:"Thread Name",tooltip:"Thread Name",title:"Thread Name"},poolSize:{type:"number",description:"Pool Size",tooltip:"Pool Size",title:"Pool Size"},maxPoolSize:{type:"number",description:"Max Pool Size",tooltip:"Max Pool Size",title:"Max Pool Size"},keepAliveTime:{type:"number",description:"Keep Alive Time",tooltip:"Keep Alive Time",title:"Keep Alive Time"},timeUnit:{type:"java.util.concurrent.TimeUnit",description:"Time Unit",tooltip:"Time Unit",title:"Time Unit"},maxQueueSize:{type:"number",description:"Max Queue Size",tooltip:"Max Queue Size",title:"Max Queue Size"},rejectedPolicy:{type:"org.apache.camel.ThreadPoolRejectedPolicy",description:"Rejected Policy",tooltip:"Rejected Policy",title:"Rejected Policy"},callerRunsWhenRejected:{type:"bool",description:"Caller Runs When Rejected",tooltip:"Caller Runs When Rejected",title:"Caller Runs When Rejected"}}},throttle:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Throttle",group:"Control Flow",description:"Throttle",tooltip:"Throttle",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},executorServiceRef:{type:"string",description:"Executor Service Ref",tooltip:"Executor Service Ref",title:"Executor Service Ref"},timePeriodMillis:{type:"number",description:"Time Period Millis",tooltip:"Time Period Millis",title:"Time Period Millis"},asyncDelayed:{type:"bool",description:"Async Delayed",tooltip:"Async Delayed",title:"Async Delayed"},callerRunsWhenRejected:{type:"bool",description:"Caller Runs When Rejected",tooltip:"Caller Runs When Rejected",title:"Caller Runs When Rejected"}}},throwException:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Throw Exception",group:"Control Flow",description:"Throw Exception",tooltip:"Throw Exception",icon:"generic24.png",nextSiblingAddedAsChild:!0,properties:{ref:{type:"string",description:"Ref",tooltip:"Ref",title:"Ref"}}},transacted:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Transacted",group:"Control Flow",description:"Transacted",tooltip:"Transacted",icon:"generic24.png",nextSiblingAddedAsChild:!0,properties:{ref:{type:"string",description:"Ref",tooltip:"Ref",title:"Ref"}}},transform:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Transform",group:"Transformation",description:"Transform",tooltip:"Transform",icon:"transform24.png",nextSiblingAddedAsChild:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"}}},"try":{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Try",group:"Control Flow",description:"Try",tooltip:"Try",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{}},unmarshal:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Unmarshal",group:"Transformation",description:"Unmarshal",tooltip:"Unmarshal",icon:"unmarshal24.png",nextSiblingAddedAsChild:!0,properties:{ref:{type:"string",description:"Ref",tooltip:"Ref",title:"Ref"},dataFormatType:{type:["org.apache.camel.model.dataformat.AvroDataFormat","org.apache.camel.model.dataformat.Base64DataFormat","org.apache.camel.model.dataformat.BeanioDataFormat","org.apache.camel.model.dataformat.BindyDataFormat","org.apache.camel.model.dataformat.CastorDataFormat","org.apache.camel.model.dataformat.CryptoDataFormat","org.apache.camel.model.dataformat.CsvDataFormat","org.apache.camel.model.dataformat.CustomDataFormat","org.apache.camel.model.dataformat.C24IODataFormat","org.apache.camel.model.dataformat.FlatpackDataFormat","org.apache.camel.model.dataformat.GzipDataFormat","org.apache.camel.model.dataformat.HL7DataFormat","org.apache.camel.model.dataformat.JaxbDataFormat","org.apache.camel.model.dataformat.JibxDataFormat","org.apache.camel.model.dataformat.JsonDataFormat","org.apache.camel.model.dataformat.ProtobufDataFormat","org.apache.camel.model.dataformat.RssDataFormat","org.apache.camel.model.dataformat.XMLSecurityDataFormat","org.apache.camel.model.dataformat.SerializationDataFormat","org.apache.camel.model.dataformat.SoapJaxbDataFormat","org.apache.camel.model.dataformat.StringDataFormat","org.apache.camel.model.dataformat.SyslogDataFormat","org.apache.camel.model.dataformat.TidyMarkupDataFormat","org.apache.camel.model.dataformat.XMLBeansDataFormat","org.apache.camel.model.dataformat.XmlJsonDataFormat","org.apache.camel.model.dataformat.XmlRpcDataFormat","org.apache.camel.model.dataformat.XStreamDataFormat","org.apache.camel.model.dataformat.PGPDataFormat","org.apache.camel.model.dataformat.ZipDataFormat","org.apache.camel.model.dataformat.ZipFileDataFormat"],description:"Data Format Type",tooltip:"Data Format Type",title:"Data Format Type"}}},validate:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Validate",group:"Miscellaneous",description:"Validate",tooltip:"Validate",icon:"generic24.png",nextSiblingAddedAsChild:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"}}},when:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"When",group:"Routing",description:"When",tooltip:"When",icon:"generic24.png",acceptInput:!0,acceptOutput:!0,properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"}}},wireTap:{type:"object","extends":{type:"org.apache.camel.model.OptionalIdentifiedDefinition"},title:"Wire Tap",group:"Routing",description:"Wire Tap",tooltip:"Wire Tap",icon:"wireTap24.png",nextSiblingAddedAsChild:!0,properties:{uri:{type:"string",description:"Uri",tooltip:"Uri",title:"Uri"},newExchangeProcessorRef:{type:"string",description:"New Exchange Processor Ref",tooltip:"New Exchange Processor Ref",title:"New Exchange Processor Ref"},newExchangeExpression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"New Exchange Expression",tooltip:"New Exchange Expression",title:"New Exchange Expression"},setHeader:{type:"array",items:{type:"setHeader"},description:"Headers",tooltip:"Headers",title:"Headers"},executorServiceRef:{type:"string",description:"Executor Service Ref",tooltip:"Executor Service Ref",title:"Executor Service Ref"},onPrepareRef:{type:"string",description:"On Prepare Ref",tooltip:"On Prepare Ref",title:"On Prepare Ref"},copy:{type:"bool",description:"Copy",tooltip:"Copy",title:"Copy"}}},"org.apache.camel.model.SetHeader":{type:"object",description:"org.apache.camel.model.Set Header",tooltip:"org.apache.camel.model.Set Header",properties:{expression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Expression",tooltip:"Expression",title:"Expression"},headerName:{type:"string",description:"Header Name",tooltip:"Header Name",title:"Header Name"}}},"org.apache.camel.model.dataformat.SyslogDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Syslog Data Format",tooltip:"org.apache.camel.model.dataformat.Syslog Data Format",properties:{}},"org.apache.camel.model.dataformat.JibxDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Jibx Data Format",tooltip:"org.apache.camel.model.dataformat.Jibx Data Format",properties:{bindingName:{type:"string",description:"Binding Name",tooltip:"Binding Name",optional:!0,title:"Binding Name"},dataFormatName:{type:"string",description:"Data Format Name",tooltip:"Data Format Name",optional:!0,title:"Data Format Name"},unmarshallTypeName:{type:"string",description:"Unmarshall Type Name",tooltip:"Unmarshall Type Name",optional:!0,title:"Unmarshall Type Name"}}},"org.apache.camel.model.dataformat.SerializationDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Serialization Data Format",tooltip:"org.apache.camel.model.dataformat.Serialization Data Format",properties:{}},"org.apache.camel.model.language.Expression":{type:"object",description:"org.apache.camel.model.language.Expression",tooltip:"org.apache.camel.model.language.Expression",properties:{expression:{type:"string",description:"Expression",tooltip:"Expression",title:"Expression"},trim:{type:"bool",description:"Trim",tooltip:"Trim",title:"Trim"}}},"org.apache.camel.model.dataformat.BindyDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Bindy Data Format",tooltip:"org.apache.camel.model.dataformat.Bindy Data Format",properties:{classType:{type:"string",description:"Class Type",tooltip:"Class Type",title:"Class Type"},locale:{type:"string",description:"Locale",tooltip:"Locale",title:"Locale"},type:{type:"org.apache.camel.model.dataformat.BindyType",description:"Type",tooltip:"Type",title:"Type"},packages:{type:"array",description:"Packages",tooltip:"Packages",title:"Packages"}}},"org.apache.camel.model.dataformat.CustomDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Custom Data Format",tooltip:"org.apache.camel.model.dataformat.Custom Data Format",properties:{ref:{type:"string",description:"Ref",tooltip:"Ref",title:"Ref"}}},"org.apache.camel.model.dataformat.CsvDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Csv Data Format",tooltip:"org.apache.camel.model.dataformat.Csv Data Format",properties:{delimiter:{type:"string",description:"Delimiter",tooltip:"Delimiter",title:"Delimiter"},configRef:{type:"string",description:"Config Ref",tooltip:"Config Ref",title:"Config Ref"},strategyRef:{type:"string",description:"Strategy Ref",tooltip:"Strategy Ref",title:"Strategy Ref"},autogenColumns:{type:"bool",description:"Autogen Columns",tooltip:"Autogen Columns",title:"Autogen Columns"},skipFirstLine:{type:"bool",description:"Skip First Line",tooltip:"Skip First Line",title:"Skip First Line"}}},"org.apache.camel.model.dataformat.TidyMarkupDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Tidy Markup Data Format",tooltip:"org.apache.camel.model.dataformat.Tidy Markup Data Format",properties:{dataObjectTypeName:{type:"string",description:"Data Object Type Name",tooltip:"Data Object Type Name",title:"Data Object Type Name"}}},"org.apache.camel.model.dataformat.GzipDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Gzip Data Format",tooltip:"org.apache.camel.model.dataformat.Gzip Data Format",properties:{}},"org.apache.camel.model.dataformat.StringDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.String Data Format",tooltip:"org.apache.camel.model.dataformat.String Data Format",properties:{charset:{type:"string",description:"Charset",tooltip:"Charset",title:"Charset"}}},"org.apache.camel.model.dataformat.JsonDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Json Data Format",tooltip:"org.apache.camel.model.dataformat.Json Data Format",properties:{unmarshalTypeName:{type:"string",description:"Unmarshal Type Name",tooltip:"Unmarshal Type Name",title:"Unmarshal Type Name"},prettyPrint:{type:"bool",description:"Pretty Print",tooltip:"Pretty Print",title:"Pretty Print"},library:{type:"org.apache.camel.model.dataformat.JsonLibrary",description:"Library",tooltip:"Library",title:"Library"}}},"org.apache.camel.model.dataformat.AvroDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Avro Data Format",tooltip:"org.apache.camel.model.dataformat.Avro Data Format",properties:{instanceClassName:{type:"string",description:"Instance Class Name",tooltip:"Instance Class Name",title:"Instance Class Name"}}},"org.apache.camel.model.loadbalancer.StickyLoadBalancer":{type:"object",description:"org.apache.camel.model.loadbalancer.Sticky Load Balancer",tooltip:"org.apache.camel.model.loadbalancer.Sticky Load Balancer",properties:{correlationExpression:{kind:"expression",type:"org.apache.camel.model.language.ExpressionDefinition",description:"Correlation Expression",tooltip:"Correlation Expression",title:"Correlation Expression"}}},"org.apache.camel.model.dataformat.ProtobufDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Protobuf Data Format",tooltip:"org.apache.camel.model.dataformat.Protobuf Data Format",properties:{instanceClass:{type:"string",description:"Instance Class",tooltip:"Instance Class",title:"Instance Class"}}},"org.apache.camel.model.loadbalancer.RoundRobinLoadBalancer":{type:"object",description:"org.apache.camel.model.loadbalancer.Round Robin Load Balancer",tooltip:"org.apache.camel.model.loadbalancer.Round Robin Load Balancer",properties:{}},"org.apache.camel.model.dataformat.XMLSecurityDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.XMLSecurity Data Format",tooltip:"org.apache.camel.model.dataformat.XMLSecurity Data Format",properties:{xmlCipherAlgorithm:{type:"string",description:"Xml Cipher Algorithm",tooltip:"Xml Cipher Algorithm",title:"Xml Cipher Algorithm"},passPhrase:{type:"string",description:"Pass Phrase",tooltip:"Pass Phrase",title:"Pass Phrase"},secureTag:{type:"string",description:"Secure Tag",tooltip:"Secure Tag",title:"Secure Tag"},keyCipherAlgorithm:{type:"string",description:"Key Cipher Algorithm",tooltip:"Key Cipher Algorithm",title:"Key Cipher Algorithm"},recipientKeyAlias:{type:"string",description:"Recipient Key Alias",tooltip:"Recipient Key Alias",title:"Recipient Key Alias"},keyOrTrustStoreParametersId:{type:"string",description:"Key Or Trust Store Parameters Id",tooltip:"Key Or Trust Store Parameters Id",title:"Key Or Trust Store Parameters Id"},keyPassword:{type:"string",description:"Key Password",tooltip:"Key Password",title:"Key Password"},digestAlgorithm:{type:"string",description:"Digest Algorithm",tooltip:"Digest Algorithm",title:"Digest Algorithm"},mgfAlgorithm:{type:"string",description:"Mgf Algorithm",tooltip:"Mgf Algorithm",title:"Mgf Algorithm"},secureTagContents:{type:"bool",description:"Secure Tag Contents",tooltip:"Secure Tag Contents",title:"Secure Tag Contents"}}},"org.apache.camel.model.dataformat.SoapJaxbDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Soap Jaxb Data Format",tooltip:"org.apache.camel.model.dataformat.Soap Jaxb Data Format",properties:{contextPath:{type:"string",description:"Context Path",tooltip:"Context Path",title:"Context Path"},encoding:{type:"string",description:"Encoding",tooltip:"Encoding",title:"Encoding"},elementNameStrategyRef:{type:"string",description:"Element Name Strategy Ref",tooltip:"Element Name Strategy Ref",title:"Element Name Strategy Ref"},version:{type:"string",description:"Version",tooltip:"Version",title:"Version"},namespacePrefixRef:{type:"string",description:"Namespace Prefix Ref",tooltip:"Namespace Prefix Ref",title:"Namespace Prefix Ref"}}},"org.apache.camel.model.dataformat.XmlRpcDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Xml Rpc Data Format",tooltip:"org.apache.camel.model.dataformat.Xml Rpc Data Format",properties:{request:{type:"bool",description:"Request",tooltip:"Request",title:"Request"}}},"org.apache.camel.model.dataformat.BeanioDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Beanio Data Format",tooltip:"org.apache.camel.model.dataformat.Beanio Data Format",properties:{mapping:{type:"string",description:"Mapping",tooltip:"Mapping",title:"Mapping"},streamName:{type:"string",description:"Stream Name",tooltip:"Stream Name",title:"Stream Name"},encoding:{type:"string",description:"Encoding",tooltip:"Encoding",title:"Encoding"},ignoreUnidentifiedRecords:{type:"bool",description:"Ignore Unidentified Records",tooltip:"Ignore Unidentified Records",title:"Ignore Unidentified Records"},ignoreUnexpectedRecords:{type:"bool",description:"Ignore Unexpected Records",tooltip:"Ignore Unexpected Records",title:"Ignore Unexpected Records"},ignoreInvalidRecords:{type:"bool",description:"Ignore Invalid Records",tooltip:"Ignore Invalid Records",title:"Ignore Invalid Records"}}},"org.apache.camel.model.loadbalancer.CustomLoadBalancer":{type:"object",description:"org.apache.camel.model.loadbalancer.Custom Load Balancer",tooltip:"org.apache.camel.model.loadbalancer.Custom Load Balancer",properties:{ref:{type:"string",description:"Ref",tooltip:"Ref",title:"Ref"}}},"org.apache.camel.model.dataformat.CastorDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Castor Data Format",tooltip:"org.apache.camel.model.dataformat.Castor Data Format",properties:{mappingFile:{type:"string",description:"Mapping File",tooltip:"Mapping File",title:"Mapping File"},encoding:{type:"string",description:"Encoding",tooltip:"Encoding",title:"Encoding"},validation:{type:"bool",description:"Validation",tooltip:"Validation",title:"Validation"},packages:{type:"array",description:"Packages",tooltip:"Packages",title:"Packages"},classes:{type:"array",description:"Classes",tooltip:"Classes",title:"Classes"}}},"org.apache.camel.model.Description":{type:"object",description:"org.apache.camel.model.Description",tooltip:"org.apache.camel.model.Description",properties:{lang:{type:"string",description:"Lang",tooltip:"Lang",title:"Lang"},text:{type:"string",description:"Text",tooltip:"Text",title:"Text"},layoutX:{type:"number",description:"Layout X",tooltip:"Layout X",title:"Layout X"},layoutY:{type:"number",description:"Layout Y",tooltip:"Layout Y",title:"Layout Y"},layoutWidth:{type:"number",description:"Layout Width",tooltip:"Layout Width",title:"Layout Width"},layoutHeight:{type:"number",description:"Layout Height",tooltip:"Layout Height",title:"Layout Height"}}},"org.apache.camel.model.dataformat.XMLBeansDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.XMLBeans Data Format",tooltip:"org.apache.camel.model.dataformat.XMLBeans Data Format",properties:{prettyPrint:{type:"bool",description:"Pretty Print",tooltip:"Pretty Print",title:"Pretty Print"}}},"org.apache.camel.model.dataformat.RssDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Rss Data Format",tooltip:"org.apache.camel.model.dataformat.Rss Data Format",properties:{}},"java.lang.String":{type:"object",description:"java.lang.String",tooltip:"java.lang.String",properties:{}},"org.apache.camel.model.dataformat.ZipFileDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Zip File Data Format",tooltip:"org.apache.camel.model.dataformat.Zip File Data Format",properties:{usingIterator:{type:"bool",description:"Using Iterator",tooltip:"Using Iterator",title:"Using Iterator"}}},"org.apache.camel.model.dataformat.XStreamDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.XStream Data Format",tooltip:"org.apache.camel.model.dataformat.XStream Data Format",properties:{converters:{type:"array",description:"Converters",tooltip:"Converters",optional:!0,title:"Converters"},dataFormatName:{type:"string",description:"Data Format Name",tooltip:"Data Format Name",optional:!0,title:"Data Format Name"},driver:{type:"string",description:"Driver",tooltip:"Driver",optional:!0,title:"Driver"},driverRef:{type:"string",description:"Driver Ref",tooltip:"Driver Ref",optional:!0,title:"Driver Ref"},encoding:{type:"string",description:"Encoding",tooltip:"Encoding",optional:!0,title:"Encoding"}}},"org.apache.camel.model.dataformat.CryptoDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Crypto Data Format",tooltip:"org.apache.camel.model.dataformat.Crypto Data Format",properties:{algorithm:{type:"string",description:"Algorithm",tooltip:"Algorithm",title:"Algorithm"},cryptoProvider:{type:"string",description:"Crypto Provider",tooltip:"Crypto Provider",title:"Crypto Provider"},keyRef:{type:"string",description:"Key Ref",tooltip:"Key Ref",title:"Key Ref"},initVectorRef:{type:"string",description:"Init Vector Ref",tooltip:"Init Vector Ref",title:"Init Vector Ref"},algorithmParameterRef:{type:"string",description:"Algorithm Parameter Ref",tooltip:"Algorithm Parameter Ref",title:"Algorithm Parameter Ref"},macAlgorithm:{type:"string",description:"Mac Algorithm",tooltip:"Mac Algorithm",title:"Mac Algorithm"},buffersize:{type:"number",description:"Buffersize",tooltip:"Buffersize",title:"Buffersize"},shouldAppendHMAC:{type:"bool",description:"Should Append HMAC",tooltip:"Should Append HMAC",title:"Should Append HMAC"},inline:{type:"bool",description:"Inline",tooltip:"Inline",title:"Inline"}}},"org.apache.camel.model.config.BatchResequencerConfig":{type:"object",description:"org.apache.camel.model.config.Batch Resequencer Config",tooltip:"org.apache.camel.model.config.Batch Resequencer Config",properties:{batchSize:{type:"number",description:"Batch Size",tooltip:"Batch Size",title:"Batch Size"},batchTimeout:{type:"number",description:"Batch Timeout",tooltip:"Batch Timeout",title:"Batch Timeout"},allowDuplicates:{type:"bool",description:"Allow Duplicates",tooltip:"Allow Duplicates",title:"Allow Duplicates"},reverse:{type:"bool",description:"Reverse",tooltip:"Reverse",title:"Reverse"},ignoreInvalidExchanges:{type:"bool",description:"Ignore Invalid Exchanges",tooltip:"Ignore Invalid Exchanges",title:"Ignore Invalid Exchanges"}}},"org.apache.camel.model.loadbalancer.RandomLoadBalancer":{type:"object",description:"org.apache.camel.model.loadbalancer.Random Load Balancer",tooltip:"org.apache.camel.model.loadbalancer.Random Load Balancer",properties:{}},"org.apache.camel.model.dataformat.XmlJsonDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Xml Json Data Format",tooltip:"org.apache.camel.model.dataformat.Xml Json Data Format",properties:{encoding:{type:"string",description:"Encoding",tooltip:"Encoding",title:"Encoding"},elementName:{type:"string",description:"Element Name",tooltip:"Element Name",title:"Element Name"},arrayName:{type:"string",description:"Array Name",tooltip:"Array Name",title:"Array Name"},rootName:{type:"string",description:"Root Name",tooltip:"Root Name",title:"Root Name"},expandableProperties:{type:"array",description:"Expandable Properties",tooltip:"Expandable Properties",title:"Expandable Properties"},typeHints:{type:"string",description:"Type Hints",tooltip:"Type Hints",title:"Type Hints"},forceTopLevelObject:{type:"bool",description:"Force Top Level Object",tooltip:"Force Top Level Object",title:"Force Top Level Object"},namespaceLenient:{type:"bool",description:"Namespace Lenient",tooltip:"Namespace Lenient",title:"Namespace Lenient"},skipWhitespace:{type:"bool",description:"Skip Whitespace",tooltip:"Skip Whitespace",title:"Skip Whitespace"},trimSpaces:{type:"bool",description:"Trim Spaces",tooltip:"Trim Spaces",title:"Trim Spaces"},skipNamespaces:{type:"bool",description:"Skip Namespaces",tooltip:"Skip Namespaces",title:"Skip Namespaces"},removeNamespacePrefixes:{type:"bool",description:"Remove Namespace Prefixes",tooltip:"Remove Namespace Prefixes",title:"Remove Namespace Prefixes"}}},"org.apache.camel.model.dataformat.HL7DataFormat":{type:"object",description:"org.apache.camel.model.dataformat.HL7Data Format",tooltip:"org.apache.camel.model.dataformat.HL7Data Format",properties:{validate:{type:"bool",description:"Validate",tooltip:"Validate",title:"Validate"}}},"org.apache.camel.model.loadbalancer.WeightedLoadBalancer":{type:"object",description:"org.apache.camel.model.loadbalancer.Weighted Load Balancer",tooltip:"org.apache.camel.model.loadbalancer.Weighted Load Balancer",properties:{distributionRatio:{type:"string",description:"Distribution Ratio",tooltip:"Distribution Ratio",title:"Distribution Ratio"},distributionRatioDelimiter:{type:"string",description:"Distribution Ratio Delimiter",tooltip:"Distribution Ratio Delimiter",title:"Distribution Ratio Delimiter"},roundRobin:{type:"bool",description:"Round Robin",tooltip:"Round Robin",title:"Round Robin"}}},"org.apache.camel.model.dataformat.C24IODataFormat":{type:"object",description:"org.apache.camel.model.dataformat.C24IOData Format",tooltip:"org.apache.camel.model.dataformat.C24IOData Format",properties:{elementTypeName:{type:"string",description:"Element Type Name",tooltip:"Element Type Name",title:"Element Type Name"},contentType:{type:"org.apache.camel.model.dataformat.C24IOContentType",description:"Content Type",tooltip:"Content Type",title:"Content Type"}}},"org.apache.camel.model.config.StreamResequencerConfig":{type:"object",description:"org.apache.camel.model.config.Stream Resequencer Config",tooltip:"org.apache.camel.model.config.Stream Resequencer Config",properties:{comparatorRef:{type:"string",description:"Comparator Ref",tooltip:"Comparator Ref",title:"Comparator Ref"},capacity:{type:"number",description:"Capacity",tooltip:"Capacity",title:"Capacity"},timeout:{type:"number",description:"Timeout",tooltip:"Timeout",title:"Timeout"},ignoreInvalidExchanges:{type:"bool",description:"Ignore Invalid Exchanges",tooltip:"Ignore Invalid Exchanges",title:"Ignore Invalid Exchanges"},rejectOld:{type:"bool",description:"Reject Old",tooltip:"Reject Old",title:"Reject Old"}}},"org.apache.camel.model.loadbalancer.FailoverLoadBalancer":{type:"object",description:"org.apache.camel.model.loadbalancer.Failover Load Balancer",tooltip:"org.apache.camel.model.loadbalancer.Failover Load Balancer",properties:{exceptions:{type:"array",description:"Exceptions",tooltip:"Exceptions",title:"Exceptions"},roundRobin:{type:"bool",description:"Round Robin",tooltip:"Round Robin",title:"Round Robin"},maximumFailoverAttempts:{type:"number",description:"Maximum Failover Attempts",tooltip:"Maximum Failover Attempts",title:"Maximum Failover Attempts"}}},"org.apache.camel.model.dataformat.Base64DataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Base64Data Format",tooltip:"org.apache.camel.model.dataformat.Base64Data Format",properties:{lineSeparator:{type:"string",description:"Line Separator",tooltip:"Line Separator",title:"Line Separator"},lineLength:{type:"number",description:"Line Length",tooltip:"Line Length",title:"Line Length"},urlSafe:{type:"bool",description:"Url Safe",tooltip:"Url Safe",title:"Url Safe"}}},"org.apache.camel.model.dataformat.PGPDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.PGPData Format",tooltip:"org.apache.camel.model.dataformat.PGPData Format",properties:{keyUserid:{type:"string",description:"Key Userid",tooltip:"Key Userid",title:"Key Userid"},password:{type:"string",description:"Password",tooltip:"Password",title:"Password"},keyFileName:{type:"string",description:"Key File Name",tooltip:"Key File Name",title:"Key File Name"},provider:{type:"string",description:"Provider",tooltip:"Provider",title:"Provider"},armored:{type:"bool",description:"Armored",tooltip:"Armored",title:"Armored"},integrity:{type:"bool",description:"Integrity",tooltip:"Integrity",title:"Integrity"}}},"org.apache.camel.model.dataformat.JaxbDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Jaxb Data Format",tooltip:"org.apache.camel.model.dataformat.Jaxb Data Format",properties:{contextPath:{type:"string",description:"Context Path",tooltip:"Context Path",title:"Context Path"},schema:{type:"string",description:"Schema",tooltip:"Schema",title:"Schema"},encoding:{type:"string",description:"Encoding",tooltip:"Encoding",title:"Encoding"},partClass:{type:"string",description:"Part Class",tooltip:"Part Class",title:"Part Class"},partNamespace:{type:"string",description:"Part Namespace",tooltip:"Part Namespace",title:"Part Namespace"},namespacePrefixRef:{type:"string",description:"Namespace Prefix Ref",tooltip:"Namespace Prefix Ref",title:"Namespace Prefix Ref"},xmlStreamWriterWrapper:{type:"string",description:"Xml Stream Writer Wrapper",tooltip:"Xml Stream Writer Wrapper",title:"Xml Stream Writer Wrapper"},prettyPrint:{type:"bool",description:"Pretty Print",tooltip:"Pretty Print",title:"Pretty Print"},ignoreJAXBElement:{type:"bool",description:"Ignore JAXBElement",tooltip:"Ignore JAXBElement",title:"Ignore JAXBElement"},filterNonXmlChars:{type:"bool",description:"Filter Non Xml Chars",tooltip:"Filter Non Xml Chars",title:"Filter Non Xml Chars"},fragment:{type:"bool",description:"Fragment",tooltip:"Fragment",title:"Fragment"}}},"org.apache.camel.model.dataformat.ZipDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Zip Data Format",tooltip:"org.apache.camel.model.dataformat.Zip Data Format",properties:{compressionLevel:{type:"number",description:"Compression Level",tooltip:"Compression Level",title:"Compression Level"}}},"org.apache.camel.model.dataformat.FlatpackDataFormat":{type:"object",description:"org.apache.camel.model.dataformat.Flatpack Data Format",tooltip:"org.apache.camel.model.dataformat.Flatpack Data Format",properties:{}},"org.apache.camel.model.loadbalancer.TopicLoadBalancer":{type:"object",description:"org.apache.camel.model.loadbalancer.Topic Load Balancer",tooltip:"org.apache.camel.model.loadbalancer.Topic Load Balancer",properties:{}}},languages:{constant:{name:"Constant",description:"Constant expression"},el:{name:"EL",description:"Unified expression language from JSP / JSTL / JSF"},header:{name:"Header",description:"Header value"},javaScript:{name:"JavaScript",description:"JavaScript expression"},jxpath:{name:"JXPath",description:"JXPath expression"},method:{name:"Method",description:"Method call expression"},mvel:{name:"MVEL",description:"MVEL expression"},ognl:{name:"OGNL",description:"OGNL expression"},groovy:{name:"Groovy",description:"Groovy expression"},property:{name:"Property",description:"Property value"},python:{name:"Python",description:"Python expression"},php:{name:"PHP",description:"PHP expression"},ref:{name:"Ref",description:"Reference to a bean expression"},ruby:{name:"Ruby",description:"Ruby expression"},simple:{name:"Simple",description:"Simple expression language from Camel"},spel:{name:"Spring EL",description:"Spring expression language"},sql:{name:"SQL",description:"SQL expression"},tokenize:{name:"Tokenizer",description:"Tokenizing expression"},xpath:{name:"XPath",description:"XPath expression"},xquery:{name:"XQuery",description:"XQuery expression"}}},_jsonSchema={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},"default":{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean","default":!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean","default":!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean","default":!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},"enum":{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},"default":{}};
(function(){function a(a){this.tokens=[],this.tokens.links={},this.options=a||h.defaults,this.rules=i.normal,this.options.gfm&&(this.rules=this.options.tables?i.tables:i.gfm)}function b(a,b){if(this.options=b||h.defaults,this.links=a,this.rules=j.normal,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?j.breaks:j.gfm:this.options.pedantic&&(this.rules=j.pedantic)}function c(a){this.tokens=[],this.token=null,this.options=a||h.defaults}function d(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function e(a,b){return a=a.source,b=b||"",function c(d,e){return d?(e=e.source||e,e=e.replace(/(^|[^\[])\^/g,"$1"),a=a.replace(d,e),c):new RegExp(a,b)}}function f(){}function g(a){for(var b,c,d=1;d<arguments.length;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function h(b,e){try{return e&&(e=g({},h.defaults,e)),c.parse(a.lex(b,e),e)}catch(f){if(f.message+="\nPlease report this to https://github.com/chjj/marked.",(e||h.defaults).silent)return"<p>An error occured:</p><pre>"+d(f.message+"",!0)+"</pre>";throw f}}var i={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:f,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:f,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:f,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};i.bullet=/(?:[*+-]|\d+\.)/,i.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,i.item=e(i.item,"gm")(/bull/g,i.bullet)(),i.list=e(i.list)(/bull/g,i.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),i._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",i.html=e(i.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,i._tag)(),i.paragraph=e(i.paragraph)("hr",i.hr)("heading",i.heading)("lheading",i.lheading)("blockquote",i.blockquote)("tag","<"+i._tag)("def",i.def)(),i.normal=g({},i),i.gfm=g({},i.normal,{fences:/^ *(`{3,}|~{3,}) *(\w+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),i.gfm.paragraph=e(i.paragraph)("(?!","(?!"+i.gfm.fences.source.replace("\\1","\\2")+"|")(),i.tables=g({},i.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),a.rules=i,a.lex=function(b,c){var d=new a(c);return d.lex(b)},a.prototype.lex=function(a){return a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(a,!0)},a.prototype.token=function(a,b){for(var c,d,e,f,g,h,j,k,l,a=a.replace(/^ +$/gm,"");a;)if((e=this.rules.newline.exec(a))&&(a=a.substring(e[0].length),e[0].length>1&&this.tokens.push({type:"space"})),e=this.rules.code.exec(a))a=a.substring(e[0].length),e=e[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?e:e.replace(/\n+$/,"")});else if(e=this.rules.fences.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"code",lang:e[2],text:e[3]});else if(e=this.rules.heading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:e[1].length,text:e[2]});else if(b&&(e=this.rules.nptable.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/\n$/,"").split("\n")},k=0;k<h.align.length;k++)h.align[k]=/^ *-+: *$/.test(h.align[k])?"right":/^ *:-+: *$/.test(h.align[k])?"center":/^ *:-+ *$/.test(h.align[k])?"left":null;for(k=0;k<h.cells.length;k++)h.cells[k]=h.cells[k].split(/ *\| */);this.tokens.push(h)}else if(e=this.rules.lheading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:"="===e[2]?1:2,text:e[1]});else if(e=this.rules.hr.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"hr"});else if(e=this.rules.blockquote.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"blockquote_start"}),e=e[0].replace(/^ *> ?/gm,""),this.token(e,b),this.tokens.push({type:"blockquote_end"});else if(e=this.rules.list.exec(a)){for(a=a.substring(e[0].length),this.tokens.push({type:"list_start",ordered:isFinite(e[2])}),e=e[0].match(this.rules.item),this.options.smartLists&&(f=i.bullet.exec(e[0])[0]),c=!1,l=e.length,k=0;l>k;k++)h=e[k],j=h.length,h=h.replace(/^ *([*+-]|\d+\.) +/,""),~h.indexOf("\n ")&&(j-=h.length,h=this.options.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+j+"}","gm"),"")),this.options.smartLists&&k!==l-1&&(g=i.bullet.exec(e[k+1])[0],f===g||"."===f[1]&&"."===g[1]||(a=e.slice(k+1).join("\n")+a,k=l-1)),d=c||/\n\n(?!\s*$)/.test(h),k!==l-1&&(c="\n"===h[h.length-1],d||(d=c)),this.tokens.push({type:d?"loose_item_start":"list_item_start"}),this.token(h,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(e=this.rules.html.exec(a))a=a.substring(e[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===e[1],text:e[0]});else if(b&&(e=this.rules.def.exec(a)))a=a.substring(e[0].length),this.tokens.links[e[1].toLowerCase()]={href:e[2],title:e[3]};else if(b&&(e=this.rules.table.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/(?: *\| *)?\n$/,"").split("\n")},k=0;k<h.align.length;k++)h.align[k]=/^ *-+: *$/.test(h.align[k])?"right":/^ *:-+: *$/.test(h.align[k])?"center":/^ *:-+ *$/.test(h.align[k])?"left":null;for(k=0;k<h.cells.length;k++)h.cells[k]=h.cells[k].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(h)}else if(b&&(e=this.rules.paragraph.exec(a)))a=a.substring(e[0].length),this.tokens.push({type:"paragraph",text:"\n"===e[1][e[1].length-1]?e[1].slice(0,-1):e[1]});else if(e=this.rules.text.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"text",text:e[0]});else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return this.tokens};var j={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:f,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:f,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};j._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,j._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,j.link=e(j.link)("inside",j._inside)("href",j._href)(),j.reflink=e(j.reflink)("inside",j._inside)(),j.normal=g({},j),j.pedantic=g({},j.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),j.gfm=g({},j.normal,{escape:e(j.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:e(j.text)("]|","~]|")("|","|https?://|")()}),j.breaks=g({},j.gfm,{br:e(j.br)("{2,}","*")(),text:e(j.gfm.text)("{2,}","*")()}),b.rules=j,b.output=function(a,c,d){var e=new b(c,d);return e.output(a)},b.prototype.output=function(a){for(var b,c,e,f,g="";a;)if(f=this.rules.escape.exec(a))a=a.substring(f[0].length),g+=f[1];else if(f=this.rules.autolink.exec(a))a=a.substring(f[0].length),"@"===f[2]?(c=this.mangle(":"===f[1][6]?f[1].substring(7):f[1]),e=this.mangle("mailto:")+c):(c=d(f[1]),e=c),g+='<a href="'+e+'">'+c+"</a>";else if(f=this.rules.url.exec(a))a=a.substring(f[0].length),c=d(f[1]),e=c,g+='<a href="'+e+'">'+c+"</a>";else if(f=this.rules.tag.exec(a))a=a.substring(f[0].length),g+=this.options.sanitize?d(f[0]):f[0];else if(f=this.rules.link.exec(a))a=a.substring(f[0].length),g+=this.outputLink(f,{href:f[2],title:f[3]});else if((f=this.rules.reflink.exec(a))||(f=this.rules.nolink.exec(a))){if(a=a.substring(f[0].length),b=(f[2]||f[1]).replace(/\s+/g," "),b=this.links[b.toLowerCase()],!b||!b.href){g+=f[0][0],a=f[0].substring(1)+a;continue}g+=this.outputLink(f,b)}else if(f=this.rules.strong.exec(a))a=a.substring(f[0].length),g+="<strong>"+this.output(f[2]||f[1])+"</strong>";else if(f=this.rules.em.exec(a))a=a.substring(f[0].length),g+="<em>"+this.output(f[2]||f[1])+"</em>";else if(f=this.rules.code.exec(a))a=a.substring(f[0].length),g+="<code>"+d(f[2],!0)+"</code>";else if(f=this.rules.br.exec(a))a=a.substring(f[0].length),g+="<br>";else if(f=this.rules.del.exec(a))a=a.substring(f[0].length),g+="<del>"+this.output(f[1])+"</del>";else if(f=this.rules.text.exec(a))a=a.substring(f[0].length),g+=d(f[0]);else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return g},b.prototype.outputLink=function(a,b){return"!"!==a[0][0]?'<a href="'+d(b.href)+'"'+(b.title?' title="'+d(b.title)+'"':"")+">"+this.output(a[1])+"</a>":'<img src="'+d(b.href)+'" alt="'+d(a[1])+'"'+(b.title?' title="'+d(b.title)+'"':"")+">"},b.prototype.mangle=function(a){for(var b,c="",d=a.length,e=0;d>e;e++)b=a.charCodeAt(e),Math.random()>.5&&(b="x"+b.toString(16)),c+="&#"+b+";";return c},c.parse=function(a,b){var d=new c(b);return d.parse(a)},c.prototype.parse=function(a){this.inline=new b(a.links,this.options),this.tokens=a.reverse();for(var c="";this.next();)c+=this.tok();return c},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var a=this.token.text;"text"===this.peek().type;)a+="\n"+this.next().text;return this.inline.output(a)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var a=this.options.highlight(this.token.text,this.token.lang);null!=a&&a!==this.token.text&&(this.token.escaped=!0,this.token.text=a)}return this.token.escaped||(this.token.text=d(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var b,c,e,f,g,h="";for(h+="<thead>\n<tr>\n",c=0;c<this.token.header.length;c++)b=this.inline.output(this.token.header[c]),h+=this.token.align[c]?'<th align="'+this.token.align[c]+'">'+b+"</th>\n":"<th>"+b+"</th>\n";for(h+="</tr>\n</thead>\n",h+="<tbody>\n",c=0;c<this.token.cells.length;c++){for(e=this.token.cells[c],h+="<tr>\n",g=0;g<e.length;g++)f=this.inline.output(e[g]),h+=this.token.align[g]?'<td align="'+this.token.align[g]+'">'+f+"</td>\n":"<td>"+f+"</td>\n";h+="</tr>\n"}return h+="</tbody>\n","<table>\n"+h+"</table>\n";case"blockquote_start":for(var h="";"blockquote_end"!==this.next().type;)h+=this.tok();return"<blockquote>\n"+h+"</blockquote>\n";case"list_start":for(var i=this.token.ordered?"ol":"ul",h="";"list_end"!==this.next().type;)h+=this.tok();return"<"+i+">\n"+h+"</"+i+">\n";case"list_item_start":for(var h="";"list_item_end"!==this.next().type;)h+="text"===this.token.type?this.parseText():this.tok();return"<li>"+h+"</li>\n";case"loose_item_start":for(var h="";"list_item_end"!==this.next().type;)h+=this.tok();return"<li>"+h+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},f.exec=f,h.options=h.setOptions=function(a){return g(h.defaults,a),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-"},h.Parser=c,h.parser=c.parse,h.Lexer=a,h.lexer=a.lex,h.InlineLexer=b,h.inlineLexer=b.output,h.parse=h,"object"==typeof exports?module.exports=h:"function"==typeof define&&define.amd?define(function(){return h}):this.marked=h}).call(function(){return this||("undefined"!=typeof window?window:global)}()),dmr_js(),function(){function a(){}function b(){}function d(){}function e(){}function g(){}function h(){}function j(){}function l(){}function m(){}function n(){}function o(){}function q(){}function r(){}function s(){}function t(){}function u(){}function v(){}function w(a){er=a}function x(){te()}function y(){Hc()}function z(){new y}function A(){Bc(this)}function B(){Bc(this)}function C(){Ac(this)}function D(){Se(this)}function E(){Eb(this)}function F(a){this.b=a}function G(a){this.b=a}function H(a){this.b=a}function I(a){this.b=a}function J(a){this.b=a}function K(a){this.b=a}function L(a){this.b=a}function M(a){this.b=a}function N(a){this.b=a}function O(a){this.d=a}function P(a){this.d=a}function Q(a){this.c=a}function R(a){this.c=a}function S(a){this.c=a}function T(a){this.b=a}function U(a){this.b=a}function V(a){this.b=a}function W(a){this.b=a}function X(a){return a}function Y(){throw new cb}function Z(){throw new cb}function $(){throw new cb}function _(){ah().r(this)}function ab(){_.call(this)}function bb(){_.call(this)}function cb(){_.call(this)}function db(){_.call(this)}function eb(){_.call(this)}function fb(){_.call(this)}function gb(){_.call(this)}function hb(){_.call(this)}function ib(a){kc.call(this,a)}function jb(a){kc.call(this,a)}function kb(a){jb.call(this,a)}function lb(a){ib.call(this,a)}function mb(a){ib.call(this,a)}function nb(a){ik.alert(a)}function ob(a){ib.call(this,a)}function pb(a){De.call(this,a)}function qb(a){ib.call(this,a)}function rb(a){De.call(this,a)}function sb(a){ib.call(this,a)}function tb(a){ib.call(this,a)}function ub(a){ob.call(this,a)}function vb(a){ed(),this.c=a}function wb(a){return Rb(),a}function xb(){return tj(),ds}function yb(a){Zj(),$j(this,a)}function zb(a){ib.call(this,a)}function Ab(a){Tb.call(this,a)}function Bb(a){fe.call(this,a)}function Cb(a){ib.call(this,a)}function Db(a){vb.call(this,a)}function Eb(a){a.d=(ed(),_r)}function Fb(a,b,c){a.d.T(b,c)}function Gb(a,b){a.length=b}function Hb(a,b){return!Fi(a,b)}function Ib(a,b){return!Ei(a,b)}function Jb(a){return isNaN(a)}function Kb(a){return new Sq[a]}function Lb(a){return a.f*a.b[0]}function Mb(a,b){return a.d.O(b)}function Nb(a){return a.l|a.m<<22}function Ob(){throw new kb(em)}function Pb(){this.b=new Bb(1)}function Qb(){Qb=a,jr=new b}function Rb(){Rb=a,Es=new Fe}function Sb(){Sb=a,Cr={},Dr={}}function Tb(a){this.c=a,this.b=a}function Ub(a,b){this.c=a,this.b=b}function Vb(a,b){this.b=a,this.c=b}function Wb(a,b){this.b=a,this.c=b}function Xb(a,b){this.e=a,this.f=b}function Yb(a){Eb(this),this.d=a}function Zb(a){kc.call(this,lo+a)}function $b(a,b){Eg.call(this,a,b)}function _b(a,b){Rb(),Fb(Es,a,b)}function ac(a,b){return a.d.sb(b)}function bc(a){return Uh(a.d.rb())}function cc(a){return a.b<a.d.L()}function dc(a){return Math.floor(a)}function ec(a){return ph((ah(),a))}function fc(a,b){return a.k[fl+b]}function gc(a){return Rb(),fg(Es,a)}function hc(a){Zj(),we.call(this,a)}function ic(a){fj(),pg.call(this,a)}function jc(a){Ac(this),Gb(this.b,a)}function kc(a){ah().r(this),this.i=a}function lc(a){ik.clearTimeout(a)}function mc(a,b,c){a.splice(b,c)}function nc(a,b,c,d){a.splice(b,c,d)}function oc(a,b,c,d){a.d.Ab(b,c,d)}function pc(a,b,c){Rb(),mg(Es,a,b,c)}function qc(a,b){return Rb(),Ff(a,b)}function rc(a,b){return a.indexOf(b)}function sc(a){return parseInt(a)||-1}function tc(a){return null==a?null:a}function uc(a,b){return a.cM&&a.cM[b]}function vc(a,b){return parseInt(a,b)}function wc(a,b){return Math.pow(a,b)}function xc(a,b){return Sj(a,b,!1)}function yc(a){return Me(a.l,a.m,a.h)}function zc(a){return Oe(dt,Yq,1,a,0)}function Ac(a){a.b=Oe(Ks,Yq,0,0,0)}function Bc(a){a.c=Ag(),a.b=a.c.A()}function Cc(a){return a&&a.g?a.g:null}function Dc(a){throw new Cb(Dn+a+jp)}function Ec(a){throw new Cb(Cn+a+Ck)}function Fc(a){if(a.b)throw new gb}function Gc(a,b){a.b&&(be(b),Ye(b))}function Hc(){cs||(cs=!0,ek())}function Ic(){Ic=a,ss=tg((tj(),ds))}function Jc(a){Zj(),ng.call(this,a,0)}function Kc(a,b){(0>a||a>=b)&&pd(a,b)}function Lc(a,b){return a.c.x(a.b,b),a}function Mc(a,b){return a.c.y(a.b,b),a}function Nc(a,b){return Sj(a,b,!0),rr}function Oc(a,b){return Uh(ac(a,pj(b)))}function Pc(a,b){return a.cM&&!!a.cM[b]}function Qc(a,b){return null!=a&&Pc(a,b)}function Rc(b){return b.tM==a||Pc(b,1)}function Sc(a){return a.$H||(a.$H=++gr)}function Tc(a){return typeof a==eq&&a>0}function Uc(a){return a>=55296&&56319>=a}function Vc(a){return a>=56320&&57343>=a}function Wc(a){return he(a)?ec(sf(a)):lk}function Xc(a,b){return a.charCodeAt(b)}function Yc(a,b){return a.lastIndexOf(b)}function Zc(a,b,c){return a.substr(b,c-b)}function $c(a){return null==a?null:a.name}function _c(a){df.call(this,a,null,null)}function ad(a){Zj(),ng.call(this,Gh(a),0)}function bd(a){this.d=a,this.c=a.b.c.b}function cd(){this.b=Oe(et,Uq,-1,50,1)}function dd(){dd=a,wr=Oe(bt,Yq,15,256,0)}function ed(){ed=a,_r=new Db((tj(),rs))}function fd(a){return tj(),rg((Ic(),ss),a)}function gd(a,b){return fi(a,(Rb(),Vg(b)))}function hd(a){return he(a)?ld(sf(a)):a+lk}function id(a,b){return a==b||!!b&&b.b==a.b}function jd(a,b){return a==b||!!b&&b.b==a.b}function kd(a,b){return a==b||!!b&&a.b==b.b}function ld(a){return null==a?null:a.message}function md(a,b,c){return a.apply(b,c)}function nd(a,b,c){return a.c.C(a.b,b,b,c),a}function od(a,b,c){return a.lastIndexOf(b,c)}function pd(a,b){throw new sb(Vm+a+Ok+b)}function qd(a,b){for(p in b)a[p]=b[p]}function rd(a,b){xh(a,1),a.b[a.c++]=b?1:0}function sd(a,b){a[a.explicitLength++]=b}function td(a,b,c){return Hf(xg(a),b,c),a}function ud(a,b){return Fc(a),a.d=new ze(b),a}function vd(a,b){return Fc(a),a.d=new Ae(b),a}function wd(a,b){return a.c.z(a.b,lk+lj(b)),a}function xd(a,b){return Li(a.b,a.c++,b),!0}function yd(a,b){var c;return c=a.f,a.f=b,c}function zd(a){var b=Sq[a.d];return a=null,b}function Ad(){try{null.a()}catch(a){return a}}function Bd(){this.c=Ag(),this.b=this.c.A()}function Cd(a,b,c){this.c=a,this.d=b,this.b=c}function Dd(a,b){return a==b||!!b&&Re(a.b,b.b)}function Ed(a,b){return a==b||!!b&&Mh(a.b,b.b)}function Fd(a,b){return a==b||!!b&&kh(a.b,b.b)}function Gd(a,b){return a==b||!!b&&Di(a.b,b.b)}function Hd(a,b){return a==b||!!b&&le(b.b,a.b)}function Id(a,b){return a==b||!!b&&Re(a.b,b.b)}function Jd(a,b){return a==b||!!b&&a.b.eQ(b.b)}function Kd(a,b){return a==b||!!b&&b.b.eQ(a.b)}function Ld(a,b){return a==b||!!b&&b.d.eQ(a.d)}function Md(a,b){return a.substr(b,a.length-b)}function Nd(a,b,c){return td(a,b,(Rb(),Vg(c)))}function Od(a,b,c){return Hf(a,b,(Rb(),Vg(c)))}function Pd(a){var b;return b=a,Rc(b)?b.cZ:Hs}function Qd(a){var b;return b=a.Q(),new Vb(a,b)}function Rd(a){var b;return b=a.c.H(),new M(b)}function Sd(a,b){var c;return c=rf(b),sd(b,c),c}function Td(a,b){ed(),Qf.call(this,new $b(a,b))}function Ud(a,b){ed(),Qf.call(this,new Eg(a,b))}function Vd(a){vb.call(this,(tj(),ns)),this.b=a}function Wd(a){vb.call(this,(tj(),gs)),this.b=a}function Xd(a){vb.call(this,(tj(),ls)),this.b=a}function Yd(a){vb.call(this,(tj(),qs)),this.b=a}function Zd(a,b,c){return Fc(a),a.d=new Ud(b,c),a}function $d(a,b){return!a&&(a=[]),a[a.length]=b,a}function _d(a,b){xh(a,1),a.b[a.c++]=~~(b<<24)>>24}function ae(a){a.b||(a.b=!0,a.d=a.d.Gb())}function be(a){a.b.c=a.c,a.c.b=a.b,a.b=a.c=null}function ce(a,b){var c;return c=a.b.T(b,a),null==c}function de(a,b){return Fc(a),a.d=(ff(),b?bs:as),a}function ee(a,b,c){fj(),this.f=a,this.e=b,this.b=c}function fe(a){if(Se(this),0>a)throw new ob(Rp)}function ge(a){return Qc(a,26)?new Ab(a):new Tb(a)}function he(b){return null!=b&&b.tM!=a&&!Pc(b,1)}function ie(a,b){return Me(a.l&b.l,a.m&b.m,a.h&b.h)}function je(a,b){return Me(a.l|b.l,a.m|b.m,a.h|b.h)}function ke(a,b){return Me(a.l^b.l,a.m^b.m,a.h^b.h)}function le(a,b){return a.l==b.l&&a.m==b.m&&a.h==b.h}function me(a,b){return a.l!=b.l||a.m!=b.m||a.h!=b.h}function ne(a){var b;return b=a,Rc(b)?b.hC():Sc(b)}function oe(a){var b;return b=new E,b.d=a.d.yb(),b}function pe(a){var b;return b=new E,b.d=a.d.Kb(),b}function qe(a,b){return a.length>=b&&a.splice(0,b),a}function re(){re=a,kr=[],lr=[],_f(new l,kr,lr)}function se(){se=a,tr=new F(!1),ur=new F(!0)}function te(){te=a,Error.stackTraceLimit=128}function ue(){256==Er&&(Cr=Dr,Dr={},Er=0),++Er}function ve(a){return Qc(a,19)?a:new bf(a)}function we(a){if(!a)throw new fb;this.f=0,Te(this,a)}function xe(a){ed(),vb.call(this,(tj(),fs)),this.b=a}function ye(a){ed(),vb.call(this,(tj(),hs)),this.b=a}function ze(a){ed(),vb.call(this,(tj(),is)),this.b=a}function Ae(a){ed(),vb.call(this,(tj(),ks)),this.b=a}function Be(a){ed(),vb.call(this,(tj(),ms)),this.b=a}function Ce(a){ed(),vb.call(this,(tj(),ps)),this.b=a}function De(a){ah().r(this),this.i=a?Ze(a):null,this.f=a}function Ee(a,b,c){this.b=Do,this.e=a,this.c=b,this.d=c}function Fe(){this.d=new D,this.b=new D,this.c=new D}function Ge(){ed(),vb.call(this,(tj(),ls)),this.b=new C}function He(){ed(),vb.call(this,(tj(),ns)),this.b=new _g}function Ie(a){var b;return b=new Pb,ce(b,a),new R(b)}function Je(a,b){var c,d;d=a.d,c=d.c,_d(b,c.b),d.Mb(b)}function Ke(a,b){var c;return c=a,Rc(c)?c.eQ(b):c===b}function Le(a,b){return tc(a)===tc(b)||null!=a&&Ke(a,b)}function Me(a,b,c){return hk=new n,hk.l=a,hk.m=b,hk.h=c,hk}function Ne(a,b,c,d,e,f){return Rb(),ej(Es,a,b,c,d,e,f)}function Oe(a,b,c,d,e){var f;return f=vi(e,d),nf(a,b,c,f),f}function Pe(a,b){return a.c.z(a.b,String.fromCharCode(b)),a}function Qe(a,b){if(null!=a&&!uc(a,b))throw new bb;return a}function Re(a,b){return Qc(b,1)?String(a)==b:!1}function Se(a){a.e=[],a.k={},a.i=!1,a.f=null,a.j=0}function Te(a,b){a.d=b,a.b=sh(b),a.b<54&&(a.i=Uh(Tg(b)))}function Ue(a,b){ed();var c;for(c=0;b>c;++c)a.c.y(a.b,pk)}function Ve(a,b){var c;for(c=0;c<b.length;++c)b[c]=a.b[a.c++]}function We(a,b,c){var d;return d=b+c,Fg(a.length,b,d),Vf(a,b,d)}function Xe(a){var b;return b=new A,a.zb(b,0,!0),b.c.D(b.b)}function Ye(a){var b;b=a.d.c.c,a.c=b,a.b=a.d.c,b.b=a.d.c.c=a}function Ze(a){var b,c;return b=a.cZ.f,c=a.n(),null!=c?b+gl+c:b}function $e(a){var b;if(b=Af(a),-1==b)throw new ib(zm);return b}function _e(a){vb.call(this,(tj(),ls)),this.b=new ef(a.b)}function af(a){ed(),vb.call(this,(tj(),es)),this.b=new yb(Ug(a))}function bf(a){_.call(this),this.c=a,this.b=lk,ah().p(this)}function cf(a,b){fj(),this.f=a,this.e=1,this.b=nf(Js,Uq,-1,[b])}function df(a,b,c){this.d=a,Xb.call(this,b,c),this.b=this.c=null}function ef(a){Ac(this),ag(this.b,0,0,a.M()),this.c=this.b.length}function ff(){ff=a,ed(),bs=new Wd(!0),as=new Wd(!1)}function gf(a){return a.l+4194304*a.m+17592186044416*a.h}function hf(a){return null==a?dq:he(a)?$c(sf(a)):Qc(a,1)?ko:Pd(a).f}function jf(a,b){return a==b||!!b&&Re(b.b.b,a.b.b)&&Ld(b.b.c,a.b.c)}function kf(a){if(a.c<0)throw new db;a.d.fb(a.c),a.b=a.c,a.c=-1}function lf(a,b){if(!b)throw new ob(cq);return Fc(a),a.d=Xi(b),a}function mf(a,b){var c,d;return c=a,d=vi(0,b),nf(c.cZ,c.cM,c.qI,d),d}function nf(a,b,c,d){return re(),zf(d,kr,lr),d.cZ=a,d.cM=b,d.qI=c,d}function of(a,b,c,d){var e;return e=Oe(Js,Uq,-1,b,1),wi(e,a,b,c,d),e}function pf(a,b){var c;return c=a.f,a.f=b,a.i||(a.i=!0,++a.j),c}function qf(a){var b;return b=a.f,a.f=null,a.i&&(a.i=!1,--a.j),b}function rf(a){var b=a.join(lk);return a.length=a.explicitLength=0,b}function sf(b){if(null!=b&&(b.tM==a||Pc(b,1)))throw new bb;return b}function tf(a,b){if(!b)throw new ob(cq);return Fc(a),a.d=b.d.yb(),a}function uf(a,b){var c;return c=new v,c.f=a+b,Tc(0)&&hi(0,c),c.c=2,c}function vf(a,b){var c;return c=new v,c.f=lk+a,Tc(b)&&hi(b,c),c.c=1,c}function wf(a,b){var c;for(c=a.e-1;c>=0&&a.b[c]==b[c];--c);return 0>c}function xf(a,b){var c;for(c=0;b>c;++c)Li(a,c,new U(Qe(a[c],25)))}function yf(a,b,c){var d;for(xh(a,c),d=0;c>d;++d)a.b[a.c++]=b[d]}function zf(a,b,c){re();for(var d=0,e=b.length;e>d;++d)a[b[d]]=c[d]}function Af(a){return a.c>=a.b.length?-1:255&a.b[a.c++]}function Bf(a){if(a.b>=a.d.L())throw new hb;return a.d.eb(a.c=a.b++)}function Cf(a,b){return 0==b||0==a.f?a:b>0?yh(a,b):jj(a,-b)}function Df(a,b){return 0==b||0==a.f?a:b>0?jj(a,b):yh(a,-b)}function Ef(a,b){var c=a[b],d=0;for(k in c)d=Math.max(d,k);return d}function Ff(a,b){var c=[a];for(i=0;i<b.length;i++)c.push(b[i]);return c}function Gf(a,b,c){var d;return Fc(a),d=new E,Rf(d,c),a.d=new Td(b,d),a}function Hf(a,b,c){var d;return Fc(a),d=new E,fi(d,c),a.d=new Td(b,d),a}function If(a,b,c,d){var e;return e=Oe(Js,Uq,-1,b+1,1),Bj(e,a,b,c,d),e}function Jf(a,b,c,d){return null==b&&(b=dq),a.c.x(a.b,b.substr(c,d-c)),a}function Kf(a,b){var c,d;return c=a,d=c.slice(0,b),nf(c.cZ,c.cM,c.qI,d),d}function Lf(a,b,c,d){var e;return e=new v,e.f=a+b,Tc(c)&&hi(c,e),e.e=d,e}function Mf(a,b,c){for(;c<a.c;++c)if(Le(b,a.b[c]))return c;return-1}function Nf(a){if(a.c==a.d.b.c)throw new hb;return a.b=a.c,a.c=a.c.b,a.b}function Of(a){for(;a.e>0&&0==a.b[--a.e];);0==a.b[a.e++]&&(a.f=0)}function Pf(a){a&&hg((Qb(),jr)),--fr,a&&-1!=ir&&(lc(ir),ir=-1)}function Qf(a){if(vb.call(this,(tj(),os)),!a)throw new ob(oq);this.b=a}function Rf(a,b){if(null==b)throw new ob(cq);return Fc(a),a.d=new Ce(b),a}function Sf(a,b){if(null==b)throw new ob(cq);return Fc(a),a.d=new qg(b),a}function Tf(a){var b;if(b=Af(a),-1==b)throw new ib(zm);return~~(b<<24)>>24}function Uf(a,b){var c;return c=sg(a,b),0==c.length?(new d).s(b):qe(c,1)}function Vf(a,b,c){return a=a.slice(b,c),String.fromCharCode.apply(null,a)}function Wf(a){var b;return Rb(),null!=a&&he(a)&&null!=(b=Cc(sf(a)))?b:a}function Xf(a,b){var c;for(xh(a,b.length),c=0;c<b.length;++c)a.b[a.c++]=b[c]}function Yf(a,b){var c;return c=Qe(a.d.R(b),22),c?(Gc(a,c),c.f):null}function Zf(a,b,c){var d,e=a.k;return b=fl+b,b in e?d=e[b]:++a.j,e[b]=c,d}function $f(a,b){var c,d=a.k;return b=fl+b,b in d&&(c=d[b],--a.j,delete d[b]),c}function _f(a,b,c){var d,e=0;for(var f in a)(d=a[f])&&(b[e]=f,c[e]=d,++e)}function ag(a,b,c,d){Array.prototype.splice.apply(a,[b,c].concat(d))}function bg(a){return~~Math.max(Math.min(a,2147483647),-2147483648)}function cg(){return ik.setTimeout(function(){0!=fr&&(fr=0),ir=-1},10)}function dg(a){return function(){try{return xi(a,this,arguments)}catch(b){throw b}}}function eg(a,b){return 0==b.f?Tr:0==a.f?Tr:(Ni(),aj(a,b))}function fg(a,b){var c;return null==b?null:(c=b[kp],!c&&(c=ch(a,b)),c)}function gg(a){var b,c;if(a.b){c=null;do b=a.b,a.b=null,c=yi(b,c);while(a.b);a.b=c}}function hg(a){var b,c;if(a.c){c=null;do b=a.c,a.c=null,c=yi(b,c);while(a.c);a.c=c}}function ig(a){var b,c;for(b=Oe(et,Uq,-1,a.c,1),c=0;c<a.c;++c)b[c]=a.b[c];return b}function jg(a,b,c){var d;return Fc(a),d=new E,Fc(d),d.d=new ze(c),a.d=new Td(b,d),a}function kg(a,b,c){var d;return Fc(a),d=new E,Fc(d),d.d=new Ae(c),a.d=new Td(b,d),a}function lg(a,b,c,d,e){var f;return f=new v,f.f=a+b,Tc(c)&&hi(c,f),f.c=e?8:0,f.e=d,f}function mg(a,b,c,d){var e,f;f=d?a.c:a.b,e=sf(f.R(b)),e?qd(e,c):e=c,f.T(b,e)}function ng(a,b){this.f=b,this.b=Fh(a),this.b<54?this.i=Uh(a):this.d=Eh(a)}function og(a,b){if(a.f)throw new qb($l);if(b==a)throw new ob($n);return a.f=b,a}function pg(a){if(null==a)throw new fb;if(0==a.length)throw new ub(Oo);mj(this,a)}function qg(a){if(ed(),vb.call(this,(tj(),js)),null==a)throw new ob(Gp);this.b=a}function rg(a,b){var c;if(c=a[fl+b])return c;if(null==b)throw new fb;throw new cb}function sg(a,b){var c,d,e;for(e=a.t(b),c=0,d=e.length;d>c;++c)e[c]=a.q(e[c]);return e}function tg(a){var b,c,d,e;for(b={},d=0,e=a.length;e>d;++d)c=a[d],b[fl+c.c]=c;return b}function ug(a){var b,c,d,e;return b=$e(a),c=$e(a),d=$e(a),e=$e(a),b<<24|c<<16|d<<8|e}function vg(a,b){var c,d;for(xh(a,8),c=Rj(b),d=0;8>d;++d)a.b[a.c++]=~~(c[d]<<24)>>24}function wg(a,b,c){var d;return Fc(a),d=new E,Fc(d),d.d=(ff(),c?bs:as),a.d=new Td(b,d),a}function xg(a){var b;return Fc(a),(b=a.d)==(ed(),_r)?(a.d=new Ge).gb():b.gb()}function yg(a,b){var c;return c=a.d,c==(ed(),_r)?(Fc(a),(a.d=new Ge).Bb(b)):c.Bb(b)}function zg(a,b){var c;return(c=a.d)==(ed(),_r)?(Fc(a),(a.d=new He).Cb(b)):c.Cb(b)}function Ag(){switch(qr){case 1:case 2:case 3:return new j}return new h}function Bg(a){var b,c,d;return b=4194303&a,c=~~a>>22&4194303,d=0>a?1048575:0,Me(b,c,d)}function Cg(a){var b,c;if(0==a)return 32;for(c=0,b=1;0==(b&a);b<<=1)++c;return c}function Dg(a,b){return null==b?!1:a==b||a.toLowerCase()==b.toLowerCase()}function Eg(a,b){if(null==a)throw new ob(bq);if(!b)throw new ob(xq);this.b=a,this.c=oe(b)}function Fg(a,b,c){if(0>b)throw new Zb(b);if(b>c)throw new Zb(c-b);if(c>a)throw new Zb(c)}function Gg(a,b){if(Re(Bo,b))return bj(a);if(Re(Rm,b)||Re(Sm,b))return qh(a);throw new kb(b+xk)}function Hg(a,b){var c,d;return c=a.d.R(b),d=b.e,null==c&&d&&d!=Gs?Hg(a,d):sf(c)}function Ig(a,b){for(var c;a.Z();)if(c=a.$(),null==b?null==c:Ke(b,c))return a;return null}function Jg(a){var b;if(-2==a.c){if(0==a.f)b=-1;else for(b=0;0==a.b[b];++b);a.c=b}return a.c}function Kg(a){var b,c,d;if(null==a)return 0;for(b=1,c=0,d=a.length;d>c;++c)b=31*b+a[c]|0;return b}function Lg(a){var b,c;return c=Zi(a.h),32==c?(b=Zi(a.m),32==b?Zi(a.l)+32:b+20-10):c-12}function Mg(a){var b;this.d=a,b=new C,a.i&&xd(b,new L(a)),Zg(a,b),Kh(a,b),this.b=new O(b)}function Ng(a){ed();var b,c;vb.call(this,(tj(),os)),c=new E,b=Ug(a),ak(c,a),this.b=new $b(b,c)}function Og(a){ck();var b;b=null;try{b=ih(a,a.length)}catch(c){if(c=ve(c),!Qc(c,4))throw c}return b}function Pg(a,b,c,d,e){var f;return f=gj(a,b),c&&uh(f),e&&(a=ci(a,b),rr=d?eh(a):Me(a.l,a.m,a.h)),f}function Qg(a,b,c,d){var e;return e=new v,e.f=a+b,Tc(0!=c?-c:0)&&hi(0!=c?-c:0,e),e.c=4,e.e=Gs,e.b=d,e}function Rg(a,b,c){var d,e,f;for(d=0,e=0;c>e;++e)f=b[e],a[e]=f<<1|d,d=~~f>>>31;0!=d&&(a[c]=d)}function Sg(a,b){var c;return Rb(),c=b&&b[0]&&(typeof b[0]==fq||typeof b[0]==Jp)?b[0]:null,ei(c,a)}function Tg(a){var b;return b=a.e>1?je(Qi(Gh(a.b[1]),32),ie(Gh(a.b[0]),Qq)):ie(Gh(a.b[0]),Qq),Uj(Gh(a.f),b)}function Ug(a){var b,c,d,e;for(d=$e(a),e=$e(a),b=d<<8|e,c=new A;b>0;)b-=Nj(a,c);return c.c.D(c.b)}function Vg(a){var b,c,d;for(c=a.length,d=Oe(et,Uq,-1,c,1),b=0;c>b;++b)d[b]=~~(bg(a[b])<<24)>>24;return d}function Wg(a){var b,c,d,e,f;for(b=a.b,e=b.length,c=e>4?4:e,f=0,d=0;c>d;++d)f<<=8,f|=255&b[e-c+d];return f}function Xg(a){var b,c,d;for(c=Oe(Ps,Yq,18,a.length,0),d=0,b=a.length;b>d;++d){if(!a[d])throw new fb;c[d]=a[d]}}function Yg(a){var b=Or;return!b&&(b=Or=/^[+-]?\d*$/i),b.test(a)?parseInt(a,10):Number.NaN}function Zg(a,b){var c=a.k;for(var d in c)if(58==d.charCodeAt(0)){var e=new Ub(a,d.substring(1));b.I(e)}}function $g(a){if(Zj(),!isFinite(a)||isNaN(a))throw new ub(Xm);$j(this,a.toPrecision(20))}function _g(){Se(this),this.c=new _c(this),this.d=new D,this.c.c=this.c,this.c.b=this.c}function ah(){switch(qr){case 0:return new e;case 4:return new g;case 5:return new x}return new d}function bh(a){return fj(),0>a?-1!=a?new Wh(-1,-a):Pr:10>=a?Rr[bg(a)]:new Wh(1,a)}function ch(a,b){var c,d;return 0!=(4&Pd(b).c)?[]:(c=Hg(a,Pd(b)),d=c&&typeof c==Jp?new c(b):b,b[kp]=d,d)}function dh(a){var b,c;return a>-129&&128>a?(b=a+128,c=(dd(),wr)[b],!c&&(c=wr[b]=new J(a)),c):new J(a)}function eh(a){var b,c,d;return b=~a.l+1&4194303,c=~a.m+(0==b?1:0)&4194303,d=~a.h+(0==b&&0==c?1:0)&1048575,Me(b,c,d)}function fh(a){Sb();var b=fl+a,c=Dr[b];return null!=c?c:(c=Cr[b],null==c&&(c=Ki(a)),ue(),Dr[b]=c)}function gh(a){return a>=48&&58>a?a-48:a>=97&&97>a?a-97+10:a>=65&&65>a?a-65+10:-1}function hh(a){var b;if(0!=a.d)return a.d;for(b=0;b<a.b.length;++b)a.d=33*a.d+(-1&a.b[b]);return a.d=a.d*a.f,a.d}function ih(a,b){var c;c=vj(a,b);try{return Ob()}catch(d){if(d=ve(d),Qc(d,6))return Tj(c,c.length);throw d}}function jh(a,b){var c=a.k;for(var d in c)if(58==d.charCodeAt(0)){var e=c[d];if(a.X(b,e))return!0}return!1}function kh(a,b){var c;return a===b?!0:Qc(b,21)?(c=Qe(b,21),a.f==c.f&&a.e==c.e&&wf(a,c.b)):!1}function lh(a,b,c,d,e){0!=b&&0!=d&&(1==b?e[d]=Zh(e,c,d,a[0]):1==d?e[b]=Zh(e,a,b,c[0]):Yi(a,c,e,b,d))}function mh(a,b,c){var d;for(d=c-1;d>=0&&a[d]==b[d];--d);return 0>d?0:Hb(ie(Gh(a[d]),Qq),ie(Gh(b[d]),Qq))?-1:1
}function nh(){nh=a,mr=Me(4194303,4194303,524287),nr=Me(0,0,524288),or=Gh(1),Gh(2),pr=Gh(0)}function oh(a,b,c,d){if(fk=b,gk=c,qr=d,a)try{Fs(Bh)()}catch(e){a(b)}else Fs(Bh)()}function ph(a){var b=lk;try{for(var c in a)if(c!=aq&&c!=Zp&&c!=tq)try{b+=nk+c+gl+a[c]}catch(d){}}catch(d){}return b}function qh(a){var b,c,d;for(d=a.length,b=Oe(et,Uq,-1,d,1),c=0;d>c;++c)b[c]=~~((255&a.charCodeAt(c))<<24)>>24;return b}function rh(a){var b,c,d,e,f;for(b=a.b,e=b.length,c=e>8?8:e,f=Fq,d=0;c>d;++d)f=Qi(f,8),f=je(f,Gh(255&b[e-c+d]));return f}function sh(a){var b,c,d;return 0==a.f?0:(b=a.e<<5,c=a.b[a.e-1],a.f<0&&(d=Jg(a),d==a.e-1&&(c=~~(c-1))),b-=Zi(c))}function th(a){var b,c,d;return a<Yr.length?Yr[a]:(c=~~a>>5,b=31&a,d=Oe(Js,Uq,-1,c+1,1),d[c]=1<<b,new ee(1,c+1,d))}function uh(a){var b,c,d;b=~a.l+1&4194303,c=~a.m+(0==b?1:0)&4194303,d=~a.h+(0==b&&0==c?1:0)&1048575,a.l=b,a.m=c,a.h=d}function vh(a,b){var c,d,e;return c=a.l+b.l,d=a.m+b.m+(~~c>>22),e=a.h+b.h+(~~d>>22),Me(4194303&c,4194303&d,1048575&e)}function wh(a,b){var c,d,e;return c=a.l-b.l,d=a.m-b.m+(~~c>>22),e=a.h-b.h+(~~d>>22),Me(4194303&c,4194303&d,1048575&e)}function xh(a,b){var c,d;if(a.c+b>=a.b.length){for(c=Oe(et,Uq,-1,a.b.length+b,1),d=0;d<a.b.length;++d)c[d]=a.b[d];a.b=c}}function yh(a,b){var c,d,e,f;return c=~~b>>5,b&=31,e=a.e+c+(0==b?0:1),d=Oe(Js,Uq,-1,e,1),zi(d,a.b,c,b),f=new ee(a.f,e,d),Of(f),f}function zh(a,b,c){var d,e;for(d=ie(Gh(c),Qq),e=0;me(d,Fq)&&b>e;++e)d=vh(d,ie(Gh(a[e]),Qq)),a[e]=Nb(d),d=gj(d,32);return Nb(d)}function Ah(){var a,b,c;b=Qe(Yh(),3),b.G()&&(a=b.E(),c=b.F(),Re(a,c)||void ik.alert(Am+a+Ik+c+Jk))}function Bh(){!!kk&&$h(Bp),Ah(),!!kk&&$h(zp),gi(),!!kk&&$h(jq),!!kk&&$h(kq),w(new m),Rb(),new z}function Ch(a){if(fj(),0==a.length)throw new ub(Oo);a[0]<0?(this.f=-1,Jj(this,a)):(this.f=1,Wi(this,a)),Of(this)}function Dh(a){fj(),0==a.length?(this.f=0,this.e=1,this.b=nf(Js,Uq,-1,[0])):(this.f=1,this.e=a.length,this.b=a,Of(this))}function Eh(a){return fj(),Hb(a,Fq)?me(a,Eq)?new Vh(-1,eh(a)):Pr:Ib(a,Jq)?Rr[Nb(a)]:new Vh(1,a)}function Fh(a){var b;return Hb(a,Fq)&&(a=Me(4194303&~a.l,4194303&~a.m,1048575&~a.h)),64-(b=Nb(gj(a,32)),0!=b?Zi(b):Zi(Nb(a))+32)}function Gh(a){var b,c;return a>-129&&128>a?(b=a+128,null==sr&&(sr=Oe(Rs,Yq,2,256,0)),c=sr[b],!c&&(c=sr[b]=Bg(a)),c):Bg(a)}function Hh(){var a;return 0!=fr&&(a=(new Date).getTime(),a-hr>2e3&&(hr=a,ir=cg())),0==fr++?(gg((Qb(),jr)),!0):!1}function Ih(a,b,c){var d=a.e[c];if(d)for(var e=0,f=d.length;f>e;++e){var g=d[e],h=g.ab();if(a.X(b,h))return!0}return!1}function Jh(a,b,c){var d=a.e[c];if(d)for(var e=0,f=d.length;f>e;++e){var g=d[e],h=g.ab();if(a.X(b,h))return g.bb()}return null}function Kh(a,b){var c=a.e;for(var d in c){var e=parseInt(d,10);if(d==e)for(var f=c[e],g=0,h=f.length;h>g;++g)b.I(f[g])}}function Lh(a,b){return 524288==a.h&&0==a.m&&0==a.l?(b&&(rr=Me(0,0,0)),yc((nh(),or))):(b&&(rr=Me(a.l,a.m,a.h)),Me(0,0,0))}function Mh(a,b){var c;return a===b?!0:Qc(b,20)?(c=Qe(b,20),c.f==a.f&&(a.b<54?c.i==a.i:kh(a.d,c.d))):!1}function Nh(a,b,c){var d,e,f;return e=Qe(a.d.R(b),22),e?(f=e.f,yd(e,c),Gc(a,e),f):(d=new df(a,b,c),a.d.T(b,d),Ye(d),null)}function Oh(a,b,c){var d,e;return d=Xc(a,b++),d>=55296&&56319>=d&&c>b&&Vc(e=a.charCodeAt(b))?65536+((1023&d)<<10)+(1023&e):d}function Ph(a){var b,c;c=new E;try{ak(c,new W((ck(),Qh(a))))}catch(d){throw d=ve(d),Qc(d,4)?(b=d,new pb(b)):d}return c}function Qh(a){ck();var b;if(null==a)throw new tb(Ym);try{b=Gg(a,Ao)}catch(c){if(c=ve(c),!Qc(c,6))throw c;b=bj(a)}return b=Fj(b,b.length)}function Rh(a){if(0==a.length||a[0]>ok&&a[a.length-1]>ok)return a;var b=a.replace(/^(\s*)/,lk),c=b.replace(/\s*$/,lk);return c}function Sh(a){ed();var b,c,d,e;for(vb.call(this,(tj(),ls)),b=ug(a),d=new C,c=0;b>c;++c)e=new E,ak(e,a),Li(d.b,d.c++,e);this.b=d}function Th(a){ed();var b,c,d,e,f;for(vb.call(this,(tj(),ns)),b=ug(a),e=new _g,c=0;b>c;++c)d=Ug(a),f=new E,ak(f,a),Nh(e,d,f);this.b=e}function Uh(a){return le(a,(nh(),nr))?-0x8000000000000000:Fi(a,pr)?a.l+4194304*a.m+17592186044416*a.h:-gf(eh(a))}function Vh(a,b){this.f=a,le(ie(b,Cq),Fq)?(this.e=1,this.b=nf(Js,Uq,-1,[Nb(b)])):(this.e=2,this.b=nf(Js,Uq,-1,[Nb(b),Nb(gj(b,32))]))}function Wh(a,b){this.f=a,4294967296>b?(this.e=1,this.b=nf(Js,Uq,-1,[~~b])):(this.e=2,this.b=nf(Js,Uq,-1,[~~(b%4294967296),~~(b/4294967296)]))}function Xh(a,b){var c=a[b],d=null==c?dq:typeof c;return d==fq&&(Object.prototype.toString.call(c)==Zo||typeof c.length==eq)?mp:d}function Yh(){switch(qr){case 1:return new q;case 2:return new r;case 3:return new s;case 4:return new t;case 5:return new u}return new o}function Zh(a,b,c,d){Ni();var e,f;for(e=Fq,f=0;c>f;++f)e=vh(Uj(ie(Gh(b[f]),Qq),ie(Gh(d),Qq)),ie(Gh(Nb(e)),Qq)),a[f]=Nb(e),e=Ri(e,32);return Nb(e)}function $h(a){return kk({moduleName:fk,sessionId:$sessionId,subSystem:qq,evtGroup:$p,millis:(new Date).getTime(),type:gq,className:a})}function _h(a){var b,c,d;return Fi(a,Fq)?(c=xc(a,Oq),d=Nc(a,Oq)):(b=Ri(a,1),c=xc(b,Nq),d=Nc(b,Nq),d=vh(Qi(d,1),ie(a,Gq))),je(Qi(d,32),ie(c,Qq))}function ai(a,b){var c,d,e;for(e=new _g,d=a.b.Q().H();d.Z();)c=Qe(d.$(),25),Nh(e,Qe(c.ab(),1),b?pe(Qe(c.bb(),36)):oe(Qe(c.bb(),36)));return new Vd(e)}function bi(a,b,c){var d,e,f;for(e=a.Q().H();e.Z();)if(d=Qe(e.$(),25),f=d.ab(),null==b?null==f:Ke(b,f))return c&&(d=new Xb(d.ab(),d.bb()),e._()),d;return null}function ci(a,b){var c,d,e;return 22>=b?(c=a.l&(1<<b)-1,d=e=0):44>=b?(c=a.l,d=a.m&(1<<b-22)-1,e=0):(c=a.l,d=a.m,e=a.h&(1<<b-44)-1),Me(c,d,e)}function di(a){return 0==a.f||0==a.b&&-1!=a.i?(!a.d&&(a.d=bh(a.i)),a.d):a.f<0?eg((!a.d&&(a.d=bh(a.i)),a.d),Ej(-a.f)):Cj((!a.d&&(a.d=bh(a.i)),a.d),Ej(a.f))}function ei(a,b){var c;if(Gs==b)return!0;if(ht==b&&Qc(a,42))return!0;if(null!=a)for(c=Pd(a);c&&c!=Gs;c=c.e)if(c==b)return!0;return!1}function fi(a,b){var c,d;if(null==b)throw new ob(cq);for(Fc(a),c=Oe(et,Uq,-1,b.length,1),d=0;d<b.length;++d)c[d]=b[d];return a.d=new ye(0==b.length?b:c),a}function gi(){var a,b,c;for(b=jk.compatMode,a=nf(dt,Yq,1,[Yl]),c=0;c<a.length;++c)if(Re(a[c],b))return;1==a.length&&Re(Yl,a[0])&&Re(Ll,b)?Mm+b+zk:No+b+Dk}function hi(a,b){var c;if(b.d=a,2==a)c=String.prototype;else{if(!(a>0))return;var d=zd(b);if(!d)return d=Sq[a]=function(){},void(d.cZ=b);c=d.prototype}c.cZ=b}function ii(a,b){xh(a,4),a.b[a.c++]=~~(~~b>>>24<<24)>>24,a.b[a.c++]=~~((~~b>>>16&255)<<24)>>24,a.b[a.c++]=~~((~~b>>>8&255)<<24)>>24,a.b[a.c++]=~~((255&b)<<24)>>24}function ji(a,b,c){a.c.z(a.b,zq),c?Ue((a.c.z(a.b,mk),a),b+1):(a.c.z(a.b,ok),a),Mc(a,Qj(Kl)),a.c.y(a.b,qk),c?Ue((a.c.z(a.b,mk),a),b):(a.c.z(a.b,ok),a),a.c.z(a.b,Aq)}function ki(a,b){Ni();var c,d;for(fj(),d=Qr,c=a;b>1;b>>=1)0!=(1&b)&&(d=eg(d,c)),c=1==c.e?eg(c,c):new Dh(yj(c.b,c.e,Oe(Js,Uq,-1,c.e<<1,1)));return d=eg(d,c)}function li(){li=a,xr=nf(Ws,Uq,-1,[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122])}function mi(a){var b;if(b=vr,!b&&(b=vr=/^\s*[+-]?(NaN|Infinity|((\d+\.?\d*)|(\.\d+))([eE][+-]?\d+)?[dDfF]?)\s*$/),!b.test(a))throw new ub(Lm+a+yk);return parseFloat(a)}function ni(a){var b,c,d;if(b=Oe(Ws,Uq,-1,8,1),li(),c=xr,d=7,a>=0)for(;a>15;)b[d--]=c[15&a],a>>=4;else for(;d>0;)b[d--]=c[15&a],a>>=4;return b[d]=c[15&a],Vf(b,d,8)}function oi(a,b){var c,d,e;return e=a.h-b.h,0>e?!1:(c=a.l-b.l,d=a.m-b.m+(~~c>>22),e+=~~d>>22,0>e?!1:(a.l=4194303&c,a.m=4194303&d,a.h=1048575&e,!0))}function pi(a){var b,c,d,e,f;for(f=Ij(a,ap,0),e=ik,b=0,c=f.length-1;c>b;++b)Re(f[b],vp)||(e[f[b]]||(e[f[b]]={}),e=null!=e?e[f[b]]:null);return d=null!=e?e[f[b]]:null}function qi(a,b,c){if(0>a||a>1114111)throw new cb;return a>=65536?(b[c++]=55296+(~~(a-65536)>>10&1023)&65535,b[c]=56320+(a-65536&1023)&65535,2):(b[c]=65535&a,1)}function ri(a){var b,c,d,e;for(d=new Bd,b=null,d.c.y(d.b,Po),c=a.H();c.Z();)null!=b?(d.c.y(d.b,b),d):b=Nk,e=c.$(),d.c.y(d.b,e===a?Fk:lk+e);return d.c.y(d.b,jp),d.c.D(d.b)}function si(a){var b;return 0!=a.c?a.c:a.b<54?(b=pj(a.i),a.c=Nb(ie(b,Eq)),a.c=33*a.c+Nb(ie(gj(b,32),Eq)),a.c=17*a.c+bg(a.f),a.c):(a.c=17*hh(a.d)+bg(a.f),a.c)}function ti(a,b,c){if(0>c)for(;0>c;)--b,Vc(a.charCodeAt(b))&&Uc(a.charCodeAt(b-1))&&--b,++c;else for(;c>0;)Uc(a.charCodeAt(b))&&Vc(a.charCodeAt(b+1))&&++b,++b,--c;return b}function ui(a){var b,c,d;return d=lk,a=Rh(a),b=a.indexOf(Ek),c=0==a.indexOf(Jp)?8:0,-1==b&&(b=rc(a,Ii(64)),c=0==a.indexOf(Kp)?9:0),-1!=b&&(d=Rh(a.substr(c,b-c))),d.length>0?d:lp}function vi(a,b){var c=new Array(b);if(3==a)for(var d=0;b>d;++d){var e=new Object;e.l=e.m=e.h=0,c[d]=e}else if(a>0)for(var e=[null,0,!1][a],d=0;b>d;++d)c[d]=e;return c}function wi(a,b,c,d,e){var f,g;for(f=Fq,g=0;e>g;++g)f=vh(f,wh(ie(Gh(b[g]),Qq),ie(Gh(d[g]),Qq))),a[g]=Nb(f),f=gj(f,32);for(;c>g;++g)f=vh(f,ie(Gh(b[g]),Qq)),a[g]=Nb(f),f=gj(f,32)}function xi(a,b,c){var d,e;d=Hh();try{if(!er)return md(a,b,c);try{return md(a,b,c)}catch(f){if(f=ve(f),Qc(f,19))return e=f,void nb(Co+e.n());throw f}}finally{Pf(d)}}function yi(a,b){var c,d,e,f;for(d=0,e=a.length;e>d;++d){f=a[d];try{f[1]?f[0].Lc()&&(b=$d(b,f)):f[0].Lc()}catch(g){if(g=ve(g),!Qc(g,19))throw g;c=g,!!er&&nb(Co+c.n())}}return b}function zi(a,b,c,d){var e,f;if(0==d)Lj(b,0,a,c,a.length-c);else for(f=32-d,a[a.length-1]=0,e=a.length-1;e>c;--e)a[e]|=~~b[e-c-1]>>>f,a[e-1]=b[e-c-1]<<d;for(e=0;c>e;++e)a[e]=0}function Ai(a,b){var c=a.e;for(var d in c){var e=parseInt(d,10);if(d==e)for(var f=c[e],g=0,h=f.length;h>g;++g){var i=f[g],j=i.bb();if(a.X(b,j))return!0}}return!1}function Bi(a,b,c){var d=a.e[c];if(d)for(var e=0,f=d.length;f>e;++e){var g=d[e],h=g.ab();if(a.X(b,h))return 1==d.length?delete a.e[c]:d.splice(e,1),--a.j,g.bb()}return null}function Ci(){Ci=a,ed(),ts=new Yd((tj(),gs)),us=new Yd(hs),vs=new Yd(es),ws=new Yd(is),xs=new Yd(ks),zs=new Yd(ms),ys=new Yd(ls),As=new Yd(ns),Bs=new Yd(ps),Cs=new Yd(qs),Ds=new Yd(rs)}function Di(a,b){var c;if(tc(a)===tc(b))return!0;if(null==a||null==b)return!1;if(a.length!=b.length)return!1;for(c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}function Ei(a,b){var c,d;return c=~~a.h>>19,d=~~b.h>>19,0==c?0!=d||a.h>b.h||a.h==b.h&&a.m>b.m||a.h==b.h&&a.m==b.m&&a.l>b.l:!(0==d||a.h<b.h||a.h==b.h&&a.m<b.m||a.h==b.h&&a.m==b.m&&a.l<=b.l)}function Fi(a,b){var c,d;return c=~~a.h>>19,d=~~b.h>>19,0==c?0!=d||a.h>b.h||a.h==b.h&&a.m>b.m||a.h==b.h&&a.m==b.m&&a.l>=b.l:!(0==d||a.h<b.h||a.h==b.h&&a.m<b.m||a.h==b.h&&a.m==b.m&&a.l<b.l)}function Gi(a){var b,c;return a>-0x800000000000&&0x800000000000>a?0==a?0:(b=0>a,b&&(a=-a),c=bg(dc(Math.log(a)/.6931471805599453)),(!b||a!=Math.pow(2,c))&&++c,c):Fh(pj(a))}function Hi(a,b){var c;if(0>b)throw new lb(Bn);if(0==b)return Qr;if(1==b||kh(a,Qr)||kh(a,Tr))return a;if(!Ti(a,0)){for(c=1;!Ti(a,c);)++c;return eg(th(c*b),Hi(Df(a,c),b))}return ki(a,b)}function Ii(a){var b,c;return a>=65536?(b=55296+(~~(a-65536)>>10&1023)&65535,c=56320+(a-65536&1023)&65535,String.fromCharCode(b)+String.fromCharCode(c)):String.fromCharCode(65535&a)}function Ji(a,b,c,d,e){var f,g,h;for(f=!0,g=0;d>g;++g)f&=0==c[g];if(0==e)Lj(c,d,a,0,b);else{for(h=32-e,f&=c[g]<<h==0,g=0;b-1>g;++g)a[g]=~~c[g+d]>>>e|c[g+d+1]<<h;a[g]=~~c[g+d]>>>e,++g}return f}function Ki(a){var b,c,d,e;for(b=0,d=a.length,e=d-4,c=0;e>c;)b=a.charCodeAt(c+3)+31*(a.charCodeAt(c+2)+31*(a.charCodeAt(c+1)+31*(a.charCodeAt(c)+31*b)))|0,c+=4;for(;d>c;)b=31*b+Xc(a,c++);return 0|b}function Li(b,c,d){if(null!=d){if(b.qI>0&&!uc(d,b.qI))throw new ab;if(-1==b.qI&&(d.tM==a||Pc(d,1)))throw new ab;if(b.qI<-1&&(d.tM==a||Pc(d,1))&&!uc(d,-b.qI))throw new ab}return b[c]=d}function Mi(a,b,c,d){var e=a.e[d];if(e)for(var f=0,g=e.length;g>f;++f){var h=e[f],i=h.ab();if(a.X(b,i)){var j=h.bb();return h.cb(c),j}}else e=a.e[d]=[];var h=new Xb(b,c);return e.push(h),++a.j,null}function Ni(){Ni=a;var b,c;for(Wr=Oe(zt,Yq,21,32,0),Xr=Oe(zt,Yq,21,32,0),b=Gq,c=0;18>=c;++c)Wr[c]=Eh(b),Xr[c]=Eh(Qi(b,c)),b=Uj(b,Iq);for(;c<Xr.length;++c)Wr[c]=eg(Wr[c-1],Wr[1]),Xr[c]=eg(Xr[c-1],(fj(),Sr))}function Oi(a,b){var c=[];for(i=0;i<a-1;i++)c.push(b[i]);var d=b.length,e=a-1;if(d>=a&&Object.prototype.toString.apply(b[e])===Zo)c.push(b[e]);else{var f=[];for(i=e;i<d;i++)f.push(b[i]);c.push(f)}return c}function Pi(a){var b,c,d,e;for(e=a.length,b=new B,b.c.z(b.b,yk),d=0;e>d;d=ti(a,d,1))c=a.charCodeAt(d),34==c||92==c?Pe((b.c.z(b.b,$o),b),c):(b.c.z(b.b,String.fromCharCode(c)),b);return b.c.z(b.b,yk),b.c.D(b.b)}function Qi(a,b){var c,d,e;return b&=63,22>b?(c=a.l<<b,d=a.m<<b|~~a.l>>22-b,e=a.h<<b|~~a.m>>22-b):44>b?(c=0,d=a.l<<b-22,e=a.m<<b-22|~~a.l>>44-b):(c=0,d=0,e=a.l<<b-44),Me(4194303&c,4194303&d,1048575&e)}function Ri(a,b){var c,d,e,f;return b&=63,c=1048575&a.h,22>b?(f=~~c>>>b,e=~~a.m>>b|c<<22-b,d=~~a.l>>b|a.m<<22-b):44>b?(f=0,e=~~c>>>b-22,d=~~a.m>>b-22|a.h<<44-b):(f=0,e=0,d=~~c>>>b-44),Me(4194303&d,4194303&e,1048575&f)}function Si(a,b,c){var d=Sq[a];d&&!d.cZ?hk=d.prototype:(!d&&(d=Sq[a]=function(){}),hk=d.prototype=0>b?{}:Kb(b),hk.cM=c);for(var e=3;e<arguments.length;++e)arguments[e].prototype=hk;d.cZ&&(hk.cZ=d.cZ,d.cZ=null)}function Ti(a,b){var c,d,e;if(0==b)return 0!=(1&a.b[0]);if(0>b)throw new lb(An);if(e=~~b>>5,e>=a.e)return a.f<0;if(c=a.b[e],b=1<<(31&b),a.f<0){if(d=Jg(a),d>e)return!1;c=d==e?-c:~c}return 0!=(c&b)}function Ui(a){return a.f<=-32||a.f>(a.e>0?a.e:dc(.3010299956639812*(a.b-1))+1)?0:Lb(0==a.f||0==a.b&&-1!=a.i?(!a.d&&(a.d=bh(a.i)),a.d):a.f<0?eg((!a.d&&(a.d=bh(a.i)),a.d),Ej(-a.f)):Cj((!a.d&&(a.d=bh(a.i)),a.d),Ej(a.f)))}function Vi(a){return a.f<=-64||a.f>(a.e>0?a.e:dc(.3010299956639812*(a.b-1))+1)?Fq:Tg(0==a.f||0==a.b&&-1!=a.i?(!a.d&&(a.d=bh(a.i)),a.d):a.f<0?eg((!a.d&&(a.d=bh(a.i)),a.d),Ej(-a.f)):Cj((!a.d&&(a.d=bh(a.i)),a.d),Ej(a.f)))}function Wi(a,b){var c,d,e,f;for(c=b.length,d=3&c,a.e=(~~c>>2)+(0==d?0:1),a.b=Oe(Js,Uq,-1,a.e,1),e=0;c>d;)a.b[e++]=255&b[--c]|(255&b[--c])<<8|(255&b[--c])<<16|(255&b[--c])<<24;for(f=0;c>f;++f)a.b[e]=a.b[e]<<8|255&b[f]}function Xi(a){switch(Ci(),a.d){case 8:return zs;case 6:return xs;case 2:return ts;case 11:return Bs;case 4:return ws;case 0:return vs;case 3:return us;case 7:return ys;case 12:return Cs;case 9:return As;default:return Ds}}function Yi(a,b,c,d,e){var f,g,h,i;if(tc(a)===tc(b)&&d==e)return void yj(a,d,c);for(h=0;d>h;++h){for(g=Fq,f=a[h],i=0;e>i;++i)g=vh(vh(Uj(ie(Gh(f),Qq),ie(Gh(b[i]),Qq)),ie(Gh(c[h+i]),Qq)),ie(Gh(Nb(g)),Qq)),c[h+i]=Nb(g),g=Ri(g,32);c[h+e]=Nb(g)}}function Zi(a){var b,c,d;return 0>a?0:0==a?32:(d=-(~~a>>16),b=~~d>>16&16,c=16-b,a=~~a>>b,d=a-256,b=~~d>>16&8,c+=b,a<<=b,d=a-4096,b=~~d>>16&4,c+=b,a<<=b,d=a-16384,b=~~d>>16&2,c+=b,a<<=b,d=~~a>>14,b=d&~(~~d>>1),c+2-b)}function $i(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;for(l=sf(b.R(c))[d][e.length],h=null,m=null,f=null,g=0,i=l?l.length:0;i>g;++g)if(k=l[g],Hj(k,e)){h=k[0],m=k[1],f=k[2];break}return h?(e=f?f(a,e):e,n=h.apply(a,e),j=[m?m(n):n],j):null}function _i(a,b,c,d,e){var f,g,h;for(f=Fq,g=Fq,h=0;d>h;++h)Ni(),f=vh(Uj(ie(Gh(c[h]),Qq),ie(Gh(e),Qq)),ie(Gh(Nb(f)),Qq)),g=vh(wh(ie(Gh(a[b+h]),Qq),ie(f,Qq)),g),a[b+h]=Nb(g),g=gj(g,32),f=Ri(f,32);return g=vh(wh(ie(Gh(a[b+d]),Qq),f),g),a[b+d]=Nb(g),Nb(gj(g,32))}function aj(a,b){Ni();var c,d,e,f,g,h,i,j,k;return b.e>a.e&&(h=a,a=b,b=h),b.e<63?hj(a,b):(g=(-2&a.e)<<4,j=Df(a,g),k=Df(b,g),d=Dj(a,Cf(j,g)),e=Dj(b,Cf(k,g)),i=aj(j,k),c=aj(d,e),f=aj(Dj(j,d),Dj(e,k)),f=Oj(Oj(f,i),c),f=Cf(f,g),i=Cf(i,g<<1),Oj(Oj(i,f),c))}function bj(a){var b,c,d,e,f,g;for(f=a.length,b=0,e=0;f>e;)d=Oh(a,e,a.length),e+=d>=65536?2:1,128>d?++b:2048>d?b+=2:65536>d?b+=3:2097152>d?b+=4:67108864>d&&(b+=5);for(c=Oe(et,Uq,-1,b,1),g=0,e=0;f>e;)d=Oh(a,e,a.length),e+=d>=65536?2:1,g+=Wj(c,g,d);return c}function cj(a){var b,c,d;return c=a.l,0!=(c&c-1)?-1:(d=a.m,0!=(d&d-1)?-1:(b=a.h,0!=(b&b-1)?-1:0==b&&0==d&&0==c?-1:0==b&&0==d&&0!=c?Cg(c):0==b&&0!=d&&0==c?Cg(d)+22:0!=b&&0==d&&0==c?Cg(b)+44:-1))}function dj(a,b,c,d){var e,f,g,h;for(h=d&&a.b.L()>1,g=ge(a.b),f=new H(g.c.H()),b.c.z(b.b,Po),h&&Ue((b.c.z(b.b,mk),b),c+1);f.b.Z();)e=Qe(f.b.$(),36),e.d.zb(b,h?c+1:c,d),f.b.Z()&&(h?Ue((b.c.y(b.b,Mk),b),c+1):(b.c.z(b.b,Lk),b));h&&Ue((b.c.z(b.b,mk),b),c),b.c.z(b.b,jp)}function ej(a,b,c,d,e,f,g){var h,i,j,k,l;if(i=f?a.c:a.b,g){for(k=Ef(sf(i.R(c)),d),j=k;j>=1;--j)if(h=Oi(j,e),l=$i(b,i,c,d,h),l||(h=Ff(b,h),l=$i(b,i,c,d,h)),l)return l}else if(l=$i(b,i,c,d,e),l||(e=Ff(b,e),l=$i(b,i,c,d,e)),l)return l;throw new ib(Zl+d+fl+e.length+mk)}function fj(){fj=a;var b;for(Qr=new cf(1,1),Sr=new cf(1,10),Tr=new cf(0,0),Pr=new cf(-1,1),Rr=nf(zt,Yq,21,[Tr,Qr,new cf(1,2),new cf(1,3),new cf(1,4),new cf(1,5),new cf(1,6),new cf(1,7),new cf(1,8),new cf(1,9),Sr]),Yr=Oe(zt,Yq,21,32,0),b=0;b<Yr.length;++b)Yr[b]=Eh(Qi(Gq,b))}function gj(a,b){var c,d,e,f,g;return b&=63,c=a.h,d=0!=(524288&c),d&&(c|=-1048576),22>b?(g=~~c>>b,f=~~a.m>>b|c<<22-b,e=~~a.l>>b|a.m<<22-b):44>b?(g=d?1048575:0,f=~~c>>b-22,e=~~a.m>>b-22|c<<44-b):(g=d?1048575:0,f=d?4194303:0,e=~~c>>b-44),Me(4194303&e,4194303&f,1048575&g)}function hj(a,b){var c,d,e,f,g,h,i,j,k,l,m;return d=a.e,f=b.e,h=d+f,i=a.f!=b.f?-1:1,2==h?(k=Uj(ie(Gh(a.b[0]),Qq),ie(Gh(b.b[0]),Qq)),m=Nb(k),l=Nb(Ri(k,32)),0==l?new cf(i,m):new ee(i,2,nf(Js,Uq,-1,[m,l]))):(c=a.b,e=b.b,g=Oe(Js,Uq,-1,h,1),lh(c,d,e,f,g),j=new ee(i,h,g),Of(j),j)}function ij(a){var b,c,d,e;if(null==a)throw new ub(dq);for(c=a.length,d=c>0&&45==a.charCodeAt(0)?1:0,b=d;c>b;++b)if(-1==gh(a.charCodeAt(b)))throw new ub(Lm+a+yk);if(e=parseInt(a,10),isNaN(e))throw new ub(Lm+a+yk);if(-2147483648>e||e>2147483647)throw new ub(Lm+a+yk);return e}function jj(a,b){var c,d,e,f,g;if(d=~~b>>5,b&=31,d>=a.e)return a.f<0?(fj(),Pr):(fj(),Tr);if(f=a.e-d,e=Oe(Js,Uq,-1,f+1,1),Ji(e,f,a.b,d,b),a.f<0){for(c=0;d>c&&0==a.b[c];++c);if(d>c||b>0&&a.b[c]<<32-b!=0){for(c=0;f>c&&-1==e[c];++c)e[c]=0;c==f&&++f,++e[c]}}return g=new ee(a.f,f,e),Of(g),g}function kj(a,b,c,d){var e,f,g,h;for(b.c.z(b.b,zq),g=d&&a.b.L()>1,g&&Ue((b.c.z(b.b,mk),b),c+1),f=a.b.Q().H();f.Z();)e=Qe(f.$(),25),Mc(b,Pi(Qe(e.ab(),1))),h=Qe(e.bb(),36),b.c.y(b.b,rk),h.d.zb(b,g?c+1:c,d),f.Z()&&(g?Ue((b.c.y(b.b,Mk),b),c+1):(b.c.z(b.b,Lk),b));g&&Ue((b.c.z(b.b,mk),b),c),b.c.z(b.b,Aq)}function lj(a){var b,c,d,e,f;if(0==a.l&&0==a.m&&0==a.h)return Uk;if(524288==a.h&&0==a.m&&0==a.l)return Rk;if(~~a.h>>19!=0)return Qk+lj(eh(a));for(c=a,d=lk;0!=c.l||0!=c.m||0!=c.h;){if(e=Gh(1e9),c=Sj(c,e,!0),b=lk+Nb(rr),0!=c.l||0!=c.m||0!=c.h)for(f=9-b.length;f>0;--f)b=Uk+b;d=b+d}return d}function mj(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(m=b.length,i=m,45==b.charCodeAt(0)?(k=-1,l=1,--m):(k=1,l=0),f=(Pj(),Vr)[10],e=~~(m/f),p=m%f,0!=p&&++e,h=Oe(Js,Uq,-1,e,1),c=Ur[8],g=0,n=l+(0==p?f:p),o=l;i>o;o=n,n+=f)d=ij(b.substr(o,n-o)),Ni(),j=Zh(h,h,g,c),j+=zh(h,g,d),h[g++]=j;a.f=k,a.e=g,a.b=h,Of(a)}function nj(a,b){var c,d,e,f,g,h,i,j,k,l;for(l=Oe(Ps,Yq,18,b.length,0),f=0,g=l.length;g>f;++f)k=Ij(b[f],kl,0),i=-1,c=-1,e=Do,2==k.length&&null!=k[1]&&(j=k[1],h=Yc(j,Ii(58)),d=od(j,Ii(58),h-1),e=j.substr(0,d-0),-1!=h&&-1!=d&&(i=sc(j.substr(d+1,h-(d+1))),c=sc(Md(j,h+1)))),l[f]=new Ee(k[0],e+jl+c,a.v(0>i?-1:i));Xg(l)}function oj(a,b){var c,d,e,f,g;return d=ie(Gh(b),Qq),Fi(a,Fq)?(f=Sj(a,d,!1),g=Nc(a,d)):(c=Ri(a,1),e=Gh(~~b>>>1),f=Sj(c,e,!1),g=Nc(c,e),g=vh(Qi(g,1),ie(a,Gq)),0!=(1&b)&&(Ei(f,g)?Ib(wh(f,g),d)?(g=vh(g,wh(d,f)),f=wh(f,Gq)):(g=vh(g,wh(Qi(d,1),f)),f=wh(f,Hq)):g=wh(g,f))),je(Qi(g,32),ie(f,Qq))}function pj(a){var b,c,d,e,f;return isNaN(a)?(nh(),pr):-0x8000000000000000>a?(nh(),nr):a>=0x8000000000000000?(nh(),mr):(e=!1,0>a&&(e=!0,a=-a),d=0,a>=17592186044416&&(d=bg(a/17592186044416),a-=17592186044416*d),c=0,a>=4194304&&(c=bg(a/4194304),a-=4194304*c),b=bg(a),f=Me(b,c,d),e&&uh(f),f)}function qj(a,b,c,d){var e,f,g;for(b.c.y(b.b,sp),d?(b.c.z(b.b,mk),Ue(b,c+1)):b.c.z(b.b,ok),f=0,g=a.b.length;g>f;++f)e=a.b[f],e>=0&&16>e?Mc((b.c.y(b.b,dl),b),ni(255&e)):Mc((b.c.y(b.b,cl),b),ni(255&e)),f!=g-1&&(d&&7==(7&f)?Ue((b.c.y(b.b,Mk),b),c+1):(b.c.y(b.b,Nk),b));d?Ue((b.c.z(b.b,mk),b),c):(b.c.z(b.b,ok),b),b.c.z(b.b,Aq)}function rj(a){switch(tj(),a){case 74:return ms;case 73:return ks;case 90:return gs;case 115:return ps;case 68:return is;case 100:return es;case 105:return fs;case 98:return hs;case 108:return ls;case 116:return qs;case 111:return ns;case 112:return os;case 101:return js;case 117:return rs;default:throw new ob(cn+String.fromCharCode(a)+Bk)}}function sj(a,b){xh(a,8),a.b[a.c++]=~~(Nb(Ri(b,56))<<24)>>24,a.b[a.c++]=~~(Nb(ie(Ri(b,48),Mq))<<24)>>24,a.b[a.c++]=~~(Nb(ie(Ri(b,40),Mq))<<24)>>24,a.b[a.c++]=~~(Nb(ie(Ri(b,32),Mq))<<24)>>24,a.b[a.c++]=~~(Nb(ie(Ri(b,24),Mq))<<24)>>24,a.b[a.c++]=~~(Nb(ie(Ri(b,16),Mq))<<24)>>24,a.b[a.c++]=~~(Nb(ie(Ri(b,8),Mq))<<24)>>24,a.b[a.c++]=~~(Nb(ie(b,Mq))<<24)>>24}function tj(){tj=a,es=new Cd(Gl,0,100),fs=new Cd(Hl,1,105),gs=new Cd(Il,2,90),hs=new Cd(Jl,3,98),is=new Cd(rm,4,68),js=new Cd(Bm,5,101),ks=new Cd(Pm,6,73),ls=new Cd(gn,7,108),ms=new Cd(hn,8,74),ns=new Cd(Kn,9,111),os=new Cd(On,10,112),ps=new Cd(Vn,11,115),qs=new Cd(vo,12,116),rs=new Cd(zo,13,117),ds=nf(Bt,Yq,37,[es,fs,gs,hs,is,js,ks,ls,ms,ns,os,ps,qs,rs])}function uj(){uj=a;var b;for(yr=nf(Js,Uq,-1,[-1,-1,30,19,15,13,11,11,10,9,9,8,8,8,8,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5]),zr=Oe(Js,Uq,-1,37,1),Ar=nf(Js,Uq,-1,[-1,-1,63,40,32,28,25,23,21,20,19,19,18,18,17,17,16,16,16,15,15,15,15,14,14,14,14,14,14,13,13,13,13,13,13,13,13]),Br=Oe(Ys,Uq,-1,37,3),b=2;36>=b;++b)zr[b]=bg(wc(b,yr[b])),Br[b]=xc(Rq,Gh(zr[b]))}function vj(a,b){var c,d,e,f,g,h,i;if(null==a)throw new tb(cm);if(0>b)throw new ob(am+b);if(b>a.length)throw new ob(X(bm,nf(Ks,Yq,0,[dh(0),dh(b),dh(a.length)])));for(e=4*~~(b/3)+(b%3>0?4:0),i=Oe(et,Uq,-1,e,1),c=0,d=0,g=b-2,h=0;g>c;c+=3,d+=4)zj(a,c,3,i,d),h+=4;return b>c&&(zj(a,c,b-c,i,d),d+=4),d<=i.length-1?(f=Oe(et,Uq,-1,d,1),Lj(i,0,f,0,d),f):i}function wj(a,b,c,d){var e,f,g,h,i,j,k;for(j=Fq,f=ie(Gh(d),Qq),h=c-1;h>=0;--h)k=je(Qi(j,32),ie(Gh(b[h]),Qq)),Fi(k,Fq)?(i=Sj(k,f,!1),j=Nc(k,f)):(e=Ri(k,1),g=Gh(~~d>>>1),i=Sj(e,g,!1),j=Nc(e,g),j=vh(Qi(j,1),ie(k,Gq)),0!=(1&d)&&(Ei(i,j)?Ib(wh(i,j),f)?(j=vh(j,wh(f,i)),i=wh(i,Gq)):(j=vh(j,wh(Qi(f,1),i)),i=wh(i,Hq)):j=wh(j,i))),a[h]=Nb(ie(i,Qq));return Nb(j)}function xj(a,b,c,d,e,f){var g,h,i,j,k,l,m;for(j=Lg(b)-Lg(a),g=Qi(b,j),i=Me(0,0,0);j>=0&&(h=oi(a,g),!h||(22>j?void(i.l|=1<<j):44>j?void(i.m|=1<<j-22):void(i.h|=1<<j-44),0!=a.l||0!=a.m||0!=a.h));)k=g.m,l=g.h,m=g.l,g.h=~~l>>>1,g.m=~~k>>>1|(1&l)<<21,g.l=~~m>>>1|(1&k)<<21,--j;return c&&uh(i),f&&(d?(rr=eh(a),e&&(rr=wh(rr,(nh(),or)))):rr=Me(a.l,a.m,a.h)),i}function yj(a,b,c){var d,e,f,g;for(e=0;b>e;++e){for(d=Fq,g=e+1;b>g;++g)d=vh(vh(Uj(ie(Gh(a[e]),Qq),ie(Gh(a[g]),Qq)),ie(Gh(c[e+g]),Qq)),ie(Gh(Nb(d)),Qq)),c[e+g]=Nb(d),d=Ri(d,32);c[e+b]=Nb(d)}for(Rg(c,c,b<<1),d=Fq,e=0,f=0;b>e;++e,++f)d=vh(vh(Uj(ie(Gh(a[e]),Qq),ie(Gh(a[e]),Qq)),ie(Gh(c[f]),Qq)),ie(Gh(Nb(d)),Qq)),c[f]=Nb(d),d=Ri(d,32),++f,d=vh(d,ie(Gh(c[f]),Qq)),c[f]=Nb(d),d=Ri(d,32);return c}function zj(a,b,c,d,e){var f,g;switch(f=Zr,g=(c>0?~~(a[b]<<24)>>>8:0)|(c>1?~~(a[b+1]<<24)>>>16:0)|(c>2?~~(a[b+2]<<24)>>>24:0),c){case 3:return d[e]=f[~~g>>>18],d[e+1]=f[~~g>>>12&63],d[e+2]=f[~~g>>>6&63],d[e+3]=f[63&g],d;case 2:return d[e]=f[~~g>>>18],d[e+1]=f[~~g>>>12&63],d[e+2]=f[~~g>>>6&63],d[e+3]=61,d;case 1:return d[e]=f[~~g>>>18],d[e+1]=f[~~g>>>12&63],d[e+2]=61,d[e+3]=61,d;default:return d}}function Aj(a,b){var c,d,e,f,g;for(g=b.length,d=Oe(et,Uq,-1,3*g,1),c=0,f=0;g>f;++f)e=b.charCodeAt(f),e>0&&127>=e?d[c++]=~~(e<<24)>>24:2047>=e?(d[c++]=~~((192|31&~~e>>6)<<24)>>24,d[c++]=~~((128|63&e)<<24)>>24):(d[c++]=~~((224|15&~~e>>12)<<24)>>24,d[c++]=~~((128|63&~~e>>6)<<24)>>24,d[c++]=~~((128|63&e)<<24)>>24);xh(a,2),a.b[a.c++]=~~(~~c>>>8<<24)>>24,a.b[a.c++]=~~((255&c)<<24)>>24,yf(a,d,c)}function Bj(a,b,c,d,e){var f,g;if(f=vh(ie(Gh(b[0]),Qq),ie(Gh(d[0]),Qq)),a[0]=Nb(f),f=gj(f,32),c>=e){for(g=1;e>g;++g)f=vh(f,vh(ie(Gh(b[g]),Qq),ie(Gh(d[g]),Qq))),a[g]=Nb(f),f=gj(f,32);for(;c>g;++g)f=vh(f,ie(Gh(b[g]),Qq)),a[g]=Nb(f),f=gj(f,32)}else{for(g=1;c>g;++g)f=vh(f,vh(ie(Gh(b[g]),Qq),ie(Gh(d[g]),Qq))),a[g]=Nb(f),f=gj(f,32);for(;e>g;++g)f=vh(f,ie(Gh(d[g]),Qq)),a[g]=Nb(f),f=gj(f,32)}me(f,Fq)&&(a[g]=Nb(f))}function Cj(a,b){var c,d,e,f,g,h,i,j,k,l;if(0==b.f)throw new lb(Sl);return e=b.f,1==b.e&&1==b.b[0]?b.f>0?a:0==a.f?a:new ee(-a.f,a.e,a.b):(k=a.f,j=a.e,d=b.e,j+d==2?(l=xc(ie(Gh(a.b[0]),Qq),ie(Gh(b.b[0]),Qq)),k!=e&&(l=eh(l)),Eh(l)):(c=j!=d?j>d?1:-1:mh(a.b,b.b,j),0==c?k==e?Qr:Pr:-1==c?Tr:(g=j-d+1,f=Oe(Js,Uq,-1,g,1),h=k==e?1:-1,1==d?wj(f,a.b,j,b.b[0]):Yj(f,g,a.b,j,b.b,d),i=new ee(h,g,f),Of(i),i)))}function Dj(a,b){var c,d,e,f,g,h,i,j,k,l;if(g=a.f,i=b.f,0==i)return a;if(0==g)return 0==b.f?b:new ee(-b.f,b.e,b.b);if(f=a.e,h=b.e,f+h==2)return c=ie(Gh(a.b[0]),Qq),d=ie(Gh(b.b[0]),Qq),0>g&&(c=eh(c)),0>i&&(d=eh(d)),Eh(wh(c,d));if(e=f!=h?f>h?1:-1:mh(a.b,b.b,f),-1==e)l=-i,k=g==i?of(b.b,h,a.b,f):If(b.b,h,a.b,f);else if(l=g,g==i){if(0==e)return fj(),Tr;k=of(a.b,f,b.b,h)}else k=If(a.b,f,b.b,h);return j=new ee(l,k.length,k),Of(j),j}function Ej(a){Ni();var b,c,d,e;if(b=bg(a),a<Xr.length)return Xr[b];if(50>=a)return Hi((fj(),Sr),b);if(1e3>=a)return Cf(Hi(Wr[1],b),b);if(a>1e6)throw new lb(nq);if(2147483647>=a)return Cf(Hi(Wr[1],b),b);for(d=Hi(Wr[1],2147483647),e=d,c=pj(a-2147483647),b=bg(a%2147483647);Ei(c,Pq);)e=eg(e,d),c=wh(c,Pq);for(e=eg(e,Hi(Wr[1],b)),e=Cf(e,2147483647),c=pj(a-2147483647);Ei(c,Pq);)e=Cf(e,2147483647),c=wh(c,Pq);return e=Cf(e,b)}function Fj(a,b){var c,d,e,f,g,h,i,j,k;if(null==a)throw new tb(_l);if(b>a.length)throw new ob(X(ao,nf(Ks,Yq,0,[dh(a.length),dh(0),dh(b)])));if(0==b)return Oe(et,Uq,-1,0,1);if(4>b)throw new ob(Nl+b);for(c=$r,g=~~(3*b/4),i=Oe(et,Uq,-1,g,1),j=0,d=Oe(et,Uq,-1,4,1),e=0,f=0;b>f;++f){if(k=c[255&a[f]],!(k>=-5))throw new jb(Ml+(255&a[f]));if(k>=-1&&(d[e++]=a[f],e>3&&(j+=Vj(d,i,j),e=0,61==a[f])))break}return h=Oe(et,Uq,-1,j,1),Lj(i,0,h,0,j),h}function Gj(a){var b,c,d,e,f;return null!=a.j?a.j:a.b<32?(a.j=bk(pj(a.i),bg(a.f)),a.j):(e=dk((!a.d&&(a.d=bh(a.i)),a.d),0),0==a.f?e:(b=(!a.d&&(a.d=bh(a.i)),a.d).f<0?2:1,c=e.length,d=-a.f+c-b,f=new A,f.c.y(f.b,e),a.f>0&&d>=-6?d>=0?nd(f,c-bg(a.f),Sk):(f.c.C(f.b,b-1,b-1,Vk),nd(f,b+1,We(Gr,0,-bg(d)-1))):(c-b>=1&&(f.c.C(f.b,b,b,Sk),++c),f.c.C(f.b,c,c,ym),d>0&&nd(f,++c,Kk),nd(f,++c,lk+lj(pj(d)))),a.j=f.c.D(f.b),a.j))}function Hj(a,b){var c,d,e,f,g,h,i,j,k,l;for(e=0,k=b.length;k>e;++e)if(j=a[e+3],c=Xh(b,e),!(Re(c,j)||Re(rq,j)&&Re(dq,c)))if(h=Re(eq,c),f=Re(qp,c),Gs!==j){if(i=h||f,g=!i&&null!=j&&Pd(j)==Zs){if(l=b[e],null==l||ei(l,Qe(j,9)))continue;if(he(l)&&(d=Cc(sf(l)),null!=d&&ei(d,Qe(j,9)))){b[e]=d;continue}}if(!Re(fq,j)||h||f)return!1}else h&&void(b[e]=new I(b[e])),f&&void(b[e]=(se(),b[e]?ur:tr));return!0}function Ij(a,b,c){for(var d=new RegExp(b,Lp),e=[],f=0,g=a,h=null;;){var i=d.exec(g);if(null==i||g==lk||f==c-1&&c>0){e[f]=g;break}e[f]=g.substring(0,i.index),g=g.substring(i.index+i[0].length,g.length),d.lastIndex=0,h==g&&(e[f]=g.substring(0,1),g=g.substring(1)),h=g,f++}if(0==c&&a.length>0){for(var j=e.length;j>0&&e[j-1]==lk;)--j;j<e.length&&e.splice(j,e.length-j)}for(var k=zc(e.length),l=0;l<e.length;++l)k[l]=e[l];return k}function Jj(a,b){var c,d,e,f;for(c=b.length,d=3&c,a.e=(~~c>>2)+(0==d?0:1),a.b=Oe(Js,Uq,-1,a.e,1),e=0,a.b[a.e-1]=-1;c>d;){if(a.b[e]=255&b[--c]|(255&b[--c])<<8|(255&b[--c])<<16|(255&b[--c])<<24,0!=a.b[e]){for(a.b[e]=-a.b[e],a.c=e,++e;c>d;)a.b[e]=255&b[--c]|(255&b[--c])<<8|(255&b[--c])<<16|(255&b[--c])<<24,a.b[e]=~a.b[e],++e;break}++e}if(0!=d)if(-2!=a.c){for(f=0;c>f;++f)a.b[e]=a.b[e]<<8|255&b[f];a.b[e]=~a.b[e]}else{for(f=0;c>f;++f)a.b[e]=a.b[e]<<8|255&b[f];a.b[e]=-a.b[e]}}function Kj(){for(var a=11,b=52,c=arguments,d=[],e=c.length;e;e-=1)for(var f=c[e-1],g=8;g;g-=1)d.push(f%2?1:0),f=~~f>>1;d.reverse();var h=d.join(lk),i=(1<<a-1)-1,j=parseInt(h.substring(0,1),2)?-1:1,k=parseInt(h.substring(1,1+a),2),l=parseInt(h.substring(1+a),2);return k===(1<<a)-1?0!==l?0/0:1/0*j:k>0?j*Math.pow(2,k-i)*(1+l/Math.pow(2,b)):0!==l?j*Math.pow(2,-(i-1))*(l/Math.pow(2,b)):0*j}function Lj(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;if(null==a||null==c)throw new fb;if(m=Pd(a),i=c.cZ,0==(4&m.c)||0==(4&i.c))throw new mb(yn);if(l=m.b,g=i.b,!(0!=(1&l.c)?l==g:0==(1&g.c)))throw new mb(Dl);if(n=a.length,j=c.length,0>b||0>d||0>e||b+e>n||d+e>j)throw new eb;if(0!=(1&l.c)&&0==(4&l.c)||m==i)Array.prototype.splice.apply(c,[d,e].concat(a.slice(b,b+e)));else if(k=Qe(a,17),f=Qe(c,17),a===c&&d>b)for(b+=e,h=d+e;h-->d;)Li(f,h,k[--b]);else for(h=d+e;h>d;)Li(f,d++,k[b++])}function Mj(a){var b,c,d,e,f,g,h,i,j,k,l;if(0==a.f)return nf(et,Uq,-1,[0]);if(b=sh(a),l=Jg(a),e=(~~b>>3)+1,c=Oe(et,Uq,-1,e,1),h=0,d=4,e-(a.e<<2)==1?(c[0]=~~((a.f<0?-1:0)<<24)>>24,j=4,++h):(i=3&e,j=0==i?4:i),g=l,e-=l<<2,a.f<0){for(f=-a.b[l],++g,g==a.e&&(d=j),k=0;d>k;++k,f>>=8)c[--e]=~~(f<<24)>>24;for(;e>h;)for(f=~a.b[g],++g,g==a.e&&(d=j),k=0;d>k;++k,f>>=8)c[--e]=~~(f<<24)>>24}else for(;e>h;)for(f=a.b[g],++g,g==a.e&&(d=j),k=0;d>k;++k,f>>=8)c[--e]=~~(f<<24)>>24;return c}function Nj(a,b){var c,d,e;return c=$e(a),128>c?(Pe(b,65535&c),1):192>c?(b.c.z(b.b,il),1):224>c?(d=$e(a),128!=(192&d)?(b.c.z(b.b,il),Pe(b,65535&d)):b.c.z(b.b,String.fromCharCode(65535&((31&c)<<6|63&d))),2):240>c?(d=$e(a),128!=(192&d)?(b.c.z(b.b,il),Pe(b,65535&d),2):(e=$e(a),128!=(192&e)?(Pe((b.c.z(b.b,il),b),63),Pe(b,65535&e)):b.c.z(b.b,String.fromCharCode(65535&((15&c)<<12|(63&d)<<6|63&e))),3)):(b.c.z(b.b,il),1)}function Oj(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;if(g=a.f,i=b.f,0==g)return b;if(0==i)return a;if(f=a.e,h=b.e,f+h==2)return c=ie(Gh(a.b[0]),Qq),d=ie(Gh(b.b[0]),Qq),g==i?(j=vh(c,d),n=Nb(j),m=Nb(Ri(j,32)),0==m?new cf(g,n):new ee(g,2,nf(Js,Uq,-1,[n,m]))):Eh(0>g?wh(d,c):wh(c,d));if(g==i)l=g,k=f>=h?If(a.b,f,b.b,h):If(b.b,h,a.b,f);else{if(e=f!=h?f>h?1:-1:mh(a.b,b.b,f),0==e)return fj(),Tr;1==e?(l=g,k=of(a.b,f,b.b,h)):(l=i,k=of(b.b,h,a.b,f))}return j=new ee(l,k.length,k),Of(j),j}function Pj(){Pj=a,Ur=nf(Js,Uq,-1,[-2147483648,1162261467,1073741824,1220703125,362797056,1977326743,1073741824,387420489,1e9,214358881,429981696,815730721,1475789056,170859375,268435456,410338673,612220032,893871739,128e7,1801088541,113379904,148035889,191102976,244140625,308915776,387420489,481890304,594823321,729e6,887503681,1073741824,1291467969,1544804416,1838265625,60466176]),Vr=nf(Js,Uq,-1,[-1,-1,31,19,15,13,11,11,10,9,9,8,8,8,8,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5])}function Qj(a){ed();var b,c,d,e,f,g;for(g=a.length,b=new B,b.c.z(b.b,yk),e=0;g>e;e=ti(a,e,1))switch(c=a.charCodeAt(e)){case 34:b.c.y(b.b,_o);break;case 92:b.c.y(b.b,cp);break;case 8:b.c.y(b.b,dp);break;case 12:b.c.y(b.b,ep);break;case 10:b.c.y(b.b,fp);break;case 13:b.c.y(b.b,gp);break;case 9:b.c.y(b.b,hp);break;case 47:b.c.y(b.b,bp);break;default:if(c>=0&&31>=c||c>=127&&159>=c||c>=8192&&8447>=c){for(d=ni(c),b.c.y(b.b,ip),f=0;f<4-d.length;++f)b.c.z(b.b,Uk);Mc(b,d.toUpperCase())}else b.c.z(b.b,String.fromCharCode(c))}return b.c.z(b.b,yk),b.c.D(b.b)}function Rj(a){var b,d,e=(1<<f-1)-1;if(isNaN(a))d=(1<<e)-1,e=1,b=0;else if(1/0===a||-1/0===a)d=(1<<e)-1,e=0,b=0>a?1:0;else if(0===a)e=d=0,b=-1/0===1/a?1:0;else if(b=0>a,a=Math.abs(a),a>=Math.pow(2,1-e)){var g=Math.min(Math.floor(Math.log(a)/Math.LN2),e);d=g+e,e=a*Math.pow(2,c-g)-Math.pow(2,c)}else d=0,e=a/Math.pow(2,1-e-c);for(a=[];c;c-=1)a.push(e%2?1:0),e=Math.floor(e/2);for(c=f;c;c-=1)a.push(d%2?1:0),d=Math.floor(d/2);for(a.push(b?1:0),a.reverse(),f=a.join(lk),b=[];f.length;)b.push(parseInt(f.substring(0,8),2)),f=f.substring(8);return b}function Sj(a,b,c){var d,e,f,g,h,i;if(0==b.l&&0==b.m&&0==b.h)throw new lb(Cp);if(0==a.l&&0==a.m&&0==a.h)return c&&(rr=Me(0,0,0)),Me(0,0,0);if(524288==b.h&&0==b.m&&0==b.l)return Lh(a,c);if(i=!1,~~b.h>>19!=0&&(b=eh(b),i=!0),g=cj(b),f=!1,e=!1,d=!1,524288==a.h&&0==a.m&&0==a.l){if(e=!0,f=!0,-1!=g)return h=gj(a,g),i&&uh(h),c&&(rr=Me(0,0,0)),h;a=yc((nh(),mr)),d=!0,i=!i}else~~a.h>>19!=0&&(f=!0,a=eh(a),d=!0,i=!i);return-1!=g?Pg(a,g,i,f,c):Fi(a,b)?xj(d?a:Me(a.l,a.m,a.h),b,i,f,e,c):(c&&(rr=f?eh(a):Me(a.l,a.m,a.h)),Me(0,0,0))}function Tj(a,b){var c,d,e,f,g,h,i;for(e=0,h=0;b>h;){if(++e,d=a[h],128==(192&d))throw new ob(an);if(0==(128&d))++h;else if(192==(224&d))h+=2;else if(224==(240&d))h+=3;else{if(240!=(248&d))throw new ob(an);h+=4}if(h>b)throw new sb(an)}for(f=Oe(Ws,Uq,-1,e,1),i=0,g=0,h=0;b>h;){for(d=a[h++],0==(128&d)?(g=1,d&=127):192==(224&d)?(g=2,d&=31):224==(240&d)?(g=3,d&=15):240==(248&d)?(g=4,d&=7):248==(252&d)&&(g=5,d&=3);--g>0;){if(c=a[h++],128!=(192&c))throw new ob(bn+(h-1)+Pk+ni(c));d=d<<6|63&c}i+=qi(d,f,i)}return String.fromCharCode.apply(null,f)}function Uj(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;return c=8191&a.l,d=~~a.l>>13|(15&a.m)<<9,e=~~a.m>>4&8191,f=~~a.m>>17|(255&a.h)<<5,g=~~(1048320&a.h)>>8,h=8191&b.l,i=~~b.l>>13|(15&b.m)<<9,j=~~b.m>>4&8191,k=~~b.m>>17|(255&b.h)<<5,l=~~(1048320&b.h)>>8,y=c*h,z=d*h,A=e*h,B=f*h,C=g*h,0!=i&&(z+=c*i,A+=d*i,B+=e*i,C+=f*i),0!=j&&(A+=c*j,B+=d*j,C+=e*j),0!=k&&(B+=c*k,C+=d*k),0!=l&&(C+=c*l),n=4194303&y,o=(511&z)<<13,m=n+o,q=~~y>>22,r=~~z>>9,s=(262143&A)<<4,t=(31&B)<<17,p=q+r+s+t,v=~~A>>18,w=~~B>>5,x=(4095&C)<<8,u=v+w+x,p+=~~m>>22,m&=4194303,u+=~~p>>22,p&=4194303,u&=1048575,Me(m,p,u)
}function Vj(a,b,c){var d,e;if(null==a)throw new tb(_n);if(null==b)throw new tb(um);if(3>=a.length)throw new ob(X(bo,nf(Ks,Yq,0,[dh(a.length),dh(0)])));if(0>c||c+2>=b.length)throw new ob(X(vm,nf(Ks,Yq,0,[dh(b.length),dh(c)])));return d=$r,61==a[2]?(e=(255&d[a[0]])<<18|(255&d[a[1]])<<12,b[c]=~~(~~e>>>16<<24)>>24,1):61==a[3]?(e=(255&d[a[0]])<<18|(255&d[a[1]])<<12|(255&d[a[2]])<<6,b[c]=~~(~~e>>>16<<24)>>24,b[c+1]=~~(~~e>>>8<<24)>>24,2):(e=(255&d[a[0]])<<18|(255&d[a[1]])<<12|(255&d[a[2]])<<6|255&d[a[3]],b[c]=~~(~~e>>16<<24)>>24,b[c+1]=~~(~~e>>8<<24)>>24,b[c+2]=~~(e<<24)>>24,3)}function Wj(a,b,c){if(128>c)return a[b]=~~((127&c)<<24)>>24,1;if(2048>c)return a[b++]=~~((~~c>>6&31|192)<<24)>>24,a[b]=~~((63&c|128)<<24)>>24,2;if(65536>c)return a[b++]=~~((~~c>>12&15|224)<<24)>>24,a[b++]=~~((~~c>>6&63|128)<<24)>>24,a[b]=~~((63&c|128)<<24)>>24,3;if(2097152>c)return a[b++]=~~((~~c>>18&7|240)<<24)>>24,a[b++]=~~((~~c>>12&63|128)<<24)>>24,a[b++]=~~((~~c>>6&63|128)<<24)>>24,a[b]=~~((63&c|128)<<24)>>24,4;if(67108864>c)return a[b++]=~~((~~c>>24&3|248)<<24)>>24,a[b++]=~~((~~c>>18&63|128)<<24)>>24,a[b++]=~~((~~c>>12&63|128)<<24)>>24,a[b++]=~~((~~c>>6&63|128)<<24)>>24,a[b]=~~((63&c|128)<<24)>>24,5;throw new ob(dm+c)}function Xj(a){var b,c,d,e,f,g,h,i,j,k,l;if(null==a)throw new ub(dq);if(j=a,f=a.length,i=f>0&&45==a.charCodeAt(0),i&&(a=Md(a,1),--f),0==f)throw new ub(Lm+j+yk);for(;a.length>0&&48==a.charCodeAt(0);)a=Md(a,1),--f;if(f>(uj(),Ar)[10])throw new ub(Lm+j+yk);for(e=0;f>e;++e)if(b=a.charCodeAt(e),!(b>=48&&58>b||b>=97&&97>b||b>=65&&65>b))throw new ub(Lm+j+yk);for(l=Fq,g=yr[10],k=Gh(zr[10]),h=eh(Br[10]),c=!0,d=f%g,d>0&&(l=Gh(-vc(a.substr(0,d-0),10)),a=Md(a,d),f-=d,c=!1);f>=g;){if(d=vc(a.substr(0,g-0),10),a=Md(a,g),f-=g,c)c=!1;else{if(!Fi(l,h))throw new ub(a);l=Uj(l,k)}l=wh(l,Gh(d))}if(Ei(l,Fq))throw new ub(Lm+j+yk);if(!i&&(l=eh(l),Hb(l,Fq)))throw new ub(Lm+j+yk);return l}function Yj(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;for(q=Oe(Js,Uq,-1,d+1,1),r=Oe(Js,Uq,-1,f+1,1),i=Zi(e[f-1]),0!=i?(zi(r,e,0,i),zi(q,c,0,i)):(Lj(c,0,q,0,d),Lj(e,0,r,0,f)),j=r[f-1],l=b-1,m=d;l>=0;){if(q[m]==j)k=-1;else if(s=vh(Qi(ie(Gh(q[m]),Qq),32),ie(Gh(q[m-1]),Qq)),v=oj(s,j),k=Nb(v),u=Nb(gj(v,32)),0!=k){t=!1,++k;do{if(--k,t)break;o=Uj(ie(Gh(k),Qq),ie(Gh(r[f-2]),Qq)),w=vh(Qi(Gh(u),32),ie(Gh(q[m-2]),Qq)),p=vh(ie(Gh(u),Qq),ie(Gh(j),Qq)),Zi(Nb(Ri(p,32)))<32?t=!0:u=Nb(p)}while(Ei(ke(o,Bq),ke(w,Bq)))}if(0!=k&&(g=_i(q,m-f,r,f,k),0!=g))for(--k,h=Fq,n=0;f>n;++n)h=vh(h,vh(ie(Gh(q[m-f+n]),Qq),ie(Gh(r[n]),Qq))),q[m-f+n]=Nb(h),h=Ri(h,32);null!=a&&(a[l]=k),--m,--l}return 0!=i?(Ji(r,f,q,0,i),r):(Lj(q,0,r,0,f),q)}function Zj(){Zj=a;var b,c;for(Lr=new ng(Gq,0),new ng(Jq,0),Mr=new ng(Fq,0),Fr=Oe(xt,Yq,20,11,0),Gr=Oe(Ws,Uq,-1,100,1),Hr=nf(_s,Uq,-1,[1,5,25,125,625,3125,15625,78125,390625,1953125,9765625,48828125,244140625,1220703125,6103515625,30517578125,152587890625,762939453125,3814697265625,19073486328125,95367431640625,476837158203125,0x878678326eac9]),Ir=Oe(Js,Uq,-1,Hr.length,1),Jr=nf(_s,Uq,-1,[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15,1e16]),Kr=Oe(Js,Uq,-1,Jr.length,1),Nr=Oe(xt,Yq,20,11,0),b=0;b<Nr.length;++b)Fr[b]=new ng(Gh(b),0),Nr[b]=new ng(Fq,b),Gr[b]=48;for(;b<Gr.length;++b)Gr[b]=48;for(c=0;c<Ir.length;++c)Ir[c]=Gi(Hr[c]);for(c=0;c<Kr.length;++c)Kr[c]=Gi(Jr[c]);Ni()}function $j(a,b){var c,d,e,f,g,h,i,j;if(c=0,g=0,f=b.length,j=new B(b.length),f>0&&43==b.charCodeAt(0)&&(++g,++c,f>g&&(43==b.charCodeAt(g)||45==b.charCodeAt(g))))throw new ub(Lm+b+yk);for(;f>g&&46!=b.charCodeAt(g)&&101!=b.charCodeAt(g)&&69!=b.charCodeAt(g);)++g;if(Jf(j,b,c,g),f>g&&46==b.charCodeAt(g)){for(++g,c=g;f>g&&101!=b.charCodeAt(g)&&69!=b.charCodeAt(g);)++g;a.f=g-c,Jf(j,b,c,g)}else a.f=0;if(f>g&&(101==b.charCodeAt(g)||69==b.charCodeAt(g))&&(++g,c=g,f>g&&43==b.charCodeAt(g)&&(++g,f>g&&45!=b.charCodeAt(g)&&++c),h=b.substr(c,f-c),a.f=a.f-ij(h),a.f!=bg(a.f)))throw new ub(Wn);if(i=j.c.D(j.b),i.length<16){if(a.i=Yg(i),Jb(a.i))throw new ub(Lm+b+yk);a.b=Gi(a.i)}else Te(a,new ic(i));for(a.e=j.c.B(j.b),e=0;e<j.c.B(j.b)&&(d=Xc(j.c.D(j.b),e),45==d||48==d);++e)--a.e;0==a.e&&(a.e=1)}function _j(a){var b,c,d,e,f,g,h,i;for(b=new A,e=a.length,i=0,h=-1,g=-1,d=0;e>d;d=ti(a,d,1))switch(c=a.charCodeAt(d),i){case 0:switch(c){case 36:i=1;continue;default:b.c.z(b.b,String.fromCharCode(c));continue}case 1:switch(c){case 36:b.c.z(b.b,Ak),i=0;continue;case 123:h=d+1,g=h,i=2;continue;default:Pe((b.c.z(b.b,Ak),b),c),i=0;continue}case 2:switch(c){case 58:case 125:case 44:if(f=Rh(a.substr(g,d-g)),Re(Tk,f)){b.c.z(b.b,Tk),i=125==c?0:3;continue}if(Re(fl,f)){b.c.z(b.b,Tk),i=125==c?0:3;continue}if(44==c){g=d+1;continue}if(58==c){h=d+1,i=4;continue}Mc(b,a.substr(h-2,d+1-(h-2))),i=0;continue;default:continue}case 3:125==c&&(i=0);continue;case 4:125==c&&(i=0,Mc(b,a.substr(h,d-h)));continue;default:throw new db}switch(i){case 1:b.c.z(b.b,Ak);break;case 4:case 2:Mc(b,Md(a,h-2))}return b.c.D(b.b)}function ak(a,b){var c,d,e,f,g,h;Fc(a);try{switch(f=rj(255&Tf(b)&65535),f.d){case 13:return void(a.d=(ed(),_r));case 0:return void(a.d=new af(b));case 1:return c=Oe(et,Uq,-1,ug(b),1),Ve(b,c),void(a.d=new xe(new Ch(c)));case 2:return void(a.d=(ff(),0!=Tf(b)?bs:as));case 3:return c=Oe(et,Uq,-1,ug(b),1),Ve(b,c),void new ye(c);case 4:return void(a.d=new ze((g=Oe(et,Uq,-1,8,1),Ve(b,g),Kj())));case 5:return void(a.d=new qg(Ug(b)));case 6:return void(a.d=new Ae(ug(b)));case 7:return void(a.d=new Sh(b));case 8:return void(a.d=new Be((h=Oe(et,Uq,-1,8,1),Ve(b,h),vh(vh(vh(vh(vh(vh(vh(Qi(Gh(h[0]),56),Qi(Gh(255&h[1]),48)),Qi(Gh(255&h[2]),40)),Qi(Gh(255&h[3]),32)),Qi(Gh(255&h[4]),24)),Gh((255&h[5])<<16)),Gh((255&h[6])<<8)),Gh(255&h[7])))));case 9:return void(a.d=new Th(b));case 10:return void(a.d=new Ng(b));case 11:return void(a.d=new Ce(Ug(b)));case 12:return void(a.d=Xi(rj(255&Tf(b)&65535)));default:throw new qb(dn+f)}}catch(i){throw i=ve(i),Qc(i,13)?(d=i,e=new qb(d.i),og(e,d.f),e):i}}function bk(a,b){Pj();var c,d,e,f,g,h,i,j,k,l;if(g=Hb(a,Fq),g&&(a=eh(a)),le(a,Fq))switch(b){case 0:return Uk;case 1:return Wk;case 2:return Xk;case 3:return Yk;case 4:return Zk;case 5:return $k;case 6:return _k;default:return j=new A,0>b?(j.c.y(j.b,bl),j):(j.c.y(j.b,al),j),j.c.y(j.b,-2147483648==b?el:lk+-b),j.c.D(j.b)}i=Oe(Ws,Uq,-1,19,1),c=18,l=a;do h=l,l=xc(l,Jq),i[--c]=65535&Nb(vh(Lq,wh(h,Uj(l,Jq))));while(me(l,Fq));if(d=wh(wh(wh(Kq,Gh(c)),Gh(b)),Gq),0==b)return g&&(i[--c]=45),We(i,c,18-c);if(b>0&&Fi(d,Dq)){if(Fi(d,Fq)){for(e=c+Nb(d),f=17;f>=e;--f)i[f+1]=i[f];return i[++e]=46,g&&(i[--c]=45),We(i,c,18-c+1)}for(f=2;Hb(Gh(f),vh(eh(d),Gq));++f)i[--c]=48;return i[--c]=46,i[--c]=48,g&&(i[--c]=45),We(i,c,18-c)}return k=c+1,j=new B,g&&(j.c.z(j.b,Qk),j),18-k>=1?(Pe(j,i[c]),j.c.z(j.b,Sk),j.c.z(j.b,We(i,c+1,18-c-1))):j.c.z(j.b,We(i,c,18-c)),j.c.z(j.b,ym),Ei(d,Fq)&&(j.c.z(j.b,Kk),j),j.c.y(j.b,lk+lj(d)),j.c.D(j.b)}function ck(){ck=a,Zr=nf(et,Uq,-1,[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),$r=nf(et,Uq,-1,[-9,-9,-9,-9,-9,-9,-9,-9,-9,-5,-5,-9,-9,-5,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-5,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,62,-9,-9,-9,63,52,53,54,55,56,57,58,59,60,61,-9,-9,-9,-1,-9,-9,-9,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-9,-9,-9,-9,-9,-9,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9])}function dk(a,b){Pj();var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,C;if(v=a.f,m=a.e,e=a.b,0==v)switch(b){case 0:return Uk;case 1:return Wk;case 2:return Xk;case 3:return Yk;case 4:return Zk;case 5:return $k;case 6:return _k;default:return t=new A,0>b?(t.c.y(t.b,bl),t):(t.c.y(t.b,al),t),t.c.w(t.b,-b),t.c.D(t.b)}if(r=10*m+1+7,s=Oe(Ws,Uq,-1,r+1,1),c=r,1==m)if(g=e[0],0>g){C=ie(Gh(g),Qq);do n=C,C=xc(C,Jq),s[--c]=48+Nb(wh(n,Uj(C,Jq)))&65535;while(me(C,Fq))}else{C=g;do n=C,C=~~(C/10),s[--c]=48+(n-10*C)&65535;while(0!=C)}else{x=Oe(Js,Uq,-1,m,1),z=m,Lj(e,0,x,0,m);a:for(;;){for(u=Fq,i=z-1;i>=0;--i)y=vh(Qi(u,32),ie(Gh(x[i]),Qq)),p=_h(y),x[i]=Nb(p),u=Gh(Nb(gj(p,32)));q=Nb(u),o=c;do s[--c]=48+q%10&65535;while(0!=(q=~~(q/10))&&0!=c);for(d=9-o+c,h=0;d>h&&c>0;++h)s[--c]=48;for(k=z-1;0==x[k];--k)if(0==k)break a;z=k+1}for(;48==s[c];)++c}if(l=0>v,f=r-c-b-1,0==b)return l&&(s[--c]=45),We(s,c,r-c);if(b>0&&f>=-6){if(f>=0){for(j=c+f,k=r-1;k>=j;--k)s[k+1]=s[k];return s[++j]=46,l&&(s[--c]=45),We(s,c,r-c+1)}for(k=2;-f+1>k;++k)s[--c]=48;return s[--c]=46,s[--c]=48,l&&(s[--c]=45),We(s,c,r-c)}return w=c+1,t=new B,l&&(t.c.z(t.b,Qk),t),r-w>=1?(Pe(t,s[c]),t.c.z(t.b,Sk),t.c.z(t.b,We(s,c+1,r-c-1))):t.c.z(t.b,We(s,c,r-c)),t.c.z(t.b,ym),f>0&&(t.c.z(t.b,Kk),t),t.c.y(t.b,lk+f),t.c.D(t.b)}function ek(){var a,b=(Rb(),pi(Dp));if(ik.dmr.ModelNode=Fs(function(){var a,b=this;return Sg(ut,arguments)?a=arguments[0]:0==arguments.length&&(a=new E),b.g=a,a[kp]=b,b}),a=ik.dmr.ModelNode.prototype=new Object,a._add=Fs(function(){return gc(this.g.Nb())}),a.add=Fs(function(a){return gc(this.g.Qb(a))}),a.addBoolean=Fs(function(a){return gc(this.g.Xb(a))}),a.addDouble=Fs(function(a){return gc(this.g.Ob(a))}),a.addEmptyList=Fs(function(){return gc(this.g.Yb())}),a.addEmptyObject=Fs(function(){return gc(this.g.Zb())}),a.addExpression=Fs(function(a){return gc(this.g.$b(a))}),a.addInt=Fs(function(a){return gc(this.g.Pb(a))}),a.addModelNode=Fs(function(a){return gc(this.g.Wb(a.g))}),a.addProp=Fs(function(a,b){return gc(this.g.Tb(a,b))}),a.addPropBoolean=Fs(function(a,b){return gc(this.g.Vb(a,b))}),a.addPropByte=Fs(function(a,b){return gc(Nd(this.g,a,b))}),a.addPropDouble=Fs(function(a,b){return gc(this.g.Rb(a,b))}),a.addPropInt=Fs(function(a,b){return gc(this.g.Sb(a,b))}),a.addPropModelNode=Fs(function(a,b){return gc(this.g.Ub(a,b.g))}),a.asBigDecimal=Fs(function(){return this.g.hb()}),a.asBigInteger=Fs(function(){return this.g.ib()}),a.asBoolean=Fs(function(){return Ne(this.g,ut,8,arguments,!1,!1)[0]}),a.asBytes=Fs(function(){return wb(this.g.lb())}),a.asDouble=Fs(function(){return Ne(this.g,ut,1,arguments,!1,!1)[0]}),a.asInt=Fs(function(){return Ne(this.g,ut,0,arguments,!1,!1)[0]}),a.asList=Fs(function(){return this.g.qb()}),a.asLong=Fs(function(){return Ne(this.g,ut,7,arguments,!1,!1)[0]}),a.asObject=Fs(function(){return gc(this.g.tb())}),a.asProperty=Fs(function(){return this.g.ub()}),a.asPropertyList=Fs(function(){return this.g.vb()}),a.asString=Fs(function(){return this.g.wb()}),a.asType=Fs(function(){return this.g.xb()}),a.clear=Fs(function(){return gc(this.g._b())}),a.clone=Fs(function(){return gc(this.g.ac())}),a.equals=Fs(function(){return Ne(this.g,ut,5,arguments,!1,!1)[0]}),ik.dmr.ModelNode.fromBase64=Fs(function(a){return gc(Ph(a))}),a.get=Fs(function(){return Ne(this.g,ut,4,arguments,!1,!1)[0]}),a.getFailureDescription=Fs(function(){return this.g.ec()}),a.getTag=Fs(function(a){return this.g.fc(a)}),a.getType=Fs(function(){return this.g.gc()}),a.has=Fs(function(a){return this.g.Eb(a)}),a.hasDefined=Fs(function(a){return this.g.hc(a)}),a.hasDefinedKey=Fs(function(a){return this.g.ic(a)}),a.hasKey=Fs(function(a){return this.g.Fb(a)}),a.hashCode=Fs(function(){return this.g.hC()}),a.isDefined=Fs(function(){return this.g.jc()}),a.isFailure=Fs(function(){return this.g.kc()}),a.keys=Fs(function(){return this.g.lc()}),a.protect=Fs(function(){this.g.mc()}),a.readExternal=Fs(function(a){this.g.nc(Wf(a))}),a.remove=Fs(function(a){return gc(this.g.oc(a))}),a.require=Fs(function(){return Ne(this.g,ut,6,arguments,!1,!1)[0]}),a.resolve=Fs(function(){return gc(this.g.rc())}),a.set=Fs(function(a){return gc(this.g.uc(a))}),a.setBoolean=Fs(function(a){return gc(this.g.Dc(a))}),a.setByteArray=Fs(function(a){return gc(gd(this.g,a))}),a.setDouble=Fs(function(a){return gc(this.g.sc(a))}),a.setEmptyList=Fs(function(){return gc(this.g.Ec())}),a.setEmptyObject=Fs(function(){return gc(this.g.Fc())}),a.setExpression=Fs(function(){return Ne(this.g,ut,9,arguments,!1,!1)[0]}),a.setInt=Fs(function(a){return gc(this.g.tc(a))}),a.setModelNode=Fs(function(a){return gc(this.g.Bc(a.g))}),a.setProp=Fs(function(a,b){return gc(this.g.xc(a,b))}),a.setPropBoolean=Fs(function(a,b){return gc(this.g.Ac(a,b))}),a.setPropByteArray=Fs(function(a,b){return gc(Od(this.g,a,b))}),a.setPropDouble=Fs(function(a,b){return gc(this.g.vc(a,b))}),a.setPropInt=Fs(function(a,b){return gc(this.g.wc(a,b))}),a.setPropModelNode=Fs(function(a,b){return gc(this.g.yc(a,b.g))}),a.setPropType=Fs(function(a,b){return gc(this.g.zc(a,Wf(b)))}),a.setTag=Fs(function(){Ne(this.g,ut,3,arguments,!1,!1)[0]}),a.setType=Fs(function(a){return gc(this.g.Cc(Wf(a)))}),a.toBase64String=Fs(function(){return this.g.Jc()}),a.toJSONString=Fs(function(){return Ne(this.g,ut,2,arguments,!1,!1)[0]}),a.toString=Fs(function(){return this.g.tS()}),a.writeExternal=Fs(function(a){this.g.Mb(Wf(a))}),pc(ut,{0:{0:[[function(){return this.ob.apply(this,arguments)},null,void 0]],1:[[function(){return this.pb.apply(this,arguments)},null,void 0,eq]]},1:{0:[[function(){return this.mb.apply(this,arguments)},null,void 0]],1:[[function(){return this.nb.apply(this,arguments)},null,void 0,eq]]},2:{0:[[function(){return this.Kc.apply(this,arguments)},null,void 0]],1:[[function(){return this.Lb.apply(this,arguments)},null,void 0,qp]]},3:{2:[[function(){return this.Ic.apply(this,arguments)},null,void 0,rq,Gs]]},4:{1:[[function(){return this.dc.apply(this,arguments)},gc,void 0,rq],[function(){return this.cc.apply(this,arguments)},gc,void 0,eq]]},5:{1:[[function(){return this.eQ.apply(this,arguments)},null,void 0,Gs],[function(){return this.bc.apply(this,arguments)},null,void 0,ut]]},6:{1:[[function(){return this.qc.apply(this,arguments)},gc,void 0,rq],[function(){return this.pc.apply(this,arguments)},gc,void 0,eq]]},7:{0:[[bc,null,qc]],1:[[Oc,null,qc,eq]]},8:{0:[[function(){return this.jb.apply(this,arguments)},null,void 0]],1:[[function(){return this.kb.apply(this,arguments)},null,void 0,qp]]},9:{1:[[function(){return this.Gc.apply(this,arguments)},gc,void 0,rq]],2:[[function(){return this.Hc.apply(this,arguments)},gc,void 0,rq,rq]]}},!1),_b(ut,ik.dmr.ModelNode),b)for(p in b)void 0===ik.dmr.ModelNode[p]&&(ik.dmr.ModelNode[p]=b[p])}var fk,gk,hk,ik=window,jk=ik.document,kk=ik.__gwtStatsEvent?function(a){ik.__gwtStatsEvent(a)}:null,lk="",mk="\n",nk="\n ",ok=" ",pk="    ",qk=" : ",rk=" => ",sk=" B",tk=" C",uk=" D",vk=" I",wk=" J",xk=" is not supported",yk='"',zk='"/&gt;',Ak="$",Bk="'",Ck="' exists",Dk="').<br>Modify your application's host HTML page doctype, or update your custom 'document.compatMode' configuration property settings.",Ek="(",Fk="(this Collection)",Gk=")",Hk=") ",Ik=") does not match the runtime user.agent value (",Jk="). Expect more errors.\n",Kk="+",Lk=",",Mk=",\n",Nk=", ",Ok=", Size: ",Pk=", byte=",Qk="-",Rk="-9223372036854775808",Sk=".",Tk="/",Uk="0",Vk="0.",Wk="0.0",Xk="0.00",Yk="0.000",Zk="0.0000",$k="0.00000",_k="0.000000",al="0E",bl="0E+",cl="0x",dl="0x0",el="2147483648",fl=":",gl=": ",hl="=",il="?",jl="@",kl="@@",ll="AbstractCollection",ml="AbstractHashMap",nl="AbstractHashMap$EntrySet",ol="AbstractHashMap$EntrySetIterator",pl="AbstractHashMap$MapEntryNull",ql="AbstractHashMap$MapEntryString",rl="AbstractList",sl="AbstractList$IteratorImpl",tl="AbstractMap",ul="AbstractMap$1",vl="AbstractMap$1$1",wl="AbstractMap$2",xl="AbstractMap$2$1",yl="AbstractMapEntry",zl="AbstractSet",Al="Add not supported on this collection",Bl="Add not supported on this list",Cl="ArithmeticException",Dl="Array types must match",El="ArrayList",Fl="ArrayStoreException",Gl="BIG_DECIMAL",Hl="BIG_INTEGER",Il="BOOLEAN",Jl="BYTES",Kl="BYTES_VALUE",Ll="BackCompat",Ml="Bad Base64 input character decimal: ",Nl="Base64-encoded string must have at least four characters, but length specified was ",Ol="BigDecimal",Pl="BigDecimal;",Ql="BigDecimalModelValue",Rl="BigInteger",Sl="BigInteger divide by zero",Tl="BigInteger;",Ul="BigIntegerModelValue",Vl="Boolean",Wl="BooleanModelValue",Xl="BytesModelValue",Yl="CSS1Compat",Zl="Can't find exported method for given arguments: ",$l="Can't overwrite cause",_l="Cannot decode null source array.",am="Cannot have length offset: ",bm="Cannot have offset of %d and length of %d with array of length %d",cm="Cannot serialize a null array.",dm="Character out of range: ",em="Charset US-ASCII not supported",fm="Class",gm="ClassCastException",hm="Collections$SingletonList",im="Collections$UnmodifiableCollection",jm="Collections$UnmodifiableCollectionIterator",km="Collections$UnmodifiableList",lm="Collections$UnmodifiableMap",mm="Collections$UnmodifiableMap$UnmodifiableEntrySet",nm="Collections$UnmodifiableMap$UnmodifiableEntrySet$1",om="Collections$UnmodifiableMap$UnmodifiableEntrySet$UnmodifiableEntry",pm="Collections$UnmodifiableRandomAccessList",qm="Collections$UnmodifiableSet",rm="DOUBLE",sm="DataInput",tm="DataOutput",um="Destination array was null.",vm="Destination array with length %d cannot have offset of %d and still store three bytes.",wm="Double",xm="DoubleModelValue",ym="E",zm="EOF",Am="ERROR: Possible problem with your *.gwt.xml module file.\nThe compile time user.agent value (",Bm="EXPRESSION",Cm="EXPRESSION_VALUE",Dm="Enum",Em="Exception",Fm="Export$1",Gm="ExportAllExporterImpl",Hm="Exportable",Im="ExporterBaseActual",Jm="ExporterBaseImpl",Km="ExpressionValue",Lm='For input string: "',Mm="GWT no longer supports Quirks Mode (document.compatMode=' BackCompat').<br>Make sure your application's host HTML page has a Standards Mode (document.compatMode=' CSS1Compat') doctype,<br>e.g. by using &lt;!doctype html&gt; at the start of your application's HTML page.<br><br>To continue using this unsupported rendering mode and risk layout problems, suppress this message by adding<br>the following line to your*.gwt.xml module file:<br>&nbsp;&nbsp;&lt;extend-configuration-property name=\"document.compatMode\" value=\"",Nm="HashMap",Om="HashSet",Pm="INT",Qm="IOException",Rm="ISO-8859-1",Sm="ISO-LATIN-1",Tm="IllegalArgumentException",Um="IllegalStateException",Vm="Index: ",Wm="IndexOutOfBoundsException",Xm="Infinite or NaN",Ym="Input string was null.",Zm="IntModelValue",$m="Integer",_m="Integer;",an="Invalid UTF8 sequence",bn="Invalid UTF8 sequence at ",cn="Invalid type character '",dn="Invalid type read: ",en="JavaScriptException",fn="JavaScriptObject$",gn="LIST",hn="LONG",jn="LinkedHashMap",kn="LinkedHashMap$ChainEntry",ln="LinkedHashMap$EntrySet",mn="LinkedHashMap$EntrySet$EntryIterator",nn="ListModelValue",on="LongLibBase$LongEmul",pn="LongLibBase$LongEmul;",qn="LongModelValue",rn="MapEntryImpl",sn="ModelNode",tn="ModelNodeExporterImpl",un="ModelType",vn="ModelType;",wn="ModelValue",xn="ModelValue$1",yn="Must be array types",zn="Must call next() before remove().",An="Negative bit address",Bn="Negative exponent",Cn="No child '",Dn="No child exists at index [",En="No current entry",Fn="No failure-description provided",Gn="NoSuchElementException",Hn="NullPointerException",In="Number",Jn="NumberFormatException",Kn="OBJECT",Ln="Object",Mn="Object;",Nn="ObjectModelValue",On="PROPERTY",Pn="PROPERTY_VALUE",Qn="Property",Rn="PropertyModelValue",Sn="Put not supported on this map",Tn="Remove not supported on this list",Un="RuntimeException",Vn="STRING",Wn="Scale out of range.",Xn="Scheduler",Yn="SchedulerImpl",Zn="SeedUtil",$n="Self-causation not permitted",_n="Source array was null.",ao="Source array with length %d cannot have offset of %d and process %d bytes.",bo="Source array with length %d cannot have offset of %d and still process four bytes.",co="StackTraceCreator$Collector",eo="StackTraceCreator$CollectorChrome",fo="StackTraceCreator$CollectorChromeNoSourceMap",go="StackTraceCreator$CollectorMoz",ho="StackTraceCreator$CollectorOpera",io="StackTraceElement",jo="StackTraceElement;",ko="String",lo="String index out of range: ",mo="String;",no="StringBuffer",oo="StringBufferImpl",po="StringBufferImplAppend",qo="StringBufferImplArray",ro="StringBufferImplArrayBase",so="StringBuilder",to="StringIndexOutOfBoundsException",uo="StringModelValue",vo="TYPE",wo="TYPE_MODEL_VALUE",xo="Throwable",yo="TypeModelValue",zo="UNDEFINED",Ao="US-ASCII",Bo="UTF-8",Co="Uncaught DMR exception: ",Do="Unknown",Eo="Unknown Source",Fo="UnsupportedEncodingException",Go="UnsupportedOperationException",Ho="UserAgentAsserter_UserAgentPropertyImplGecko1_8",Io="UserAgentAsserter_UserAgentPropertyImplIe6",Jo="UserAgentAsserter_UserAgentPropertyImplIe8",Ko="UserAgentAsserter_UserAgentPropertyImplIe9",Lo="UserAgentAsserter_UserAgentPropertyImplOpera",Mo="UserAgentAsserter_UserAgentPropertyImplSafari",No="Your *.gwt.xml module configuration prohibits the use of the current doucment rendering mode (document.compatMode=' ",Oo="Zero length BigInteger",Po="[",Qo="[B",Ro="[C",So="[D",To="[I",Uo="[J",Vo="[Lcom.google.gwt.lang.",Wo="[Ljava.lang.",Xo="[Ljava.math.",Yo="[Lorg.jboss.dmr.client.",Zo="[object Array]",$o="\\",_o='\\"',ap="\\.",bp="\\/",cp="\\\\",dp="\\b",ep="\\f",fp="\\n",gp="\\r",hp="\\t",ip="\\u",jp="]",kp="__gwtex_wrap",lp="anonymous",mp="array",np="at ",op="big decimal ",pp="big integer ",qp="boolean",rp="byte",sp="bytes {",tp="char",up="class ",vp="client",wp="com.google.gwt.core.client.",xp="com.google.gwt.core.client.impl.",yp="com.google.gwt.lang.",zp="com.google.gwt.user.client.DocumentModeAsserter",Ap="com.google.gwt.useragent.client.",Bp="com.google.gwt.useragent.client.UserAgentAsserter",Cp="divide by zero",Dp="dmr.ModelNode",Ep="double",Fp="expression ",Gp="expressionString is null",Hp="failure-description",Ip="false",Jp="function",Kp="function ",Lp="g",Mp="gecko",Np="gecko1_8",Op="ie6",Pp="ie8",Qp="ie9",Rp="initial capacity was negative or load factor was non-positive",Sp="int",Tp="interface ",Up="java.io.",Vp="java.lang.",Wp="java.math.",Xp="java.util.",Yp="long",Zp="message",$p="moduleStartup",_p="msie",aq="name",bq="name is null",cq="newValue is null",dq="null",eq="number",fq="object",gq="onModuleLoadStart",hq="opera",iq="org.jboss.dmr.client.",jq="org.jboss.dmr.client.Bootstrap",kq="org.jboss.dmr.client.Export",lq="org.timepedia.exporter.client.",mq="outcome",nq="power of ten too big",oq="property is null",pq="safari",qq="startup",rq="string",sq="success",tq="toString",uq="true",vq="undefined",wq="unknown",xq="value is null",yq="webkit",zq="{",Aq="}",Bq={l:0,m:0,h:524288},Cq={l:0,m:4193280,h:1048575},Dq={l:4194298,m:4194303,h:1048575},Eq={l:4194303,m:4194303,h:1048575},Fq={l:0,m:0,h:0},Gq={l:1,m:0,h:0},Hq={l:2,m:0,h:0},Iq={l:5,m:0,h:0},Jq={l:10,m:0,h:0},Kq={l:18,m:0,h:0},Lq={l:48,m:0,h:0},Mq={l:255,m:0,h:0},Nq={l:877824,m:119,h:0},Oq={l:1755648,m:238,h:0},Pq={l:4194303,m:511,h:0},Qq={l:4194303,m:1023,h:0},Rq={l:4194303,m:4194303,h:524287},Sq={},Tq={8:1},Uq={5:1},Vq={5:1,13:1,19:1},Wq={5:1,19:1},Xq={5:1,14:1,19:1},Yq={5:1,17:1},Zq={},$q={3:1},_q={25:1},ar={5:1,24:1},br={23:1},cr={24:1},dr={27:1};Si(1,-1,Zq),hk.eQ=function(a){return this===a},hk.gC=function(){return this.cZ},hk.hC=function(){return Sc(this)},hk.tS=function(){return this.cZ.f+jl+ni(this.hC())},hk.toString=function(){return this.tS()},hk.tM=a;var er=null;Si(8,1,Wq),hk.n=function(){return this.i},hk.tS=function(){return Ze(this)},hk.f=null,hk.i=null,Si(7,8,Wq),Si(6,7,Wq,ib),Si(5,6,Wq,bf),hk.n=function(){return null==this.d&&(this.e=hf(this.c),this.b=this.b+gl+hd(this.c),void(this.d=Ek+this.e+Hk+Wc(this.c)+this.b)),this.d},hk.b=lk,hk.c=null,hk.d=null,hk.e=null,Si(14,1,{});var fr=0,gr=0,hr=0,ir=-1;Si(16,14,{},b),hk.b=null,hk.c=null;var jr;Si(19,1,{},d),hk.o=function(){for(var a={},b=[],c=arguments.callee.caller.caller;c;){var d=this.q(c.toString());b.push(d);var e=fl+d,f=a[e];if(f){var g,h;for(g=0,h=f.length;h>g;g++)if(f[g]===c)return b}(f||(a[e]=[])).push(c),c=c.caller}return b},hk.p=function(a){var b,c,d,e;for(d=this.s(he(a.c)?sf(a.c):null),e=Oe(Ps,Yq,18,d.length,0),b=0,c=e.length;c>b;++b)e[b]=new Ee(d[b],null,-1);Xg(e)},hk.q=function(a){return ui(a)},hk.r=function(){var a,b,c,d;for(c=ah().o(),d=Oe(Ps,Yq,18,c.length,0),a=0,b=d.length;b>a;++a)d[a]=new Ee(c[a],null,-1);Xg(d)},hk.s=function(){return[]},Si(21,19,{},e),hk.o=function(){return qe(this.s(Ad()),this.u())},hk.t=function(a){return a&&a.stack?a.stack.split(mk):[]},hk.s=function(a){return sg(this,a)},hk.u=function(){return 2},Si(20,21,{}),hk.o=function(){var a;return a=qe(Uf(this,Ad()),3),0==a.length&&(a=qe((new d).o(),1)),a},hk.p=function(a){var b;b=Uf(this,he(a.c)?sf(a.c):null),nj(this,b)},hk.q=function(a){var b,c,d,e;return 0==a.length?lp:(e=Rh(a),0==e.indexOf(np)&&(e=Md(e,3)),c=e.indexOf(Po),-1!=c&&(e=Rh(e.substr(0,c-0))+Rh(Md(e,e.indexOf(jp,c)+1))),c=e.indexOf(Ek),-1==c?(c=e.indexOf(jl),-1==c?(d=e,e=lk):(d=Rh(Md(e,c+1)),e=Rh(e.substr(0,c-0)))):(b=e.indexOf(Gk,c),d=e.substr(c+1,b-(c+1)),e=Rh(e.substr(0,c-0))),c=rc(e,Ii(46)),-1!=c&&(e=Md(e,c+1)),(e.length>0?e:lp)+kl+d)},hk.r=function(){var a;a=ah().o(),nj(this,a)},hk.s=function(a){return Uf(this,a)},hk.v=function(a){return a},hk.u=function(){return 3},Si(22,20,{},x),hk.v=function(){return-1},Si(23,21,{},g),hk.q=function(a){return 0==a.length?lp:a},hk.t=function(a){var b,c,d,e,f;for(f=a&&a.message?a.message.split(mk):[],b=0,c=0,e=f.length;e>c;++b,c+=2)d=f[c].lastIndexOf(Kp),-1==d?void(f[b]=lk):void(f[b]=Rh(Md(f[c],d+9)));return f.length=b,f},hk.u=function(){return 3},Si(24,1,{}),Si(25,24,{},h),hk.w=function(a,b){this.b+=b},hk.x=function(a,b){this.b+=b},hk.y=function(a,b){this.b+=b},hk.z=function(a,b){this.b+=b},hk.A=function(){return null},hk.B=function(){return this.b.length},hk.C=function(a,b,c,d){this.b=Zc(this.b,0,b)+d+Md(this.b,c)},hk.D=function(){return this.b},hk.b=lk,Si(27,24,{}),hk.w=function(a,b){a[a.explicitLength++]=b},hk.x=function(a,b){sd(a,lk+b)},hk.y=function(a,b){a[a.explicitLength++]=null==b?dq:b},hk.z=function(a,b){sd(a,b)},hk.A=function(){var a=[];return a.explicitLength=0,a},hk.B=function(a){return Sd(this,a).length},hk.C=function(a,b,c,d){var e;e=rf(a),sd(a,e.substr(0,b-0)),a[a.explicitLength++]=null==d?dq:d,sd(a,Md(e,c))},hk.D=function(a){return Sd(this,a)},Si(26,27,{},j),Si(30,1,{},l),hk.qI=0;var kr,lr,mr,nr,or,pr,qr=-1,rr=null,sr=null;Si(40,1,{2:1},n),Si(47,1,$q,o),hk.E=function(){return Np},hk.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(hq)}()?hq:function(){return-1!=a.indexOf(yq)}()?pq:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=9}()?Qp:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=8}()?Pp:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);return c&&3==c.length?b(c)>=6e3:void 0}()?Op:function(){return-1!=a.indexOf(Mp)}()?Np:wq},hk.G=function(){return!0},Si(48,1,$q,q),hk.E=function(){return Op},hk.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(hq)}()?hq:function(){return-1!=a.indexOf(yq)}()?pq:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=9}()?Qp:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=8}()?Pp:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);return c&&3==c.length?b(c)>=6e3:void 0}()?Op:function(){return-1!=a.indexOf(Mp)}()?Np:wq},hk.G=function(){return!0},Si(49,1,$q,r),hk.E=function(){return Pp},hk.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(hq)}()?hq:function(){return-1!=a.indexOf(yq)}()?pq:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=9}()?Qp:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=8}()?Pp:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);return c&&3==c.length?b(c)>=6e3:void 0}()?Op:function(){return-1!=a.indexOf(Mp)}()?Np:wq},hk.G=function(){return!0},Si(50,1,$q,s),hk.E=function(){return Qp},hk.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(hq)}()?hq:function(){return-1!=a.indexOf(yq)}()?pq:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=9}()?Qp:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=8}()?Pp:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);return c&&3==c.length?b(c)>=6e3:void 0}()?Op:function(){return-1!=a.indexOf(Mp)}()?Np:wq},hk.G=function(){return!0},Si(51,1,$q,t),hk.E=function(){return hq},hk.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(hq)}()?hq:function(){return-1!=a.indexOf(yq)}()?pq:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=9}()?Qp:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=8}()?Pp:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);return c&&3==c.length?b(c)>=6e3:void 0}()?Op:function(){return-1!=a.indexOf(Mp)}()?Np:wq},hk.G=function(){return!0},Si(52,1,$q,u),hk.E=function(){return pq},hk.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(hq)}()?hq:function(){return-1!=a.indexOf(yq)}()?pq:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=9}()?Qp:function(){return-1!=a.indexOf(_p)&&jk.documentMode>=8}()?Pp:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);return c&&3==c.length?b(c)>=6e3:void 0}()?Op:function(){return-1!=a.indexOf(Mp)}()?Np:wq},hk.G=function(){return!0},Si(53,7,{4:1,5:1,19:1},jb),Si(54,53,{4:1,5:1,6:1,19:1},kb),Si(55,6,Wq,lb),Si(56,6,Wq,ab,mb),Si(57,1,{5:1,7:1,10:1},F),hk.eQ=function(a){return Qc(a,7)&&Qe(a,7).b==this.b},hk.hC=function(){return this.b?1231:1237},hk.tS=function(){return this.b?uq:Ip},hk.b=!1;var tr,ur;Si(59,1,{9:1},v),hk.tS=function(){return(0!=(2&this.c)?Tp:0!=(1&this.c)?lk:up)+this.f},hk.b=null,hk.c=0,hk.d=0,hk.e=null,hk.f=null,Si(60,6,Wq,bb),Si(62,1,{5:1,16:1});var vr=null;Si(61,62,{5:1,10:1,11:1,16:1},I),hk.eQ=function(a){return Qc(a,11)&&Qe(a,11).b==this.b},hk.hC=function(){return bg(this.b)},hk.tS=function(){return lk+this.b},hk.b=0,Si(63,1,{5:1,10:1,12:1}),hk.eQ=function(a){return this===a},hk.hC=function(){return Sc(this)},hk.tS=function(){return this.c},hk.c=null,hk.d=0,Si(64,6,Vq,cb,ob,pb),Si(65,6,Wq,db,qb,rb),Si(66,6,Xq,eb,sb),Si(67,62,{5:1,10:1,15:1,16:1},J),hk.eQ=function(a){return Qc(a,15)&&Qe(a,15).b==this.b},hk.hC=function(){return this.b},hk.tS=function(){return lk+this.b},hk.b=0;var wr;Si(71,6,Wq,fb,tb);var xr,yr,zr,Ar,Br;Si(74,64,Vq,ub),Si(75,1,{5:1,18:1},Ee),hk.tS=function(){return this.b+Sk+this.e+Ek+(null!=this.c?this.c:Eo)+(this.d>=0?fl+this.d:lk)+Gk},hk.b=null,hk.c=null,hk.d=0,hk.e=null,hk=String.prototype,hk.cM={1:1,5:1,8:1,10:1},hk.eQ=function(a){return Re(this,a)},hk.hC=function(){return fh(this)},hk.tS=hk.toString;var Cr,Dr,Er=0;Si(77,1,Tq,Bd),hk.tS=function(){return this.c.D(this.b)},Si(78,1,Tq,A,B),hk.tS=function(){return this.c.D(this.b)},Si(79,66,Xq,Zb),Si(81,6,Wq,gb,zb),Si(82,62,{5:1,10:1,16:1,20:1},$g,ad,Jc,ng,yb,hc),hk.eQ=function(a){return Mh(this,a)},hk.hC=function(){return si(this)},hk.tS=function(){return Gj(this)},hk.b=0,hk.c=0,hk.d=null,hk.e=0,hk.f=0,hk.i=0,hk.j=null;var Fr,Gr,Hr,Ir,Jr,Kr,Lr,Mr,Nr,Or=null;Si(83,62,{5:1,10:1,16:1,21:1},Wh,cf,ee,Vh,Dh,ic,Ch),hk.eQ=function(a){return kh(this,a)},hk.hC=function(){return hh(this)},hk.tS=function(){return dk(this,0)},hk.b=null,hk.c=-2,hk.d=0,hk.e=0,hk.f=0;var Pr,Qr,Rr,Sr,Tr,Ur,Vr,Wr,Xr,Yr=null;Si(89,1,{}),hk.I=function(){throw new zb(Al)},hk.J=function(a){var b;return b=Ig(this.H(),a),!!b},hk.K=function(){return 0==this.L()},hk.M=function(){return this.N(Oe(Ks,Yq,0,this.L(),0))},hk.N=function(a){var b,c,d;for(d=this.L(),a.length<d&&(a=mf(a,d)),c=this.H(),b=0;d>b;++b)Li(a,b,c.$());return a.length>d&&Li(a,d,null),a},hk.tS=function(){return ri(this)},Si(91,1,cr),hk.O=function(a){return!!bi(this,a,!1)},hk.P=function(a){var b,c,d;for(c=this.Q().H();c.Z();)if(b=Qe(c.$(),25),d=b.bb(),null==a?null==d:Ke(a,d))return!0;
return!1},hk.eQ=function(a){var b,c,d,e,f;if(a===this)return!0;if(!Qc(a,24))return!1;if(e=Qe(a,24),this.L()!=e.L())return!1;for(c=e.Q().H();c.Z();){if(b=Qe(c.$(),25),d=b.ab(),f=b.bb(),!this.O(d))return!1;if(!Le(f,this.R(d)))return!1}return!0},hk.R=function(a){var b;return b=bi(this,a,!1),b?b.bb():null},hk.hC=function(){var a,b,c;for(c=0,b=this.Q().H();b.Z();)a=Qe(b.$(),25),c+=a.hC(),c=~~c;return c},hk.K=function(){return 0==this.L()},hk.S=function(){return Qd(this)},hk.T=function(){throw new zb(Sn)},hk.U=function(a){var b;return b=bi(this,a,!0),b?b.bb():null},hk.L=function(){return this.Q().L()},hk.tS=function(){var a,b,c,d;for(d=zq,a=!1,c=this.Q().H();c.Z();)b=Qe(c.$(),25),a?d+=Nk:a=!0,d+=lk+b.ab(),d+=hl,d+=lk+b.bb();return d+Aq},hk.V=function(){var a;return a=this.Q(),new Wb(this,a)},Si(90,91,cr),hk.O=function(a){return null==a?this.i:Qc(a,1)?fl+Qe(a,1)in this.k:Ih(this,a,this.Y(a))},hk.P=function(a){return this.i&&this.W(this.f,a)?!0:jh(this,a)?!0:Ai(this,a)?!0:!1},hk.Q=function(){return new K(this)},hk.X=function(a,b){return this.W(a,b)},hk.R=function(a){return null==a?this.f:Qc(a,1)?fc(this,Qe(a,1)):Jh(this,a,this.Y(a))},hk.T=function(a,b){return null==a?pf(this,b):Qc(a,1)?Zf(this,Qe(a,1),b):Mi(this,a,b,this.Y(a))},hk.U=function(a){return null==a?qf(this):Qc(a,1)?$f(this,Qe(a,1)):Bi(this,a,this.Y(a))},hk.L=function(){return this.j},hk.e=null,hk.f=null,hk.i=!1,hk.j=0,hk.k=null,Si(93,89,dr),hk.eQ=function(a){var b,c,d;if(a===this)return!0;if(!Qc(a,27))return!1;if(c=Qe(a,27),c.L()!=this.L())return!1;for(b=c.H();b.Z();)if(d=b.$(),!this.J(d))return!1;return!0},hk.hC=function(){var a,b,c;for(a=0,b=this.H();b.Z();)c=b.$(),null!=c&&(a+=ne(c),a=~~a);return a},Si(92,93,dr,K),hk.J=function(a){var b,c,d;return Qc(a,25)&&(b=Qe(a,25),c=b.ab(),this.b.O(c))?(d=this.b.R(c),this.b.W(b.bb(),d)):!1},hk.H=function(){return new Mg(this.b)},hk.L=function(){return this.b.L()},hk.b=null,Si(94,1,{},Mg),hk.Z=function(){return cc(this.b)},hk.$=function(){return this.c=Qe(Bf(this.b),25)},hk._=function(){if(!this.c)throw new qb(zn);kf(this.b),this.d.U(this.c.ab()),this.c=null},hk.b=null,hk.c=null,hk.d=null,Si(96,1,_q),hk.eQ=function(a){var b;return Qc(a,25)&&(b=Qe(a,25),Le(this.ab(),b.ab())&&Le(this.bb(),b.bb()))?!0:!1},hk.hC=function(){var a,b;return a=0,b=0,null!=this.ab()&&(a=ne(this.ab())),null!=this.bb()&&(b=ne(this.bb())),a^b},hk.tS=function(){return this.ab()+hl+this.bb()},Si(95,96,_q,L),hk.ab=function(){return null},hk.bb=function(){return this.b.f},hk.cb=function(a){return pf(this.b,a)},hk.b=null,Si(97,96,_q,Ub),hk.ab=function(){return this.b},hk.bb=function(){return fc(this.c,this.b)},hk.cb=function(a){return Zf(this.c,this.b,a)},hk.b=null,hk.c=null,Si(98,89,br),hk.db=function(){throw new zb(Bl)},hk.I=function(a){return this.db(this.L(),a),!0},hk.eQ=function(a){var b,c,d,e,f;if(a===this)return!0;if(!Qc(a,23))return!1;if(f=Qe(a,23),this.L()!=f.L())return!1;for(d=new O(this),e=f.H();d.b<d.d.L();)if(b=Bf(d),c=e.$(),!(null==b?null==c:Ke(b,c)))return!1;return!0},hk.hC=function(){var a,b,c;for(b=1,a=new O(this);a.b<a.d.L();)c=Bf(a),b=31*b+(null==c?0:ne(c)),b=~~b;return b},hk.H=function(){return new O(this)},hk.fb=function(){throw new zb(Tn)},Si(99,1,{},O),hk.Z=function(){return cc(this)},hk.$=function(){return Bf(this)},hk._=function(){kf(this)},hk.b=0,hk.c=-1,hk.d=null,Si(100,93,dr,Vb),hk.J=function(a){return this.b.O(a)},hk.H=function(){return Rd(this)},hk.L=function(){return this.c.L()},hk.b=null,hk.c=null,Si(101,1,{},M),hk.Z=function(){return this.b.Z()},hk.$=function(){var a;return a=Qe(this.b.$(),25),a.ab()},hk._=function(){this.b._()},hk.b=null,Si(102,89,{},Wb),hk.J=function(a){return this.b.P(a)},hk.H=function(){var a;return a=this.c.H(),new N(a)},hk.L=function(){return this.c.L()},hk.b=null,hk.c=null,Si(103,1,{},N),hk.Z=function(){return this.b.Z()},hk.$=function(){var a;return a=Qe(this.b.$(),25).bb()},hk._=function(){this.b._()},hk.b=null,Si(104,98,{5:1,23:1,26:1},C,jc,ef),hk.db=function(a,b){(0>a||a>this.c)&&pd(a,this.c),nc(this.b,a,0,b),++this.c},hk.I=function(a){return xd(this,a)},hk.J=function(a){return-1!=Mf(this,a,0)},hk.eb=function(a){return Kc(a,this.c),this.b[a]},hk.K=function(){return 0==this.c},hk.fb=function(a){var b;return Kc(a,this.c),b=this.b[a],mc(this.b,a,1),--this.c,b},hk.L=function(){return this.c},hk.M=function(){return Kf(this.b,this.c)},hk.N=function(a){var b;for(a.length<this.c&&(a=mf(a,this.c)),b=0;b<this.c;++b)Li(a,b,this.b[b]);return a.length>this.c&&Li(a,this.c,null),a},hk.c=0,Si(107,98,{5:1,23:1},G),hk.J=function(a){return Le(this.b,a)},hk.eb=function(a){if(0==a)return this.b;throw new eb},hk.L=function(){return 1},hk.b=null,Si(108,1,{},Q),hk.I=function(){throw new gb},hk.H=function(){return new H(this.c.H())},hk.L=function(){return this.c.L()},hk.M=function(){return this.c.M()},hk.tS=function(){return this.c.tS()},hk.c=null,Si(109,1,{},H),hk.Z=function(){return this.b.Z()},hk.$=function(){return this.b.$()},hk._=function(){throw new gb},hk.b=null,Si(110,108,br,Tb),hk.eQ=function(a){return this.b.eQ(a)},hk.eb=function(a){return this.b.eb(a)},hk.hC=function(){return this.b.hC()},hk.K=function(){return this.b.K()},hk.b=null,Si(111,1,cr,P),hk.O=function(a){return this.d.O(a)},hk.Q=function(){return!this.b&&(this.b=new S(this.d.Q())),this.b},hk.eQ=function(a){return this.d.eQ(a)},hk.R=function(a){return this.d.R(a)},hk.hC=function(){return this.d.hC()},hk.K=function(){return this.d.K()},hk.S=function(){return!this.c&&(this.c=new R(this.d.S())),this.c},hk.T=function(){throw new gb},hk.U=function(){throw new gb},hk.L=function(){return this.d.L()},hk.tS=function(){return this.d.tS()},hk.V=function(){return!this.e&&(this.e=new Q(this.d.V())),this.e},hk.b=null,hk.c=null,hk.d=null,hk.e=null,Si(113,108,dr,R),hk.eQ=function(a){return this.c.eQ(a)},hk.hC=function(){return this.c.hC()},Si(112,113,dr,S),hk.H=function(){var a;return a=this.c.H(),new T(a)},hk.M=function(){var a;return a=this.c.M(),xf(a,a.length),a},Si(114,1,{},T),hk.Z=function(){return this.b.Z()},hk.$=function(){return new U(Qe(this.b.$(),25))},hk._=function(){throw new gb},hk.b=null,Si(115,1,_q,U),hk.eQ=function(a){return this.b.eQ(a)},hk.ab=function(){return this.b.ab()},hk.bb=function(){return this.b.bb()},hk.hC=function(){return this.b.hC()},hk.cb=function(){throw new gb},hk.tS=function(){return this.b.tS()},hk.b=null,Si(116,110,{23:1,26:1},Ab),Si(117,90,ar,D,Bb),hk.W=function(a,b){return tc(a)===tc(b)||null!=a&&Ke(a,b)},hk.Y=function(a){return~~ne(a)},Si(118,93,{5:1,27:1},Pb),hk.I=function(a){return ce(this,a)},hk.J=function(a){return this.b.O(a)},hk.K=function(){return 0==this.b.L()},hk.H=function(){return Rd(Qd(this.b))},hk.L=function(){return this.b.L()},hk.tS=function(){return ri(Qd(this.b))},hk.b=null,Si(119,117,ar,_g),hk.O=function(a){return this.d.O(a)},hk.P=function(a){var b;for(b=this.c.b;b!=this.c;){if(Le(b.f,a))return!0;b=b.b}return!1},hk.Q=function(){return new V(this)},hk.R=function(a){return Yf(this,a)},hk.T=function(a,b){return Nh(this,a,b)},hk.U=function(a){var b;return b=Qe(this.d.U(a),22),b?(be(b),b.f):null},hk.L=function(){return this.d.L()},hk.b=!1,Si(121,96,_q,Xb),hk.ab=function(){return this.e},hk.bb=function(){return this.f},hk.cb=function(a){return yd(this,a)},hk.e=null,hk.f=null,Si(120,121,{22:1,25:1},_c,df),hk.b=null,hk.c=null,hk.d=null,Si(122,93,dr,V),hk.J=function(a){var b,c,d;return Qc(a,25)?(b=Qe(a,25),c=b.ab(),Mb(this.b,c)?(d=Yf(this.b,c),Le(b.bb(),d)):!1):!1},hk.H=function(){return new bd(this)},hk.L=function(){return this.b.d.L()},hk.b=null,Si(123,1,{},bd),hk.Z=function(){return this.c!=this.d.b.c},hk.$=function(){return Nf(this)},hk._=function(){if(!this.b)throw new qb(En);be(this.b),this.d.b.d.U(this.b.e),this.b=null},hk.b=null,hk.c=null,hk.d=null,Si(124,6,Wq,hb,Cb);var Zr,$r;Si(128,1,{}),hk.gb=function(){throw new cb},hk.hb=function(){throw new cb},hk.ib=function(){throw new cb},hk.jb=function(){throw new cb},hk.kb=function(){throw new cb},hk.lb=function(){throw new cb},hk.mb=function(){throw new cb},hk.nb=function(){throw new cb},hk.ob=function(){throw new cb},hk.pb=function(){throw new cb},hk.qb=function(){throw new cb},hk.rb=function(){throw new cb},hk.sb=function(){throw new cb},hk.tb=function(){throw new cb},hk.ub=function(){return Y()},hk.vb=function(){throw new cb},hk.xb=function(){throw new cb},hk.yb=function(){return this},hk.zb=function(a){Mc(a,this.wb())},hk.Ab=function(a){Mc(a,this.wb())},hk.Bb=function(){return Z()},hk.Cb=function(){return $()},hk.Db=function(){throw new cb},hk.Eb=function(){return!1},hk.Fb=function(){return!1},hk.Gb=function(){return this},hk.Hb=function(){throw new cb},hk.Ib=function(a){return Dc(a)},hk.Jb=function(a){return Ec(a)},hk.Kb=function(){return this.yb()},hk.Lb=function(a){var b;return b=new A,this.Ab(b,0,!a),b.c.D(b.b)},hk.tS=function(){return Xe(this)},hk.Mb=function(){},hk.c=null;var _r;Si(127,128,{28:1},af),hk.hb=function(){return this.b},hk.ib=function(){return di(this.b)},hk.jb=function(){return!Mh(this.b,(Zj(),Mr))},hk.kb=function(){return!Mh(this.b,(Zj(),Mr))},hk.mb=function(){return mi(Gj(this.b))},hk.nb=function(){return mi(Gj(this.b))},hk.ob=function(){return Ui(this.b)},hk.pb=function(){return Ui(this.b)},hk.rb=function(){return Vi(this.b)},hk.sb=function(){return Vi(this.b)},hk.wb=function(){return Gj(this.b)},hk.eQ=function(a){return Qc(a,28)&&Ed(this,Qe(a,28))},hk.zb=function(a){Lc((a.c.y(a.b,op),a),this.b)},hk.hC=function(){return si(this.b)},hk.Mb=function(a){var b;b=this.b,Aj(a,Gj(b))},hk.b=null,Si(129,128,{29:1},xe),hk.hb=function(){return new hc(this.b)},hk.ib=function(){return this.b},hk.jb=function(){return!kh(this.b,(fj(),Tr))},hk.kb=function(){return!kh(this.b,(fj(),Tr))},hk.mb=function(){return mi(dk(this.b,0))},hk.nb=function(){return mi(dk(this.b,0))},hk.ob=function(){return Lb(this.b)},hk.pb=function(){return Lb(this.b)},hk.rb=function(){return Tg(this.b)},hk.sb=function(){return Tg(this.b)},hk.wb=function(){return dk(this.b,0)},hk.eQ=function(a){return Qc(a,29)&&Fd(this,Qe(a,29))},hk.zb=function(a){Lc((a.c.y(a.b,pp),a),this.b)},hk.hC=function(){return hh(this.b)},hk.Mb=function(a){Xf(a,Mj(this.b))},hk.b=null,Si(130,128,{},Wd),hk.hb=function(){return this.b?(Zj(),Lr):(Zj(),Mr)},hk.ib=function(){return this.b?(fj(),Qr):(fj(),Tr)},hk.jb=function(){return this.b},hk.kb=function(){return this.b},hk.lb=function(){return this.b?nf(et,Uq,-1,[1]):nf(et,Uq,-1,[0])},hk.mb=function(){return this.b?1:0},hk.nb=function(){return this.b?1:0},hk.ob=function(){return this.b?1:0},hk.pb=function(){return this.b?1:0},hk.rb=function(){return Gh(this.b?1:0)},hk.sb=function(){return Gh(this.b?1:0)},hk.wb=function(){return se(),lk+this.b},hk.eQ=function(a){return a===this},hk.hC=function(){return(se(),this.b?ur:tr).b?1231:1237},hk.Mb=function(a){rd(a,this.b)},hk.b=!1;var as,bs;Si(131,128,{30:1},ye),hk.hb=function(){return new hc(new Ch(this.b))},hk.ib=function(){return new Ch(this.b)},hk.lb=function(){var a,b;for(a=Oe(et,Uq,-1,this.b.length,1),b=0;b<this.b.length;++b)a[b]=this.b[b];return a},hk.mb=function(){throw new cb},hk.nb=function(){throw new cb},hk.ob=function(){return Wg(this)},hk.pb=function(){return Wg(this)},hk.rb=function(){return rh(this)},hk.sb=function(){return rh(this)},hk.wb=function(){var a;return a=new B,qj(this,a,0,!1),a.c.D(a.b)},hk.eQ=function(a){return Qc(a,30)&&Gd(this,Qe(a,30))},hk.zb=function(a,b,c){qj(this,a,b,c)},hk.Ab=function(a,b,c){ji(a,b,c)},hk.hC=function(){return Kg(this.b)+71},hk.Lb=function(a){var b;return b=new B,ji(b,0,!a),b.c.D(b.b)},hk.Mb=function(a){Xf(a,this.b)},hk.b=null,Si(132,1,{},W),hk.b=null,hk.c=0,Si(133,1,{},cd),hk.b=null,hk.c=0,Si(134,128,{31:1},ze),hk.hb=function(){return new $g(this.b)},hk.ib=function(){return Eh(pj(this.b))},hk.jb=function(){return 0!=this.b},hk.kb=function(){return 0!=this.b},hk.lb=function(){throw new cb},hk.mb=function(){return this.b},hk.nb=function(){return this.b},hk.ob=function(){return bg(this.b)},hk.pb=function(){return bg(this.b)},hk.rb=function(){return pj(this.b)},hk.sb=function(){return pj(this.b)},hk.wb=function(){return lk+this.b},hk.eQ=function(a){return Qc(a,31)&&id(this,Qe(a,31))},hk.hC=function(){return bg(new I(this.b).b)},hk.Mb=function(a){vg(a,this.b)},hk.b=0,Si(135,1,{},m),Si(136,128,{32:1},qg),hk.wb=function(){return this.b},hk.eQ=function(a){return Qc(a,32)&&Dd(this,Qe(a,32))},hk.zb=function(a){Mc((a.c.y(a.b,Fp),a),Pi(this.b))},hk.Ab=function(a,b,c){a.c.z(a.b,zq),c?Ue((a.c.z(a.b,mk),a),b+1):(a.c.z(a.b,ok),a),Mc(a,Qj(Cm)),a.c.y(a.b,qk),Mc(a,Qj(this.b)),c?Ue((a.c.z(a.b,mk),a),b):(a.c.z(a.b,ok),a),a.c.z(a.b,Aq)},hk.hC=function(){return fh(this.b)},hk.Kb=function(){return new Ce(_j(this.b))},hk.Mb=function(a){Aj(a,this.b)},hk.b=null,Si(138,128,{33:1},Ae),hk.hb=function(){return new ad(this.b)},hk.ib=function(){return Eh(Gh(this.b))},hk.jb=function(){return 0!=this.b},hk.kb=function(){return 0!=this.b},hk.lb=function(){var a;return a=Oe(et,Uq,-1,4,1),a[0]=~~(~~this.b>>>24<<24)>>24,a[1]=~~(~~this.b>>>16<<24)>>24,a[2]=~~(~~this.b>>>8<<24)>>24,a[3]=~~(this.b<<24)>>24,a},hk.mb=function(){return this.b},hk.nb=function(){return this.b},hk.ob=function(){return this.b},hk.pb=function(){return this.b},hk.rb=function(){return Gh(this.b)},hk.sb=function(){return Gh(this.b)},hk.wb=function(){return lk+this.b},hk.eQ=function(a){return Qc(a,33)&&kd(this,Qe(a,33))},hk.hC=function(){return this.b},hk.Mb=function(a){ii(a,this.b)},hk.b=0,Si(139,128,{34:1},Ge,Xd,Sh,_e),hk.gb=function(){var a;return a=new E,this.b.I(a),a},hk.jb=function(){return!this.b.K()},hk.kb=function(){return!this.b.K()},hk.ob=function(){return this.b.L()},hk.pb=function(){return this.b.L()},hk.qb=function(){return ge(this.b)},hk.rb=function(){return Gh(this.b.L())},hk.sb=function(){return Gh(this.b.L())},hk.tb=function(){var a,b,c,d,e;for(c=new E,a=this.b.H();a.Z();)b=Qe(a.$(),36),b.d.c==(tj(),os)?(d=b.d.ub(),tf(zg(c,d.b),d.c)):a.Z()&&(e=Qe(a.$(),36),tf(zg(c,b.d.wb()),e));return c},hk.ub=function(){return 2==this.b.L()?new $b(Qe(this.b.eb(0),36).d.wb(),Qe(this.b.eb(1),36)):Y()},hk.vb=function(){var a,b,c,d;for(c=new C,a=this.b.H();a.Z();)b=Qe(a.$(),36),b.d.c==(tj(),os)?xd(c,b.d.ub()):a.Z()&&(d=Qe(a.$(),36),xd(c,new $b(b.d.wb(),d)));return c},hk.wb=function(){var a;return a=new A,dj(this,a,0,!1),a.c.D(a.b)},hk.yb=function(){return new _e(this)},hk.eQ=function(a){return Qc(a,34)&&Jd(this,Qe(a,34))},hk.zb=function(a,b,c){dj(this,a,b,c)},hk.Ab=function(a,b,c){var d,e,f,g;for(g=c&&this.b.L()>1,f=ge(this.b),e=new H(f.c.H()),a.c.z(a.b,Po),g&&Ue((a.c.z(a.b,mk),a),b+1);e.b.Z();)d=Qe(e.b.$(),36),d.d.Ab(a,g?b+1:b,c),e.b.Z()&&(g?Ue((a.c.y(a.b,Mk),a),b+1):(a.c.z(a.b,Lk),a));g&&Ue((a.c.z(a.b,mk),a),b),a.c.z(a.b,jp)},hk.Bb=function(a){var b,c,d;if(c=this.b,d=c.L(),a>=d)for(b=0;a-d+1>b;++b)c.I(new E);return Qe(c.eb(a),36)},hk.Eb=function(a){return a>=0&&a<this.b.L()},hk.hC=function(){return this.b.hC()},hk.Gb=function(){var a,b,c;for(a=this.b,c=a.H();c.Z();)b=Qe(c.$(),36),ae(b);return a.cZ==Ft?new Xd(Qc(a,26)?new Ab(a):new Tb(a)):this},hk.Ib=function(a){try{return Qe(this.b.eb(a),36)}catch(b){if(b=ve(b),Qc(b,14))return Dc(a);throw b}},hk.Kb=function(){var a,b,c;for(a=new jc(this.b.L()),c=this.b.H();c.Z();)b=Qe(c.$(),36),xd(a,pe(b));return new Xd(a)},hk.Mb=function(a){var b,c,d,e;for(b=this.b,e=b.L(),ii(a,e),d=b.H();d.Z();)c=Qe(d.$(),36),Je(c,a)},hk.b=null,Si(140,128,{35:1},Be),hk.hb=function(){return new Jc(this.b)},hk.ib=function(){return Eh(this.b)},hk.jb=function(){return me(this.b,Fq)},hk.kb=function(){return me(this.b,Fq)},hk.lb=function(){var a;return a=Oe(et,Uq,-1,8,1),a[0]=~~(Nb(Ri(this.b,56))<<24)>>24,a[1]=~~(Nb(Ri(this.b,48))<<24)>>24,a[2]=~~(Nb(Ri(this.b,40))<<24)>>24,a[3]=~~(Nb(Ri(this.b,32))<<24)>>24,a[4]=~~(Nb(Ri(this.b,24))<<24)>>24,a[5]=~~(Nb(Ri(this.b,16))<<24)>>24,a[6]=~~(Nb(Ri(this.b,8))<<24)>>24,a[7]=~~(Nb(this.b)<<24)>>24,a},hk.mb=function(){return Uh(this.b)},hk.nb=function(){return Uh(this.b)},hk.ob=function(){return Nb(this.b)},hk.pb=function(){return Nb(this.b)},hk.rb=function(){return this.b},hk.sb=function(){return this.b},hk.wb=function(){return lk+lj(this.b)},hk.eQ=function(a){return Qc(a,35)&&Hd(this,Qe(a,35))},hk.zb=function(a){Pe(wd(a,this.b),76)},hk.hC=function(){return Nb(this.b)},hk.Mb=function(a){sj(a,this.b)},hk.b=Fq,Si(141,1,{36:1,42:1},E,Yb),hk.Nb=function(){return xg(this)},hk.Ob=function(a){return ud(xg(this),a),this},hk.Pb=function(a){return vd(xg(this),a),this},hk.Qb=function(a){return Rf(xg(this),a),this},hk.Rb=function(a,b){return jg(xg(this),a,b),this},hk.Sb=function(a,b){return kg(xg(this),a,b),this},hk.Tb=function(a,b){return Gf(xg(this),a,b),this},hk.Ub=function(a,b){return Zd(xg(this),a,b),this},hk.Vb=function(a,b){return wg(xg(this),a,b),this},hk.Wb=function(a){return tf(xg(this),a),this},hk.Xb=function(a){return de(xg(this),a),this},hk.Yb=function(){var a;return a=xg(this),Fc(a),a.d=new Ge,a},hk.Zb=function(){var a;return a=xg(this),Fc(a),a.d=new He,a},hk.$b=function(a){return Sf(xg(this),a),this},hk.hb=function(){return this.d.hb()},hk.ib=function(){return this.d.ib()},hk.jb=function(){return this.d.jb()},hk.kb=function(a){return this.d.kb(a)},hk.lb=function(){return this.d.lb()},hk.mb=function(){return this.d.mb()},hk.nb=function(a){return this.d.nb(a)},hk.ob=function(){return this.d.ob()},hk.pb=function(a){return this.d.pb(a)},hk.qb=function(){return this.d.qb()},hk.tb=function(){return this.d.tb()},hk.ub=function(){return this.d.ub()},hk.vb=function(){return this.d.vb()},hk.wb=function(){return this.d.wb()},hk.xb=function(){return this.d.xb()},hk._b=function(){return Fc(this),this.d=(ed(),_r),this},hk.ac=function(){return oe(this)},hk.eQ=function(a){return Qc(a,36)&&Ld(this,Qe(a,36))},hk.bc=function(a){return Ld(this,a)},hk.cc=function(a){return yg(this,a)},hk.dc=function(a){return zg(this,a)},hk.ec=function(){var a;return a=this.d.Fb(Hp)&&zg(this,Hp).d.c!=(tj(),rs)?zg(this,Hp).d.wb():Fn},hk.fc=function(a){return this.c?this.c.R(a):null},hk.gc=function(){return this.d.c},hk.Eb=function(a){return this.d.Eb(a)},hk.Fb=function(a){return this.d.Fb(a)},hk.hc=function(a){return this.d.Eb(a)&&yg(this,a).d.c!=(tj(),rs)},hk.ic=function(a){return this.d.Fb(a)&&zg(this,a).d.c!=(tj(),rs)},hk.hC=function(){return this.d.hC()},hk.jc=function(){return this.d.c!=(tj(),rs)},hk.kc=function(){return this.d.Fb(mq)&&zg(this,mq).d.c!=(tj(),rs)&&!Re(zg(this,mq).d.wb(),sq)},hk.lc=function(){return this.d.Db()},hk.mc=function(){ae(this)},hk.nc=function(a){ak(this,a)},hk.oc=function(a){return this.d.Hb(a)},hk.pc=function(a){return this.d.Ib(a)},hk.qc=function(a){return this.d.Jb(a)},hk.rc=function(){return pe(this)},hk.sc=function(a){return ud(this,a)},hk.tc=function(a){return vd(this,a)},hk.uc=function(a){return Rf(this,a)},hk.vc=function(a,b){return jg(this,a,b)},hk.wc=function(a,b){return kg(this,a,b)},hk.xc=function(a,b){return Gf(this,a,b)},hk.yc=function(a,b){return Zd(this,a,b)},hk.zc=function(a,b){var c;return Fc(this),c=new E,lf(c,b),this.d=new Td(a,c),this},hk.Ac=function(a,b){return wg(this,a,b)},hk.Bc=function(a){return tf(this,a)},hk.Cc=function(a){return lf(this,a)},hk.Dc=function(a){return de(this,a)},hk.Ec=function(){return Fc(this),this.d=new Ge,this},hk.Fc=function(){return Fc(this),this.d=new He,this},hk.Gc=function(a){return Sf(this,a)},hk.Hc=function(a,b){var c;return Fc(this),c=new E,Sf(c,b),this.d=new Td(a,c),this},hk.Ic=function(a,b){!this.c&&(this.c=new Bb(2)),this.c.T(a,b)},hk.Jc=function(){var a,b;b=new cd;try{Je(this,b)}catch(c){throw c=ve(c),Qc(c,4)?(a=c,new rb(a)):c}return Og(ig(b))},hk.Kc=function(){return this.d.Lb(!1)},hk.Lb=function(a){return this.d.Lb(a)},hk.tS=function(){return Xe(this.d)},hk.Mb=function(a){Je(this,a)},hk.b=!1,hk.c=null,Si(142,1,{},y);var cs=!1;Si(143,63,{5:1,10:1,12:1,37:1},Cd),hk.b=0;var ds,es,fs,gs,hs,is,js,ks,ls,ms,ns,os,ps,qs,rs,ss;Si(145,128,{},Db),hk.kb=function(a){return a},hk.nb=function(a){return a},hk.pb=function(a){return a},hk.sb=function(a){return a},hk.wb=function(){return vq},hk.eQ=function(a){return a===this},hk.Ab=function(a){a.c.y(a.b,dq)},hk.hC=function(){return 7113},Si(146,128,{38:1},He,Vd,Th),hk.jb=function(){return!this.b.K()},hk.kb=function(){return!this.b.K()},hk.ob=function(){return this.b.L()},hk.pb=function(){return this.b.L()},hk.qb=function(){var a,b,c,d;for(d=new C,b=this.b.Q().H();b.Z();)a=Qe(b.$(),25),c=new E,Zd(c,Qe(a.ab(),1),Qe(a.bb(),36)),Li(d.b,d.c++,c);return d},hk.rb=function(){return Gh(this.b.L())},hk.sb=function(){return Gh(this.b.L())},hk.tb=function(){return new Yb(ai(this,!1))},hk.ub=function(){var a;return 1==this.b.L()?(a=Qe(this.b.Q().H().$(),25),new $b(Qe(a.ab(),1),Qe(a.bb(),36))):Y()},hk.vb=function(){var a,b,c;for(c=new C,b=this.b.Q().H();b.Z();)a=Qe(b.$(),25),xd(c,new $b(Qe(a.ab(),1),Qe(a.bb(),36)));return c},hk.wb=function(){var a;return a=new A,kj(this,a,0,!1),a.c.D(a.b)},hk.yb=function(){return ai(this,!1)},hk.eQ=function(a){return Qc(a,38)&&Kd(this,Qe(a,38))},hk.zb=function(a,b,c){kj(this,a,b,c)},hk.Ab=function(a,b,c){var d,e,f,g;for(a.c.z(a.b,zq),f=c&&this.b.L()>1,f&&Ue((a.c.z(a.b,mk),a),b+1),e=this.b.Q().H();e.Z();)d=Qe(e.$(),25),Mc(a,Pi(Qe(d.ab(),1))),a.c.y(a.b,qk),g=Qe(d.bb(),36),g.d.Ab(a,f?b+1:b,c),e.Z()&&(f?Ue((a.c.y(a.b,Mk),a),b+1):(a.c.y(a.b,Nk),a));f&&Ue((a.c.z(a.b,mk),a),b),a.c.z(a.b,Aq)},hk.Cb=function(a){var b,c;return null==a?null:(c=Qe(this.b.R(a),36))?c:(b=new E,this.b.T(a,b),b)},hk.Db=function(){return this.b.S()},hk.Fb=function(a){return this.b.O(a)},hk.hC=function(){return this.b.hC()},hk.Gb=function(){var a,b,c;for(a=this.b,c=a.V().H();c.Z();)b=Qe(c.$(),36),ae(b);return a.cZ==Gt?new Vd(new P(a)):this},hk.Hb=function(a){return null==a?null:Qe(this.b.U(a),36)},hk.Jb=function(a){var b;return b=Qe(this.b.R(a),36),b?b:Ec(a)},hk.Kb=function(){return ai(this,!0)},hk.Mb=function(a){var b,c,d,e;for(d=this.b,e=d.L(),ii(a,e),c=d.Q().H();c.Z();)b=Qe(c.$(),25),Aj(a,Qe(b.ab(),1)),Je(Qe(b.bb(),36),a)},hk.b=null,Si(147,1,{},$b,Eg),hk.b=null,hk.c=null,Si(148,128,{39:1},Td,Ud,Ng),hk.qb=function(){return new G(new Yb(this))},hk.tb=function(){var a;return a=new E,tf(zg(a,this.b.b),this.b.c),a},hk.ub=function(){return this.b},hk.vb=function(){return new G(this.b)},hk.wb=function(){return Ek+Pi(this.b.b)+rk+this.b.c+Gk},hk.yb=function(){return new Td(this.b.b,this.b.c)},hk.eQ=function(a){return Qc(a,39)&&jf(this,Qe(a,39))},hk.Ab=function(a,b,c){a.c.z(a.b,zq),c?Ue((a.c.z(a.b,mk),a),b+1):(a.c.z(a.b,ok),a),Mc(a,Qj(Pn)),a.c.y(a.b,qk),a.c.z(a.b,zq),c?Ue((a.c.z(a.b,mk),a),b+1+1):(a.c.z(a.b,ok),a),Mc(a,Qj(this.b.b)),a.c.y(a.b,qk),oc(this.b.c,a,b+1+1,c),c?Ue((a.c.z(a.b,mk),a),b+1):(a.c.z(a.b,ok),a),a.c.z(a.b,Aq),c?Ue((a.c.z(a.b,mk),a),b):(a.c.z(a.b,ok),a),a.c.z(a.b,Aq)},hk.Bb=function(a){return 0==a?this.b.c:Z()},hk.Cb=function(a){return Re(this.b.b,a)?this.b.c:$()},hk.Db=function(){return Ie(this.b.b)},hk.Fb=function(a){return Re(a,this.b.b)},hk.hC=function(){return 31*fh(this.b.b)+this.b.c.d.hC()},hk.Gb=function(){return ae(this.b.c),this},hk.Jb=function(a){return Re(this.b.b,a)?this.b.c:Ec(a)},hk.Kb=function(){return new Td(this.b.b,pe(this.b.c))},hk.Mb=function(a){Aj(a,this.b.b),Je(this.b.c,a)},hk.b=null,Si(149,128,{40:1},Ce),hk.hb=function(){return new yb(this.b)},hk.ib=function(){return new ic(this.b)},hk.jb=function(){return se(),Dg(uq,this.b)},hk.kb=function(){return se(),Dg(uq,this.b)},hk.lb=function(){try{return Gg(this.b,Bo)}catch(a){if(a=ve(a),Qc(a,6))return bj(this.b);throw a}},hk.mb=function(){return mi(this.b)},hk.nb=function(){return mi(this.b)},hk.ob=function(){return ij(this.b)},hk.pb=function(){return ij(this.b)},hk.rb=function(){return Xj(this.b)},hk.sb=function(){return Xj(this.b)},hk.wb=function(){return this.b},hk.xb=function(){return fd(this.b)},hk.eQ=function(a){return Qc(a,40)&&Id(this,Qe(a,40))},hk.zb=function(a){Mc(a,Pi(this.b))},hk.Ab=function(a){Mc(a,Qj(this.b))},hk.hC=function(){return fh(this.b)},hk.Mb=function(a){Aj(a,this.b)},hk.b=null,Si(150,128,{41:1},Yd),hk.jb=function(){return this.b!=(tj(),rs)},hk.kb=function(){return this.b!=(tj(),rs)},hk.wb=function(){return this.b.c},hk.xb=function(){return this.b},hk.eQ=function(a){return Qc(a,41)&&jd(this,Qe(a,41))},hk.Ab=function(a,b,c){a.c.z(a.b,zq),c?Ue((a.c.z(a.b,mk),a),b+1):(a.c.z(a.b,ok),a),Mc(a,Qj(wo)),a.c.y(a.b,qk),Mc(a,Qj(this.b.c)),c?Ue((a.c.z(a.b,mk),a),b):(a.c.z(a.b,ok),a),a.c.z(a.b,Aq)},hk.hC=function(){return Sc(this.b)},hk.Mb=function(a){_d(a,this.b.b)},hk.b=null;var ts,us,vs,ws,xs,ys,zs,As,Bs,Cs,Ds;Si(151,1,{},z),Si(153,1,{}),Si(152,153,{},Fe);{var Es,Fs=dg,Gs=Lf(Vp,Ln,1,null),Hs=Lf(wp,fn,9,Gs),Is=vf(Sp,vk),Js=Qg(lk,To,163,Is),Ks=Qg(Wo,Mn,161,Gs),Ls=Lf(Vp,xo,8,Gs),Ms=Lf(Vp,Em,7,Ls),Ns=Lf(Vp,Un,6,Ms),Os=Lf(Vp,io,75,Gs),Ps=Qg(Wo,jo,164,Os),Qs=Lf(yp,on,40,Gs),Rs=Qg(Vo,pn,165,Qs),Ss=(Lf(yp,Zn,41,Gs),Lf(Vp,Dm,63,Gs)),Ts=(Lf(Vp,Vl,57,Gs),vf(rp,sk)),Us=Lf(Vp,In,62,Gs),Vs=vf(tp,tk),Ws=Qg(lk,Ro,166,Vs),Xs=vf(Yp,wk),Ys=Qg(lk,Uo,167,Xs),Zs=Lf(Vp,fm,59,Gs),$s=vf(Ep,uk),_s=Qg(lk,So,168,$s),at=(Lf(Vp,wm,61,Us),Lf(Vp,$m,67,Us)),bt=Qg(Wo,_m,169,at),ct=Lf(Vp,ko,2,Gs),dt=Qg(Wo,mo,162,ct),et=Qg(lk,Qo,157,Ts),ft=(Lf(iq,Fm,135,Gs),Lf(Vp,gm,60,Ns),Lf(Vp,so,78,Gs),Lf(Vp,Fl,56,Ns),Lf(wp,en,5,Ns),Lf(Ap,Io,48,Gs),Lf(Ap,Jo,49,Gs),Lf(Ap,Ho,47,Gs),Lf(Ap,Ko,50,Gs),Lf(Ap,Lo,51,Gs),Lf(Ap,Mo,52,Gs),Lf(Vp,Cl,55,Ns),Lf(xp,oo,24,Gs)),gt=Lf(lq,Jm,153,Gs),ht=(Lf(lq,Im,152,gt),uf(lq,Hm)),it=(Lf(lq,Gm,151,Gs),Lf(xp,co,19,Gs)),jt=Lf(xp,go,21,it),kt=Lf(xp,eo,20,jt),lt=(Lf(xp,fo,22,kt),Lf(xp,ho,23,jt),Lf(xp,ro,27,ft)),mt=(Lf(xp,qo,26,lt),Lf(xp,po,25,ft),Lf(wp,Xn,14,Gs)),nt=(Lf(xp,Yn,16,mt),Lf(Xp,tl,91,Gs)),ot=Lf(Xp,ml,90,nt),pt=Lf(Xp,ll,89,Gs),qt=Lf(Xp,zl,93,pt),rt=(Lf(Xp,nl,92,qt),Lf(Xp,ol,94,Gs),Lf(Xp,yl,96,Gs)),st=(Lf(Xp,pl,95,rt),Lf(Xp,ql,97,rt),Lf(Xp,ul,100,qt),Lf(Xp,vl,101,Gs),Lf(Xp,wl,102,pt),Lf(Xp,xl,103,Gs),Lf(Vp,Hn,71,Ns),Lf(Vp,Tm,64,Ns)),tt=Lf(Xp,Nm,117,ot),ut=(Lf(iq,tn,142,Gs),Lf(iq,sn,141,Gs)),vt=Lf(Xp,rn,121,rt),wt=Lf(Wp,Ol,82,Us),xt=Qg(Xo,Pl,170,wt),yt=Lf(Wp,Rl,83,Us),zt=Qg(Xo,Tl,171,yt),At=(Lf(iq,Qn,147,Gs),lg(iq,un,143,Ss,xb)),Bt=Qg(Yo,vn,172,At),Ct=(Lf(iq,sm,132,Gs),Lf(Up,Qm,53,Ms)),Dt=(Lf(Xp,Gn,124,Ns),Lf(iq,tm,133,Gs),Lf(Vp,no,77,Gs),Lf(iq,wn,128,Gs)),Et=(Lf(iq,xn,145,Dt),Lf(iq,nn,139,Dt),Lf(Xp,rl,98,pt)),Ft=Lf(Xp,El,104,Et),Gt=(Lf(Vp,Um,65,Ns),Lf(iq,Ql,127,Dt),Lf(iq,Ul,129,Dt),Lf(iq,Wl,130,Dt),Lf(iq,Xl,131,Dt),Lf(iq,xm,134,Dt),Lf(iq,Km,136,Dt),Lf(iq,Zm,138,Dt),Lf(iq,qn,140,Dt),Lf(iq,Nn,146,Dt),Lf(Xp,jn,119,tt)),Ht=(Lf(iq,Rn,148,Dt),Lf(iq,uo,149,Dt),Lf(iq,yo,150,Dt),Lf(Xp,sl,99,Gs),Lf(Vp,Go,81,Ns),Lf(Vp,Jn,74,st),Lf(Xp,kn,120,vt),Lf(Xp,ln,122,qt),Lf(Xp,mn,123,Gs),Lf(Xp,hm,107,Et),Lf(Xp,im,108,Gs)),It=Lf(Xp,km,110,Ht),Jt=(Lf(Xp,lm,111,Gs),Lf(Xp,qm,113,Ht)),Kt=(Lf(Xp,mm,112,Jt),Lf(Xp,om,115,Gs),Lf(Xp,pm,116,It),Lf(Xp,jm,109,Gs),Lf(Xp,nm,114,Gs),Lf(Vp,Wm,66,Ns));Lf(Up,Fo,54,Ct),Lf(Xp,Om,118,qt),Lf(Vp,to,79,Kt)}dmr_js&&dmr_js.onScriptLoad(oh)}(),!function(){"use strict";var a,b=function(){var a=/\-([a-z])/g,b=function(a,b){return b.toUpperCase()};return function(c){return c.replace(a,b)}}(),c=function(a,c){var d,e,f,g,h,i;if(window.getComputedStyle?d=window.getComputedStyle(a,null).getPropertyValue(c):(e=b(c),d=a.currentStyle?a.currentStyle[e]:a.style[e]),"cursor"===c&&(!d||"auto"===d))for(f=a.tagName.toLowerCase(),g=["a"],h=0,i=g.length;i>h;h++)if(f===g[h])return"pointer";return d},d=function(a){if(p.prototype._singleton){a||(a=window.event);var b;this!==window?b=this:a.target?b=a.target:a.srcElement&&(b=a.srcElement),p.prototype._singleton.setCurrent(b)}},e=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},f=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},g=function(a,b){if(a.addClass)return a.addClass(b),a;if(b&&"string"==typeof b){var c=(b||"").split(/\s+/);if(1===a.nodeType)if(a.className){for(var d=" "+a.className+" ",e=a.className,f=0,g=c.length;g>f;f++)d.indexOf(" "+c[f]+" ")<0&&(e+=" "+c[f]);a.className=e.replace(/^\s+|\s+$/g,"")}else a.className=b}return a},h=function(a,b){if(a.removeClass)return a.removeClass(b),a;if(b&&"string"==typeof b||void 0===b){var c=(b||"").split(/\s+/);if(1===a.nodeType&&a.className)if(b){for(var d=(" "+a.className+" ").replace(/[\n\t]/g," "),e=0,f=c.length;f>e;e++)d=d.replace(" "+c[e]+" "," ");a.className=d.replace(/^\s+|\s+$/g,"")}else a.className=""}return a},i=function(){var a,b,c,d=1;return"function"==typeof document.body.getBoundingClientRect&&(a=document.body.getBoundingClientRect(),b=a.right-a.left,c=document.body.offsetWidth,d=Math.round(100*(b/c))/100),d},j=function(a){var b={left:0,top:0,width:0,height:0,zIndex:999999999},d=c(a,"z-index");if(d&&"auto"!==d&&(b.zIndex=parseInt(d,10)),a.getBoundingClientRect){var e,f,g,h=a.getBoundingClientRect();"pageXOffset"in window&&"pageYOffset"in window?(e=window.pageXOffset,f=window.pageYOffset):(g=i(),e=Math.round(document.documentElement.scrollLeft/g),f=Math.round(document.documentElement.scrollTop/g));var j=document.documentElement.clientLeft||0,k=document.documentElement.clientTop||0;b.left=h.left+e-j,b.top=h.top+f-k,b.width="width"in h?h.width:h.right-h.left,b.height="height"in h?h.height:h.bottom-h.top}return b},k=function(a,b){var c=!(b&&b.useNoCache===!1);return c?(-1===a.indexOf("?")?"?":"&")+"nocache="+(new Date).getTime():""},l=function(a){var b=[],c=[];return a.trustedOrigins&&("string"==typeof a.trustedOrigins?c.push(a.trustedOrigins):"object"==typeof a.trustedOrigins&&"length"in a.trustedOrigins&&(c=c.concat(a.trustedOrigins))),a.trustedDomains&&("string"==typeof a.trustedDomains?c.push(a.trustedDomains):"object"==typeof a.trustedDomains&&"length"in a.trustedDomains&&(c=c.concat(a.trustedDomains))),c.length&&b.push("trustedOrigins="+encodeURIComponent(c.join(","))),"string"==typeof a.amdModuleId&&a.amdModuleId&&b.push("amdModuleId="+encodeURIComponent(a.amdModuleId)),"string"==typeof a.cjsModuleId&&a.cjsModuleId&&b.push("cjsModuleId="+encodeURIComponent(a.cjsModuleId)),b.join("&")},m=function(a,b){if(b.indexOf)return b.indexOf(a);for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c;return-1},n=function(a){if("string"==typeof a)throw new TypeError("ZeroClipboard doesn't accept query strings.");return a.length?a:[a]},o=function(a,b,c,d,e){e?window.setTimeout(function(){a.call(b,c,d)},0):a.call(b,c,d)},p=function(a,b){if(a&&(p.prototype._singleton||this).glue(a),p.prototype._singleton)return p.prototype._singleton;p.prototype._singleton=this,this.options={};for(var c in s)this.options[c]=s[c];for(var d in b)this.options[d]=b[d];this.handlers={},p.detectFlashSupport()&&v()},q=[];p.prototype.setCurrent=function(b){a=b,this.reposition();var d=b.getAttribute("title");d&&this.setTitle(d);var e=this.options.forceHandCursor===!0||"pointer"===c(b,"cursor");return r.call(this,e),this},p.prototype.setText=function(a){return a&&""!==a&&(this.options.text=a,this.ready()&&this.flashBridge.setText(a)),this},p.prototype.setTitle=function(a){return a&&""!==a&&this.htmlBridge.setAttribute("title",a),this},p.prototype.setSize=function(a,b){return this.ready()&&this.flashBridge.setSize(a,b),this},p.prototype.setHandCursor=function(a){return a="boolean"==typeof a?a:!!a,r.call(this,a),this.options.forceHandCursor=a,this};var r=function(a){this.ready()&&this.flashBridge.setHandCursor(a)};p.version="1.2.3";var s={moviePath:"ZeroClipboard.swf",trustedOrigins:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain",useNoCache:!0,forceHandCursor:!1};p.setDefaults=function(a){for(var b in a)s[b]=a[b]},p.destroy=function(){p.prototype._singleton.unglue(q);var a=p.prototype._singleton.htmlBridge;a.parentNode.removeChild(a),delete p.prototype._singleton},p.detectFlashSupport=function(){var a=!1;if("function"==typeof ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){}return!a&&navigator.mimeTypes["application/x-shockwave-flash"]&&(a=!0),a};var t=null,u=null,v=function(){var a,b,c=p.prototype._singleton,d=document.getElementById("global-zeroclipboard-html-bridge");if(!d){var e={};for(var f in c.options)e[f]=c.options[f];e.amdModuleId=t,e.cjsModuleId=u;var g=l(e),h='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+c.options.moviePath+k(c.options.moviePath,c.options)+'"/>         <param name="allowScriptAccess" value="'+c.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+g+'"/>         <embed src="'+c.options.moviePath+k(c.options.moviePath,c.options)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+g+'"           scale="exactfit">         </embed>       </object>';
d=document.createElement("div"),d.id="global-zeroclipboard-html-bridge",d.setAttribute("class","global-zeroclipboard-container"),d.setAttribute("data-clipboard-ready",!1),d.style.position="absolute",d.style.left="-9999px",d.style.top="-9999px",d.style.width="15px",d.style.height="15px",d.style.zIndex="9999",d.innerHTML=h,document.body.appendChild(d)}c.htmlBridge=d,a=document["global-zeroclipboard-flash-bridge"],a&&(b=a.length)&&(a=a[b-1]),c.flashBridge=a||d.children[0].lastElementChild};p.prototype.resetBridge=function(){return this.htmlBridge.style.left="-9999px",this.htmlBridge.style.top="-9999px",this.htmlBridge.removeAttribute("title"),this.htmlBridge.removeAttribute("data-clipboard-text"),h(a,this.options.activeClass),a=null,this.options.text=null,this},p.prototype.ready=function(){var a=this.htmlBridge.getAttribute("data-clipboard-ready");return"true"===a||a===!0},p.prototype.reposition=function(){if(!a)return!1;var b=j(a);return this.htmlBridge.style.top=b.top+"px",this.htmlBridge.style.left=b.left+"px",this.htmlBridge.style.width=b.width+"px",this.htmlBridge.style.height=b.height+"px",this.htmlBridge.style.zIndex=b.zIndex+1,this.setSize(b.width,b.height),this},p.dispatch=function(a,b){p.prototype._singleton.receiveEvent(a,b)},p.prototype.on=function(a,b){for(var c=a.toString().split(/\s/g),d=0;d<c.length;d++)a=c[d].toLowerCase().replace(/^on/,""),this.handlers[a]||(this.handlers[a]=b);return this.handlers.noflash&&!p.detectFlashSupport()&&this.receiveEvent("onNoFlash",null),this},p.prototype.addEventListener=p.prototype.on,p.prototype.off=function(a,b){for(var c=a.toString().split(/\s/g),d=0;d<c.length;d++){a=c[d].toLowerCase().replace(/^on/,"");for(var e in this.handlers)e===a&&this.handlers[e]===b&&delete this.handlers[e]}return this},p.prototype.removeEventListener=p.prototype.off,p.prototype.receiveEvent=function(b,c){b=b.toString().toLowerCase().replace(/^on/,"");var d=a,e=!0;switch(b){case"load":if(c&&parseFloat(c.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))<10)return void this.receiveEvent("onWrongFlash",{flashVersion:c.flashVersion});this.htmlBridge.setAttribute("data-clipboard-ready",!0);break;case"mouseover":g(d,this.options.hoverClass);break;case"mouseout":h(d,this.options.hoverClass),this.resetBridge();break;case"mousedown":g(d,this.options.activeClass);break;case"mouseup":h(d,this.options.activeClass);break;case"datarequested":var f=d.getAttribute("data-clipboard-target"),i=f?document.getElementById(f):null;if(i){var j=i.value||i.textContent||i.innerText;j&&this.setText(j)}else{var k=d.getAttribute("data-clipboard-text");k&&this.setText(k)}e=!1;break;case"complete":this.options.text=null}if(this.handlers[b]){var l=this.handlers[b];"string"==typeof l&&"function"==typeof window[l]&&(l=window[l]),"function"==typeof l&&o(l,d,this,c,e)}},p.prototype.glue=function(a){a=n(a);for(var b=0;b<a.length;b++)-1==m(a[b],q)&&(q.push(a[b]),e(a[b],"mouseover",d));return this},p.prototype.unglue=function(a){a=n(a);for(var b=0;b<a.length;b++){f(a[b],"mouseover",d);var c=m(a[b],q);-1!=c&&q.splice(c,1)}return this},"function"==typeof define&&define.amd?define(["require","exports","module"],function(a,b,c){return t=c&&c.id||null,p}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?(u=module.id||null,module.exports=p):window.ZeroClipboard=p}(),!function(a,b){return"function"==typeof define&&define.amd?void define("angular-file-upload",["angular"],function(a){return b(a)}):b(a)}("undefined"==typeof angular?null:angular,function(a){var b=a.module("angularFileUpload",[]);return b.value("fileUploaderOptions",{url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}).factory("FileUploader",["fileUploaderOptions","$rootScope","$http","$window","$compile",function(b,c,d,e,f){function g(c){var d=a.copy(b);a.extend(this,d,c,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}function h(a){var b=a;this.lastModifiedDate=null,this.size=null,this.type="like/"+b.slice(b.lastIndexOf(".")+1).toLowerCase(),this.name=b.slice(b.lastIndexOf("/")+b.lastIndexOf("\\")+2)}function i(b,c,d,e){c=b._getFileOrFileLikeObject(c),a.extend(this,{url:b.url,alias:b.alias,headers:a.copy(b.headers),formData:a.copy(b.formData),removeAfterUpload:b.removeAfterUpload,withCredentials:b.withCredentials,method:b.method},d,{uploader:b,file:a.copy(c),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:c}),e&&(this._input=a.element(e),this._replaceNode(this._input))}function j(b){a.extend(this,b),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}function k(){k.super_.apply(this,arguments),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}function l(){l.super_.apply(this,arguments)}function m(){m.super_.apply(this,arguments)}return g.prototype.isHTML5=!(!e.File||!e.FormData),g.prototype.addToQueue=function(b,c,d){var e=a.isElement(b)?[b]:b,f=this._getFilters(d),h=this.queue.length,i=[];a.forEach(e,function(a){var b=this._getFileOrFileLikeObject(a);if(this._isValidFile(b,f,c)){var d=this.isFile(b)?null:a,e=new g.FileItem(this,b,c,d);i.push(e),this.queue.push(e),this._onAfterAddingFile(e)}else{var h=this.filters[this._failFilterIndex];this._onWhenAddingFileFailed(b,h,c)}},this),this.queue.length!==h&&(this._onAfterAddingAll(i),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()},g.prototype.removeFromQueue=function(a){var b=this.getIndexOfItem(a),c=this.queue[b];c.isUploading&&c.cancel(),this.queue.splice(b,1),c._destroy(),this.progress=this._getTotalProgress()},g.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},g.prototype.uploadItem=function(a){var b=this.getIndexOfItem(a),c=this.queue[b],d=this.isHTML5?"_xhrTransport":"_iframeTransport";c._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[d](c))},g.prototype.cancelItem=function(a){var b=this.getIndexOfItem(a),c=this.queue[b],d=this.isHTML5?"_xhr":"_form";c&&c.isUploading&&c[d].abort()},g.prototype.uploadAll=function(){var b=this.getNotUploadedItems().filter(function(a){return!a.isUploading});b.length&&(a.forEach(b,function(a){a._prepareToUploading()}),b[0].upload())},g.prototype.cancelAll=function(){var b=this.getNotUploadedItems();a.forEach(b,function(a){a.cancel()})},g.prototype.isFile=function(a){var b=e.File;return b&&a instanceof b},g.prototype.isFileLikeObject=function(a){return a instanceof g.FileLikeObject},g.prototype.getIndexOfItem=function(b){return a.isNumber(b)?b:this.queue.indexOf(b)},g.prototype.getNotUploadedItems=function(){return this.queue.filter(function(a){return!a.isUploaded})},g.prototype.getReadyItems=function(){return this.queue.filter(function(a){return a.isReady&&!a.isUploading}).sort(function(a,b){return a.index-b.index})},g.prototype.destroy=function(){a.forEach(this._directives,function(b){a.forEach(this._directives[b],function(a){a.destroy()},this)},this)},g.prototype.onAfterAddingAll=function(){},g.prototype.onAfterAddingFile=function(){},g.prototype.onWhenAddingFileFailed=function(){},g.prototype.onBeforeUploadItem=function(){},g.prototype.onProgressItem=function(){},g.prototype.onProgressAll=function(){},g.prototype.onSuccessItem=function(){},g.prototype.onErrorItem=function(){},g.prototype.onCancelItem=function(){},g.prototype.onCompleteItem=function(){},g.prototype.onCompleteAll=function(){},g.prototype._getTotalProgress=function(a){if(this.removeAfterUpload)return a||0;var b=this.getNotUploadedItems().length,c=b?this.queue.length-b:this.queue.length,d=100/this.queue.length,e=(a||0)*d/100;return Math.round(c*d+e)},g.prototype._getFilters=function(b){if(a.isUndefined(b))return this.filters;if(a.isArray(b))return b;var c=b.split(/\s*,/);return this.filters.filter(function(a){return-1!==c.indexOf(a.name)},this)},g.prototype._render=function(){c.$$phase||c.$apply()},g.prototype._folderFilter=function(a){return!(!a.size&&!a.type)},g.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},g.prototype._isValidFile=function(a,b,c){return this._failFilterIndex=-1,b.length?b.every(function(b){return this._failFilterIndex++,b.fn.call(this,a,c)},this):!0},g.prototype._getFileOrFileLikeObject=function(a){return this.isFile(a)||this.isFileLikeObject(a)?a:new g.FileLikeObject(a.value)},g.prototype._isSuccessCode=function(a){return a>=200&&300>a||304===a},g.prototype._transformResponse=function(b){return a.forEach(d.defaults.transformResponse,function(a){b=a(b)}),b},g.prototype._parseHeaders=function(b){function c(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")}function d(a){return a.toLowerCase()}var e,f,g,h={};return b?(a.forEach(b.split("\n"),function(a){g=a.indexOf(":"),e=d(c(a.substr(0,g))),f=c(a.substr(g+1)),e&&(h[e]=h[e]?h[e]+", "+f:f)}),h):h},g.prototype._xhrTransport=function(b){var c=b._xhr=new XMLHttpRequest,d=new FormData,e=this;e._onBeforeUploadItem(b),a.forEach(b.formData,function(b){a.forEach(b,function(a,b){d.append(b,a)})}),d.append(b.alias,b._file),c.upload.onprogress=function(a){var c=Math.round(a.lengthComputable?100*a.loaded/a.total:0);e._onProgressItem(b,c)},c.onload=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response),f=e._isSuccessCode(c.status)?"Success":"Error",g="_on"+f+"Item";e[g](b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.onerror=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response);e._onErrorItem(b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.onabort=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response);e._onCancelItem(b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.open(b.method,b.url,!0),c.withCredentials=b.withCredentials,a.forEach(b.headers,function(a,b){c.setRequestHeader(b,a)}),c.send(d),this._render()},g.prototype._iframeTransport=function(b){var c=a.element('<form style="display: none;" />'),d=a.element('<iframe name="iframeTransport'+Date.now()+'">'),e=b._input,f=this;b._form&&b._form.replaceWith(e),b._form=c,f._onBeforeUploadItem(b),e.prop("name",b.alias),a.forEach(b.formData,function(b){a.forEach(b,function(b,d){c.append(a.element('<input type="hidden" name="'+d+'" value="'+b+'" />'))})}),c.prop({action:b.url,method:"POST",target:d.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),d.bind("load",function(){try{var a=d[0].contentDocument.body.innerHTML}catch(c){}var e={response:a,status:200,dummy:!0},g=f._transformResponse(e.response),h={};f._onSuccessItem(b,g,e.status,h),f._onCompleteItem(b,g,e.status,h)}),c.abort=function(){var a,g={status:0,dummy:!0},h={};d.unbind("load").prop("src","javascript:false;"),c.replaceWith(e),f._onCancelItem(b,a,g.status,h),f._onCompleteItem(b,a,g.status,h)},e.after(c),c.append(e).append(d),c[0].submit(),this._render()},g.prototype._onWhenAddingFileFailed=function(a,b,c){this.onWhenAddingFileFailed(a,b,c)},g.prototype._onAfterAddingFile=function(a){this.onAfterAddingFile(a)},g.prototype._onAfterAddingAll=function(a){this.onAfterAddingAll(a)},g.prototype._onBeforeUploadItem=function(a){a._onBeforeUpload(),this.onBeforeUploadItem(a)},g.prototype._onProgressItem=function(a,b){var c=this._getTotalProgress(b);this.progress=c,a._onProgress(b),this.onProgressItem(a,b),this.onProgressAll(c),this._render()},g.prototype._onSuccessItem=function(a,b,c,d){a._onSuccess(b,c,d),this.onSuccessItem(a,b,c,d)},g.prototype._onErrorItem=function(a,b,c,d){a._onError(b,c,d),this.onErrorItem(a,b,c,d)},g.prototype._onCancelItem=function(a,b,c,d){a._onCancel(b,c,d),this.onCancelItem(a,b,c,d)},g.prototype._onCompleteItem=function(b,c,d,e){b._onComplete(c,d,e),this.onCompleteItem(b,c,d,e);var f=this.getReadyItems()[0];return this.isUploading=!1,a.isDefined(f)?void f.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())},g.isFile=g.prototype.isFile,g.isFileLikeObject=g.prototype.isFileLikeObject,g.isHTML5=g.prototype.isHTML5,g.inherit=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.super_=b},g.FileLikeObject=h,g.FileItem=i,g.FileDirective=j,g.FileSelect=k,g.FileDrop=l,g.FileOver=m,i.prototype.upload=function(){this.uploader.uploadItem(this)},i.prototype.cancel=function(){this.uploader.cancelItem(this)},i.prototype.remove=function(){this.uploader.removeFromQueue(this)},i.prototype.onBeforeUpload=function(){},i.prototype.onProgress=function(){},i.prototype.onSuccess=function(){},i.prototype.onError=function(){},i.prototype.onCancel=function(){},i.prototype.onComplete=function(){},i.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},i.prototype._onProgress=function(a){this.progress=a,this.onProgress(a)},i.prototype._onSuccess=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(a,b,c)},i.prototype._onError=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(a,b,c)},i.prototype._onCancel=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(a,b,c)},i.prototype._onComplete=function(a,b,c){this.onComplete(a,b,c),this.removeAfterUpload&&this.remove()},i.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},i.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},i.prototype._replaceNode=function(a){var b=f(a.clone())(a.scope());b.prop("value",null),a.css("display","none"),a.after(b)},j.prototype.events={},j.prototype.bind=function(){for(var a in this.events){var b=this.events[a];this.element.bind(a,this[b])}},j.prototype.unbind=function(){for(var a in this.events)this.element.unbind(a,this.events[a])},j.prototype.destroy=function(){var a=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(a,1),this.unbind()},j.prototype._saveLinks=function(){for(var a in this.events){var b=this.events[a];this[b]=this[b].bind(this)}},g.inherit(k,j),k.prototype.events={$destroy:"destroy",change:"onChange"},k.prototype.prop="select",k.prototype.getOptions=function(){},k.prototype.getFilters=function(){},k.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},k.prototype.onChange=function(){var a=this.uploader.isHTML5?this.element[0].files:this.element[0],b=this.getOptions(),c=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(a,b,c),this.isEmptyAfterSelection()&&this.element.prop("value",null)},g.inherit(l,j),l.prototype.events={$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},l.prototype.prop="drop",l.prototype.getOptions=function(){},l.prototype.getFilters=function(){},l.prototype.onDrop=function(b){var c=this._getTransfer(b);if(c){var d=this.getOptions(),e=this.getFilters();this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(c.files,d,e)}},l.prototype.onDragOver=function(b){var c=this._getTransfer(b);this._haveFiles(c.types)&&(c.dropEffect="copy",this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._addOverClass,this))},l.prototype.onDragLeave=function(b){b.target===this.element[0]&&(this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._removeOverClass,this))},l.prototype._getTransfer=function(a){return a.dataTransfer?a.dataTransfer:a.originalEvent.dataTransfer},l.prototype._preventAndStop=function(a){a.preventDefault(),a.stopPropagation()},l.prototype._haveFiles=function(a){return a?a.indexOf?-1!==a.indexOf("Files"):a.contains?a.contains("Files"):!1:!1},l.prototype._addOverClass=function(a){a.addOverClass()},l.prototype._removeOverClass=function(a){a.removeOverClass()},g.inherit(m,j),m.prototype.events={$destroy:"destroy"},m.prototype.prop="over",m.prototype.overClass="nv-file-over",m.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},m.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},m.prototype.getOverClass=function(){return this.overClass},g}]).directive("nvFileSelect",["$parse","FileUploader",function(a,b){return{link:function(c,d,e){var f=c.$eval(e.uploader);if(!(f instanceof b))throw new TypeError('"Uploader" must be an instance of FileUploader');var g=new b.FileSelect({uploader:f,element:d});g.getOptions=a(e.options).bind(g,c),g.getFilters=function(){return e.filters}}}}]).directive("nvFileDrop",["$parse","FileUploader",function(a,b){return{link:function(c,d,e){var f=c.$eval(e.uploader);if(!(f instanceof b))throw new TypeError('"Uploader" must be an instance of FileUploader');if(f.isHTML5){var g=new b.FileDrop({uploader:f,element:d});g.getOptions=a(e.options).bind(g,c),g.getFilters=function(){return e.filters}}}}}]).directive("nvFileOver",["FileUploader",function(a){return{link:function(b,c,d){var e=b.$eval(d.uploader);if(!(e instanceof a))throw new TypeError('"Uploader" must be an instance of FileUploader');var f=new a.FileOver({uploader:e,element:c});f.getOverClass=function(){return d.overClass||this.overClass}}}}]),b}),function(a,b,c){function d(a,b,c,d,e,f,g){this.divId=a,this.className=b,this.metricName=c,this.max=d,this.title=e,this.type=f,this.subTitle=g,this.getMax=function(){return this.max},this.getMetricNode=function(a,b,c){return c[f][a+"."+b]?c[f][a+"."+b]:null},this.getSubTitle=function(){return null!=this.subTitle?this.subTitle:this.title}}function e(a,b){var c=a/b*100;return c.toFixed(0)}function f(a,b){return isNaN(b)&&(b=1),isNaN(a)?b:a.toFixed(b)}function g(a){return a.charAt(0).toUpperCase()+a.slice(1)}function h(a,b,c,e,f,g,h,i){var j=new d(a,b,c,e,f,"timers",g);return j.getMeterInfo=function(){var a=this.divId+" div.timerGraph td.meterGraph",b=new d(a,this.className,this.metricName,this.max,"Frequency","timers",null);return b.getMetricNode=function(a,b,c){return c.timers[a+"."+b]?c.timers[a+"."+b]:null},b.eventType=g,b},j.getTimerStatsDivId=function(){return"#"+this.divId+" div.timerGraph td.timerStatsGraph"},j.getTimerHistogramDivId=function(){return"#"+this.divId+" div.timerGraph td.timerHistogram"},j.durationMax=h,j.isNested=i,j}function i(a){var c=b("#"+a.divId),d="<div class='metricsWatcher counter counterGraph'><div class='heading3'>"+a.title+"</div><div class='progress'><div class='progress-bar' style='width: 0%;'></div></div></div>";c.html(d)}function j(a,c){var d=a.getMetricNode(a.className,a.metricName,c),f=e(d.count,a.getMax(c));b("#"+a.divId+" div.progress div.progress-bar").css("width",f+"%"),b("#"+a.divId+" div.progress div.progress-bar").html(d.count+"/"+a.getMax(c))}function k(a){var c=b("#"+a.divId),d=a.isNested?" nested":"",e="<div class='metricsWatcher timer timerGraph"+d+" col-md-12'><fieldset><legend>"+(a.isNested?"<div class='heading1'>":"<div class='heading1 btn-link' data-toggle='collapse' data-target='#"+a.divId+"Collapse'>")+a.title+"</div></legend><div class='timerContainer col-md-12"+(a.isNested?"":"collapse")+"' id='"+a.divId+"Collapse'><table><tr><td class='meterGraph col-md-4'></td><td class='timerStatsGraph col-md-4'></td><td class='timerHistogram col-md-4'></td></tr></table></div></fieldset>";c.html(e),t(a.getMeterInfo()),l(a),m(a)}function l(a){var c="<div class='heading3'>Duration</div><div class='timeUnit'></div><div class='metricGraph'><table class='progressTable'>"+u("Min","min")+u("Mean","mean")+u("Max","max")+u("Std&nbsp;Dev","stddev")+"</table></div>",d=b(a.getTimerStatsDivId());d.html(c)}function m(a){var c="<div class='heading3'> "+(a.isNested?"Histogram":a.getSubTitle())+"</div><p>Percentiles</p><div class='metricGraph'><table class='progressTable'>"+u("99.9%","p999")+u("99%","p99")+u("98%","p98")+u("95%","p95")+u("75%","p75")+u("50%","p50")+"</table></div>",d=b(a.getTimerHistogramDivId());d.html(c)}function n(a,b){v(a.getMeterInfo(),b),o(a,b),q(a,b)}function o(a,c){var d=a.getMetricNode(a.className,a.metricName,c);if(d){var e=b(a.getTimerStatsDivId()+" div.timeUnit");e.html(g(d.duration_units)),p(a.getTimerStatsDivId(),d,"min",a.durationMax),p(a.getTimerStatsDivId(),d,"mean",a.durationMax),p(a.getTimerStatsDivId(),d,"max",a.durationMax),p(a.getTimerStatsDivId(),d,"stddev",a.durationMax)}}function p(a,c,d,g){b(a+" tr."+d+" td.progressValue").html(f(c[d])),b(a+" tr."+d+" td.progressBar div.progress div.progress-bar").css("width",e(c[d],g)+"%")}function q(a,b){var c=a.getMetricNode(a.className,a.metricName,b);c&&(p(a.getTimerHistogramDivId(),c,"p999",a.durationMax),p(a.getTimerHistogramDivId(),c,"p99",a.durationMax),p(a.getTimerHistogramDivId(),c,"p98",a.durationMax),p(a.getTimerHistogramDivId(),c,"p95",a.durationMax),p(a.getTimerHistogramDivId(),c,"p75",a.durationMax),p(a.getTimerHistogramDivId(),c,"p50",a.durationMax))}function r(a){var c=b("#"+a.divId),d="<div class='metricsWatcher histogram histogramContainer'><div class='heading1 btn-link col-md-12' data-toggle='collapse' data-target='#"+a.divId+"Collapse'> "+(a.isNested?"Histogram":a.title)+"</div><div class='collapse' id='"+a.divId+"Collapse'><table><tr><td class='col-md-4'>Count</td><td class='col-md-4'>Min</td><td class='col-md-4'>Max<td class='col-md-4'>Mean</td></tr><tr><td class='countVal'></td><td class='minVal'></td><td class='meanVal'></td><td class='maxVal'></td></tr></table><p>Percentiles</p><table class='progressTable'>"+u("99.9%","p999")+u("99%","p99")+u("98%","p98")+u("95%","p95")+u("75%","p75")+u("50%","p50")+"</table></div></div>";c.html(d)}function s(a,c){var d=a.getMetricNode(a.className,a.metricName,c);b("#"+a.divId+" td.countVal").html(f(d.count,0)),b("#"+a.divId+" td.minVal").html(f(d.min,0)),b("#"+a.divId+" td.maxVal").html(f(d.max,0)),b("#"+a.divId+" td.meanVal").html(f(d.mean,0)),x(a,d,"p999","p999",a.max),x(a,d,"p99","p99",a.max),x(a,d,"p98","p98",a.max),x(a,d,"p95","p95",a.max),x(a,d,"p75","p75",a.max),x(a,d,"p50","p50",a.max)}function t(a){var c=b("#"+a.divId),d="<div class='metricsWatcher metric metricGraph'><div class='heading3'>"+a.title+"</div><div class='counterVal'></div><table class='progressTable'>"+u("1&nbsp;min","onemin")+u("5&nbsp;min","fivemin")+u("15&nbsp;min","fifteenmin")+u("Mean","mean")+"</table></div>";c.html(d)}function u(a,b){return"<tr class='"+b+"'><td class='progressLabel'>"+a+"</td><td class='progressBar'><div class='progress'><div class='progress-bar' style='width: 0%;'></div></div></td><td class='progressValue'>0</td></tr>"}function v(a,b){var c=a.getMetricNode(a.className,a.metricName,b);c&&w(a,c)}function w(a,c){var d=b("#"+a.divId+" div.counterVal");d.html(c.rate_units+" ("+c.count+" total)");var e=Math.max(c.mean_rate,c.m1_rate,c.m5_rate,c.m15_rate);x(a,c,"mean_rate","mean",e),x(a,c,"m1_rate","onemin",e),x(a,c,"m5_rate","fivemin",e),x(a,c,"m15_rate","fifteenmin",e)}function x(a,b,c,d){x(a,b,c,d,a.max)}function x(a,c,d,g,h){b("#"+a.divId+" tr."+g+" td.progressValue").html(f(c[d])),b("#"+a.divId+" tr."+g+" td.progressBar div.progress div.progress-bar").css("width",e(c[d],h)+"%")}function y(a){var c=b("#"+a.divId),d="<div class='metricsWatcher metric metricGraph'><div class='heading3'>"+a.title+"</span><div class='gaugeDataVal'></div></div>";c.html(d)}function z(a,b){var c=a.getMetricNode(a.className,a.metricName,b);c&&A(a,c)}function A(a,c){var d=b("#"+a.divId+" div.gaugeDataVal");d.html(c.value)}function B(a,c){var d=b("#"+a),e="<div class='metricsWatcher metric metricGraph nested'><fieldset><legend><div class='heading1'>"+c+"</div></legend><div class='gaugeTableContainer'><table class='gaugeTable'></table></div></fieldset></div>";d.html(e)}function C(a,c,d){for(var e=b("#"+a+" table"),f="",g=c.length,h=0;g>h;h++){var i=c[h];f+="<tr><td><h5>"+i.title+"</h5></td><td><h4>"+i.getMetricNode(i.className,i.metricName,d).value+"</h4></td></tr>"}e.html(f)}function D(a){var c=b("#"+a.divId),d="<div class='metricsWatcher cache cacheGraph col-md-12'><fieldset><legend><div class='heading1'>"+a.title+"</div></legend><div class='cacheContainer col-md-12'>	<div class='row'>		<div class='col-md-3'><div id='"+a.divId+"Statistics'></div></div>		<div class='col-md-9'>			<div id='"+a.divId+"gettimer'></div>			<div id='"+a.divId+"puttimer'></div>		</div>	</div></div></fieldset></div>";c.html(d);for(var e=a.components.gauges.length,f=0;e>f;f++)y(a.components.gauges[f]);k(a.getTimer),k(a.putTimer),B(a.divId+"Statistics","Statistics",a.components.gauges)}function E(a,c){for(var d=a.components.gauges.length,e=0;d>e;e++){var f=a.components.gauges[e],g=f.getMetricNode(a.className,f.metricName,c);if(g){var h=b("#"+f.divId+" div.metricGraph div.gaugeDataVal");h.html(g.value)}}n(a.getTimer,c),n(a.putTimer,c),C(a.divId+"Statistics",a.components.gauges,c)}function F(a){var c=b("#"+a.divId),d="<div class='metricsWatcher jvm metricGraph col-md-12'><fieldset><legend><div  class='heading1 btn-link' data-toggle='collapse' data-target='#"+a.divId+"Collapse'>"+a.title+"</div></legend><div class='jvmContainer col-md-12 collapse' id='"+a.divId+"Collapse'>	<div id='"+a.divId+"Vm'></div></div></fieldset></div>";c.html(d)}function G(a,c){var d=b("#"+a.divId+"Vm"),e=c.gauges,g="<div class='row'><div class='col-md-3'><table class='jvmTable'><caption>Memory</caption><tr><td><h5>Total Init</h5></td><td>"+e["jvm.memory.total.init"].value+"</td></tr><tr><td><h5>Total Used</h5></td><td>"+e["jvm.memory.total.used"].value+"</td></tr><tr><td><h5>Total Max</h5></td><td>"+e["jvm.memory.total.max"].value+"</td></tr><tr><td><h5>Total Committed</h5></td><td>"+e["jvm.memory.total.committed"].value+"</td></tr><tr><td><h5>Heap Init</h5></td><td>"+e["jvm.memory.heap.init"].value+"</td></tr><tr><td><h5>Heap Used</h5></td><td>"+e["jvm.memory.heap.used"].value+"</td></tr><tr><td><h5>Heap Max</h5></td><td>"+e["jvm.memory.heap.max"].value+"</td></tr><tr><td><h5>Heap Committed</h5></td><td>"+e["jvm.memory.heap.committed"].value+"</td></tr><tr><td><h5>Non Heap Init</h5></td><td>"+e["jvm.memory.non-heap.init"].value+"</td></tr><tr><td><h5>Non Heap Used</h5></td><td>"+e["jvm.memory.non-heap.used"].value+"</td></tr><tr><td><h5>Non Heap Max</h5></td><td>"+e["jvm.memory.non-heap.max"].value+"</td></tr><tr><td><h5>Non Heap Committed</h5></td><td>"+e["jvm.memory.non-heap.committed"].value+"</td></tr></table></div><div class='col-md-3'><table class='jvmTable'><caption>Memory Usage</caption><tr><td><h5>Heap Usage</h5></td><td>"+(100*e["jvm.memory.heap.usage"].value).toFixed(2)+"</td></tr><tr><td><h5>Non Heap Usage</h5></td><td>"+(100*e["jvm.memory.non-heap.usage"].value).toFixed(2)+"</td></tr>"+(e["jvm.memory.pools.JIT-code-cache.usage"]?"<tr><td><h5>JIT Code Cache Usage</h5></td><td>"+(100*e["jvm.memory.pools.JIT-code-cache.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Code-Cache.usage"]?"<tr><td><h5>JIT Code Cache Usage</h5></td><td>"+(100*e["jvm.memory.pools.Code-Cache.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.JIT-data-cache.usage"]?"<tr><td><h5>JIT Data Cache Usage</h5></td><td>"+(100*e["jvm.memory.pools.JIT-data-cache.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Java-heap.usage"]?"<tr><td><h5>Java Heap Usage</h5></td><td>"+(100*e["jvm.memory.pools.Java-heap.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.class-storage.usage"]?"<tr><td><h5>Class Storage Usage</h5></td><td>"+(100*e["jvm.memory.pools.class-storage.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Perm-Gen.usage"]?"<tr><td><h5>Perm Gen Usage</h5></td><td>"+(100*e["jvm.memory.pools.Perm-Gen.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Tenured-Gen.usage"]?"<tr><td><h5>Tenured Gen Usage</h5></td><td>"+(100*e["jvm.memory.pools.Tenured-Gen.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.miscellaneous-non-heap-storage.usage"]?"<tr><td><h5>Misc Non Heap Storage Usage</h5></td><td>"+(100*e["jvm.memory.pools.miscellaneous-non-heap-storage.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Survivor-Space.usage"]?"<tr><td><h5>Survivor Space Usage</h5></td><td>"+(100*e["jvm.memory.pools.Survivor-Space.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Eden-Space.usage"]?"<tr><td><h5>Eden Space Usage</h5></td><td>"+(100*e["jvm.memory.pools.Eden-Space.usage"].value).toFixed(2)+"</td></tr>":"")+"</table></div><div class='col-md-3'><table class='jvmTable'><caption>Garbage Collection</caption><tr><td><h5>PS Mark Sweep Runs</h5></td><td>"+e["jvm.gc.MarkSweepCompact.count"].value+"</td></tr><tr><td><h5>PS Mark Sweep Time</h5></td><td>"+e["jvm.gc.MarkSweepCompact.time"].value+"</td></tr><tr><td><h5>GC Copy Runs</h5></td><td>"+e["jvm.gc.Copy.count"].value+"</td></tr><tr><td><h5>GC Copy Time</h5></td><td>"+e["jvm.gc.Copy.time"].value+"</td></tr></table></div><div class='col-md-3'><table class='jvmTable'><caption>Threads</caption><tr><td><h5>FD Usage</h5></td><td>"+f(e["jvm.fd.usage"].value,2)+"</td></tr><tr><td><h5>Daemon Threads</h5></td><td>"+e["jvm.thread-states.daemon.count"].value+"</td></tr><tr><td><h5>Threads</h5></td><td>"+e["jvm.thread-states.count"].value+"</td></tr><tr><td><h5>Deadlocks</h5></td><td>"+e["jvm.thread-states.deadlocks"].value+"</td></tr></table><table class='jvmTable'><caption>Thread States</caption><tr><td><h5>Terminated</h5></td><td>"+e["jvm.thread-states.terminated.count"].value+"</td></tr><tr><td><h5>Timed Waiting</h5></td><td>"+e["jvm.thread-states.timed_waiting.count"].value+"</td></tr><tr><td><h5>Blocked</h5></td><td>"+e["jvm.thread-states.blocked.count"].value+"</td></tr><tr><td><h5>Waiting</h5></td><td>"+e["jvm.thread-states.waiting.count"].value+"</td></tr><tr><td><h5>Runnable</h5></td><td>"+e["jvm.thread-states.runnable.count"].value+"</td></tr><tr><td><h5>New</h5></td><td>"+e["jvm.thread-states.new.count"].value+"</td></tr></table></div></div>";d.html(g)}function H(a){var c=b("#"+a.divId),d="<div class='metricsWatcher web metricGraph col-md-12'><fieldset><legend><div class='heading1 btn-link' data-toggle='collapse' data-target='#"+a.divId+"Collapse'>"+a.title+"</div></legend><div class='webContainer col-md-12' id='"+a.divId+"Collapse'>	<div id='"+a.divId+"Web'></div><table><tr><td colspan='4' class='requestsGraph col-md-12'></td></tr><tr><td class='activeRequestsGraph col-md-3'></td><td class='responseCodesOkGraph col-md-3'></td><td class='responseCodesCreatedGraph col-md-3'></td><td class='responseCodesOtherGraph col-md-3'></td></tr><tr><td class='responseCodesBadRequestGraph col-md-3'></td><td class='responseCodesNoContentGraph col-md-3'></td><td class='responseCodesNotFoundGraph col-md-3'></td><td class='responseCodesServerErrorGraph col-md-3'></td></tr></table></div></fieldset></div>";c.html(d),k(a.components.requestsInfo),i(a.components.activeRequestsInfo);for(var e=a.components.meters.length,f=0;e>f;f++)t(a.components.meters[f])}function I(a,b){n(a.components.requestsInfo,b),j(a.components.activeRequestsInfo,b);for(var c=a.components.meters.length,d=0;c>d;d++)v(a.components.meters[d],b)}function J(a){var c=b("#"+a.divId),d="<div class='metricsWatcher log4j metricGraph col-md-12'><fieldset><legend><div class='heading1 btn-link' data-toggle='collapse' data-target='#"+a.divId+"Collapse'>"+a.title+"</div></legend><div class='log4jContainer col-md-12' id='"+a.divId+"Collapse'>	<div id='"+a.divId+"Log4j'></div><table><tr><td colspan='4' class='col-md-12'></td></tr><tr><td class='all col-md-3'></td><td class='fatal col-md-3'></td><td class='error col-md-3'></td><td class='warn col-md-3'></td></tr><tr><td class='info col-md-3'></td><td class='debug col-md-3'></td><td class='trace col-md-3'></td></tr></table></div></fieldset></div>";
c.html(d);for(var e=a.components.meters.length,f=0;e>f;f++)t(a.components.meters[f])}function K(a,b){for(var c=a.components.meters.length,d=0;c>d;d++)v(a.components.meters[d],b)}a.addGauge=function(a,b,c,e){var f=new d(a,b,c,null,e,"gauges",null);L.push(f)},a.addMeter=function(a,b,e,f,g,h){h==c&&(h="Calls");var i=new d(a,b,e,f,g,"meters",h);i.eventType=h,L.push(i)},a.addCounter=function(a,b,c,e,f){var g=new d(a,b,c,e,f,"counters",null);L.push(g)},a.addHistogram=function(a,b,c,e,f){var g=new d(a,b,c,e?e:1,f,"histograms",null);L.push(g)},a.addLinkedCounter=function(a,b,c,e,f,g){var h=new d(a,b,c,null,g,"counters",null);h||(h=new d(a,b,c,null,g,"timers",null)),h.maxClassName=e,h.maxMetricName=f,h.getMax=function(a){var b=this.getMetricNode(this.maxClassName,this.maxMetricName,a);return b.count},h.getMetricNode=function(a,b,c){var d=c.counters[a+"."+b]?c.counters[a+"."+b]:null;return d?d:c.timers[a+"."+b]?c.timers[a+"."+b]:null},L.push(h)},a.addTimer=function(a,b,c,d,e,f,g){var i=h(a,b,c,d,e,f,g,!1);L.push(i)},a.addCache=function(a,b,c){var e=new d(a,b,null,null,c,"caches",null);e.components={gauges:[new d(null,b,"hits",null,"Hits","gauges",null),new d(null,b,"misses",null,"Misses","gauges",null),new d(null,b,"objects",null,"Objects","gauges",null),new d(null,b,"eviction-count",null,"Eviction Count","gauges",null),new d(null,b,"in-memory-hits",null,"In Memory Hits","gauges",null),new d(null,b,"in-memory-misses",null,"In Memory Misses","gauges",null),new d(null,b,"in-memory-objects",null,"In Memory Objects","gauges",null),new d(null,b,"off-heap-hits",null,"Off Heap Hits","gauges",null),new d(null,b,"off-heap-misses",null,"Off Heap Misses","gauges",null),new d(null,b,"off-heap-objects",null,"Off Heap Objects","gauges",null),new d(null,b,"on-disk-hits",null,"On Disk Hits","gauges",null),new d(null,b,"on-disk-misses",null,"On Disk Misses","gauges",null),new d(null,b,"on-disk-objects",null,"On Disk Objects","gauges",null),new d(null,b,"mean-get-time",null,"Mean Get Time","gauges",null),new d(null,b,"mean-search-time",null,"Mean Search Time","gauges",null),new d(null,b,"searches-per-second",null,"Searches Per Sec","gauges",null),new d(null,b,"writer-queue-size",null,"Writer Queue Size","gauges",null),new d(null,b,"accuracy",null,"Accuracy","gauges",null)]},e.getTimer=h(a+"gettimer",b,"gets",5,"Get","get",1,!0),e.putTimer=h(a+"puttimer",b,"puts",5,"Put","put",1,!0),L.push(e)},a.addJvm=function(a,b,c){var e=new d(a,b,null,null,c,"jvms",null);L.push(e)},a.addWeb=function(a,b,c){var e=new d(a,b,null,null,c,"webs",null);e.components={meters:[new d(a+" td.responseCodesOkGraph",b,"responseCodes.ok",10,"OK Responses","meters",null),new d(a+" td.responseCodesBadRequestGraph",b,"responseCodes.badRequest",10,"Bad Requests","meters",null),new d(a+" td.responseCodesCreatedGraph",b,"responseCodes.created",10,"Created Responses","meters",null),new d(a+" td.responseCodesNoContentGraph",b,"responseCodes.noContent",10,"No Content Responses","meters",null),new d(a+" td.responseCodesNotFoundGraph",b,"responseCodes.notFound",10,"Not Found Responses","meters",null),new d(a+" td.responseCodesOtherGraph",b,"responseCodes.other",10,"Other Responses","meters",null),new d(a+" td.responseCodesServerErrorGraph",b,"responseCodes.serverError",10,"Server Error Responses","meters",null)],activeRequestsInfo:new d(a+" td.activeRequestsGraph",b,"activeRequests",10,"Active Requests","counters",null),requestsInfo:h(a+" td.requestsGraph",b,"requests",100,"Requests","requests",100,!0)},L.push(e)},a.addLog4j=function(a,b,c){var e=new d(a,b,null,null,c,"log4js",null);e.components={meters:[new d(a+" td.all",b,"all",100,"all","meters",null),new d(a+" td.fatal",b,"fatal",100,"fatal","meters",null),new d(a+" td.error",b,"error",100,"error","meters",null),new d(a+" td.warn",b,"warn",100,"warn","meters",null),new d(a+" td.info",b,"info",100,"info","meters",null),new d(a+" td.debug",b,"debug",100,"debug","meters",null),new d(a+" td.trace",b,"trace",100,"trace","meters",null)]},L.push(e)},a.initGraphs=function(){for(var a=0;a<L.length;a++)"gauges"==L[a].type?y(L[a]):"meters"==L[a].type?t(L[a]):"counters"==L[a].type||"linkedTimerCounters"==L[a].type?i(L[a]):"histograms"==L[a].type?r(L[a]):"timers"==L[a].type?k(L[a]):"caches"==L[a].type?D(L[a]):"jvms"==L[a].type?F(L[a]):"webs"==L[a].type?H(L[a]):"log4js"==L[a].type?J(L[a]):alert("Unknown meter info type: "+L[a].type)},a.updateGraphs=function(a){for(var b=0;b<L.length;b++)"gauges"==L[b].type?z(L[b],a):"meters"==L[b].type?v(L[b],a):"counters"==L[b].type||"linkedTimerCounters"==L[b].type?j(L[b],a):"histograms"==L[b].type?s(L[b],a):"timers"==L[b].type?n(L[b],a):"caches"==L[b].type?E(L[b],a):"jvms"==L[b].type?G(L[b],a):"webs"==L[b].type?I(L[b],a):"log4js"==L[b].type?K(L[b],a):alert("Unknown meter info type: "+L[b].type)};var L=[]}(window.metricsWatcher=window.metricsWatcher||{},jQuery);var ActiveMQ;!function(a){function b(a){function b(a){if(a){if("Queues"===a.title||"Queue"===a.title)return a;var c=a.parent;if(c)return b(c)}return null}var c=a.selection;return c?b(c):null}function c(a){function b(a){var b=null;return a&&(("Topics"===a.title||"Topic"===a.title)&&(b=a),null===b&&angular.forEach(a.children,function(a){("Topics"===a.title||"Topic"===a.title)&&(b=a)})),b}var c=a.selection;return c?b(c):null}function d(a,b,c){c.gridOptions.selectAll(!1);var d=Core.pathGet(a,["rowIndex"]),e=Core.pathGet(a,["entity",b]);c.rowIndex=d;var f=c.gridOptions.selectedItems;f.splice(0,f.length),d>=0&&d<c.messages.length?(c.row=c.messages.find(function(a){return a[b]===e}),c.row&&f.push(c.row)):c.row=null}function e(a){a.selectRowIndex=function(b){a.rowIndex=b;var c=a.gridOptions.selectedItems;c.splice(0,c.length),b>=0&&b<a.messages.length?(a.row=a.messages[b],a.row&&c.push(a.row)):a.row=null},a.$watch("showMessageDetails",function(){a.showMessageDetails||(a.row=null,a.gridOptions.selectedItems.splice(0,a.gridOptions.selectedItems.length))})}a.log=Logger.get("activemq"),a.jmxDomain="org.apache.activemq",a.getSelectionQueuesFolder=b,a.getSelectionTopicsFolder=c,a.selectCurrentMessage=d,a.decorate=e}(ActiveMQ||(ActiveMQ={}));var StringHelpers;!function(a){function b(a){return angular.isString(a)?e.test(a):!1}function c(a){return angular.isString(a)?a.chars().map(function(){return"*"}).join(""):null}function d(b){if(!b)return"{ null }";var c=[];return angular.forEach(b,function(b,e){var f=b;"password"===(""+e).toLowerCase()?f=a.obfusicate(b):angular.isObject(f)&&(f=d(f)),c.push(e+": "+f)}),"{ "+c.join(", ")+" }"}var e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:/i;a.isDate=b,a.obfusicate=c,a.toString=d}(StringHelpers||(StringHelpers={}));var Core;!function(a){function b(a){var b={scheme:"http",host:null,port:null,path:null,useProxy:!0,jolokiaUrl:null,userName:null,password:null,view:null,name:null},c=a||{};return angular.extend(b,c)}function c(a){return b(a)}a.createConnectToServerOptions=b,a.createConnectOptions=c}(Core||(Core={}));var UrlHelpers;!function(a){function b(a){return a.startsWith("#")?a.last(a.length-1):a}function c(a){return a.has("?")?a.split("?")[0]:a}function d(a,d){var e=c(a);return d.endsWith("/")&&d.startsWith("/")?e.has(d):d.startsWith("/")?b(e).startsWith(d):e.endsWith(d)}function e(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=[],d=a.length-1;a.forEach(function(a,b){Core.isBlank(a)||(0!==b&&"/"===a.first(1)&&(a=a.slice(1)),b!==d&&"/"===a.last(1)&&(a=a.slice(0,a.length-1)),Core.isBlank(a)||c.push(a))});var e=c.join("/");return e}function f(a,b){if(a&&a.startsWith("proxy/"))return h.debug("Jolokia URL is proxied, applying proxy to: ",b),e("proxy",b);var c=window.location.origin;return b&&b.startsWith("http")&&!b.startsWith(c)?(h.debug("Url doesn't match page origin: ",c," applying proxy to: ",b),e("proxy",b)):(h.debug("No need to proxy: ",b),b)}function g(a){var b=a;return b=a.startsWith("proxy")?a.replace(/:/g,"\\:"):a.replace(/:([^\/])/,"\\:$1")}var h=Logger.get("UrlHelpers");a.noHash=b,a.extractPath=c,a.contextActive=d,a.join=e,a.parseQueryString=hawtioPluginLoader.parseQueryString,a.maybeProxy=f,a.escapeColons=g}(UrlHelpers||(UrlHelpers={}));var Core;!function(a){function b(){M=null}function c(a){return a&&a.startsWith&&a.startsWith("/")&&(M||(M=$("base").attr("href")||"",M.endsWith&&M.endsWith("/")&&(M=M.substring(0,M.length-1))),M)?M+a:a}function d(){return window.location}function e(){return N=[a.url("jolokia"),"/jolokia"]}function f(a,b){return a&&b&&a.startsWith(b)?a.substring(b.length):a}function g(a,b){return a&&b&&a.endsWith(b)?a.substring(0,a.length-b.length):a}function h(){var b=a.getLocalStorage();try{var c=angular.fromJson(b[a.connectionSettingsKey]);return c?c:{}}catch(d){return delete b[a.connectionSettingsKey],{}}}function i(b){Logger.get("Core").debug("Saving connection map: ",StringHelpers.toString(b)),localStorage[a.connectionSettingsKey]=angular.toJson(b)}function j(b,c){return void 0===c&&(c=a.getLocalStorage()),b?a.loadConnectionMap()[b]:null}function k(b){if(a.ConnectionName)return a.ConnectionName;var c=void 0;return"con"in window?(c=window.con,Logger.get("Core").debug("Found connection name from window: ",c)):(c=b.con,angular.isArray(c)&&(c=c[0]),c?(c=c.unescapeURL(),Logger.get("Core").debug("Found connection name from URL: ",c)):Logger.get("Core").debug("No connection name found, using direct connection to JVM")),a.ConnectionName=c,c}function l(a){Logger.get("Core").debug("Connect to server, options: ",StringHelpers.toString(a));var b=null;return a.jolokiaUrl&&(b=a.jolokiaUrl),null===b&&(b=a.scheme||"http",b+="://"+(a.host||"localhost"),a.port&&(b+=":"+a.port),a.path&&(b=UrlHelpers.join(b,a.path))),a.useProxy&&(b=UrlHelpers.join("proxy",b)),Logger.get("Core").debug("Using URL: ",b),b}function m(){var b=hawtioPluginLoader.parseQueryString(),c=b.localMode;if(c)return Logger.get("Core").debug("local mode so not using jolokia URL"),N=[],null;var d=null,e=a.getConnectionNameParameter(b);if(e){var f=a.getConnectOptions(e);f?(d=l(f),Logger.get("Core").debug("Using jolokia URI: ",d," from local storage")):Logger.get("Core").debug("Connection parameter found but no stored connections under name: ",e)}if(!d){var g={username:"public",password:"biscuit"},h=q();"userDetails"in window?g=window.userDetails:"userDetails"in h&&(g=angular.fromJson(h.userDetails)),d=N.find(function(a){var b=$.ajax(a,{async:!1,username:g.username,password:g.password});return 200===b.status||401===b.status||403===b.status}),Logger.get("Core").debug("Using jolokia URI: ",d," via discovery")}return d}function n(){var a=$(window).height(),b=$("#main-nav").height(),c=a-b;$("#main").css("min-height",""+c+"px")}function o(){var a=!1;try{a=chrome&&chrome.app&&chrome.extension?!0:!1}catch(b){a=!1}return a}function p(a){if("createStyleSheet"in document)document.createStyleSheet(a);else{var b=$("<link>");$("head").append(b),b.attr({rel:"stylesheet",type:"text/css",href:a})}}function q(){var a=window.localStorage||function(){return O}();return a}function r(a){return angular.isArray(a)?a:[a]}function s(a,b){if(void 0===b&&(b=!1),!angular.isDefined(a)||!a)return b;if(a.constructor===Boolean)return a;if(angular.isString(a))switch(a.toLowerCase()){case"true":case"1":case"yes":return!0;default:return!1}if(angular.isNumber(a))return 0!==a;throw new Error("Can't convert value "+a+" to boolean")}function t(a){return angular.isNumber(a)?w(a):angular.toJson(a,!0)}function u(a){return""+a}function v(a,b){if(void 0===b&&(b="integer"),angular.isString(a))try{return parseInt(a)}catch(c){console.log("Failed to parse "+b+" with text '"+a+"'")}else if(angular.isNumber(a))return a;return null}function w(a){return""+a}function x(a,b){if(void 0===b&&(b="float"),angular.isString(a))try{return parseFloat(a)}catch(c){console.log("Failed to parse "+b+" with text '"+a+"'")}else if(angular.isNumber(a))return a;return null}function y(a,b){var c=angular.isArray(b)?b:(b||"").split("."),d=a;return angular.forEach(c,function(a){if(!d)return null;try{d=d[a]}catch(b){return null}}),d}function z(a,b,c){var d=angular.isArray(b)?b:(b||"").split("."),e=a,f=d.length-1;return angular.forEach(d,function(a,b){var d=e[a];(b>=f||!angular.isObject(d))&&(d=f>b?{}:c,e[a]=d),e=d}),e}function A(b){b.$$phase||b.$root.$$phase?setTimeout(function(){a.$apply(b)},50):b.$apply()}function B(b,c){void 0===c&&(c=50),setTimeout(function(){a.$apply(b)},c)}function C(a){var b=a.$$phase||a.$root.$$phase;b||a.$apply()}function D(a){var b=a.$$phase||a.$root.$$phase;b||a.$digest()}function E(a,b){var c=a;return angular.forEach(b,function(a){if(c){var b=$(c).children(a);b&&b.length||($("<"+a+"></"+a+">").appendTo(c),b=$(c).children(a)),c=b}}),c}function F(a){return angular.forEach(P,function(b,c){var d=new RegExp(b,"g");a=a.replace(d,c)}),a=a.replace(/&gt;/g,">")}function G(a){if(angular.isString(a)){for(var b="",c=0;c<a.length;c++){var d=a.charAt(c),d=P[d]||d;b+=d}return b}return a}function H(a){return void 0===a||null===a?!0:angular.isString(a)?a.isBlank():!1}function I(a,b,c){void 0===c&&(c=null),null===c&&(c={}),("error"===a||"warning"===a)&&(angular.isDefined(c.onclick)||(c.onclick=window.showLogPanel)),toastr[a](b,"",c)}function J(){toastr.clear()}function K(a){if(a){for(;a.endsWith('"')||a.endsWith("'");)a=a.substring(0,a.length-1);for(;a.startsWith('"')||a.startsWith("'");)a=a.substring(1,a.length)}return a}function L(a){if(a){var b=a+"";try{b=b.underscore()}catch(c){}try{b=b.humanize()}catch(c){}return K(b)}return a}a.injector=null;var M=null;a.connectionSettingsKey="jvmConnect",a._resetUrlPrefix=b,a.url=c,a.windowLocation=d,String.prototype.unescapeHTML=function(){var a=document.createElement("textarea");return a.innerHTML=this,a.value},Object.keys||(console.debug("Creating hawt.io version of Object.keys()"),Object.keys=function(a){var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}),a._resetJolokiaUrls=e;var N=a._resetJolokiaUrls();a.trimLeading=f,a.trimTrailing=g,a.loadConnectionMap=h,a.saveConnectionMap=i,a.getConnectOptions=j,a.ConnectionName=null,a.getConnectionNameParameter=k,a.createServerConnectionUrl=l,a.getJolokiaUrl=m,a.adjustHeight=n,a.isChromeApp=o,a.addCSS=p;var O={};a.getLocalStorage=q,a.asArray=r,a.parseBooleanValue=s,a.toString=t,a.booleanToString=u,a.parseIntValue=v,a.numberToString=w,a.parseFloatValue=x,a.pathGet=y,a.pathSet=z,a.$applyNowOrLater=A,a.$applyLater=B,a.$apply=C,a.$digest=D,a.getOrCreateElements=E;var P={"#":"&#35;","'":"&#39;","<":"&lt;",">":"&gt;",'"':"&quot;"};a.unescapeHtml=F,a.escapeHtml=G,a.isBlank=H,a.notification=I,a.clearNotifications=J,a.trimQuotes=K,a.humanizeValue=L}(Core||(Core={}));var ControllerHelpers;!function(a){function b(a){return function(b,c){return b===c&&b in a?a[b]:""}}function c(a){return function(b){return b in a?a[b]:""}}function d(a,b,c,d,e,f,g){function h(){return j(b.search()[d]||e)}c in a||(a[c]=e);var i=f||Core.doNothing,j=g||Core.doNothing,k=h();Core.pathSet(a,c,k),a.$watch(c,function(a,c){a!==c&&(void 0!==a&&null!==a?b.search(d,i(a)):b.search(d,""))})}function e(a,b,c,d){void 0===d&&(d=["nid"]);var e=angular.copy(c.search());b.$on("$routeUpdate",function(){var b=c.search(),f=[];angular.forEach(d,function(a){b[a]!==e[a]&&f.push(a)}),f.length&&a.reload()})}Logger.get("ControllerHelpers");a.createClassSelector=b,a.createValueClassSelector=c,a.bindModelToSearchParam=d,a.reloadWhenParametersChange=e}(ControllerHelpers||(ControllerHelpers={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},Core;!function(a){var b=Logger.get("Core"),c=function(){function a(){this.tasks={},this.tasksExecuted=!1,this._onComplete=null}return a.prototype.addTask=function(a,b){this.tasks[a]=b,this.tasksExecuted&&this.executeTask(a,b)},a.prototype.executeTask=function(a,c){if(angular.isFunction(c)){b.debug("Executing task : ",a);try{c()}catch(d){b.debug("Failed to execute task: ",a," error: ",d)}}},a.prototype.onComplete=function(a){this._onComplete=a},a.prototype.execute=function(){var a=this;this.tasksExecuted||(angular.forEach(this.tasks,function(b,c){a.executeTask(c,b)}),this.tasksExecuted=!0,angular.isFunction(this._onComplete)&&this._onComplete())},a.prototype.reset=function(){this.tasksExecuted=!1},a}();a.TasksImpl=c;var d=function(a){function c(){var b=this;a.call(this),this.tasks={},this.onComplete(function(){b.reset()})}return __extends(c,a),c.prototype.addTask=function(a,b){this.tasks[a]=b},c.prototype.execute=function(){for(var a=this,c=[],d=0;d<arguments.length;d++)c[d-0]=arguments[d];if(!this.tasksExecuted){var e=c,f=Object.keys(this.tasks);f.forEach(function(c){var d=a.tasks[c];if(angular.isFunction(d)){b.debug("Executing task: ",c," with parameters: ",e);try{d.apply(d,e)}catch(f){b.debug("Failed to execute task: ",c," error: ",f)}}}),this.tasksExecuted=!0,angular.isFunction(this._onComplete)&&this._onComplete()}},c}(c);a.ParameterizedTasksImpl=d,a.postLoginTasks=new a.TasksImpl,a.preLogoutTasks=new a.TasksImpl}(Core||(Core={}));var Core;!function(a){function b(a,b){return b&&0!==b.length?a+"("+b.map(function(a){return angular.isString(a)&&(a=angular.fromJson(a)),a.type}).join(",")+")":a+"()"}a.operationToString=b}(Core||(Core={}));var Core;!function(a){var b=function(){function a(a){this.title=a,this.key=null,this.typeName=null,this.children=[],this.folderNames=[],this.domain=null,this.objectName=null,this.map={},this.entries={},this.addClass=null,this.parent=null,this.isLazy=!1,this.icon=null,this.tooltip=null,this.entity=null,this.version=null,this.mbean=null,this.addClass=escapeTreeCssStyles(a)}return a.prototype.get=function(a){return this.map[a]},a.prototype.isFolder=function(){return this.children.length>0},a.prototype.navigate=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=this;return a.forEach(function(a){c&&(c=c.get(a))}),c},a.prototype.hasEntry=function(a,b){var c=this.entries;if(c){var d=c[a];return d&&b===d}return!1},a.prototype.parentHasEntry=function(a,b){return this.parent?this.parent.hasEntry(a,b):!1},a.prototype.ancestorHasEntry=function(a,b){for(var c=this.parent;c;){if(c.hasEntry(a,b))return!0;c=c.parent}return!1},a.prototype.ancestorHasType=function(a){for(var b=this.parent;b;){if(a===b.typeName)return!0;b=b.parent}return!1},a.prototype.getOrElse=function(b,c){void 0===c&&(c=new a(b));var d=this.map[b];return d||(d=c,this.map[b]=d,this.children.push(d),d.parent=this),d},a.prototype.sortChildren=function(a){var b=this.children;b&&(this.children=b.sortBy("title"),a&&angular.forEach(b,function(b){return b.sortChildren(a)}))},a.prototype.moveChild=function(a){a&&a.parent!==this&&(a.detach(),a.parent=this,this.children.push(a))},a.prototype.insertBefore=function(a,b){a.detach(),a.parent=this;var c=_.indexOf(this.children,b);c>=0&&this.children.splice(c,0,a)},a.prototype.insertAfter=function(a,b){a.detach(),a.parent=this;var c=_.indexOf(this.children,b);c>=0&&this.children.splice(c+1,0,a)},a.prototype.detach=function(){var a=this.parent;if(a){var b=a.children;if(b){var c=b.indexOf(this);0>c?a.children=a.children.remove({key:this.key}):b.splice(c,1)}this.parent=null}},a.prototype.findDescendant=function(a){if(a(this))return this;var b=null;return angular.forEach(this.children,function(c){b||(b=c.findDescendant(a))}),b},a.prototype.findAncestor=function(a){return a(this)?this:null!=this.parent?this.parent.findAncestor(a):null},a}();a.Folder=b}(Core||(Core={}));var Folder=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(Core.Folder),Jmx;!function(a){function b(a,b){var c=a.jmxTreeLazyLoadRegistry[b.domain],d=null;return c&&c.length&&angular.forEach(c,function(a){d||(d=a(b))}),d}function c(a,b){Core.lazyLoaders||(Core.lazyLoaders={});var c=Core.lazyLoaders[a];c||(c=[],Core.lazyLoaders[a]=c),c.push(b)}function d(a,b){if(Core.lazyLoaders){var c=Core.lazyLoaders[a];c&&c.remove(b)}}function e(a,b,c){var d=k[b];d||(d=[],k[b]=d),d.push(c)}function f(a,b){void 0===b&&(b="app/jmx/html/attributeToolBar.html");var c=null,d=a?a.domain:null;if(d){var e=k[d];if(e)for(var f in e){var g=e[f];if(c=g(a))break}}return c?c:b}function g(a,b,c){void 0===c&&(c=!1),h(a,b,null,c)}function h(a,b,c,d){void 0===d&&(d=!1);var e=b.dynatree("getTree");if(e){var f=null,g=a.search().nid;if(g)try{f=e.activateKey(g)}catch(h){}if(f)f.expand(!0);else if(!b.dynatree("getActiveNode")){var i=b.dynatree("getRoot"),j=i?i.getChildren():null;if(j&&j.length){var k=j[0];if(k.expand(!0),c){var l=c(k);l&&(k=l)}d&&(k.expand(),k.activate())}}}}function i(a){var b={};angular.forEach(a,function(a){var c=a.typeName;c&&(b[c]=a)});var c=Object.keys(b);return c}function j(b,c,d,e,f,g,h){void 0===g&&(g=!1),void 0===h&&(h=null),e.length&&(h||(h=function(a){var c=a.data;d.updateSelectionNode(c),Core.$apply(b)}),d.treeElement=e,e.dynatree({onActivate:h,onLazyRead:function(b){var c=b.data,e=null;if(c&&(e=a.findLazyLoadingFunction(d,c)),e){console.log("Lazy loading folder "+c.title);var f=c.childen;e(d,c,function(){b.setLazyNodeStatus(DTNodeStatus_Ok);var a=c.children;a!==f&&(b.removeChildren(),angular.forEach(a,function(a){b.addChild(a)}))})}else b.setLazyNodeStatus(DTNodeStatus_Ok)},onClick:function(a,b){if(b.metaKey){b.preventDefault();var d=c.absUrl();if(a&&a.data){var e=a.data.key;if(e){var f=c.search();f.nid=e;var g=d.indexOf("?");0>=g?d+="?":d=d.substring(0,g+1),d+=$.param(f)}}return window.open(d,"_blank"),window.focus(),!1}return!0},persist:!1,debugLevel:0,children:f}),g&&d.redrawTree())}a.log=Logger.get("JMX");var k={};a.findLazyLoadingFunction=b,a.registerLazyLoadHandler=c,a.unregisterLazyLoadHandler=d,a.addAttributeToolBar=e,a.getAttributeToolBar=f,a.updateTreeSelectionFromURL=g,a.updateTreeSelectionFromURLAndAutoSelect=h,a.getUniqueTypeNames=i,a.enableTree=j}(Jmx||(Jmx={}));var Core;!function(a){var b=Logger.get("Core"),c=function(){function c(b,c,d,e,f,g,h,i,j){this.jolokia=b,this.jolokiaStatus=c,this.jmxTreeLazyLoadRegistry=d,this.$location=e,this.$compile=f,this.$templateCache=g,this.localStorage=h,this.$rootScope=i,this.userDetails=j,this.operationCounter=0,this.tree=new a.Folder("MBeans"),this.mbeanTypesToDomain={},this.mbeanServicesToDomain={},this.attributeColumnDefs={},this.treePostProcessors=[],this.topLevelTabs=[],this.subLevelTabs=[],this.keyToNodeMap={},this.pluginRegisterHandle=null,this.pluginUpdateCounter=null,this.treeWatchRegisterHandle=null,this.treeWatcherCounter=null,this.treeElement=null,this.mapData={},"autoRefresh"in h||(h.autoRefresh=!0),"updateRate"in h||(h.updateRate=5e3)}return c.prototype.createChildWorkspace=function(a){var b=new c(this.jolokia,this.jolokiaStatus,this.jmxTreeLazyLoadRegistry,this.$location,this.$compile,this.$templateCache,this.localStorage,this.$rootScope,this.userDetails);return angular.forEach(this,function(a,c){return b[c]=a}),b.$location=a,b},c.prototype.getLocalStorage=function(a){return this.localStorage[a]},c.prototype.setLocalStorage=function(a,b){this.localStorage[a]=b},c.prototype.loadTree=function(){var a={ignoreErrors:!0,maxDepth:7},b=this.jolokia.list(null,onSuccess(null,a));b&&(this.jolokiaStatus.xhr=null),this.populateTree({value:b})},c.prototype.addTreePostProcessor=function(a){this.treePostProcessors.push(a);var b=this.tree;b&&a(b)},c.prototype.maybeMonitorPlugins=function(){this.treeContainsDomainAndProperties("hawtio",{type:"Registry"})?null===this.pluginRegisterHandle&&(this.pluginRegisterHandle=this.jolokia.register(angular.bind(this,this.maybeUpdatePlugins),{type:"read",mbean:"hawtio:type=Registry",attribute:"UpdateCounter"})):null!==this.pluginRegisterHandle&&(this.jolokia.unregister(this.pluginRegisterHandle),this.pluginRegisterHandle=null,this.pluginUpdateCounter=null),this.treeContainsDomainAndProperties("hawtio",{type:"TreeWatcher"})&&null===this.treeWatchRegisterHandle&&(this.treeWatchRegisterHandle=this.jolokia.register(angular.bind(this,this.maybeReloadTree),{type:"read",mbean:"hawtio:type=TreeWatcher",attribute:"Counter"}))},c.prototype.maybeUpdatePlugins=function(b){return null===this.pluginUpdateCounter?void(this.pluginUpdateCounter=b.value):void(this.pluginUpdateCounter!==b.value&&a.parseBooleanValue(localStorage.autoRefresh)&&window.location.reload())},c.prototype.maybeReloadTree=function(a){function b(a){var b={value:a};d.populateTree(b)}var c=a.value;if(null===this.treeWatcherCounter)return void(this.treeWatcherCounter=c);if(this.treeWatcherCounter!==c){this.treeWatcherCounter=c;var d=this;this.jolokia.list(null,onSuccess(b,{ignoreErrors:!0,maxDepth:2}))}},c.prototype.folderGetOrElse=function(a,c){if(a)try{return a.getOrElse(c)}catch(d){b.warn("Failed to find value "+c+" on folder "+a)}return null},c.prototype.populateTree=function(c){b.debug("JMX tree has been loaded, data: ",c.value);var d="root",e="-";this.mbeanTypesToDomain={},this.mbeanServicesToDomain={},this.keyToNodeMap={};var f=new a.Folder("MBeans");f.key=d;var g=c.value;for(var h in g){var i=escapeDots(h),j=g[h];for(var k in j){var l={},m=this.folderGetOrElse(f,h);m.domain=h,m.key||(m.key=d+e+h);var n=[h];m.folderNames=n,n=n.clone();var o=k.split(","),p=[],q=null,r=null;o.forEach(function(a){var b=a.split("="),c=b[0],d=b[1]||c;l[c]=d;var e=!1,f=c.toLowerCase();"type"===f&&(q=d,m.map[d]&&(e=!0)),"service"===f&&(r=d),e?p.splice(0,0,d):p.push(d)});var s=function(a,b){a.domain=h,a.key||(a.key=d+e+n.join(e)),this.keyToNodeMap[a.key]=a,a.folderNames=n.clone();var c="",f=a.entries,g=Object.keys(f).filter(function(a){return a.toLowerCase().indexOf("type")>=0});if(g.length)angular.forEach(g,function(b){var d=f[b];a.ancestorHasEntry(b,d)||(c+=" "+i+e+d)});else{var j=n.last();j===b&&(j+="-folder"),j&&(c+=" "+i+e+j)}return a.addClass=escapeTreeCssStyles(c),a},t=p.pop(),u=this;p.forEach(function(a){m=u.folderGetOrElse(m,a),m&&(n.push(a),angular.bind(u,s,m,a)())});var v=d+e+n.join(e)+e+t,w=h+":"+k;if(m){if(m=this.folderGetOrElse(m,t)){m.entries=l,m.key=v,angular.bind(this,s,m,t)(),m.title=a.trimQuotes(t),m.objectName=w,m.mbean=j[k],m.typeName=q;var x=function(a,b){var c=a[b];c||(c={},a[b]=c);var d=c[h];if(d){var e=null;angular.isArray(d)?e=d:(e=[d],c[h]=e),e.push(m)}else c[h]=m};r&&angular.bind(this,x,this.mbeanServicesToDomain,r)(),q&&angular.bind(this,x,this.mbeanTypesToDomain,q)()}}else b.info("No folder found for lastPath: "+t)}f.sortChildren(!0),this.enableLazyLoading(f),this.tree=f;var y=this.treePostProcessors;angular.forEach(y,function(a){return a(f)}),this.maybeMonitorPlugins();var z=this.$rootScope;z&&z.$broadcast("jmxTreeUpdated")}},c.prototype.enableLazyLoading=function(a){var b=this,c=a.children;if(c&&c.length)angular.forEach(c,function(a){b.enableLazyLoading(a)});else{var d=Jmx.findLazyLoadingFunction(this,a);d&&(a.isLazy=!0)}},c.prototype.hash=function(){var b=this.$location.search(),c=a.hashToString(b);return c?"?"+c:""},c.prototype.getActiveTab=function(){var a=this;return this.topLevelTabs.find(function(b){return angular.isDefined(b.isActive)?b.isActive(a):a.isLinkActive(b.href())})},c.prototype.getStrippedPathName=function(){var b=a.trimLeading(this.$location.path()||"/","#");return b=a.trimLeading(b,"/")},c.prototype.linkContains=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=this.getStrippedPathName();return a.all(function(a){return c.has(a)})},c.prototype.isLinkActive=function(b){var c=this.getStrippedPathName(),d=a.trimLeading(b,"#");d=a.trimLeading(d,"/");var e=d.indexOf("?");return e>=0&&(d=d.substring(0,e)),c.length?c.startsWith(d):d===c},c.prototype.isLinkPrefixActive=function(b){var c=this.getStrippedPathName(),d=a.trimLeading(b,"#");d=a.trimLeading(d,"/");var e=d.indexOf("?");return e>=0&&(d=d.substring(0,e)),c.startsWith(d)},c.prototype.isTopTabActive=function(a){var b=this.$location.search().tab;return angular.isString(b)?b.startsWith(a):this.isLinkActive(a)},c.prototype.getSelectedMBeanName=function(){var a=this.selection;return a?a.objectName:null},c.prototype.validSelection=function(a){var c=this,d=function(b){var c=b.href;if(c){var d=c();if(d)return d.startsWith("#/")&&(d=d.substring(2)),d===a}return!1},e=this.subLevelTabs.find(d);if(e||(e=this.topLevelTabs.find(d)),e){var f=e.isValid;return!angular.isDefined(f)||f(c)}return b.info("Could not find tab for "+a),!1},c.prototype.removeAndSelectParentNode=function(){var a=this.selection;if(a){var b=a.parent;if(b){var c=b.children.indexOf(a);0>c&&(c=b.children.findIndex(function(b){return b.key===a.key})),c>=0&&b.children.splice(c,1),this.updateSelectionNode(b)}}},c.prototype.selectParentNode=function(){var a=this.selection;if(a){var b=a.parent;b&&this.updateSelectionNode(b)}},c.prototype.selectionViewConfigKey=function(){return this.selectionConfigKey("view/")},c.prototype.selectionConfigKey=function(a){void 0===a&&(a="");var b=null,c=this.selection;if(c){b=a+c.domain;var d=c.typeName;d||(d=c.title),b+="/"+d,c.isFolder()&&(b+="/folder")}return b},c.prototype.moveIfViewInvalid=function(){var c=this,d=a.trimLeading(this.$location.path(),"/");if(this.selection){var e=this.selectionViewConfigKey();if(this.validSelection(d))return this.setLocalStorage(e,d),!1;b.info("the uri '"+d+"' is not valid for this selection");var f=this.getLocalStorage(e);return f&&this.validSelection(f)||(f=null,angular.forEach(this.subLevelTabs,function(a){var b=a.isValid;!f&&a.href&&angular.isDefined(b)&&b(c)&&(f=a.href())})),f||(f="#/jmx/help"),b.info("moving the URL to be "+f),f.startsWith("#")&&(f=f.substring(1)),this.$location.path(f),!0}return!1},c.prototype.updateSelectionNode=function(a){var b=this.selection;this.selection=a;var c=null;a&&(c=a.key);var d=this.$location,e=d.search();if(c&&(e.nid=c),d.search(e),b&&(c=this.selectionViewConfigKey())){var f=this.getLocalStorage(c);f&&this.$location.path(f)}},c.prototype.redrawTree=function(){var a=this.treeElement;if(a&&angular.isDefined(a.dynatree)&&angular.isFunction(a.dynatree)){var b=a.dynatree("getTree");if(angular.isDefined(b))try{b.reload()}catch(c){}}},c.prototype.expandSelection=function(a){var b=this.treeElement;if(b&&angular.isDefined(b.dynatree)&&angular.isFunction(b.dynatree)){var c=b.dynatree("getActiveNode");angular.isDefined(c)&&c.expand(a)}},c.prototype.matchesProperties=function(a,b){if(!a)return!1;for(var c in b){var d=b[c];if(!d||a[c]!==d)return!1}return!0},c.prototype.hasInvokeRightsForName=function(c){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];var f=!0;if(c){var g=a.parseMBean(c);if(g){var h=this.findMBeanWithProperties(g.domain,g.attributes);if(h)return this.hasInvokeRights.apply(this,[h].concat(d));b.debug("Failed to find mbean folder with name "+c)}else b.debug("Failed to parse mbean name "+c)}return f},c.prototype.hasInvokeRights=function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var e=!0;if(a){var f=a,g=f.mbean;if(g&&(angular.isDefined(g.canInvoke)&&(e=g.canInvoke),e&&c&&c.length>0)){var h=g.opByString,i=g.op;h&&i&&c.forEach(function(a){if(e){var c=null;return(c=a.endsWith(")")?h[a]:i[a])?void(angular.isDefined(c.canInvoke)&&(e=c.canInvoke)):void b.debug("Could not find method:",a," to check permissions, skipping")}})}}return e},c.prototype.treeContainsDomainAndProperties=function(a,b){var c=this;void 0===b&&(b=null);var d=this,e=d.tree;if(e){var f=e.get(a);if(f){if(b){var g=f.children||[],h=function(d){return c.matchesProperties(d.entries,b)?!0:d.domain===a&&d.children&&d.children.length>0?d.children.some(h):!1};return g.some(h)}return!0}}return!1},c.prototype.matches=function(a,b,c){if(a){var d=a.entries;if(b){if(!d)return!1;for(var e in b){var f=b[e];if(!f||d[e]!==f)return!1}}return c?d&&Object.keys(d).length===c:!0}return!1},c.prototype.hasDomainAndProperties=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null);var d=this.selection;return d?this.matches(d,b,c)&&d.domain===a:!1},c.prototype.findMBeanWithProperties=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null);var d=this.tree;return d?this.findChildMBeanWithProperties(d.get(a),b,c):null},c.prototype.findChildMBeanWithProperties=function(a,b,c){var d=this;void 0===b&&(b=null),void 0===c&&(c=null);var e=this;if(a){var f=a.children;if(f){var g=f.find(function(a){return d.matches(a,b,c)
});return g?g:f.map(function(a){return e.findChildMBeanWithProperties(a,b,c)}).find(function(a){return a})}}return null},c.prototype.selectionHasDomainAndLastFolderName=function(a,b){function c(a){return(a||"").toLowerCase()===d}var d=(b||"").toLowerCase(),e=this.selection;if(e&&a===e.domain){var f=e.folderNames;if(f){var g=f.last();return(c(g)||c(e.title))&&e.isFolder()&&!e.objectName}}return!1},c.prototype.selectionHasDomain=function(a){var b=this.selection;return b?a===b.domain:!1},c.prototype.selectionHasDomainAndType=function(a,b){var c=this.selection;return c?a===c.domain&&b===c.typeName:!1},c.prototype.hasMBeans=function(){var a=!1,b=this.tree;if(b){var c=b.children;angular.isArray(c)&&c.length>0&&(a=!0)}return a},c.prototype.hasFabricMBean=function(){return this.hasDomainAndProperties("io.fabric8",{type:"Fabric"})},c.prototype.isFabricFolder=function(){return this.hasDomainAndProperties("io.fabric8")},c.prototype.isCamelContext=function(){return this.hasDomainAndProperties("org.apache.camel",{type:"context"})},c.prototype.isCamelFolder=function(){return this.hasDomainAndProperties("org.apache.camel")},c.prototype.isEndpointsFolder=function(){return this.selectionHasDomainAndLastFolderName("org.apache.camel","endpoints")},c.prototype.isEndpoint=function(){return this.hasDomainAndProperties("org.apache.camel",{type:"endpoints"})},c.prototype.isRoutesFolder=function(){return this.selectionHasDomainAndLastFolderName("org.apache.camel","routes")},c.prototype.isRoute=function(){return this.hasDomainAndProperties("org.apache.camel",{type:"routes"})},c.prototype.isOsgiFolder=function(){return this.hasDomainAndProperties("osgi.core")},c.prototype.isKarafFolder=function(){return this.hasDomainAndProperties("org.apache.karaf")},c.prototype.isOsgiCompendiumFolder=function(){return this.hasDomainAndProperties("osgi.compendium")},c}();a.Workspace=c}(Core||(Core={}));var Workspace=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(Core.Workspace),UI;!function(a){a.colors=["#5484ED","#A4BDFC","#46D6DB","#7AE7BF","#51B749","#FBD75B","#FFB878","#FF887C","#DC2127","#DBADFF","#E1E1E1"]}(UI||(UI={}));var Core;!function(a){a.log=Logger.get("Core"),a.lazyLoaders={}}(Core||(Core={}));var numberTypeNames={"byte":!0,"short":!0,"int":!0,"long":!0,"float":!0,"double":!0,"java.lang.byte":!0,"java.lang.short":!0,"java.lang.integer":!0,"java.lang.long":!0,"java.lang.float":!0,"java.lang.double":!0},Core;!function(a){function b(b){return a.isBlank(b)?b:b.startsWith("#")?b.substring(1):b}function c(a){var b={},c=a.split(":");if(c.length>1){b.domain=c.first(),c=c.exclude(c.first()),c=c.join(":"),b.attributes={};var d=c.split(",");d.forEach(function(a){var c=a.split("="),d=c.first().trim();c=c.exclude(c.first()),b.attributes[d]=c.join("=").trim()})}return b}function d(){a.log.debug("Executing post login tasks"),a.postLoginTasks.execute()}function e(b){a.log.debug("Executing pre logout tasks"),a.preLogoutTasks.onComplete(b),a.preLogoutTasks.execute()}function f(b,c,d,e,f,g){if(void 0===f&&(f=null),void 0===g&&(g=null),b){var h="auth/logout/";a.executePreLogoutTasks(function(){$.ajax(h,{type:"POST",success:function(){c.username=null,c.password=null,c.loginDetails=null,c.rememberMe=!1,delete d.userDetails;var b=angular.fromJson(d.jvmConnect);_.each(b,function(a){delete a.userName,delete a.password}),d.setItem("jvmConnect",angular.toJson(b)),d.removeItem("activemqUserName"),d.removeItem("activemqPassword"),f&&angular.isFunction(f)&&f(),a.$apply(e)},error:function(b,f,h){c.username=null,c.password=null,c.loginDetails=null,c.rememberMe=!1,delete d.userDetails;var i=angular.fromJson(d.jvmConnect);switch(_.each(i,function(a){delete a.userName,delete a.password}),d.setItem("jvmConnect",angular.toJson(i)),d.removeItem("activemqUserName"),d.removeItem("activemqPassword"),b.status){case 401:a.log.debug("Failed to log out, ",h);break;case 403:a.log.debug("Failed to log out, ",h);break;case 0:break;default:a.log.debug("Failed to log out, ",h)}g&&angular.isFunction(g)&&g(),a.$apply(e)}})})}}function g(b,c,d){void 0===d&&(d=null);var e=angular.copy(b.search());d&&angular.forEach(d,function(a){return delete e[a]});var f=a.hashToString(e);if(f){var g=c.indexOf("?")>=0?"&":"?";c+=g+f}return c}function h(a){var b=[];angular.forEach(a,function(a,c){b.push(c+"="+a)});var c=b.join("&");return encodeURI(c)}function i(a){var b={};if(a){var c=decodeURI(a),d=c.split("&");angular.forEach(d,function(a){var c=a.split("="),d=c[0],e=c[1]||d;b[d]=e})}return b}function j(b,c,d,e,f){var g={responseJson:"",success:function(a){var b=angular.toJson(a.value);g.responseJson!==b&&(g.responseJson=b,e(a))}};return angular.extend(g,f),a.register(b,c,d,onSuccess(void 0,g))}function k(a){return a in localStorage||(localStorage[a]=angular.toJson({})),angular.fromJson(localStorage[a])}function l(a){return StringHelpers.toString(a)}function m(b){if(!("type"in b))return null;var c=b.type;switch(c.toLowerCase()){case"exec":c+=":"+b.mbean+":"+b.operation;var d=l(b.arguments);a.isBlank(d)||(c+=":"+d);break;case"read":c+=":"+b.mbean+":"+b.attribute;break;default:return null}return c}function n(a){var b="";return b=angular.isArray(a)?a.map(function(a){return m(a)}).join(":"):m(a)}function o(){return null===rb&&(rb={},a.log.debug("Created response history",rb)),rb}function p(a){var b=null,c=null;return angular.forEach(a,function(a,d){a&&a.timestamp?(null===b||a.timestamp<b)&&(b=a.timestamp,c=d):(b=0,c=d)}),c}function q(b,c){var d=o(),e=n(b);if(null===e)return void a.log.debug("key for arguments is null, not caching: ",StringHelpers.toString(b));var f=Object.extended(d).keys();if(f.length>=a.MAX_RESPONSE_CACHE_SIZE){a.log.debug("Cache limit (",a.MAX_RESPONSE_CACHE_SIZE,") met or  exceeded (",f.length,"), trimming oldest response");var g=p(d);null!==g?(a.log.debug("Deleting key: ",g),delete d[g]):(a.log.debug("Got null key, could be a cache problem, wiping cache"),f.forEach(function(b){a.log.debug("Deleting key: ",b),delete d[b]}))}d[e]=c}function r(b,c,d){var e=o(),f=n(c);if(null===f)return void b.request(c,d);if(f in e&&"success"in d){var g=e[f];setTimeout(function(){d.success(g)},10)}else a.log.debug("Unable to find existing response for key: ",f),b.request(c,d)}function s(a,b,c,d){angular.isDefined(b.$jhandle)&&angular.isArray(b.$jhandle)||(b.$jhandle=[]),angular.isDefined(b.$on)&&b.$on("$destroy",function(){t(a,b)});var e=null;if("success"in d){var f=d.success,g=c;d.success=function(a){q(g,a),f(a)}}if(angular.isArray(c)){if(c.length>=1){var g=[d];angular.forEach(c,function(a){return g.push(a)});var h=a.register;e=h.apply(a,g),b.$jhandle.push(e),r(a,c,d)}}else e=a.register(d,c),b.$jhandle.push(e),r(a,c,d);return function(){null!==e&&(b.$jhandle.remove(e),a.unregister(e))}}function t(a,b){angular.isDefined(b.$jhandle)&&(b.$jhandle.forEach(function(b){a.unregister(b)}),delete b.$jhandle)}function u(b,c){void 0===c&&(c={});var d=b.stacktrace;if(d){var e=c.silent;if(e)a.log.debug("Operation ",f," failed due to: ",b.error);else{var f=a.pathGet(b,["request","operation"])||"unknown";d.indexOf("javax.management.InstanceNotFoundException")>=0||d.indexOf("javax.management.AttributeNotFoundException")>=0||d.indexOf("java.lang.IllegalArgumentException: No operation")>=0?a.log.debug("Operation ",f," failed due to: ",b.error):a.log.warn("Operation ",f," failed due to: ",b.error)}}}function v(b){var c=b.stacktrace;if(c){var d=a.pathGet(b,["request","operation"])||"unknown";a.log.info("Operation ",d," failed due to: ",b.error)}}function w(a){try{return(new XMLSerializer).serializeToString(a)}catch(b){try{return a.xml}catch(b){console.log("WARNING: XMLSerializer not supported")}}return!1}function x(a){return a&&3===a.nodeType}function y(a,b){void 0===b&&(b="");var c=b;if(a){var d=a.lastIndexOf(".");d>0&&(c=a.substring(d+1,a.length).toLowerCase())}return c}function z(){var a=new Date,b=1e3*a.getTime()+a.getUTCMilliseconds(),c=Math.floor(65536*(1+Math.random()));return b.toString(16)+c.toString(16)}function A(a){if(a){var b=a.match(sb);if(b&&b.length>4){var c=b[1],d=b[2],e=b[4];if(angular.isDefined(e))return[parseInt(c),parseInt(d),parseInt(e)];if(angular.isDefined(d))return[parseInt(c),parseInt(d)];if(angular.isDefined(c))return[parseInt(c)]}}return null}function B(a,b){return void 0===b&&(b=4),(a||"").split(".").map(function(a){var c=a.length;return c>=b?a:a.padLeft(" ",b-c)}).join(".")}function C(a,b){var c=(new Date).getTime(),d=b(),e=(new Date).getTime()-c;return console.log(a+" "+e),d}function D(a,b){if(a&&!b)return 1;if(!a&&b)return-1;if(a===b)return 0;for(var c=0;c<a.length;c++){var d=a[c];if(c>=b.length)return 1;var e=b[c];if(!angular.isDefined(d))return-1;if(!angular.isDefined(e))return 1;if(d>e)return 1;if(e>d)return-1}return 0}function E(a){if(angular.isArray(a)){var b=a.length;if(b){if(1===b)return E(a[0]);var c="<ul>";return angular.forEach(a,function(a){c+="<li>"+E(a)+"</li>"}),c+"</ul>"}return""}if(angular.isObject(a)){var c="<table>";return angular.forEach(a,function(a,b){c+="<tr><td>"+b+"</td><td>"+E(a)+"</td></tr>"}),c+"</table>"}if(angular.isString(a)){var d=["http://","https://","file://","mailto:"],e=a;return angular.forEach(d,function(b){e.startsWith(b)&&(e="<a href='"+a+"'>"+a+"</a>")}),e}return a}function F(a){if(a=a.trim(),a.startsWith("[")&&a.endsWith("]")||a.startsWith("{")&&a.endsWith("}"))try{return JSON.parse(a)}catch(b){}return null}function G(a,b){var c=1===a?b:b.pluralize();return""+a+" "+c}function H(a){var b={};if(a){var c=a.indexOf(":");if(c>0){var d=a.substring(c+1),e=d.split(",");angular.forEach(e,function(a){var c=a.split("="),d=c[0],e=c[1]||d;b[d]=e})}}return b}function I(a,b){a.attr("title",b.getTitleWithSeparator(" "))}function J(a,b,c){a.attr("title",b.getTitleWithSeparator(" ")+" "+c)}function K(a,b,c){if(a){var d=a.mbeanTypesToDomain||{},e=d[c]||{},f=e[b];return angular.isArray(f)&&f.length?f[0]:f}return null}function L(b,c,d){var e=a.getMBeanTypeFolder(b,c,d);return a.pathGet(e,["objectName"])}function M(a){return a?a.replace(/(\/|\.)/g,"_"):a}function N(a,b){angular.forEach(a,function(a){var c=a.children;angular.isArray(c)&&c.length>0?N(c,b):b(a)})}function O(a){var b=a.split("#");if(0===b.length)return a;var c=b[1];if(b.length>1){var d=b.last(b.length-2);d.forEach(function(a){c=c+"#"+a})}return c}function P(a){return Q(a.username,a.password)}function Q(a,b){var c=a+":"+b;return c=c.encodeBase64(),"Basic "+c}function R(b){if(a.isBlank(b))return null;var c=b.match(tb);if(null===c)return null;var d=c[1],e=c[3],f=c[4],g=null;g=b.split(a.isBlank(f)?e:f);var h=g[1];return h&&h.startsWith("/")&&(h=h.slice(1,h.length)),{scheme:d,host:e,port:f,path:h}}function S(){var a=document;return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))}function T(b){if(a.isChromeApp())return b;var c=window.location.host;if(!b.startsWith("http://"+c+"/")&&!b.startsWith("https://"+c+"/")){var d=b.indexOf("://");d>0&&(b=b.substring(d+3)),b=b.replace(":","/"),b=a.trimLeading(b,"/"),b=a.trimTrailing(b,"/"),b=a.url("/proxy/"+b)}return b}function U(){a.injector||(a.injector=angular.element(document.documentElement).injector())}function V(b){return a.isBlank(b.recentConnections)&&a.clearConnections(),angular.fromJson(b.recentConnections)}function W(a,b){var c=V(a);c=c.add(b).unique().first(5),a.recentConnections=angular.toJson(c)}function X(a,b){var c=V(a);c=c.exclude(function(a){return a===b}),a.recentConnections=angular.toJson(c)}function Y(){localStorage.recentConnections="[]"}function Z(b){var c=a.loadConnectionMap(),d=Object.clone(b);delete d.userName,delete d.password,c[b.name]=d,a.saveConnectionMap(c)}function ab(b,c){if(a.log.debug("Connecting with options: ",StringHelpers.toString(c)),W(b,c.name),!("userName"in c)){var d=a.injector.get("userDetails");c.userName=d.username,c.password=d.password}Z(c);var e=a.injector.get("$window"),f=(c.view||"#/welcome")+"?con="+c.name;f=f.replace(/\?/g,"&"),f=f.replace(/&/,"?");var g=e.open(f);g.con=c.name,e.passUserDetails={username:c.userName,password:c.password,loginDetails:{}}}function bb(b,c,d){angular.isUndefined(c)&&(c=b.scheme());var e=b.host(),f=b.absUrl(),g=f.indexOf("url=");if(g>0){f=f.substr(g+4);var h=decodeURIComponent(f);if(h&&(g=h.indexOf("/proxy/"),g>0)){h=h.substr(g+7),g=h.indexOf("://"),g>0&&(h=h.substr(g+3));var i=h.split("/");if(i.length>=1&&(e=i[0]),angular.isUndefined(d)&&i.length>=2){var j=a.parseIntValue(i[1],"port number");j&&(d=j)}}}angular.isUndefined(d)&&(d=b.port());var k=c+"://"+e;return 80!=d&&(k+=":"+d),k}function cb(a){var b=a.url();return b.indexOf("/hawtio/proxy/")>0}function db(a){return a}function eb(a,b,c){var d={url:a,username:b,password:c,canonicalNaming:!1,ignoreErrors:!0,mimeType:"application/json"};return new Jolokia(d)}function fb(a,b){var c=0,d=null;return function(){var e=Date.now();return e>c&&(c=e+b,d=a()),d}}function gb(b,c){void 0===c&&(c="JSON");var d=null;try{d=angular.fromJson(b)}catch(e){a.log.info("Failed to parse "+c+" from: "+b+". "+e)}return d}function hb(b){var c="";return c=b===!0?'<i class="icon-check"></i>':b===!1?'<i class="icon-check-empty"></i>':a.humanizeValue(b)}function ib(a,b){var c,d=(a||"").split("?");c=d&&d.length>0?d[1]:"";for(var e=c.split("&"),f=0;f<e.length;f++){var g=e[f].split("=");if(decodeURIComponent(g[0])==b)return decodeURIComponent(g[1])}return null}function jb(b,c,d,e,f,g,h){void 0===e&&(e=null),void 0===f&&(f=null),void 0===g&&(g=null),void 0===h&&(h=null);var i={xhr:null},j=a.lazyLoaders,k=new a.Workspace(b,i,j,c,f,g,d,e,h);return a.log.info("Loading the profile using jolokia: "+b),k.loadTree(),k}function kb(a){if(!angular.isNumber(a))return"XXX";var b=a/1e3,c=Math.floor(b/31536e3);if(c)return G(c,"year");var d=Math.floor((b%=31536e3)/86400);if(d)return G(d,"day");var e=Math.floor((b%=86400)/3600);if(e)return G(e,"hour");var f=Math.floor((b%=3600)/60);return f?G(f,"minute"):(b=Math.floor(b%60),b?G(b,"second"):a+" ms")}function lb(a,b,c){if(!a.any(function(a){a.name===b})){var d="";d=c.useProxy?"/hawtio/proxy/":"//",d+=c.host+":"+c.port+"/"+c.path,a.push({name:b,regex:d.escapeURL(!0),color:UI.colors.sample()}),ob(a)}}function mb(){var a=[];try{a=angular.fromJson(localStorage.regexs)}catch(b){delete localStorage.regexs}return a}function nb(b){var c=a.getRegexs(),d=function(a){return a.name===b};c.any(d)&&(c=c.exclude(d),a.writeRegexs(c))}function ob(a){localStorage.regexs=angular.toJson(a)}function pb(a){if(a){var b="(.*://.*:)(.*)(@)";a=a.replace(new RegExp(b,"i"),"$1xxxxxx$3")}return a}function qb(a,b){if(angular.isUndefined(a)||angular.isUndefined(b))return!0;if(null==a||null==b)return!0;if(a=a.toString().trim().toLowerCase(),b=b.toString().trim().toLowerCase(),0===a.length||0===b.length)return!0;var c=b.split(",");c=c.filter(function(a){return a.length>0}).map(function(a){return a.trim()});var d=c.some(function(b){var c=a.indexOf(b)>-1;return c});return d}a.toPath=b,a.parseMBean=c,a.executePostLoginTasks=d,a.executePreLogoutTasks=e,a.logout=f,a.createHref=g,a.hashToString=h,a.stringToHash=i,a.registerForChanges=j;var rb=null;a.getOrInitObjectFromLocalStorage=k,a.getResponseHistory=o,a.MAX_RESPONSE_CACHE_SIZE=20,a.register=s,a.unregister=t,a.defaultJolokiaErrorHandler=u,a.logJolokiaStackTrace=v,a.xmlNodeToString=w,a.isTextNode=x,a.fileExtension=y,a.getUUID=z;var sb=/[^\d]*(\d+)\.(\d+)(\.(\d+))?.*/;a.parseVersionNumbers=A,a.versionToSortableString=B,a.time=C,a.compareVersionNumberArrays=D,a.valueToHtml=E,a.tryParseJson=F,a.maybePlural=G,a.objectNameProperties=H,a.setPageTitle=I,a.setPageTitleWithTab=J,a.getMBeanTypeFolder=K,a.getMBeanTypeObjectName=L,a.toSafeDomID=M,a.forEachLeafFolder=N,a.extractHashURL=O,a.authHeaderValue=P,a.getBasicAuthHeader=Q;var tb=new RegExp("^(https?)://(([^:/?#]*)(?::([0-9]+))?)");a.parseUrl=R,a.getDocHeight=S,a.useProxyIfExternal=T,a.checkInjectorLoaded=U,a.getRecentConnections=V,a.addRecentConnection=W,a.removeRecentConnection=X,a.clearConnections=Y,a.saveConnection=Z,a.connectToServer=ab,a.extractTargetUrl=bb,a.isProxyUrl=cb,a.doNothing=db,a.bindModelToSearchParam=ControllerHelpers.bindModelToSearchParam,a.reloadWhenParametersChange=ControllerHelpers.reloadWhenParametersChange,a.createJolokia=eb,a.throttled=fb,a.parseJsonText=gb,a.humanizeValueHtml=hb,a.getQueryParameterValue=ib,a.createRemoteWorkspace=jb,a.humanizeMilliseconds=kb,a.storeConnectionRegex=lb,a.getRegexs=mb,a.removeRegex=nb,a.writeRegexs=ob,a.maskPassword=pb,a.matchFilterIgnoreCase=qb}(Core||(Core={}));var IDE;!function(a){function b(a){return Core.getMBeanTypeObjectName(a,"hawtio","IdeFacade")}function c(a,b){var c=b.openInIDEA;return"false"!==c}function d(a,b){var c=b.openInTextMate;return"false"!==c}function e(a,b,c,d,e,f){var g=[],h=null;return a?h=b.execute(a,"findClassAbsoluteFileName",d,e,g,onSuccess(f)):f(h),h}function f(a,b){return void 0===b&&(b=0),angular.isNumber(a)?a:angular.isString(a)?parseInt(a):b}function g(a,b){return a>=b?a:b}function h(a,b,c,d,e,h){void 0===h&&(h=null);var i=null;return a&&(d=g(f(d)-1,0),e=g(f(e)-1,0),i=b.execute(a,"ideaOpenAndNavigate",c,d,e,onSuccess(h))),i}a.getIdeMBean=b,a.isOpenInIdeaSupported=c,a.isOpenInTextMateSupported=d,a.findClassAbsoluteFileName=e,a.ideaOpenAndNavigate=h}(IDE||(IDE={}));var IDE;!function(a){var b=Logger.get("IDE"),c=function(){function c(a,b,c){var d=this;this.localStorage=a,this.workspace=b,this.jolokia=c,this.restrict="E",this.replace=!0,this.transclude=!1,this.scope={fileName:"@",className:"@",line:"@",column:"@"},this.link=function(a,b,c){return d.doLink(a,b,c)}}return c.prototype.doLink=function(c,d){function e(c){c?(m.attr("title","Opening in IDEA: "+c),a.ideaOpenAndNavigate(h,g,c,k,l)):(b.info("Could not find file in source code: "+i+" class: "+j),m.attr("title","Could not find source file: "+i))}var f=this.workspace,g=this.jolokia,h=a.getIdeMBean(f),i=c.fileName;if(h&&i){var j=c.className,k=c.line,l=c.col;if(angular.isDefined(k)&&null!==k||(k=0),angular.isDefined(l)&&null!==l||(l=0),a.isOpenInIdeaSupported(f,localStorage)){var m=$('<button class="btn btn-mini"><img src="app/ide/img/intellijidea.png" width="16" height="16"></button>');m.on("click",function(){b.info("Finding local file name: "+i+" className: "+j),a.findClassAbsoluteFileName(h,g,localStorage,i,j,e)}),d.append(m)}}},c}();a.OpenInIdeDirective=c}(IDE||(IDE={}));var IDE;!function(a){var b="ide";a._module=angular.module(b,["bootstrap","hawtioCore"]),a._module.directive("hawtioOpenIde",["localStorage","workspace","jolokia",function(b,c,d){return new a.OpenInIdeDirective(b,c,d)}]),a._module.run(["helpRegistry",function(a){a.addDevDoc("IDE","app/ide/doc/developer.md")}]),hawtioPluginLoader.addModule(b)}(IDE||(IDE={}));var Core;!function(a){var b=function(){function a(){this.titleElements=[]}return a.prototype.addTitleElement=function(a){this.titleElements.push(a)},a.prototype.getTitle=function(){return this.getTitleExcluding([]," ")},a.prototype.getTitleWithSeparator=function(a){return this.getTitleExcluding([],a)},a.prototype.getTitleExcluding=function(a,b){return this.getTitleArrayExcluding(a).join(b)},a.prototype.getTitleArrayExcluding=function(a){return this.titleElements.map(function(a){var b="";return a&&(b=a(),null===b)?"":b}).exclude(a).exclude("")},a}();a.PageTitle=b}(Core||(Core={}));var Core;!function(a){a.pluginName="hawtioCore",a.templatePath="app/core/html/",a.jolokiaUrl=a.getJolokiaUrl(),Logger.get("Core").debug("jolokiaUrl "+a.jolokiaUrl),a._module=angular.module(a.pluginName,["bootstrap","ngResource","ui","ui.bootstrap.dialog","hawtio-ui"]),a._module.config(["$locationProvider","$routeProvider","$dialogProvider",function(b,c,d){b.html5Mode(!0),d.options({backdropFade:!0,dialogFade:!0}),c.when("/help",{redirectTo:"/help/index"}).when("/login",{templateUrl:a.templatePath+"login.html"}).when("/welcome",{templateUrl:a.templatePath+"welcome.html"}).when("/about",{templateUrl:a.templatePath+"about.html"}).when("/help/:topic/",{templateUrl:a.templatePath+"help.html"}).when("/help/:topic/:subtopic",{templateUrl:a.templatePath+"help.html"})}]),a._module.constant("layoutTree",a.templatePath+"layoutTree.html"),a._module.constant("layoutFull",a.templatePath+"layoutFull.html"),a._module.filter("valueToHtml",function(){return a.valueToHtml}),a._module.filter("humanize",function(){return a.humanizeValue}),a._module.filter("humanizeMs",function(){return a.humanizeMilliseconds}),a._module.filter("maskPassword",function(){return a.maskPassword}),a._module.run(["$rootScope","$routeParams","jolokia","workspace","localStorage","viewRegistry","layoutFull","helpRegistry","pageTitle","branding","toastr","metricsWatcher","userDetails","preferencesRegistry","postLoginTasks","preLogoutTasks","$location","ConnectOptions","locationChangeStartTasks","$http",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){a.checkInjectorLoaded(),p.addTask("ResetPreLogoutTasks",function(){a.checkInjectorLoaded(),q.reset()}),q.addTask("ResetPostLoginTasks",function(){a.checkInjectorLoaded(),p.reset()}),b.lineCount=lineCount,b.params=c,b.is=function(a,b){return angular["is"+a](b)},b.empty=function(a){return $.isEmptyObject(a)},b.$on("UpdateRate",function(a,b){d.stop(),b>0&&d.start(b),Logger.get("Core").debug("Set update rate to: ",b)}),b.$emit("UpdateRate",f.updateRate),b.$on("$locationChangeStart",function(a,b,c){t.execute(a,b,c)}),t.addTask("ConParam",function(b,c){if(a.injector){var d=a.injector.get("$location"),e=a.injector.get("ConnectOptions");if(e.name&&c){var f=d.search();f.con||(a.log.debug("Lost connection parameter (",e.name,") from query params: ",f," resetting"),f.con=e.name,d.search(f))}}}),t.addTask("UpdateSession",function(){a.log.debug("Updating session expiry"),u({method:"post",url:"refresh"}).success(function(b){a.log.debug("Updated session, response: ",b)}).error(function(){a.log.debug("Failed to update session expiry")}),a.log.debug("Made request")}),b.log=function(a){console.log(a)},b.alert=function(a){alert(a)},g.fullscreen=h,g.notree=h,g.help=h,g.welcome=h,g.preferences=h,g.about=h,g.login=h,g.ui=h,i.addUserDoc("index","app/core/doc/overview.md"),i.addUserDoc("preferences","app/core/doc/preferences.md"),i.addSubTopic("index","faq","app/core/doc/FAQ.md"),i.addSubTopic("index","changes","app/core/doc/CHANGES.md"),i.addSubTopic("index","developer","app/core/doc/developer.md"),i.addDevDoc("Core","app/core/doc/coreDeveloper.md"),i.addDevDoc("UI","#/ui/developerPage"),i.addDevDoc("datatable","app/datatable/doc/developer.md"),i.addDevDoc("Force Graph","app/forcegraph/doc/developer.md"),o.addTab("Core","app/core/html/corePreferences.html"),o.addTab("Plugins","app/core/html/pluginPreferences.html"),o.addTab("Console Logging","app/core/html/loggingPreferences.html"),o.addTab("Editor","app/ui/html/editorPreferences.html"),o.addTab("Jolokia","app/core/html/jolokiaPreferences.html"),o.addTab("Reset","app/core/html/resetPreferences.html"),l.options={closeButton:!0,showMethod:"slideDown",hideMethod:"slideUp"};var v={level:null,message:null,action:a.throttled(function(){"WARN"===v.level&&a.notification("warning",v.message),"ERROR"===v.level&&a.notification("error",v.message)},500)};window.logInterceptors.push(function(a,b){v.level=a,v.message=b,v.action()}),setTimeout(function(){a.checkInjectorLoaded(),$("#main-body").fadeIn(2e3).after(function(){Logger.get("Core").info(k.appName+" started"),a.$apply(b),$(window).trigger("resize")})},500)}])}(Core||(Core={})),hawtioPluginLoader.addUrl("plugin"),hawtioPluginLoader.addModule(Core.pluginName),hawtioPluginLoader.addModule("angularFileUpload"),hawtioPluginLoader.registerPreBootstrapTask(function(a){$.support.cors=!0,a()}),hawtioPluginLoader.registerPreBootstrapTask(function(a){$("a[title]").tooltip({selector:"",delay:{show:1e3,hide:100}}),a()}),hawtioPluginLoader.registerPreBootstrapTask(function(a){Core.adjustHeight(),$(window).resize(Core.adjustHeight),a()}),hawtioPluginLoader.registerPreBootstrapTask(function(a){Core._module&&Core.isChromeApp()&&Core._module.config(["$compileProvider",function(a){a.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):/)}]),a()});var ActiveMQ;!function(a){function b(a){var b=null,c=a.selection;return c&&(b=c.findAncestor(function(a){var b=a.entries;return b?"type"in b&&"Broker"===b.type&&"brokerName"in b&&!("destinationName"in b)&&!("destinationType"in b):!1})),b}function c(b){return b.hasDomainAndProperties(a.jmxDomain,{destinationType:"Queue"},4)||b.selectionHasDomainAndType(a.jmxDomain,"Queue")}function d(b){return b.hasDomainAndProperties(a.jmxDomain,{destinationType:"Topic"},4)||b.selectionHasDomainAndType(a.jmxDomain,"Topic")}function e(b){return b.selectionHasDomainAndLastFolderName(a.jmxDomain,"Queue")}function f(b){return b.selectionHasDomainAndLastFolderName(a.jmxDomain,"Topic")}function g(b){return b.hasDomainAndProperties(a.jmxDomain,{service:"JobScheduler"},4)}function h(b){if(b.selectionHasDomainAndType(a.jmxDomain,"Broker")){var c=Core.pathGet(b,["selection"]),d=Core.pathGet(b,["selection","parent"]);return!(d&&(d.ancestorHasType("Broker")||c.ancestorHasType("Broker")))}return!1}a.pluginName="activemq",a._module=angular.module(a.pluginName,["bootstrap","ngResource","ui.bootstrap.dialog","hawtioCore","camel","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/activemq/browseQueue",{templateUrl:"app/activemq/html/browseQueue.html"}).when("/activemq/diagram",{templateUrl:"app/activemq/html/brokerDiagram.html",reloadOnSearch:!1}).when("/activemq/createDestination",{templateUrl:"app/activemq/html/createDestination.html"}).when("/activemq/createQueue",{templateUrl:"app/activemq/html/createQueue.html"}).when("/activemq/createTopic",{templateUrl:"app/activemq/html/createTopic.html"}).when("/activemq/deleteQueue",{templateUrl:"app/activemq/html/deleteQueue.html"}).when("/activemq/deleteTopic",{templateUrl:"app/activemq/html/deleteTopic.html"}).when("/activemq/sendMessage",{templateUrl:"app/camel/html/sendMessage.html"}).when("/activemq/durableSubscribers",{templateUrl:"app/activemq/html/durableSubscribers.html"}).when("/activemq/jobs",{templateUrl:"app/activemq/html/jobs.html"})}]),a._module.run(["$location","workspace","viewRegistry","helpRegistry","preferencesRegistry",function(i,j,k,l,m){function n(a){var b=a.get("org.apache.activemq");o(b),b&&angular.forEach(b.children,function(a){angular.forEach(a.children,function(a){var b=a.children;if(b){var c=["Topic","Queue"];angular.forEach(c,function(a){var c=b.findIndex(function(b){return b.title===a});if(c>0){var d=b[c];b.splice(c,1),b.splice(0,0,d)}})}})})}function o(a){if(a){var b=a.parent,c=a.entries;if(b&&!b.typeName&&c){var d=c.endpoint;("Consumer"===d||"Producer"===d)&&(b.typeName=d);var e=c.connectorName;e&&!a.icon&&(a.icon=Core.url("/img/icons/activemq/connector.png"))}angular.forEach(a.children,function(a){return o(a)})}}k.activemq="app/activemq/html/layoutActiveMQTree.html",l.addUserDoc("activemq","app/activemq/doc/help.md",function(){return j.treeContainsDomainAndProperties("org.apache.activemq")}),m.addTab("ActiveMQ","app/activemq/html/preferences.html",function(){return j.treeContainsDomainAndProperties("org.apache.activemq")}),j.addTreePostProcessor(n);var p=j.attributeColumnDefs;p[a.jmxDomain+"/Broker/folder"]=[{field:"BrokerName",displayName:"Name",width:"**"},{field:"TotalProducerCount",displayName:"Producer #"},{field:"TotalConsumerCount",displayName:"Consumer #"},{field:"StorePercentUsage",displayName:"Store %"},{field:"TempPercentUsage",displayName:"Temp %"},{field:"MemoryPercentUsage",displayName:"Memory %"},{field:"TotalEnqueueCount",displayName:"Enqueue #"},{field:"TotalDequeueCount",displayName:"Dequeue #"}],p[a.jmxDomain+"/Queue/folder"]=[{field:"Name",displayName:"Name",width:"***"},{field:"QueueSize",displayName:"Queue Size"},{field:"ProducerCount",displayName:"Producer #"},{field:"ConsumerCount",displayName:"Consumer #"},{field:"EnqueueCount",displayName:"Enqueue #"},{field:"DequeueCount",displayName:"Dequeue #"},{field:"MemoryPercentUsage",displayName:"Memory %"},{field:"DispatchCount",displayName:"Dispatch #",visible:!1}],p[a.jmxDomain+"/Topic/folder"]=[{field:"Name",displayName:"Name",width:"****"},{field:"ProducerCount",displayName:"Producer #"},{field:"ConsumerCount",displayName:"Consumer #"},{field:"EnqueueCount",displayName:"Enqueue #"},{field:"DequeueCount",displayName:"Dequeue #"},{field:"MemoryPercentUsage",displayName:"Memory %"},{field:"DispatchCount",displayName:"Dispatch #",visible:!1}],p[a.jmxDomain+"/Consumer/folder"]=[{field:"ConnectionId",displayName:"Name",width:"**"},{field:"PrefetchSize",displayName:"Prefetch Size"},{field:"Priority",displayName:"Priority"},{field:"DispatchedQueueSize",displayName:"Dispatched Queue #"},{field:"SlowConsumer",displayName:"Slow ?"},{field:"Retroactive",displayName:"Retroactive"},{field:"Selector",displayName:"Selector"}],p[a.jmxDomain+"/networkConnectors/folder"]=[{field:"Name",displayName:"Name",width:"**"},{field:"UserName",displayName:"User Name"},{field:"PrefetchSize",displayName:"Prefetch Size"},{field:"ConduitSubscriptions",displayName:"Conduit Subscriptions?"},{field:"Duplex",displayName:"Duplex"},{field:"DynamicOnly",displayName:"Dynamic Only"}],p[a.jmxDomain+"/PersistenceAdapter/folder"]=[{field:"IndexDirectory",displayName:"Index Directory",width:"**"},{field:"LogDirectory",displayName:"Log Directory",width:"**"}],j.topLevelTabs.push({id:"activemq",content:"ActiveMQ",title:"Manage your ActiveMQ message brokers",isValid:function(a){return a.treeContainsDomainAndProperties("org.apache.activemq")},href:function(){return"#/jmx/attributes?tab=activemq"},isActive:function(){return j.isTopTabActive("activemq")}}),j.subLevelTabs.push({content:'<i class="icon-envelope"></i> Browse',title:"Browse the messages on the queue",isValid:function(a){return c(a)&&a.hasInvokeRights(a.selection,"browse()")},href:function(){return"#/activemq/browseQueue"}}),j.subLevelTabs.push({content:'<i class="icon-pencil"></i> Send',title:"Send a message to this destination",isValid:function(a){return(c(a)||d(a))&&a.hasInvokeRights(a.selection,"sendTextMessage(java.util.Map,java.lang.String,java.lang.String,java.lang.String)")},href:function(){return"#/activemq/sendMessage"}}),j.subLevelTabs.push({content:'<i class="icon-picture"></i> Diagram',title:"View a diagram of the producers, destinations and consumers",isValid:function(b){return b.isTopTabActive("activemq")||b.selectionHasDomain(a.jmxDomain)},href:function(){return"#/activemq/diagram"}}),j.subLevelTabs.push({content:'<i class="icon-plus"></i> Create',title:"Create a new destination",isValid:function(a){return h(a)&&a.hasInvokeRights(b(a),"addQueue","addTopic")},href:function(){return"#/activemq/createDestination"}}),j.subLevelTabs.push({content:'<i class="icon-plus"></i> Create',title:"Create a new queue",isValid:function(a){return e(a)&&a.hasInvokeRights(b(a),"addQueue")},href:function(){return"#/activemq/createQueue"}}),j.subLevelTabs.push({content:'<i class="icon-plus"></i> Create',title:"Create a new topic",isValid:function(a){return f(a)&&a.hasInvokeRights(b(a),"addQueue")},href:function(){return"#/activemq/createTopic"}}),j.subLevelTabs.push({content:'<i class="icon-remove"></i> Delete Topic',title:"Delete this topic",isValid:function(a){return d(a)&&a.hasInvokeRights(b(a),"removeTopic")},href:function(){return"#/activemq/deleteTopic"}}),j.subLevelTabs.push({content:'<i class="icon-remove"></i> Delete',title:"Delete or purge this queue",isValid:function(a){return c(a)&&a.hasInvokeRights(b(a),"removeQueue")},href:function(){return"#/activemq/deleteQueue"}}),j.subLevelTabs.push({content:'<i class="icon-list"></i> Durable Subscribers',title:"Manage durable subscribers",isValid:function(a){return h(a)},href:function(){return"#/activemq/durableSubscribers"}}),j.subLevelTabs.push({content:'<i class="icon-list"></i> Jobs',title:"Manage jobs",isValid:function(a){return g(a)},href:function(){return"#/activemq/jobs"}})}]),hawtioPluginLoader.addModule(a.pluginName),a.getBroker=b,a.isQueue=c,a.isTopic=d,a.isQueuesFolder=e,a.isTopicsFolder=f,a.isJobScheduler=g,a.isBroker=h
}(ActiveMQ||(ActiveMQ={}));var Fabric;!function(a){function b(){return{hostName:null,port:null,username:null,password:null,maximumContainerCount:null,tags:[],path:null,passPhrase:null,privateKeyFile:null,preferredAddress:null}}function c(){return{hosts:[],defaultPath:null,defaultPort:null,defaultUsername:null,defaultPassword:null,fallbackRepositories:[],defaultPassPhrase:null,defaultPrivateKeyFile:null}}function d(){return{hostName:null,port:null,username:null,password:null,maximumContainerCount:null,tags:[],path:null,passPhrase:null,privateKeyFile:null,preferredAddress:null}}function e(){return{hosts:[]}}a.createSshHostConfiguration=b,a.createSshConfiguration=c,a.createDockerHostConfiguration=d,a.createDockerConfiguration=e}(Fabric||(Fabric={}));var Fabric;!function(a){a.log=Logger.get("Fabric"),a.jmxDomain="io.fabric8",a.managerMBean=a.jmxDomain+":type=Fabric",a.clusterManagerMBean=a.jmxDomain+":type=ClusterServiceManager",a.clusterBootstrapManagerMBean=a.jmxDomain+":type=ClusterBootstrapManager",a.openShiftFabricMBean=a.jmxDomain+":type=OpenShift",a.mqManagerMBean=a.jmxDomain+":type=MQManager",a.healthMBean=a.jmxDomain+":service=Health",a.schemaLookupDomain="hawtio",a.schemaLookupType="SchemaLookup",a.schemaLookupMBean=a.schemaLookupDomain+":type="+a.schemaLookupType,a.useDirectoriesInGit=!0,a.fabricTopLevel="fabric/profiles/",a.profileSuffix=".profile",a.jolokiaWebAppGroupId=a.jmxDomain+".fabric-jolokia",a.currentContainerId="",a.currentContainer={},a.DEFAULT_REST_API="/api/fabric8"}(Fabric||(Fabric={}));var Fabric;!function(a){function b(b,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),c.request({type:"exec",mbean:a.managerMBean,operation:b,arguments:d},{method:"POST",success:e,error:f})}function c(a,c,d,e,f,g,h,i){void 0===i&&(i=Core.defaultJolokiaErrorHandler),b("applyPatches(java.util.List,java.lang.String,java.lang.String,java.lang.String,java.lang.String)",a,[c,d,e,f,g],h,i)}function d(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("setContainerProperty(java.lang.String, java.lang.String, java.lang.Object)",a,[c,d,e],f,g)}function e(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("deleteConfigurationFile(java.lang.String, java.lang.String, java.lang.String)",a,[c,d,e],f,g)}function f(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("setConfigurationFile(java.lang.String, java.lang.String, java.lang.String, java.lang.String)",a,[c,d,e,""],f,g)}function g(a,c,d,e,f,g,h){void 0===h&&(h=Core.defaultJolokiaErrorHandler),b("setConfigurationFile(java.lang.String, java.lang.String, java.lang.String, java.lang.String)",a,[c,d,e,f],g,h)}function h(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("addProfilesToContainer(java.lang.String, java.util.List)",a,[c,d],e,f)}function i(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("removeProfilesFromContainer(java.lang.String, java.util.List)",a,[c,d],e,f)}function j(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("applyProfilesToContainers(java.lang.String, java.util.List, java.util.List)",a,[c,d,e],f,g)}function k(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("applyVersionToContainers(java.lang.String, java.util.List)",a,[c,d],e,f)}function l(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("changeProfileParents(java.lang.String, java.lang.String, java.util.List)",a,[c,d,e],f,g)}function m(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("createProfile(java.lang.String, java.lang.String, java.util.List)",a,[c,d,e],f,g)}function n(a,c,d,e,f,g,h){void 0===h&&(h=Core.defaultJolokiaErrorHandler),b("copyProfile(java.lang.String, java.lang.String, java.lang.String, boolean)",a,[c,d,e,f],g,h)}function o(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("createVersion(java.lang.String, java.lang.String)",a,[c,d],e,f)}function p(a,c,d,e){void 0===e&&(e=Core.defaultJolokiaErrorHandler),b("createVersion(java.lang.String)",a,[c],d,e)}function q(a,c,d){void 0===d&&(d=Core.defaultJolokiaErrorHandler),b("createVersion()",a,[],c,d)}function r(a,c,d,e){void 0===e&&(e=Core.defaultJolokiaErrorHandler),b("deleteVersion(java.lang.String)",a,[c],d,e)}function s(b){return b.execute(a.managerMBean,"versionIds",{method:"GET"})}function t(b,c,d){return b.execute(a.managerMBean,"containerIdsForProfile",c,d,{method:"POST"})}function u(b){return b.execute(a.managerMBean,"containerIds",{method:"POST"})}function v(b,c,d,e){return b.execute(a.managerMBean,"getProfile(java.lang.String, java.lang.String, boolean)",c,d,e,{method:"GET"})}function w(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("deleteProfile(java.lang.String, java.lang.String)",a,[c,d],e,f)}function x(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("profileWebAppURL",a,[c,d,e],f,g)}function y(a,c,d){void 0===d&&(d=Core.defaultJolokiaErrorHandler),b("restApiUrl",a,[],c,d)}function z(a,c,d,e){void 0===e&&(e=Core.defaultJolokiaErrorHandler),b("stopContainer(java.lang.String)",a,[c],d,e)}function A(a,c,d,e){void 0===e&&(e=Core.defaultJolokiaErrorHandler),b("destroyContainer(java.lang.String)",a,[c],d,e)}function B(a,c,d,e){void 0===e&&(e=Core.defaultJolokiaErrorHandler),b("startContainer(java.lang.String)",a,[c],d,e)}function C(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("containerWebAppURL",a,[c,d],e,f)}function D(a,c){b("defaultVersion",a,[],function(a){c(a.value.id)})}a.doAction=b,a.applyPatches=c,a.setContainerProperty=d,a.deleteConfigFile=e,a.newConfigFile=f,a.saveConfigFile=g,a.addProfilesToContainer=h,a.removeProfilesFromContainer=i,a.applyProfiles=j,a.migrateContainers=k,a.changeProfileParents=l,a.createProfile=m,a.copyProfile=n,a.createVersionWithParentAndId=o,a.createVersionWithId=p,a.createVersion=q,a.deleteVersion=r,a.getVersionIds=s,a.getContainerIdsForProfile=t,a.getContainerIds=u,a.getProfile=v,a.deleteProfile=w,a.profileWebAppURL=x,a.restApiUrl=y,a.stopContainer=z,a.destroyContainer=A,a.startContainer=B,a.containerWebAppURL=C,a.getDefaultVersionIdAsync=D}(Fabric||(Fabric={}));var Fabric;!function(a){function b(b,c){return b.dialog({resolve:c,templateUrl:"app/fabric/html/newLocation.html",controller:["$scope","dialog","jolokia","selectedContainers","callbacks",function(b,c,d,e,f){b.newLocationName="",b.close=function(g){c.close(),g&&e.each(function(c){a.setContainerProperty(d,c.id,"location",b.newLocationName,f.successs,f.error)})}}]})}function c(b){var c="createVersion";return c in h||(h[c]=b.dialog({templateUrl:"app/fabric/html/createVersionDialog.html",controller:["$scope","dialog","jolokia","$location",function(b,c,d,e){b.name="",b.close=function(f){c.close(),f&&a.doCreateVersion(b,d,e,b.name)}}]})),h[c]}function d(b){var c="deleteVersion";return c in h||(h[c]=b.dialog({templateUrl:"app/fabric/html/selectVersionDialog.html",controller:["$scope","dialog","jolokia","$location","$rootScope",function(b,c,d,e,f){b.excludes=[],b.$watch("selectedVersion.id",function(a){a&&(b.excludes.find(function(b){return b===a})?(b.warning="This version is in use and cannot be deleted.",b.invalid=!0):(b.warning="This operation cannot be undone!",b.invalid=!1))}),a.getVersionsInUse(d,function(a){b.excludes=a,Core.$apply(b)}),b.invalid=!1,b.title="Delete Version",b.text="Select the version to delete:",b.warning="This operation cannot be undone!",b.action="Delete",b.cancel="Cancel",b.close=function(g){if(c.close(),g){var h=b.selectedVersion.id;a.deleteVersion(d,h,function(){f.$broadcast("wikiBranchesUpdated"),a.getDefaultVersionIdAsync(d,function(c){a.viewVersion(c,e,b),Core.$apply(b)})},function(c){a.log.debug("Failed to delete version ",h," due to ",c.error),a.log.debug("Stack trace: ",c.stacktrace),Core.$apply(b)})}}}]})),h[c]}function e(b){var c="changeDefault";return c in h||(h[c]=b.dialog({templateUrl:"app/fabric/html/selectVersionDialog.html",controller:["$scope","dialog","jolokia","$location",function(b,c,d){b.title="Change Default Version",b.text="Change the default version to:",b.action="Change",b.cancel="Cancel",b.close=function(e){if(c.close(),e){var f=b.selectedVersion.id;a.setDefaultVersion(d,f,function(){Core.notification("success","Set default version to "+f),Core.$apply(b)})}}}]})),h[c]}function f(a){var b="patchVersion";return b in h||(h[b]=a.dialog({templateUrl:"app/fabric/html/selectVersionDialog.html",controller:["$scope","dialog","jolokia","$location",function(a,b,c,d){a.title="Patch Version",a.text="Select the version to patch:",a.action="Continue",a.cancel="Cancel",a.close=function(c){b.close(),c&&(d.url("/fabric/patching").search({versionId:a.selectedVersion.id}),Core.$apply(a))}}]})),h[b]}function g(b,g,h){b.addExtension({title:"Create Version",valid:function(){return a.isFMCContainer(h)},action:function(){c(g).open()},objectName:a.managerMBean,methodName:"createVersion"}),b.addExtension({title:"Delete Version",valid:function(){return a.isFMCContainer(h)},action:function(){d(g).open()},objectName:a.managerMBean,methodName:"deleteVersion"}),b.addExtension({title:"Change Default",valid:function(){return a.isFMCContainer(h)},action:function(){e(g).open()},objectName:a.managerMBean,methodName:"setDefaultVersion"}),b.addExtension({title:"Patch Version",valid:function(){return a.isFMCContainer(h)&&!a.hasOpenShiftFabric(h)},action:function(){f(g).open()},objectName:a.managerMBean,methodName:"applyPatches",argumentTypes:"java.util.List,java.lang.String,java.lang.String,java.lang.String,java.lang.String"})}var h={};a.getCreateLocationDialog=b,a.getVersionCreateDialog=c,a.getVersionDeleteDialog=d,a.getChangeDefaultVersionDialog=e,a.getVersionPatchDialog=f,a.addWikiBranchMenuExtensions=g}(Fabric||(Fabric={}));var CodeEditor;!function(a){function b(a){var b="text";if(a){b="javascript";var c=a.toString().trimLeft().trimRight();c&&"<"===c.first()&&">"===c.last()&&(b="xml")}return b}function c(a){if(a){var b=a.lineCount(),c={line:0,ch:0},d={line:b-1,ch:a.getLine(b-1).length};a.autoFormatRange(c,d),a.setSelection(c,c)}}function d(b){void 0===b&&(b={}),b.extraKeys=b.extraKeys||{},function(a){a=a||{name:"text"},"object"!=typeof a&&(a={name:a});var b=a.name;"javascript"===b&&angular.extend(a,{json:!0})}(b.mode),function(a){var b=CodeMirror.newFoldFunction(CodeMirror.braceRangeFinder),c=CodeMirror.newFoldFunction(CodeMirror.tagRangeFinder),d=function(a,d){var e=a.getOption("mode"),f=e.name;e&&f&&("javascript"===f?b(a,d):("xml"===f||f.startsWith("html"))&&c(a,d))};a.onGutterClick=d,a.extraKeys=angular.extend(a.extraKeys,{"Ctrl-Q":function(a){d(a,a.getCursor().line)}})}(b);var c=b.readOnly;return c||(b.matchBrackets=!0),angular.extend(b,a.GlobalCodeMirrorOptions),b}a.GlobalCodeMirrorOptions={theme:"default",tabSize:4,lineNumbers:!0,indentWithTabs:!0,lineWrapping:!0,autoCloseTags:!0},a.detectTextFormat=b,a.autoFormatEditor=c,a.createEditorSettings=d}(CodeEditor||(CodeEditor={}));var UI;!function(a){function b(a,c){return c in a?a:a.$parent?b(a.$parent,c):null}function c(a,b,c){if(a in b){var d=b[a];if(d&&!d.isBlank())return d}return c}function d(a,b,c,d,e){void 0===e&&(e=null),b.$observe(c,function(b){a[c]=angular.isDefined(b)?b:d,angular.isDefined(e)&&e&&e(a[c])})}function e(){if(!angular.isDefined(a.scrollBarWidth)){var b=document.createElement("div");b.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',b=b.firstChild,document.body.appendChild(b),a.scrollBarWidth=b.offsetWidth-b.clientWidth,document.body.removeChild(b)}return a.scrollBarWidth}a.log=Logger.get("UI"),a.scrollBarWidth=null,a.findParentWith=b,a.getIfSet=c,a.observe=d,a.getScrollbarWidth=e}(UI||(UI={}));var UI;!function(a){a.pluginName="hawtio-ui",a.templatePath="app/ui/html/",a._module=angular.module(a.pluginName,["bootstrap","ngResource","ui","ui.bootstrap"]),a._module.config(["$routeProvider",function(b){b.when("/ui/developerPage",{templateUrl:a.templatePath+"developerPage.html",reloadOnSearch:!1})}]),a._module.factory("UI",function(){return a}),a._module.factory("marked",function(){return marked.setOptions({gfm:!0,tables:!0,breaks:!1,pedantic:!0,sanitize:!1,smartLists:!0,langPrefix:"language-"}),marked}),a._module.directive("compile",["$compile",function(a){return function(b,c,d){b.$watch(function(a){return a.$eval(d.compile)},function(d){c.html(d),a(c.contents())(b)})}}]),a._module.controller("CodeEditor.PreferencesController",["$scope","localStorage","$templateCache",function(a,b,c){a.exampleText=c.get("exampleText"),a.codeMirrorEx=c.get("codeMirrorExTemplate"),a.javascript="javascript",a.preferences=CodeEditor.GlobalCodeMirrorOptions,a.$watch("preferences",function(c,d){c!==d&&(a.codeMirrorEx+=" ",b.CodeMirrorOptions=angular.toJson(angular.extend(CodeEditor.GlobalCodeMirrorOptions,a.preferences)))},!0)}]),a._module.run(["localStorage",function(a){var b=a.CodeMirrorOptions;b&&(b=angular.fromJson(b),CodeEditor.GlobalCodeMirrorOptions=angular.extend(CodeEditor.GlobalCodeMirrorOptions,b))}]),hawtioPluginLoader.addModule(a.pluginName)}(UI||(UI={}));var UI;!function(a){function b(b){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"dropDown.html",scope:{config:"=hawtioDropDown"},controller:["$scope","$element","$attrs",function(a){a.config||(a.config={}),"open"in a.config||(a.config.open=!1),a.action=function(b,c){if("items"in b&&!("action"in b))b.open=!b.open,c.preventDefault(),c.stopPropagation();else if("action"in b){var d=b.action;angular.isFunction(d)?d():angular.isString(d)&&a.$parent.$eval(d,{config:b,$event:c})}},a.$watch("config.items",function(b,c){b!==c&&(a.menuStyle=a.menuStyle+" ")},!0),a.submenu=function(a){return a&&a.submenu?"sub-menu":""},a.icon=function(a){return a&&!Core.isBlank(a.icon)?a.icon:"icon-spacer"},a.open=function(a){return a&&!a.open?"":"open"}}],link:function(a,c,d){a.menuStyle=b.get("withsubmenus.html"),"processSubmenus"in d&&(Core.parseBooleanValue(d.processSubmenus)||(a.menuStyle=b.get("withoutsubmenus.html")))}}}a.hawtioDropDown=b,a._module.directive("hawtioDropDown",["$templateCache",a.hawtioDropDown])}(UI||(UI={}));var ContainerHelpers;!function(a){function b(b){var c=b.map(function(b){return Core.isBlank(b.location)?a.NO_LOCATION:b.location});return c.push(a.NO_LOCATION),c=c.unique().sortBy(""),c=c.exclude(function(a){return Core.isBlank(a)})}function c(a,b){return Fabric.getCreateLocationDialog(b,{selectedContainers:function(){return a.selectedContainers},callbacks:function(){return{success:function(){Core.$apply(a)},error:function(){Core.$apply(a)}}}})}function d(b,c,d){var e={icon:"icon-location-arrow",title:"Set Location",items:[]},f=[];return d.forEach(function(d){f.push({title:d,action:function(){b.selectedContainers.forEach(function(e){var f=d;f===a.NO_LOCATION&&(f=""),Fabric.setContainerProperty(c,e.id,"location",f,function(){Core.$apply(b)},function(){Core.$apply(b)})})}})}),f.push({title:"New...",action:function(){b.createLocationDialog.open()}}),e.items=f,e}function e(a){return a?Core.isBlank(Fabric.currentContainerId)?!1:angular.isObject(a)?a.id===Fabric.currentContainerId:angular.isString(a)?a===Fabric.currentContainerId:!1:!1}function f(a){return a?Core.isBlank(a.jolokiaUrl)?!1:Core.parseBooleanValue(a.alive)?!0:!1:!1}function g(a){var b="Alive";return a.alive?b+=" - "+Core.humanizeValue(a.provisionResult):b="Not Running",b}function h(a){if(a){switch(a.provisionResult){case"success":return a.alive?"green icon-play-circle":"orange icon-off";case"downloading":return"icon-download-alt";case"installing":return"icon-hdd";case"analyzing":case"finalizing":return"icon-refresh icon-spin";case"resolving":return"icon-sitemap";case"error":return"red icon-warning-sign"}if(!a.alive)return"orange icon-off"}return"icon-refresh icon-spin"}function i(a,b){a.path("/fabric/container/"+b.id)}function j(a,b,c,d){void 0===d&&(d=null),Fabric.destroyContainer(b,c,function(){d&&d(),Core.$apply(a)})}function k(a,b,c){a.fabricVerboseNotifications&&Core.notification("info","Starting "+c),Fabric.startContainer(b,c,function(){Core.$apply(a)})}function l(a,b,c){a.fabricVerboseNotifications&&Core.notification("info","Stopping "+c),Fabric.stopContainer(b,c,function(){Core.$apply(a)})}function m(a,b,c){c.forEach(function(c){return l(a,b,c.id)})}function n(a,b,c){c.forEach(function(c){return k(a,b,c.id)})}function o(a){return a.length>0&&a.any(function(a){var b=!1;if(!a.alive)switch(b=!0,a.provisionResult){case"downloading":case"installing":case"analyzing":case"finalizing":case"resolving":b=!1}return b})}function p(a){return a.length>0&&a.any(function(a){return a.alive===!0})}function q(a,b){return void 0===b&&(b=!0),a.length>0&&a.every(function(a){return a.alive===b})}function r(a,b,c){a.containerHelpersAdded||(a.containerHelpersAdded=!0,a.isCurrentContainer=e,a.canConnect=f,a.getStatusTitle=g,a.showContainer=function(a){i(b,a)},a.statusIcon=h,a.everySelectionAlive=function(b){return q(a.selectedContainers,b)},a.anySelectionStartable=function(){return o(a.selectedContainers)},a.anySelectionStoppable=function(){return p(a.selectedContainers)},a.startContainer=function(b){k(a,c,b)},a.stopContainer=function(b){l(a,c,b)},a.startSelectedContainers=function(){n(a,c,a.selectedContainers)},a.stopSelectedContainers=function(){m(a,c,a.selectedContainers)})}a.NO_LOCATION="No Location",a.extractLocations=b,a.getCreateLocationDialog=c,a.buildLocationMenu=d,a.isCurrentContainer=e,a.canConnect=f,a.statusTitle=g,a.statusIcon=h,a.gotoContainer=i,a.doDeleteContainer=j,a.doStartContainer=k,a.doStopContainer=l,a.stopContainers=m,a.startContainers=n,a.anyStartable=o,a.anyStoppable=p,a.allAlive=q,a.decorate=r}(ContainerHelpers||(ContainerHelpers={}));var Fabric;!function(a){function b(a){var b;switch(a){case"child":b=[];break;case"ssh":b=["localip","localhostname","publicip","publichostname","manualip"];break;case"jclouds":b=["localip","localhostname","publicip","publichostname","manualip"];break;case"openshift":b=[];break;case"docker":b=[]}return b}function c(a,b){switch(Core.pathSet(b,["properties","name","required"],!0),Core.pathSet(b,["properties","name","input-attributes","ng-pattern"],"/^[a-z0-9_-]*$/"),delete b.properties.metadataMap,delete b.properties.zookeeperUrl,delete b.properties.zookeeperPassword,delete b.properties.globalResolver,delete b.properties.zooKeeperServerPort,delete b.properties.zooKeeperServerConnectionPort,delete b.properties.agentEnabled,delete b.properties.autoImportEnabled,delete b.properties.importPath,delete b.properties.users,delete b.properties.systemProperties,["zooKeeperServerInitLimit","zooKeeperServerTickTime","zooKeeperServerSyncLimit","zooKeeperServerDataDir","waitForProvision","ensembleStart","migrationTimeout","dataStoreProperties"].forEach(function(a){Core.pathSet(b,["properties",a,"control-attributes","ng-show"],"entity.ensembleServer")}),Core.pathSet(b,["properties","providerType","type"],"hidden"),Core.pathSet(b,["properties","profiles","type"],"hidden"),Core.pathSet(b,["properties","version","type"],"hidden"),Core.pathSet(b.properties,["name","label"],"Container Name"),Core.pathSet(b.properties,["name","container-name-available"],"true"),Core.pathSet(b.properties,["name","tooltip"],"Name of the container to create (or prefix of the container name if you create multiple containers)"),Core.pathSet(b.properties,["number","label"],"Number of containers"),Core.pathSet(b.properties,["number","tooltip"],"The number of containers to create; when set higher than 1 a number will be appended to each container name. Max value: 99"),Core.pathSet(b.properties,["number","input-attributes","min"],"1"),Core.pathSet(b.properties,["number","input-attributes","max"],"99"),Core.pathSet(b.properties,["number","input-attributes","ng-pattern"],"/^[1-9][0-9]?$/"),Core.pathSet(b.properties,["number","required"],!0),Core.pathSet(b.properties,["login","input-attributes","autofill"],"true"),Core.pathSet(b.properties,["password","input-attributes","autofill"],"true"),Core.pathSet(b.properties,["jmxUser","input-attributes","autofill"],"true"),Core.pathSet(b.properties,["jmxUser","tooltip"],"The username for connecting to the container using JMX"),Core.pathSet(b.properties,["jmxPassword","input-attributes","autofill"],"true"),Core.pathSet(b.properties,["jmxPassword","tooltip"],"The password for connecting to the container using JMX"),Core.pathSet(b.properties,["resolver","input-element"],"select"),Core.pathSet(b.properties,["resolver","input-attributes","ng-options"],"r for r in resolvers"),a){case"child":delete b.properties.manualIp,delete b.properties.preferredAddress,delete b.properties.resolver,delete b.properties.ensembleServer,delete b.properties.proxyUri,delete b.properties.adminAccess,delete b.properties.minimumPort,delete b.properties.maximumPort,b.properties.jmxPassword.type="password",Core.pathSet(b.properties,["parent","label"],"Parent Container"),Core.pathSet(b.properties,["parent","tooltip"],"The name of the parent container used to create the child container"),Core.pathSet(b.properties,["parent","input-element"],"select"),Core.pathSet(b.properties,["parent","input-attributes","ng-options"],"c for c in child.rootContainers"),d(b,["jmxUser","jmxPassword","parent"],"required",!0),b.tabs={Common:["name","parent","jmxUser","jmxPassword","number"],Advanced:["*"]};break;case"ssh":delete b.properties.jmxUser,delete b.properties.jmxPassword,delete b.properties.parent,d(b,["host"],"required",!0),Core.pathSet(b.properties,["password","type"],"password"),b.tabs={Common:["name","host","port","username","password","privateKeyFile","passPhrase"],Advanced:["*"]};break;case"jclouds":delete b.properties.jmxUser,delete b.properties.jmxPassword,delete b.properties.parent,b.tabs={Common:["name","owner","credential","providerName","imageId","hardwareId","locationId","number","instanceType"],Advanced:["*"]};break;case"openshift":delete b.properties.jmxUser,delete b.properties.jmxPassword,delete b.properties.parent,delete b.properties.manualIp,delete b.properties.preferredAddress,delete b.properties.ensembleServer,delete b.properties.proxyUri,delete b.properties.adminAccess,delete b.properties.path,delete b.properties.bindAddress,delete b.properties.hostNameContext,delete b.properties.resolver,Core.pathSet(b.properties,["resolver","default"],"publichostname"),Core.pathSet(b.properties,["serverUrl","label"],"OpenShift Broker"),Core.pathSet(b.properties,["serverUrl","tooltip"],"The OpenShift broker host name of the cloud to create the container inside. This is either the URL for your local OpenShift Enterprise installation, or its the public OpenShift online URL: openshift.redhat.com"),Core.pathSet(b.properties,["login","label"],"OpenShift Login"),Core.pathSet(b.properties,["login","tooltip"],"Your personal login to the OpenShift portal"),Core.pathSet(b.properties,["login","input-attributes","autofill"],"true"),Core.pathSet(b.properties,["password","label"],"OpenShift Password"),Core.pathSet(b.properties,["password","tooltip"],"Your personal password on the OpenShift portal"),Core.pathSet(b.properties,["password","type"],"password"),Core.pathSet(b.properties,["name","input-attributes","ng-pattern"],"/^[a-z0-9]*$/"),Core.pathSet(b.properties,["tryLogin","type"],"string"),Core.pathSet(b.properties,["tryLogin","input-attributes","ng-model"],"openShift.tryLogin"),Core.pathSet(b.properties,["tryLogin","label"],"Authenticate"),Core.pathSet(b.properties,["tryLogin","tooltip"],"Authenticate with the OpenShift Broker using your login and password"),Core.pathSet(b.properties,["tryLogin","formTemplate"],'<a ng-click="openShift.login()" ng-disabled="!entity.login || !entity.password || !entity.serverUrl" title="Test you entered the correct OpenShift Broker, login and password" class="btn btn-primary">Login to OpenShift</a><div class="alert" ng-show="openShift.loginFailed" title="Are you sure you correctly entered the OpenShift Broker, login and password correctly?">Login failed</div>'),Core.pathSet(b.properties,["domain","label"],"OpenShift Domain"),Core.pathSet(b.properties,["domain","tooltip"],"What is your unique domain name used for applications you create on OpenShift. Often this is your own user name or group name"),Core.pathSet(b.properties,["domain","input-element"],"select"),Core.pathSet(b.properties,["domain","input-attributes","ng-options"],"c for c in openShift.domains"),Core.pathSet(b.properties,["gearProfile","tooltip"],"Which kind of gear to create"),Core.pathSet(b.properties,["gearProfile","input-element"],"select"),Core.pathSet(b.properties,["gearProfile","input-attributes","ng-options"],"c for c in openShift.gearProfiles"),d(b,["serverUrl","login","password","domain"],"required",!0),b.tabs={Common:["name","serverUrl","login","password","tryLogin","domain","gearProfile","number"],Advanced:["environmentalVariables","jvmOpts","*"]};break;case"docker":delete b.properties.jmxUser,delete b.properties.jmxPassword,delete b.properties.parent,delete b.properties.manualIp,delete b.properties.preferredAddress,delete b.properties.resolver,delete b.properties.ensembleServer,delete b.properties.proxyUri,delete b.properties.adminAccess,delete b.properties.path,delete b.properties.bindAddress,delete b.properties.hostNameContext,b.tabs={Common:["name","number"],Advanced:["environmentalVariables","jvmOpts","*"]};break;case"kubernetes":delete b.properties.jmxUser,delete b.properties.jmxPassword,delete b.properties.parent,delete b.properties.manualIp,delete b.properties.preferredAddress,delete b.properties.resolver,delete b.properties.ensembleServer,delete b.properties.proxyUri,delete b.properties.adminAccess,delete b.properties.path,delete b.properties.bindAddress,delete b.properties.hostNameContext,b.tabs={Common:["name","number"],Advanced:["environmentalVariables","jvmOpts","*"]}}return b}function d(a,b,c,d){b.each(function(b){Core.pathSet(a,["properties",b,c],d)})}a.getResolvers=b,a.customizeSchema=c}(Fabric||(Fabric={}));var Git;!function(a){function b(b,c,e){var f=d(b);return f&&c?new a.JolokiaGit(f,c,e,b.userDetails):null}function c(a){return null!==d(a)}function d(b){return Core.getMBeanTypeObjectName(b,a.jmxDomain,a.mbeanType)}function e(b){return Core.getMBeanTypeFolder(b,a.jmxDomain,a.mbeanType)}function f(a){var b=e(a);return b&&"fabric"===b.entries.repo}a.createGitRepository=b,a.jmxDomain="hawtio",a.mbeanType="GitFacade",a.hasGit=c,a.getGitMBean=d,a.getGitMBeanFolder=e,a.isGitMBeanFabric=f}(Git||(Git={}));var UI;!function(a){function b(a){var b=Core.injector.get("$dialog");return b.dialog({resolve:{options:function(){return a}},templateUrl:"app/ui/html/multiItemConfirmActionDialog.html",controller:["$scope","dialog","options",function(a,b,c){a.options=c,a.close=function(a){b.close(),c.onClose(a)}}]})}var c=function(){function a(){this.show=!1,this.options={backdropFade:!0,dialogFade:!0}}return a.prototype.open=function(){this.show=!0},a.prototype.close=function(){this.show=!1,this.removeBackdropFadeDiv(),setTimeout(this.removeBackdropFadeDiv,100)},a.prototype.removeBackdropFadeDiv=function(){$("div.modal-backdrop").remove()},a}();a.Dialog=c,a.multiItemConfirmActionDialog=b}(UI||(UI={}));var Git;!function(a){var b=function(){function a(a,b,c,d,e){void 0===e&&(e="master"),this.mbean=a,this.jolokia=b,this.localStorage=c,this.userDetails=d,this.branch=e}return a.prototype.getRepositoryLabel=function(a,b){return this.jolokia.request({type:"read",mbean:this.mbean,attribute:["RepositoryLabel"]},onSuccess(function(b){a(b.value.RepositoryLabel)},{error:b}))},a.prototype.exists=function(a,b,c){var d;return d=angular.isDefined(c)&&c?this.jolokia.execute(this.mbean,"exists",a,b,onSuccess(c)):this.jolokia.execute(this.mbean,"exists",a,b),angular.isDefined(d)&&d?!0:!1},a.prototype.read=function(a,b,c){return this.jolokia.execute(this.mbean,"read",a,b,onSuccess(c))},a.prototype.write=function(a,b,c,d,e){var f=this.getUserName(),g=this.getUserEmail();return this.jolokia.execute(this.mbean,"write",a,b,c,f,g,d,onSuccess(e))},a.prototype.writeBase64=function(a,b,c,d,e){var f=this.getUserName(),g=this.getUserEmail();return this.jolokia.execute(this.mbean,"writeBase64",a,b,c,f,g,d,onSuccess(e))},a.prototype.createDirectory=function(a,b,c,d){var e=this.getUserName(),f=this.getUserEmail();return this.jolokia.execute(this.mbean,"createDirectory",a,b,c,e,f,onSuccess(d))},a.prototype.revertTo=function(a,b,c,d,e){var f=this.getUserName(),g=this.getUserEmail();return this.jolokia.execute(this.mbean,"revertTo",a,b,c,d,f,g,onSuccess(e))},a.prototype.rename=function(a,b,c,d,e){var f=this.getUserName(),g=this.getUserEmail();return this.jolokia.execute(this.mbean,"rename",a,b,c,d,f,g,onSuccess(e))},a.prototype.remove=function(a,b,c,d){var e=this.getUserName(),f=this.getUserEmail();return this.jolokia.execute(this.mbean,"remove",a,b,c,e,f,onSuccess(d))},a.prototype.completePath=function(a,b,c,d){return this.jolokia.execute(this.mbean,"completePath",a,b,c,onSuccess(d))},a.prototype.history=function(a,b,c,d,e){return this.jolokia.execute(this.mbean,"history",a,b,c,d,onSuccess(e))},a.prototype.commitTree=function(a,b){return this.jolokia.execute(this.mbean,"getCommitTree",a,onSuccess(b))},a.prototype.commitInfo=function(a,b){return this.jolokia.execute(this.mbean,"getCommitInfo",a,onSuccess(b))},a.prototype.diff=function(a,b,c,d){return this.jolokia.execute(this.mbean,"diff",a,b,c,onSuccess(d))},a.prototype.getContent=function(a,b,c){return this.jolokia.execute(this.mbean,"getContent",a,b,onSuccess(c))},a.prototype.readJsonChildContent=function(a,b,c,d){return this.jolokia.execute(this.mbean,"readJsonChildContent",this.branch,a,b,c,onSuccess(d))},a.prototype.branches=function(a){return this.jolokia.execute(this.mbean,"branches",onSuccess(a))},a.prototype.getUserName=function(){return this.localStorage.gitUserName||this.userDetails.username||"anonymous"},a.prototype.getUserEmail=function(){return this.localStorage.gitUserEmail||"anonymous@gmail.com"},a}();a.JolokiaGit=b}(Git||(Git={}));var PluginHelpers;!function(a){function b(a,b){return function(c,d){return a.controller(b+"."+c,d)}}function c(a){return function(b,c){return void 0===c&&(c=!0),{templateUrl:UrlHelpers.join(a,b),reloadOnSearch:c}}}a.createControllerFunction=b,a.createRoutingFunction=c}(PluginHelpers||(PluginHelpers={}));var DockerRegistry;!function(a){function b(b){var c=Core.injector.get("DockerRegistryRestURL"),d=Core.injector.get("$http");c.then(function(c){d.get(UrlHelpers.join(c,a.SEARCH_FRAGMENT)).success(function(a){b(c,a)}).error(function(d){a.log.debug("Error fetching image repositories:",d),b(c,null)})})}function c(){var a=Core.injector.get("$q"),c=(Core.injector.get("$rootScope"),a.defer());return b(function(a,b){if(b&&b.results){var d=b.results;d=d.sortBy(function(a){return a.name}).first(15),d=d.map(function(a){return a.name}),c.resolve(d)}else c.reject([])}),c.promise}a.context="/docker-registry",a.hash=UrlHelpers.join("#",a.context),a.defaultRoute=UrlHelpers.join(a.hash,"list"),a.basePath=UrlHelpers.join("app",a.context),a.templatePath=UrlHelpers.join(a.basePath,"html"),a.pluginName="DockerRegistry",a.log=Logger.get(a.pluginName),a.SEARCH_FRAGMENT="/v1/search",a.getDockerImageRepositories=b,a.completeDockerRegistry=c}(DockerRegistry||(DockerRegistry={}));var Wiki;!function(a){function b(a,b,c){return null!==Git.createGitRepository(a,b,c)}function c(b,c,d){var e=Core.trimLeading(b,"#");c(function(){a.log.debug("About to navigate to: "+e),d.url(e)},100)}function d(b){var c=b.branch,d=Core.trimLeading(a.startLink(c),"#");return a.customWikiViewPages.map(function(a){return d+a})}function e(b,c){var d=new Folder("New Documents");return f(b,c,d,a.documentTemplates),d}function f(a,b,c,d){angular.forEach(d,function(d){if(!d.fabricOnly||Fabric.hasFabric(a)){if(d.generated){if(d.generated.mbean){var e=a.treeContainsDomainAndProperties.apply(a,d.generated.mbean);if(!e)return}d.generated.init&&d.generated.init(a,b)}var g=d.label||j,h=new Folder(g);h.parent=c,h.entity=d;var i=d.addClass;i&&(h.addClass=i);var j=d.exemplar,k=c.key||"";h.key=k?k+"_"+j:j;var l=d.icon;l&&(h.icon=Core.url(l));var m=d.tooltip||d.description||"";
h.tooltip=m,d.folder&&(h.isFolder=function(){return!0}),c.children.push(h);var n=d.children;n&&f(a,b,h,n)}})}function g(a){var b="#/wiki";return a&&(b+="/branch/"+a),b}function h(a){return a&&(a.endsWith("index.md")||a.endsWith("index.html")||a.endsWith("index"))?!0:!1}function i(a,b,c,d){void 0===d&&(d=null);var e=null,f=g(a);if(b){var i=h(b)?"/book/":"/view/";e=f+i+m(Core.trimLeading(b,"/"))}else{var j=c.path();e="#"+j.replace(/(edit|create)/,"view")}return d&&b&&b.endsWith(d)?e:(d&&(e.endsWith("/")||(e+="/"),e+=d),e)}function j(a,b,c,d){return void 0===d&&(d=null),i(a,b,c,d)}function k(b,c,d){var e=null,f=a.fileFormat(c);switch(f){case"image":break;default:var h=g(b);if(c)e=h+"/edit/"+m(c);else{var i=d.path();e="#"+i.replace(/(view|create)/,"edit")}}return e}function l(a,b,c,d){var e=c.path(),f=g(a),h="";h=b?f+"/create/"+m(b):"#"+e.replace(/(view|edit|formTable)/,"create");var i=h.lastIndexOf("/");return i>0&&!d.children&&!e.startsWith("/wiki/formTable")&&(h=h.substring(0,i+1)),h}function m(a){return a.split("/").map(encodeURIComponent).join("/")}function n(a){return a.split("/").map(decodeURIComponent).join("/")}function o(a,b){var c=A(a),d=null;return b||(b=Core.injector.get("fileExtensionTypeRegistry")),angular.forEach(b,function(a,b){a.indexOf(c)>=0&&(d=b)}),d}function p(a){if(a){var b=a.lastIndexOf("/");if(b>0)return a.substring(b+1)}return a}function q(a){if(a){var b=a.lastIndexOf("/");if(b>0)return a.substring(0,b)}return""}function r(b){return b&&angular.forEach(a.hideExtensions,function(a){b.endsWith(a)&&(b=b.substring(0,b.length-a.length))}),b}function s(a,b){var c=t(a,b);c=Core.url("/"+c);var d=Core.getConnectionNameParameter(location.search);if(d){var e=Core.getConnectOptions(d);e&&(e.path=c,c=Core.createServerConnectionUrl(e))}return c}function t(a,b){return a=a||"master",b=b||"/",UrlHelpers.join("git/"+a,b)}function u(b){var c=b.name,d=b.path,e=b.branch,f=b.directory,g=b.xmlNamespaces,h=b.iconUrl,i=b.entity;i&&(c=c||i.name,d=d||i.path,e=e||i.branch,f=f||i.directory,g=g||i.xmlNamespaces,h=h||i.iconUrl),e=e||"master";var j=null,k=null,l=A(c);if(g&&g.length&&(g.any(function(b){return a.camelNamespaces.any(b)})?k="img/icons/camel.svg":g.any(function(b){return a.dozerNamespaces.any(b)})?k="img/icons/dozer/dozer.gif":g.any(function(b){return a.activemqNamespaces.any(b)})?k="img/icons/messagebroker.svg":a.log.debug("file "+c+" has namespaces "+g)),h){j=null,k=UrlHelpers.join("git",h);var m=Core.getConnectionNameParameter(location.search);if(m){var n=Core.getConnectOptions(m);n&&(n.path=Core.url("/"+k),k=Core.createServerConnectionUrl(n))}}if(!k)if(f)switch(l){case"profile":j="icon-book";break;default:j="icon-folder-close"}else switch(l){case"png":case"svg":case"jpg":case"gif":j=null,k=a.gitRelativeURL(e,d);var m=Core.getConnectionNameParameter(location.search);if(m){var n=Core.getConnectOptions(m);n&&(n.path=Core.url("/"+k),k=Core.createServerConnectionUrl(n))}break;case"json":case"xml":j="icon-file-text";break;case"md":j="icon-file-text-alt";break;default:j="icon-file-alt"}return k?"<img src='"+Core.url(k)+"'>":"<i class='"+j+"'></i>"}function v(a){var b=a.getProperty("name"),c=A(b),d=a.getProperty("directory");return d?"icon-folder-close":"xml"===c?"icon-cog":"md"===c?"icon-file-text-alt":"icon-file-alt"}function w(b,c,d){b.pageId=a.pageId(c,d),b.branch=c.branch||d.search().branch,b.objectId=c.objectId,b.startLink=a.startLink(b.branch),b.historyLink=g(b.branch)+"/history/"+(b.pageId||"")}function x(a,b,c,d){if(void 0===d&&(d=!1),d){c.branches=Fabric.getVersionIds(a);var e=Fabric.getDefaultVersionId(a);c.branch||(c.branch=e),c.branches=c.branches.sortBy(function(a){return Core.versionToSortableString(a)},!0),Core.$apply(c)}else b.branches(function(a){c.branches=a.sortBy(function(a){return Core.versionToSortableString(a)},!0),!c.branch&&c.branches.find(function(a){return"master"===a})&&(c.branch="master"),Core.$apply(c)})}function y(a,b){var c=a.page;if(!c){for(var d=0;100>d;d++){var e=a["path"+d];if(!angular.isDefined(e))break;c?c+="/"+e:c=e}return c||"/"}return c||(c=z(b.path())),c}function z(a){var b="/wiki/";if(a&&a.startsWith(b)){var c=a.indexOf("/",b.length+1);if(c>0)return a.substring(c+1,a.length)}return null}function A(a){return a.indexOf("#")>0&&(a=a.substring(0,a.indexOf("#"))),Core.fileExtension(a,"markdown")}function B(a){console.log("Completed operation with status: "+JSON.stringify(a))}function C(a){if(a)try{return JSON.parse(a)}catch(b){Core.notification("error","Failed to parse JSON: "+b)}return null}function D(b,c,d,e){var f=e?"."+e:"",g=c.path(),h=g,i=g.lastIndexOf("/");if(i>0){var j=g.substring(i+1);j.indexOf(".")>=0&&(h=g.substring(0,i))}if(d.startsWith("../")){var k=d.split("/"),l=h.split("/"),m=k.filter(function(a){return".."===a});return k=k.last(k.length-m.length),l=l.first(l.length-m.length),"#"+l.join("/")+"/"+k.join("/")+f+c.hash()}return d.startsWith("/")?a.branchLink(b.branch,d+f,c)+f:a.excludeAdjustmentPrefixes.any(function(a){return d.startsWith(a)})?null:"#"+h+"/"+d+f+c.hash()}a.log=Logger.get("Wiki"),a.camelNamespaces=["http://camel.apache.org/schema/spring","http://camel.apache.org/schema/blueprint"],a.springNamespaces=["http://www.springframework.org/schema/beans"],a.droolsNamespaces=["http://drools.org/schema/drools-spring"],a.dozerNamespaces=["http://dozer.sourceforge.net"],a.activemqNamespaces=["http://activemq.apache.org/schema/core"],a.excludeAdjustmentPrefixes=["http://","https://","#"],function(a){a[a.List=0]="List",a[a.Icon=1]="Icon"}(a.ViewMode||(a.ViewMode={}));a.ViewMode;a.customWikiViewPages=["/formTable","/camel/diagram","/camel/canvas","/camel/properties","/dozer/mappings"],a.hideExtensions=[".profile"];var E=/^[a-zA-Z0-9._-]*$/,F="Name must be: letters, numbers, and . _ or - characters",G=/^[a-z0-9._-]*$/,H="Name must be: lower-case letters, numbers, and . _ or - characters";a.documentTemplates=[{label:"Folder",tooltip:"Create a new folder to contain documents",folder:!0,icon:"/img/icons/wiki/folder.gif",exemplar:"myfolder",regex:G,invalid:H},{label:"App",tooltip:"Creates a new App folder used to configure and run containers",addClass:"icon-cog green",exemplar:"myapp",regex:E,invalid:F,extension:"",generated:{mbean:["io.fabric8",{type:"KubernetesTemplateManager"}],init:function(){},generate:function(b){a.log.debug("Got options: ",b),b.form.name=b.name,b.form.path=b.parentId,b.form.branch=b.branch;var c=angular.toJson(b.form),d=Core.injector.get("jolokia");d.request({type:"exec",mbean:"io.fabric8:type=KubernetesTemplateManager",operation:"createAppByJson",arguments:[c]},onSuccess(function(c){a.log.debug("Generated app, response: ",c),b.success(void 0)},{error:function(a){b.error(a.error)}}))},form:function(a,b){return b.doDockerRegistryCompletion||(b.fetchDockerRepositories=function(){return DockerRegistry.completeDockerRegistry()}),{summaryMarkdown:"Add app summary here",replicaCount:1}},schema:{description:"App settings",type:"java.lang.String",properties:{dockerImage:{description:"Docker Image",type:"java.lang.String","input-attributes":{required:"","class":"input-xlarge",typeahead:"repo for repo in fetchDockerRepositories() | filter:$viewValue","typeahead-wait-ms":"200"}},summaryMarkdown:{description:"Short Description",type:"java.lang.String","input-attributes":{"class":"input-xlarge"}},replicaCount:{description:"Replica Count",type:"java.lang.Integer","input-attributes":{min:"0"}},labels:{description:"Labels",type:"map",items:{type:"string"}}}}}},{label:"Fabric8 Profile",tooltip:"Create a new empty fabric profile. Using a hyphen ('-') will create a folder heirarchy, for example 'my-awesome-profile' will be available via the path 'my/awesome/profile'.",profile:!0,addClass:"icon-book green",exemplar:"user-profile",regex:G,invalid:H,fabricOnly:!0},{label:"Properties File",tooltip:"A properties file typically used to configure Java classes",exemplar:"properties-file.properties",regex:E,invalid:F,extension:".properties"},{label:"JSON File",tooltip:"A file containing JSON data",exemplar:"document.json",regex:E,invalid:F,extension:".json"},{label:"Key Store File",tooltip:"Creates a keystore (database) of cryptographic keys, X.509 certificate chains, and trusted certificates.",exemplar:"keystore.jks",regex:E,invalid:F,extension:".jks",generated:{mbean:["hawtio",{type:"KeystoreService"}],init:function(a,b){{var c="hawtio:type=KeystoreService";a.jolokia.request({type:"read",mbean:c,attribute:"SecurityProviderInfo"},{success:function(a){b.securityProviderInfo=a.value,Core.$apply(b)},error:function(a){console.log("Could not find the supported security algorithms: ",a.error),Core.$apply(b)}})}},generate:function(a){{var b=JSON.stringify(a.form),c="hawtio:type=KeystoreService";a.workspace.jolokia.request({type:"exec",mbean:c,operation:"createKeyStoreViaJSON(java.lang.String)",arguments:[b]},{method:"POST",success:function(b){a.success(b.value)},error:function(b){a.error(b.error)}})}},form:function(a,b){return{storeType:b.securityProviderInfo.supportedKeyStoreTypes[0],createPrivateKey:!1,keyLength:4096,keyAlgorithm:b.securityProviderInfo.supportedKeyAlgorithms[0],keyValidity:365}},schema:{description:"Keystore Settings",type:"java.lang.String",properties:{storePassword:{description:"Keystore password.",type:"password","input-attributes":{required:"","ng-minlength":6}},storeType:{description:"The type of store to create",type:"java.lang.String","input-element":"select","input-attributes":{"ng-options":"v for v in securityProviderInfo.supportedKeyStoreTypes"}},createPrivateKey:{description:"Should we generate a self-signed private key?",type:"boolean"},keyCommonName:{description:"The common name of the key, typically set to the hostname of the server",type:"java.lang.String","control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyLength:{description:"The length of the cryptographic key",type:"Long","control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyAlgorithm:{description:"The key algorithm",type:"java.lang.String","input-element":"select","input-attributes":{"ng-options":"v for v in securityProviderInfo.supportedKeyAlgorithms"},"control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyValidity:{description:"The number of days the key will be valid for",type:"Long","control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyPassword:{description:"Password to the private key",type:"password","control-group-attributes":{"ng-show":"formData.createPrivateKey"}}}}}},{label:"Markdown Document",tooltip:"A basic markup document using the Markdown wiki markup, particularly useful for ReadMe files in directories",exemplar:"ReadMe.md",regex:E,invalid:F,extension:".md"},{label:"Text Document",tooltip:"A plain text file",exemplar:"document.text",regex:E,invalid:F,extension:".txt"},{label:"HTML Document",tooltip:"A HTML document you can edit directly using the HTML markup",exemplar:"document.html",regex:E,invalid:F,extension:".html"},{label:"XML Document",tooltip:"An empty XML document",exemplar:"document.xml",regex:E,invalid:F,extension:".xml"},{label:"Integration Flows",tooltip:"Camel routes for defining your integration flows",children:[{label:"Camel XML document",tooltip:"A vanilla Camel XML document for integration flows",icon:"/img/icons/camel.svg",exemplar:"camel.xml",regex:E,invalid:F,extension:".xml"},{label:"Camel OSGi Blueprint XML document",tooltip:"A vanilla Camel XML document for integration flows when using OSGi Blueprint",icon:"/img/icons/camel.svg",exemplar:"camel-blueprint.xml",regex:E,invalid:F,extension:".xml"},{label:"Camel Spring XML document",tooltip:"A vanilla Camel XML document for integration flows when using the Spring framework",icon:"/img/icons/camel.svg",exemplar:"camel-spring.xml",regex:E,invalid:F,extension:".xml"}]},{label:"Data Mapping Document",tooltip:"Dozer based configuration of mapping documents",icon:"/img/icons/dozer/dozer.gif",exemplar:"dozer-mapping.xml",regex:E,invalid:F,extension:".xml"}],a.isWikiEnabled=b,a.goToLink=c,a.customViewLinks=d,a.createWizardTree=e,a.addCreateWizardFolders=f,a.startLink=g,a.isIndexPage=h,a.viewLink=i,a.branchLink=j,a.editLink=k,a.createLink=l,a.encodePath=m,a.decodePath=n,a.fileFormat=o,a.fileName=p,a.fileParent=q,a.hideFileNameExtensions=r,a.gitRestURL=s,a.gitRelativeURL=t,a.fileIconHtml=u,a.iconClass=v,a.initScope=w,a.loadBranches=x,a.pageId=y,a.pageIdFromURI=z,a.fileExtension=A,a.onComplete=B,a.parseJson=C,a.adjustHref=D}(Wiki||(Wiki={}));var Fabric;!function(a){var b=function(){function a(){this.icons={}}return a.prototype.addIcons=function(a,b){for(var c=this,d=[],e=2;e<arguments.length;e++)d[e-2]=arguments[e];this.addIcon(a,b),d&&angular.isArray(d)&&d.forEach(function(b){c.addIcon(a,b)})},a.prototype.addIcon=function(a,b){this.icons[b]=a},a.prototype.getIcons=function(a){var b=this,c=[];return a&&angular.isArray(a)&&a.forEach(function(a){b.icons[a]&&c.push(b.icons[a])}),c.unique()},a.prototype.getIcon=function(a){return this.icons[a]},a}();a.IconRegistry=b,a.javaIcon={title:"Java",type:"img",src:"img/icons/java.svg"},a.serviceIconRegistry=new b,a.serviceIconRegistry.addIcons({title:"Kubernetes",type:"img",src:"img/icons/kubernetes.svg"},"io.kubernetes"),a.serviceIconRegistry.addIcons({title:"Fabric8",type:"img",src:"img/icons/fabric8_icon.svg"},"io.fabric8","org.fusesource.fabric"),a.serviceIconRegistry.addIcons({title:"hawtio",type:"img",src:"img/hawtio_icon.svg"},"hawtio"),a.serviceIconRegistry.addIcons({title:"Apache ActiveMQ",type:"img",src:"img/icons/messagebroker.svg"},"org.apache.activemq"),a.serviceIconRegistry.addIcons({title:"Apache Camel",type:"img",src:"img/icons/camel.svg"},"org.apache.camel"),a.serviceIconRegistry.addIcons({title:"Apache CXF",type:"icon",src:"icon-puzzle-piece"},"org.apache.cxf"),a.serviceIconRegistry.addIcons({title:"Apache Karaf",type:"icon",src:"icon-beaker"},"org.apache.karaf"),a.serviceIconRegistry.addIcons({title:"Apache Zookeeper",type:"icon",src:"icon-group"},"org.apache.zookeeper"),a.serviceIconRegistry.addIcons({title:"Jetty",type:"img",src:"img/icons/jetty.svg"},"org.eclipse.jetty.server"),a.serviceIconRegistry.addIcons({title:"Apache Tomcat",type:"img",src:"img/icons/tomcat.svg"},"Catalina","Tomcat"),a.serviceIconRegistry.addIcons({title:"WildFly",type:"img",src:"img/icons/wildfly.svg"},"jboss","wildfly"),a.serviceIconRegistry.addIcons({title:"Apache Cassandra",type:"img",src:"img/icons/cassandra.svg","class":"girthy"},"org.apache.cassandra.db","org.apache.cassandra.metrics","org.apache.cassandra.net","org.apache.cassandra.request"),a.containerIconRegistry=new b,a.containerIconRegistry.addIcons({title:"Apache Karaf",type:"icon",src:"icon-beaker"},"karaf"),a.containerIconRegistry.addIcons({title:"Apache Cassandra",type:"img",src:"img/icons/cassandra.svg","class":"girthy"},"Cassandra"),a.containerIconRegistry.addIcons({title:"Apache Tomcat",type:"img",src:"img/icons/tomcat.svg"},"Tomcat"),a.containerIconRegistry.addIcons({title:"Apache TomEE",type:"img",src:"img/icons/tomcat.svg"},"TomEE"),a.containerIconRegistry.addIcons({title:"Jetty",type:"img",src:"img/icons/jetty.svg"},"Jetty"),a.containerIconRegistry.addIcons({title:"Kubernetes",type:"img",src:"img/icons/kubernetes.svg"},"kubelet"),a.containerIconRegistry.addIcons({title:"WildFly",type:"img",src:"img/icons/wildfly.svg"},"WildFly"),a.containerIconRegistry.addIcons(a.javaIcon,"java")}(Fabric||(Fabric={}));var Core;!function(a){a._module.controller("Core.LoginController",["$scope","jolokia","userDetails","jolokiaUrl","workspace","localStorage","branding","postLoginTasks",function(b,c,d,e,f,g,h){if(c.stop(),b.userDetails=d,b.entity={username:"",password:""},b.backstretch=$.backstretch(h.loginBg),b.rememberMe=!1,"userDetails"in g){b.rememberMe=!0;var i=angular.fromJson(g.userDetails);b.entity.username=i.username,b.entity.password=i.password}b.branding=h,b.$watch("userDetails",function(a){a.username&&(b.entity.username=a.username),a.password&&(b.entity.password=a.password)},!0),b.$on("$routeChangeStart",function(){b.backstretch&&b.backstretch.destroy()}),b.doLogin=function(){if(e){var h="auth/login/";""!=b.entity.username.trim()&&$.ajax(h,{type:"POST",success:function(e){d.username=b.entity.username,d.password=b.entity.password,d.loginDetails=e,b.rememberMe?g.userDetails=angular.toJson(d):delete g.userDetails,c.start(),f.loadTree(),a.executePostLoginTasks(),a.$apply(b)},error:function(c,d,e){switch(c.status){case 401:a.notification("error","Failed to log in, "+e);break;case 403:a.notification("error","Failed to log in, "+e);break;default:a.notification("error","Failed to log in, "+e)}a.$apply(b)},beforeSend:function(c){c.setRequestHeader("Authorization",a.getBasicAuthHeader(b.entity.username,b.entity.password))}})}}}])}(Core||(Core={}));var Fabric;!function(a){function b(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"Fabric"})}function c(a){return d(a)}function d(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"ClusterBootstrapManager"})}function e(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"ClusterServiceManager"})}function f(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"ZooKeeper"})}function g(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"OpenShift"})}function h(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"MQManager"})}function i(b){return b.treeContainsDomainAndProperties(a.schemaLookupDomain,{type:a.schemaLookupType})}function j(a){return a.treeContainsDomainAndProperties(Git.jmxDomain,{type:Git.mbeanType})}function k(b){var c=a.hasFabric(b),d=a.hasSchemaMBean(b),e=a.hasGitMBean(b);return c&&d&&e}function l(a){return b(a)&&(e(a)||d(a)||f(a))}function m(b,c,d,e){if(!b.fabricInitialized){b.fabricInitialized=!0,ContainerHelpers.decorate(b,c,d),b.gotoProfile=function(b,f){a.gotoProfile(e,d,e.localStorage,c,b,f)},b.refreshProfile=function(c,e){a.log.debug("Refreshing profile: "+e+"/"+c),c&&e&&d.request({type:"exec",mbean:a.managerMBean,operation:"refreshProfile",arguments:[c,e]},{method:"POST",success:function(){Core.notification("success","Triggered refresh of profile "+e+"/"+c),Core.$apply(b)},error:function(d){a.log.warn("Failed to trigger refresh for profile "+e+"/"+c+" due to: ",d.error),a.log.info("Stack trace: ",d.stacktrace),Core.$apply(b)}})},b.getVersionsToExclude=function(){if(!b.selectedContainers||0===b.selectedContainers.length)return[];var a=b.selectedContainers.map(function(a){return a.versionId});return a=a.unique(),a.length>1?[]:a},b.hasFabricWiki=function(){return Git.isGitMBeanFabric(e)},b.createRequiredContainers=function(a){var b=a.id,d={};b&&(d.profileIds=b);var e=a.versionId||a.version;e&&(d.versionId=e);var f=a.requirements;if(f){var g=f.minimumInstances;if(g){var h=g-(a.count||0);h>1&&(d.number=h)}}c.url("/fabric/containers/createContainer").search(d)},b.createContainer=function(){var a=null,b=S(d);angular.forEach(["openshift","docker","jclouds"],function(c){!a&&b[c]&&(a=c)}),a||(a="child"),c.url("/fabric/containers/createContainer").search("tab",a)},b.createChildContainer=function(a){a.root&&a.alive&&c.url("/fabric/containers/createContainer").search({tab:"child",parentId:a.id})},b.showProfile=function(f){var g=f.versionId||f.version||b.activeVersionId;a.gotoProfile(e,d,localStorage,c,g,f)},b.getSelectedClass=function(a){var b=[];return a.selected&&b.push("selected"),angular.isDefined(a.root)&&a.root===!1&&b.push("child-container"),b.join(" ")},b.isEnsembleContainer=function(a){return angular.isArray(b.ensembleContainerIds)?b.ensembleContainerIds.any(a):!1},b.connect={dialog:new UI.Dialog,saveCredentials:!1,userName:null,password:null,container:null,view:null,onOK:function(){var a=b.connect.userName,c=b.connect.password,d=Core.injector.get("userDetails");d.password||(d.password=c);var e=b.connect.container;b.connect.saveCredentials&&(b.connect.saveCredentials=!1,a&&(localStorage["fabric.userName"]=a),c&&(localStorage["fabric.password"]=c));var f=Core.createConnectOptions({jolokiaUrl:e.jolokiaUrl,userName:a,password:c,useProxy:!0,view:b.connect.view,name:e.id});Core.connectToServer(localStorage,f),b.connect.container={},setTimeout(function(){b.connect.dialog.close(),Core.$apply(b)},100)}},b.doConnect=function(a,c){if(b.canConnect(a)){var d=Core.injector.get("userDetails");b.connect.userName=d.username,b.connect.password=d.password,b.connect.container=a,b.connect.view=c||"#/openlogs";var e=localStorage.fabricAlwaysPrompt;e&&"false"!==e||!b.connect.userName||!b.connect.password?b.connect.dialog.open():b.connect.onOK()}},b.confirmDeleteDialog={dialog:new UI.Dialog,onOk:function(){b.confirmDeleteDialog.dialog.close(),angular.isDefined(b.containerId)?(Core.unregister(d,b),c.path("/fabric/containers"),ContainerHelpers.doDeleteContainer(b,d,b.containerId)):angular.isDefined(b.selectedContainers)?b.selectedContainers.each(function(a){ContainerHelpers.doDeleteContainer(b,d,a.id)}):a.log.info("Asked to delete containers but no containerId or selectedContainers attributes available")},open:function(){b.confirmDeleteDialog.dialog.open()},close:function(){b.confirmDeleteDialog.dialog.close()}},b.$watch("selectedContainers",function(a,c){if(a!==c){var d=b.selectedContainers.length;b.versionTitle="Migrate "+Core.maybePlural(d,"Container")+" to:"}}),b.onVersionChange=function(c){var e=[];if(angular.isDefined(b.selectedContainers))e=b.selectedContainers.map(function(a){return a.id});else{if(!angular.isDefined(b.row))return;e=[b.row.id]}a.log.info("Setting version to "+c+" on containers: "+e),a.migrateContainers(d,c,e,function(){Core.notification("success","Initiated container migration to version <strong>"+c+"</strong>, changes make take some time to complete"),Core.$apply(b)},function(c){a.log.error("Failed to migrate containers due to ",c.error),a.log.info("Stack trace: ",c.stacktrace),Core.$apply(b)})};var f=e.localStorage.fabricVerboseNotifications;b.fabricVerboseNotifications=f&&"false"!==f}}function n(a,b,c){var d="/wiki/branch/"+a+"/view/fabric/profiles",e=b.path(),f=c.branch||c.$parent.branch;e.startsWith("/wiki/branch/")&&f?(e=e.replace("/branch/"+f,"/branch/"+a),b.path(e)):b.path(d)}function o(b,c,d,e){var f=function(a){var c=a.value.id;Core.notification("success","Created version <strong>"+c+"</strong>, switching to this new version");var e=b.$root||b.$rootScope||b;e&&e.$broadcast("wikiBranchesUpdated"),n(c,d,b),Core.$apply(b)},g=function(c){a.log.error("Failed to create version due to :",c.error),a.log.info("stack trace: ",c.stacktrace),Core.$apply(b)};Core.isBlank(e)?a.createVersion(c,f,g):a.createVersionWithId(c,e,f,g)}function p(a,b){return(a||[]).sortBy(function(a){var b=parseFloat(a.id);return 0/0===b&&(b=a.id),b},b)}function q(b){var c=null;if(angular.isDefined(b)&&b.has(a.fabricTopLevel)&&b!==a.fabricTopLevel){var d=b.remove(a.fabricTopLevel);if(a.useDirectoriesInGit||!d.has("/")){var e=d.indexOf(a.profileSuffix+"/"),f=d.endsWith(a.profileSuffix);(!a.useDirectoriesInGit||f||e>0)&&(a.useDirectoriesInGit&&(f?d=Core.trimTrailing(d,a.profileSuffix):e>0&&(d=d.substring(0,e)),d=d.replace(/\//g,"-")),c=d)}}return c}function r(b){return b?b.replace(/-/g,"/")+a.profileSuffix:null}function s(b,c,d,e,f){var g;return g=Wiki.isWikiEnabled(b,c,d)?"/wiki/branch/"+e+"/view/fabric/profiles/"+a.profilePath(f):"/fabric/profile/"+e+"/"+f}function t(a,b){return a?b?b>=a?"badge-success":"badge-warning":"badge-important":""}function u(a,b,c,d,e,f){var g="";g=angular.isString(f)?s(a,b,c,e,f):s(a,b,c,e,f.id),Core.isBlank(g)||d.url(g)}function v(a){var b=Core.injector.get("$location");b.path(UrlHelpers.join("/fabric/container",a))}function w(a,b){if(!angular.isDefined(a))return b[0];var c=b.findIndex(function(b){return b.id===a.id});return-1!==c?b[c]:b[0]}function x(){}function y(a){return a.search().cv||"1.0"}function z(b,c,d,e){void 0===e&&(e=void 0),d&&!d.restApiUrl&&(d.restApiUrl=a.DEFAULT_REST_API),a.restApiUrl(b,function(b){var f=b.value||a.DEFAULT_REST_API;if(a.isFMCContainer(c)){try{var g=new URI(f),h=g.pathname();h&&(f=h,b.value=f)}catch(i){}var j=Core.getConnectionNameParameter(location.search);if(j){var k=Core.getConnectOptions(j);k&&(k.path=f,f=Core.createServerConnectionUrl(k))}}d&&(d.restApiUrl=f,a.log.info("got REST API: "+d.restApiUrl),Core.$apply(d)),e&&e(b)})}function A(a,b){if(!b)return b;var c=Core.getConnectionNameParameter(location.search);if(c){var d=Core.getConnectOptions(c);d&&!/^proxy\/http/.test(b)&&(d.path=/^\//.test(b)?b:Core.url("/git/")+b,b=Core.createServerConnectionUrl(d))}return b}function B(b,c){a.doAction("containers(java.util.List, java.util.List)",b,[["versionId"],[]],function(a){var b=a.value.map(function(a){return a.versionId}).unique();c(b)},function(b){a.log.debug("Failed to get versions in use: ",b),a.log.debug("Stack Trace: ",b.stacktrace)})}function C(b,c){var d=null;if(b){var e=b.value;e?(e=Core.useProxyIfExternal(e),d=a.createJolokia(e)):b.error&&(a.log.debug("Failed to fetch remote jolokia URL: ",b.error),a.log.debug("Stack trace: ",b.stacktrace)),c&&c(d)}return d}function D(b,c,d,e){function f(a){return C(a,e)}return c&&d?a.profileWebAppURL(b,a.jolokiaWebAppGroupId,c,d,f,f):(e(null),null)}function E(b,c,d){function e(a){return C(a,d)}return a.containerWebAppURL(b,a.jolokiaWebAppGroupId,c,e,e)}function F(b){var c=[];return angular.isDefined(b)&&angular.isDefined(b.jmxDomains)&&angular.isArray(b.jmxDomains)&&b.alive&&(c=a.serviceIconRegistry.getIcons(b.jmxDomains)),c}function G(b){var c=b.type;b.metadata&&b.metadata.containerType&&(c=b.metadata.containerType);var d=a.containerIconRegistry.getIcon(c);return d?d:a.javaIcon}function H(a,b,c){var d=a.find(function(a){return a.id===b});d&&c(d)}function I(a){return(J(a)||{}).id||"1.0"}function J(b){return b.execute(a.managerMBean,"defaultVersion()")}function K(b,c,d){b.setAttribute(a.managerMBean,"DefaultVersion",c,onSuccess(function(){d()}))}function L(a,b,c){var d={};return angular.forEach(c,function(c){var e=c.profileIds;e&&angular.forEach(e,function(a){var b=d[a];b||(b=[],d[a]=b),b.push(c)}),b.profileMap=d,c.link=N(a,c.id),c.profileLinks=O(a,c.versionId,e);var f=c.versionId,g=Core.url("#/fabric/profiles?v="+f),h="<a href='"+g+"'>"+f+"</a>";c.versionHref=g,c.versionLink=h;var i=c.id||"",j="container "+i+" ",k="red-dot.png";c.managed===!1?k="spacer.gif":c.alive?c.provisionPending?k="pending.gif":"success"===c.provisionStatus&&(k="green-dot.png"):k="gray-dot.png",k="img/dots/"+k,c.statusImageHref=k,c.link="<img src='"+k+"' title='"+j+"'/> "+(c.link||i)}),c}function M(a){var b=a;return angular.isArray(a)||(b=[a]),b}function N(a,b){var c="";return angular.forEach(M(b),function(b){var d="";c.length>0&&(d=" "),c+=d+"<a href='"+Core.url("#/fabric/container/"+b+a.hash())+"'>"+b+"</a>"}),c}function O(a,b,c){var d="";return angular.forEach(M(c),function(c){var e="";d.length>0&&(e=" "),d+=e+"<a href='"+Core.url("#/fabric/profile/"+b+"/"+c+a.hash())+"'>"+c+"</a>"}),d}function P(a,b,c){return angular.forEach(c,function(c){var d=c.id;c.link=O(a,b,d),c.parentLinks=O(a,b,c.parentIds);var e=Core.url("#/fabric/containers?p="+d),f=c.containerCount,g="";f&&(g="<a href='"+e+"'>"+f+"</a>"),c.containersCountLink=g,c.containersHref=e}),c}function Q(b){var c=b.findMBeanWithProperties(a.jmxDomain,{type:"ZooKeeper"});return Core.pathGet(c,"objectName")}function R(b){var c=Core.injector.get("userDetails");return a.log.info("Logging into remote jolokia "+b+" using user details: "+StringHelpers.toString(c)),Core.createJolokia(b,c.username,c.password)}function S(b){var c=b.execute(a.managerMBean,"registeredValidProviders()"),d={};return angular.forEach(c,function(a,b){d[b]={id:b,className:a}}),d}function T(b,c,d,e){d.execute(a.schemaLookupMBean,"getSchemaForClass(java.lang.String)",c,{method:"POST",success:function(c){e(a.customizeSchema(b,angular.fromJson(c)))}})}function U(b,c,d,e){d.execute(a.schemaLookupMBean,"getSchemaForClass(java.lang.String)",c,{method:"POST",success:function(a){e(angular.fromJson(a))}})}function V(b,c){var d=b.getAttribute(a.managerMBean,"CurrentContainerName",{method:"POST"});return b.execute(a.managerMBean,"getContainer(java.lang.String, java.util.List)",d,c,{method:"POST"})}function W(b,c,d){return b.execute(a.managerMBean,"getContainer(java.lang.String, java.util.List)",c,d,{method:"POST"})}function X(b){var c=["id","root"],d=b.execute(a.managerMBean,"containers(java.util.List)",c,{method:"POST"});return d.filter(function(a){return a.root}).map(function(a){return a.id})}function Y(b,c,d){return void 0===d&&(d=null),b.execute(a.managerMBean,"containers(java.util.List)",c,onSuccess(d))}function Z(b,c,d,e,f,h,i){if(void 0===h&&(h=null),void 0===i&&(i=null),g(b)&&d&&e&&f){var j=onSuccess(h,{error:i});return c.execute(a.openShiftFabricMBean,"getDomains",d,e,f,j)}return h&&h([]),[]}function $(b,c,d,e,f,h){return void 0===h&&(h=null),g(b)&&d&&e&&f?c.execute(a.openShiftFabricMBean,"getGearProfiles",d,e,f,onSuccess(h)):(h&&h([]),[])}function _(b,c,d){var e=[];return c&&(e=b.execute(a.managerMBean,"getProfiles(java.lang.String, java.util.List)",c,["id","hidden","abstract"],{method:"POST"})),e=e.filter(function(a){return d.some(function(b){return a.id===b})}),e=e.filter(function(a){return!a["abstract"]&&!a.hidden}),e.map(function(a){return a.id})}function ab(b,c,d,e){return b.execute(a.managerMBean,"getProfile(java.lang.String, java.lang.String, java.util.List)",c,d,e,{method:"POST"})}function bb(b,c,d,e,f){function g(a){return a?a.decodeBase64():null}void 0===f&&(f=null);var h=f?function(a){f(g(a))}:null,i=b.execute(a.managerMBean,"getConfigurationFile(java.lang.String, java.lang.String, java.lang.String)",c,d,e,onSuccess(h));return f?i:g(i)}function cb(b,c,d,e,f,g){var h=a.profileLink(b,c,d,e,f);return h+="/io.fabric8.mq.fabric.server-"+g+".properties"}function db(a,b,c){void 0===c&&(c=null);var d="#/jmx/attributes?tab=activemq";c&&(d+="&"+c),a.doConnect(b,d)}function eb(a){return angular.forEach(a,function(b,c){""===b&&delete a[c]}),a}a.OpenShiftCredentials={username:null,password:null},a.fabricCreated=b,a.canBootstrapFabric=c,a.hasClusterBootstrapManager=d,a.hasClusterServiceManager=e,a.hasZooKeeper=f,a.hasOpenShiftFabric=g,a.hasMQManager=h,a.hasSchemaMBean=i,a.hasGitMBean=j,a.isFMCContainer=k,a.hasFabric=l,a.initScope=m,a.viewVersion=n,a.doCreateVersion=o,a.sortVersions=p,a.pagePathToProfileId=q,a.profilePath=r,a.profileLink=s,a.containerCountBadgeStyle=t,a.gotoProfile=u,a.gotoContainer=v,a.setSelect=w,a.urlResolvers=["http:","ftp:","mvn:"],a.completeUri=x,a.getActiveVersion=y,a.loadRestApi=z,a.toIconURL=A,a.getVersionsInUse=B,a.profileJolokia=D,a.containerJolokia=E,a.getServiceList=F,a.getTypeIcon=G,a.usingProfile=H,a.getDefaultVersionId=I,a.getDefaultVersion=J,a.setDefaultVersion=K,a.defaultContainerValues=L,a.toCollection=M,a.containerLinks=N,a.profileLinks=O,a.defaultProfileValues=P,a.getZooKeeperFacadeMBean=Q,a.statusTitle=ContainerHelpers.statusTitle,a.statusIcon=ContainerHelpers.statusIcon,a.createJolokia=R,a.registeredProviders=S,a.getSchema=T,a.getDtoSchema=U,a.getCurrentContainer=V,a.getContainerFields=W,a.getRootContainers=X,a.getContainersFields=Y,a.getOpenShiftDomains=Z,a.getOpenShiftGearProfiles=$,a.filterProfiles=_,a.getProfileData=ab,a.getConfigFile=bb,a.brokerConfigLink=cb,a.connectToBroker=db,a.sanitizeJson=eb}(Fabric||(Fabric={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.BrokerDiagramController",["$scope","$compile","$location","localStorage","jolokia","workspace",function(b,c,d,e,f,g){function h(c,d,e){if(void 0===e&&(e=null),C&&c.jolokia!==f)Fabric.connectToBroker(b,c,e);else{var g="/jmx/attributes?tab=activemq";e||d&&(e="nid=root-org.apache.activemq-Broker-"+d),e&&(g+="&"+e),a.log.info("Opening view "+g);var h=Core.url("/#"+g);window.open(h,"_destination"),window.focus()}}function i(){var a=b.selectedNodeJolokia;a&&a!==f&&a.stop()}function j(a){var b=a.DestinationTemporary?"Temporary ":"";return b+(a.DestinationTopic?"Topic":"Queue")}function k(a){var d=[];if(a){var h=a.value||{};b.selectedNodeAttributes=h;var i=b.selectedNode||{},k=i.brokerContainer||{},m=i.type,n=i.brokerName,o=i.container||k.container,p=(i.group||k.group,i.jolokiaUrl||k.jolokiaUrl,i.profile||k.profile),q=i.version||k.version,r=m&&m.startsWith("broker"),s=G.concat(H[m]||[]),t=J[m];
angular.forEach(h,function(a,b){if(t?t.indexOf(b)>=0:s.indexOf(b)<0){var c=Core.humanizeValueHtml(a);d.push({key:Core.humanizeValue(b),value:c})}}),d=d.sortBy("key");var u=null;if(n){var v='<a target="broker" ng-click="connectToBroker()"><img title="Apache ActiveMQ" src="img/icons/messagebroker.svg"> '+n+"</a>";if(q&&p){var w=Fabric.brokerConfigLink(g,f,e,q,p,n);w&&(v+=' <a title="configuration settings" target="brokerConfig" href="'+w+'"><i class="icon-tasks"></i></a>')}var x=c(v)(b);u={key:"Broker",value:x},r||d.splice(0,0,u)}o&&d.splice(0,0,{key:"Container",value:c('<div fabric-container-link="'+i.container+'"></div>')(b)});var y=h.DestinationName||i.destinationName;if(y&&"queue"!==m&&"topic"!==m){var z=j(h),x=l(y,z);d.splice(0,0,{key:z,value:x})}var A=i.typeLabel,B=i.name||i.id||i.objectName;if(A){var x=B;("queue"===m||"topic"===m)&&(x=l(B,m));var C={key:A,value:x};r&&u&&(C=u),d.splice(0,0,C)}}b.selectedNodeProperties=d,Core.$apply(b)}function l(a,d){return void 0===d&&(d="queue"),c('<a target="destination" title="'+a+'" ng-click="connectToDestination()">'+a+"</a>")(b)}function m(a){if(a){var c=angular.toJson(a.value);if(b.responseJson===c)return;b.responseJson=c,b.brokers=a.value,q()}}function n(){var a=b.activeContainers||{};b.activeContainers={},angular.forEach(b.brokers,function(c){c.validContainer=c.alive&&c.master&&"success"===c.provisionStatus,A(c);var d=c.group,e=c.profile,f=c.brokerName,g=c.container,h=c.version||"1.0",i=w("group",d,c,function(){return{typeLabel:"Broker Group",popup:{title:"Broker Group: "+d,content:"<p>"+d+"</p>"}}}),j=w("profile",e,c,function(){return{typeLabel:"Profile",popup:{title:"Profile: "+e,content:"<p>"+e+"</p>"}}}),k=null;g&&(k=w("container",g,c,function(){return{containerId:g,typeLabel:"Container",popup:{title:"Container: "+g,content:"<p>"+g+" version: "+h+"</p>"}}}));var l=c.master,m=v(l,f,d,g,k,c);if(k&&k.validContainer){var n=k.containerId;b.activeContainers[n]=k,delete a[n]}b.viewSettings.group?b.viewSettings.profile?(x(i,j,"group"),x(j,m,"broker")):x(i,m,"group"):b.viewSettings.profile&&x(j,m,"broker"),k&&((l||b.viewSettings.slave)&&b.viewSettings.container?(x(m,k,"container"),k.destinationLinkNode=k):k.destinationLinkNode=m)}),p()}function o(){var c={jolokia:f},d="local";b.activeContainers={containerId:c},b.viewSettings.broker?f.search("org.apache.activemq:type=Broker,brokerName=*",onSuccess(function(b){angular.forEach(b,function(b){var e=Core.parseMBean(b);if(e){var f=e.attributes;if(a.log.info("Got broker: "+b+" on container: "+d+" properties: "+angular.toJson(f,!0)),f){var g=!0,h=f.brokerName||"unknown",i="";v(g,h,i,d,c,f)}}}),p()})):p()}function p(){angular.forEach(b.activeContainers,function(a,b){var c=a.jolokia;c?t(c,a,b):Fabric.containerJolokia(f,b,function(c){return t(c,a,b)})}),b.graph=F.buildGraph(),Core.$apply(b)}function q(){F=new ForceGraph.GraphBuilder,C?n():o()}function r(a){return a?"<p></p>broker: "+a+"</p>":""}function s(c,d){if(c){var e=g.selection;if(e&&e.domain===a.jmxDomain){var f=e.entries.destinationType;if(f&&("Queue"===f&&"topic"===d||"Topic"===f&&"queue"===d))return!1;var h=e.entries.destinationName;if(h&&h!==c)return!1}return a.log.info("selection: "+e),!b.searchFilter||c.indexOf(b.searchFilter)>=0}return!1}function t(c,d){function e(e){var f=e.destType,g=e.brokerName,h=e.destinationName;if(!s(h,f))return null;var i="topic"===f?b.viewSettings.topic:b.viewSettings.queue;if(!i)return null;var j=w(f,h,e,function(){var b=e.destinationType||"Queue",f="";g&&(h.startsWith("ActiveMQ.Advisory.TempQueue_ActiveMQ.Advisory.TempTopic")||(f="org.apache.activemq:type=Broker,brokerName="+g+",destinationType="+b+",destinationName="+h));var i={typeLabel:b,brokerContainer:d,objectName:f,jolokia:c,popup:{title:b+": "+h,content:r(e.brokerName)}};return g||c.search("org.apache.activemq:destinationType="+b+",destinationName="+h+",*",onSuccess(function(b){a.log.info("Found destination mbean: "+b),b&&b.length&&(i.objectName=b[0])})),i});return j&&b.viewSettings.broker&&g&&y(z(g),j.id,"destination"),j}if(c){d.jolokia=c;var f=d.brokerName;f&&b.viewSettings.network&&b.viewSettings.broker&&c.request({type:"read",mbean:"org.apache.activemq:connector=networkConnectors,*"},onSuccess(function(a){angular.forEach(a.value,function(a,b){{var c=Core.parseMBean(b);c.attributes}if(a){B(a);var d=a.RemoteBrokerName;d&&y(z(f),z(d),"network")}}),u()})),b.viewSettings.consumer&&c.search("org.apache.activemq:endpoint=Consumer,*",onSuccess(function(a){angular.forEach(a,function(a){var b=Core.parseMBean(a);if(b){var f=b.attributes;if(f){B(f);var g=f.consumerId;if(g){var h=e(f);if(h){x(d.destinationLinkNode,h,"destination");var i=w("consumer",g,f,function(){return{typeLabel:"Consumer",brokerContainer:d,objectName:a,jolokia:c,popup:{title:"Consumer: "+g,content:"<p>client: "+(f.clientId||"")+"</p> "+r(f.brokerName)}}});x(h,i,"consumer")}}}}}),u()})),b.viewSettings.producer&&c.search("org.apache.activemq:endpoint=Producer,*",onSuccess(function(a){angular.forEach(a,function(a){var b=Core.parseMBean(a);if(b){var f=b.attributes;if(f){B(f);var g=f.producerId;if(g){var h=e(f);if(h){x(d.destinationLinkNode,h,"destination");var i=w("producer",g,f,function(){return{typeLabel:"Producer",brokerContainer:d,objectName:a,jolokia:c,popup:{title:"Producer: "+g,content:"<p>client: "+(f.clientId||"")+"</p> "+r(f.brokerName)}}});x(i,h,"producer")}u()}}}}),u()})),b.viewSettings.producer&&c.request({type:"read",mbean:"org.apache.activemq:endpoint=dynamicProducer,*"},onSuccess(function(a){angular.forEach(a.value,function(a,b){var f=Core.parseMBean(b),g=f.attributes,h={};angular.forEach(g,function(a,b){h[b]=a}),angular.forEach(a,function(a,b){h[b]=a}),B(h),h.destinationName=h.DestinationName;var i=h.producerId||h.ProducerId;(h.DestinationTemporary||h.DestinationTopc)&&(h.destType="topic");var j=e(h);if(i&&j){x(d.destinationLinkNode,j,"destination");var k=w("producer",i,h,function(){return{typeLabel:"Producer (Dynamic)",brokerContainer:d,objectName:b,jolokia:c,popup:{title:"Producer (Dynamic): "+i,content:"<p>client: "+(h.ClientId||"")+"</p> "+r(h.brokerName)}}});x(k,j,"producer")}}),u()}))}}function u(){b.graph=F.buildGraph(),Core.$apply(b)}function v(c,d,e,f,g,h){var i=null,j=c?b.viewSettings.broker:b.viewSettings.slave;return j&&(i=w("broker",d+(c?"":":slave"),h,function(){return{type:c?"broker":"brokerSlave",typeLabel:c?"Broker":"Slave Broker",popup:{title:(c?"Master":"Slave")+" Broker: "+d,content:"<p>Container: "+f+"</p> <p>Group: "+e+"</p>"}}}),c&&(i.objectName||(i.objectName="org.apache.activemq:type=Broker,brokerName="+d,a.log.info("Guessed broker mbean: "+i.objectName)),!i.brokerContainer&&g&&(i.brokerContainer=g))),i}function w(a,c,d,e){var f=null;if(c){var g=a+":"+c;if(f=F.getNode(g),!f){var h=e();if(f=angular.copy(d),angular.forEach(h,function(a,b){return f[b]=a}),f.id=g,f.type||(f.type=a),f.name||(f.name=c),f){var i=b.shapeSize[a];i&&!f.size&&(f.size=i),f.summary||(f.summary=f.popup||""),b.viewSettings.popup||delete f.popup,b.viewSettings.label||delete f.name;var j=b.viewSettings[a];(j||!angular.isDefined(j))&&F.addNode(f)}}}return f}function x(a,b,c){a&&b&&y(a.id,b.id,c)}function y(a,b,c){a&&b&&F.addLink(a,b,c)}function z(a){return a?"broker:"+a:null}function A(a){a.mbeanType=a.type,delete a.type}function B(a){A(a);var b=a.destinationType||"Queue",c=b.toLowerCase();a.isQueue=!c.startsWith("t"),a.destType=c}Fabric.initScope(b,d,f,g);var C=Fabric.isFMCContainer(g);b.isFmc=C,b.selectedNode=null;var D={panel:!0,popup:!1,label:!0,group:!1,profile:!1,slave:!1,broker:C,network:!0,container:!1,queue:!0,topic:!0,consumer:!0,producer:!0};b.viewSettings={},b.shapeSize={broker:20,queue:14,topic:14};var E=Core.throttled(q,1e3),F=new ForceGraph.GraphBuilder;Core.bindModelToSearchParam(b,d,"searchFilter","q",""),angular.forEach(D,function(a,c){function e(){var b=d.search()[g]||a;return"false"===b?!1:b}var f="viewSettings."+c,g=c,h=e();Core.pathSet(b,f,h),b.$watch(f,function(){var a=Core.pathGet(b,f),h=e();if(a!==h){var i=D[c];a!==i?(a||(a="false"),d.search(g,a)):d.search(g,null)}E()})}),b.connectToBroker=function(){var a=b.selectedNode;if(a){var c=a.brokerContainer||a;h(c,a.brokerName)}},b.connectToDestination=function(){var a=b.selectedNode;if(a){var c=a.brokerContainer||a,d=a.brokerName,e=a.destinationType||a.typeLabel,f=a.destinationName,g=null;d&&e&&f&&(g="nid=root-org.apache.activemq-Broker-"+d+"-"+e+"-"+f),h(c,d,g)}},b.$on("$destroy",function(){i()}),b.$watch("selectedNode",function(){b.unregisterFn&&(b.unregisterFn(),b.unregisterFn=null);var c=b.selectedNode;if(c){var d=c.objectName,g=c.brokerContainer||{},h=c.jolokia||g.jolokia||f;if(h!==b.selectedNodeJolokia&&(i(),b.selectedNodeJolokia=h,h!==f)){var j=Core.parseIntValue(e.updateRate||"2000","update rate");j&&h.start(j)}var l={value:c.panelProperties||{}};d&&h?(a.log.debug("reading ",d," on remote container"),b.unregisterFn=Core.register(h,b,{type:"read",mbean:d},onSuccess(k,{error:function(a){k(l),Core.defaultJolokiaErrorHandler(a)}}))):(a.log.debug("no mbean or jolokia available, using dummy response"),k(l))}});var G=["Broker","BrokerId","BrokerName","Connection","DestinationName","DestinationQueue","DestinationTemporary","DestinationTopic"],H={producer:["Producer","ProducerId"],queue:["Name","MessageGroups","MessageGroupType","Subscriptions"],topic:["Name","Subscriptions"],broker:["DataDirectory","DurableTopicSubscriptions","DynamicDestinationProducers","InactiveDurableToppicSubscribers"]},I=["AverageMessageSize","BrokerId","JobSchedulerStorePercentUsage","Slave","MemoryPercentUsage","StorePercentUsage","TempPercentUsage"],J={broker:I,brokerSlave:I};b.$watch("searchFilter",function(){E()}),C?Core.register(f,b,{type:"exec",mbean:Fabric.mqManagerMBean,operation:"loadBrokerStatus()"},onSuccess(m)):(b.$watch("workspace.tree",function(){E()}),b.$on("jmxTreeUpdated",function(){E()}))}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(a){a.BrowseQueueController=a._module.controller("ActiveMQ.BrowseQueueController",["$scope","workspace","jolokia","localStorage","$location","activeMQMessage","$timeout",function(b,c,d,e,f,g){function h(a){var c=a.value;angular.isArray(c)?b.allMessages=c:(b.allMessages=[],angular.forEach(c,function(a){b.allMessages.push(a)})),angular.forEach(b.allMessages,function(a){a.headerHtml=j(a),a.bodyText=i(a)}),Core.$apply(b),r(b.gridOptions.filterOptions.filterText)}function i(a){if(a.Text){var b=a.Text,c=""+b.length;return a.textMode="text ("+c+" chars)",b}if(a.BodyPreview){var b,d=Core.parseIntValue(e.activemqBrowseBytesMessages||"1","browse bytes messages");if(a.textMode="bytes (turned off)",99!=d){var f=[],g=[];a.BodyPreview.forEach(function(a){if((1===d||2===d)&&g.push(String.fromCharCode(a)),1===d||4===d){var b=a.toString(16);1===b.length&&(b="0"+b),f.push(b)}else{var b=a.toString(10);f.push(b)}});var h=f.join(" "),i=g.join("");if(1===d||2===d){var j=a.BodyPreview.length,c=""+g.length;b="bytes:\n"+h+"\n\ntext:\n"+i,a.textMode="bytes ("+j+" bytes) and text ("+c+" chars)"}else{var j=a.BodyPreview.length;b=h,a.textMode="bytes ("+j+" bytes)"}}return b}return a.textMode="unsupported","Unsupported message body type which cannot be displayed by hawtio"}function j(a){function b(a,b){return a>b?1:b>a?-1:0}function c(a){var b=e[a];null===b&&(b=""),m.push('<tr><td class="propertyName"><span class="green">Header</span> - '+a+'</td><td class="property-value">'+b+"</td></tr>")}function d(a){var b=f[a];null===b&&(b=""),m.push('<tr><td class="propertyName">'+a+'</td><td class="property-value">'+b+"</td></tr>")}var e=k(a),f=l(a),g=Object.extended(e).keys(),h=Object.extended(f).keys().sort(b),i=g.filter(function(a){return a.startsWith("JMS")}).sort(b),j=g.subtract(i,h).sort(b),m=[];return i.forEach(c),j.forEach(c),h.forEach(d),m.join("\n")}function k(b){a.log.debug("headers: ",b);var c={};return angular.forEach(b,function(a,b){w.any(b)||x.any(b)||(c[Core.escapeHtml(b)]=Core.escapeHtml(a))}),c}function l(b){a.log.debug("properties: ",b);var c={};return angular.forEach(b,function(a,b){!w.any(b)&&x.any(b)&&angular.forEach(a,function(a,d){c['<span class="green">'+b.replace("Properties"," Property")+"</span> - "+Core.escapeHtml(d)]=Core.escapeHtml(a)})}),c}function m(){var a;if(c.selection)a=c.selection.objectName;else{var e=f.search().nid,g=c.keyToNodeMap[e];a=g.objectName}a&&(b.dlq=!1,d.getAttribute(a,"DLQ",onSuccess(n,{silent:!0})),d.request({type:"exec",mbean:a,operation:"browse()"},onSuccess(h)))}function n(a){b.dlq=a,Core.$apply(b)}function o(){}function p(){b.messageDialog=!1,b.gridOptions.selectedItems.splice(0),Core.notification("success",b.message),setTimeout(m,50)}function q(){p(),c.loadTree()}function r(a){var b=v(a);s(b)}function s(c){c&&0!==c.length?(a.log.debug("Filtering conditions:",c),b.messages=b.allMessages.filter(function(b){a.log.debug("Message:",b);var d=!0;return $.each(c,function(a,c){d=c.column?d&&b[c.column]&&c.regex.test(b[c.column])||b.StringProperties&&b.StringProperties[c.column]&&c.regex.test(b.StringProperties[c.column]):d&&t(b,c.regex)}),d})):b.messages=b.allMessages}function t(a,b){for(var c=["JMSDestination","JMSDeliveryMode","JMSExpiration","JMSPriority","JMSMessageID","JMSTimestamp","JMSCorrelationID","JMSReplyTo","JMSType","JMSRedelivered"],d=0;d<c.length;d++){var e=c[d];if(a[e]&&b.test(a[e]))return!0}if(a.StringProperties)for(var f in a.StringProperties)if(b.test(a.StringProperties[f]))return!0;return a.bodyText&&b.test(a.bodyText)?!0:!1}function u(a,b){try{return new RegExp(a,b)}catch(c){return new RegExp(a.replace(/(\^|\$|\(|\)|<|>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"))}}function v(a){var b,c=[];if(b=$.trim(a)){for(var d=b.split(";"),e=0;e<d.length;e++){var f=d[e].split(":");if(f.length>1){var g=$.trim(f[0]),h=$.trim(f[1]);g&&h&&c.push({column:g,columnDisplay:g.replace(/\s+/g,"").toLowerCase(),regex:u(h,"i")})}else{var i=$.trim(f[0]);i&&c.push({column:"",regex:u(i,"i")})}}return c}}b.searchText="",b.allMessages=[],b.messages=[],b.headers={},b.mode="text",b.deleteDialog=!1,b.moveDialog=!1,b.gridOptions={selectedItems:[],data:"messages",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableColumnResize:!0,enableColumnReordering:!0,enableHighlighting:!0,filterOptions:{filterText:"",useExternalFilter:!0},selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,maintainColumnRatios:!1,columnDefs:[{field:"JMSMessageID",displayName:"Message ID",cellTemplate:'<div class="ngCellText"><a ng-click="openMessageDialog(row)">{{row.entity.JMSMessageID}}</a></div>',width:"34%"},{field:"JMSType",displayName:"Type",width:"10%"},{field:"JMSPriority",displayName:"Priority",width:"7%"},{field:"JMSTimestamp",displayName:"Timestamp",width:"19%"},{field:"JMSExpiration",displayName:"Expires",width:"10%"},{field:"JMSReplyTo",displayName:"Reply To",width:"10%"},{field:"JMSCorrelationID",displayName:"Correlation ID",width:"10%"}]},b.showMessageDetails=!1;var w=["PropertiesText","BodyPreview","Text"],x=["BooleanProperties","ByteProperties","ShortProperties","IntProperties","LongProperties","FloatProperties","DoubleProperties","StringProperties"];b.$watch("workspace.selection",function(){c.moveIfViewInvalid()||setTimeout(m,50)}),b.$watch("gridOptions.filterOptions.filterText",function(a){r(a)}),b.openMessageDialog=function(c){a.selectCurrentMessage(c,"JMSMessageID",b),b.row&&(b.mode=CodeEditor.detectTextFormat(b.row.Text),b.showMessageDetails=!0)},b.refresh=m,a.decorate(b),b.moveMessages=function(){var a=c.selection,e=a.objectName;if(e&&a){var f=b.gridOptions.selectedItems;b.message="Moved "+Core.maybePlural(f.length,"message to "+b.queueName);var g="moveMessageTo(java.lang.String, java.lang.String)";angular.forEach(f,function(a,c){var h=a.JMSMessageID;if(h){var i=c+1<f.length?o:q;d.execute(e,g,h,b.queueName,onSuccess(i))}})}},b.resendMessage=function(){var a=c.selection,d=a.objectName;if(d&&a){var e=b.gridOptions.selectedItems;g.message=e[0],f.path("activemq/sendMessage")}},b.deleteMessages=function(){var a=c.selection,e=a.objectName;if(e&&a){var f=b.gridOptions.selectedItems;b.message="Deleted "+Core.maybePlural(f.length,"message");var g="removeMessage(java.lang.String)";angular.forEach(f,function(a,b){var c=a.JMSMessageID;if(c){var h=b+1<f.length?o:p;d.execute(e,g,c,onSuccess(h))}})}},b.retryMessages=function(){var a=c.selection,e=a.objectName;if(e&&a){var f=b.gridOptions.selectedItems;b.message="Retry "+Core.maybePlural(f.length,"message");var g="retryMessage(java.lang.String)";angular.forEach(f,function(a,b){var c=a.JMSMessageID;if(c){var h=b+1<f.length?o:p;d.execute(e,g,c,onSuccess(h))}})}},b.queueNames=function(){var b=a.getSelectionQueuesFolder(c);return b?b.children.map(function(a){return a.title}):[]}}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.DestinationController",["$scope","workspace","jolokia",function(b,c,d){function e(){b.destinationTypeName=b.queueType?"Queue":"Topic"}function f(){b.destinationName="",b.workspace.operationCounter+=1,Core.$apply(b),Core.notification("success",b.message),b.workspace.loadTree()}function g(){c.removeAndSelectParentNode(),b.workspace.operationCounter+=1,Core.$apply(b),Core.notification("success",b.message),b.workspace.loadTree()}function h(b){var d=null,e=c.selection;if(e&&a.isBroker(c)&&e.objectName)return e.objectName;var f=e.folderNames,g=e?e.parent:null;return e&&g&&b&&f&&f.length>1&&(d=g.objectName,!d&&g&&(d=g.parent.objectName),d||(d=""+f[0]+":BrokerName="+f[1]+",Type=Broker")),d}b.workspace=c,b.message="",b.queueType="true",b.deleteDialog=!1,b.purgeDialog=!1,e(),b.$watch("queueType",function(){e()}),b.$watch("workspace.selection",function(){c.moveIfViewInvalid()}),b.createDestination=function(a,c){var e=h(d);if(e){var g;c?(g="addQueue(java.lang.String)",b.message="Created queue "+a):(g="addTopic(java.lang.String)",b.message="Created topic "+a),e?d.execute(e,g,a,onSuccess(f)):Core.notification("error","Could not find the Broker MBean!")}},b.deleteDestination=function(){var a=h(d),e=c.selection,f=e.entries;if(a&&e&&d&&f){var i=(e.domain,f.Destination||f.destinationName||e.title);i=i.unescapeHTML();var j,k="Topic"!==(f.Type||f.destinationType);k?(j="removeQueue(java.lang.String)",b.message="Deleted queue "+i):(j="removeTopic(java.lang.String)",b.message="Deleted topic "+i),d.execute(a,j,i,onSuccess(g))}},b.purgeDestination=function(){var a=c.getSelectedMBeanName(),e=c.selection,g=e.entries;if(a&&e&&d&&g){var h=g.Destination||g.destinationName||e.title;h=h.unescapeHTML();var i="purge()";b.message="Purged queue "+h,d.execute(a,i,onSuccess(f))}},b.name=function(){var a=c.selection;return a?a.title:null}}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.DurableSubscriberController",["$scope","workspace","jolokia",function(b,c,d){function e(){var a=g(d);a&&(b.durableSubscribers=[],d.request({type:"read",mbean:a,attribute:["DurableTopicSubscribers"]},onSuccess(function(a){return f(a,"DurableTopicSubscribers","Active")})),d.request({type:"read",mbean:a,attribute:["InactiveDurableTopicSubscribers"]},onSuccess(function(a){return f(a,"InactiveDurableTopicSubscribers","Offline")})))}function f(c,d,e){var f=c.value;a.log.debug("Got data: ",f),b.durableSubscribers.push.apply(b.durableSubscribers,f[d].map(function(a){var b=a.objectName,c=Core.objectNameProperties(b);return"objectName"in a||("canonicalName"in a&&(b=a.canonicalName),c=Object.extended(a.keyPropertyList).clone()),c._id=b,c.status=e,c})),Core.$apply(b)}function g(b){var d=null,e=c.selection;if(e&&a.isBroker(c)&&e.objectName)return e.objectName;var f=e.folderNames,g=e?e.parent:null;return e&&g&&b&&f&&f.length>1&&(d=g.objectName,!d&&g&&(d=g.parent.objectName),d||(d=""+f[0]+":BrokerName="+f[1]+",Type=Broker")),d}b.refresh=e,b.durableSubscribers=[],b.tempData=[],b.createSubscriberDialog=new UI.Dialog,b.deleteSubscriberDialog=new UI.Dialog,b.showSubscriberDialog=new UI.Dialog,b.topicName="",b.clientId="",b.subscriberName="",b.subSelector="",b.gridOptions={selectedItems:[],data:"durableSubscribers",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableCellSelection:!1,enableColumnResize:!0,enableColumnReordering:!0,selectWithCheckboxOnly:!1,showSelectionCheckbox:!1,multiSelect:!1,displaySelectionCheckbox:!1,filterOptions:{filterText:""},maintainColumnRatios:!1,columnDefs:[{field:"destinationName",displayName:"Topic",width:"30%"},{field:"clientId",displayName:"Client ID",width:"30%"},{field:"consumerId",displayName:"Consumer ID",cellTemplate:'<div class="ngCellText"><span ng-hide="row.entity.status != \'Offline\'">{{row.entity.consumerId}}</span><a ng-show="row.entity.status != \'Offline\'" ng-click="openSubscriberDialog(row)">{{row.entity.consumerId}}</a></div>',width:"30%"},{field:"status",displayName:"Status",width:"10%"}]},b.doCreateSubscriber=function(a,c,f,h){b.createSubscriberDialog.close(),b.clientId=a,b.subscriberName=c,b.topicName=f,b.subSelector=h,Core.isBlank(b.subSelector)&&(b.subSelector=null);var i=g(d);i?d.execute(i,"createDurableSubscriber(java.lang.String, java.lang.String, java.lang.String, java.lang.String)",b.clientId,b.subscriberName,b.topicName,b.subSelector,onSuccess(function(){Core.notification("success","Created durable subscriber "+a),b.clientId="",b.subscriberName="",b.topicName="",b.subSelector="",e()})):Core.notification("error","Could not find the Broker MBean!")},b.deleteSubscribers=function(){var a=b.gridOptions.selectedItems[0]._id;d.execute(a,"destroy()",onSuccess(function(){b.showSubscriberDialog.close(),Core.notification("success","Deleted durable subscriber"),e(),b.gridOptions.selectedItems=[]}))},b.openSubscriberDialog=function(a){d.request({type:"read",mbean:a.entity._id},onSuccess(function(c){b.showSubscriberDialog.subscriber=c.value,b.showSubscriberDialog.subscriber.Status=a.entity.status,console.log("Subscriber is now "+b.showSubscriberDialog.subscriber),Core.$apply(b),setTimeout(function(){b.showSubscriberDialog.open(),Core.$apply(b)},100)}))},b.topicNames=function(){var b=a.getSelectionTopicsFolder(c);return b?b.children.map(function(a){return a.title}):[]},b.$watch("workspace.selection",function(){c.moveIfViewInvalid()||setTimeout(e,50)})}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.JobSchedulerController",["$scope","workspace","jolokia",function(a,b,c){function d(){var d=b.selection;if(d){var f=d.objectName;f&&c.request({type:"read",mbean:f,attribute:"AllJobs"},onSuccess(e))}Core.$apply(a)}function e(b){var c=b.value;angular.isArray(c)?a.jobs=c:(a.jobs=[],angular.forEach(c,function(b){a.jobs.push(b)})),Core.$apply(a)}function f(){}function g(){a.gridOptions.selectedItems.splice(0),Core.notification("success",a.message),setTimeout(d,50)}a.refresh=d,a.jobs=[],a.deleteJobsDialog=new UI.Dialog,a.gridOptions={selectedItems:[],data:"jobs",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableColumnResize:!0,enableColumnReordering:!0,filterOptions:{filterText:""},selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,maintainColumnRatios:!1,columnDefs:[{field:"jobId",displayName:"Job ID",width:"25%"},{field:"cronEntry",displayName:"Cron Entry",width:"10%"},{field:"delay",displayName:"Delay",width:"5%"},{field:"repeat",displayName:"repeat",width:"5%"},{field:"period",displayName:"period",width:"5%"},{field:"start",displayName:"Start",width:"25%"},{field:"next",displayName:"Next",width:"25%"}]},a.$watch("workspace.selection",function(){b.moveIfViewInvalid()||setTimeout(d,50)}),a.deleteJobs=function(){var d=b.selection,e=d.objectName;if(e&&d){var h=a.gridOptions.selectedItems;a.message="Deleted "+Core.maybePlural(h.length,"job");var i="removeJob(java.lang.String)";angular.forEach(h,function(a,b){var d=a.jobId;if(d){var j=b+1<h.length?f:g;c.execute(e,i,d,onSuccess(j))}})}}}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.PreferencesController",["$scope","localStorage","userDetails","$rootScope",function(a,b,c,d){Core.initPreferenceScope(a,b,{activemqUserName:{value:c.username},activemqPassword:{value:c.password},activemqBrowseBytesMessages:{value:1,converter:parseInt,formatter:function(a){return""+a}},activemqFilterAdvisoryTopics:{value:!1,converter:Core.parseBooleanValue,post:function(){d.$broadcast("jmxTreeUpdated")}}})}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.TreeHeaderController",["$scope",function(a){a.expandAll=function(){Tree.expandAll("#activemqtree")},a.contractAll=function(){Tree.contractAll("#activemqtree")}}]),a._module.controller("ActiveMQ.TreeController",["$scope","$location","workspace","localStorage",function(b,c,d,e){function f(){a.log.debug("workspace tree has changed, lets reload the activemq tree");var f=[],h=d.tree;if(h){var i="org.apache.activemq",j=h.get(i);if(j&&(f=j.children),f.length){var k=f[0];if(!k.typeName&&k.children.length<4){var l=[];angular.forEach(f,function(a){l=l.concat(a.children)}),f=l}}f.forEach(function(a){var b=a.children;if(b){Tree.sanitize(b);var c=b.findIndex(function(a){return"Topic"===a.title});if(c>0){var f=b[c],g="ActiveMQ-allTopics-"+a.title,h=f.children.clone();d.mapData[g]=h;var i=Core.parseBooleanValue(e.activemqFilterAdvisoryTopics);if(i){if(f&&f.children){var j=f.children.filter(function(a){return!a.title.startsWith("ActiveMQ.Advisory")});f.children=j}}else h&&(f.children=h)}}});var m=$("#activemqtree");Jmx.enableTree(b,c,d,m,f,!0),setTimeout(g,50)}}function g(){Jmx.updateTreeSelectionFromURLAndAutoSelect(c,$("#activemqtree"),function(a){var b=a.getChildren()[0];return b&&"Queue"===b.data.title?(a=b,a.expand(!0),a):null},!0)}b.$on("$routeChangeSuccess",function(){setTimeout(g,50)}),b.$watch("workspace.tree",function(){f()}),b.$on("jmxTreeUpdated",function(){f()})}])}(ActiveMQ||(ActiveMQ={}));var API;!function(a){function b(b,c){if(b){a.log.info("Loading XML: "+b);var d={type:"GET",url:b,beforeSend:function(a){a.setRequestHeader("Authorization",null)},dataType:"xml",contextType:"text/xml",success:c,error:function(c,d,e){a.log.error("Failed to query XML for: "+b+" status:"+d+" error: "+e)}};$.ajax(d)}}function c(b){var c=null;try{c=JSON.parse(b)}catch(d){a.log.info("Failed to parse JSON "+d),a.log.info("JSON: "+b)}return c}function d(b,c,d){function e(a,b){a&&(a.hide=!1,angular.forEach(a.resource,function(a){e(a,b)}),angular.forEach(a.method||a.operations,function(a){a.expanded=b}))}function f(a,b){for(var c=a[b],d=a.$$childHead;d&&!c;)c=f(d,b),d=d.$$nextSibling;return c}var g=c.search();b.container=g.container,b.objectName=g.objectName,b.showHide=function(a){a&&(a.hide=a.hide?!1:!0)},b.showOperations=function(a){e(a,!1)},b.expandOperations=function(a){e(a,!0)},b.autoFormat=function(a){a||(a=f(b,"codeMirror")),a&&setTimeout(function(){CodeEditor.autoFormatEditor(a)},50)},b.container&&b.objectName?Fabric.containerJolokia(d,b.container,function(c){b.remoteJolokia=c,c?a.loadJsonSchema(c,b.objectName,function(a){b.jsonSchema=a,Core.$apply(b)}):a.log.info("No Remote Jolokia!")}):a.log.info("No container or objectName"),a.log.info("container: "+b.container+" objectName: "+b.objectName+" url: "+b.url)}function e(a,b,d){function e(a){var b={};if(a){var e=a;e&&(b=c(e))}d(b)}if(b)return a.execute(b,"getJSONSchema",onSuccess(e));var f={};return d(f),f}function f(b){var c=b.documentElement,d={};return a.convertWadlToJson(c,d)}function g(b,c){return void 0===c&&(c={}),a.convertXmlToJson(b,c,n)}function h(a){var b=[],c=null,d=null,e=Core.pathGet(a,["resources",0]);return e&&(c=e.base,angular.forEach(e.resource,function(a){var c=a.path,d=[];angular.forEach(a.method,function(a){var b=(a.name,[]),c=[];d.push({method:a.name,summary:a.summary,notes:a.notes,nickname:a.nickname,type:a.type,parameters:c,produces:["application/json"],responseMessages:b})}),b.push({path:c,operations:d})})),{apiVersion:"1.0",swaggerVersion:"1.2",basePath:c,resourcePath:d,produces:["application/json"],apis:b}}function i(a,b){return b?b.localName:null}function j(a,b,c){var d=c.elementToPropertyName||i,e=c.attributeToPropertyName||i;return angular.forEach(a.childNodes,function(e){if(1===e.nodeType){var f=d(a,e);if(f){var g=b[f]||[];angular.isArray(g)||(g=[g]);var h={};j(e,h,c),g.push(h),b[f]=g}}}),angular.forEach(a.attributes,function(c){var d=e(a,c);if(d){var f=c.nodeValue;b[d]=f}}),b}function k(a){var b=[];return angular.forEach(a,function(a){a&&(angular.isArray(a)?b=b.concat(a):b.push(a))}),b}function l(a){var b=a.objectName;if(b){var c=Core.objectNameProperties(b);c&&angular.forEach(c,function(b,c){a[c]||(a[c]=b)})}return null}function m(a,b,c,d){void 0===d&&(d="");var e=[];angular.forEach(b,function(a,b){function d(b){return angular.forEach(["podId","port","objectName"],function(c){var d=a[c];d&&(b+="&"+c+"="+encodeURIComponent(d))}),b}function f(a){return a?j+a:null}function g(a){return a?Core.useProxyIfExternal(a):a}var h=(a.path,a.url);if(h){l(a),a.serviceName=Core.trimQuotes(a.service)||a.containerName;var i=a.podId,j="";if(i){var k=a.port||8080;j=c+i+"/"+k}var m=g(a.swaggerUrl)||f(a.swaggerPath),n=g(a.wadlUrl)||f(a.wadlPath),o=g(a.wsdlUrl)||f(a.wsdlPath);m&&(a.apidocsHref=d("/hawtio-swagger/index.html?baseUri="+m)),n&&(a.wadlHref=d("#/api/wadl?wadl="+encodeURIComponent(n))),o&&(a.wsdlHref=d("#/api/wsdl?wsdl="+encodeURIComponent(o)))}e.push(a)}),a.apis=e,a.initDone=!0}a.log=Logger.get("API"),a.wadlNamespace="http://schemas.xmlsoap.org/wsdl/",a.loadXml=b;var n={};a.parseJson=c,a.initScope=d,a.loadJsonSchema=e,a.onWadlXmlLoaded=f,a.convertWadlToJson=g,a.convertWadlJsonToSwagger=h,a.convertXmlToJson=j,a.concatArrays=k,a.processApiData=m}(API||(API={}));var API;!function(a){a.pluginName="api",a.templatePath="app/"+a.pluginName+"/html/",a._module=angular.module(a.pluginName,["bootstrap","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/api/pods",{templateUrl:"app/api/html/apiPods.html"}).when("/api/services",{templateUrl:"app/api/html/apiServices.html"}).when("/api/wsdl",{templateUrl:"app/api/html/wsdl.html"}).when("/api/wadl",{templateUrl:"app/api/html/wadl.html"})}]),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry","ServiceRegistry",function(b,c,d,e,f,g){d["api/pods"]=a.templatePath+"layoutApis.html",d["api/services"]=a.templatePath+"layoutApis.html",d.api=e,c.topLevelTabs.push({id:"apis.index",content:"APIs",title:"View the available APIs inside this fabric",isValid:function(a){return Service.hasService(g,"api-registry")&&Kubernetes.isKubernetes(a)},href:function(){return"#/api/services"},isActive:function(a){return a.isLinkActive("api/")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(API||(API={}));var API;!function(a){a._module.controller("API.ApiPodsController",["$scope","localStorage","$routeParams","$location","jolokia","workspace","$compile","$templateCache","$http",function(b,c,d,e,f,g,h,i,j){function k(){var b=m;j.get(b).success(function(a){l(b,a)}).error(function(c){a.log.debug("Error fetching image repositories:",c),l(b,null)})}function l(c,d,e){return void 0===e&&(e=""),a.processApiData(b,d,n,e)}b.path="apis",b.apis=null,b.selectedApis=[],b.initDone=!1;var m=Core.url("/service/api-registry/endpoints/pods"),n=Core.url("/pod/");b.apiOptions={data:"apis",showFilter:!1,showColumnMenu:!1,filterOptions:{filterText:"",useExternalFilter:!1},selectedItems:b.selectedApis,rowHeight:32,showSelectionCheckbox:!1,selectWithCheckboxOnly:!0,columnDefs:[{field:"serviceName",displayName:"Endpoint",width:"***"},{field:"contracts",displayName:"APIs",cellTemplate:i.get("apiContractLinksTemplate.html"),width:"*"},{field:"url",displayName:"URL",cellTemplate:i.get("apiUrlTemplate.html"),width:"***"},{field:"podId",displayName:"Pod",cellTemplate:i.get("apiPodLinkTemplate.html"),width:"*"}]},k()}])}(API||(API={}));var API;!function(a){a._module.controller("API.ApiServicesController",["$scope","localStorage","$routeParams","$location","jolokia","workspace","$compile","$templateCache","$http",function(b,c,d,e,f,g,h,i,j){function k(){var b=m;j.get(b).success(function(a){l(b,a)}).error(function(c){a.log.debug("Error fetching image repositories:",c),l(b,null)})}function l(c,d,e){return void 0===e&&(e=""),a.processApiData(b,d,n,e)
}b.path="apis",b.apis=null,b.selectedApis=[],b.initDone=!1;var m=Core.url("/service/api-registry/endpoints/services"),n=Core.url("/pod/");b.apiOptions={data:"apis",showFilter:!1,showColumnMenu:!1,filterOptions:{filterText:"",useExternalFilter:!1},selectedItems:b.selectedApis,rowHeight:32,showSelectionCheckbox:!1,selectWithCheckboxOnly:!0,columnDefs:[{field:"serviceName",displayName:"Service",cellTemplate:i.get("apiServiceLinkTemplate.html"),width:"***"},{field:"contracts",displayName:"APIs",cellTemplate:i.get("apiContractLinksTemplate.html"),width:"*"},{field:"url",displayName:"URL",cellTemplate:i.get("apiUrlTemplate.html"),width:"***"}]},k()}])}(API||(API={}));var API;!function(a){a._module.controller("API.WadlViewController",["$scope","$location","$http","jolokia",function(b,c,d,e){function f(a){return g(a("content-type"))}function g(a){if(a){if(a.endsWith("xml"))return"xml";if(a.endsWith("html"))return"html";if(a.endsWith("json"))return"json"}return null}function h(){var a=b.apidocs,c=b.jsonSchema;a&&i(c,a.resources,b.parentUri)}function i(b,c,d){void 0===d&&(d=null),angular.forEach(c,function(c){var e=c.base;if(e){if(d&&e){var f=e.indexOf("/");f>0&&(e=d+e.substring(f))}}else e=d;var g=c.path;e&&g&&(e.endsWith("/")||g.startsWith("/")||(e+="/"),e+=g,c.fullPath=e);var h=c.resource;h&&i(b,h,e),angular.forEach(a.concatArrays([c.method,c.operation]),function(c){var d=c.request;if(d){var e=d.count(function(a){return a.representation});e||delete c.request}angular.forEach(a.concatArrays([c.request,c.response]),function(a){var c=a.element,d=a.representation;if(d){var e=d.map(function(a){return a.mediaType});a.mediaTypes=e,e&&e.length&&(a.contentType=e[0])}angular.forEach(d,function(a){c||(c=a.element),j(b,a)}),c&&(a.element=c)})})})}function j(a,b){var c=a?a.definitions:null;if(c&&b){var d=b.mediaType;d&&(b.dataMode=g(d));var e=b.element;if(e){var f=e.indexOf(":");f>=0&&(e=e.substring(f+1));var h="."+e,i=null;angular.forEach(c,function(a,c){i||c!==e&&!c.endsWith(h)||(i=a,b.schema=i,b.typeName=e,b.javaClass=c)})}}}function k(c){b.apidocs=a.onWadlXmlLoaded(c),Core.$apply(b)}a.initScope(b,c,e);var l=c.search();b.url=l.wadl,b.podId=l.podId,b.port=l.port,b.$watch("apidocs",h),b.$watch("jsonSchema",h),a.loadXml(b.url,k),b.tryInvoke=function(c,e){var g=!0;if(c){var h=c.fullPath||c.path;if(h){if(b.podId){var i=h.indexOf("://");if(i>0){var j=h.substring(i+3),i=j.indexOf("/");i>0&&(h="/hawtio/pod/"+b.podId+(b.port?"/"+b.port:"")+j.substring(i),g=!1)}}angular.forEach(c.param,function(b){var c=b.name;if(c){var d=b.value;(angular.isUndefined(d)||null===d)&&(d=""),d=d.toString(),a.log.debug("replacing "+c+" with '"+d+"'"),h=h.replace(new RegExp("{"+c+"}","g"),d)}});var k=g?Core.useProxyIfExternal(h):h;a.log.info("Lets invoke resource: "+k);var l=e.name||"GET";e.invoke={url:k,running:!0};var m={method:l,url:k,headers:{}};("POST"===l||"PUT"===l)&&angular.forEach(e.request,function(a){m.data||(m.data=a.value),m.headers["Content-Type"]||(m.headers["Content-Type"]=a.contentType)}),a.log.info("About to make request: "+angular.toJson(m)),d(m).success(function(c,d,g,i){a.log.info("Worked!"+c),e.invoke={url:k,realUrl:h,success:!0,data:c,dataMode:f(g),status:d,headers:g(),config:i},Core.$apply(b)}).error(function(c,d,g,i){a.log.info("Failed: "+d),e.invoke={url:k,realUrl:h,data:c,dataMode:f(g),status:d,headers:g(),config:i},Core.$apply(b)})}}}}])}(API||(API={}));var API;!function(a){a._module.controller("API.WsdlViewController",["$scope","$location","jolokia",function(b,c,d){function e(){var a=b.services,c=b.jsonSchema;a&&c&&(i.info("We have services and jsonSchema!"),f(c,a))}function f(b,c){angular.forEach(c,function(c){angular.forEach(c.operations,function(c){angular.forEach(a.concatArrays([c.inputs,c.outputs]),function(a){g(b,a)})})})}function g(a,b){var c=a?a.definitions:null;if(c&&b){var d=b.name;if(d){var e=c[d];e&&(angular.isArray(e)&&e.length>0&&(e=e[0]),i.info("Found def "+angular.toJson(e)+" for name "+d),b.schema=e)}}}function h(a){b.services=[];{var c=a.documentElement,d=c?c.getAttribute("targetNamespace"):null,e=c?c.getAttribute("name"):null,f=a.getElementsByTagNameNS(j,"portType");a.getElementsByTagNameNS(j,"service"),a.getElementsByTagNameNS(j,"binding")}angular.forEach(f,function(a){var c={name:e,targetNamespace:d,portName:a.getAttribute("name")||"Unknown",operations:[]};b.services.push(c);var f=a.getElementsByTagNameNS(j,"operation");angular.forEach(f,function(a){function b(a){var b=[];return angular.forEach(a,function(a){var c=a.getAttribute("name");c&&b.push({name:c})}),b}var d=a.getElementsByTagNameNS(j,"input"),e=a.getElementsByTagNameNS(j,"output"),f={name:a.getAttribute("name")||"Unknown",inputs:b(d),outputs:b(e)};c.operations.push(f)})}),Core.$apply(b)}var i=Logger.get("API");a.initScope(b,c,d);var j="http://schemas.xmlsoap.org/wsdl/";b.url=c.search().wsdl,a.loadXml(b.url,h),b.$watch("services",e),b.$watch("jsonSchema",e)}])}(API||(API={}));var Apm;!function(a){a.log=Logger.get("Apm"),a.jmxDomain="io.fabric8.apmagent",a.agentMBean=a.jmxDomain+":type=apmAgent"}(Apm||(Apm={}));var Apm;!function(a){a.pluginName="apm",a._module=angular.module(a.pluginName,["bootstrap","ui.bootstrap","ui.bootstrap.dialog","ui.bootstrap.tabs","ui.bootstrap.typeahead","ngResource","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(){}]),a._module.run(["workspace","jolokia","viewRegistry","layoutFull","helpRegistry","preferencesRegistry",function(b,c,d,e,f){function g(b){var c=b.get(a.jmxDomain);c&&angular.forEach(c.children,function(a){"ThreadContextMetrics"===a.title&&angular.forEach(a.children,function(a){a.typeName||(a.typeName="ThreadContextMetrics")})})}d.apm="app/apm/html/layoutApmTree.html",f.addUserDoc("apm","app/apm/doc/help.md",function(){return b.treeContainsDomainAndProperties(a.jmxDomain)});var h=b.attributeColumnDefs;h[a.jmxDomain+"/MethodMetrics/folder"]=[{field:"Name",displayName:"Name"},{field:"Count",displayName:"Count"}],h[a.jmxDomain+"/ThreadContextMetrics/folder"]=[{field:"Name",displayName:"Name"},{field:"ThreadName",displayName:"Thread"},{field:"Count",displayName:"Count"}],b.addTreePostProcessor(g)}]),hawtioPluginLoader.addModule(a.pluginName)}(Apm||(Apm={}));var Apollo;!function(a){a.pluginName="apollo",a._module=angular.module(a.pluginName,["bootstrap","ngResource","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/apollo",{templateUrl:"app/apollo/html/layout-apollo.html"})}]),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,b,c,d){c.apollo="app/apollo/html/layout-apollo.html",d.addUserDoc("apollo","app/apollo/doc/help.md",function(){return b.treeContainsDomainAndProperties("org.apache.apollo")}),b.topLevelTabs.push({id:"apollo",content:"Apollo",title:"Manage your Apollo Broker",isValid:function(a){return a.treeContainsDomainAndProperties("org.apache.apollo")},href:function(){return"#/apollo/virtual-hosts"},isActive:function(a){return a.isLinkActive("apollo")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(Apollo||(Apollo={}));var Apollo;!function(a){a._module.controller("Apollo.ApolloController",["$scope","$http","$location","localStorage","workspace",function(a,b,c,d,e){var f=e.jolokia;a.broker={},a.online=!0,a.route=function(){return c.path()},a.apollo={version:f.getAttribute('org.apache.apollo:type=broker,name="default"',"Version",onSuccess(null)),url:f.getAttribute('org.apache.apollo:type=broker,name="default"',"WebAdminUrl",onSuccess(null))};var g=function(a,b){alert(401===b?"Action not authorized.":"Error: "+b)};a.ajax=function(c,d,e,f,h,i){f||(f=g);var j="admin",k="password",l={method:c,url:a.apollo.url+"/api/json"+d,headers:{AuthPrompt:"false",Accept:"application/json",ContentType:"application/json",Authorization:Core.getBasicAuthHeader(j,k)},cache:!1,data:null};return i&&(l.headers.Accept=i.Accept||"application/octet-stream",l.headers.ContentType||"application/octet-stream",l.data=i.data),b(l).success(function(b,c,d,f){a.online=!0,e&&e(b,c,d,f)}).error(function(b,c,d,e){0===c?a.online=!1:(a.online=!0,f(b,c,d,e))})};var h=function(){a.apollo.url?a.ajax("GET","/broker",function(b){a.broker=b,void 0===a.apollo.selected_virtual_host&&(a.apollo.selected_virtual_host=b.virtual_hosts[0])},function(a){alert("fail:"+a)}):a.broker={}},i=function(){};i=function(){setTimeout(function(){h(),i()},1e3)},i(),a.$watch("apollo.url",h),a.$watch("online",function(){})}])}(Apollo||(Apollo={}));var Apollo;!function(a){a._module.controller("Apollo.VirtualHostController",["$scope","$http","$location","localStorage","workspace",function(a){a.virtual_host={},a.init=function(b){a.ajax("GET","/broker/virtual-hosts/"+b,function(b){a.virtual_host=b})}}])}(Apollo||(Apollo={}));var Camel;!function(a){function b(a,b,c,d){function e(a){var b=null,c=a?a.value:null;if(c){var e=$.parseXML(c),g=$(e).find("route[id='"+f+"']");g&&g.length&&(b=g[0])}d(b)}var f=R(a,c),g=G(a);g&&f?b.request({type:"exec",mbean:g,operation:"dumpRoutesAsXml()"},onSuccess(e,{error:e})):(f||console.log("No selectedRouteId when trying to lazy load the route!"),d(null))}function c(a){var b=null;if(a&&(b=a.getAttribute("uri"),!b)){var c=a.getAttribute("ref");if(c){var d=a.getAttribute("method");b=d?c+"."+d+"()":"ref:"+c}}return b}function d(b,c){void 0===c&&(c={});var d=b.camelNodeData;if(!d){var e=b.routeXmlNode;e&&(d=a.getRouteNodeJSON(e)),d||(d=c),b.camelNodeData=d}return d}function e(b,c){if(void 0===c&&(c={}),b){angular.forEach(b.attributes,function(a){c[a.name]=a.value});var d=b.localName;"route"!==d&&"routes"!==d&&"camelContext"!==d&&$(b).children("*").each(function(b,d){var f=d.localName,g=a.camelLanguageSettings(f);if(g)c.expression={language:f,expression:d.textContent};else if(!o(f)){var h=e(d);h&&(c[f]=h)}})}return c}function f(a,b){return void 0===b&&(b="  "),a+b}function g(a,b,c){function d(b,c,f){if(void 0===f&&(f=!1),angular.isArray(b))$(a).children(c).remove(),angular.forEach(b,function(a){d(a,c,!0)});else if(angular.isObject(b)){var h=null;if("expression"===c){var i=b.language;i&&(c=i,h=b.expression,b=angular.copy(b),delete b.expression,delete b.language)}var j=$(a).children(c),k=null;if(!f&&j&&j.length)k=j[0];else{var l=a.ownerDocument||document;a.appendChild(l.createTextNode("\n"+e)),k=l.createElementNS(a.namespaceURI,c),h&&k.appendChild(l.createTextNode(h)),a.appendChild(k)}g(k,b,e),h&&j.text(h)}else if(b)if(c.startsWith("_"));else{var m=b.toString();a.setAttribute(c,m)}else a.removeAttribute(c)}if(a){var e=f(c);angular.forEach(b,function(a,b){return d(a,b,!1)})}}function h(a){var b=null;if(a){var c=a.localName;b=c?n(c):a}if(b){var d=b.icon||"generic24.png";return Core.url("/img/icons/camel/"+d)}return null}function i(a){var b=a.selection;if(b&&b.objectName&&b.typeName&&"endpoints"===b.typeName){var c=Core.parseMBean(b.objectName);if(!c)return null;var d=c.attributes;if(!d)return null;if(!("name"in d))return null;var e=d.name;return e=e.replace("\\?","?"),e.startsWith('"')&&(e=e.last(e.length-1)),e.endsWith('"')&&(e=e.first(e.length-1)),e}return null}function j(a){if(angular.isString(a)){var b=a.replace("?","\\?");return b=b.replace(/\:(\/[^\/])/,"://$1"),b=b.replace(/\:([^\/])/,"://$1")}return a}function k(b){return{uri:a.getSelectedEndpointName(b),mbean:a.getSelectionCamelContextMBean(b)}}function l(b){var c=b.selection;return c&&a.jmxDomain===c.domain?c.routeXmlNode:null}function m(b){var c=b.selection;c&&a.jmxDomain===c.domain&&delete c.routeXmlNode}function n(a){return angular.isObject(a)?a:Forms.lookupDefinition(a,_apacheCamelModel)}function o(a){return Forms.isJsonType(a,_apacheCamelModel,"org.apache.camel.model.OptionalIdentifiedDefinition")}function p(a){var b=n(a);return b?b.nextSiblingAddedAsChild||!1:null}function q(a){var b=n(a);return b?b.acceptInput||!1:null}function r(a){var b=n(a);return b?b.acceptOutput||!1:null}function s(a){return _apacheCamelModel.languages[a]}function t(a){return s(a)||"expression"===a?!0:!1}function u(b,c){var d=b;angular.isString(b)&&(d=$.parseXML(b));var e="camelContext",f=new Folder(e);f.addClass="org-apache-camel-context",f.domain=a.jmxDomain,f.typeName="context",f.key=Core.toSafeDomID(c);var g=$(d).find("camelContext");return g&&g.length||(g=$(d).find("routes")),g&&g.length&&(f.xmlDocument=d,f.routeXmlNode=g,$(g).children("route").each(function(b,c){var d=c.getAttribute("id");d||(d="route"+b,c.setAttribute("id",d));var e=new Folder(d);e.addClass="org-apache-camel-route",e.typeName="routes",e.domain=a.jmxDomain,e.key=f.key+"_"+Core.toSafeDomID(d),e.parent=f;var g=n("route");if(g){var i=h(g);e.tooltip=g.tooltip||g.description||d,e.icon=i}f.children.push(e),v(e,c)})),f}function v(a,b){a.children=[],a.routeXmlNode=b,b.setAttribute("_cid",a.key),$(b).children("*").each(function(b,c){w(a,c)})}function w(b,c){var d=c.localName;if(d){var e=n(d);if(e){var f=h(e),g=new Folder(d);g.domain=a.jmxDomain,g.typeName="routeNode",F(g,c,e),g.parent=b,g.folderNames=b.folderNames;for(var i=c.getAttribute("id")||d,j=b.key+"_"+Core.toSafeDomID(i),k=1,l=!0;l;){var m=j+k;b.children.some({key:m})?k+=1:(l=!1,j=m)}return g.key=j,g.icon=f,g.routeXmlNode=c,b.children||(b.children=[]),b.children.push(g),v(g,c),g}}return null}function x(b){var c=b?b.tree:null;return c?c.get(a.jmxDomain):null}function y(a,b){var c=null,d=x(a);return d&&b&&angular.forEach(d.children,function(a){c||b!==a.title||(c=a)}),c}function z(a,b){var c=y(a,b);if(c){var d=c.navigate("context");if(d&&d.children&&d.children.length){var e=d.children[0];return e.objectName}}return null}function A(a){var b=null,c=a.selection;if(c){var d=c.entries;if(d){var e=d.context,f=d.name,g=d.type;if("endpoints"===g)return B(e,f);if("routes"===g)return C(e,f)}}return b}function B(a,b){var c=null;return a&&b&&(c="#/camel/endpoint/browse/"+a+"/"+b),c}function C(a,b){var c=null;return a&&b&&(c="#/camel/route/diagram/"+a+"/"+b),c}function D(a){var b=Core.pathGet(a,["routeXmlNode","localName"]);return"from"===b||"to"===b?"endpoint":b}function E(b,c,d){void 0===d&&(d=a.increaseIndent(""));var e=b.data||b,f=0,g=D(e);if(e){if(!c){c=document.createElement(g);var h=a.getRouteFolderJSON(e);h&&a.setRouteNodeJSON(c,h,d)}var i=c.ownerDocument||document,j=c.namespaceURI,k="route"!==g,l=a.increaseIndent(d);angular.forEach(b.children||b.getChildren(),function(b){var d=b.data||b,e=a.getFolderCamelNodeId(d),g=a.getRouteFolderJSON(d);if(e&&g){var h=!1;if("endpoint"===e&&(k?e="to":(e="from",k=!0)),"expression"===e){var m=g.language;m&&(e=m,h=!0)}c.appendChild(i.createTextNode("\n"+l));var n=i.createElementNS(j,e);a.setRouteNodeJSON(n,g,l),c.appendChild(n),f+=1,E(b,n,l)}}),f&&c.appendChild(i.createTextNode("\n"+d))}return c}function F(b,d,e){var f=d.localName,g=d.getAttribute("id"),h=e.title||f,i=e.tooltip||e.description||h;if(g)h=g;else{var j=c(d);if(j){h=j;var k=j.split("?");k&&k.length>1&&(h=k[0]),i+=" "+j}else{var l=$(d).children("*");if(l&&l.length){var m=l[0],n=m.localName,o=null;a.isCamelLanguage(n)&&(o=m.textContent,o||(o=m.getAttribute("expression"))),o&&(h+=" "+o,i+=" "+n+" expression")}}}return b.title=h,b.tooltip=i,h}function G(a){if(a){var b=O(a),c=a.selection,d=a.tree;if(d&&c){var e=c.domain;if(e&&b){var f=d.navigate(e,b,"context");if(f&&f.children){var g=f.children.first();if(g.title){var h=g.title;return""+e+":context="+b+',type=context,name="'+h+'"'}}}}}return null}function H(a){if(a){var b=O(a),c=a.selection,d=a.tree;if(d&&c){var e=c.domain;if(e&&b)return d.navigate(e,b,"endpoints")}}return null}function I(a){if(a){var b=O(a),c=a.selection,d=a.tree;if(d&&c){var e=c.domain;if(e&&b){var f=d.navigate(e,b,"tracer");if(f&&f.children){var g=f.children.find(function(a){return a.title.startsWith("BacklogTracer")});if(g)return g.objectName}var h=d.navigate(e,b,"fabric");if(h&&h.children){var g=h.children.first();return g.objectName}}}}return null}function J(a){if(a){var b=O(a),c=a.selection,d=a.tree;if(d&&c){var e=c.domain;if(e&&b){var f=d.navigate(e,b,"tracer");if(f&&f.children){var g=f.children.find(function(a){return a.title.startsWith("BacklogDebugger")});if(g)return g.objectName}}}}return null}function K(a){if(a){var b=O(a),c=a.selection,d=a.tree;if(d&&c){var e=c.domain;if(e&&b){var f=d.navigate(e,b,"services");if(f&&f.children){var g=f.children.find(function(a){return a.title.startsWith("DefaultTypeConverter")});if(g)return g.objectName}}}}return null}function L(a){if(a){var b=O(a),c=a.selection,d=a.tree;if(d&&c){var e=c.domain;if(e&&b){var f=d.navigate(e,b,"services");if(f&&f.children){var g=f.children.find(function(a){return a.title.startsWith("DefaultRestRegistry")});if(g)return g.objectName}}}}return null}function M(a){if(a){var b=O(a),c=a.selection,d=a.tree;if(d&&c){var e=c.domain;if(e&&b){var f=d.navigate(e,b,"services");if(f&&f.children){var g=f.children.find(function(a){return a.title.startsWith("MetricsRegistryService")});if(g)return g.objectName}}}}return null}function N(a){if(a){var b=O(a),c=a.selection,d=a.tree;if(d&&c){var e=c.domain;if(e&&b){var f=d.navigate(e,b,"services");if(f&&f.children){var g=f.children.find(function(a){return a.title.startsWith("DefaultInflightRepository")});if(g)return g.objectName}}}}return null}function O(a){var b=a.selection;if(b&&(b=b.findAncestor(function(a){return"context"===a.title||null!=a.parent&&"org.apache.camel"===a.parent.title}))){var c,d=a.tree,e=b.folderNames,f=b.entries;d&&(e&&e.length>1?c=e[1]:f&&(c=f.context))}return c}function P(a,b){var c=(a.State||"").toLowerCase();return angular.isArray(b)?b.any(function(a){return c.startsWith(a)}):c.startsWith(b)}function Q(a){if(a)switch(a.toLowerCase()){case"started":return"green icon-play-circle";case"suspended":return"icon-pause"}return"orange icon-off"}function R(a,b){void 0===b&&(b=null);var c=b||a.selection,d=null;if(c&&c&&c.entries){var e=c.entries.type,f=c.entries.name;"routes"===e&&f&&(d=Core.trimQuotes(f))}return d}function S(a,b){if(a){var c=O(a),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"routes");if(g&&g.children){var h=g.children.find(function(a){return a.title===b});if(h)return h.objectName}}}}return null}function T(a,b){if(a){var c=O(a),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"context");if(g&&g.children){var h=g.children.first();if(h.version)return h.version;if(h.title){var i=h.title,j=""+f+":context="+c+',type=context,name="'+i+'"',k=b.getAttribute(j,"CamelVersion",onSuccess(null));return h.version=k,k}}}}}return null}function U(a){var b=$(a),c=b.children("uid").text(),d=b.children("timestamp").text(),e={headers:{},headerTypes:{},id:null,uid:c,timestamp:d,headerHtml:""},f=b.children("message")[0];f||(f=a);var g=$(f),h=g.find("header"),i="";h.each(function(a,b){var c=b.getAttribute("key"),d=b.getAttribute("type"),f=b.textContent;c&&(f&&(e.headers[c]=f),d&&(e.headerTypes[c]=d),i+="<tr><td class='property-name'>"+c+"</td><td class='property-value'>"+V(d)+"</td><td class='property-value'>"+(f||"")+"</td></tr>")}),e.headerHtml=i;var j=e.headers.breadcrumbId;if(!j){var k=["MessageID","ID","Path","Name"];angular.forEach(k,function(a){j||angular.forEach(e.headers,function(b,c){!j&&c.endsWith(a)&&(j=b)})}),angular.forEach(e.headers,function(a){j||(j=a)})}e.id=j;var l=g.children("body")[0];if(l){var m=l.textContent,n=l.getAttribute("type");e.body=m,e.bodyType=V(n)}return e}function V(a){return a?a.startsWith("java.lang")?a.substr(10):a:""}function W(){return{selectedItems:[],data:"messages",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableColumnResize:!0,enableColumnReordering:!0,filterOptions:{filterText:""},selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,maintainColumnRatios:!1,columnDefs:[{field:"id",displayName:"ID",cellTemplate:'<div class="ngCellText"><a ng-click="openMessageDialog(row)">{{row.entity.id}}</a></div>'}]}}function X(b,c,d,e,f,g){var h=$(c).find("route"),i=g/h.length,j=0;h.each(function(c,g){var h=g.getAttribute("id");d&&h&&d!==h||(a.addRouteXmlChildren(b,g,e,f,null,j,0),j+=i)})}function Y(b,d,e,f,g,i,j,k){void 0===k&&(k=null);var l=150,m=i,o=j+l,p=d.getAttribute("id"),q=[],r=d.localName;return $(d).children().each(function(d,i){var j=e.length,s=i.localName;"from"!==s||g||(g=j);var t=n(s),u=null;if(t){var v=t.title||s,w=c(i);w&&(v+=" "+w.split("?")[0]);var x=t.tooltip||t.description||v;w&&(x+=" "+w);var y=i.getAttribute("id"),z=v;if(y){var A=i.getAttribute("customId");b.camelIgnoreIdForLabel||!A||"false"===A?z="id: "+y:v=y}var B=b.camelMaximumLabelWidth||a.defaultMaximumLabelWidth,C=v.length;C>B&&(z=v+"\n\n"+z,v=v.substring(0,B)+"..");var D=h(t);if(("from"===s||"to"===s)&&w){var E=w.indexOf(":");if(E>0){var F=w.substring(0,E);if(F){var G=a.getEndpointIcon(F);G&&(D=Core.url(G))}}}var H=i.getAttribute("_cid")||i.getAttribute("id");u={name:J,label:v,labelSummary:z,group:1,id:j,elementId:y,x:m,"y:":o,imageUrl:D,cid:H,tooltip:x,type:s},p&&(u.rid=p,b.routeNodes||(b.routeNodes={}),b.routeNodes[p]=u),H||(H=s+(e.length+1)),H&&(u.cid=H,b.nodes||(b.nodes={}),b.nodes[H]=u),p=null,e.push(u),null!==g&&g!==j&&(0===q.length||"choice"===r?f.push({source:g,target:j,value:1}):(q.forEach(function(a){f.push({source:a,target:j,value:1})}),q.length=0))}else{var I=a.camelLanguageSettings(s);if(I&&k){var J=I.name||s,K=i.textContent;K?(k.tooltip=k.label+" "+J+" "+K,k.label=K):k.label=k.label+" "+J}}var L=Y(b,i,e,f,j,m,o,u);"choice"===r?(q=q.concat(L),m+=l):"choice"===s?(q=L,o+=l):(q=[e.length-1],o+=l)}),q}function Z(a){var b=a.height();if(300>b){console.log("browse thinks the height is only "+b+" so calculating offset from doc height");var c=a.offset();if(b=$(document).height()-5,c){var d=c.top;d&&(b-=d)}}return b}function _(a,b){if(void 0===b&&(b={}),a){var c=a.key;c&&(b[c]=a),angular.forEach(a.children,function(a){return _(a,b)})}return b}function ab(b){var c=b&&b.data?b.data:b;if(!c)return null;var d=c.xmlDocument,e=c.routeXmlNode;if(e&&e.length){for(var f=e[0],g=f.childNodes,h=[],i=0;i<g.length;i++){var j=g[i],k=j.localName;"route"===k&&parent&&h.push(i)}for(;h.length;){for(var l=h.pop(),m=l+1;;){var j=f.childNodes[m];if(!Core.isTextNode(j))break;f.removeChild(j)}l<f.childNodes.length&&f.removeChild(f.childNodes[l]);for(var i=l-1;i>=0;i--){var j=f.childNodes[i];if(!Core.isTextNode(j))break;f.removeChild(j)}}a.createFolderXmlTree(b,e[0])}return d}function bb(b){var c={},d=b.tree;if(d){var e=d.navigate(a.jmxDomain);e&&angular.forEach(e.children,function(a){var b=a.navigate("context");if(b&&b.children&&b.children.length){var d=b.children[0],e=Core.pathGet(d,["entries","name"])||d.key;e&&(c[e]={folder:d,mbean:d.objectName})}})}return c}function cb(a){return eb(a,"components")}function db(a){return eb(a,"routes")}function eb(b,c){var d={},e=b.tree;if(e){var f=e.navigate(a.jmxDomain);f&&angular.forEach(f.children,function(a){var b=a.navigate("context"),e=a.navigate(c);if(b&&e&&b.children&&b.children.length){var f=b.children[0],g=f.objectName;if(g){var h={folder:f,mbean:g};angular.forEach(e.children,function(a){var b=a.title;b&&(d[b]=h)})}}})}return d}function fb(b){var c={},d=b.tree;if(d){var e=d.navigate(a.jmxDomain);e&&angular.forEach(e.children,function(a){var b=a.navigate("processors");b&&b.children&&b.children.length&&angular.forEach(b.children,function(a){var d=a.title;if(d){var e={folder:b,key:a.key};c[d]=e}})})}return c}function gb(a){var b=a.camelShowInflightCounter;return Core.parseBooleanValue(b,!0)}function hb(a){var b=a.camelIgnoreIdForLabel;return Core.parseBooleanValue(b)}function ib(b){var c=b.camelMaximumLabelWidth;return angular.isString(c)&&(c=parseInt(c)),c||(c=a.defaultMaximumLabelWidth),c}function jb(b){var c=b.camelMaximumTraceOrDebugBodyLength;return angular.isString(c)&&(c=parseInt(c)),c||(c=a.defaultCamelMaximumTraceOrDebugBodyLength),c}function kb(b){var c=b.camelTraceOrDebugIncludeStreams;return Core.parseBooleanValue(c,a.defaultCamelTraceOrDebugIncludeStreams)}function lb(b){var c=b.camelRouteMetricMaxSeconds;return angular.isString(c)&&(c=parseInt(c)),c||(c=a.defaultCamelRouteMetricMaxSeconds),c}function mb(a,b){a.attr("class","node"),a.filter(function(a){if(a){var c=a.cid,d=a.rid,e=a.type,f=a.elementId;return"from"===e?b===d:f?b===f:c?b===c:b===d}return null}).attr("class","node selected")}function nb(a,b,c,d){var e=T(c,d);if(e){console.log("Camel version "+e),e+="camel-";var f=Core.parseVersionNumbers(e);return Core.compareVersionNumberArrays(f,[a,b])>=0?!0:!1}return!1}a.log=Logger.get("Camel"),a.jmxDomain="org.apache.camel",a.defaultMaximumLabelWidth=34,a.defaultCamelMaximumTraceOrDebugBodyLength=5e3,a.defaultCamelTraceOrDebugIncludeStreams=!0,a.defaultCamelRouteMetricMaxSeconds=10,a.processRouteXml=b,a.getRouteNodeUri=c,a.getRouteFolderJSON=d,a.getRouteNodeJSON=e,a.increaseIndent=f,a.setRouteNodeJSON=g,a.getRouteNodeIcon=h,a.getSelectedEndpointName=i,a.escapeEndpointUriNameForJmx=j,a.getContextAndTargetEndpoint=k,a.getSelectedRouteNode=l,a.clearSelectedRouteNode=m,a.getCamelSchema=n,a.isCamelPattern=o,a.isNextSiblingAddedAsChild=p,a.acceptInput=q,a.acceptOutput=r,a.camelLanguageSettings=s,a.isCamelLanguage=t,a.loadCamelTree=u,a.addRouteChildren=v,a.addRouteChild=w,a.getRootCamelFolder=x,a.getCamelContextFolder=y,a.getCamelContextMBean=z,a.linkToFullScreenView=A,a.linkToBrowseEndpointFullScreen=B,a.linkToRouteDiagramFullScreen=C,a.getFolderCamelNodeId=D,a.createFolderXmlTree=E,a.updateRouteNodeLabelAndTooltip=F,a.getSelectionCamelContextMBean=G,a.getSelectionCamelContextEndpoints=H,a.getSelectionCamelTraceMBean=I,a.getSelectionCamelDebugMBean=J,a.getSelectionCamelTypeConverter=K,a.getSelectionCamelRestRegistry=L,a.getSelectionCamelRouteMetrics=M,a.getSelectionCamelInflightRepository=N,a.getContextId=O,a.isState=P,a.iconClass=Q,a.getSelectedRouteId=R,a.getSelectionRouteMBean=S,a.getCamelVersion=T,a.createMessageFromXml=U,a.humanizeJavaType=V,a.createBrowseGridOptions=W,a.loadRouteXmlNodes=X,a.addRouteXmlChildren=Y,a.getCanvasHeight=Z,a.addFoldersToIndex=_,a.generateXmlFromFolder=ab,a.camelContextMBeansById=bb,a.camelContextMBeansByComponentName=cb,a.camelContextMBeansByRouteId=db,a.camelProcessorMBeansById=fb,a.showInflightCounter=gb,a.ignoreIdForLabel=hb,a.maximumLabelWidth=ib,a.maximumTraceOrDebugBodyLength=jb,a.traceOrDebugIncludeStreams=kb,a.routeMetricMaxSeconds=lb,a.highlightSelectedNode=mb,a.isCamelVersionEQGT=nb}(Camel||(Camel={}));var Camel;!function(a){var b=Jmx;a.pluginName="camel";var c="app/camel/html/attributeToolBarRoutes.html",d="app/camel/html/attributeToolBarContext.html";a._module=angular.module(a.pluginName,["bootstrap","ui.bootstrap","ui.bootstrap.dialog","ui.bootstrap.tabs","ui.bootstrap.typeahead","ngResource","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/camel/browseEndpoint",{templateUrl:"app/camel/html/browseEndpoint.html"}).when("/camel/endpoint/browse/:contextId/*endpointPath",{templateUrl:"app/camel/html/browseEndpoint.html"}).when("/camel/createEndpoint",{templateUrl:"app/camel/html/createEndpoint.html"}).when("/camel/route/diagram/:contextId/:routeId",{templateUrl:"app/camel/html/routes.html"}).when("/camel/routes",{templateUrl:"app/camel/html/routes.html"}).when("/camel/fabricDiagram",{templateUrl:"app/camel/html/fabricDiagram.html",reloadOnSearch:!1}).when("/camel/typeConverter",{templateUrl:"app/camel/html/typeConverter.html",reloadOnSearch:!1}).when("/camel/restRegistry",{templateUrl:"app/camel/html/restRegistry.html",reloadOnSearch:!1}).when("/camel/routeMetrics",{templateUrl:"app/camel/html/routeMetrics.html",reloadOnSearch:!1}).when("/camel/inflight",{templateUrl:"app/camel/html/inflight.html",reloadOnSearch:!1}).when("/camel/sendMessage",{templateUrl:"app/camel/html/sendMessage.html",reloadOnSearch:!1}).when("/camel/source",{templateUrl:"app/camel/html/source.html"}).when("/camel/traceRoute",{templateUrl:"app/camel/html/traceRoute.html"}).when("/camel/debugRoute",{templateUrl:"app/camel/html/debug.html"}).when("/camel/profileRoute",{templateUrl:"app/camel/html/profileRoute.html"}).when("/camel/properties",{templateUrl:"app/camel/html/properties.html"})}]),a._module.factory("tracerStatus",function(){return{jhandle:null,messages:[]}}),a._module.filter("camelIconClass",function(){return a.iconClass}),a._module.factory("activeMQMessage",function(){return{message:null}}),a._module.run(["workspace","jolokia","viewRegistry","layoutFull","helpRegistry","preferencesRegistry",function(b,e,f,g,h,i){f["camel/endpoint/"]=g,f["camel/route/"]=g,f["camel/fabricDiagram"]=g,f.camel="app/camel/html/layoutCamelTree.html",h.addUserDoc("camel","app/camel/doc/help.md",function(){return b.treeContainsDomainAndProperties(a.jmxDomain)}),i.addTab("Camel","app/camel/html/preferences.html",function(){return b.treeContainsDomainAndProperties(a.jmxDomain)}),Jmx.addAttributeToolBar(a.pluginName,a.jmxDomain,function(b){var e=b.typeName;if(e){if(e.startsWith("context"))return d;if(e.startsWith("route"))return c}var f=b.folderNames;if(f&&b.domain===a.jmxDomain){var g=f.last();if("routes"===g)return c;if("context"===g)return d}return null});var j="State",k='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(\''+j+"') | camelIconClass}}\"></i></div>",l={field:j,displayName:j,cellTemplate:k,width:56,minWidth:56,maxWidth:56,resizable:!1,defaultSort:!1},m=b.attributeColumnDefs;m[a.jmxDomain+"/context/folder"]=[l,{field:"CamelId",displayName:"Context"},{field:"Uptime",displayName:"Uptime",visible:!1},{field:"CamelVersion",displayName:"Version",visible:!1},{field:"ExchangesCompleted",displayName:"Completed #"},{field:"ExchangesFailed",displayName:"Failed #"},{field:"FailuresHandled",displayName:"Failed Handled #"},{field:"ExchangesTotal",displayName:"Total #",visible:!1},{field:"InflightExchanges",displayName:"Inflight #"},{field:"MeanProcessingTime",displayName:"Mean Time"},{field:"MinProcessingTime",displayName:"Min Time"},{field:"MaxProcessingTime",displayName:"Max Time"},{field:"TotalProcessingTime",displayName:"Total Time",visible:!1},{field:"LastProcessingTime",displayName:"Last Time",visible:!1},{field:"LastExchangeCompletedTimestamp",displayName:"Last completed",visible:!1},{field:"LastExchangeFailedTimestamp",displayName:"Last failed",visible:!1},{field:"Redeliveries",displayName:"Redelivery #",visible:!1},{field:"ExternalRedeliveries",displayName:"External Redelivery #",visible:!1}],m[a.jmxDomain+"/routes/folder"]=[l,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"ExchangesCompleted",displayName:"Completed #"},{field:"ExchangesFailed",displayName:"Failed #"},{field:"FailuresHandled",displayName:"Failed Handled #"},{field:"ExchangesTotal",displayName:"Total #",visible:!1},{field:"InflightExchanges",displayName:"Inflight #"},{field:"MeanProcessingTime",displayName:"Mean Time"},{field:"MinProcessingTime",displayName:"Min Time"},{field:"MaxProcessingTime",displayName:"Max Time"},{field:"TotalProcessingTime",displayName:"Total Time",visible:!1},{field:"DeltaProcessingTime",displayName:"Delta Time",visible:!1},{field:"LastProcessingTime",displayName:"Last Time",visible:!1},{field:"LastExchangeCompletedTimestamp",displayName:"Last completed",visible:!1},{field:"LastExchangeFailedTimestamp",displayName:"Last failed",visible:!1},{field:"Redeliveries",displayName:"Redelivery #",visible:!1},{field:"ExternalRedeliveries",displayName:"External Redelivery #",visible:!1}],m[a.jmxDomain+"/processors/folder"]=[l,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"ProcessorId",displayName:"Processor"},{field:"ExchangesCompleted",displayName:"Completed #"},{field:"ExchangesFailed",displayName:"Failed #"},{field:"FailuresHandled",displayName:"Failed Handled #"},{field:"ExchangesTotal",displayName:"Total #",visible:!1},{field:"InflightExchanges",displayName:"Inflight #"},{field:"MeanProcessingTime",displayName:"Mean Time"},{field:"MinProcessingTime",displayName:"Min Time"},{field:"MaxProcessingTime",displayName:"Max Time"},{field:"TotalProcessingTime",displayName:"Total Time",visible:!1},{field:"LastProcessingTime",displayName:"Last Time",visible:!1},{field:"LastExchangeCompletedTimestamp",displayName:"Last completed",visible:!1},{field:"LastExchangeFailedTimestamp",displayName:"Last failed",visible:!1},{field:"Redeliveries",displayName:"Redelivery #",visible:!1},{field:"ExternalRedeliveries",displayName:"External Redelivery #",visible:!1}],m[a.jmxDomain+"/components/folder"]=[l,{field:"CamelId",displayName:"Context"},{field:"ComponentName",displayName:"Name"}],m[a.jmxDomain+"/consumers/folder"]=[l,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"EndpointUri",displayName:"Endpoint URI",width:"**"},{field:"Suspended",displayName:"Suspended",resizable:!1},{field:"InflightExchanges",displayName:"Inflight #"}],m[a.jmxDomain+"/services/folder"]=[l,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"Suspended",displayName:"Suspended",resizable:!1},{field:"SupportsSuspended",displayName:"Can Suspend",resizable:!1}],m[a.jmxDomain+"/endpoints/folder"]=[l,{field:"CamelId",displayName:"Context"},{field:"EndpointUri",displayName:"Endpoint URI",width:"***"},{field:"Singleton",displayName:"Singleton",resizable:!1}],m[a.jmxDomain+"/threadpools/folder"]=[{field:"Id",displayName:"Id",width:"**"},{field:"ActiveCount",displayName:"Active #"},{field:"PoolSize",displayName:"Pool Size"},{field:"CorePoolSize",displayName:"Core Pool Size"},{field:"TaskQueueSize",displayName:"Task Queue Size"},{field:"TaskCount",displayName:"Task #"},{field:"CompletedTaskCount",displayName:"Completed Task #"}],m[a.jmxDomain+"/errorhandlers/folder"]=[{field:"CamelId",displayName:"Context"},{field:"DeadLetterChannel",displayName:"Dead Letter"},{field:"DeadLetterChannelEndpointUri",displayName:"Endpoint URI",width:"**",resizable:!0},{field:"MaximumRedeliveries",displayName:"Max Redeliveries"},{field:"RedeliveryDelay",displayName:"Redelivery Delay"},{field:"MaximumRedeliveryDelay",displayName:"Max Redeliveries Delay"}],b.topLevelTabs.push({id:"camel",content:"Camel",title:"Manage your Apache Camel applications",isValid:function(b){return b.treeContainsDomainAndProperties(a.jmxDomain)
},href:function(){return"#/jmx/attributes?tab=camel"},isActive:function(a){return a.isTopTabActive("camel")}}),b.subLevelTabs.push({content:'<i class="icon-picture"></i> Route Diagram',title:"View a diagram of the Camel routes",isValid:function(b){return b.isTopTabActive("camel")&&b.isRoute()&&b.hasInvokeRightsForName(a.getSelectionCamelContextMBean(b),"dumpRoutesAsXml")},href:function(){return"#/camel/routes"},index:-2}),b.subLevelTabs.push({content:'<i class=" icon-file-alt"></i> Source',title:"View the source of the Camel routes",isValid:function(b){return b.isTopTabActive("camel")&&!b.isEndpointsFolder()&&(b.isRoute()||b.isRoutesFolder())&&b.hasInvokeRightsForName(a.getSelectionCamelContextMBean(b),"dumpRoutesAsXml")},href:function(){return"#/camel/source"}}),b.subLevelTabs.push({content:'<i class="icon-bar-chart"></i> Route Metrics',title:"View the entire JVMs Camel route metrics",isValid:function(b){return b.isTopTabActive("camel")&&!b.isEndpointsFolder()&&(b.isRoute()||b.isRoutesFolder())&&a.isCamelVersionEQGT(2,14,b,e)&&b.hasInvokeRightsForName(a.getSelectionCamelRouteMetrics(b),"dumpStatisticsAsJson")},href:function(){return"#/camel/routeMetrics"}}),b.subLevelTabs.push({content:'<i class="icon-list"></i> Inflight Exchanges',title:"View the entire JVMs Camel inflight exchanges",isValid:function(b){return b.isTopTabActive("camel")&&!b.isEndpointsFolder()&&(b.isRoute()||b.isRoutesFolder())&&a.isCamelVersionEQGT(2,15,b,e)&&b.hasInvokeRightsForName(a.getSelectionCamelInflightRepository(b),"browse")},href:function(){return"#/camel/inflight"}}),b.subLevelTabs.push({content:'<i class=" icon-edit"></i> Properties',title:"View the pattern properties",isValid:function(b){return a.getSelectedRouteNode(b)},href:function(){return"#/camel/properties"}}),b.subLevelTabs.push({content:'<i class="icon-list"></i> Rest Services',title:"List all the REST services registered in the context",isValid:function(b){return b.isTopTabActive("camel")&&!b.isEndpointsFolder()&&!b.isRoute()&&a.isCamelVersionEQGT(2,14,b,e)&&b.hasInvokeRightsForName(a.getSelectionCamelRestRegistry(b),"listRestServices")},href:function(){return"#/camel/restRegistry"}}),b.subLevelTabs.push({content:'<i class="icon-list"></i> Type Converters',title:"List all the type converters registered in the context",isValid:function(b){return b.isTopTabActive("camel")&&!b.isEndpointsFolder()&&(b.isRoute()||b.isRoutesFolder()||b.isCamelContext())&&a.isCamelVersionEQGT(2,13,b,e)&&b.hasInvokeRightsForName(a.getSelectionCamelTypeConverter(b),"listTypeConverters")},href:function(){return"#/camel/typeConverter"}}),b.subLevelTabs.push({content:'<i class="icon-envelope"></i> Browse',title:"Browse the messages on the endpoint",isValid:function(a){return a.isEndpoint()&&a.hasInvokeRights(a.selection,"browseAllMessagesAsXml")},href:function(){return"#/camel/browseEndpoint"}}),b.subLevelTabs.push({content:'<i class="icon-stethoscope"></i> Debug',title:"Debug the Camel route",isValid:function(b){return b.isTopTabActive("camel")&&b.isRoute()&&a.getSelectionCamelDebugMBean(b)&&b.hasInvokeRightsForName(a.getSelectionCamelDebugMBean(b),"getBreakpoints")},href:function(){return"#/camel/debugRoute"}}),b.subLevelTabs.push({content:'<i class="icon-envelope"></i> Trace',title:"Trace the messages flowing through the Camel route",isValid:function(b){return b.isTopTabActive("camel")&&b.isRoute()&&a.getSelectionCamelTraceMBean(b)&&b.hasInvokeRightsForName(a.getSelectionCamelTraceMBean(b),"dumpAllTracedMessagesAsXml")},href:function(){return"#/camel/traceRoute"}}),b.subLevelTabs.push({content:'<i class="icon-bar-chart"></i> Profile',title:"Profile the messages flowing through the Camel route",isValid:function(b){return b.isTopTabActive("camel")&&b.isRoute()&&a.getSelectionCamelTraceMBean(b)&&b.hasInvokeRightsForName(a.getSelectionCamelTraceMBean(b),"dumpAllTracedMessagesAsXml")},href:function(){return"#/camel/profileRoute"}}),b.subLevelTabs.push({content:'<i class="icon-pencil"></i> Send',title:"Send a message to this endpoint",isValid:function(a){return a.isTopTabActive("camel")&&a.isEndpoint()&&a.hasInvokeRights(a.selection,"org.apache.camel"===a.selection.domain?"sendBodyAndHeaders":"sendTextMessage")},href:function(){return"#/camel/sendMessage"}}),b.subLevelTabs.push({content:'<i class="icon-plus"></i> Endpoint',title:"Create a new endpoint",isValid:function(a){return a.isTopTabActive("camel")&&a.isEndpointsFolder()&&a.hasInvokeRights(a.selection,"createEndpoint")},href:function(){return"#/camel/createEndpoint"}})}]),hawtioPluginLoader.addModule(a.pluginName),hawtioPluginLoader.registerPreBootstrapTask(function(c){b.registerLazyLoadHandler(a.jmxDomain,function(b){return a.jmxDomain===b.domain&&"routes"===b.typeName?function(b,c,d){"routes"===c.typeName?a.processRouteXml(b,b.jolokia,c,function(b){b&&a.addRouteChildren(c,b),d()}):d()}:null}),c()})}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.AttributesToolBarController",["$scope","workspace","jolokia",function(b,c){b.deleteDialog=!1,b.start=function(){b.invokeSelectedMBeans(function(b){return a.isState(b,"suspend")?"resume()":"start()"})},b.pause=function(){b.invokeSelectedMBeans("suspend()")},b.stop=function(){b.invokeSelectedMBeans("stop()",function(){c.removeAndSelectParentNode()})},b["delete"]=function(){b.invokeSelectedMBeans("remove()",function(){b.workspace.operationCounter+=1,Core.$apply(b)})},b.anySelectionHasState=function(c){var d=b.selectedItems||[];return d.length&&d.any(function(b){return a.isState(b,c)})},b.everySelectionHasState=function(c){var d=b.selectedItems||[];return d.length&&d.every(function(b){return a.isState(b,c)})}}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.BreadcrumbBarController",["$scope","$routeParams","workspace","jolokia",function(b,c,d){function e(){var c=[],e=a.getRootCamelFolder(d);return e&&angular.forEach(e.children,function(a){var d=a.title;if(d&&d!==b.contextId){var e=d,f=h(d,g());c.push({name:e,tooltip:"Camel Context",link:f})}}),c}function f(a){var b=[];return angular.forEach(["endpoints","routes"],function(c){if(c&&c!==g()){var d=h(a,c);b.push({name:c,tooltip:"Entity inside a Camel Context",link:d})}}),b}function g(){var a=Core.pathGet(b,["breadcrumbs","childEntity"]);return a||n}function h(b,c){var d=i(b,c),e=d.length>0?d[0].link:a.linkToBrowseEndpointFullScreen(b,"noEndpoints");return e}function i(a,b){return"endpoints"===b?j(a):k(a)}function j(b){var c=[],e=a.getCamelContextFolder(d,b);if(e){var f=(e.children||[]).find(function(a){return"endpoints"===a.title});f&&angular.forEach(f.children,function(d){var e=d?d.entries:null;if(e){var f=e.name;if(f){var g=m(f),h=a.linkToBrowseEndpointFullScreen(b,f);c.push({contextId:b,path:f,name:g,tooltip:"Endpoint",link:h})}}})}return c}function k(b){var c=[],e=a.getCamelContextFolder(d,b);if(e){var f=(e.children||[]).find(function(a){return"routes"===a.title});f&&angular.forEach(f.children,function(d){var e=d?d.entries:null;if(e){var f=e.name;if(f){var g=m(f),h=a.linkToRouteDiagramFullScreen(b,f);c.push({contextId:b,path:f,name:g,tooltip:"Camel Route",link:h})}}})}return c}function l(){var c=null;if(b.contextId){var e=null,f=null;b.endpointPath?(f="browseEndpoint",e=d.findMBeanWithProperties(a.jmxDomain,{context:b.contextId,type:"endpoints",name:b.endpointPath})):b.routeId&&(f="routes",e=d.findMBeanWithProperties(a.jmxDomain,{context:b.contextId,type:"routes",name:b.routeId}));var g=e?e.key:null;g&&f&&(c="#/camel/"+f+"?tab=camel&nid="+g)}return c}function m(a){return a?Core.trimQuotes(a):a}b.workspace=d,null!=c&&(b.contextId=c.contextId,b.endpointPath=c.endpointPath,b.endpointName=m(b.endpointPath),b.routeId=c.routeId),b.treeViewLink=l();var n=b.endpointPath?"endpoints":"routes",o={endpoints:"Camel Endpoint",routes:"Camel Route"};b.breadcrumbs=[{name:b.contextId,items:e(),tooltip:"Camel Context"},{name:n,items:f(b.contextId),tooltip:"Entity inside a Camel Context"},{name:b.endpointName||m(b.routeId),items:i(b.contextId,g()),tooltip:o[n]}]}])}(Camel||(Camel={}));var Camel;!function(a){a.BrowseEndpointController=a._module.controller("Camel.BrowseEndpointController",["$scope","$routeParams","workspace","jolokia",function(b,c,d,e){function f(){}function g(){b.messageDialog&&b.messageDialog.close(),b.gridOptions.selectedItems.splice(0),Core.notification("success",b.message),setTimeout(h,50)}function h(){var c=null;if(b.contextId&&b.endpointPath){var f=d.findMBeanWithProperties(a.jmxDomain,{context:b.contextId,type:"endpoints",name:b.endpointPath});f&&(c=f.objectName)}if(c||(c=d.getSelectedMBeanName()),c){a.log.info("MBean: "+c);var g=onSuccess(i);e.execute(c,"browseAllMessagesAsXml(java.lang.Boolean)",!0,g)}}function i(c){var d=[];if(angular.isString(c)){var e=$.parseXML(c),f=$(e).find("message");f.each(function(b,c){var e=a.createMessageFromXml(c);d.push(e)})}b.messages=d,Core.$apply(b)}b.workspace=d,b.forwardDialog=new UI.Dialog,b.showMessageDetails=!1,b.mode="text",b.gridOptions=a.createBrowseGridOptions(),b.contextId=c.contextId,b.endpointPath=c.endpointPath,b.isJmxTab=!c.contextId||!c.endpointPath,b.$watch("workspace.selection",function(){b.isJmxTab&&d.moveIfViewInvalid()||h()}),b.openMessageDialog=function(a){ActiveMQ.selectCurrentMessage(a,"id",b),b.row&&(b.mode=CodeEditor.detectTextFormat(b.row.body),b.showMessageDetails=!0)},ActiveMQ.decorate(b),b.forwardMessagesAndCloseForwardDialog=function(){var c=a.getSelectionCamelContextMBean(d),h=b.gridOptions.selectedItems,i=b.endpointUri;c&&i&&h&&h.length&&(e.execute(c,"createEndpoint(java.lang.String)",i,onSuccess(f)),b.message="Forwarded "+Core.maybePlural(h.length,"message to "+i),angular.forEach(h,function(a,b){var d=b+1<h.length?f:g,j=a.body,k=a.headers;e.execute(c,"sendBodyAndHeaders(java.lang.String, java.lang.Object, java.util.Map)",i,j,k,onSuccess(d))})),b.forwardDialog.close()},b.endpointUris=function(){var b=a.getSelectionCamelContextEndpoints(d);return b?b.children.map(function(a){return a.title}):[]},b.refresh=h}])}(Camel||(Camel={}));var Camel;!function(a){a.camelHeaderSchema={definitions:{headers:{properties:{CamelAuthentication:{type:"java.lang.String"},CamelAuthenticationFailurePolicyId:{type:"java.lang.String"},CamelAcceptContentType:{type:"java.lang.String"},CamelAggregatedSize:{type:"java.lang.String"},CamelAggregatedTimeout:{type:"java.lang.String"},CamelAggregatedCompletedBy:{type:"java.lang.String"},CamelAggregatedCorrelationKey:{type:"java.lang.String"},CamelAggregationStrategy:{type:"java.lang.String"},CamelAggregationCompleteAllGroups:{type:"java.lang.String"},CamelAggregationCompleteAllGroupsInclusive:{type:"java.lang.String"},CamelAsyncWait:{type:"java.lang.String"},CamelBatchIndex:{type:"java.lang.String"},CamelBatchSize:{type:"java.lang.String"},CamelBatchComplete:{type:"java.lang.String"},CamelBeanMethodName:{type:"java.lang.String"},CamelBeanMultiParameterArray:{type:"java.lang.String"},CamelBinding:{type:"java.lang.String"},breadcrumbId:{type:"java.lang.String"},CamelCharsetName:{type:"java.lang.String"},CamelCreatedTimestamp:{type:"java.lang.String"},"Content-Encoding":{type:"java.lang.String"},"Content-Length":{type:"java.lang.String"},"Content-Type":{type:"java.lang.String"},CamelCorrelationId:{type:"java.lang.String"},CamelDataSetIndex:{type:"java.lang.String"},"org.apache.camel.default.charset":{type:"java.lang.String"},CamelDestinationOverrideUrl:{type:"java.lang.String"},CamelDisableHttpStreamCache:{type:"java.lang.String"},CamelDuplicateMessage:{type:"java.lang.String"},CamelExceptionCaught:{type:"java.lang.String"},CamelExceptionHandled:{type:"java.lang.String"},CamelEvaluateExpressionResult:{type:"java.lang.String"},CamelErrorHandlerHandled:{type:"java.lang.String"},CamelExternalRedelivered:{type:"java.lang.String"},CamelFailureHandled:{type:"java.lang.String"},CamelFailureEndpoint:{type:"java.lang.String"},CamelFailureRouteId:{type:"java.lang.String"},CamelFilterNonXmlChars:{type:"java.lang.String"},CamelFileLocalWorkPath:{type:"java.lang.String"},CamelFileName:{type:"java.lang.String"},CamelFileNameOnly:{type:"java.lang.String"},CamelFileNameProduced:{type:"java.lang.String"},CamelFileNameConsumed:{type:"java.lang.String"},CamelFilePath:{type:"java.lang.String"},CamelFileParent:{type:"java.lang.String"},CamelFileLastModified:{type:"java.lang.String"},CamelFileLength:{type:"java.lang.String"},CamelFilterMatched:{type:"java.lang.String"},CamelFileLockFileAcquired:{type:"java.lang.String"},CamelFileLockFileName:{type:"java.lang.String"},CamelGroupedExchange:{type:"java.lang.String"},CamelHttpBaseUri:{type:"java.lang.String"},CamelHttpCharacterEncoding:{type:"java.lang.String"},CamelHttpMethod:{type:"java.lang.String"},CamelHttpPath:{type:"java.lang.String"},CamelHttpProtocolVersion:{type:"java.lang.String"},CamelHttpQuery:{type:"java.lang.String"},CamelHttpResponseCode:{type:"java.lang.String"},CamelHttpUri:{type:"java.lang.String"},CamelHttpUrl:{type:"java.lang.String"},CamelHttpChunked:{type:"java.lang.String"},CamelHttpServletRequest:{type:"java.lang.String"},CamelHttpServletResponse:{type:"java.lang.String"},CamelInterceptedEndpoint:{type:"java.lang.String"},CamelInterceptSendToEndpointWhenMatched:{type:"java.lang.String"},CamelLanguageScript:{type:"java.lang.String"},CamelLogDebugBodyMaxChars:{type:"java.lang.String"},CamelLogDebugStreams:{type:"java.lang.String"},CamelLoopIndex:{type:"java.lang.String"},CamelLoopSize:{type:"java.lang.String"},CamelMaximumCachePoolSize:{type:"java.lang.String"},CamelMaximumEndpointCacheSize:{type:"java.lang.String"},CamelMessageHistory:{type:"java.lang.String"},CamelMulticastIndex:{type:"java.lang.String"},CamelMulticastComplete:{type:"java.lang.String"},CamelNotifyEvent:{type:"java.lang.String"},CamelOnCompletion:{type:"java.lang.String"},CamelOverruleFileName:{type:"java.lang.String"},CamelParentUnitOfWork:{type:"java.lang.String"},CamelRecipientListEndpoint:{type:"java.lang.String"},CamelReceivedTimestamp:{type:"java.lang.String"},CamelRedelivered:{type:"java.lang.String"},CamelRedeliveryCounter:{type:"java.lang.String"},CamelRedeliveryMaxCounter:{type:"java.lang.String"},CamelRedeliveryExhausted:{type:"java.lang.String"},CamelRedeliveryDelay:{type:"java.lang.String"},CamelRollbackOnly:{type:"java.lang.String"},CamelRollbackOnlyLast:{type:"java.lang.String"},CamelRouteStop:{type:"java.lang.String"},CamelSoapAction:{type:"java.lang.String"},CamelSkipGzipEncoding:{type:"java.lang.String"},CamelSlipEndpoint:{type:"java.lang.String"},CamelSplitIndex:{type:"java.lang.String"},CamelSplitComplete:{type:"java.lang.String"},CamelSplitSize:{type:"java.lang.String"},CamelTimerCounter:{type:"java.lang.String"},CamelTimerFiredTime:{type:"java.lang.String"},CamelTimerName:{type:"java.lang.String"},CamelTimerPeriod:{type:"java.lang.String"},CamelTimerTime:{type:"java.lang.String"},CamelToEndpoint:{type:"java.lang.String"},CamelTraceEvent:{type:"java.lang.String"},CamelTraceEventNodeId:{type:"java.lang.String"},CamelTraceEventTimestamp:{type:"java.lang.String"},CamelTraceEventExchange:{type:"java.lang.String"},"Transfer-Encoding":{type:"java.lang.String"},CamelUnitOfWorkExhausted:{type:"java.lang.String"},CamelUnitOfWorkProcessSync:{type:"java.lang.String"},CamelXsltFileName:{type:"java.lang.String"}}}}}}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.DebugRouteController",["$scope","$element","workspace","jolokia","localStorage",function(b,c,d,e,f){function g(){var b=o();if(b){var c=u();a.highlightSelectedNode(c,b)}}function h(){b.debugging=!1;var c=a.getSelectionCamelDebugMBean(d);c&&(b.debugging=e.getAttribute(c,"Enabled",onSuccess(null)),b.debugging?(e.execute(c,"getBreakpoints",onSuccess(q)),b.graphView="app/camel/html/routes.html",b.tableView="app/camel/html/browseMessages.html",Core.register(e,b,{type:"exec",mbean:c,operation:"getDebugCounter"},onSuccess(i))):(b.graphView=null,b.tableView=null))}function i(a){var c=a.value;c&&c!==b.breakpointCounter&&(b.breakpointCounter=c,j())}function j(){var b=a.getSelectionCamelDebugMBean(d);b&&(console.log("getting suspended breakpoints!"),e.execute(b,"getSuspendedBreakpointNodeIds",onSuccess(k)))}function k(c){var f=a.getSelectionCamelDebugMBean(d);b.suspendedBreakpoints=c,b.stopped=c&&c.length;var g=o();f&&g&&(e.execute(f,"dumpTracedMessagesAsXml",g,onSuccess(l)),b.selectedDiagramNodeId=g),v(),Core.$apply(b)}function l(c){if(console.log("onMessage! "),b.messages=[],c){var d=c;if(angular.isString(d)){var e=$.parseXML(d),f=$(e).find("fabricTracerEventMessage");f&&f.length||(f=$(e).find("backlogTracerEventMessage")),f.each(function(c,d){var e=a.createMessageFromXml(d),f=$(d).find("toNode").text();f&&(e.toNode=f),b.messages.push(e)})}}else console.log("WARNING: dumpTracedMessagesAsXml() returned no results!");m(),console.log("has messages "+b.messages.length+" selected row "+b.row+" index "+b.rowIndex),Core.$apply(b),v()}function m(){b.selectRowIndex(b.rowIndex),!b.row&&b.messageDialog.show&&(b.row={headers:{},body:""})}function n(){b.messages=[],b.suspendedBreakpoints=[],b.stopped=!1,m(),Core.$apply(b),v()}function o(){var a=null,c=b.suspendedBreakpoints;return c&&c.length&&(a=c[0],c.length>1&&p(b.selectedDiagramNodeId)&&(a=b.selectedDiagramNodeId)),a}function p(a){return t(b.suspendedBreakpoints,a)}function q(a){b.breakpoints=a,s();var c=u();c.length&&v(c),Core.$apply(b)}function r(a){return t(b.breakpoints,a)}function s(){b.hasBreakpoint=r(b.selectedDiagramNodeId)}function t(a,b){return b&&a&&a.some(b)}function u(){var a=d3.select("svg");return a.selectAll("g .node")}function v(a){void 0===a&&(a=u()),a.each(function(a){var b=a.cid,c=d3.select(this),d=c.selectAll("image.breakpoint"),e=p(b),f=r(b);if(f||e){var g=e?z:y;d.length&&d[0].length?d.attr("xlink:href",function(){return g}):c.append("image").attr("xlink:href",function(){return g}).attr("class","breakpoint").attr("x",-12).attr("y",-20).attr("height",24).attr("width",24)}else d.remove()})}function w(){h(),Core.$apply(b)}function x(b){var c=a.getSelectionCamelDebugMBean(d);if(c){var g=b?"enableDebugger":"disableDebugger",h=a.maximumTraceOrDebugBodyLength(f),i=a.traceOrDebugIncludeStreams(f);e.setAttribute(c,"BodyMaxChars",h),e.setAttribute(c,"BodyIncludeStreams",i),e.setAttribute(c,"BodyIncludeFiles",i),e.execute(c,g,onSuccess(w))}}b.ignoreRouteXmlNode=!0,b.startDebugging=function(){x(!0)},b.stopDebugging=function(){x(!1)},b.$on("$routeChangeSuccess",function(){setTimeout(h,50)}),b.$on("camel.diagram.selectedNodeId",function(a,c){b.selectedDiagramNodeId=c,s()}),b.$on("camel.diagram.layoutComplete",function(){v(),$(c).find("g.node").dblclick(function(){var a=this.getAttribute("data-cid");b.toggleBreakpoint(a)})}),b.$watch("workspace.selection",function(){d.moveIfViewInvalid()||h()}),b.toggleBreakpoint=function(b){var c=a.getSelectionCamelDebugMBean(d);if(c&&b){var f=r(b)?"removeBreakpoint":"addBreakpoint";e.execute(c,f,b,onSuccess(w))}},b.addBreakpoint=function(){var c=a.getSelectionCamelDebugMBean(d);c&&b.selectedDiagramNodeId&&e.execute(c,"addBreakpoint",b.selectedDiagramNodeId,onSuccess(w))},b.removeBreakpoint=function(){var c=a.getSelectionCamelDebugMBean(d);c&&b.selectedDiagramNodeId&&e.execute(c,"removeBreakpoint",b.selectedDiagramNodeId,onSuccess(w))},b.resume=function(){var b=a.getSelectionCamelDebugMBean(d);b&&e.execute(b,"resumeAll",onSuccess(n))},b.suspend=function(){var b=a.getSelectionCamelDebugMBean(d);b&&e.execute(b,"suspendAll",onSuccess(n))},b.step=function(){var b=a.getSelectionCamelDebugMBean(d),c=o();b&&c&&e.execute(b,"stepBreakpoint(java.lang.String)",c,onSuccess(n))},b.messages=[],b.mode="text",b.messageDialog=new UI.Dialog,b.gridOptions=a.createBrowseGridOptions(),b.gridOptions.selectWithCheckboxOnly=!1,b.gridOptions.showSelectionCheckbox=!1,b.gridOptions.multiSelect=!1,b.gridOptions.afterSelectionChange=g,b.gridOptions.columnDefs.push({field:"toNode",displayName:"To Node"}),b.openMessageDialog=function(a){var c=Core.pathGet(a,["rowIndex"]);if(b.selectRowIndex(c),b.row){var d=b.row.body;b.mode=angular.isString(d)?CodeEditor.detectTextFormat(d):"text",b.messageDialog.open()}},b.selectRowIndex=function(a){b.rowIndex=a;var c=b.gridOptions.selectedItems;c.splice(0,c.length),a>=0&&a<b.messages.length?(b.row=b.messages[a],b.row&&c.push(b.row)):b.row=null,g()};var y=Core.url("/app/camel/doc/img/debug/breakpoint.gif"),z=Core.url("/app/camel/doc/img/debug/breakpoint-suspended.gif")}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.EndpointController",["$scope","$location","localStorage","workspace","jolokia",function(b,c,d,e,f){function g(){b.endpointName="",b.workspace.operationCounter+=1,Core.$apply(b),Core.notification("success",b.message)}function h(){if(e.selection){var a=Core.pathGet(e,["selection","parent"]);a&&b.workspace.updateSelectionNode(a)}b.workspace.operationCounter+=1,Core.$apply(b),Core.notification("success",b.message)}a.initEndpointChooserScope(b,c,d,e,f),b.workspace=e,b.message="",b.createEndpoint=function(c){var d=e.jolokia;if(d){var f=a.getSelectionCamelContextMBean(e);if(f){b.message="Creating endpoint "+c;var h="createEndpoint(java.lang.String)";d.execute(f,h,c,onSuccess(g))}else Core.notification("error","Could not find the CamelContext MBean!")}},b.createEndpointFromData=function(){if(b.selectedComponentName&&b.endpointPath){var a=b.selectedComponentName+"://"+b.endpointPath;console.log("Have endpoint data "+JSON.stringify(b.endpointParameters));var c="";angular.forEach(b.endpointParameters,function(a,b){var d=c?"&":"";c+=d+b+"="+a}),c&&(a+="?"+c),b.createEndpoint(a)}},b.deleteEndpoint=function(){var a=e.jolokia,c=e.selection,d=c.entries;if(c&&a&&d){var f=c.domain,g=d.BrokerName,i=d.Destination,j="Topic"!==d.Type;if(f&&g){var k=""+f+":BrokerName="+g+",Type=Broker";b.message="Deleting "+(j?"queue":"topic")+" "+i;var l="removeEndpoint(java.lang.String)";a.execute(k,l,i,onSuccess(h))}}}}])}(Camel||(Camel={}));var Camel;!function(a){function b(b){var c=a.getEndpointConfig(b,null),e=Core.pathGet(c,["icon"]);if(!e){var f=d(b);e=Core.pathGet(f,["endpointIcon"])}return e||a.endpointIcon}function c(b,c){var d=a.endpointConfigurations[b];return d||(d={},a.endpointConfigurations[b]=d),d.label||(d.label=b),d.icon||(d.icon=Core.pathGet(c,["endpointIcon"])||a.endpointIcon),d.category||(d.category=c),d}function d(b){return a.endpointToCategory[b]||a.endpointCategories.core}function e(){var a=_apacheCamelModel,b=a.definitions;return b&&angular.forEach(g,function(a,c){var d=b[c];d&&(d.tabs||(d.tabs=a))}),a}function f(b,c,d,e,f){function g(c){b.componentNames=c,a.log.info("onComponents: "+c),b.hasComponentNames=b.componentNames?!0:!1,Core.$apply(b)}function h(a){if(a)try{var c=JSON.parse(a),d=b.selectedComponentName;i(d,c),b.endpointSchema=c,b.schema.definitions[d]=c,b.loadedEndpointSchema=d,Core.$apply(b)}catch(e){console.log("Failed to parse JSON "+e),console.log("JSON: "+a)}}function i(b,c){console.log("======== configuring schema for "+b);var d=a.endpointForms[b];d&&c&&d.tabs&&(c.tabs=d.tabs)}function j(){var f=b.profileWorkspace;if(!f){var g=b.jolokia;g&&(f=Core.createRemoteWorkspace(g,c,d),b.profileWorkspace=f)}f||(a.log.info("No profileWorkspace found so defaulting it to workspace for now"),f=e);var h,i,j=b.selectedComponentName;angular.isDefined(b.camelSelectionDetails)&&(h=b.camelSelectionDetails.selectedCamelContextId,i=b.camelSelectionDetails.selectedRouteId),console.log("==== componentName "+j+" selectedCamelContextId: "+h+" selectedRouteId: "+i);var k=a.camelContextMBeansById(f);if(h){var l=Core.pathGet(k,[h,"mbean"]);if(l)return l}if(i){var m=a.camelContextMBeansByRouteId(f),l=Core.pathGet(m,[i,"mbean"]);if(l)return l}if(j){var m=a.camelContextMBeansByComponentName(f),l=Core.pathGet(m,[j,"mbean"]);if(l)return l}var n=null;return angular.forEach(k,function(a){var b=a.mbean;!n&&b&&(n=b)}),n}b.selectedComponentName=null,b.endpointParameters={},b.endpointPath="",b.schema={definitions:{}},b.jolokia=f;var k=b.branch,l=Fabric.pagePathToProfileId(b.pageId);l&&k&&Fabric.profileJolokia(f,l,k,function(c){c||(a.log.info("No container is running for profile "+l+" and version "+k+" so using current container for endpoint completion"),c=f),b.jolokia=c,b.profileWorkspace=null,b.loadEndpointNames()});var m={silent:!0};b.$watch("workspace.selection",function(){b.loadEndpointNames()}),b.$watch("selectedComponentName",function(){b.selectedComponentName!==b.loadedComponentName&&(b.endpointParameters={},b.loadEndpointSchema(b.selectedComponentName),b.loadedComponentName=b.selectedComponentName)}),b.endpointCompletions=function(a){var c=null,d=j(),e=b.selectedComponentName,f={};return d&&e&&a&&(c=b.jolokia.execute(d,"completeEndpointPath",e,f,a,onSuccess(null,m))),c||[]},b.loadEndpointNames=function(){b.componentNames=null;var a=j();a?b.jolokia.execute(a,"findComponentNames",onSuccess(g,{silent:!0})):console.log("WARNING: No camel context mbean so cannot load component names")},b.loadEndpointSchema=function(a){var c=j();c&&a&&a!==b.loadedEndpointSchema&&(b.selectedComponentName=a,b.jolokia.execute(c,"componentParameterJsonSchema",a,onSuccess(h,m)))}}a.endpointCategories={bigdata:{label:"Big Data",endpoints:["hdfs","hbase","lucene","solr"],endpointIcon:"/img/icons/camel/endpointRepository24.png"},database:{label:"Database",endpoints:["couchdb","elasticsearch","hbase","jdbc","jpa","hibernate","mongodb","mybatis","sql"],endpointIcon:"/img/icons/camel/endpointRepository24.png"},cloud:{label:"Cloud",endpoints:["aws-cw","aws-ddb","aws-sdb","aws-ses","aws-sns","aws-sqs","aws-s3","gauth","ghhtp","glogin","gtask","jclouds"]},core:{label:"Core",endpoints:["bean","direct","seda"]},messaging:{label:"Messaging",endpoints:["jms","activemq","amqp","cometd","cometds","mqtt","netty","vertx","websocket"],endpointIcon:"/img/icons/camel/endpointQueue24.png"},mobile:{label:"Mobile",endpoints:["apns"]},sass:{label:"SaaS",endpoints:["salesforce","sap-netweaver"]},social:{label:"Social",endpoints:["atom","facebook","irc","ircs","rss","smpp","twitter","weather"]},storage:{label:"Storage",endpointIcon:"/img/icons/camel/endpointFolder24.png",endpoints:["file","ftp","sftp","scp","jsch"]},template:{label:"Templating",endpoints:["freemarker","velocity","xquery","xslt","scalate","string-template"]}},a.endpointToCategory={},a.endpointIcon="/img/icons/camel/endpoint24.png",a.endpointConfigurations={drools:{icon:"/img/icons/camel/endpointQueue24.png"},quartz:{icon:"/img/icons/camel/endpointTimer24.png"},facebook:{icon:"/img/icons/camel/endpoints/facebook24.jpg"},salesforce:{icon:"/img/icons/camel/endpoints/salesForce24.png"},sap:{icon:"/img/icons/camel/endpoints/SAPe24.png"},"sap-netweaver":{icon:"/img/icons/camel/endpoints/SAPNetweaver24.jpg"},timer:{icon:"/img/icons/camel/endpointTimer24.png"},twitter:{icon:"/img/icons/camel/endpoints/twitter24.png"},weather:{icon:"/img/icons/camel/endpoints/weather24.jpg"}},a.endpointForms={file:{tabs:{Options:["*"]}},activemq:{tabs:{Connection:["clientId","transacted","transactedInOut","transactionName","transactionTimeout"],Producer:["timeToLive","priority","allowNullBody","pubSubNoLocal","preserveMessageQos"],Consumer:["concurrentConsumers","acknowledgementModeName","selector","receiveTimeout"],Reply:["replyToDestination","replyToDeliveryPersistent","replyToCacheLevelName","replyToDestinationSelectorName"],Options:["*"]}}},a.endpointForms.jms=a.endpointForms.activemq,angular.forEach(a.endpointCategories,function(b,c){b.id=c,angular.forEach(b.endpoints,function(c){a.endpointToCategory[c]=b})});var g={route:{Overview:["id","description"],Advanced:["*"]}};a.getEndpointIcon=b,a.getEndpointConfig=c,a.getEndpointCategory=d,a.getConfiguredCamelModel=e,a.initEndpointChooserScope=f}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.FabricDiagramController",["$scope","$compile","$location","localStorage","jolokia","workspace",function(b,c,d,e,f,g){function h(a,c,d){void 0===d&&(d="#/jmx/attributes?tab=camel");var e=d;c&&(e+=c),b.doConnect(a,e)}function i(){var a=b.selectedNodeJolokia;a&&a!==f&&a.stop()}function j(a){var d=[];if(a){var e=a.value||{};b.selectedNodeAttributes=e;var f=b.selectedNode||{},g=f.container||{},h=f.type,i=(f.brokerName,g.id),j=(f.group||g.group,f.jolokiaUrl||g.jolokiaUrl,f.profile||g.profile,f.version||g.version,h&&h.startsWith("broker"),x.concat(y[h]||[])),l=z[h];angular.forEach(e,function(a,b){if(l?l.indexOf(b)>=0:j.indexOf(b)<0){var c=Core.humanizeValueHtml(a);d.push({key:Core.humanizeValue(b),value:c})}}),d=d.sortBy("key"),i&&u&&d.splice(0,0,{key:"Container",value:c('<div fabric-container-link="'+f.container.id+'"></div>')(b)});var m=f.typeLabel,n=f.name||f.id||f.objectName;if(m){var o=n;("queue"===h||"topic"===h)&&(o=k(n,h));var p={key:m,value:o};d.splice(0,0,p)}}b.selectedNodeProperties=d,Core.$apply(b)}function k(a,d){return void 0===d&&(d="queue"),c('<a target="destination" title="'+a+'" ng-click="connectToEndpoint()">'+a+"</a>")(b)}function l(){var a={jolokia:f};b.activeContainers={local:a},n(),b.containerCount=1}function m(c){if(c){var d=angular.toJson(c);if(b.responseJson===d)return;b.responseJson=d;{b.activeContainers||{}}b.activeContainers=(c||{}).filter(function(b){return b.jmxDomains.any(a.jmxDomain)}),b.containerCount=b.activeContainers.length,n()}else b.containerCount=0}function n(){w=new ForceGraph.GraphBuilder,angular.forEach(b.activeContainers,function(a,b){var c=a.jolokia;if(!c){var d=a.jolokiaUrl;if(d){var e=Core.useProxyIfExternal(d);c=Fabric.createJolokia(e)}}c?p(c,a):Fabric.containerJolokia(f,b,function(b){return p(b,a)})}),Core.$apply(b)}function o(a){return a?!b.searchFilter||a.indexOf(b.searchFilter)>=0:!1}function p(c,d){function e(e,f,g,i,l,m){void 0===i&&(i=null),void 0===l&&(l=null),void 0===m&&(m=null),e||(e=a.jmxDomain+":context="+l+',type=routes,name="'+i+'"');var n=Core.parseMBean(e),p=n.attributes,l=p.context;i||(i=Core.trimQuotes(p.name)),p.routeId=i,p.mbean=e,p.container=d,p.type="route";var q=null;if(i&&o(l)){if(q=r("route",j+i,p,function(){return{name:i,typeLabel:"Route",container:d,objectName:e,jolokia:c,popup:{title:"Route: "+i,content:"<p>context: "+l+"</p>"}}}),g){var t=f.EndpointUri;if(t&&q){var u=null,v=a.escapeEndpointUriNameForJmx(t),w=[t,v];angular.forEach(w,function(a){u||(u=k[a])}),u||angular.forEach(w,function(a){if(!u){var b=a.lastIndexOf("?");if(b>0){var c=a.substring(0,b);u=k[c]}}}),s(q,u,"consumer")}}b.viewSettings.route&&b.viewSettings.context&&(m||(m=h(l)),s(m,q,"route"))}return q}function f(b,e,f){void 0===e&&(e=null),void 0===f&&(f=null),b||(b=a.jmxDomain+":context="+f+',type=endpoints,name="'+a.escapeEndpointUriNameForJmx(e)+'"');var g=Core.parseMBean(b),h=g.attributes,f=h.context;e||(e=Core.trimQuotes(h.name)),h.uri=e,h.mbean=b,h.container=d,h.contextId=f;var i=null;return e&&o(f)&&(i=r("endpoint",j+e,h,function(){return{name:e,typeLabel:"Endpoint",container:d,objectName:b,jolokia:c,popup:{title:"Endpoint: "+e,content:"<p>context: "+f+"</p>"}}}),i&&(k[e]=i)),i}function g(){b.viewSettings.route&&c.request({type:"read",mbean:"org.apache.camel:type=routes,*",attribute:["EndpointUri"]},onSuccess(function(a){angular.forEach(a.value,function(a,b){e(b,a,!0)}),q()})),b.viewSettings.endpoint&&c.search("org.apache.camel:type=endpoints,*",onSuccess(function(a){angular.forEach(a,function(a){var b=f(a),c=h(null,a);s(c,b,"endpoint")}),q()}))}function h(h,i){void 0===i&&(i=null);var k=null;if(o(h)){if(i||(i=a.jmxDomain+":context="+h+',type=context,name="'+h+'"'),!h&&i){var m=Core.parseMBean(i),n=m.attributes;h=n.context}var p={contextId:h};b.viewSettings.context&&(k=r("context",j+h,p,function(){return{name:h,typeLabel:"CamelContext",container:d,objectName:i,jolokia:c,popup:{title:"CamelContext: "+h,content:""}}})),c.execute(i,"createRouteStaticEndpointJson",onSuccess(function(b){if(angular.isString(b)){var c=b,d=null;try{d=JSON.parse(c)}catch(g){c=Core.trimTrailing(c.trim(),"}");try{d=JSON.parse(c)}catch(i){a.log.debug("Ignored invalid json: "+g+" from text: "+b)}}}d&&(angular.forEach(d.routes,function(a,b){angular.forEach(a.inputs,function(c){var d=c.uri;if(d){var g=e(null,{},!1,b,h,k),i=f(null,d,h),j=g;s(i,g,"endpoint"),angular.forEach(a.outputs,function(a){var b=a.uri;
if(b){var c=f(null,b,h);s(j,c,"endpoint"),j=c}})}})}),a.log.info("Updating graph model!"),q())},{error:function(){l||(l=!0,g())}}))}return k}if(c){d.jolokia=c;var i=d.id||"local",j=i+":",k={},l=!1;c.search("org.apache.camel:type=context,*",onSuccess(function(a){angular.forEach(a,function(a){{var b=Core.parseMBean(a),c=b.attributes,d=c.context;Core.trimQuotes(c.name)}h(d,a)})}))}}function q(){b.graph=w.buildGraph(),Core.$apply(b)}function r(a,c,d,e){var f=null;if(c){var g=a+":"+c;if(f=w.getNode(g),!f){var h=e();if(f=angular.copy(d),angular.forEach(h,function(a,b){return f[b]=a}),f.id=g,f.type||(f.type=a),f.name||(f.name=c),f){var i=b.shapeSize[a];i&&!f.size&&(f.size=i),f.summary||(f.summary=f.popup||""),b.viewSettings.popup||delete f.popup,b.viewSettings.label||delete f.name;var j=b.viewSettings[a];(j||!angular.isDefined(j))&&w.addNode(f)}}}return f}function s(a,b,c){a&&b&&t(a.id,b.id,c)}function t(a,b,c){a&&b&&w.addLink(a,b,c)}Fabric.initScope(b,d,f,g);var u=Fabric.isFMCContainer(g);b.isFmc=u,b.selectedNode=null;var v={panel:!0,popup:!1,label:!0,container:!1,endpoint:!0,route:!0,context:!1,consumer:!0,producer:!0};b.viewSettings={},b.shapeSize={context:12,route:10,endpoint:7};var w=new ForceGraph.GraphBuilder;Core.bindModelToSearchParam(b,d,"searchFilter","q",""),angular.forEach(v,function(a,c){function e(){var b=d.search()[g]||a;return"false"===b?!1:b}var f="viewSettings."+c,g=c,h=e();Core.pathSet(b,f,h),b.$watch(f,function(){var a=Core.pathGet(b,f),h=e();if(a!==h){var i=v[c];a!==i?(a||(a="false"),d.search(g,a)):d.search(g,null)}n()})}),b.connectToContext=function(){var a=b.selectedNode;if(a){var c=a.container||a,d=null;h(c,d)}},b.connectToEndpoint=function(){var a=b.selectedNode;if(a){var c=a.container||a,d=null;h(c,d)}},b.$on("$destroy",function(){i()}),b.$watch("selectedNode",function(){b.unregisterFn&&(b.unregisterFn(),b.unregisterFn=null);var a=b.selectedNode;if(a){var c=a.objectName,d=a.container||{},g=a.jolokia||d.jolokia||f;if(g!==b.selectedNodeJolokia&&(i(),b.selectedNodeJolokia=g,g!==f)){var h=Core.parseIntValue(e.updateRate||"2000","update rate");h&&g.start(h)}var k={value:a.panelProperties||{}};c&&g?b.unregisterFn=Core.register(g,b,{type:"read",mbean:c},onSuccess(j,{error:function(a){j(k),Core.defaultJolokiaErrorHandler(a)}})):j(k)}});var x=["CamelId","CamelManagementName"],y={context:["ApplicationContextClassName","CamelId","ClassResolver","ManagementName","PackageScanClassResolver","Properties"],endpoint:["Camel","Endpoint"],route:["Description"]},z={broker:[]};if(b.$watch("searchFilter",function(){n()}),u){b.versionId=Fabric.getDefaultVersionId(f);var A=["id","alive","parentId","profileIds","versionId","provisionResult","jolokiaUrl","jmxDomains"];Fabric.getContainersFields(f,A,m)}else b.$watch("workspace.tree",function(){l()}),b.$on("jmxTreeUpdated",function(){l()})}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.InflightController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(a){var c=a.value;if(c){var d=[];for(var e in c){var f=c[e];d.push({exchangeId:f.exchangeId,routeId:f.routeId,nodeId:f.nodeId,duration:f.duration,elapsed:f.elapsed})}d=d.sortBy("exchangeId"),b.data=d,b.selectedMBean=a.request.mbean}b.initDone="true",Core.$apply(b)}function g(){console.log("Loading inflight data...");var c=a.getSelectedRouteId(d);null!=c&&(b.gridOptions.filterOptions.filterText=c);var g=a.getSelectionCamelInflightRepository(d);if(g){var h={type:"exec",mbean:g,operation:"browse()"};e.request(h,onSuccess(f)),scopeStoreJolokiaHandle(b,e,e.register(onSuccess(f),h))}}b.data=[],b.initDone=!1,b.mbeanAttributes={};var h=[{field:"exchangeId",displayName:"Exchange Id",cellFilter:null,width:"*",resizable:!0},{field:"routeId",displayName:"Route Id",cellFilter:null,width:"*",resizable:!0},{field:"nodeId",displayName:"Node Id",cellFilter:null,width:"*",resizable:!0},{field:"duration",displayName:"Duration (ms)",cellFilter:null,width:"*",resizable:!0},{field:"elapsed",displayName:"Elapsed (ms)",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!0,columnDefs:h,selectedItems:[],filterOptions:{filterText:""}},b.renderIcon=function(b){return a.iconClass(b)},g()}])}(Camel||(Camel={}));var Camel;!function(a){a.jmsHeaderSchema={definitions:{headers:{properties:{JMSCorrelationID:{type:"java.lang.String"},JMSDeliveryMode:{type:"string","enum":["PERSISTENT","NON_PERSISTENT"]},JMSDestination:{type:"javax.jms.Destination"},JMSExpiration:{type:"long"},JMSPriority:{type:"int"},JMSReplyTo:{type:"javax.jms.Destination"},JMSType:{type:"java.lang.String"},JMSXGroupId:{type:"java.lang.String"},AMQ_SCHEDULED_CRON:{type:"java.lang.String"},AMQ_SCHEDULED_DELAY:{type:"java.lang.String"},AMQ_SCHEDULED_PERIOD:{type:"java.lang.String"},AMQ_SCHEDULED_REPEAT:{type:"java.lang.String"}}},"javax.jms.Destination":{type:"java.lang.String"}}}}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.PreferencesController",["$scope","localStorage",function(b,c){Core.initPreferenceScope(b,c,{camelIgnoreIdForLabel:{value:!1,converter:Core.parseBooleanValue},camelShowInflightCounter:{value:!0,converter:Core.parseBooleanValue},camelMaximumLabelWidth:{value:a.defaultMaximumLabelWidth,converter:parseInt},camelMaximumTraceOrDebugBodyLength:{value:a.defaultCamelMaximumTraceOrDebugBodyLength,converter:parseInt},camelTraceOrDebugIncludeStreams:{value:a.defaultCamelTraceOrDebugIncludeStreams,converter:Core.parseBooleanValue},camelRouteMetricMaxSeconds:{value:a.defaultCamelRouteMetricMaxSeconds,converter:parseInt}})}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.ProfileRouteController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(){console.log("initializing id and icons"),b.icons={};var c=Core.pathGet(d.selection,["routeXmlNode"]);if(c){var e={img:"",index:0};e.index=-1,e.img="<img src='img/icons/camel/camel_route.png'>",b.icons[b.selectedRouteId]=e,$(c).find("*").each(function(c,d){var e=d.getAttribute("id");if(e){var f={img:"",index:0};f.index=c;var g=a.getRouteNodeIcon(d);f.img=g?"<img src='"+g+"'>":"",b.icons[e]=f}})}}function g(){console.log("Loading Camel route profile data..."),b.selectedRouteId=a.getSelectedRouteId(d);var c=a.getSelectionRouteMBean(d,b.selectedRouteId);console.log("Selected route is "+b.selectedRouteId),a.isCamelVersionEQGT(2,11,d,e)?(console.log("Camel 2.11 or better detected"),b.calcManually=!1):(console.log("Camel 2.10 or older detected"),b.calcManually=!0),f(),console.log("Initialized icons, with "+b.icons.length+" icons");var g={type:"exec",mbean:c,operation:"dumpRouteStatsAsXml(boolean,boolean)",arguments:[!1,!0]};scopeStoreJolokiaHandle(b,e,e.register(i,g))}b.data=[],b.calcManually=!0,b.icons={},b.selectedRouteId="";var h=[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText" ng-bind-html-unsafe="rowIcon(row.entity.id)"></div>',cellFilter:null,width:"**",resizable:!0},{field:"count",displayName:"Count",cellFilter:null,width:"*",resizable:!0},{field:"last",displayName:"Last",cellFilter:null,width:"*",resizable:!0},{field:"delta",displayName:"Delta",cellFilter:null,width:"*",resizable:!0},{field:"mean",displayName:"Mean",cellFilter:null,width:"*",resizable:!0},{field:"min",displayName:"Min",cellFilter:null,width:"*",resizable:!0},{field:"max",displayName:"Max",cellFilter:null,width:"*",resizable:!0},{field:"total",displayName:"Total",cellFilter:null,width:"*",resizable:!0},{field:"self",displayName:"Self",cellFilter:null,width:"*",resizable:!0}];b.rowIcon=function(a){var c=b.icons[a];return c?c.img+" "+a:a},b.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!1,columnDefs:h,filterOptions:{filterText:""}};var i=function(a){var c=[],d=a.value;if(angular.isString(d)){var e=$.parseXML(d),f=$(e).find("routeStat");f.each(function(a,d){var e={id:{},count:{},last:{},delta:{},mean:{},min:{},max:{},total:{},self:{}};e.id=d.getAttribute("id");var f=0;f+=+d.getAttribute("exchangesCompleted"),f+=+d.getAttribute("exchangesFailed"),e.count=f,e.last=d.getAttribute("lastProcessingTime");var g=d.getAttribute("deltaProcessingTime");e.delta=g?g:0,e.mean=d.getAttribute("meanProcessingTime"),e.min=d.getAttribute("minProcessingTime"),e.max=d.getAttribute("maxProcessingTime"),e.total=d.getAttribute("totalProcessingTime");var h=d.getAttribute("selfProcessingTime");h?e.self=h:(b.calcManually=!0,e.self="0"),c.push(e)});var g=$(e).find("processorStat");g.each(function(a,b){var d={id:{},count:{},last:{},delta:{},mean:{},min:{},max:{},total:{},self:{}};d.id=b.getAttribute("id");var e=0;e+=+b.getAttribute("exchangesCompleted"),e+=+b.getAttribute("exchangesFailed"),d.count=e,d.last=b.getAttribute("lastProcessingTime");var f=b.getAttribute("deltaProcessingTime");d.delta=f?f:0,d.mean=b.getAttribute("meanProcessingTime"),d.min=b.getAttribute("minProcessingTime"),d.max=b.getAttribute("maxProcessingTime");var g=b.getAttribute("accumulatedProcessingTime");d.total=g?g:"0",d.self=b.getAttribute("totalProcessingTime"),c.push(d)})}if(b.calcManually){c.sort(function(a,c){var d=b.icons[a.id],e=b.icons[c.id];return d&&e?d.index-e.index:0});var h=0;c.reverse().forEach(function(a,b){b<c.length-1?(h+=+a.self,a.total=h):(a.self=+(a.total-h),a.self<0&&(a.self=0))}),c.reverse()}b.data=c,Core.$apply(b)};b.onResponse=function(){g()},b.$watch("workspace.tree",function(){setTimeout(g,50)})}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.PropertiesController",["$scope","workspace",function(b,c){function d(){var d=a.getSelectedRouteNode(c);if(b.nodeData=a.getRouteNodeJSON(d),d){var e=d.nodeName;b.model=a.getCamelSchema(e),b.model&&(console.log("data is: "+JSON.stringify(b.nodeData,null,"  ")),console.log("model schema is: "+JSON.stringify(b.model,null,"  ")),b.viewTemplate="app/camel/html/nodePropertiesView.html")}}b.viewTemplate=null,b.schema=_apacheCamelModel,b.$on("$routeChangeSuccess",function(){setTimeout(d,50)}),b.$watch("workspace.selection",function(){c.moveIfViewInvalid()||d()})}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.RestServiceController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(a){var c=a.value;if(c){var d=[];for(var e in c){var f=c[e];for(var g in f){var h=f[g];d.push({url:h.url,baseUrl:h.baseUrl,basePath:h.basePath,uriTemplate:h.uriTemplate,method:h.method,consumes:h.consumes,produces:h.produces,inType:h.inType,outType:h.outType,state:h.state,routeId:h.routeId,description:h.description})}}d=d.sortBy("url"),b.data=d,b.selectedMBean=a.request.mbean}else b.selectedMBean="true";Core.$apply(b)}function g(){console.log("Loading RestRegistry data...");var b=a.getSelectionCamelRestRegistry(d);b&&e.request({type:"exec",mbean:b,operation:"listRestServices"},onSuccess(f))}b.data=[],b.selectedMBean=null,b.mbeanAttributes={};var h=[{field:"url",displayName:"Absolute Url",cellFilter:null,width:"*",resizable:!0},{field:"baseUrl",displayName:"Base Url",cellFilter:null,width:"*",resizable:!0},{field:"basePath",displayName:"Base Path",cellFilter:null,width:"*",resizable:!0},{field:"uriTemplate",displayName:"Uri Template",cellFilter:null,width:"*",resizable:!0},{field:"method",displayName:"Method",cellFilter:null,width:"*",resizable:!0},{field:"consumes",displayName:"Consumes",cellFilter:null,width:"*",resizable:!0},{field:"produces",displayName:"Produces",cellFilter:null,width:"*",resizable:!0},{field:"inType",displayName:"Input Type",cellFilter:null,width:"*",resizable:!0},{field:"outType",displayName:"Output Type",cellFilter:null,width:"*",resizable:!0},{field:"state",displayName:"State",cellFilter:null,width:"*",resizable:!0},{field:"routeId",displayName:"Route Id",cellFilter:null,width:"*",resizable:!0},{field:"description",displayName:"Description",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!0,columnDefs:h,selectedItems:[],filterOptions:{filterText:""}},b.renderIcon=function(b){return a.iconClass(b)},g()}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.RouteMetricsController",["$scope","$location","workspace","jolokia","metricsWatcher",function(b,c,d,e,f){function g(a){var c=a.value;if(c){var d=JSON.parse(c);if(!b.initDone){var e=d.timers,g=0;if(null!=e){for(var h in e){var j=h,k=j.lastIndexOf("."),l=j.substr(0,k),m=j.substr(k+1),n=j.indexOf(":"),o=j.substr(n+1);k=o.lastIndexOf("."),k>0&&(o=o.substr(0,k));var p=(e[h],"timer-"+g);b.metricDivs.push({id:p,routeId:o}),g++,i.info("Added timer: "+p+" ("+l+"."+m+") for route: "+o+" with max seconds: "+b.maxSeconds),f.addTimer(p,l,m,b.maxSeconds,o,"Histogram",1e3*b.maxSeconds)}i.info("Pre-init graphs"),Core.$apply(b)}i.info("Init graphs"),f.initGraphs()}b.initDone=!0,i.debug("Updating graphs: "+d),f.updateGraphs(d)}b.initDone=!0,Core.$apply(b)}function h(){i.info("Loading RouteMetrics data...");var c=a.getSelectedRouteId(d);null!=c&&(b.filterText=c);var f=a.getSelectionCamelRouteMetrics(d);if(f){var h={type:"exec",mbean:f,operation:"dumpStatisticsAsJson"};scopeStoreJolokiaHandle(b,e,e.register(g,h))}else b.initDone=!0,Core.$apply(b)}var i=Logger.get("Camel");b.maxSeconds=a.routeMetricMaxSeconds(localStorage),b.filterText=null,b.initDone=!1,b.metricDivs=[],b.filterByRoute=function(a){i.debug("Filter by route "+a);var c=Core.matchFilterIgnoreCase(a.routeId,b.filterText);return c?"":"display: none;"},b.onResponse=function(){h()},b.$watch("workspace.tree",function(){setTimeout(h,50)})}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.RouteController",["$scope","$routeParams","$element","$timeout","workspace","$location","jolokia","localStorage",function(b,c,d,e,f,g,h,i){function j(){var c=null;if(!b.ignoreRouteXmlNode&&(c=a.getSelectedRouteNode(f),c||(c=b.nodeXmlNode),c&&"route"!==c.localName)){var d=document.createElement("route");d.appendChild(c.cloneNode(!0)),c=d}if(b.mbean=a.getSelectionCamelContextMBean(f),!b.mbean&&b.contextId&&(b.mbean=a.getCamelContextMBean(f,b.contextId)),c){b.nodes={};var e=[],g=[];b.processorTree=a.camelProcessorMBeansById(f),a.addRouteXmlChildren(b,c,e,g,null,0,0),m(e,g)}else b.mbean?h.request({type:"exec",mbean:b.mbean,operation:"dumpRoutesAsXml()"},onSuccess(t)):q.info("No camel context bean! Selection: "+f.selection)}function k(a){if(a){var b=a.getAttribute("class");return b&&b.endsWith(u)}return!1}function l(a,b){var c=!1;if(a){var d=a.getAttribute("class"),e=d&&d.endsWith(u);if(e)d=d.substring(0,d.length-u.length);else{if(!b)return c;d+=u,c=!0}a.setAttribute("class",d)}return c}function m(a,c){var e=$(d),f=n(),g=o(),i=e.children("svg")[0];b.graphData=Core.dagreLayoutGraph(a,c,f,g,i);var j=e.find("g.node");return j.click(function(){var a=k(this);j.each(function(a,b){l(b,!1)});var c=null;a||(c=this.getAttribute("data-cid"),l(this,!0)),b.$emit("camel.diagram.selectedNodeId",c),Core.$apply(b)}),b.mbean&&Core.register(h,b,{type:"exec",mbean:b.mbean,operation:"dumpRoutesStatsAsXml",arguments:[!0,!0]},onSuccess(p,{silent:!0,error:!1})),b.$emit("camel.diagram.layoutComplete"),f}function n(){var a=$(d);return a.width()}function o(){var b=$(d);return a.getCanvasHeight(b)}function p(a){function c(a,c){var d=c.getAttribute("id"),e=c.getAttribute("exchangesCompleted"),f=c.hasAttribute("exchangesInflight")?c.getAttribute("exchangesInflight"):0,g="";if(d&&e){var h=a?b.routeNodes:b.nodes,i=h[d];if(i||angular.forEach(h,function(a){i||d!==a.elementId||(i=a)}),i){var j=0+parseInt(e),k=c.getAttribute("exchangesFailed");k&&(j+=parseInt(k));var l=c.getAttribute("lastProcessingTime"),m=c.getAttribute("meanProcessingTime"),n=c.getAttribute("minProcessingTime"),o=c.getAttribute("maxProcessingTime");g="totoal: "+j+"\ninflight:"+f+"\nlast: "+l+" (ms)\nmean: "+m+" (ms)\nmin: "+n+" (ms)\nmax: "+o+" (ms)",i.counter=j,b.camelShowInflightCounter&&(i.inflight=f);var p=i.labelSummary;p&&(g=p+"\n\n"+g),i.tooltip=g}}}var d=a.value;if(d){var e=$.parseXML(d),f=$(e).find("routeStat");f.each(function(a,b){c(!0,b)});var f=$(e).find("processorStat");f.each(function(a,b){c(!1,b)}),Core.dagreUpdateGraphData(b.graphData)}}var q=Logger.get("Camel");b.routes=[],b.routeNodes={},null!=c&&(b.contextId=c.contextId,b.routeId=Core.trimQuotes(c.routeId),b.isJmxTab=!c.contextId||!c.routeId),b.camelIgnoreIdForLabel=a.ignoreIdForLabel(i),b.camelMaximumLabelWidth=a.maximumLabelWidth(i),b.camelShowInflightCounter=a.showInflightCounter(i);var r=Core.throttled(j,1e3),s=300;b.$on("$routeChangeSuccess",function(){e(r,s)}),b.$watch("workspace.selection",function(){b.isJmxTab&&f.moveIfViewInvalid()||e(r,s)}),b.$on("jmxTreeUpdated",function(){e(r,s)}),b.$watch("nodeXmlNode",function(){b.isJmxTab&&f.moveIfViewInvalid()||e(r,s)});var t=function(c){var d=c.value;b.routes=d,b.nodes={},b.routeNodes={};var e=[],g=[],h=b.routeId;if(h||(h=a.getSelectedRouteId(f)),d){var i=$.parseXML(d);b.processorTree=a.camelProcessorMBeansById(f),a.loadRouteXmlNodes(b,i,h,e,g,n()),m(e,g)}else console.log("No data from route XML!");Core.$apply(b)},u=" selected"}])}(Camel||(Camel={}));var Camel;!function(a){var b="2";a._module.controller("Camel.SendMessageController",["$route","$scope","$element","$timeout","workspace","jolokia","localStorage","$location","activeMQMessage",function(c,d,e,f,g,h,i,j,k){function l(c,e){var f=g.selection;if(f){var j=f.objectName;if(j){var k=null;d.headers.length&&(k={},angular.forEach(d.headers,function(a){var b=a.name;b&&(k[b]=a.value)}),q.info("About to send headers: "+JSON.stringify(k)));var l=onSuccess(e);if("org.apache.camel"===f.domain){var m=a.getContextAndTargetEndpoint(g),n=m.uri;if(j=m.mbean,j&&n){var o=!0;if(a.isCamelVersionEQGT(2,14,g,h)){var p=h.execute(j,"canSendToEndpoint(java.lang.String)",n);p||(Core.notification("warning","Camel does not support sending to this endpoint."),o=!1)}o&&(k?h.execute(j,"sendBodyAndHeaders(java.lang.String, java.lang.Object, java.util.Map)",n,c,k,l):h.execute(j,"sendStringBody(java.lang.String, java.lang.String)",n,c,l))}else j?Core.notification("error","Failed to determine endpoint name!"):Core.notification("error","Could not find CamelContext MBean!"),q.debug("Parsed context and endpoint: ",m)}else{var r=i.activemqUserName,s=i.activemqPassword;k||(k={}),k.JMSDeliveryMode||(k.JMSDeliveryMode=b),h.execute(j,"sendTextMessage(java.util.Map, java.lang.String, java.lang.String, java.lang.String)",k,c,r,s,l)}}}}function m(){return!0}function n(){return!0}function o(){Fabric.fabricCreated(g)&&(d.container=Fabric.getCurrentContainer(h,["versionId","profileIds"]),h.execute(Fabric.managerMBean,"currentContainerConfigurationFiles",onSuccess(p)))}function p(a){d.profileFileNameToProfileId=a,d.profileFileNames=Object.keys(a).filter(function(a){return a.toLowerCase().startsWith("data/")}).sort(),d.showChoose=d.profileFileNames.length?!0:!1,d.selectedFiles={},Core.$apply(d)}var q=Logger.get("Camel");if(q.info("Loaded page!"),d.noCredentials=!1,d.showChoose=!1,d.profileFileNames=[],d.profileFileNameToProfileId={},d.selectedFiles={},d.container={},d.message="\n\n\n\n",d.headers=[],Core.bindModelToSearchParam(d,j,"tab","subtab","compose"),Core.bindModelToSearchParam(d,j,"searchText","q",""),Core.reloadWhenParametersChange(c,d,j),d.checkCredentials=function(){d.noCredentials=Core.isBlank(i.activemqUserName)||Core.isBlank(i.activemqPassword)},j.path().has("activemq")){if(d.localStorage=i,d.$watch("localStorage.activemqUserName",d.checkCredentials),d.$watch("localStorage.activemqPassword",d.checkCredentials),null!==k.message&&(d.message=k.message.bodyText,null!==k.message.PropertiesText))for(var r in k.message.StringProperties)d.headers.push({name:r,value:k.message.StringProperties[r]});k.message=null}d.openPrefs=function(){j.search("pref","ActiveMQ"),d.$emit("hawtioOpenPrefs")};var s="defaultLanguageFormat",t=g.getLocalStorage(s)||"javascript";d.codeMirror=void 0;var u={mode:{name:t},onChange:function(a){d.codeMirror||(d.codeMirror=a)}};d.codeMirrorOptions=CodeEditor.createEditorSettings(u),d.addHeader=function(){d.headers.push({name:"",value:""}),e&&f(function(){var a=e.find("input.headerName").last();a.focus()},100)},d.removeHeader=function(a){d.headers=d.headers.remove(a)},d.defaultHeaderNames=function(){function b(a){angular.forEach(a.definitions.headers.properties,function(a,b){c.push(b)})}var c=[];return n()&&b(a.jmsHeaderSchema),m()&&b(a.camelHeaderSchema),c},d.$watch("workspace.selection",function(){g.moveIfViewInvalid(),Fabric.fabricCreated(g)&&o()}),d.$watch("codeMirrorOptions.mode.name",function(a){g.setLocalStorage(s,a)});var v=function(){d.message="",Core.notification("success","Message sent!")};d.autoFormat=function(){setTimeout(function(){CodeEditor.autoFormatEditor(d.codeMirror)},50)},d.sendMessage=function(){var a=d.message;l(a,v)},d.fileSelection=function(){var a=[];return angular.forEach(d.selectedFiles,function(b,c){b&&a.push(c)}),a},d.sendSelectedFiles=function(){function a(){if(b.length){var f=b.pop();if(f){var g=d.profileFileNameToProfileId[f];if(g){var i=Fabric.getConfigFile(h,e,g,f);i||(q.warn("No body for message "+f),i=""),l(i,a)}}}else{var j=Core.maybePlural(c,"Message")+" sent!";Core.notification("success",j)}}var b=d.fileSelection(),c=b.length,e=d.container.versionId||"1.0";a(null)}}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.SourceController",["$scope","workspace",function(b,c){function d(a){function b(a,b){var c=b.getAttribute("customId");"route"===b.nodeName&&(c="true"),c&&"true"===c||b.removeAttribute("id"),b.removeAttribute("customId"),b.removeAttribute("_cid"),b.removeAttribute("group")}var c=$(a).clone();c.each(b),c.find("*").each(b);var d=c&&c.length?c[0]:a;return Core.xmlNodeToString(d)}function e(){var e=a.getSelectedRouteNode(c);if(e)b.source=d(e),Core.$apply(b);else{if(b.mbean=a.getSelectionCamelContextMBean(c),!b.mbean){var g=Core.pathGet(c,["selection","parent"]);g&&"context"===g.title&&(b.mbean=g.children[0].objectName)}if(b.mbean){var h=c.jolokia;h.request({type:"exec",mbean:b.mbean,operation:"dumpRoutesAsXml()"},onSuccess(f))}}}b.$on("$routeChangeSuccess",function(){setTimeout(e,50)}),b.$watch("workspace.selection",function(){c.moveIfViewInvalid()||e()}),b.mode="xml";var f=function(e){var f=e.value,g=a.getSelectedRouteId(c);if(f&&g){var h=$.parseXML(f),i=$(h).find('route[id="'+g+'"]');if(i&&i.length){var j=i[0],k=d(j);k&&(f=k)}}b.source=f,Core.$apply(b)},g=function(){Core.notification("success","Route updated!"),a.clearSelectedRouteNode(c),e()};b.saveRouteXml=function(){var d=b.source;if(d){var e=decodeURIComponent(d);a.log.debug("addOrUpdateRoutesFromXml xml decoded: "+e);var f=c.jolokia,h=a.getSelectionCamelContextMBean(c);h?f.execute(h,"addOrUpdateRoutesFromXml(java.lang.String)",e,onSuccess(g)):Core.notification("error","Could not find CamelContext MBean!")}}}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.TraceRouteController",["$scope","workspace","jolokia","localStorage","tracerStatus",function(b,c,d,e,f){function g(){b.tracing=!1,null!=f.jhandle&&(l.debug("Unregistering jolokia handle"),d.unregister(f.jhandle),f.jhandle=null);var e=a.getSelectionCamelTraceMBean(c);if(e)if(b.tracing=d.getAttribute(e,"Enabled",onSuccess(null)),b.tracing){var g=e;g&&null===f.jhandle&&(l.debug("Registering jolokia handle"),f.jhandle=d.register(h,{type:"exec",mbean:g,operation:"dumpAllTracedMessagesAsXml()",ignoreErrors:!0,arguments:[]})),b.graphView="app/camel/html/routes.html",b.tableView="app/camel/html/browseMessages.html"}else f.messages=[],b.messages=[],b.graphView=null,b.tableView=null}function h(d){l.debug("Populating response "+d);var e=a.getSelectedRouteId(c),g=d.value;if(angular.isString(g)){var h=$.parseXML(g),i=$(h).find("fabricTracerEventMessage");i&&i.length||(i=$(h).find("backlogTracerEventMessage")),i.each(function(c,d){var f=$(d).find("routeId").text();if(f===e){var g=a.createMessageFromXml(d),h=$(d).find("toNode").text();h&&(g.toNode=h),l.debug("Adding new message to trace table with id "+g.id),b.messages.push(g)}}),f.messages=b.messages,Core.$apply(b)}}function i(){angular.forEach(b.gridOptions.selectedItems,function(b){if(b){var c=b.toNode;if(c){var d=d3.select("svg").selectAll("g .node");a.highlightSelectedNode(d,c)}}})}function j(){g(),Core.$apply(b)}function k(b){var f=a.getSelectionCamelTraceMBean(c);if(f){if(f.toString().endsWith("BacklogTracer")){var g=a.maximumTraceOrDebugBodyLength(e),h=a.traceOrDebugIncludeStreams(e);d.setAttribute(f,"BodyMaxChars",g),d.setAttribute(f,"BodyIncludeStreams",h),d.setAttribute(f,"BodyIncludeFiles",h)}d.setAttribute(f,"Enabled",b,onSuccess(j))}}var l=Logger.get("CamelTracer");b.tracing=!1,b.messages=[],b.graphView=null,b.tableView=null,b.mode="text",b.messageDialog=new UI.Dialog,b.gridOptions=a.createBrowseGridOptions(),b.gridOptions.selectWithCheckboxOnly=!1,b.gridOptions.showSelectionCheckbox=!1,b.gridOptions.multiSelect=!1,b.gridOptions.afterSelectionChange=i,b.gridOptions.columnDefs.push({field:"toNode",displayName:"To Node"}),b.startTracing=function(){l.info("Start tracing"),k(!0)},b.stopTracing=function(){l.info("Stop tracing"),k(!1)},b.clear=function(){l.debug("Clear messages"),f.messages=[],b.messages=[],Core.$apply(b)},b.$watch("workspace.selection",function(){c.moveIfViewInvalid()||(b.messages=f.messages,g())}),b.openMessageDialog=function(a){var c=Core.pathGet(a,["rowIndex"]);b.selectRowIndex(c),b.row&&(b.mode=CodeEditor.detectTextFormat(b.row.body),b.messageDialog.open())},b.selectRowIndex=function(a){b.rowIndex=a;var c=b.gridOptions.selectedItems;c.splice(0,c.length),a>=0&&a<b.messages.length?(b.row=b.messages[a],b.row&&c.push(b.row)):b.row=null,i()},l.info("Re-activating tracer with "+f.messages.length+" existing messages"),b.messages=f.messages,b.tracing=null!=f.jhandle}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.TreeHeaderController",["$scope","$location",function(a){a.contextFilterText="",a.$watch("contextFilterText",function(b,c){b!==c&&a.$emit("camel-contextFilterText",b)}),a.expandAll=function(){Tree.expandAll("#cameltree")},a.contractAll=function(){Tree.contractAll("#cameltree")}}]),a._module.controller("Camel.TreeController",["$scope","$location","$timeout","workspace","$rootScope",function(b,c,d,e,f){function g(d){void 0===d&&(d=null),b.fullScreenViewLink=a.linkToFullScreenView(e);var f=[],g=a.jmxDomain,i=e.tree;if(i){var j=new Folder("Camel Contexts");j.addClass="org-apache-camel-context-folder",j.children=f,j.typeName="context",j.key="camelContexts",j.domain=g;var k=b.contextFilterText;b.lastContextFilterText=k,a.log.debug("Reloading the tree for filter: "+k);var l=i.get(g);l&&angular.forEach(l.children,function(b){var c=b.map;if(c){var d=c.context,e=c.routes,h=c.endpoints;if(d){var i=d.children[0];if(i){var l=i.title,m=Core.matchFilterIgnoreCase(l,k);if(m){var n=new Folder(l);if(n.addClass="org-apache-camel-context",n.domain=g,n.objectName=i.objectName,n.entries=i.entries,n.typeName=i.typeName,n.key=i.key,n.version=i.version,e){var o=new Folder("Routes");o.addClass="org-apache-camel-routes-folder",o.parent=d,o.children=e.children,angular.forEach(o.children,function(a){return a.addClass="org-apache-camel-routes"}),n.children.push(o),o.typeName="routes",o.key=e.key,o.domain=e.domain}if(h){var p=new Folder("Endpoints");p.addClass="org-apache-camel-endpoints-folder",p.parent=d,p.children=h.children,angular.forEach(p.children,function(b){b.addClass="org-apache-camel-endpoints",a.getContextId(b)||(b.entries.context=i.entries.context)}),n.children.push(p),p.entries=i.entries,p.typeName="endpoints",p.key=h.key,p.domain=h.domain}var q=new Folder("MBeans");angular.forEach(c,function(a,b){"context"!==b&&"routes"!==b&&"endpoints"!==b&&q.children.push(a)}),q.children.length>0&&(q.sortChildren(!1),n.children.push(q)),n.parent=j,f.push(n)}}}}});var m=$("#cameltree");Jmx.enableTree(b,c,e,m,[j],!0),setTimeout(function(){h(),angular.isFunction(d)&&d()},50)}}function h(){Jmx.updateTreeSelectionFromURLAndAutoSelect(c,$("#cameltree"),function(a){var b=a.getChildren();if(b&&1===b.length){a=b[0],a.expand(!0);var c=a.getChildren();if(c&&c.length){var d=c[0];if("routes"===d.data.typeName)return a=d}}return null},!0),b.fullScreenViewLink=a.linkToFullScreenView(e)}b.contextFilterText=c.search().cq,b.fullScreenViewLink=a.linkToFullScreenView(e),b.$on("$routeChangeSuccess",function(){setTimeout(h,50)});var i=Core.throttled(g,500);b.$watch("workspace.tree",function(){i()});var j=Core.throttled(function(){g(function(){$("#camelContextIdFilter").focus()})},500);b.$watch("contextFilterText",function(){b.contextFilterText!=b.lastContextFilterText&&d(j,250)}),f.$on("camel-contextFilterText",function(a,c){b.contextFilterText=c}),b.$on("jmxTreeUpdated",function(){i()})}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.TypeConverterController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(a){var c=a.value;c&&(b.mbeanAttributes=c,Core.$apply(b))}function g(a){var c=a.value;if(c){var d=[];for(var e in c){var f=c[e];for(var g in f)d.push({from:e,to:g})}d=d.sortBy("from"),b.data=d,b.selectedMBean=a.request.mbean,Core.$apply(b)}}function h(){console.log("Loading TypeConverter data...");var c=a.getSelectionCamelTypeConverter(d);if(c){var h={type:"read",mbean:c,attribute:["AttemptCounter","FailedCounter","HitCounter","MissCounter","NumberOfTypeConverters","StatisticsEnabled"]};e.request(h,onSuccess(f)),scopeStoreJolokiaHandle(b,e,e.register(f,h)),e.request({type:"exec",mbean:c,operation:"listTypeConverters"},onSuccess(g))}}b.data=[],b.selectedMBean=null,b.mbeanAttributes={};var i=[{field:"from",displayName:"From",cellFilter:null,width:"*",resizable:!0},{field:"to",displayName:"To",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!0,columnDefs:i,selectedItems:[],filterOptions:{filterText:""}},b.renderIcon=function(b){return a.iconClass(b)},b.disableStatistics=function(){b.selectedMBean&&e.setAttribute(b.selectedMBean,"StatisticsEnabled",!1)},b.enableStatistics=function(){b.selectedMBean&&e.setAttribute(b.selectedMBean,"StatisticsEnabled",!0)},b.resetStatistics=function(){b.selectedMBean&&e.request({type:"exec",mbean:b.selectedMBean,operation:"resetTypeConversionCounters"},onSuccess(null,{silent:!0}))},h()}])}(Camel||(Camel={}));var Camin;!function(a){var b="camin";a._module=angular.module(b,["bootstrap","ngResource","ngGrid","hawtioCore","elasticjs.service"]),a._module.config(["$routeProvider",function(a){a.when("/camin",{templateUrl:"app/camin/html/camin.html"}).when("/camin/:exchangeId",{templateUrl:"app/camin/html/camin.html"})}]),a._module.run(["workspace","viewRegistry","helpRegistry",function(a,b,c){b.camin="app/camin/html/layoutCamin.html",c.addUserDoc("camin","app/camin/doc/help.md",function(){return Fabric.hasFabric(a)}),a.topLevelTabs.push({id:"camin",content:"Camel",title:"Insight into Camel",isValid:function(a){return Fabric.hasFabric(a)},href:function(){return"#/camin"},isActive:function(a){return a.isLinkActive("camin")}})}]),hawtioPluginLoader.addModule(b)}(Camin||(Camin={}));var Camin;!function(a){a._module.controller("Camin.Controller",["$scope","jolokia","localStorage","$routeParams","ejsResource",function(b,c,d,e,f){b.query="",b.breadcrumbs=[],b.onQueryChange=function(){b.breadcrumbs=[b.query],i()};var g=Logger.get("Camin"),h=new Jolokia(Core.getJolokiaUrl()).execute("io.fabric8.insight:type=Elasticsearch","getRestUrl","insight"),i=(f(h),function(){var a='exchange.id:"'+b.breadcrumbs.join('" OR exchange.id:"')+'" OR exchange.in.headers.ExtendedBreadcrumb:"'+b.breadcrumbs.join('" OR exchange.in.headers.ExtendedBreadcrumb:"')+'" OR exchange.out.headers.ExtendedBreadcrumb:"'+b.breadcrumbs.join('" OR exchange.out.headers.ExtendedBreadcrumb:"')+'"',c=ejs.Request().types("camel"),d=c.from(0).size(1e3).query(ejs.QueryStringQuery(a)).doSearch();d.then(function(a){if(!angular.isUndefined(a.error))return void g.error(a.error);
g.debug("Results",a);for(var c=b.breadcrumbs.length,d=0;d<a.hits.hits.length;d++){var e=function(a){if(a){"string"==typeof a&&(a=[a]);for(var c=0;c<a.length;c++){var d=a[c];b.breadcrumbs.indexOf(d)<0&&b.breadcrumbs.push(d)}}};angular.isDefined(a.hits.hits[d]._source.exchange["in"])&&e(a.hits.hits[d]._source.exchange["in"].headers.ExtendedBreadcrumb),angular.isDefined(a.hits.hits[d]._source.exchange.out)&&e(a.hits.hits[d]._source.exchange.out.headers.ExtendedBreadcrumb)}if(g.debug("Found "+a.hits.total+" ids"),c!=b.breadcrumbs.length)i();else{for(var f=[],d=0;d<a.hits.hits.length;d++){var h=a.hits.hits[d]._id;f.indexOf(h)<0&&f.push(h)}var j=ejs.Request().types("camel"),k=j.from(0).size(1e3).query(ejs.MatchAllQuery()).filter(ejs.IdsFilter(f)).sort("@timestamp").doSearch();k.then(function(a){if(!angular.isUndefined(a.error))return void g.error(a.error);g.debug("Found "+a.hits.total+" exchanges");for(var b=[],c=0;c<a.hits.hits.length;c++){var d=a.hits.hits[c]._source;b.push(d)}n(b)})}})}),j=function(a){var b,c,d=0,e=[1,4,5,6,7,10,11];if(c=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(a)){for(var f,g=0;f=e[g];++g)c[f]=+c[f]||0;c[2]=(+c[2]||1)-1,c[3]=+c[3]||1,"Z"!==c[8]&&void 0!==c[9]&&(d=60*c[10]+c[11],"+"===c[9]&&(d=0-d)),b=Date.UTC(c[1],c[2],c[3],c[4],c[5]+d,c[6],c[7])}else b=Date.parse(a);return b},k=function(b){var c=new a.Sequence,d={};b=b.sort(function(a,b){return j(a["@timestamp"])-j(b["@timestamp"])});for(var e=0;e<b.length;e++)if("Created"===b[e].event){var f=b[e],h=_.find(b,function(a){return"Completed"===a.event&&f.exchange.id===a.exchange.id});if(null===h){g.debug("Could not find matching Completed exchange for "+f.exchange.id);continue}var i=c.endpoint(h.exchange.fromEndpoint,h.exchange.routeId,h.exchange.contextId,h.host),k=c.exec(f.exchange.id,i,j(f["@timestamp"]),j(h["@timestamp"]));d[f.exchange.id]=k}for(var l={},e=0;e<b.length;e++)if("Sending"===b[e].event&&b[e].exchange["in"]&&b[e].exchange["in"].headers){var m=b[e].exchange["in"].headers.AuditCallId;if(m&&void 0===l[m]){var n=b[e],o=_.find(b,function(a){return"Sent"===a.event&&n.exchange.id===a.exchange.id&&a.exchange["in"].headers.AuditCallId===m}),f=_.find(b,function(a){return"Created"===a.event&&n.exchange.id!==a.exchange.id&&a.exchange["in"].headers.AuditCallId===m}),p=d[n.exchange.id],q=f?d[f.exchange.id]:null;if(null!==o&&null!==f&&null!==p&&null!=q){var r=c.call(m,p,q,j(n["@timestamp"]),j(o["@timestamp"]));l[m]=r}else g.debug("Could not find Execution for exchange "+n.exchange.id)}}return c},l=function(b){for(var c=new a.Diagram,d={},e=[],f=b.start(),g=0;g<b.endpoints.length;g++){var h=c.actor("ep"+g),i=b.endpoints[g],j=i.url+"|"+i.routeId+"|"+i.contextId+"|"+i.host;d[j]=h}for(var g=0;g<b.calls.length;g++){var k=b.calls[g];if(k.execB){var l=k.execA.endpoint,m=l.url+"|"+l.routeId+"|"+l.contextId+"|"+l.host,n=k.execB.endpoint,o=n.url+"|"+n.routeId+"|"+n.contextId+"|"+n.host,p=d[m],q=d[o],r=k.start-f,s=k.execB.start-f,t=k.execB.stop-f,u=k.stop-f;e.push({actorA:p,actorB:q,message:r+"ms - "+s+"ms",timestamp:r}),e.push({actorA:q,actorB:p,message:t+"ms - "+u+"ms",timestamp:t})}}e=e.sort(function(a,b){return a["@timestamp"]-b["@timestamp"]});for(var g=0;g<e.length;g++)c.signal(e[g].actorA,e[g].actorB,e[g].message);return c},m=function(b){for(var c=new a.Gantt,d=0;d<b.endpoints.length;d++)for(var e=b.endpoints[d],f=c.resource(e),g=0;g<b.execs.length;g++){var h=b.execs[g];h.endpoint===e&&c.task(f,h.start,h.stop,h)}for(var d=0;d<b.calls.length;d++){var i=b.calls[d];if(i.execB){var j=c.taskByData(i.execA),k=c.taskByData(i.execB);c.link(i.start,j,i.stop,k,i)}}return c.layout(),c},n=function(a){b.definition="",a=a.sort(function(a,b){return j(a["@timestamp"])-j(b["@timestamp"])}),g.debug("Events",a);var c=k(a);g.debug("Sequence",c);var d=m(c);g.debug("Gantt",d),$("#gantt").html(""),p("#gantt",d);var e=l(c);g.debug("Diagram",e),$("#diagram").html(""),o("#diagram",e)},o=function(a,b){for(var c=10,d=10,e=100,f=30,g=40,h=30,i=20,j=14,k=b.actors.length*(e+2*f),l=(b.signals.length+1)*h+2*g+2*d,m=d3.select(a).append("svg").attr("width",k+2*d).attr("height",l+2*d),n=m.append("g").attr("text-anchor","middle"),o=0;o<b.actors.length;o++){var p=b.actors[o],q=n.append("g").attr("transform","translate("+(o*(e+2*f)+f)+","+g+")");q.append("rect").attr("width",e).attr("height",g).attr("stroke","#000").attr("stroke-width","2").attr("fill","#FFFFFF"),q.append("text").attr("x",e/2).attr("y",g/2).attr("stroke-width","0").attr("dominant-baseline","middle").attr("font-size",i).text(p.name),n.append("line").attr("x1",o*(e+2*f)+e/2+f).attr("y1",2*g).attr("x2",o*(e+2*f)+e/2+f).attr("y2",l-g).attr("stroke","#000").attr("stroke-width","2");var q=n.append("g").attr("transform","translate("+(o*(e+2*f)+f)+","+(l-g)+")");q.append("rect").attr("width",e).attr("height",g).attr("stroke","#000").attr("stroke-width","2").attr("fill","white"),q.append("text").attr("x",e/2).attr("y",g/2).attr("stroke-width","0").attr("dominant-baseline","middle").attr("font-size",i).text(p.name)}for(var o=0;o<b.signals.length;o++){var r,s,t,u,v;r=b.signals[o].actorA.index*(e+2*f)+e/2+f,s=(o+1)*h+2*g,t=Math.abs(b.signals[o].actorA.index-b.signals[o].actorB.index)*(e+2*f),u=b.signals[o].actorB.index>b.signals[o].actorA.index?1:-1,v=b.signals[o].message;var q=n.append("g").attr("transform","translate("+r+","+s+")").attr("stroke-width","2");q.append("rect").attr("x",Math.min(3,t*u+3)).attr("y","-16").attr("width",Math.abs((t-6)*u)).attr("height","19").attr("stroke","white").attr("stroke-width","0").attr("fill","white"),q.append("line").attr("x1",0).attr("y1",0).attr("x2",t*u).attr("y2",0).attr("stroke","#000").attr("stroke-width","2"),q.append("line").attr("x1",t*u-c*u).attr("y1",-c).attr("x2",t*u).attr("y2",0).attr("stroke","#000").attr("stroke-width","2"),q.append("line").attr("x1",t*u).attr("y1",0).attr("x2",t*u-c*u).attr("y2",c).attr("stroke","#000").attr("stroke-width","2"),q.append("text").attr("x",t*u/2).attr("y",-8).attr("stroke-width","0").attr("dominant-baseline","middle").attr("font-size",j).text(v)}},p=function(a,b){var c=35,d=3,e=4,f=800,g=c*b.resources.length,h={top:20,right:40,bottom:20,left:250},i=b.start,j=b.stop,k=d3.scale.linear().domain([i-.1*(j-i),j+.1*(j-i)]).range([0,f]),l=function(a){return a.resource.index*c+d+a.index*(c-2*d)/(a.max+1)},m=function(a){return 2*(c-2*d)/(a.max+1)},n=d3.select(a).append("svg").attr("width",f+h.left+h.right).attr("height",g+h.top+h.bottom),o=n.append("g").attr("width",f).attr("height",g).attr("transform","translate(0,"+h.top+")").selectAll("text").data(b.resources).enter();o.append("text").attr("x",0).attr("y",function(a){return a.index*c+c/2}).attr("dy","-0.2em").attr("text-anchor","start").text(function(a){var b=a.data,c=b.url;return 0==c.indexOf("Endpoint[")&&(c=c.substring(9,c.length-1)),c}),o.append("text").attr("x",0).attr("y",function(a){return a.index*c+c/2}).attr("dy","0.8em").attr("text-anchor","start").text(function(a){var b=a.data;return b.host+"/"+b.contextId+"/"+b.routeId});var p=n.append("g").attr("width",f).attr("height",g).attr("transform","translate("+h.left+","+h.top+")");p.append("g").attr("width",f).attr("height",g).selectAll("rect").data(b.tasks).enter().append("rect").attr("rx",2*d).attr("ry",2*d).attr("x",function(a){return k(a.start)}).attr("y",l).attr("height",m).attr("width",function(a){return k(a.stop)-k(a.start)}).attr("stroke","#000000").attr("stroke-width","2").attr("fill",function(){return d3.hsl(360*Math.random(),.8,.8).toString()});var q=p.append("g").attr("width",f).attr("height",g).attr("stroke","#404040").attr("stroke-width","2").selectAll("line").data(b.links).enter();q.append("line").attr("x1",function(a){return k(a.start)}).attr("y1",function(a){return l(a.taskA)+m(a.taskA)}).attr("x2",function(a){return k(a.start)}).attr("y2",function(a){return l(a.taskB)+m(a.taskB)/2}),q.append("line").attr("x1",function(a){return k(a.start)}).attr("y1",function(a){return l(a.taskB)+m(a.taskB)/2}).attr("x2",function(a){return k(a.taskB.start)}).attr("y2",function(a){return l(a.taskB)+m(a.taskB)/2}),q.append("line").attr("x1",function(a){return k(a.taskB.start)}).attr("y1",function(a){return l(a.taskB)+m(a.taskB)/2}).attr("x2",function(a){return k(a.taskB.start)-e}).attr("y2",function(a){return l(a.taskB)+m(a.taskB)/2-e}),q.append("line").attr("x1",function(a){return k(a.taskB.start)}).attr("y1",function(a){return l(a.taskB)+m(a.taskB)/2}).attr("x2",function(a){return k(a.taskB.start)-e}).attr("y2",function(a){return l(a.taskB)+m(a.taskB)/2+e}),q.append("line").attr("x1",function(a){return k(a.taskB.stop)}).attr("y1",function(a){return l(a.taskB)+m(a.taskB)/2}).attr("x2",function(a){return k(a.stop)}).attr("y2",function(a){return l(a.taskB)+m(a.taskB)/2}),q.append("line").attr("x1",function(a){return k(a.stop)}).attr("y1",function(a){return l(a.taskB)+m(a.taskB)/2}).attr("x2",function(a){return k(a.stop)}).attr("y2",function(a){return l(a.taskA)+m(a.taskA)}),q.append("line").attr("x1",function(a){return k(a.stop)}).attr("y1",function(a){return l(a.taskA)+m(a.taskA)}).attr("x2",function(a){return k(a.stop)-e}).attr("y2",function(a){return l(a.taskA)+m(a.taskA)+e}),q.append("line").attr("x1",function(a){return k(a.stop)}).attr("y1",function(a){return l(a.taskA)+m(a.taskA)}).attr("x2",function(a){return k(a.stop)+e}).attr("y2",function(a){return l(a.taskA)+m(a.taskA)+e})};e.exchangeId&&(b.query=e.exchangeId,b.onQueryChange())}])}(Camin||(Camin={}));var Camin;!function(a){var b=function(){function a(){this.actors=[],this.signals=[]}return a.prototype.actor=function(a){for(var b=0;b<this.actors.length;b++)if(this.actors[b].name===a)return this.actors[b];var d=new c(a,this.actors.length);return this.actors.push(d),d},a.prototype.signal=function(a,b,c){var e=new d(a,b,c);return this.signals.push(e),e},a}();a.Diagram=b;var c=function(){function a(a,b){this.name=a,this.index=b}return a}();a.Actor=c;var d=function(){function a(a,b,c){this.actorA=a,this.actorB=b,this.message=c}return a.prototype.isSelf=function(){return this.actorA.index===this.actorB.index},a}();a.Signal=d}(Camin||(Camin={}));var Camin;!function(a){var b=function(){function a(){this.resources=[],this.tasks=[],this.links=[]}return a.prototype.resource=function(a){var b=new c(a,this.resources.length);return this.resources.push(b),b},a.prototype.task=function(a,b,c,d){var e=a.task(b,c,d);return this.tasks.push(e),e},a.prototype.link=function(a,b,c,d,f){var g=new e(a,b,c,d,f);return this.links.push(g),g},a.prototype.layout=function(){for(var a=0;a<this.resources.length;a++)this.resources[a].layout(),this.start=this.start?Math.min(this.start,this.resources[a].start):this.resources[a].start,this.stop=this.stop?Math.max(this.stop,this.resources[a].stop):this.resources[a].stop;for(var a=0;a<this.links.length;a++)this.start=this.start?Math.min(this.start,this.links[a].start):this.links[a].start,this.stop=this.stop?Math.max(this.stop,this.links[a].stop):this.links[a].stop},a.prototype.taskByData=function(a){for(var b=0;b<this.tasks.length;b++)if(this.tasks[b].data===a)return this.tasks[b];return void 0},a}();a.Gantt=b;var c=function(){function a(a,b){this.tasks=[],this.index=b,this.data=a}return a.prototype.task=function(a,b,c){var e=new d(a,b,c,this);return this.tasks.push(e),e},a.prototype.layout=function(){this.tasks.sort(function(a,b){return a.start-b.start});for(var a=[],b=0;b<this.tasks.length;b++){this.start=this.start?Math.min(this.start,this.tasks[b].start):this.tasks[b].start,this.stop=this.stop?Math.max(this.stop,this.tasks[b].stop):this.tasks[b].stop;for(var c=0;c<a.length;c++)if(a[c]<this.tasks[b].start){a[c]=this.tasks[b].stop,this.tasks[b].index=c;break}if(!this.tasks[b].index){var d=a.length;this.tasks[b].index=d,a[d]=this.tasks[b].stop}}for(var b=0;b<this.tasks.length;b++)this.tasks[b].max=a.length},a}();a.Resource=c;var d=function(){function a(a,b,c,d){this.start=a,this.stop=b,this.data=c,this.resource=d}return a}();a.Task=d;var e=function(){function a(a,b,c,d,e){this.start=a,this.stop=c,this.taskA=b,this.taskB=d,this.data=e}return a}();a.Link=e}(Camin||(Camin={}));var Camin;!function(a){var b=function(){function a(){this.endpoints=[],this.execs=[],this.calls=[]}return a.prototype.endpoint=function(a,b,d,e){for(var f=0;f<this.endpoints.length;f++)if(this.endpoints[f].url===a&&this.endpoints[f].routeId===b&&this.endpoints[f].contextId===d&&this.endpoints[f].host===e)return this.endpoints[f];var g=new c(a,b,d,e);return this.endpoints.push(g),g},a.prototype.exec=function(a,b,c,e){var f=new d(a,b,c,e);return this.execs.push(f),f},a.prototype.call=function(a,b,c,d,f){var g=new e(a,b,c,d,f);return this.calls.push(g),g},a.prototype.start=function(){for(var a,b=0;b<this.execs.length;b++)a=a?Math.min(a,this.execs[b].start):this.execs[b].start;for(var b=0;b<this.calls.length;b++)a=a?Math.min(a,this.calls[b].start):this.calls[b].start;return a},a.prototype.stop=function(){for(var a,b=0;b<this.execs.length;b++)a=a?Math.max(a,this.execs[b].stop):this.execs[b].stop;for(var b=0;b<this.calls.length;b++)a=a?Math.max(a,this.calls[b].stop):this.calls[b].stop;return a},a}();a.Sequence=b;var c=function(){function a(a,b,c,d){this.url=a,this.routeId=b,this.contextId=c,this.host=d}return a}();a.Endpoint=c;var d=function(){function a(a,b,c,d){this.exchangeId=a,this.endpoint=b,this.start=c,this.stop=d}return a}();a.Execution=d;var e=function(){function a(a,b,c,d,e){this.callId=a,this.execA=b,this.execB=c,this.start=d,this.stop=e}return a}();a.Call=e}(Camin||(Camin={}));var Core;!function(a){a._module.controller("Core.AboutController",["$scope","$location","jolokia","branding","localStorage",function(b,c,d,e){Logger.get("About");$.ajax({url:"app/core/doc/about.md",dataType:"html",cache:!1,success:function(c){if(b.html="Unable to download about.md",angular.isDefined(c)){b.html=marked(c),b.branding=e,b.customBranding=e.enabled;try{b.hawtioVersion=d.request({type:"read",mbean:"hawtio:type=About",attribute:"HawtioVersion"}).value}catch(f){b.hawtioVersion="N/A"}b.jolokiaVersion=d.version().agent,b.serverProduct=d.version().info.product,b.serverVendor=d.version().info.vendor,b.serverVersion=d.version().info.version}a.$apply(b)},error:function(){b.html="Unable to download about.md",a.$apply(b)}})}])}(Core||(Core={}));var Kubernetes;!function(a){function b(a){return a.treeContainsDomainAndProperties(Fabric.jmxDomain,{type:"Kubernetes"})}function c(a){return a.treeContainsDomainAndProperties(Fabric.jmxDomain,{type:"KubernetesTemplateManager"})}function d(a){return a.treeContainsDomainAndProperties(Fabric.jmxDomain,{type:"AppView"})}function e(a,b,c,d){function e(a,b){angular.forEach(b,function(b){$.inArray(b,a)<0&&a.push(b)})}void 0===b&&(b=[]),void 0===c&&(c=[]),void 0===d&&(d=[]);var f=function(a){return a.namespace},g=[];e(g,b.map(f)),e(g,d.map(f)),e(g,c.map(f)),g=g.sort(),a.namespaces=g,a.selectedNamespace=a.selectedNamespace||g[0]}function f(a,b,c){if(a.id=b,a.fetched){if(!b)return void(a.json="");if(c){var d=c.find(function(a){return a.id===b});d?(a.json=angular.toJson(d,!0),a.item=d):(a.id=void 0,a.json="",a.item=void 0)}}}function g(a,b){void 0===b&&(b=",");var c="";return angular.forEach(a,function(a,d){var e=c?b:"";c+=e+d+"="+a}),c}function h(a,b){a.$watch("tableConfig.filterOptions.filterText",function(a){b.search("q",a)}),a.$on("labelFilterUpdate",function(b,c){var d=a.tableConfig.filterOptions.filterText;if(Core.isBlank(d))a.tableConfig.filterOptions.filterText=c;else{var e=d.split(/\s+/);e.any(c)?(e=e.remove(c),a.tableConfig.filterOptions.filterText=e.join(" ")):a.tableConfig.filterOptions.filterText=d+" "+c}a.id=void 0})}function i(b,c){var d={podsLink:"",valid:0,waiting:0,error:0};return b&&(d.podsLink=Core.url("/kubernetes/pods?q="+encodeURIComponent(a.labelsToString(b," "))),angular.forEach(c,function(a){if(l(b,a.labels)){var c=(a.currentState||{}).status;if(c){var e=c.toLowerCase();e.startsWith("run")?d.valid+=1:e.startsWith("wait")?d.waiting+=1:(e.startsWith("term")||e.startsWith("error")||e.startsWith("fail"))&&(d.error+=1)}else d.error+=1}})),d}function j(b,c,d,e,f,g,h){if(void 0===f&&(f="App"),void 0===g&&(g=null),void 0===h&&(h=null),e){f=f||"App";var i=h?" in namespace "+h:"";Core.notification("info","Running "+f+i);var j=onSuccess(function(b){a.log.debug("Got response: ",b),angular.isFunction(g)&&g(),Core.$apply(d)});h?c.execute(a.managerMBean,"applyInNamespace",e,h,j):c.execute(a.managerMBean,"apply",e,j)}}function k(a){var b=(a||{}).status;if(b){var c=b.toLowerCase();return c.startsWith("run")}return!1}function l(a,b){if(angular.isObject(b)){var c=!0;return angular.forEach(a,function(a,d){c&&b[d]!==a&&(c=!1)}),c}return!1}function m(a){var b=Service.serviceLink(a,"kibana-service");return b?(b.endsWith("/")||(b+="/"),b+"#/discover/Fabric8"):null}function n(a,b,c){function d(a){if(a){var b=a.indexOf("-");b>0&&(a=a.substring(0,b))}var c="";return c+a+c}var e=m(a);if(e){var f="",g=0;angular.forEach(c,function(a){var b=a.id;if(b){var c=f?" || ":"";g++,f+=c+d(b)}}),f&&(g>1&&(f="("+f+")"),e+="?_a=(query:'k8s_pod:"+f+"')");{b.open(e,"viewLogs")}}}function o(b,c,d,e,f){void 0===f&&(f=null),c.then(function(c){var g=UrlHelpers.join(c,"/api/v1beta1/replicationControllers/"+d);b.get(g).success(function(c){if(c){var d=c.desiredState;d||(d={},c.desiredState=d),d.replicas=e,b.put(g,c).success(function(){a.log.debug("updated controller "+g),angular.isFunction(f)&&f()}).error(function(b,c){a.log.warn("Failed to save "+g+" "+b+" "+c)})}}).error(function(b,c){a.log.warn("Failed to load "+g+" "+b+" "+c)})},function(b){a.log.debug("Failed to get rest API URL, can't resize controller "+d+" resource: ",b)})}function p(a){if(a){var b=a.toLowerCase();if(b.startsWith("run")||b.startsWith("ok"))return"icon-play-circle green";if(b.startsWith("wait"))return"icon-download";if(b.startsWith("term")||b.startsWith("error")||b.startsWith("fail"))return"icon-off orange"}return"icon-question red"}a.context="/kubernetes",a.hash="#"+a.context,a.defaultRoute=a.hash+"/apps",a.pluginName="Kubernetes",a.templatePath="app/kubernetes/html/",a.log=Logger.get(a.pluginName),a.defaultApiVersion="v1beta2",a.appSuffix=".app",a.mbean=Fabric.jmxDomain+":type=Kubernetes",a.managerMBean=Fabric.jmxDomain+":type=KubernetesManager",a.appViewMBean=Fabric.jmxDomain+":type=AppView",a.isKubernetes=b,a.isKubernetesTemplateManager=c,a.isAppView=d,a.updateNamespaces=e,a.setJson=f,a.labelsToString=g,a.initShared=h,a.createPodCounters=i,a.runApp=j,a.isRunning=k,a.selectorMatches=l,a.kibanaLogsLink=m,a.openLogsForPods=n,a.resizeController=o,a.statusTextToCssClass=p}(Kubernetes||(Kubernetes={}));var Core;!function(a){function b(b,c){var d=null;return angular.isDefined(b)&&(d=a.parseJsonText(b,"localStorage for "+c)),d}function c(c,e,f,h){var i=Perspective.topLevelTabsForPerspectiveId(e,c);if(i&&i.length>0){i=i.filter(function(a){var b=void 0;return angular.isFunction(a.href)?b=a.href():angular.isString(a.href)&&(b=a.href),b&&g(e,a.isValid,c)});var j="plugins-"+c,k=b(h[j],j);k?(k=k.filter(function(a){return i.some(function(b){return b.id===a.id})}),i.forEach(function(b){var c=k.some(function(a){return a.id===b.id});c||(a.log.info("Discovered new plugin in JVM since loading configuration: "+b.id),k.push({id:b.id,index:-1,displayName:b.content,enabled:!0,isDefault:!1}))})):k=i}var l=d(k);return l}function d(a){var b=[];return a&&a.forEach(function(a,c){var d;d=angular.isUndefined(a.displayName)?a.content:a.displayName;var e;e=angular.isUndefined(a.enabled)?!0:a.enabled;var f;f=angular.isUndefined(a.isDefault)?!1:a.isDefault,b.push({id:a.id,index:c,displayName:d,enabled:e,isDefault:f})}),b}function e(a,b,c){var d=Perspective.topLevelTabsForPerspectiveId(b,a);if("website"===a)return d;var e=[];return c.forEach(function(a){if(a.enabled){var b=a.id,c=null;b&&(c=d.find(function(a){return a.id===b})),c&&e.push(c)}}),e}function f(b,c,d){angular.forEach(d,function(d,e){b[e]=d.value;var f=d.converter,g=d.formatter;if(g||(g=function(a){return a}),f||(f=function(a){return a}),e in c){var h=f(c[e]);a.log.debug("from local storage, setting ",e," to ",h),b[e]=h}else{var h=d.value;a.log.debug("from default, setting ",e," to ",h),c[e]=h}var i=d.override;i||(i=function(b,f){if(b!==f){angular.isFunction(d.pre)&&d.pre(b);var h=g(b);a.log.debug("to local storage, setting ",e," to ",h),c[e]=h,angular.isFunction(d.post)&&d.post(b)}}),d.compareAsObject?b.$watch(e,i,!0):b.$watch(e,i)})}function g(a,b,c){return!b||b(a,c)}function h(b,c,d,e){var f=a.configuredPluginsForPerspectiveId(b,c,d,e),g=null;return f.forEach(function(a){a.isDefault&&(g=a)}),g}a.parsePreferencesJson=b,a.configuredPluginsForPerspectiveId=c,a.safeTabsToPlugins=d,a.filterTopLevelTabs=e,a.initPreferenceScope=f,a.isValidFunction=g,a.getDefaultPlugin=h}(Core||(Core={}));var Insight;!function(a){function b(a){return a.treeContainsDomainAndProperties("io.fabric8.insight",{type:"Elasticsearch"})}function c(a){return a.treeContainsDomainAndProperties("hawtio",{type:"plugin",name:"hawtio-kibana"})}function d(a){return a.treeContainsDomainAndProperties("hawtio",{type:"plugin",name:"hawtio-eshead"})}function e(a){var b=a.findMBeanWithProperties("io.fabric8.insight",{type:"MetricsCollector"});return b||(b=a.findMBeanWithProperties("org.fusesource.insight",{type:"MetricsCollector"})),b?b.objectName:null}function f(a,b,c,d){var e=[];for(var g in a.properties){var h=a.properties[g];"long"===h.type||"double"===h.type?e.push({title:g,field:c+g,type:b,hasHost:d}):h.properties&&e.push({title:g,isFolder:!0,children:f(h,b,c+g+".",d)})}return e}function g(a,b,c,d){var e=$(c),f=e.width()-80,g=cubism.context().serverDelay(1e3*i("1m")).clientDelay(a.updateRate).step(1e3*i(a.timespan)).size(f),j=d3.select(e[0]);j.html(""),j.selectAll(".axis").data(["top","bottom"]).enter().append("div").attr("class",function(a){return a+" axis"}).each(function(a){d3.select(this).call(g.axis().ticks(12).orient(a))}),j.append("div").attr("class","rule").call(g.rule()),g.on("focus",function(a){j.selectAll(".value").style("right",null===a?null:g.size()-a+"px")}),b.forEach(function(a){j.call(function(b){b.append("div").data([h(g,a,d)]).attr("class","horizon").call(g.horizon())})})}function h(a,b,c){return a.metric(function(a,d,e,f){var g,h=[],a=+a,d=+d,i={range:{timestamp:{from:new Date(a).toISOString(),to:new Date(d).toISOString()}}};g=b.query?{fquery:{query:{filtered:{query:{query_string:{query:b.query}},filter:i}}}}:i;var j={size:0,facets:{histo:{date_histogram:{value_field:b.field,key_field:"timestamp",interval:e+"ms"},facet_filter:g}}},k={type:"exec",mbean:"org.elasticsearch:service=restjmx",operation:"exec",arguments:["POST","/_all/"+b.type+"/_search",JSON.stringify(j)]};c.request(k,{success:function(c){var g={},i=jQuery.parseJSON(c.value).facets.histo.entries;i.forEach(function(a){g[a.time]=a.max});var j=0;for(void 0!==b.meta&&("trends-up"===b.meta.type||"peak"===b.meta.type?j=1:"trends-down"===b.meta.type&&(j=-1));d>a;){var k=0;if(0!==j){if(void 0!==g[a-e]){var l=(g[a]-g[a-e])*j;k=l>0?l:0}}else void 0!==g[a]&&(k=g[a]);h.push(k),a+=e}f(null,h)}})},b.name)}function i(a){var b=a.match(/(\d+)([Mwdhms])/);switch(b[2]){case"M":return 2592e3*b[1];case"w":return 604800*b[1];case"d":return 86400*b[1];case"h":return 3600*b[1];case"m":return 60*b[1];case"s":return b[1]}}a.managerMBean="io.fabric8:type=Fabric",a.allContainers={id:"-- all --"},a.hasInsight=b,a.hasKibana=c,a.hasEsHead=d,a.getInsightMetricsCollectorMBean=e,a.getChildren=f,a.createCharts=g}(Insight||(Insight={}));var Site;!function(a){function b(){return a.sitePluginEnabled}a.sitePluginEnabled=!1,a.isSiteNavBarValid=b}(Site||(Site={}));var Perspective;!function(a){a.containerPerspectiveEnabled=!0,a.metadata={kubernetes:{icon:{title:"Fabric8",type:"img",src:"img/icons/fabric8_icon.svg"},label:"Fabric8",isValid:function(a){return!Fabric.isFMCContainer(a)&&Kubernetes.isKubernetes(a)},lastPage:"#/kubernetes/apps",topLevelTabs:{includes:[{content:"Runtime",id:"kubernetes"},{content:"Library",href:"#/wiki"},{href:"#/docker"},{id:"apis.index"},{id:"kibana"},{id:"grafana"},{href:"#/dashboard"},{href:"#/health"}]}},fabric:{icon:{title:"Fabric8",type:"img",src:"img/icons/fabric8_icon.svg"},label:"Fabric",isValid:function(a){return Fabric.isFMCContainer(a)},lastPage:"#/fabric/containers",topLevelTabs:{includes:[{id:"kubernetes"},{id:"fabric.containers"},{id:"fabric.profiles"},{href:"#/wiki/branch/"},{href:"#/fabric"},{id:"fabric.requirements"},{href:"#/wiki/profile"},{href:"#/docker"},{href:"#/dashboard"},{href:"#/health"}]}},container:{icon:{title:"Java",type:"img",src:"img/icons/java.svg"},label:"Container",lastPage:"#/logs",isValid:function(a){return a&&a.tree&&a.tree.children&&a.tree.children.length},topLevelTabs:{excludes:[{href:"#/fabric"},{href:"#/kubernetes"},{id:"fabric.profiles"},{id:"fabric.containers"},{id:"fabric.requirements"},{id:"fabric.kubernetes"},{href:"#/insight"},{href:"#/camin"},{id:"insight-camel"},{id:"insight-logs"},{id:"dashboard",onCondition:function(a){return!Fabric.isFMCContainer(a)}},{id:"health",onCondition:function(a){return Fabric.isFMCContainer(a)}},{id:"wiki",onCondition:function(a){return Fabric.isFMCContainer(a)}},{id:"apis.index",onCondition:function(a){return Kubernetes.isKubernetes(a)}},{id:"grafana",onCondition:function(a){return Kubernetes.isKubernetes(a)}},{id:"kibana",onCondition:function(a){return Kubernetes.isKubernetes(a)}}]}},limited:{label:"Limited",lastPage:"#/logs",isValid:function(){return!1},topLevelTabs:{includes:[{href:"#/jmx"},{href:"#/camel"},{href:"#/activemq"},{href:"#/jetty"},{href:"#/logs"}]}},website:{label:"WebSite",isValid:function(){return Site.sitePluginEnabled&&Site.isSiteNavBarValid()},lastPage:"#/site/doc/index.md",topLevelTabs:{includes:[{content:"Get Started",title:"How to get started using hawtio",href:function(){return"#/site/doc/GetStarted.md"},isValid:function(){return Site.isSiteNavBarValid()}},{content:"FAQ",title:"Frequently Asked Questions",href:function(){return"#/site/FAQ.md"},isValid:function(){return Site.isSiteNavBarValid()}},{content:"User Guide",title:"All the docs on using hawtio",href:function(){return"#/site/book/doc/index.md"},isValid:function(){return Site.isSiteNavBarValid()}},{content:"Community",title:"Come on in and join our community!",href:function(){return"#/site/doc/Community.html"},isValid:function(){return Site.isSiteNavBarValid()}},{content:"Developers",title:"Resources for developers if you want to hack on hawtio or provide your own plugins",href:function(){return"#/site/doc/developers/index.md"},isValid:function(){return Site.isSiteNavBarValid()}},{content:"github",title:"Hawtio's source code and issue tracker",href:function(){return"https://github.com/hawtio/hawtio"},isValid:function(){return Site.isSiteNavBarValid()}}]}}}}(Perspective||(Perspective={}));var Perspective;!function(a){function b(b,c,d,e){var f=b.search()[a.perspectiveSearchId];return f||(f=a.choosePerspective(b,c,d,e)),f}function c(b,c){var d=[];return angular.forEach(a.metadata,function(a,b){m(c,a.isValid)&&(a.label||(a.label=b),a.title||(a.title=a.label),a.id=b,d.push(a))}),d}function d(b){var c;return angular.forEach(a.metadata,function(a,d){d===b&&(c=a)}),c}function e(b,c){var d=b.topLevelTabs.sortBy(function(a){return a.content}),e=c?a.metadata[c]:null,g=e,h=[];if(e){var i=e.topLevelTabs,j=f(i.includes,b),k=f(i.excludes,b);g&&(k=k.filter(function(d){var e=g.topLevelTabs.excludes.find(function(a){var b=a.id;return b&&b===d.id});if(null!=e&&angular.isFunction(e.onCondition)){var f=e.onCondition(b);return f?(a.log.debug("Plugin "+d.id+" excluded in perspective "+c),!0):!1}return!0})),h=i.includes?j:d,h=h.subtract(k)}else h=d;return h}function f(a,b){function c(a,b){if(b){var c=a.content;c&&(b=angular.copy(b),b.content=c),d.push(b)}}var d=[];return angular.forEach(a,function(a){var d=a.href,e=a.id,f=a.rhref;if(d){var g=d;angular.isFunction(d)&&(g=d());var h=b.topLevelTabs.find(function(a){var b=a.href();return b&&b.startsWith(g)});h||e||!a.content||(h=a),c(a,h)}else if(e){var h=b.topLevelTabs.find(function(a){var b=a.id;return b&&b===e});c(a,h)}else if(f){var h=b.topLevelTabs.find(function(a){var b=a.href();return b&&b.match(f)});c(a,h)}}),d}function g(a,b){var c=b.filter(function(b){var c=b.href();return c&&m(a,b.isValid)});return c}function h(a,b){var c=b.filter(function(b){var c=b.href();return c&&m(a,b.isActive)});return c}function i(c,d,e,f){var g=b(c,d,e,f),h=Core.configuredPluginsForPerspectiveId(g,d,e,f),i=Core.filterTopLevelTabs(g,d,h);return i=a.filterOnlyValidTopLevelTabs(d,i)}function j(b,c){var d,e=b.url(),f=Fabric.isFMCContainer(c);return f?(e.startsWith("/perspective/defaultPage")||e.startsWith("/login")||e.startsWith("/welcome")||e.startsWith("/index")||e.startsWith("/fabric")||e.startsWith("/kubernetes")||e.startsWith("/profiles")||e.startsWith("/dashboard")||e.startsWith("/health")||e.startsWith("/wiki")&&e.has("/fabric/profiles")||e.startsWith("/wiki")&&e.has("/editFeatures"))&&(d="fabric"):Kubernetes.isKubernetes(c)&&(d="kubernetes"),d=d||a.defaultPerspective||"container"}function k(c,d,e,f){var g=Core.isProxyUrl(c),h=Core.isChromeApp();if(!g&&!h&&l(f))return"/welcome/";var i=a.defaultPageLocation;if(!i&&c&&d){var j=b(c,d,e,f),k=Core.getDefaultPlugin(j,d,e,f),m=a.topLevelTabsForPerspectiveId(d,j);m=a.filterOnlyValidTopLevelTabs(d,m);var n;k?m.forEach(function(a){a.id===k.id&&(n=a)}):n=m[0],n&&(i=Core.trimLeading(n.href(),"#"))}return i||"/help/index"}function l(a){var b=a.showWelcomePage;return angular.isString(b)?"true"===b:!0}function m(a,b){return!b||b(a)}a.log=Logger.get("Perspective"),a.perspectiveSearchId="p",a.defaultPerspective=null,a.defaultPageLocation=null,a.currentPerspectiveId=b,a.getPerspectives=c,a.getPerspectiveById=d,a.topLevelTabsForPerspectiveId=e,a.filterOnlyValidTopLevelTabs=g,a.filterOnlyActiveTopLevelTabs=h,a.getTopLevelTabsForPerspective=i,a.choosePerspective=j,a.defaultPage=k,a.shouldShowWelcomePage=l}(Perspective||(Perspective={}));var Core;!function(a){a.ConsoleController=a._module.controller("Core.ConsoleController",["$scope","$element","$templateCache",function(b,c,d){b.setHandler=function(e){function f(){var a=d.get("logClipboardTemplate").lines();a.removeAt(0),a.removeAt(a.length-1),a.push("<ul>"),c.find("#log-panel-statements").children().each(function(b,c){a.push("  <li>"+c.innerHTML+"</li>")}),a.push("</ul>"),e.setText(a.join("\n"))}function g(){c.find("#log-panel-statements").children().remove()}e.addEventListener("mouseDown",function(){var d=c.find(".icon-copy"),e=c.find(".icon-trash");(this===d.get(0)||this===e.get(0))&&(this==d.get(0)?f():(g(),a.notification("info","Cleared logging console")),a.$apply(b))})}}]),a.AppController=a._module.controller("Core.AppController",["$scope","$location","workspace","jolokia","jolokiaStatus","$document","pageTitle","localStorage","userDetails","lastLocation","jolokiaUrl","branding","ConnectOptions","$timeout","locationChangeStartTasks","$route",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){return Perspective.defaultPage(c,d,e,i)}b.collapse="",b.match=null,b.pageTitle=[],b.userDetails=j,b.confirmLogout=!1,b.connectionFailed=!1,b.connectFailure={},b.showPrefs=!1,b.logoClass=function(){return m.logoOnly?"without-text":"with-text"},b.branding=m,b.hasMBeans=function(){return d.hasMBeans()},b.$watch("jolokiaStatus.xhr",function(){var a=f.xhr;if(b.connectionFailed=a?!0:!1,b.connectFailure.summaryMessage=null,b.connectionFailed){b.connectFailure.status=a.status,b.connectFailure.statusText=a.statusText;var c=a.responseText;if(c)try{var d=$(c),e=d.find("body");e&&e.length&&(d=e),d.each(function(a,b){var c=b.localName;c&&c.startsWith("h")&&$(b).addClass("ajaxError")});var g=$("<div></div>");g.append(d),b.connectFailure.summaryMessage=g.html(),console.log("Found HTML: "+b.connectFailure.summaryMessage)}catch(h){c.indexOf("<")<0&&(b.connectFailure.summaryMessage="<p>"+c+"</p>")}}}),b.showPreferences=function(){b.showPrefs=!0},b.closePreferences=function(){b.showPrefs=!1},b.confirmConnectionFailed=function(){window.close()},b.setPageTitle=function(){b.pageTitle=h.getTitleArrayExcluding([m.appName]);
var c=d.getActiveTab();c&&c.content?a.setPageTitleWithTab(g,h,c.content):a.setPageTitle(g,h)},b.setRegexIndicator=function(){try{var a=angular.fromJson(i.regexs);a&&a.reverse().each(function(a){var d=new RegExp(a.regex,"g");d.test(c.absUrl())&&(b.match={name:a.name,color:a.color})})}catch(d){}},b.loggedIn=function(){return null!==j.username&&"public"!==j.username},b.showLogout=function(){return b.loggedIn()&&angular.isDefined(j.loginDetails)},b.logout=function(){b.confirmLogout=!0},b.getUsername=function(){return j.username&&!j.username.isBlank()?j.username:"user"},b.doLogout=function(){b.confirmLogout=!1,a.logout(l,j,i,b)},b.$watch(function(){return i.regexs},b.setRegexIndicator),b.reloaded=!1,b.maybeRedirect=function(){if(null===j.username){var a=c.url();a.startsWith("/login")?b.reloaded||(q.reload(),b.reloaded=!0):(k.url=a,c.url("/login"))}else if(c.url().startsWith("/login")){var d=r();angular.isDefined(k.url)&&(d=k.url),c.url(d)}},b.$watch("userDetails",function(){b.maybeRedirect()},!0),b.$on("hawtioOpenPrefs",function(){b.showPrefs=!0}),b.$on("hawtioClosePrefs",function(){b.showPrefs=!1}),b.$on("$routeChangeStart",function(a,c){c.params&&c.params.pref||!b.showPrefs||(b.showPrefs=!1),b.maybeRedirect()}),b.$on("$routeChangeSuccess",function(){b.setPageTitle(g,a.PageTitle),b.maybeRedirect()}),b.fullScreen=function(){if(c.path().startsWith("/login"))return m.fullscreenLogin;var a=c.search().tab;return a?"fullscreen"===a:!1},b.login=function(){return c.path().startsWith("/login")}}])}(Core||(Core={})),$(function(){hawtioPluginLoader.loadPlugins(function(){var a=(angular.element(document),angular.element(document.documentElement));Core.injector=angular.bootstrap(a,hawtioPluginLoader.getModules()),Logger.get("Core").debug("Bootstrapped application, injector: ",Core.injector),a.attr("xmlns:ng","http://angularjs.org"),a.attr("ng-app","hawtioCore")})});var Core;!function(a){a._module.directive("noClick",function(){return function(a,b){b.click(function(a){a.preventDefault()})}}),a._module.directive("logToggler",["localStorage",function(a){return{restrict:"A",link:function(b,c){$(c).click(function(){var b=$("#log-panel"),c=$("body");return 0!==b.height()?(a.showLog="false",b.css({bottom:"110%"}),c.css({"overflow-y":"auto"})):(a.showLog="true",b.css({bottom:"50%"}),c.css({"overflow-y":"hidden"})),!1})}}}]),a._module.directive("autofill",["$timeout",function(b){return{restrict:"A",require:"ngModel",link:function(c,d,e){function f(){var b=c.$eval(g),e=d.val();if(e&&!b)a.pathSet(c,g,e);else if(d.trigger("input"),d.trigger("change"),d.length){var f=$(d[0]);f.trigger("input"),f.trigger("change")}}var g=e.ngModel;if(g){{Logger.get("Core")}b(f,200),b(f,800),b(f,1500)}}}}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.CorePreferences",["$scope","localStorage",function(b,c){a.initPreferenceScope(b,c,{updateRate:{value:5e3,post:function(a){b.$emit("UpdateRate",a)}},showWelcomePage:{value:!0,converter:a.parseBooleanValue},regexs:{value:"",converter:function(b){return angular.isArray(b)?b:a.isBlank(b)?[]:angular.fromJson(b)},formatter:function(a){return angular.toJson(a)},compareAsObject:!0}}),b.newHost={},b.forms={},b.addRegexDialog=new UI.Dialog,b.onOk=function(c){b.addRegexDialog.close(),c.color=UI.colors.sample(),angular.isArray(b.regexs)?b.regexs.push(c):b.regexs=[c],b.newHost={},a.$apply(b)},b.hostSchema={properties:{name:{description:"Indicator name",type:"string",required:!0},regex:{description:"Indicator regex",type:"string",required:!0}}},b["delete"]=function(a){b.regexs.removeAt(a)},b.moveUp=function(a){var c=b.regexs[a];b.regexs[a]=b.regexs[a-1],b.regexs[a-1]=c},b.moveDown=function(a){var c=b.regexs[a];b.regexs[a]=b.regexs[a+1],b.regexs[a+1]=c}}])}(Core||(Core={}));var Core;!function(a){var b=function(){function b(a){this.$rootScope=a,this.discoverableDocTypes={user:"help.md"},this.topicNameMappings={activemq:"ActiveMQ",camel:"Camel",jboss:"JBoss",jclouds:"jclouds",jmx:"JMX",jvm:"Connect",log:"Logs",openejb:"OpenEJB"},this.subTopicNameMappings={user:"For Users",developer:"For Developers",faq:"FAQ"},this.pluginNameMappings={hawtioCore:"core","hawtio-branding":"branding",forceGraph:"forcegraph","hawtio-ui":"ui","hawtio-forms":"forms",elasticjs:"elasticsearch"},this.ignoredPlugins=["core","branding","datatable","forcegraph","forms","perspective","tree","ui"],this.topics={}}return b.prototype.addUserDoc=function(a,b,c){void 0===c&&(c=null),this.addSubTopic(a,"user",b,c)},b.prototype.addDevDoc=function(a,b,c){void 0===c&&(c=null),this.addSubTopic(a,"developer",b,c)},b.prototype.addSubTopic=function(a,b,c,d){void 0===d&&(d=null),this.getOrCreateTopic(a,d)[b]=c},b.prototype.getOrCreateTopic=function(a,b){return void 0===b&&(b=null),angular.isDefined(this.topics[a])||(null===b&&(b=function(){return!0}),this.topics[a]={isValid:b},this.$rootScope.$broadcast("hawtioNewHelpTopic")),this.topics[a]},b.prototype.mapTopicName=function(a){return angular.isDefined(this.topicNameMappings[a])?this.topicNameMappings[a]:a.capitalize()},b.prototype.mapSubTopicName=function(a){return angular.isDefined(this.subTopicNameMappings[a])?this.subTopicNameMappings[a]:a.capitalize()},b.prototype.getTopics=function(){var b={};return angular.forEach(this.topics,function(c,d){c.isValid()?(a.log.debug(d," is available"),b[d]=angular.fromJson(angular.toJson(c))):a.log.debug(d," is not available")}),b},b.prototype.disableAutodiscover=function(a){this.ignoredPlugins.push(a)},b.prototype.discoverHelpFiles=function(a){var b=this;console.log("Ignored plugins: ",b.ignoredPlugins),a.forEach(function(a){var c=b.pluginNameMappings[a];angular.isDefined(c)||(c=a),b.ignoredPlugins.any(function(a){return a===c})||angular.forEach(b.discoverableDocTypes,function(d,e){if(!angular.isDefined(b[c])||!angular.isDefined(b[c][e])){var f="app/"+c+"/doc/"+d;console.log("checking: ",f),$.ajax(f,{type:"HEAD",statusCode:{200:function(){b.getOrCreateTopic(a)[e]=f}}})}})})},b}();a.HelpRegistry=b}(Core||(Core={}));var Core;!function(a){var b=function(){function a(){this.tabs={}}return a.prototype.addTab=function(a,b,c){void 0===c&&(c=void 0),c||(c=function(){return!0}),this.tabs[a]={template:b,isValid:c}},a.prototype.getTab=function(a){return this.tabs[a]},a.prototype.getTabs=function(){var a={};return angular.forEach(this.tabs,function(b,c){b.isValid()&&(a[c]=b)}),a},a}();a.PreferencesRegistry=b}(Core||(Core={}));var Themes;!function(a){function b(){return Object.extended(a.definitions).keys()}function c(){return Object.extended(a.brandings).keys()}function d(b){var c=a.brandings[b];return c&&c.setFunc||(c=a.brandings.hawtio),c}function e(a,b){var c=$(a);c.prop("disabled",!0),c.attr({href:b}),c.prop("disabled",!1)}function f(a){$("#favicon").remove(),$("head").append('<link id="favicon" rel="icon" type="image/ico" href="'+a+'">"')}function g(b,c){b&&b.file&&b.label?(a.log.debug("Setting theme to ",b.label),e("#theme",b.file),b.loginBg&&(c.loginBg=b.loginBg)):(a.log.info("invalid theme, setting theme to Default"),e("#theme",a.definitions.Default.file),c.loginBg=a.definitions.Default.loginBg)}function h(b,c){var g=d(b);c=g.setFunc(c),a.log.debug("Set branding to: ",c),c.favicon&&f(c.favicon),c.css&&e("#branding",c.css),a.currentBranding=g.label,localStorage.branding=a.currentBranding}function i(b,c){b in a.definitions||(b="Default",a.log.info("unknown theme name, using default theme"));var d=Core.pathGet(a.definitions,[b]);g(d,c),a.currentTheme=b,localStorage.theme=a.currentTheme}a.defaultLoginBg="app/themes/img/default/hawtio-nologo.jpg",a.definitions={Default:{label:"Default",file:"app/themes/css/default.css",loginBg:a.defaultLoginBg},Dark:{label:"Dark",file:"app/themes/css/dark.css",loginBg:a.defaultLoginBg},3270:{label:"Dark",file:"app/themes/css/3270.css",loginBg:a.defaultLoginBg}},a.brandings={hawtio:{label:"hawtio",setFunc:function(a){return a.appName="hawtio",a.appLogo="img/hawtio_logo.svg",a.css="css/site-branding.css",a.logoOnly=!0,a.fullscreenLogin=!1,a.favicon="favicon.ico",a.welcomePageUrl="app/core/doc/welcome.md",a.onWelcomePage=function(a){return marked(a)},a}},Example:{label:"Example",setFunc:function(a){return a.appName="Example",a.logoOnly=!1,a.welcomePageUrl="app/themes/doc/welcome_example.md",a}}},a.currentTheme="Default",a.currentBranding="hawtio",a.getAvailableThemes=b,a.getAvailableBrandings=c,a.setBranding=h,a.setTheme=i,a.pluginName="themes",a.log=Logger.get("Themes"),a._module=angular.module(a.pluginName,["hawtioCore"]),a._module.run(["localStorage","branding","preferencesRegistry",function(b,c,d){var e=b.theme;a.setTheme(e,c);var f=b.branding;a.setBranding(f,c),d.addTab("Theme","app/themes/html/preferences.html"),a.log.debug("Loaded")}]),hawtioPluginLoader.addModule(a.pluginName)}(Themes||(Themes={}));var Core;!function(a){a._module.factory("workspace",["$location","jmxTreeLazyLoadRegistry","$compile","$templateCache","localStorage","jolokia","jolokiaStatus","$rootScope","userDetails",function(b,c,d,e,f,g,h,i,j){var k=new a.Workspace(g,h,c,b,d,e,f,i,j);return k.loadTree(),k}]),a._module.service("ConnectOptions",["$location",function(){var b=a.ConnectionName;if(!a.isBlank(b)){var c=a.getConnectOptions(b);return a.log.debug("ConnectOptions: ",c),c}return a.log.debug("No connection options, connected to local JVM"),null}]),a._module.service("localStorage",function(){return a.getLocalStorage()}),a._module.factory("pageTitle",function(){var b=new a.PageTitle;return b}),a._module.factory("viewRegistry",function(){return{}}),a._module.factory("lastLocation",function(){return{}}),a._module.factory("locationChangeStartTasks",function(){return new a.ParameterizedTasksImpl}),a._module.factory("postLoginTasks",function(){return a.postLoginTasks}),a._module.factory("preLogoutTasks",function(){return a.preLogoutTasks}),a._module.factory("helpRegistry",["$rootScope",function(b){return new a.HelpRegistry(b)}]),a._module.factory("preferencesRegistry",function(){return new a.PreferencesRegistry}),a._module.factory("toastr",["$window",function(a){var b=a.toastr;return b||(b={},a.toaster=b),b}]),a._module.factory("metricsWatcher",["$window",function(a){var b=a.metricsWatcher;return b||(b={},a.metricsWatcher=metricsWatcher),b}]),a._module.factory("xml2json",function(){var a=$;return a.xml2json}),a._module.factory("jolokiaUrl",function(){return a.jolokiaUrl}),a._module.factory("jolokiaStatus",function(){return{xhr:null}}),a.DEFAULT_MAX_DEPTH=7,a.DEFAULT_MAX_COLLECTION_SIZE=500,a._module.factory("jolokiaParams",["jolokiaUrl","localStorage",function(b,c){var d={canonicalNaming:!1,ignoreErrors:!0,mimeType:"application/json",maxDepth:a.DEFAULT_MAX_DEPTH,maxCollectionSize:a.DEFAULT_MAX_COLLECTION_SIZE};return"jolokiaParams"in c?d=angular.fromJson(c.jolokiaParams):c.jolokiaParams=angular.toJson(d),d.url=b,d}]),a._module.factory("branding",function(){var a=Themes.brandings.hawtio.setFunc({});return a.logoClass=function(){return a.logoOnly?"without-text":"with-text"},a}),a._module.factory("ResponseHistory",function(){var b=a.getResponseHistory();return b}),a._module.factory("userDetails",["ConnectOptions","localStorage","$window","$rootScope",function(b,c,d,e){var f={username:null,password:null};if("userDetails"in d)f=d.userDetails,a.log.debug("User details loaded from parent window: ",StringHelpers.toString(f)),a.executePostLoginTasks();else if("userDetails"in c)f=angular.fromJson(c.userDetails),a.log.debug("User details loaded from local storage: ",StringHelpers.toString(f)),a.executePostLoginTasks();else if(a.isChromeApp())f={username:"user",password:""},a.log.debug("Running as a Chrome app, using fake UserDetails: "),a.executePostLoginTasks();else{a.log.debug("No username set, checking if we have a session");var g="user";$.ajax(g,{type:"GET",success:function(b){return a.log.debug("Got user response: ",b),null===b?(f.username=null,f.password=null,a.log.debug("user response was null, no session available"),void a.$apply(e)):(f.username=b,"user"===b?(a.log.debug("Authentication disabled, using dummy credentials"),f.loginDetails={}):a.log.debug("User details loaded from existing session: ",StringHelpers.toString(f)),a.executePostLoginTasks(),void a.$apply(e))},error:function(b,c,d){f.username=null,f.password=null,a.log.debug("Failed to get session username: ",d),a.$apply(e)}}),a.log.debug("Created empty user details to be filled in: ",StringHelpers.toString(f))}return f}]),a._module.factory("jmxTreeLazyLoadRegistry",function(){return a.lazyLoaders})}(Core||(Core={}));var Core;!function(a){a.fileUploadMBean="hawtio:type=UploadManager";var b=function(){function b(){this.restrict="A",this.replace=!0,this.templateUrl=a.templatePath+"fileUpload.html",this.scope={files:"=hawtioFileUpload",target:"@",showFiles:"@"},this.controller=["$scope","$element","$attrs","jolokia",function(b,c,d,e){b.target="",b.response="",b.percentComplete=0,UI.observe(b,d,"target",""),UI.observe(b,d,"showFiles",!0),b.update=function(c){var d=angular.toJson(c.value);b.responseJson!==d&&(b.responseJson=d,b.files=c.value,a.$applyNowOrLater(b))},b["delete"]=function(c){e.request({type:"exec",mbean:a.fileUploadMBean,operation:"delete(java.lang.String, java.lang.String)",arguments:[b.target,c]},{success:function(){a.$apply(b)},error:function(d){a.notification("error","Failed to delete "+c+" due to: "+d.error),a.$apply(b)}})},b.$watch("target",function(c,d){d!==c&&a.unregister(e,b),a.register(e,b,{type:"exec",mbean:a.fileUploadMBean,operation:"list(java.lang.String)",arguments:[b.target]},onSuccess(b.update))})}],this.link=function(b,c){var d=c.find("input[type=file]"),e=c.find("form[name=file-upload]"),f=c.find("input[type=button]"),g=function(){f.prop("disabled",!0);var c=d.get(0).files,g=c.length+" files";return 1===c.length&&(g=c[0].name),e.ajaxSubmit({beforeSubmit:function(){a.notification("info","Uploading "+g),b.percentComplete=0,a.$apply(b)},success:function(){a.notification("success","Uploaded "+g),setTimeout(function(){f.prop("disabled",!1),b.percentComplete=0,a.$apply(b)},1e3),a.$apply(b)},error:function(c,d){a.notification("error","Failed to upload "+g+" due to "+d),setTimeout(function(){f.prop("disabled",!1),b.percentComplete=0,a.$apply(b)},1e3),a.$apply(b)},uploadProgress:function(c,d,e,f){b.percentComplete=f,a.$apply(b)}}),!1};f.click(function(){return f.prop("disabled")||d.click(),!1}),e.submit(function(){return!1}),$.browser.msie?d.click(function(){setTimeout(function(){d.val().length>0&&g()},0)}):d.change(g)}}return b}();a.FileUpload=b,a._module.directive("hawtioFileUpload",function(){return new a.FileUpload})}(Core||(Core={}));var Core;!function(a){function b(a,b,c,d){a.graphForce&&a.graphForce.stop(),d||(d=$("#canvas")[0]);var e=$(d);if(e.children("svg").remove(),b.length){var f=e.parent().width(),g=e.parent().height();if(100>g){var h=e.offset();g=$(document).height()-5,h&&(g-=h.top)}var i=d3.select(e[0]).append("svg").attr("width",f).attr("height",g),j=d3.layout.force().distance(100).charge(-1200).linkDistance(50).size([f,g]);a.graphForce=j,i.append("svg:defs").selectAll("marker").data(["from"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",25).attr("refY",-1.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5"),j.nodes(b).links(c).start();var k=i.selectAll(".link").data(c).enter().append("line").attr("class","link");k.attr("class","link from"),k.attr("marker-end","url(#from)");var l=i.selectAll(".node").data(b).enter().append("g").attr("class","node").call(j.drag);l.append("image").attr("xlink:href",function(a){return a.imageUrl}).attr("x",-15).attr("y",-15).attr("width",30).attr("height",30),l.append("text").attr("dx",20).attr("dy",".35em").text(function(a){return a.label}),j.on("tick",function(){k.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y}),l.attr("transform",function(a){return"translate("+a.x+","+a.y+")"})})}}function c(a,b,c){var d={};a.forEach(function(a){var b=a.id;void 0===b?console.log("No node found for node "+JSON.stringify(a)):(void 0===a.edges&&(a.edges=[]),a.label||(a.label="node "+b),d[b]=a)});var e=d3.values(d);return b.forEach(function(a){var b=d[a.source],e=d[a.target];if(void 0===b||void 0===e)console.log("Bad link!  "+b+" target "+e+" for "+a);else{var f={source:b,target:e};c.push(f),b.edges.push(f),e.edges.push(f)}}),e}function d(b,c,d,e,h){function i(a){var b=a.dagre.points.slice(0),c=dagre.util.intersectRect(a.source.dagre,b.length>0?b[0]:a.source.dagre),d=dagre.util.intersectRect(a.target.dagre,b.length>0?b[b.length-1]:a.source.dagre);return b.unshift(c),b.push(d),d3.svg.line().x(function(a){return a.x}).y(function(a){return a.y}).interpolate("linear")(b)}function j(a,b,c){a.dagre.points.forEach(function(a){a.x=Math.max(0,Math.min(x.width,a.x+b)),a.y=Math.max(0,Math.min(x.height,a.y+c))})}var k=10,l=[],m=a.createGraphStates(b,c,l),n=d3.select(h?h:"svg");h&&$(h).children("g").remove(),$(n).children("g").remove();var o=n.append("g").attr("transform","translate(5, 5)"),b=o.selectAll("g .node").data(m).enter().append("g").attr("class","node").attr("data-cid",function(a){return a.cid}).attr("id",function(a){return"node-"+a.label});b.append("title").text(function(a){return a.tooltip||""});var p=o.selectAll("path .edge").data(l).enter().append("path").attr("class","edge").attr("marker-end","url(#arrowhead)"),q=b.append("rect").attr("rx","4").attr("ry","4").attr("class",function(a){return a.type}),r=b.append("image").attr("xlink:href",function(a){return a.imageUrl}).attr("x",-12).attr("y",-20).attr("height",24).attr("width",24),s=b.append("text").attr("text-anchor","end").attr("class","counter").attr("x",0).attr("dy",0).text(f),t=(b.append("text").attr("text-anchor","middle").attr("class","inflight").attr("x",10).attr("dy",-32).text(g),b.append("text").attr("text-anchor","middle").attr("x",0));t.append("tspan").attr("x",0).attr("dy",28).text(function(a){return a.label});var u=12,v=80;t.each(function(a){var b=this.getBBox();a.bbox=b,b.width<v&&(b.width=v),a.width=b.width+2*k,a.height=b.height+2*k+u}),q.attr("x",function(a){return-(a.bbox.width/2+k)}).attr("y",function(a){return-(a.bbox.height/2+k+u/2)}).attr("width",function(a){return a.width}).attr("height",function(a){return a.height}),r.attr("x",function(a){return-a.bbox.width/2}),t.attr("x",function(a){return-a.bbox.width/2}).attr("y",function(a){return-a.bbox.height/2}),s.attr("x",function(a){var b=a.bbox.width;return b/2}),dagre.layout().nodeSep(50).edgeSep(10).rankSep(50).nodes(m).edges(l).debugLevel(1).run(),b.attr("transform",function(a){return"translate("+a.dagre.x+","+a.dagre.y+")"}),p.attr("id",function(a){return a.dagre.id}).attr("d",function(a){return i(a)});var w=n.node();if(w){var x=w.getBBox();x&&(n.attr("width",x.width+10),n.attr("height",x.height+10))}var y=d3.behavior.drag().origin(function(a){return a.pos?{x:a.pos.x,y:a.pos.y}:{x:a.dagre.x,y:a.dagre.y}}).on("drag",function(a){var b=a.dagre.x,c=a.dagre.y;a.dagre.x=Math.max(a.width/2,Math.min(x.width-a.width/2,d3.event.x)),a.dagre.y=Math.max(a.height/2,Math.min(x.height-a.height/2,d3.event.y)),d3.select(this).attr("transform","translate("+a.dagre.x+","+a.dagre.y+")");var d=a.dagre.x-b,e=a.dagre.y-c;a.edges.forEach(function(a){j(a,d,e),d3.select("#"+a.dagre.id).attr("d",i(a))})}),z=d3.behavior.drag().on("drag",function(a){j(a,d3.event.dx,d3.event.dy),d3.select(this).attr("d",i(a))});return b.call(y),p.call(z),m}function e(){var a=d3.select("svg");a.selectAll("text.counter").text(f),a.selectAll("text.inflight").text(g),a.selectAll("g .node title").text(function(a){return a.tooltip||""})}function f(a){return a.counter||""}function g(a){return a.inflight||""}a.d3ForceGraph=b,a.createGraphStates=c,a.dagreLayoutGraph=d,a.dagreUpdateGraphData=e}(Core||(Core={}));var Core;!function(a){var b=function(){function b(a){var b=this;this.$window=a,this.restrict="C",this.link=function(a,c,d){return b.doLink(a,c,d)}}return b.prototype.doLink=function(b,c){var d=0,e=angular.bind(this,function(){var a=c.position().top,b=$(this.$window).height(),e=b-a-15,f=e+"px";c.css({"min-height":f,height:f}),d!==e&&(d=e,c.trigger("resize"))});e(),b.$watch(e),$(this.$window).resize(function(){return e(),a.$apply(b),!1})},b}();a.GridStyle=b,a._module.directive("gridStyle",["$window",function(b){return new a.GridStyle(b)}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.HelpController",["$scope","$routeParams","marked","helpRegistry","branding",function(b,c,d,e,f){b.branding=f,b.topics=e.getTopics(),b.topic="topic"in c?c.topic:"index",b.subTopic="subtopic"in c?c.subtopic:Object.extended(b.topics[b.topic]).keys().first(),a.log.debug("topic: ",b.topic," subtopic: ",b.subTopic);var g="index"===b.topic,h=b.subTopic;g&&"developer"!==h&&(h="user"),b.breadcrumbs=[{topic:"index",subTopic:"user",label:"User Guide"},{topic:"index",subTopic:"faq",label:"FAQ"},{topic:"index",subTopic:"changes",label:"Changes"},{topic:"index",subTopic:"developer",label:"Developers"}],b.sectionLink=function(b){var c=b.topic||"",d=b.subTopic||"",f=a.pathGet(e.topics,[c,d]);return f&&f.indexOf("#")>=0?f:"#/help/"+c+"/"+d};var i=b.breadcrumbs.find(function(a){return a.topic===b.topic&&a.subTopic===b.subTopic});i&&(i.active=!0),b.sections=[],angular.forEach(b.topics,function(a,c){"index"!==c&&a[h]&&b.sections.push({topic:c,subTopic:h,label:e.mapTopicName(c),active:c===b.topic})}),b.sections=b.sections.sortBy("label"),b.$on("hawtioNewHelpTopic",function(){b.topics=e.getTopics()}),b.$watch("topics",function(){a.log.debug("Topics: ",b.topics)}),angular.isDefined(b.topics[b.topic])?$.ajax({url:b.topics[b.topic][b.subTopic],dataType:"html",cache:!1,success:function(c){b.html="Unable to download help data for "+b.topic,angular.isDefined(c)&&(b.html=d(c)),a.$apply(b)},error:function(){b.html="Unable to download help data for "+b.topic,a.$apply(b)}}):b.html="Unable to download help data for "+b.topic}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.JolokiaPreferences",["$scope","localStorage","jolokiaParams","$window",function(b,c,d,e){a.initPreferenceScope(b,c,{maxDepth:{value:a.DEFAULT_MAX_DEPTH,converter:parseInt,formatter:parseInt,post:function(a){d.maxDepth=a,c.jolokiaParams=angular.toJson(d)}},maxCollectionSize:{value:a.DEFAULT_MAX_COLLECTION_SIZE,converter:parseInt,formatter:parseInt,post:function(a){d.maxCollectionSize=a,c.jolokiaParams=angular.toJson(d)}}}),b.reboot=function(){e.location.reload()}}])}(Core||(Core={}));var Core;!function(a){a._module.factory("jolokia",["$location","localStorage","jolokiaStatus","$rootScope","userDetails","jolokiaParams","jolokiaUrl",function(b,c,d,e,f,g,h){if(a.log.debug("Jolokia URL is "+h),h){var i=a.getConnectionNameParameter(b.search()),j=a.getConnectOptions(i),k=null,l=null,m=!1;try{window.opener&&"passUserDetails"in window.opener&&(k=window.opener.passUserDetails.username,l=window.opener.passUserDetails.password,m=!0)}catch(n){}if(!m)if(j&&j.userName&&j.password)k=j.userName,l=j.password;else if(angular.isDefined(f)&&angular.isDefined(f.username)&&angular.isDefined(f.password))k=f.username,l=f.password;else{var o=hawtioPluginLoader.parseQueryString();k=o._user,l=o._pwd,angular.isArray(k)&&(k=k[0]),angular.isArray(l)&&(l=l[0])}if(k&&l){f.username=k,f.password=l,$.ajaxSetup({beforeSend:function(b){b.setRequestHeader("Authorization",a.getBasicAuthHeader(f.username,f.password))}});var p=h.replace("jolokia","auth/login/");$.ajax(p,{type:"POST",success:function(b){if(b.credentials||b.principals)f.loginDetails={credentials:b.credentials,principals:b.principals};else{var c=a.pathGet(b,["children",0,"innerHTML"]);c&&a.log.debug("Response is a document (ignoring this): ",c)}a.executePostLoginTasks()},error:function(){a.executePostLoginTasks()}})}g.ajaxError=function(b,c,g){401===b.status||403===b.status?(f.username=null,f.password=null,delete f.loginDetails,m&&delete window.opener.passUserDetails):(d.xhr=b,!b.responseText&&g&&(b.responseText=g.stack)),a.$apply(e)};var q=new Jolokia(g);return c.url=h,q.stop(),q}var r={running:!1,request:function(){return null},register:function(){return null},list:function(){return null},search:function(){return null},getAttribute:function(){return null},setAttribute:function(){},version:function(){return null},execute:function(){for(var a=[],b=2;b<arguments.length;b++)a[b-2]=arguments[b];return null},start:function(){r.running=!0},stop:function(){r.running=!1},isRunning:function(){return r.running},jobs:function(){return[]}};return r}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.LoggingPreferences",["$scope",function(b){a.initPreferenceScope(b,localStorage,{logBuffer:{value:100,converter:parseInt,formatter:parseInt,post:function(a){window.LogBuffer=a}},logLevel:{value:'{"value": 2, "name": "INFO"}',post:function(a){var b=angular.fromJson(a);Logger.setLevel(b)}}})}])}(Core||(Core={}));var Core;!function(a){a.NavBarController=a._module.controller("Core.NavBarController",["$scope","$location","workspace","$route","jolokia","localStorage","NavBarViewCustomLinks",function(b,c,d,e,f,g,h){function i(){var e=Perspective.getPerspectives(c,d,f,g),h=Perspective.currentPerspectiveId(c,d,f,g),i=Perspective.getTopLevelTabsForPerspective(c,d,f,g),j=i.subtract(b.topLevelTabs);j&&j.length>0&&(b.topLevelTabs=i,b.perspectiveId=h,b.perspectives=e,b.perspectiveDetails.perspective=b.perspectives.find(function(a){return a.id===h}),a.$apply(b))}b.hash=d.hash(),b.topLevelTabs=[],b.subLevelTabs=d.subLevelTabs,b.currentPerspective=null,b.localStorage=g,b.recentConnections=[],b.goTo=function(a){c.url(a)},b.$watch("localStorage.recentConnections",function(){b.recentConnections=a.getRecentConnections(g)}),b.openConnection=function(b){var c=a.getConnectOptions(b);c&&a.connectToServer(g,c)},b.goHome=function(){window.open(".")},b.clearConnections=a.clearConnections,b.perspectiveDetails={perspective:null},b.topLevelTabs=function(){return i(),d.topLevelTabs},b.$on("jmxTreeUpdated",function(){i()}),b.$watch("workspace.topLevelTabs",function(){i()}),b.validSelection=function(a){return d.validSelection(a)},b.isValid=function(a){return a&&a.isValid(d)},b.switchPerspective=function(e){if(e.onSelect&&angular.isFunction(e.onSelect))return void e.onSelect.apply();var h=c.search()[Perspective.perspectiveSearchId];if(e&&(b.currentPerspective!==e||e.id!==h)){Logger.debug("Changed the perspective to "+JSON.stringify(e)+" from search id "+h),b.currentPerspective&&(b.currentPerspective.lastPage=c.url());var j=e.id;c.search(Perspective.perspectiveSearchId,j),Logger.debug("Setting perspective to "+j),b.currentPerspective=e,i(),b.topLevelTabs=Perspective.getTopLevelTabsForPerspective(c,d,f,g);var k,l,m=a.getDefaultPlugin(j,d,f,g);if(m?(b.topLevelTabs.forEach(function(a){a.id===m.id&&(k=a)}),k&&(l=a.trimLeading(k.href(),"#"))):e.lastPage&&(l=a.trimLeading(e.lastPage,"#")),l){var n=l.indexOf("?p=")||l.indexOf("&p=");n>0&&(l=l.substring(0,n));var o=l.indexOf("?")>=0?"&":"?";l+=o+"p="+j,c.url(l)}}},b.$watch("hash",function(b,c){b!==c&&a.log.debug("hash changed from ",c," to ",b)}),b.$on("$routeChangeSuccess",function(){b.hash=d.hash(),i()}),b.link=function(b,d){void 0===d&&(d=!1);var e;e=angular.isString(b)?b:angular.isObject(b)?b.href():null,e=e||"";var f=["tab","nid","chapter","pref","q"];return!d&&e&&(e.indexOf("?p=")>=0||e.indexOf("&p=")>=0)&&f.push("p"),a.createHref(c,e,f)},b.fullScreenLink=function(){var b="#"+c.path()+"?tab=notree";return a.createHref(c,b,["tab"])},b.addToDashboardLink=function(){var a="#"+c.path()+d.hash(),b="#/dashboard/add?tab=dashboard&href="+encodeURIComponent(a);if(c.url().has("/jmx/charts")){var e={size_x:4,size_y:3};b+="&size="+encodeURIComponent(angular.toJson(e))}return b},b.isActive=function(a){if(angular.isString(a))return d.isLinkActive(a);var b=a.isActive;return b?b(d):d.isLinkActive(a.href())},b.isTopTabActive=function(a){if(angular.isString(a))return d.isTopTabActive(a);var b=a.isActive;return b?b(d):d.isTopTabActive(a.href())},b.activeLink=function(){var a=b.topLevelTabs();if(!a)return"Loading...";var c=a.find(function(a){return b.isActive(a)});return c?c.content:""},b.navBarViewCustomLinks=h,b.isCustomLinkSet=function(){return b.navBarViewCustomLinks.list.length}}]),a._module.service("NavBarViewCustomLinks",["$location","$rootScope",function(){return{list:[],dropDownLabel:"Extra"}}])}(Core||(Core={}));var Core;!function(a){a.PluginPreferences=a._module.controller("Core.PluginPreferences",["$scope","localStorage","$location","workspace","jolokia",function(b,c,d,e,f){function g(d){var g=a.configuredPluginsForPerspectiveId(d.id,e,f,c);b.plugins=g,b.perspectiveId=d.id,a.log.debug("Updated to perspective "+b.perspectiveId+" with "+g.length+" plugins")}a.initPreferenceScope(b,c,{autoRefresh:{value:!0,converter:a.parseBooleanValue}}),b.perspectiveId=null,b.perspectives=[],b.plugins=[],b.pluginDirty=!1,b.pluginMoveUp=function(a){b.pluginDirty=!0;var c=b.plugins[a];b.plugins[a]=b.plugins[a-1],b.plugins[a-1]=c},b.pluginMoveDown=function(a){b.pluginDirty=!0;var c=b.plugins[a];b.plugins[a]=b.plugins[a+1],b.plugins[a+1]=c},b.pluginDisable=function(a){b.pluginDirty=!0;var c=!1;b.plugins.forEach(function(b,d){d!=a&&b.enabled&&(c=!0)}),c&&(b.plugins[a].enabled=!1,b.plugins[a].isDefault=!1)},b.pluginEnable=function(a){b.pluginDirty=!0,b.plugins[a].enabled=!0},b.pluginDefault=function(a){b.pluginDirty=!0,b.plugins.forEach(function(a){a.isDefault=!1}),b.plugins[a].isDefault=!0,b.plugins[a].enabled=!0},b.pluginApply=function(){b.pluginDirty=!1;var d=!0;b.plugins.forEach(function(a,b){a.isDefault&&(d=!1),a.index=b}),d&&(b.plugins.find(function(a){return 1==a.enabled}).isDefault=!0);var e=angular.toJson(b.plugins);if(e){a.log.debug("Saving plugin settings for perspective "+b.perspectiveId+" -> "+e);var f="plugins-"+b.perspectiveId;c[f]=e}setTimeout(function(){window.location.hash="#"},10)},b.$watch("perspectiveId",function(c,d){if(c!==d){var e=Perspective.getPerspectiveById(c);e&&(g(e),a.$apply(b))}}),b.perspectives=Perspective.getPerspectives(d,e,f,c),a.log.debug("There are "+b.perspectives.length+" perspectives");var h,i=Perspective.currentPerspectiveId(d,e,f,c);i&&(h=b.perspectives.find(function(a){return a.id===i})),h||(h=b.perspectives[0]),g(h),a.$apply(b)}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.PreferencesController",["$scope","$location","workspace","preferencesRegistry","$element",function(b,c,d,e,f){a.bindModelToSearchParam(b,c,"pref","pref","Core"),b.panels={},b.$watch(function(){return f.is(":visible")},function(c){c&&setTimeout(function(){b.panels=e.getTabs(),a.log.debug("Panels: ",b.panels),a.$apply(b)},50)})}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.ResetPreferences",["$scope","userDetails","jolokiaUrl","localStorage",function(b,c,d,e){b.doReset=function(){a.log.info("Resetting");var f=function(){e.clear(),setTimeout(function(){window.location.reload()},10)};a.isBlank(c.username)&&a.isBlank(c.password)?f():a.logout(d,c,e,b,f)}}])}(Core||(Core={}));var Core;!function(a){a.ViewController=a._module.controller("Core.ViewController",["$scope","$route","$location","layoutTree","layoutFull","viewRegistry",function(b,c,d,e,f,g){function h(b){var c=void 0;return Object.extended(g).keys(function(d,e){if(!c)if(d.startsWith("/")&&d.endsWith("/")){var f=d.substring(1,d.length-1);try{var g=new RegExp(f,"");g.exec(b)&&(c=e)}catch(h){a.log.debug("Invalid RegExp "+f+" for viewRegistry value: "+e)}}else b.startsWith(d)&&(c=e)}),c}function i(){var c=null,f=d.search(),g=f.tab;if(angular.isString(g)&&(c=h(g)),!c){var i=d.path();i&&(i.startsWith("/")&&(i=i.substring(1)),c=h(i))}return c||(c=e),b.viewPartial=c,a.log.debug("Using view partial: "+c),c}i(),b.$on("$routeChangeSuccess",function(){i()})}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.WelcomeController",["$scope","$location","branding","localStorage",function(b,c,d,e){b.branding=d;var f=Logger.get("Welcome");b.stopShowingWelcomePage=function(){f.debug("Stop showing welcome page"),e.showWelcomePage=!1,c.path("/")
},b.$watch("branding.welcomePageUrl",function(){$.ajax({url:d.welcomePageUrl,dataType:"html",cache:!1,success:function(c){b.html="Unable to download welcome.md",angular.isDefined(c)&&(b.html=d.onWelcomePage(c)),a.$apply(b)},error:function(){b.html="Unable to download welcome.md",a.$apply(b)}})})}])}(Core||(Core={}));var Dashboard;!function(a){function b(a){var b={};return angular.forEach(a,function(a,c){angular.isString(c)&&(c.startsWith("$")||c.startsWith("_"))||(b[c]=a)}),b}function c(a){if(!a)return a;var b={};return angular.forEach(a,function(a,c){b[c]=a?decodeURIComponent(a):a}),b}function d(a){console.log("Completed adding the dashboard with response "+JSON.stringify(a))}a.log=Logger.get("Dashboard"),a.cleanDashboardData=b,a.decodeURIComponentProperties=c,a.onOperationComplete=d}(Dashboard||(Dashboard={}));var Dashboard;!function(a){a.templatePath="app/dashboard/html/",a.pluginName="dashboard",a._module=angular.module(a.pluginName,["bootstrap","ngResource","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(b){b.when("/dashboard/add",{templateUrl:a.templatePath+"addToDashboard.html"}).when("/dashboard/edit",{templateUrl:a.templatePath+"editDashboards.html"}).when("/dashboard/idx/:dashboardIndex",{templateUrl:a.templatePath+"dashboard.html"}).when("/dashboard/id/:dashboardId",{templateUrl:a.templatePath+"dashboard.html"}).when("/dashboard/id/:dashboardId/share",{templateUrl:a.templatePath+"share.html"}).when("/dashboard/import",{templateUrl:a.templatePath+"import.html"})}]),a._module.value("ui.config",{jq:{gridster:{widget_margins:[10,10],widget_base_dimensions:[140,140]}}}),a._module.factory("dashboardRepository",["workspace","jolokia","localStorage",function(b,c,d){return new a.DefaultDashboardRepository(b,c,d)}]),a._module.directive("hawtioDashboard",function(){return new a.GridsterDirective}),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,b,c,d){c.dashboard="app/dashboard/html/layoutDashboard.html",d.addUserDoc("dashboard","app/dashboard/doc/help.md"),b.topLevelTabs.push({id:"dashboard",content:"Dashboard",title:"View and edit your own custom dashboards",isValid:function(a){return a.hasMBeans()},href:function(){return"#/dashboard/idx/0?tab=dashboard"},isActive:function(a){return a.isTopTabActive("dashboard")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(Dashboard||(Dashboard={}));var Dashboard;!function(a){var b=[{title:"Monitor",group:"Personal",widgets:[{id:"w1",title:"Operating System",row:1,col:1,size_x:3,size_y:4,path:"jmx/attributes",include:"app/jmx/html/attributes.html",search:{nid:"root-java.lang-OperatingSystem"},hash:""},{id:"w3",title:"Java Heap Memory",row:1,col:6,size_x:2,size_y:2,path:"jmx/widget/donut",include:"app/jmx/html/donutChart.html",search:{},hash:"",routeParams:'{"type":"donut","title":"Java Heap Memory","mbean":"java.lang:type=Memory","attribute":"HeapMemoryUsage","total":"Max","terms":"Used","remaining":"Free"}'},{id:"w4",title:"Java Non Heap Memory",row:1,col:8,size_x:2,size_y:2,path:"jmx/widget/donut",include:"app/jmx/html/donutChart.html",search:{},hash:"",routeParams:'{"type":"donut","title":"Java Non Heap Memory","mbean":"java.lang:type=Memory","attribute":"NonHeapMemoryUsage","total":"Max","terms":"Used","remaining":"Free"}'},{id:"w5",title:"",row:3,col:4,size_x:6,size_y:2,path:"jmx/charts",include:"app/jmx/html/charts.html",search:{size:"%7B%22size_x%22%3A2%2C%22size_y%22%3A2%7D",title:"Java%20Non%20Heap%20Memory",routeParams:"%7B%22type%22%3A%22donut%22%2C%22title%22%3A%22Java%20Non%20Heap%20Memory%22%2C%22mbean%22%3A%22java.lang%3Atype",nid:"root-java.lang-Threading"},hash:""},{id:"w6",title:"System CPU Load",row:1,col:4,size_x:2,size_y:2,path:"jmx/widget/area",include:"app/jmx/html/areaChart.html",search:{},hash:"",routeParams:'{"type":"area","title":"System CPU Load","mbean":"java.lang:type=OperatingSystem","attribute":"SystemCpuLoad"}'}],id:"4e9d116173ca41767e"}],c=function(){function b(a,b,c){this.workspace=a,this.jolokia=b,this.localStorage=c,this.repository=null}return b.prototype.putDashboards=function(a,b,c){this.getRepository().putDashboards(a,b,c)},b.prototype.deleteDashboards=function(a,b){this.getRepository().deleteDashboards(a,b)},b.prototype.getDashboards=function(a){this.getRepository().getDashboards(function(b){a(b)})},b.prototype.getDashboard=function(a,b){this.getRepository().getDashboard(a,b)},b.prototype.createDashboard=function(a){return this.getRepository().createDashboard(a)},b.prototype.cloneDashboard=function(a){return this.getRepository().cloneDashboard(a)},b.prototype.getType=function(){return this.getRepository().getType()},b.prototype.isValid=function(){return this.getRepository().isValid()},b.prototype.getRepository=function(){if(this.repository&&this.repository.isValid())return this.repository;if(Fabric.hasFabric(this.workspace))return this.repository=new a.FabricDashboardRepository(this.workspace,this.jolokia,this.localStorage),this.repository;var b=Git.createGitRepository(this.workspace,this.jolokia,this.localStorage);return b?(this.repository=new e(this.workspace,b),this.repository):(this.repository=new d(this.workspace),this.repository)},b}();a.DefaultDashboardRepository=c;var d=function(){function c(a){this.workspace=a,this.localStorage=null,this.localStorage=a.localStorage,"userDashboards"in this.localStorage||this.storeDashboards(b)}return c.prototype.loadDashboards=function(){var b=angular.fromJson(localStorage.userDashboards);return 0===b.length&&b.push(this.createDashboard({})),a.log.debug("returning dashboards: ",b),b},c.prototype.storeDashboards=function(b){return a.log.debug("storing dashboards: ",b),localStorage.userDashboards=angular.toJson(b),this.loadDashboards()},c.prototype.putDashboards=function(a,b,c){var d=this.loadDashboards();a.forEach(function(a){var b=d.findIndex(function(b){return b.id===a.id});b>=0?d[b]=a:d.push(a)}),c(this.storeDashboards(d))},c.prototype.deleteDashboards=function(a,b){var c=this.loadDashboards();angular.forEach(a,function(a){c.remove(function(b){return b.id===a.id})}),b(this.storeDashboards(c))},c.prototype.getDashboards=function(a){a(this.loadDashboards())},c.prototype.getDashboard=function(a,b){var c=this.loadDashboards(),d=c.find(function(b){return b.id===a});b(d)},c.prototype.createDashboard=function(a){var b={title:"New Dashboard",group:"Personal",widgets:[]};return b=angular.extend(b,a),b.id=Core.getUUID(),b},c.prototype.cloneDashboard=function(a){var b=Object.clone(a);return b.id=Core.getUUID(),b.title="Copy of "+a.title,b},c.prototype.getType=function(){return"container"},c.prototype.isValid=function(){return!Fabric.hasFabric(this.workspace)&&!Git.hasGit(this.workspace)},c}();a.LocalDashboardRepository=d;var e=function(){function b(a,b){this.workspace=a,this.git=b,this.branch=null}return b.prototype.putDashboards=function(a,b,c){var d=this,e=a.length,f=function(){e-=1,0===e&&d.getDashboards(c)};angular.forEach(a,function(a){var c=d.getDashboardPath(a),e=JSON.stringify(a,null,"  ");d.git.write(d.branch,c,b,e,function(){f()})})},b.prototype.deleteDashboards=function(a,b){var c=this,d=a.length,e=function(){d-=1,0===d&&c.getDashboards(b)};angular.forEach(a,function(a){var b=c.getDashboardPath(a),d="Removing dashboard "+b;c.git.remove(c.branch,b,d,function(){e()})})},b.prototype.createDashboard=function(a){var b={title:"New Dashboard",group:"Personal",widgets:[]};return b=angular.extend(b,a),b.id=Core.getUUID(),b},b.prototype.cloneDashboard=function(a){var b=Object.clone(a);return b.id=Core.getUUID(),b.title="Copy of "+a.title,b},b.prototype.getType=function(){return"git"},b.prototype.isValid=function(){return Git.hasGit(this.workspace)},b.prototype.getDashboardPath=function(a){var b=a.id||Core.getUUID(),c=this.getUserDashboardPath(b);return c},b.prototype.getDashboards=function(b){var c=this,d=this.getUserDashboardDirectory(),e=[];this.git.read(this.branch,d,function(d){var f=d.children,g=f.length,h=function(){g-=1,0===g&&(e=e.sort(function(a,b){var c=a.title,d=b.title;return c.localeCompare(d)}),b(e))};return 0===f.length?(e.push(c.createDashboard({})),void b(e)):void angular.forEach(f,function(b,d){var g=b.path;!b.directory&&g.endsWith(".json")&&c.git.read(c.branch,g,function(b){var c=b.text;if(c)try{var i=JSON.parse(c);i.uri=g,e.push(i)}catch(j){console.log("Failed to parse: "+c+" due to: "+j)}a.log.debug("git - read ",d," files, total: ",f.length),h()})})})},b.prototype.getDashboard=function(a,b){var c=this.getUserDashboardPath(a);this.git.read(this.branch,c,function(a){var c=null,d=a.text;if(d)try{c=JSON.parse(d)}catch(e){console.log("Failed to parse: "+d+" due to: "+e)}b(c)})},b.prototype.getUserDashboardDirectory=function(){return"/dashboards/team/all"},b.prototype.getUserDashboardPath=function(a){return this.getUserDashboardDirectory()+"/"+a+".json"},b}();a.GitDashboardRepository=e}(Dashboard||(Dashboard={}));var Dashboard;!function(a){a._module.controller("Dashboard.EditDashboardsController",["$scope","$routeParams","$route","$location","$rootScope","dashboardRepository","jolokia","workspace",function(a,b,c,d,e,f,g,h){function i(){var c=b.href;c&&(a.url=decodeURIComponent(c));var d=b.routeParams;d&&(a.routeParams=decodeURIComponent(d));var e=b.size;e&&(e=decodeURIComponent(e),a.preferredSize=angular.fromJson(e));var g=b.title;g&&(g=decodeURIComponent(g),a.widgetTitle=g),f.getDashboards(function(a){j(null,a)})}function j(b,c){a._dashboards=c,null===b&&a.$emit("dashboardsUpdated",c),Core.$apply(a)}function k(){return a._dashboards}a.hash=h.hash(),a.selectedItems=[],a.repository=f,a.duplicateDashboards=new UI.Dialog,a.selectedProfilesDialog=[],a._dashboards=[],e.$on("dashboardsUpdated",j),a.hasUrl=function(){return a.url?!0:!1},a.hasSelection=function(){return 0!==a.selectedItems.length},a.gridOptions={selectedItems:a.selectedItems,showFilter:!1,showColumnMenu:!1,filterOptions:{filterText:""},data:"_dashboards",selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,columnDefs:[{field:"title",displayName:"Dashboard",cellTemplate:'<div class="ngCellText"><a ng-href="#/dashboard/id/{{row.getProperty(\'id\')}}{{hash}}"><editable-property class="inline-block" on-save="onDashRenamed(row.entity)" property="title" ng-model="row.entity"></editable-property></a></div>'},{field:"group",displayName:"Group"}]},a.onDashRenamed=function(a){f.putDashboards([a],"Renamed dashboard",function(a){j(null,a)})},a.usingGit=function(){return"git"===f.getType()},a.usingFabric=function(){return"fabric"===f.getType()},a.usingLocal=function(){return"container"===f.getType()},a.usingFabric()&&(a.container=Fabric.getCurrentContainer(g,["versionId","profileIds"]),a.gridOptions.columnDefs.add([{field:"versionId",displayName:"Version"},{field:"profileId",displayName:"Profile"},{field:"fileName",displayName:"File Name"}])),a.$on("$routeChangeSuccess",function(){setTimeout(i,100)}),a.goBack=function(){var b=Core.trimLeading(a.url,"#");b&&d.url(b)},a.duplicateToProfiles=function(){a.hasSelection()&&a.duplicateDashboards.open()},a.doDuplicateToProfiles=function(){a.duplicateDashboards.close();var b=[];a.selectedItems.forEach(function(c){a.selectedProfilesDialog.forEach(function(a){var d=f.cloneDashboard(c);d.profileId=a.id,d.title=c.title,b.push(d)})});var c="Duplicating "+a.selectedItems.length+" dashboards to "+a.selectedProfilesDialog.length+" profiles";f.putDashboards(b,c,function(a){j(null,a)})},a.addViewToDashboard=function(){var b=null;angular.forEach(a.selectedItems,function(d){var e=a.url,f=null;if(e){var g=e.indexOf("?");g&&g>0&&(f=e.substring(g+1),e=e.substring(0,g)),e=Core.trimLeading(e,"#")}var h={};if(f){var i=f.split("&");angular.forEach(i,function(a){if(a){var b=a.split("="),c=b[0],d=b.length>1?b[1]:null;d&&(d=encodeURIComponent(d));var e=h[c];e?(angular.isArray(e)||(e=[e],h[c]=e),e.push(d)):h[c]=d}})}if(c&&c.routes){var j=c.routes[e];if(j){var k=j.templateUrl;if(k){d.widgets||(d.widgets=[]);var l=d.widgets.length+1,m={id:"w"+l,title:"",row:1,col:1,size_x:1,size_y:1,path:Core.trimLeading(e,"/"),include:k,search:h,hash:""};a.widgetTitle&&(m.title=a.widgetTitle);var n=0;d.widgets.forEach(function(a){var b=a.col+a.size_x;b>n&&(n=b)}),a.preferredSize&&(m.size_x=parseInt(a.preferredSize.size_x),m.size_y=parseInt(a.preferredSize.size_y));var o=!1,p=function(a){return a.col},q=function(a){return a.col+a.size_x-1},r=function(a){return a.row},s=function(a){return a.row+a.size_y-1},t=function(a,b){return!(p(b)>q(a)||q(b)<p(a)||r(b)>s(a)||s(b)<r(a))};for(d.widgets.isEmpty()&&(o=!0);!o;){for(m.col=1;m.col+m.size_x<=n;m.col++)if(!d.widgets.any(function(a){var b=t(a,m);return b})){o=!0;break}o||(m.row=m.row+1),m.row>50&&(o=!0)}a.routeParams&&(m.routeParams=a.routeParams),d.widgets.push(m),!b&&d.id&&(b="/dashboard/id/"+d.id)}}}});var e="Add widget";f.putDashboards(a.selectedItems,e,function(){b&&(delete d.search().href,d.path(b),Core.$apply(a))})},a.create=function(){var b=k().length+1,c="Untitled"+b,d=f.createDashboard({title:c});f.putDashboards([d],"Created new dashboard: "+c,function(b){a.selectedItems.splice(0),j(null,b)})},a.duplicate=function(){var b=[],c="Duplicated dashboard(s) ";angular.forEach(a.selectedItems,function(a){var c=("Duplicated dashboard "+a.title,f.cloneDashboard(a));b.push(c)}),a.selectedItems.splice(0),c+=b.map(function(a){return a.title}).join(","),f.putDashboards(b,c,function(a){j(null,a)})},a["delete"]=function(){a.hasSelection()&&f.deleteDashboards(a.selectedItems,function(b){a.selectedItems.splice(0),j(null,b)})},a.gist=function(){if(a.selectedItems.length>0){var b=a.selectedItems[0].id;d.path("/dashboard/id/"+b+"/share")}},i()}])}(Dashboard||(Dashboard={}));var Dashboard;!function(a){var b=function(){function b(a,b,c){this.workspace=a,this.jolokia=b,this.localStorage=c,this.details=this.getBranchAndProfiles()}return b.prototype.getBranchAndProfiles=function(){if(Fabric.fabricCreated(this.workspace)){var a=Fabric.getCurrentContainer(this.jolokia,["id","versionId","profiles"]),b=[];return a.profiles&&(b=a.profiles.unique(),b=Fabric.filterProfiles(this.jolokia,a.versionId,b)),{branch:a.versionId,profiles:b}}return{branch:"1.0",profiles:[]}},b.prototype.putDashboards=function(b,c,d){var e=this,f=this.jolokia,g=this.details,h=b.length,i=function(){h-=1,0===h&&e.getDashboards(d)};b.forEach(function(b){var c=angular.toJson(b,!0),d=b.profileId;d||(d=g.profiles.first());var e=b.fileName;e||(e=Core.getUUID()+".dashboard"),Fabric.saveConfigFile(f,g.branch,d,e,c.encodeBase64(),function(){i()},function(c){a.log.error("Failed to store dashboard: ",b.title," due to: ",c.error," stack trace: ",c.stacktrace),i()})})},b.prototype.deleteDashboards=function(b,c){var d=this,e=this.jolokia,f=this.details,g=b.length,h=function(){g-=1,0===g&&d.getDashboards(c)};b.forEach(function(b){var c=b.profileId,d=b.fileName;c&&d&&Fabric.deleteConfigFile(e,f.branch,c,d,function(){h()},function(c){a.log.error("Failed to delete dashboard: ",b.title," due to: ",c.error," stack trace: ",c.stacktrace),h()})})},b.prototype.createDashboard=function(a){var b={title:"New Dashboard",group:"Fabric",versionId:this.details.branch,profileId:this.details.profiles.first(),widgets:[]};b=angular.extend(b,a);var c=Core.getUUID();return b.id=c,b.fileName=c+".dashboard",b},b.prototype.cloneDashboard=function(a){var b=Object.clone(a),c=Core.getUUID();return b.id=c,b.fileName=c+".dashboard",b.title="Copy of "+a.title,b},b.prototype.getType=function(){return"fabric"},b.prototype.isValid=function(){return Fabric.hasFabric(this.workspace)},b.prototype.getDashboards=function(b){var c=this,d=this.jolokia,e=this.details,f=[];d.request({type:"exec",mbean:Fabric.managerMBean,operation:"getConfigurationFiles",arguments:[e.branch,e.profiles,".*dashboard"]},{method:"POST",success:function(a){angular.forEach(a.value,function(a,b){angular.forEach(a,function(a,c){var d=angular.fromJson(a.decodeBase64());d.versionId=e.branch,d.profileId=b,d.fileName=c,f.push(d)})}),f.isEmpty()&&f.push(c.createDashboard({})),f=f.sort(function(a,b){var c=a.title,d=b.title;return c.localeCompare(d)}),b(f)},error:function(c){a.log.error("Failed to load dashboard data: error: ",c.error," stack trace: ",c.stacktrace),b([])}})},b.prototype.getDashboard=function(a,b){this.getDashboards(function(c){var d=c.find(function(b){return b.id===a});b(d)})},b}();a.FabricDashboardRepository=b}(Dashboard||(Dashboard={}));var Dashboard;!function(a){var b=function(){function b(){this.restrict="A",this.replace=!0,this.controller=["$scope","$element","$attrs","$location","$routeParams","$injector","$route","$templateCache","workspace","dashboardRepository","$compile",function(b,c,d,e,f,g,h,i,j,k,l){function m(a,c,d){var e=t(),f=b.widgetMap[a.id],g=f.widget,h=f.scope;c(f),e.resize_widget(g,f.size_x,f.size_y),e.set_dom_grid_height(),setTimeout(function(){var c=i.get("widgetTemplate"),e=$("<div></div>");e.html(c),g.html(l(e.contents())(h)),q(),Core.$apply(b),setTimeout(function(){d(a)},50)},30)}function n(){b.id=f.dashboardId,b.idx=f.dashboardIndex,b.id?(b.$emit("loadDashboards"),k.getDashboard(b.id,o)):k.getDashboards(function(a){b.$emit("dashboardsUpdated",a);var c=b.idx?parseInt(b.idx):0,d=null;if(a.length>0){var f=a.length>c?a[c]:f[0];d=f.id}e.path(d?"/dashboard/id/"+d:"/dashboard/edit?tab=dashboard"),Core.$apply(b)})}function o(d){b.dashboard=d;var f=(d?d.widgets:null)||[],g=10,h=6;angular.forEach(f,function(a){if(angular.isDefined(a.row)&&g<a.row&&(g=a.row+1),angular.isDefined(a.size_x&&angular.isDefined(a.col))){var b=a.col+a.size_x;b>h&&(h=b+1)}});var k=c.gridster({widget_margins:[w,w],widget_base_dimensions:[b.gridX,b.gridY],extra_rows:g,extra_cols:h,max_size_x:h,max_size_y:g,draggable:{stop:function(){p()&&s("Changing dashboard layout")}}}).data("gridster"),m=i.get("widgetTemplate");angular.forEach(f,function(c){var d=b.$new(!1);d.widget=c;var f=c.path,g=null;c.search&&(g=a.decodeURIComponentProperties(c.search));var h=c.hash,i=new a.RectangleLocation(e,f,g,h),n=null;c.routeParams&&(n=angular.fromJson(c.routeParams));var o=j.createChildWorkspace(i);if(o.$location=i,g){var p=i.search().nid;if(p&&j.tree&&(o.selection=j.keyToNodeMap[p],!o.selection)){var q=decodeURIComponent(p);o.selection=j.keyToNodeMap[q]}}var r={workspace:o,location:i,$location:i,$routeParams:n};d.$$scopeInjections=r,d.inDashboard=!0,(!c.size_x||c.size_x<1)&&(c.size_x=1),(!c.size_y||c.size_y<1)&&(c.size_y=1);var s=$("<div></div>");s.html(m);var t=$('<li class="grid-block" style="display: list-item; position: absolute"></li>');t.html(l(s.contents())(d));var u=k.add_widget(t,c.size_x,c.size_y,c.col,c.row);b.widgetMap[c.id]={widget:u,scope:d}}),q(),t().enable(),Core.$apply(b)}function p(){var a=t();if(a){var c=a.serialize(),d=b.dashboard.widgets||[];return angular.forEach(d,function(a,b){var d=c[b];d&&a&&angular.forEach(d,function(b,c){return a[c]=b})}),!0}return!1}function q(){var a=$(".grid-block");a.resizable("destroy"),a.resizable({grid:[v+2*w,v+2*w],animate:!1,minWidth:v,minHeight:v,autoHide:!1,start:function(){u=t().$el.height()},resize:function(a){var b=t(),c=v+2*w;if(a.offsetY>b.$el.height()){var d=Math.floor((a.offsetY-u)/c+1),e=u+d*c;b.$el.css("height",e)}},stop:function(){var a=$(this);setTimeout(function(){r(a)},300)}}),$(".ui-resizable-handle").hover(function(){t().disable()},function(){t().enable()})}function r(a){for(var b=a.find(".widget-area"),c=a.width()-v,d=a.height()-v,e=1;c>0;c-=v+2*w)e++;for(var f=1;d>0;d-=v+2*w)f++;var g={id:b.attr("data-widgetId")};m(g,function(a){a.size_x=e,a.size_y=f},function(a){p()&&s("Changed size of widget: "+a.id)})}function s(c){if(b.dashboard){var d=c;b.dashboard&&b.dashboard.title&&(d+=" on dashboard "+b.dashboard.title),k.putDashboards([b.dashboard],d,a.onOperationComplete)}}function t(){return c.gridster().data("gridster")}b.route=h,b.injector=g;var u,v=150,w=6;b.gridX=v,b.gridY=v,b.widgetMap={},b.$on("$destroy",function(){angular.forEach(b.widgetMap,function(a){if("scope"in a){var b=a.scope;b.$destroy()}})}),n(),b.removeWidget=function(a){var c=t(),d=null,e=b.widgetMap[a.id];if(e){delete b.widgetMap[a.id];var f=e.scope;d=e.widget,f&&f.$destroy()}if(d||(d=$("div").find("[data-widgetId='"+a.id+"']").parent()),c&&d&&c.remove_widget(d),b.dashboard){var g=b.dashboard.widgets;g&&g.remove(a)}s("Removed widget "+a.title)},b.onWidgetRenamed=function(a){s("Renamed widget to "+a.title)}}]}return b}();a.GridsterDirective=b}(Dashboard||(Dashboard={}));var Dashboard;!function(a){a._module.controller("Dashboard.ImportController",["$scope","$location","$routeParams","workspace","dashboardRepository",function(b,c,d,e,f){b.placeholder="Paste the JSON here for the dashboard configuration to import...",b.source=b.placeholder;var g={mode:{name:"javascript"}};b.codeMirrorOptions=CodeEditor.createEditorSettings(g),b.isValid=function(){return b.source&&b.source!==b.placeholder},b.importJSON=function(){var d=[];try{d=JSON.parse(b.source)}catch(e){Core.notification("error","Could not parse the JSON\n"+e),d=[]}var g=[];angular.isArray(d)?g=d:angular.isObject(d)&&g.push(d),g.length&&(angular.forEach(g,function(a){angular.copy(a,f.createDashboard(a))}),f.putDashboards(g,"Imported dashboard JSON",a.onOperationComplete),c.path("/dashboard/edit"))}}])}(Dashboard||(Dashboard={}));var Dashboard;!function(a){a._module.controller("Dashboard.NavBarController",["$scope","$routeParams","$rootScope","workspace","dashboardRepository",function(b,c,d,e,f){function g(c,e){a.log.debug("navbar dashboardLoaded: ",e),b._dashboards=e,null===c&&(d.$broadcast("dashboardsUpdated",e),Core.$apply(b))}function h(a){f.getDashboards(function(c){g(a,c),Core.$apply(b)})}b.hash=e.hash(),b._dashboards=[],b.activeDashboard=c.dashboardId,d.$on("loadDashboards",h),d.$on("dashboardsUpdated",g),b.dashboards=function(){return b._dashboards},b.isActive=function(a){return e.isLinkActive("#/dashboard/id/"+a.id)},b.isEditing=function(){return e.isLinkActive("#/dashboard/edit")},b.onTabRenamed=function(a){f.putDashboards([a],"Renamed dashboard",function(a){g(null,a)})}}])}(Dashboard||(Dashboard={}));var Dashboard;!function(a){var b=function(){function a(a,b,c,d){this.delegate=a,this._path=b,this._search=c,this._hash=d}return a.prototype.absUrl=function(){return this.protocol()+this.host()+":"+this.port()+this.path()+this.search()},a.prototype.hash=function(a){return void 0===a&&(a=null),a?this.delegate.hash(a).search("tab",null):this._hash},a.prototype.host=function(){return this.delegate.host()},a.prototype.path=function(a){return void 0===a&&(a=null),a?this.delegate.path(a).search("tab",null):this._path},a.prototype.port=function(){return this.delegate.port()},a.prototype.protocol=function(){return this.delegate.port()},a.prototype.replace=function(){return this},a.prototype.search=function(a){return void 0===a&&(a=null),a?this.delegate.search(a):this._search},a.prototype.url=function(a){return void 0===a&&(a=null),a?this.delegate.url(a).search("tab",null):this.absUrl()},a}();a.RectangleLocation=b}(Dashboard||(Dashboard={}));var Dashboard;!function(a){a.ShareController=a._module.controller("Dashboard.ShareController",["$scope","$location","$routeParams","workspace","dashboardRepository",function(b,c,d,e,f){function g(c){b.dashboard=a.cleanDashboardData(c),b.json={description:"hawtio dashboards","public":!0,files:{"dashboards.json":{content:JSON.stringify(b.dashboard,null,"  ")}}},b.source=JSON.stringify(b.dashboard,null,"  "),Core.$applyNowOrLater(b)}var h=d.dashboardId;f.getDashboard(h,g);var i={mode:{name:"javascript"}};b.codeMirrorOptions=CodeEditor.createEditorSettings(i)}])}(Dashboard||(Dashboard={}));var DataTable;!function(a){var b=function(){function a(a,b,c,d,e){var f=this;void 0===e&&(e={}),this.scope=a,this.$templateCache=b,this.$compile=c,this.dataTableColumns=d,this.config=e,this.ignoreColumnHash={},this.flattenColumnHash={},this.detailTemplate=null,this.openMessages=[],this.addedExpandNodes=!1,this.tableElement=null,this.sortColumns=null,this.dataTableConfig={bPaginate:!1,sDom:"Rlfrtip",bDestroy:!0,bAutoWidth:!0},this.dataTable=null,angular.forEach(e.ignoreColumns,function(a){f.ignoreColumnHash[a]=!0}),angular.forEach(e.flattenColumns,function(a){f.flattenColumnHash[a]=!0});var g=e.rowDetailTemplateId;g&&(this.detailTemplate=this.$templateCache.get(g))}return a.prototype.addData=function(a){var b=this.dataTable;b.fnAddData(a)},a.prototype.populateTable=function(a){var b=this,c=this.scope;if(a){c.messages=a;var d=function(a,c){var d=a.fnGetData(c),e=$("<div>");return e.addClass("innerDetails"),b.populateDetailDiv(d,e),e},e=a;angular.isArray(a)||angular.isObject(a)&&(e=[],angular.forEach(a,function(a){return e.push(a)}));var f=this.tableElement;f||(f=$("#grid"));var g=Core.getOrCreateElements(f,["thead","tr"]),h=(Core.getOrCreateElements(f,["tbody"]),$(g).find("th"),[]);angular.forEach(this.dataTableColumns,function(a){return h.push(a)});var i=function(a,b){h.push({sDefaultContent:"",mData:null,mDataProp:a}),g&&$("<th>"+b+"</th>").appendTo(g)},j=function(a,c,d){var e=b.ignoreColumnHash[c]||h.any(function(a,b){return"mDataProp"===a&&b===c});if(!e)if(b.flattenColumnHash[c]){if(angular.isObject(a)){var f=d+c+".";angular.forEach(a,function(a,b){return j(a,b,f)})}}else i(d+c,Core.humanizeValue(c))};if(!this.config.disableAddColumns&&angular.isArray(e)&&e.length>0){var k=e[0];angular.isObject(k)&&angular.forEach(k,function(a,b){return j(a,b,"")})}if(h.length>1){var l=h[0];if(!this.sortColumns&&!l.mDataProp&&!l.mData){var m=[[1,"asc"]];this.sortColumns=m}}this.dataTableConfig.aaData=e.length&&!angular.isArray(e[0])?e:e,this.dataTableConfig.aoColumns=h,this.sortColumns&&(this.dataTableConfig.aaSorting=this.sortColumns),this.dataTableConfig.oLanguage={sSearch:"Filter:"},this.dataTable?(this.dataTable.fnClearTable(!1),this.dataTable.fnAddData(e),this.dataTable.fnDraw()):this.dataTable=f.dataTable(this.dataTableConfig);var n=this;if(this.dataTable){var o=new KeyTable({table:f[0],datatable:this.dataTable});if(o.fnSetPosition(0,0),angular.isArray(a)&&a.length){var p=a[0],q=n.config.selectHandler;p&&q&&q(p)}}$(f).focus();var n=this,r=function(){var a=n.dataTable,b=this.parentNode,e=n.openMessages,f=$.inArray(b,e),g=$("i",this);if(-1===f){g.removeClass("icon-plus"),g.addClass("icon-minus");var h=d(a,b),i=$(a.fnOpen(b,h,"details"));i.css("padding","0"),setTimeout(function(){i.find(".innerDetails").slideDown(400,function(){$(b).addClass("opened"),e.push(b)})},20)}else $(b.nextSibling).find(".innerDetails").slideUp(400,function(){$(b).removeClass("opened"),g.removeClass("icon-minus"),g.addClass("icon-plus"),a.fnClose(b),e.splice(f,1)});Core.$apply(c)};this.addedExpandNodes||(this.addedExpandNodes=!0,$(f).on("click","td.control",r),o.event.action(0,null,function(a){r.call(a)})),o.event.focus(null,null,function(a){var b=n.dataTable,c=a;if(a){var d=a.nodeName;if(d){"td"===d.toLowerCase()&&(c=$(a).parents("tr")[0]);var e=b.fnGetData(c),f=n.config.selectHandler;e&&f&&f(e)}}}),$(f).find("td.control").on("click",function(){var a=n.dataTable;if($(this).hasClass("selected"))$(this).removeClass("focus selected");else{n.config.multiSelect||a.$("td.selected").removeClass("focus selected"),$(this).addClass("focus selected");var b=$(this).parents("tr")[0],c=a.fnGetData(b),d=n.config.selectHandler;c&&d&&d(c)}})}else c.messages=[];Core.$apply(c)},a.prototype.populateDetailDiv=function(a,b){delete a[0];var c=this.scope.$new();c.row=a,c.templateDiv=b;var d=this.detailTemplate;if(!d){var e=this.config.rowDetailTemplateId;e&&(this.detailTemplate=this.$templateCache.get(e),d=this.detailTemplate)}d&&(b.html(d),this.$compile(b.contents())(c))},a}();a.TableWidget=b}(DataTable||(DataTable={}));var DataTable;!function(a){a.pluginName="datatable",a.log=Logger.get("DataTable"),a._module=angular.module(a.pluginName,["bootstrap","ngResource"]),a._module.config(["$routeProvider",function(a){a.when("/datatable/test",{templateUrl:"app/datatable/html/test.html"})}]),a._module.directive("hawtioDatatable",["$templateCache","$compile","$timeout","$filter",function(b,c,d,e){return function(f,g,h){function i(){Core.$applyNowOrLater(f)}function j(a){var b={mData:a.field,sDefaultContent:""},d=a.displayName;d&&(b.sTitle=d);var g=a.width;angular.isNumber(g)?b.sWidth=""+g+"px":angular.isString(g)&&!g.startsWith("*")&&(b.sWidth=g);var h=a.cellTemplate;if(h)b.fnCreatedCell=function(a,b,d,e){var g=t[e];g||(g=f.$new(!1),t[e]=g);var i=d;g.row={entity:i,getProperty:function(a){return i[a]}};var j=$(a);j.html(h);var k=j.contents();k.removeClass("ngCellText"),c(k)(g)};else{var i=a.cellFilter,j=a.render;if(i&&!j){var k=e(i);k&&(j=function(a){return k(a)})}j&&(b.mRender=j)}return b}function k(){angular.forEach(t,function(a){a.$destroy()}),t=[]}function l(a){a&&w&&(w.splice(0,w.length),w.push(a),Core.$apply(f))}function m(d){if(o=d){if(w=o.selectedItems,u=o.rowDetailTemplate,v=o.rowDetailTemplateId,null===q){var e={selectHandler:l,disableAddColumns:!0,rowDetailTemplateId:v,ignoreColumns:o.ignoreColumns,flattenColumns:o.flattenColumns},h=$(g),m=h.children("table");m.length||($("<table class='table table-bordered table-condensed'></table>").appendTo(h),m=h.children("table")),m.removeClass("table-striped"),m.addClass("dataTable");var r=Core.getOrCreateElements(m,["thead","tr"]);k();var t=[],x=1,y=u||v;if(y){t.push({mDataProp:null,sClass:"control center",sWidth:"30px",sDefaultContent:'<i class="icon-plus"></i>'});var z=r.children("th");z.length<x++&&$("<th></th>").appendTo(r)}var A=o.columnDefs;angular.isString(A)&&(A=f[A]),angular.forEach(A,function(a){if(z=r.children("th"),z.length<x++){var b=a.displayName||"";$("<th>"+b+"</th>").appendTo(r)}t.push(j(a))}),q=new a.TableWidget(f,b,c,t,e),q.tableElement=m;var B=o.sortInfo;if(B&&A){var C=[],D=B.field;if(D){var E=A.findIndex({field:D});if(E>=0){y&&(E+=1);var F=B.direction||"asc";F=F.toLowerCase(),C.push([E,F])}}C.length&&(q.sortColumns=C)}t.every(function(a){return a.sWidth})&&(q.dataTableConfig.bAutoWidth=!1);var G=null,H=o.filterOptions;H&&(G=H.filterText),(G||angular.isDefined(o.showFilter)&&!o.showFilter)&&(q.dataTableConfig.sDom="Rlrtip"),G&&f.$watch(G,function(a){var b=q.dataTable;b&&b.fnFilter(a)}),angular.isDefined(o.displayFooter)&&!o.displayFooter&&q.dataTableConfig.sDom&&(q.dataTableConfig.sDom=q.dataTableConfig.sDom.replace("i",""))}if(!p&&(p=o.data)){var I=function(a){(s||a&&(!angular.isArray(a)||a.length))&&(s=!0,k(),q.populateTable(a),n())};f.$watch(p,I),f.$on("hawtio.datatable."+p,function(){var a=Core.pathGet(f,p);I(a)})}}i()}function n(){r=d(function(){i()},300)}var o=null,p=null,q=null,r=null,s=!1,t=[],u=null,v=null,w=null;f.$watch(h.hawtioDatatable,m),g.bind("$destroy",function(){k(),d.cancel(r)}),n()}}]),hawtioPluginLoader.addModule(a.pluginName)}(DataTable||(DataTable={}));var FilterHelpers;!function(a){function b(a,b,d,e){void 0===d&&(d=-1),void 0===e&&(e=!0);var f=b.split(" "),g=f.filter(function(b){return c(a,b,d)});return e?g.length===f.length:g.length>0}function c(a,b,d,e){if(void 0===d&&(d=-1),void 0===e&&(e=0),d>0&&e>=d||e>50)return!1;var f=b.toLowerCase(),g=!1;return angular.isString(a)?g=a.toLowerCase().has(f):angular.isNumber(a)?g=(""+a).toLowerCase().has(f):angular.isArray(a)?g=a.some(function(a){return c(a,f,d,e+1)}):angular.isObject(a)&&(g=c(Object.extended(a).values(),f,d,e)),g}a.log=Logger.get("FilterHelpers"),a.search=b,a.searchObject=c}(FilterHelpers||(FilterHelpers={}));var DataTable;!function(a){function b(a,b,c){var d=c,e=!1;return angular.forEach(b,function(b){var c=a[b];!e&&angular.isDefined(c)&&(d=c,e=!0)}),d}var c=function(){function c(a){var b=this;this.$compile=a,this.restrict="A",this.scope={config:"=hawtioSimpleTable",target:"@",showFiles:"@"},this.link=function(a,c,d){return b.doLink(a,c,d)}}return c.prototype.doLink=function(c,d){function e(){var a=h.selectedItems;if(a||(a=[],h.selectedItems=a),angular.isString(a)){var b=a;a=Core.pathGet(k,b),a||(a=[],k[b]=a)}return a}function f(){var a=c.config.multiSelect;return angular.isUndefined(a)&&(a=!0),a}var g=function(a,b){return a.id||a._id||a.name||b},h=c.config,i=h.data||"data",j=h.primaryKeyFn||g;c.rows=[];var k=c.$parent||c,l=function(){var b=Core.pathGet(k,i);if(b&&!angular.isArray(b)&&(b=[b],Core.pathSet(k,i,b)),!("sortInfo"in h)&&"columnDefs"in h){var d,e=h.columnDefs.first().defaultSort;
d=angular.isUndefined(e)||e===!0?h.columnDefs.first().field:h.columnDefs.slice(1).first().field,h.sortInfo={sortBy:d,ascending:!0}}else h.sortInfo={sortBy:"",ascending:!0};var f=c.config.sortInfo,g=-1;c.rows=(b||[]).sortBy(f.sortBy,!f.ascending).map(function(a){return g++,{entity:a,index:g,getProperty:function(b){return a[b]}}}),Core.pathSet(k,["hawtioSimpleTable",i,"rows"],c.rows);var l=[];c.rows.forEach(function(b){var c=j(b.entity,b.index),d=h.selectedItems.some(function(a){var b=j(a,a.index);return angular.equals(c,b)});d&&(b.entity.index=b.index,l.push(b.entity),a.log.debug("Data changed so keep selecting row at index "+b.index))}),h.selectedItems=l};k.$watch(i,l),k.$on("hawtio.datatable."+i,l),c.toggleAllSelections=function(){var a=c.config.allRowsSelected,b=a,d=e();d.splice(0,d.length),angular.forEach(c.rows,function(c){c.selected=b,a&&d.push(c.entity)})},c.toggleRowSelection=function(a){if(a){var b=e();f()||(b.splice(0,b.length),angular.forEach(c.rows,function(b){b!==a&&(b.selected=!1)}));var d=a.entity;if(d){var g=b.indexOf(d);a.selected?0>g&&b.push(d):(c.config.allRowsSelected=!1,g>=0&&b.splice(g,1))}}},c.sortBy=function(a){c.config.sortInfo.sortBy===a?c.config.sortInfo.ascending=!c.config.sortInfo.ascending:(c.config.sortInfo.sortBy=a,c.config.sortInfo.ascending=!0),c.$emit("hawtio.datatable."+i)},c.getClass=function(a){return"sortInfo"in c.config&&c.config.sortInfo.sortBy===a?c.config.sortInfo.ascending?"asc":"desc":""},c.showRow=function(a){var b=Core.pathGet(c,["config","filterOptions","filterText"]);if(Core.isBlank(b))return!0;var d=null;try{d=a.entity.title}catch(e){}d||(d=a.entity);var f=FilterHelpers.search(d,b);return f},c.isSelected=function(a){return h.selectedItems.some(a.entity)},c.onRowSelected=function(b){var c=h.selectedItems.indexOf(b.entity);c>=0?(a.log.debug("De-selecting row at index "+b.index),h.selectedItems.splice(c,1)):(h.multiSelect||(h.selectedItems.length=0),a.log.debug("Selecting row at index "+b.index),b.entity.index=b.index,h.selectedItems.push(b.entity))};var m=d;m.empty();var n,o=b(h,["showSelectionCheckbox","displaySelectionCheckbox"],!0),p=b(h,["enableRowClickSelection"],!1);n=p?"ng-mousedown='onRowSelected(row)' ":"";var q="<thead><tr>",r="<tbody><tr ng-repeat='row in rows track by $index' ng-show='showRow(row)' "+n+"ng-class=\"{'selected': isSelected(row)}\" >",s=0;if(o){var t=f()?"<input type='checkbox' ng-show='rows.length' ng-model='config.allRowsSelected' ng-change='toggleAllSelections()'>":"";q+="\n<th class='simple-table-checkbox'>"+t+"</th>",r+="\n<td class='simple-table-checkbox'><input type='checkbox' ng-model='row.selected' ng-change='toggleRowSelection(row)'></td>"}angular.forEach(h.columnDefs,function(a){var b=a.field,c=a.cellTemplate||'<div class="ngCellText" title="{{row.entity.'+b+'}}">{{row.entity.'+b+"}}</div>";q+="\n<th class='clickable no-fade table-header' ng-click=\"sortBy('"+b+"')\" ng-class=\"getClass('"+b+"')\">{{config.columnDefs["+s+"].displayName}}<span class='indicator'></span></th>",r+="\n<td>"+c+"</td>",s+=1});var u=q+"\n</tr></thead>\n"+r+"\n</tr></tbody>",v=this.$compile(u)(c);m.html(v)},c}();a.SimpleDataTable=c,a._module.directive("hawtioSimpleTable",["$compile",function(b){return new a.SimpleDataTable(b)}])}(DataTable||(DataTable={}));var DockerRegistry;!function(a){a._module=angular.module(a.pluginName,["hawtioCore","ngResource"]),a.controller=PluginHelpers.createControllerFunction(a._module,a.pluginName),a.route=PluginHelpers.createRoutingFunction(a.templatePath),a._module.config(["$routeProvider",function(b){b.when(UrlHelpers.join(a.context,"list"),a.route("list.html",!1))}]),a._module.factory("DockerRegistryRestURL",["jolokiaUrl","jolokia","$q","$rootScope",function(b,c,d,e){var f=d.defer();return c.getAttribute(Kubernetes.managerMBean,"DockerRegistry",void 0,onSuccess(function(c){var d=UrlHelpers.maybeProxy(b,c);a.log.debug("Discovered docker registry API URL: ",d),f.resolve(d),Core.$apply(e)},{error:function(b){a.log.debug("error fetching docker registry API details: ",b),f.reject(b),Core.$apply(e)}})),f.promise}]),a._module.run(["viewRegistry","workspace",function(b,c){a.log.debug("Running"),b["docker-registry"]=UrlHelpers.join(a.templatePath,"layoutDockerRegistry.html"),c.topLevelTabs.push({id:"docker-registry",content:"Images",isValid:function(a){return a.treeContainsDomainAndProperties(Fabric.jmxDomain,{type:"KubernetesManager"})},isActive:function(a){return a.isLinkActive("docker-registry")},href:function(){return a.defaultRoute}})}]),hawtioPluginLoader.addModule(a.pluginName)}(DockerRegistry||(DockerRegistry={}));var PollHelpers;!function(a){function b(a,b,d,e,f){if(void 0===d&&(d=2e3),a.$hasPoller)return void c.debug("scope already has polling set up, ignoring subsequent polling request");a.$hasPoller=!0,e||(e=Core.injector.get("$timeout")),f||(f=Core.injector.get("jolokia"));var g=void 0,h=a.name||"anonymous scope",i=function(){b(function(){f.isRunning()&&a.$hasPoller&&(g=e(i,d))})};return a.$on&&(a.$on("$destroy",function(){c.debug("scope",h," being destroyed, cancelling polling"),delete a.$hasPoller,e.cancel(g)}),a.$on("$routeChangeStart",function(){c.debug("route changing, cancelling polling for scope: ",h),delete a.$hasPoller,e.cancel(g)})),i}var c=Logger.get("PollHelpers");a.setupPolling=b}(PollHelpers||(PollHelpers={}));var DockerRegistry;!function(a){a.TopLevel=a.controller("TopLevel",["$scope","$http","$timeout",function(b,c,d){b.repositories=[],b.fetched=!1,b.restURL="",a.getDockerImageRepositories(function(d,e){if(b.restURL=d,b.fetched=!0,e){b.repositories=e.results;var f=angular.toJson(b.repositories);b.fetch=PollHelpers.setupPolling(b,function(d){var e=UrlHelpers.join(b.restURL,a.SEARCH_FRAGMENT);c.get(e).success(function(a){a&&a.results&&f!==angular.toJson(a.results)&&(b.repositories=a.results,f=angular.toJson(b.repositories)),d()})}),b.fetch()}else a.log.debug("Failed initial fetch of image repositories")}),b.$watchCollection("repositories",function(e){function f(){g-=1,0>=g&&b.$broadcast("DockerRegistry.Repositories",b.restURL,e)}if(!Core.isBlank(b.restURL)){if(!e||0===e.length)return void b.$broadcast("DockerRegistry.Repositories",b.restURL,e);var g=e.length;e.forEach(function(e){var g=UrlHelpers.join(b.restURL,"v1/repositories/"+e.name+"/tags");d(function(){a.log.debug("Fetching tags from URL: ",g),c.get(g).success(function(b){a.log.debug("Got tags: ",b," for image repository: ",e.name),e.tags=b,f()}).error(function(b){a.log.debug("Error fetching data for image repository: ",e.name," error: ",b),f()})},500)})}})}])}(DockerRegistry||(DockerRegistry={}));var DockerRegistry;!function(a){a.TagController=a.controller("TagController",["$scope",function(a){a.selectImage=function(b){a.$emit("DockerRegistry.SelectedImageID",b)}}]),a.ListController=a.controller("ListController",["$scope","$templateCache","$http",function(b,c,d){b.imageRepositories=[],b.selectedImage=void 0,b.tableConfig={data:"imageRepositories",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:""},columnDefs:[{field:"name",displayName:"Name",defaultSort:!0},{field:"description",displayName:"Description"},{field:"tags",displayName:"Tags",cellTemplate:c.get("tagsTemplate.html")}]},b.deletePrompt=function(c){UI.multiItemConfirmActionDialog({collection:c,index:"name",onClose:function(e){e&&c.forEach(function(c){var e=UrlHelpers.join(b.restURL,"/v1/repositories/"+c.name+"/");a.log.debug("Using URL: ",e),d["delete"](e).success(function(){a.log.debug("Deleted repository: ",c.name)}).error(function(){a.log.debug("Failed to delete repository: ",c.name)})})},title:"Delete Repositories?",action:"The following repositories will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()},b.$on("DockerRegistry.SelectedImageID",function(c,e){var f=UrlHelpers.join(b.restURL,"/v1/images/"+e+"/json");d.get(f).success(function(c){a.log.debug("Got image: ",c),b.selectedImage=c})}),b.$on("DockerRegistry.Repositories",function(a,c,d){b.imageRepositories=d})}])}(DockerRegistry||(DockerRegistry={}));var Dozer;!function(a){function b(b){var c=b;angular.isString(b)&&(c=$.parseXML(b)),console.log("Has Dozer XML document: "+c);var d=new a.Mappings(c),e=c.documentElement;return o(d,e),$(e).children("mapping").each(function(a,b){var c=l(b);d.mappings.push(c)}),d}function c(b){var c=b.doc.documentElement.cloneNode(!1);q(b.mappings,c,null,1),a.addTextNode(c,"\n");var d=Core.xmlNodeToString(c);return'<?xml version="1.0" encoding="UTF-8"?>\n'+d}function d(b,c,d){var f=c.class_a.value;e(b,f,null,function(b){var e=[];angular.forEach(b,function(b){console.log("got property "+JSON.stringify(b,null,"  "));var d=b.name;d&&(c.hasFromField(d)||e.push(new a.UnmappedField(d,b)))}),d(e)})}function e(a,b,c,d){void 0===c&&(c=null),void 0===d&&(d=null);var e=g(a);return e?c?a.jolokia.execute(e,"findProperties",b,c,onSuccess(d)):a.jolokia.execute(e,"getProperties",b,onSuccess(d)):d?d([]):[]}function f(a,b,c,d){void 0===c&&(c=20),void 0===d&&(d=null);var e=g(a);return e?a.jolokia.execute(e,"findClassNames",b,c,onSuccess(d)):d?d([]):[]}function g(){return a.introspectorMBean}function h(a,b){return b.mappings=[],angular.forEach(a.childList,function(a){var c=Core.pathGet(a,["data","entity"]);c&&b.mappings.push(c)}),b}function i(b){var c="mappings",d=new Folder(c);return d.addClass="net-sourceforge-dozer-mappings",d.domain=a.jmxDomain,d.typeName="mappings",d.entity=b,d.key=Core.toSafeDomID(c),angular.forEach(b.mappings,function(a){var b=j(a,d);d.children.push(b)}),d}function j(b,c){var d=b.name(),e=new Folder(d);return e.addClass="net-sourceforge-dozer-mapping",e.typeName="mapping",e.domain=a.jmxDomain,e.key=(c?c.key+"_":"")+Core.toSafeDomID(d),e.parent=c,e.entity=b,e.icon=Core.url("/app/dozer/img/class.gif"),angular.forEach(b.fields,function(a){k(a,e)}),e}function k(b,c){var d=b.name(),e=new Folder(d);return e.addClass="net-sourceforge-dozer-field",e.typeName="field",e.domain=a.jmxDomain,e.key=c.key+"_"+Core.toSafeDomID(d),e.parent=c,e.entity=b,e.icon=Core.url("/app/dozer/img/attribute.gif"),c.children.push(e),e}function l(b){var c=new a.Mapping,d=$(b);return c.class_a=n(d.children("class-a")),c.class_b=n(d.children("class-b")),d.children("field").each(function(a,b){var d=m(b);c.fields.push(d)}),o(c,b),c}function m(b){if(b){var c=$(b),d=c.children("a").text(),e=c.children("b").text(),f=new a.Field(new a.FieldDefinition(d),new a.FieldDefinition(e));return o(f,b),f}return new a.Field(new a.FieldDefinition(""),new a.FieldDefinition(""))}function n(b){if(b&&b[0]){var c=b[0],d=c.textContent;if(d){var e=new a.MappingClass(d);return o(e,c),e}}return new a.MappingClass("")}function o(a,b){for(var c=b.attributes,d=0;d<c.length;d++){var e=c,f=e.item(d);if(f){var g=f.localName,h=f.value;if(g&&!g.startsWith("xmlns")){var i=Forms.safeIdentifier(g);a[i]=h}}}}function p(a,b,c){angular.forEach(a,function(a,d){if(c.any(d));else if(a){var e=a.toString(),f=d.replace(/_/g,"-");b.setAttribute(f,e)}})}function q(b,c,d,e){void 0===d&&(d=null),void 0===e&&(e=0);var f=null;if(angular.isArray(b))angular.forEach(b,function(a){f=q(a,c,d,e)});else if(b){if(!d){var g=Core.pathGet(b,["constructor","name"]);g?(d=a.elementNameMappings[g],d||console.log("WARNING: could not map class name "+g+" to an XML element name")):console.log("WARNING: no class name for value "+b)}if(d){if(e){var h=t(e);a.addTextNode(c,h)}var i=c.ownerDocument||document,j=i.createElement(d),k=b.saveToElement;if(k?k.apply(b,[j]):angular.forEach(b,function(a,b){console.log("has key "+b+" value "+a)}),$(j).children().length){var h=t(e);a.addTextNode(j,h)}c.appendChild(j),f=j}}return f}function r(a){var b=angular.isObject(a)?a.value:null;return!b&&angular.isString(a)&&(b=a),b||"?"}function s(a,b){if(b){var c=a.ownerDocument||document,d=c.createTextNode(b);a.appendChild(d)}}function t(a){for(var b="\n",c=0;a>c;c++)b+="  ";return b}a.jmxDomain="net.sourceforge.dozer",a.introspectorMBean="hawtio:type=Introspector",a.excludedPackages=["java.lang","int","double","long"],a.elementNameMappings={Mapping:"mapping",MappingClass:"class",Field:"field"},a.log=Logger.get("Dozer"),a.loadDozerModel=b,a.saveToXmlText=c,a.findUnmappedFields=d,a.findProperties=e,a.findClassNames=f,a.getIntrospectorMBean=g,a.loadModelFromTree=h,a.createDozerTree=i,a.createMappingFolder=j,a.addMappingFieldFolder=k,a.appendAttributes=p,a.appendElement=q,a.nameOf=r,a.addTextNode=s}(Dozer||(Dozer={}));var Dozer;!function(a){var b=function(){function a(a,b){void 0===b&&(b=[]),this.doc=a,this.mappings=b}return a}();a.Mappings=b;var c=function(){function b(){this.fields=[],this.map_id=Core.getUUID(),this.class_a=new d(""),this.class_b=new d("")}return b.prototype.name=function(){return a.nameOf(this.class_a)+" -> "+a.nameOf(this.class_b)},b.prototype.hasFromField=function(a){return this.fields.find(function(b){return a===b.a.value})},b.prototype.hasToField=function(a){return this.fields.find(function(b){return a===b.b.value})},b.prototype.saveToElement=function(b){a.appendElement(this.class_a,b,"class-a",2),a.appendElement(this.class_b,b,"class-b",2),a.appendElement(this.fields,b,"field",2),a.appendAttributes(this,b,["class_a","class_b","fields"])},b}();a.Mapping=c;var d=function(){function b(a){this.value=a}return b.prototype.saveToElement=function(b){a.addTextNode(b,this.value),a.appendAttributes(this,b,["value","properties","error"])},b}();a.MappingClass=d;var e=function(){function b(a,b){this.a=a,this.b=b}return b.prototype.name=function(){return a.nameOf(this.a)+" -> "+a.nameOf(this.b)},b.prototype.saveToElement=function(b){a.appendElement(this.a,b,"a",3),a.appendElement(this.b,b,"b",3),a.appendAttributes(this,b,["a","b"])},b}();a.Field=e;var f=function(){function b(a){this.value=a}return b.prototype.saveToElement=function(b){a.addTextNode(b,this.value),a.appendAttributes(this,b,["value","properties","error"])},b}();a.FieldDefinition=f;var g=function(){function a(a,b,c){void 0===c&&(c=null),this.fromField=a,this.property=b,this.toField=c}return a}();a.UnmappedField=g}(Dozer||(Dozer={}));var Dozer;!function(a){function b(){function a(a){return'<input type="text" ng-model="dozerEntity.'+a+'.value" typeahead="title for title in classNames($viewValue) | filter:$viewValue" typeahead-editable="true"  title="The Java class name"/>'}io_hawt_dozer_schema_Field.tabs={Fields:["a.value","b.value"],"From Field":["a\\..*"],"To Field":["b\\..*"],"Field Configuration":["*"]},io_hawt_dozer_schema_Mapping.tabs={Classes:["class-a.value","class-b.value"],"From Class":["class-a\\..*"],"To Class":["class-b\\..*"],"Class Configuration":["*"]},io_hawt_dozer_schema_Mapping.properties.fieldOrFieldExclude.hidden=!0,Core.pathSet(io_hawt_dozer_schema_Field,["properties","a","properties","value","label"],"From Field"),Core.pathSet(io_hawt_dozer_schema_Field,["properties","b","properties","value","label"],"To Field"),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-a","properties","value","label"],"From Class"),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-b","properties","value","label"],"To Class"),Core.pathSet(io_hawt_dozer_schema_Field,["properties","a","ignorePrefixInLabel"],!0),Core.pathSet(io_hawt_dozer_schema_Field,["properties","b","ignorePrefixInLabel"],!0),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-a","ignorePrefixInLabel"],!0),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-b","ignorePrefixInLabel"],!0),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-a","properties","value","formTemplate"],a("class_a")),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-b","properties","value","formTemplate"],a("class_b")),Core.pathSet(io_hawt_dozer_schema_Field,["properties","a","properties","value","formTemplate"],'<input type="text" ng-model="dozerEntity.a.value" typeahead="title for title in fromFieldNames($viewValue) | filter:$viewValue" typeahead-editable="true"  title="The Java class name"/>'),Core.pathSet(io_hawt_dozer_schema_Field,["properties","b","properties","value","formTemplate"],'<input type="text" ng-model="dozerEntity.b.value" typeahead="title for title in toFieldNames($viewValue) | filter:$viewValue" typeahead-editable="true"  title="The Java class name"/>')}a.schemaConfigure=b}(Dozer||(Dozer={}));var ES;!function(a){a.config={elasticsearch:"http://"+window.location.hostname+":9200",indice:"twitter",doctype:"tweet",query:"*"}}(ES||(ES={}));var ES;!function(a){function b(a){return $.isEmptyObject(a)}function c(c,d,e,f){function g(){console.log("ES Server = "+c.esServer),console.log("Indice = "+c.indice),console.log("Type = "+c.docType),console.log("Query = "+c.queryTerm),b(c.indice)||(o=c.indice),b(c.esServer)||(k=c.esServer),b(c.docType)||(p=c.docType),b(c.queryTerm)||(l=c.queryTerm);var a=f(c.esServer);j=a.Request().indices(o).types(p),console.log("Request to call ElasticSearch defined")}function h(a){return f(a)}var i,j,k=c.esServer=a.config.elasticsearch,l=c.queryTerm=a.config.query,m=c.facetField="tags",n=c.facetType="terms",o=c.indice=a.config.indice,p=c.docType=a.config.doctype;c.log=e,c.search=function(){b(i)&&(console.log("Init EJS server"),i=h(k)),g(),j=j.query(i.QueryStringQuery(l));var a=j.doSearch();console.log("Do Elastic Search"),a.then(function(a){return c.queryTerm="","undefined"!=typeof a.error?void console.error("ES error : "+a.error):(console.log(a.hits.total+" : results retrieved"),void(c.results=a))})},c.facetTermsSearch=function(){b(i)&&(console.log("Init EJS server"),i=h(k)),g(),b(c.facetField)||(m=c.facetField),b(c.facetType)||(n=c.facetType),j=j.query(i.QueryStringQuery(l)).facet(i.TermsFacet("termFacet").field(m).size(50));var a=j.doSearch();console.log("Do Elastic Search"),a.then(function(a){return c.queryTerm="","undefined"!=typeof a.error?void console.error("ES error : "+a.error):(console.log(a.hits.total+" : results retrieved"),void(c.results=a))})},c.facetDateHistogramSearch=function(){b(i)&&(console.log("Init EJS server"),i=h(k)),g(),b(c.facetField)||(m=c.facetField),b(c.facetType)||(n=c.facetType),j=j.query(i.QueryStringQuery(l)).facet(i.DateHistogramFacet("dateHistoFacet").field(m).interval("minute"));var a=j.doSearch();console.log("Do Elastic Search"),a.then(function(a){return c.queryTerm="","undefined"!=typeof a.error?void console.error("ES error : "+a.error):(console.log(a.hits.total+" : results retrieved"),void(c.results=a))})},c.indexSampleDocs=function(){var a="http://"+location.host;b(i)&&(console.log("EJS object is not defined - create it - setupEsRequest"),i=h(k));var c=[];$.getJSON(a+"/hawtio/app/elasticsearch/js/data.json",function(a){$.each(a,function(a,b){console.log("Field : "+b),c[a]=i.Document(o,p,a).source(b),c[a].refresh(!0).doIndex()})})},c.parse_error=function(a){var b=a.match("nested: (.*?);");return null==b?a:b[1]}}a.isEmptyObject=b,a.SearchCtrl=c}(ES||(ES={}));var ES;!function(a){var b="elasticsearch",c="app/elasticsearch/html";a._module=angular.module(b,["bootstrap","ngResource","elasticjs.service","dangle"]),a._module.config(["$routeProvider",function(a){a.when("/elasticsearch",{templateUrl:c+"/es.html"})}]),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,c,d,e){d[b]="app/elasticsearch/html/es.html",e.addUserDoc(b,"app/elasticsearch/doc/help.md",function(){return!1})}])}(ES||(ES={}));var Wiki;!function(a){var b=function(){function a(a){this.factoryMethod=a,this.directoryPrefix=""}return a.prototype.getRepositoryLabel=function(a,b){this.git().getRepositoryLabel(a,b)},a.prototype.exists=function(a,b,c){var d=this.getPath(b);return this.git().exists(a,d,c)},a.prototype.completePath=function(a,b,c,d){return this.git().completePath(a,b,c,d)},a.prototype.getPage=function(a,b,c,d){var e=this,f=this.git();if(b=b||"/",f)if(c){var g=this.getLogPath(b);f.getContent(c,g,function(a){var b={text:a,directory:!1};d(b)})}else{var h=this.getPath(b);f.read(a,h,function(a){var b=a.children;angular.forEach(b,function(a){var b=a.path;if(b){var c="/"+e.directoryPrefix;b.startsWith(c)&&(b="/"+b.substring(c.length),a.path=b)}}),d(a)})}return f},a.prototype.diff=function(a,b,c,d){var e=this.getLogPath(c),f=this.git();return f&&f.diff(a,b,e,function(a){var b={text:a,format:"diff",directory:!1};d(b)}),f},a.prototype.commitInfo=function(a,b){this.git().commitInfo(a,b)},a.prototype.commitTree=function(a,b){this.git().commitTree(a,b)},a.prototype.putPage=function(a,b,c,d,e){var f=this.getPath(b);this.git().write(a,f,d,c,e)},a.prototype.putPageBase64=function(a,b,c,d,e){var f=this.getPath(b);this.git().writeBase64(a,f,d,c,e)},a.prototype.createDirectory=function(a,b,c,d){var e=this.getPath(b);this.git().createDirectory(a,e,c,d)},a.prototype.revertTo=function(a,b,c,d,e){var f=this.getLogPath(c);this.git().revertTo(a,b,f,d,e)},a.prototype.rename=function(a,b,c,d,e){var f=this.getPath(b),g=this.getPath(c);d||(d="Renaming page "+b+" to "+c),this.git().rename(a,f,g,d,e)},a.prototype.removePage=function(a,b,c,d){var e=this.getPath(b);c||(c="Removing page "+b),this.git().remove(a,e,c,d)},a.prototype.getPath=function(a){var b=this.directoryPrefix;return b?b+a:a},a.prototype.getLogPath=function(a){return Core.trimLeading(this.getPath(a),"/")},a.prototype.history=function(a,b,c,d,e){var f=this.getLogPath(c),g=this.git();return g&&g.history(a,b,f,d,e),g},a.prototype.getContent=function(a,b,c){var d=this.getLogPath(b),e=this.git();return e&&e.getContent(a,d,c),e},a.prototype.branches=function(a){var b=this.git();return b&&b.branches(a),b},a.prototype.jsonChildContents=function(a,b,c,d){var e=this.getLogPath(a),f=this.git();return f&&f.readJsonChildContent(e,b,c,d),f},a.prototype.git=function(){var a=this.factoryMethod();return a||console.log("No repository yet! TODO we should use a local impl!"),a},a}();a.GitWikiRepository=b}(Wiki||(Wiki={}));var Wiki;!function(a){a.pluginName="wiki",a.templatePath="app/wiki/html/",a.tab=null,a._module=angular.module(a.pluginName,["bootstrap","ui.bootstrap.dialog","ui.bootstrap.tabs","ngResource","hawtioCore","hawtio-ui","tree","camel"]),a.controller=PluginHelpers.createControllerFunction(a._module,"Wiki"),a.route=PluginHelpers.createRoutingFunction(a.templatePath),a._module.config(["$routeProvider",function(b){angular.forEach(["","/branch/:branch"],function(c){b.when(UrlHelpers.join("/wiki",c,"view"),a.route("viewPage.html",!1)).when(UrlHelpers.join("/wiki",c,"create/*page"),a.route("create.html",!1)).when("/wiki"+c+"/view/*page",{templateUrl:"app/wiki/html/viewPage.html",reloadOnSearch:!1}).when("/wiki"+c+"/book/*page",{templateUrl:"app/wiki/html/viewBook.html",reloadOnSearch:!1}).when("/wiki"+c+"/edit/*page",{templateUrl:"app/wiki/html/editPage.html"}).when("/wiki"+c+"/version/*page/:objectId",{templateUrl:"app/wiki/html/viewPage.html"}).when("/wiki"+c+"/history/*page",{templateUrl:"app/wiki/html/history.html"}).when("/wiki"+c+"/commit/*page/:objectId",{templateUrl:"app/wiki/html/commit.html"}).when("/wiki"+c+"/diff/*page/:objectId/:baseObjectId",{templateUrl:"app/wiki/html/viewPage.html",reloadOnSearch:!1}).when("/wiki"+c+"/formTable/*page",{templateUrl:"app/wiki/html/formTable.html"}).when("/wiki"+c+"/dozer/mappings/*page",{templateUrl:"app/wiki/html/dozerMappings.html"}).when("/wiki"+c+"/configurations/*page",{templateUrl:"app/wiki/html/configurations.html"}).when("/wiki"+c+"/configuration/:pid/*page",{templateUrl:"app/wiki/html/configuration.html"}).when("/wiki"+c+"/newConfiguration/:factoryPid/*page",{templateUrl:"app/wiki/html/configuration.html"}).when("/wiki"+c+"/camel/diagram/*page",{templateUrl:"app/wiki/html/camelDiagram.html"}).when("/wiki"+c+"/camel/canvas/*page",{templateUrl:"app/wiki/html/camelCanvas.html"}).when("/wiki"+c+"/camel/properties/*page",{templateUrl:"app/wiki/html/camelProperties.html"})})}]),a._module.factory("wikiRepository",["workspace","jolokia","localStorage",function(b,c,d){return new a.GitWikiRepository(function(){return Git.createGitRepository(b,c,d)})}]),a._module.factory("wikiBranchMenu",function(){var a={items:[],addExtension:function(b){a.items.push(b)},applyMenuExtensions:function(b){if(0!==a.items.length){var c=[{heading:"Actions"}];a.items.forEach(function(a){a.valid()&&c.push(a)}),c.length>1&&b.add(c)}}};return a}),a._module.factory("fileExtensionTypeRegistry",function(){return{image:["svg","png","ico","bmp","jpg","gif"],markdown:["md","markdown","mdown","mkdn","mkd"],htmlmixed:["html","xhtml","htm"],"text/x-java":["java"],"text/x-scala":["scala"],javascript:["js","json","javascript","jscript","ecmascript","form"],xml:["xml","xsd","wsdl","atom"],properties:["properties"]}}),a._module.filter("fileIconClass",function(){return a.iconClass}),a._module.run(["$location","workspace","viewRegistry","jolokia","localStorage","layoutFull","helpRegistry","preferencesRegistry","wikiRepository","postLoginTasks","$rootScope",function(b,c,d,e,f,g,h,i,j,k,l){d.wiki=a.templatePath+"layoutWiki.html",h.addUserDoc("wiki","app/wiki/doc/help.md",function(){return a.isWikiEnabled(c,e,f)}),i.addTab("Git","app/wiki/html/gitPreferences.html"),a.tab={id:"wiki",content:"Wiki",title:"View and edit wiki pages",isValid:function(b){return a.isWikiEnabled(b,e,f)},href:function(){return"#/wiki/view"},isActive:function(a){return a.isLinkActive("/wiki")&&!a.linkContains("fabric","profiles")&&!a.linkContains("editFeatures")}},c.topLevelTabs.push(a.tab),k.addTask("wikiGetRepositoryLabel",function(){j.getRepositoryLabel(function(b){a.tab.content=b,Core.$apply(l)},function(){})}),a.documentTemplates.forEach(function(a){a.regex||(a.regex=/(?:)/)})}]),hawtioPluginLoader.addModule(a.pluginName)}(Wiki||(Wiki={}));var Fabric;!function(a){a.templatePath="app/fabric/html/",a.activeMQTemplatePath="app/activemq/html/",a._module=angular.module("fabric",["bootstrap","ui.bootstrap","ui.bootstrap.dialog","ngResource","ngGrid","hawtio-forms","hawtioCore","wiki"]),a._module.config(["$routeProvider",function(b){b.when("/fabric/containers/createContainer",{templateUrl:a.templatePath+"createContainer.html",reloadOnSearch:!1}).when("/fabric/map",{templateUrl:a.templatePath+"map.html"}).when("/fabric/clusters/*page",{templateUrl:a.templatePath+"clusters.html"}).when("/fabric/containers",{templateUrl:a.templatePath+"containers.html",reloadOnSearch:!1}).when("/fabric/container/:containerId",{templateUrl:a.templatePath+"container.html",reloadOnSearch:!1}).when("/fabric/assignProfile",{templateUrl:a.templatePath+"assignProfile.html"}).when("/fabric/activeProfiles",{templateUrl:a.templatePath+"activeProfiles.html"}).when("/wiki/profile/:versionId/:profileId/editFeatures",{templateUrl:a.templatePath+"editFeatures.html"}).when("/fabric/profile/:versionId/:profileId/:fname",{templateUrl:a.templatePath+"pid.html"}).when("/fabric/migrate",{templateUrl:a.templatePath+"migrateVersions.html"}).when("/fabric/patching",{templateUrl:a.templatePath+"patching.html"}).when("/fabric/configurations/:versionId/:profileId",{templateUrl:"app/osgi/html/configurations.html"}).when("/fabric/configuration/:versionId/:profileId/:pid",{templateUrl:"app/osgi/html/pid.html"}).when("/fabric/configuration/:versionId/:profileId/:pid/:factoryPid",{templateUrl:"app/osgi/html/pid.html"}).when("/fabric/mq/brokers",{templateUrl:a.templatePath+"brokers.html"}).when("/fabric/mq/brokerDiagram",{templateUrl:a.activeMQTemplatePath+"brokerDiagram.html",reloadOnSearch:!1}).when("/fabric/mq/brokerNetwork",{templateUrl:a.templatePath+"brokerNetwork.html"}).when("/fabric/mq/createBroker",{templateUrl:a.templatePath+"createBroker.html"}).when("/fabric/camel/diagram",{templateUrl:"app/camel/html/fabricDiagram.html",reloadOnSearch:!1}).when("/fabric/api",{templateUrl:a.templatePath+"apis.html"}).when("/fabric/api/wsdl",{templateUrl:"app/api/html/wsdl.html"}).when("/fabric/api/wadl",{templateUrl:"app/api/html/wadl.html"}).when("/fabric/test",{templateUrl:a.templatePath+"test.html"}).when("/fabric/profileView",{templateUrl:a.templatePath+"profileView.html",reloadOnSearch:!1}).when("/fabric/containerView",{templateUrl:a.templatePath+"containerView.html",reloadOnSearch:!1})}]),a._module.factory("serviceIconRegistry",function(){return a.serviceIconRegistry}),a._module.factory("containerIconRegistry",function(){return a.containerIconRegistry}),a._module.run(["$location","workspace","jolokia","viewRegistry","pageTitle","helpRegistry","$rootScope","postLoginTasks","preferencesRegistry","wikiBranchMenu","$dialog","layoutFull",function(b,c,d,e,f,g,h,i,j,k,l){var m=a.templatePath+"layoutFabric.html",n=a.templatePath+"layoutNoTabs.html";e["fabric/assignProfile"]=m,e["fabric/profileView"]=n,e["fabric/containerView"]=n,e["fabric/migrate"]=n,e["fabric/patching"]=n,e["fabric/map"]=m,e["fabric/clusters"]=m,e["fabric/container"]=m,e["fabric/activeProfiles"]=m,e["fabric/containers"]=m,e["fabric/configurations"]=m,e["fabric/configuration"]=m,e["fabric/mq"]=m,e["fabric/camel"]=m,e["fabric/api"]=m,f.addTitleElement(function(){return a.currentContainerId}),a.addWikiBranchMenuExtensions(k,l,c),i.addTask("fabricFetchContainerName",function(){""===a.currentContainerId&&a.fabricCreated(c)&&d.request({type:"exec",mbean:a.managerMBean,operation:"currentContainer()",arguments:[]},onSuccess(function(b){b.value&&(a.currentContainer=b.value,a.currentContainerId=a.currentContainer.id,"container"in Perspective.metadata&&(Core.pathSet(Perspective.metadata,["container","label"],a.currentContainerId),Core.pathSet(Perspective.metadata,["container","icon"],a.getTypeIcon(a.currentContainer))),Core.$apply(h))}))}),j.addTab("Fabric","app/fabric/html/preferences.html",function(){return a.isFMCContainer(c)}),c.topLevelTabs.push({id:"fabric.runtime",content:"Services",title:"Manage your containers in this fabric",isValid:function(b){return a.isFMCContainer(b)},href:function(){return"#/fabric/containers"},isActive:function(a){return a.isLinkActive("fabric")&&!a.isLinkActive("fabric/profileView")&&!a.isLinkActive("fabric/containerView")&&!a.isLinkActive("fabric/deploy")&&!a.isLinkActive("fabric/requirements")}}),c.topLevelTabs.push({id:"fabric.profiles",content:"Profiles",title:"Select and deploy profiles into this fabric",isValid:function(b){return a.isFMCContainer(b)},href:function(){return"#/fabric/profileView"},isActive:function(a){return a.isLinkActive("fabric/profileView")}}),c.topLevelTabs.push({id:"fabric.containers",content:"Containers",title:"View and manage containers in this fabric",isValid:function(b){return a.isFMCContainer(b)},href:function(){return"#/fabric/containerView"},isActive:function(a){return a.isLinkActive("fabric/containerView")}}),c.topLevelTabs.push({id:"fabric.configuration",content:"Wiki",title:"View the documentation and configuration of your profiles in Fabric",isValid:function(c,e){var f=a.isFMCContainer(c);if(f){var g=Perspective.currentPerspectiveId(b,c,d,localStorage);f="fabric"===(void 0===e?g:e)}return f},href:function(){return"#/wiki/branch/"+a.getActiveVersion(b)+"/view/fabric/profiles"},isActive:function(a){return a.isLinkActive("/wiki")&&(a.linkContains("fabric","profiles")||a.linkContains("editFeatures"))}}),g.addUserDoc("fabric","app/fabric/doc/help.md",function(){return a.isFMCContainer(c)}),g.addDevDoc("fabric","app/fabric/doc/developer.md")}]),hawtioPluginLoader.addModule("fabric")}(Fabric||(Fabric={}));var FabricDeploy;!function(a){a.log=Logger.get("FabricDeploy"),a.pluginName="fabric-deploy",a.templatePath="app/fabric-deploy/html/",a._module=angular.module(a.pluginName,["bootstrap","fabric"]),a._module.config(["$routeProvider",function(b){b.when("/fabric/deploy",{templateUrl:a.templatePath+"deploy.html"})}]),a._module.run(["viewRegistry","layoutFull","workspace",function(){a.log.debug("started")}]),hawtioPluginLoader.addModule(a.pluginName)}(FabricDeploy||(FabricDeploy={}));var FabricDeploy;!function(a){a.DeployArtifact=a._module.directive("fabricDeployArtifact",[function(){return a.log.debug("Creating deploy artifact directive..."),{restrict:"A",replace:!0,scope:{versionId:"@",profileId:"@"},templateUrl:a.templatePath+"deploy.html",controller:["$scope","$element","FileUploader","jolokiaUrl","$templateCache","jolokia","userDetails",function(b,c,d,e,f,g,h){b.artifactTemplate="",g.request({type:"read",mbean:Fabric.managerMBean,attribute:"MavenRepoUploadURI"},onSuccess(function(c){var g=c.value;
e.has("/proxy")&&(g="proxy/"+g),a.log.debug("Maven upload URI: ",g);var i=b.artifactUploader=new d({headers:{Authorization:Core.authHeaderValue(h)},autoUpload:!0,withCredentials:!0,method:"PUT",url:g});b.doUpload=function(){i.uploadAll()},i.onWhenAddingFileFailed=function(b,c,d){a.log.debug("onWhenAddingFileFailed",b,c,d)},i.onAfterAddingFile=function(b){a.log.debug("onAfterAddingFile",b)},i.onAfterAddingAll=function(b){a.log.debug("onAfterAddingAll",b)},i.onBeforeUploadItem=function(c){c.fileSizeMB="file"in c?(c.file.size/1024/1024).toFixed(2):0,c.url=UrlHelpers.join(g,c.file.name)+"?profile="+b.profileId+"&version="+b.versionId,a.log.debug("onBeforeUploadItem",c)},i.onProgressItem=function(b,c){a.log.debug("onProgressItem",b,c)},i.onProgressAll=function(b){a.log.debug("onProgressAll",b)},i.onSuccessItem=function(b,c,d,e){a.log.debug("onSuccessItem",b,c,d,e)},i.onErrorItem=function(b,c,d,e){a.log.debug("onErrorItem",b,c,d,e)},i.onCancelItem=function(b,c,d,e){a.log.debug("onCancelItem",b,c,d,e)},i.onCompleteItem=function(b,c,d,e){a.log.debug("onCompleteItem",b,c,d,e)},i.onCompleteAll=function(){a.log.debug("onCompleteAll"),i.clearQueue()},a.log.debug("uploader",i),b.artifactTemplate=f.get("fileUpload.html"),Core.$apply(b)}))}]}}])}(FabricDeploy||(FabricDeploy={}));var ObjectHelpers;!function(a){function b(a,b,c){if(!a||0===a.length)return{};var d={};return a.forEach(function(a){angular.isObject(a)&&(d[a[b]]=a,angular.isFunction(c)&&c(a))}),d}a.toMap=b}(ObjectHelpers||(ObjectHelpers={}));var SelectionHelpers;!function(a){function b(a){a.forEach(function(a){a.selected=!1})}function c(a,b){a.forEach(function(a){b?b(a)&&(a.selected=!0):a.selected=!0})}function d(a){a.selected=!a.selected}function e(a,c){b(a),d(c)}function f(a,b,c){return b.forEach(function(b){b.selected=a.any(function(a){return a[c]===b[c]})}),b.filter(function(a){return a.selected})}function g(a,b,c){var f=c.ctrlKey;f?d(b):b.selected?d(b):e(a,b)}function h(a,b,c){return n(a.selected,b,c)}function i(a){a.length=0}function j(a,b,c){var d=c||b;a.any(d)?a.remove(d):a.add(b)}function k(a,b){return angular.isDefined(a)?a:b}function l(a){return k(a,!1)}function m(a){return k(a,!0)}function n(a,b,c){return a?m(b):l(c)}function o(a,b,c,d,e){if(!a)return l(d);var f=e||b;return n(a.any(f),c,d)}function p(a,b,c,d,e){if(0===a.length)return m(c);var f=e||b;return angular.isArray(b)?n(a.intersect(b).length===a.length,c,d):n(a.any(f),c,d)}function q(a,b,c){var d=[];a.forEach(c?function(a){var e=b.find(function(b){return a[c]===b[c]});e&&d.push(e)}:function(a){var c=b.find(function(b){return Object.equal(a,b)});c&&d.push(c)}),i(a),a.add(d)}function r(a){a.selectNone=b,a.selectAll=c,a.toggleSelection=d,a.selectOne=e,a.select=g,a.clearGroup=i,a.toggleSelectionFromGroup=j,a.isInGroup=o,a.viewOnly=!1,a.filterByGroup=p}Logger.get("SelectionHelpers");a.selectNone=b,a.selectAll=c,a.toggleSelection=d,a.selectOne=e,a.sync=f,a.select=g,a.isSelected=h,a.clearGroup=i,a.toggleSelectionFromGroup=j,a.isInGroup=o,a.filterByGroup=p,a.syncGroupSelection=q,a.decorate=r}(SelectionHelpers||(SelectionHelpers={}));var ProfileHelpers;!function(a){function b(a){var b=a.tags;return b&&b.length||(b=a.id.split("-"),b=b.first(b.length-1)),b}a.getTags=b}(ProfileHelpers||(ProfileHelpers={}));var Fabric;!function(a){a._module.service("ProfileCart",function(){return[]}),a._module.service("ProfileViewActions",["$location","$rootScope",function(b,c){return{Deploy:{index:0,icon:"icon-ok",buttonClass:"btn-success",objectName:a.managerMBean,methodName:"createContainers",title:"Deploy the selected profiles to new containers",action:function(){var a=b.path();b.path("/fabric/containers/createContainer").search({p:"fabric",vid:"",pid:"",hideProfileSelector:!0,returnTo:a,nextPage:"/fabric/containerView?groupBy=profileIds"}),Core.$apply(c)}},Assign:{index:2,icon:"icon-truck",buttonClass:"btn-primary",objectName:a.managerMBean,methodName:"addProfilesToContainer",title:"Deploy the selected profiles to existing containers",action:function(){b.path("/fabric/assignProfile"),Core.$apply(c)}}}}]),a.AppViewPaneHeaderController=a._module.controller("Fabric.AppViewPaneHeaderController",["$scope","ProfileCart","ProfileViewActions",function(a,b,c){SelectionHelpers.decorate(a);var d=[];angular.forEach(c,function(a,b){a.name=b,d.add(a)}),a.actionButtons=d,a.cartItems=b,a.getName=function(){return a.cartItems.map(function(a){return a.id}).join(", ")},a.$watch("filter",function(b,c){b!==c&&a.$emit("Fabric.AppViewPaneController.filter",b)})}]),a.AppViewController=a._module.controller("Fabric.AppViewController",["$scope","jolokia","$templateCache","ProfileCart","$location","workspace","marked",function(b,c,d,e,f,g,h){function i(c){var d=c.value;b.profiles=[],b.tags=[],d.forEach(function(c){if(!(c["abstract"]||c.hidden||c.overlay)){var d=c.summaryMarkdown,e=ProfileHelpers.getTags(c);b.tags.add(e),b.profiles.push({id:c.id,versionId:b.selectedVersion.id,name:c.id,tags:e,iconURL:a.toIconURL(b,c.iconURL),summary:d?h(d):"",containerCount:c.containerCount,associatedContainers:c.associatedContainers})}}),b.profiles=b.profiles.sortBy("name"),SelectionHelpers.syncGroupSelection(b.cartItems,b.profiles,"id"),b.tags=b.tags.unique().sort(),Core.$apply(b)}b.selectedVersion={},b.profiles=[],b.cartItems=e,b.tags=[],b.selectedTags=[],b.textFilter="",b.lowercaseTextFilter="",SelectionHelpers.decorate(b),b.$on("Fabric.AppViewPaneController.filter",function(a,c){b.textFilter=c}),b.filterProfiles=function(a){var c=b.filterByGroup(b.selectedTags,a.tags);if(c&&!Core.isBlank(b.textFilter)){var d=b.textFilter.toLowerCase();return FilterHelpers.searchObject(a,d)}return c};var j=["id","abstract","hidden","attributes","overlay","containerCount","associatedContainers","fileConfigurations","iconURL","summaryMarkdown","tags"],k=null;a.loadRestApi(c,g,void 0,function(d){b.restApiUrl=UrlHelpers.maybeProxy(Core.injector.get("jolokiaUrl"),d.value),a.log.debug("Scope rest API: ",b.restApiUrl),b.$watch("selectedVersion.id",function(d){Core.isBlank(d)||(k&&k(),k=Core.registerForChanges(c,b,{type:"exec",mbean:a.managerMBean,operation:"getProfiles(java.lang.String,java.util.List)",arguments:[d,j]},i))})}),b.viewProfile=function(b){a.gotoProfile(g,c,g.localStorage,f,b.versionId,b.id)}}])}(Fabric||(Fabric={}));var FabricRequirements;!function(a){a.requirementsContext="/fabric/requirements",a.requirementsHash="#"+a.requirementsContext,a.pluginName="FabricRequirements",a.templatePath="app/fabric-requirements/html/",a.log=Logger.get(a.pluginName),a._module=angular.module(a.pluginName,["hawtioCore","fabric"]),a.controller=PluginHelpers.createControllerFunction(a._module,a.pluginName),a.route=PluginHelpers.createRoutingFunction(a.templatePath);var b=PluginHelpers.createRoutingFunction("app/fabric/html/");a._module.config(["$routeProvider",function(c){c.when(UrlHelpers.join(a.requirementsContext,"profile"),a.route("profileRequirements.html")).when(UrlHelpers.join(a.requirementsContext,"sshConfig"),a.route("sshConfig.html")).when(UrlHelpers.join(a.requirementsContext,"dockerConfig"),a.route("dockerConfig.html")).when(UrlHelpers.join(a.requirementsContext,"status"),b("activeProfiles.html"))}]),a._module.run(["viewRegistry","layoutFull","workspace","ProfileViewActions","$location","$rootScope",function(b,c,d,e,f,g){b["fabric/requirements"]=a.templatePath+"layout.html",d.topLevelTabs.push({id:"fabric.requirements",content:"Scaling",isValid:function(a){return Fabric.isFMCContainer(a)},isActive:function(a){return a.isLinkActive("fabric/requirements")},href:function(){return"#/fabric/requirements/profile"}}),e["Add Requirements"]={index:3,icon:"icon-cog",buttonClass:"btn-primary",objectName:Fabric.managerMBean,methodName:"requirementsJson",title:"Create requirements for the selected profiles",action:function(){f.path("/fabric/requirements/profile"),Core.$apply(g)}}}]),hawtioPluginLoader.addModule(a.pluginName)}(FabricRequirements||(FabricRequirements={}));var FileUpload;!function(a){function b(a,b,c){var d=a,e=Core.injector.get("$rootScope");d._xhrTransport=function(a){var f=new FileReader;f.onload=function(){if(2===f.readyState){var g=c(f.result);b.request(g,onSuccess(function(b){a.json=f.result,d._onSuccessItem(a,b,b.status,{}),d._onCompleteItem(a,b,b.status,{}),Core.$apply(e)},{error:function(b){d._onErrorItem(a,b,b.status,{}),d._onCompleteItem(a,b,b.status,{}),Core.$apply(e)}}))}},f.readAsText(a._file)}}a.useJolokiaTransport=b}(FileUpload||(FileUpload={}));var FabricRequirements;!function(a){a._module.service("CurrentRequirements",function(){return{$dirty:!1}}),a.RequirementsController=a.controller("RequirementsController",["$scope","jolokia","workspace","ProfileCart","$templateCache","FileUploader","userDetails","jolokiaUrl","$location","$timeout","CurrentRequirements","$element",function(b,c,d,e,f,g,h,i,j,k,l,m){b.tabs={0:{name:"Profile Requirements",href:function(){return a.requirementsHash+"/profile"},isActive:function(){return UrlHelpers.contextActive(j.path(),"profile")}},1:{name:"SSH Configuration",href:function(){return a.requirementsHash+"/sshConfig"},isActive:function(){return UrlHelpers.contextActive(j.path(),"sshConfig")}},2:{name:"Docker Configuration",href:function(){return a.requirementsHash+"/dockerConfig"},isActive:function(){return UrlHelpers.contextActive(j.path(),"dockerConfig")}},3:{name:"Status",href:function(){return a.requirementsHash+"/status"},isActive:function(){return UrlHelpers.contextActive(j.path(),"status")}}},b.requirements=l,b.template="",b.newTag="",b.addTag=function(a){a&&!b.requirements.$tags.some(function(b){return b===a})&&(b.requirements.$tags.push(a),b.newTag="",m.find("#inputNewTag").val(""))},b.cancelChanges=function(){b.requirements.$dirty&&(a.log.debug("Cancelling changes"),k(function(){Object.merge(b.requirements,b.requirementsFromServer,!0)},20))},b.onDrop=function(c,d,e){a.log.debug("On drop - data: ",c," model: ",d," property: ",e),d[e]||(d[e]=[]),d[e].any(c)||(d[e].push(c),b.requirements.$dirty=!0)},b.$on("hawtio-drop",function(a,c){b.onDrop(c.data,c.model,c.property)}),b.saveChanges=function(){function d(){Core.notification("success","Saved the requirements"),Core.$apply(b)}if(b.requirements.$dirty){var e=angular.toJson(b.requirements);a.log.debug("Saving requirementS: ",e),b.requirements.$dirty=!1,c.execute(Fabric.managerMBean,"requirementsJson",e,onSuccess(d))}},b.onChange=function(){b.requirements.$dirty=!0},Fabric.loadRestApi(c,d,void 0,function(){function a(a){var b=[];["sshConfiguration","dockerConfiguration"].forEach(function(c){a[c]&&a[c].hosts&&a.sshConfiguration.hosts.forEach(function(a){b.add(a.tags)})}),a.profileRequirements.forEach(function(a){["sshScalingRequirements","dockerScalingRequirements"].forEach(function(c){a[c]&&a[c].hostTags&&b.add(a[c].hostTags)})}),a.$tags=b.unique().sort()}var d=i;b.uploader=new g({autoUpload:!0,removeAfterUpload:!0,url:d}),FileUpload.useJolokiaTransport(b.uploader,c,function(a){return{type:"exec",mbean:Fabric.managerMBean,operation:"requirementsJson",arguments:[a]}}),b.uploader.onBeforeUploadItem=function(a){Core.notification("info","Uploading "+a)},b.uploader.onSuccessItem=function(a){b.requirements=angular.fromJson(a.json)},b.uploader.onCompleteAll=function(){Core.notification("success","Imported requirements")},Core.registerForChanges(c,b,{type:"exec",mbean:Fabric.managerMBean,operation:"requirements()"},function(c){b.requirementsFromServer=c.value,b.requirements.$dirty||Object.merge(b.requirements,b.requirementsFromServer,!0);var d=b.requirements.profileRequirements;e.forEach(function(a){var c=a.id;d.some(function(a){return a.profile===c})||(d.push({profile:c,minimumInstances:null,maximumInstances:null,dependentProfiles:[]}),b.requirements.$dirty||(b.requirements.$dirty=!0))}),e.length=0,Core.isBlank(b.template)&&(b.template=f.get("pageTemplate.html")),a(b.requirements),Core.$apply(b)})})}])}(FabricRequirements||(FabricRequirements={}));var Forms;!function(a){function b(a,b){a&&b&&angular.forEach(b.properties,function(b,c){var d=b["default"];d&&!a[c]&&(console.log("===== defaulting value "+d+" into entity["+c+"]"),a[c]=d)})}function c(a,b){if(a&&b){var c=f(a,b);if(c){var d=c.type;d&&(a=d)}}return a}function d(a,b,c){for(var d=f(a,b);d;){var e=Core.pathGet(d,["extends","type"]);if(!e)return!1;if(c===e)return!0;d=f(e,b)}return!1}function e(a){return a?a.replace(/-/g,"_"):a}function f(a,b){if(b){var c=b.definitions;if(c){var d=c[a];if(d){var e=d.fullSchema;if(e)return e;var g=Core.pathGet(d,["extends","type"]);if(g)return e=angular.copy(d),e.properties=e.properties||{},angular.isArray(g)||(g=[g]),angular.forEach(g,function(a){if(angular.isString(a)){var c=f(a,b),d=Core.pathGet(c,["properties"]);d&&angular.forEach(d,function(a,b){e.properties[b]=a})}}),d.fullSchema=e,e}return d}}return null}function g(a,b){var c=null;if(a&&b){if(c=a.items){var d=c.type;if(d){var e=f(d,b);if(e)return e}}var g=a.additionalProperties;if(g&&"#"===g.$ref)return b}return c}function h(a){var b=Core.pathGet(a,"type");return b&&"object"===b}function i(a,b){if(a){var d=c(a.type,b);if(d&&("object"===d||"array"===d))return!0}return!1}function j(a,b,c){return angular.isDefined(b)&&(a=angular.extend(a,b)),angular.extend(a,c)}function k(a,b,c){var d=angular.element('<div class="'+a.controlgroupclass+'"></div>');if(angular.isDefined(b.description)&&d.attr("title",b.description),a.properties&&a.properties[c]){var e=a.properties[c];e&&"control-attributes"in e&&angular.forEach(e["control-attributes"],function(a,b){d.attr(b,a)})}return d}function l(a,b,c){return angular.element('<label class="'+a.labelclass+'">'+c+": </label>")}function m(a){return angular.element('<div class="'+a.controlclass+'"></div>')}function n(a,b,c){var d=Core.pathGet(a.data,["properties",c,"help"]);return angular.element(Core.isBlank(d)?'<span class="help-block"></span>':'<span class="help-block">'+d+"</span>")}a.log=Logger.get("Forms"),a.defaultValues=b,a.resolveTypeNameAlias=c,a.isJsonType=d,a.safeIdentifier=e,a.lookupDefinition=f,a.findArrayItemsSchema=g,a.isObjectType=h,a.isArrayOrNestedObject=i,a.configure=j,a.getControlGroup=k,a.getLabel=l,a.getControlDiv=m,a.getHelpSpan=n}(Forms||(Forms={}));var Forms;!function(a){function b(b,d,e,f,g,h,i,j,k){function l(a,b){var c=d[b];c&&angular.forEach(c,function(b,c){angular.isString(b)&&a.attr(c,b)})}function m(){l(n,"input-attributes"),angular.forEach(d,function(a,b){if(angular.isString(a)&&b.indexOf("$")<0&&"type"!==b){var c=Core.escapeHtml(a);n.attr(b,c)}})}void 0===j&&(j=!0),void 0===k&&(k=!1);var n=null,o=null,p={valueConverter:null},q=a.safeIdentifier(g),r=c(b,d,e,f,p,q);if(r){n=angular.element(r),m(),g=q;var s=f.model||Core.pathGet(d,["input-attributes","ng-model"]);s||(s=f.getEntity()+"."+g),n.attr("ng-model",s),n.attr("name",g);try{f.isReadOnly()&&n.attr("readonly","true")}catch(t){}var u=d.tooltip||d.label;u&&n.attr("title",u);var v=k||d.disableHumanizeLabel,w=g;if(h||d.ignorePrefixInLabel){var x=g.lastIndexOf(".");x>0&&(w=g.substring(x+1))}if("hidden"!==n.attr("type")&&j){o=this.getControlGroup(f,f,g);var y=d.title||d.label||(v?w:Core.humanizeValue(w)),z=a.getLabel(f,f,y);u&&z.attr("title",u),o.append(z),l(z,"label-attributes");var A=a.getControlDiv(f);A.append(n),A.append(a.getHelpSpan(f,f,g)),o.append(A),l(A,"control-attributes"),l(o,"control-group-attributes");var B=f.scope;if(B&&s){var C=function(a){B.$emit("hawtio.form.modelChange",s,a)},D=C,E=p.valueConverter;E&&(D=function(){E(B,s);var a=Core.pathGet(B,s);C(a)}),B.$watch(s,D)}}}else{n=angular.element("<div></div>"),n.attr(a.normalize(b,d,e),""),m(),n.attr("entity",f.getEntity()),n.attr("mode",f.getMode());var F=f.schemaName;F&&n.attr("schema",F),i&&n.attr("data",i),(h||d.ignorePrefixInLabel)&&n.attr("ignore-prefix-in-label",!0),(k||d.disableHumanizeLabel)&&n.attr("disable-humanize-label",!0),n.attr("name",g)}var G=d.label;return G&&n.attr("title",G),d.required&&("input"===n[0].localName&&"checkbox"===n.attr("type")||n.attr("required","true")),o?o:n}function c(b,c,d,e,f,g){function h(a,b){var d=Core.pathGet(a,b);if(!d){var e=c["default"];e&&(d=e,Core.pathSet(a,b,d))}return d}var i=a.resolveTypeNameAlias(b,d);if(!i)return'<input type="text"/>';var j=Core.pathGet(c,["formTemplate"]);if(j)return null;var k=Core.pathGet(c,["input-element"]);if(k)return"<"+k+"></"+k+">";var l=Core.pathGet(c,["enum"]);if(l){var m=!0,n=null,o="";if(l){var p=e.scope,q=e.data;if(q&&p){var r=p[e.schemaName],s=angular.isString(q)?p[q]:q,t=g.split("."),c=null;angular.forEach(t,function(b){c=Core.pathGet(s,["properties",b]);var d=Core.pathGet(c,["type"]),e=a.lookupDefinition(d,r);e&&(s=e)});var u=Core.pathGet(c,["enum"]);n="$values_"+g.replace(/\./g,"_"),p[n]=u}}n&&(o+=' ng-options="value for value in '+n+'"');var v=m?"":'<option value=""></option>';return"<select"+o+">"+v+"</select>"}if(angular.isArray(i))return null;if(!angular.isString(i))return null;var w=null,x=c["default"];switch(x&&(w=function(a,b){var d=Core.pathGet(a,b);d||Core.pathSet(a,b,c["default"])},f.valueConverter=w),i.toLowerCase()){case"int":case"integer":case"long":case"short":case"java.lang.integer":case"java.lang.long":case"float":case"double":case"java.lang.float":case"java.lang.double":return f.valueConverter=function(a,b){var c=h(a,b);if(c&&angular.isString(c)){var d=Number(c);Core.pathSet(a,b,d)}},'<input type="number"/>';case"array":case"java.lang.array":case"java.lang.iterable":case"java.util.list":case"java.util.collection":case"java.util.iterator":case"java.util.set":case"object[]":return null;case"boolean":case"bool":case"java.lang.boolean":return f.valueConverter=function(a,b){var c=h(a,b);c&&"true"===c&&Core.pathSet(a,b,!0)},'<input type="checkbox"/>';case"password":return'<input type="password"/>';case"hidden":return'<input type="hidden"/>';case"map":return null;default:return'<input type="text"/>'}}function d(a){switch(a.toLowerCase()){case"int":case"integer":case"long":case"short":case"java.lang.integer":case"java.lang.long":case"float":case"double":case"java.lang.float":case"java.lang.double":return"number";case"array":case"java.lang.array":case"java.lang.iterable":case"java.util.list":case"java.util.collection":case"java.util.iterator":case"java.util.set":case"object[]":return"text";case"boolean":case"bool":case"java.lang.boolean":return"checkbox";case"password":return"password";case"hidden":return"hidden";default:return"text"}}function e(b,c,d){if(b=a.resolveTypeNameAlias(b,d),!b)return"hawtio-form-text";var e=Core.pathGet(c,["formTemplate"]);if(e)return"hawtio-form-custom";var f=Core.pathGet(c,["enum"]);if(f)return"hawtio-form-select";if(angular.isArray(b))return null;if(!angular.isString(b)){try{console.log("Unsupported JSON schema type value "+JSON.stringify(b))}catch(g){console.log("Unsupported JSON schema type value "+b)}return null}switch(b.toLowerCase()){case"int":case"integer":case"long":case"short":case"java.lang.integer":case"java.lang.long":case"float":case"double":case"java.lang.float":case"java.lang.double":return"hawtio-form-number";case"array":case"java.lang.array":case"java.lang.iterable":case"java.util.list":case"java.util.collection":case"java.util.iterator":case"java.util.set":case"object[]":var h=c.items;if(!h)return"hawtio-form-string-array";var i=h.type;return i&&"string"===i?"hawtio-form-string-array":(a.log.debug("Returning hawtio-form-array for : ",c),"hawtio-form-array");case"boolean":case"bool":case"java.lang.boolean":return"hawtio-form-checkbox";case"password":return"hawtio-form-password";case"hidden":return"hawtio-form-hidden";case"map":return"hawtio-form-map";default:return"hawtio-form-text"}}a.createWidget=b,a.createStandardWidgetMarkup=c,a.mapType=d,a.normalize=e}(Forms||(Forms={}));var Forms;!function(a){var b=function(){function a(){this.name="form",this.method="post",this.entity="entity",this.schemaName="schema",this.mode="edit",this.data={},this.json=void 0,this.scope=null,this.scopeName=null,this.properties=[],this.action="",this.formclass="hawtio-form form-horizontal no-bottom-margin",this.controlgroupclass="control-group",this.controlclass="controls",this.labelclass="control-label",this.showtypes="false",this.onsubmit="onSubmit"}return a.prototype.getMode=function(){return this.mode||"edit"},a.prototype.getEntity=function(){return this.entity||"entity"},a.prototype.isReadOnly=function(){return"view"===this.getMode()},a}();a.SimpleFormConfig=b;var c=function(){function c(a,b){var c=this;this.workspace=a,this.$compile=b,this.restrict="A",this.scope=!0,this.replace=!0,this.transclude=!0,this.attributeName="simpleForm",this.link=function(a,b,d){return c.doLink(a,b,d)}}return c.prototype.isReadOnly=function(){return!1},c.prototype.doLink=function(c,d,e){function f(a){a&&g(a)}function g(b){l=a.configure(l,b,e),l.schemaName=m,l.scopeName=t,l.scope=c;var f=l.getEntity();l.data=angular.isDefined(l.json)?$.parseJSON(l.json):b;var g=v.createForm(l);if(r=g.find("fieldset"),s=l.data,q={elements:{},locations:{},use:!1},s&&angular.isDefined(s.tabs)&&(q.use=!0,q.div=$('<div class="tabbable hawtio-form-tabs"></div>'),angular.forEach(s.tabs,function(a,b){q.elements[b]=$('<div class="tab-pane" title="'+b+'"></div>'),q.div.append(q.elements[b]),a.forEach(function(a){q.locations[a]=b})}),q.locations["*"]||(q.locations["*"]=Object.extended(s.tabs).keys()[0])),q.use||r.append('<div class="spacer"></div>'),s)if(q.use){var h={};angular.forEach(s.properties,function(a,b){var c=i(b),d=h[c];d||(d=[],h[c]=d),d.push({id:b,property:a})}),angular.forEach(s.tabs,function(a){a.forEach(function(a){var b=h[a];b&&angular.forEach(b,function(a){var b=a.id,c=a.property;b&&c&&j(b,c)})})})}else angular.forEach(s.properties,function(a,b){j(b,a)});if(q.use){var n=q.div,w=Object.keys(q.elements).length;2>w?angular.forEach(n.children().children(),function(a){r.append(a)}):r.append(n)}var x=function(a,b){return angular.isDefined(a[b])&&angular.isFunction(a[b])?a:angular.isDefined(a.$parent)&&null!==a.$parent?x(a.$parent,b):null},y=l.onsubmit.replace("(","").replace(")",""),z=k(x(c,y),y);null===z&&(z=function(b,c){a.log.info("No submit handler defined for form:",c.get(0).name)}),angular.isDefined(z)&&g.submit(function(){if(a.log.debug("child scope: ",p),a.log.debug("form name: ",l),p[l.name].$invalid)return!1;var b=c[f];return z(b,g),!1}),r.append('<input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;">');var A=g.find("*[autofocus]");if((!A||!A.length)&&u){console.log("No autofocus element, so lets add one!");var B=u.find("input").first()||u.find("select").first();B&&B.attr("autofocus","true")}o&&$(o).remove(),p&&p.$destroy(),p=c.$new(!1),o=v.$compile(g)(p);var C="forms",D=c[C];D||(D={},c[C]=D);var E=l.name;if(E){var F=p[E];F&&(D[E]=F);var G=E+="$scope";D[G]=p}$(d).append(o)}function h(a){var b=q.locations[a];return b||angular.forEach(q.locations,function(c,d){!b&&"*"!==d&&a.match(d)&&(b=c)}),b||(b=q.locations["*"]),b}function i(a){var b=null;return angular.forEach(s.tabs,function(c){c.forEach(function(c){!b&&"*"!==c&&a.match(c)&&(b=c)})}),b||(b="*"),b}function j(b,c,d){void 0===d&&(d=c.ignorePrefixInLabel);var e=c.type;"java.lang.String"===e&&(e="string");var f=a.lookupDefinition(e,s);f||(f=a.lookupDefinition(e,n));var g=s?s.disableHumanizeLabel:!1;if(!c.hidden){var i=null;if(!f&&"object"===e&&c.properties?i=c.properties:f&&a.isObjectType(f)&&(i=f.properties),i)angular.forEach(i,function(a,d){var e=b+"."+d;j(e,a,c.ignorePrefixInLabel)});else{var k=!0,m=a.createWidget(e,c,s,l,b,d,t,k,g);if(q.use){var o=h(b);q.elements[o].append(m)}else r.append(m);u||(u=m)}}}function k(a,b){return null!==a?a[b]:null}var l=new b,m=e.schema,n=m?c[m]:null,o=null,p=null,q=null,r=null,s=null,t=e[this.attributeName]||e.data,u=null,v=this;c.$watch(t,f)},c.prototype.createForm=function(a){var b=$('<form class="'+a.formclass+'" novalidate><fieldset></fieldset></form>');return b.attr("name",a.name),b.attr("action",a.action),b.attr("method",a.method),b.find("fieldset").append(this.getLegend(a)),b},c.prototype.getLegend=function(a){var b=Core.pathGet(a,"data.description");return b?"<legend>"+b+"</legend>":""},c}();a.SimpleForm=c}(Forms||(Forms={}));var Forms;!function(a){var b=function(){function a(){this.name="form",this.method="post",this.entity="entity",this.tableConfig="tableConfig",this.mode="edit",this.data={},this.json=void 0,this.properties=[],this.action="",this.tableclass="table table-striped inputTable",this.controlgroupclass="control-group",this.controlclass="controls pull-right",this.labelclass="control-label",this.showtypes="true",this.removeicon="icon-remove",this.editicon="icon-edit",this.addicon="icon-plus",this.removetext="Remove",this.edittext="Edit",this.addtext="Add",this.onadd="onadd",this.onedit="onedit",this.onremove="onRemove",this.primaryKeyProperty=void 0}return a.prototype.getTableConfig=function(){return this.tableConfig||"tableConfig"},a}();a.InputTableConfig=b;var c=function(){function c(a,b){var c=this;this.workspace=a,this.$compile=b,this.restrict="A",this.scope=!0,this.replace=!0,this.transclude=!0,this.attributeName="hawtioInputTable",this.link=function(a,b,d){return c.doLink(a,b,d)}}return c.prototype.doLink=function(c,d,e){function f(a){var b=Core.pathGet(c,o);b||(b=[]),!angular.isArray(b)&&b&&(b=[b]),b=a(b),Core.pathSet(c,o,b),c.$emit("hawtio.datatable."+o,b),Core.$apply(c)}function g(a){return angular.forEach(c.config.selectedItems,function(b){var c=b._id;if(angular.isArray(a))a=a.remove(function(a){return Object.equal(a,b)}),delete b._id,a=a.remove(function(a){return Object.equal(a,b)});else if(delete b._id,c)delete a[c];else{var d=!1;angular.forEach(a,function(c,e){!d&&Object.equal(c,b)&&(console.log("Found row to delete! "+e),delete a[e],d=!0)}),d||console.log("Could not find "+JSON.stringify(b)+" in "+JSON.stringify(a))}}),a}function h(a,b){return null!==a?a[b]:null}var i=this,j=new b,k=e[this.attributeName],l=Core.pathGet(c,k);j=a.configure(j,l,e);var m=e.entity||j.data||"entity",n=e.property||"arrayData",o=m+"."+n,p=j.primaryKeyProperty,q=j.title||m;j.data=angular.isDefined(j.json)?$.parseJSON(j.json):c[j.data];var r=$("<div></div>"),l=Core.pathGet(c,k);l?(l.selectedItems=[],c.config=l):console.log("No table configuration for table "+q);var s=this.createTable(j,k),t=this.getControlGroup(j,{},""),u=this.getControlDiv(j);u.addClass("btn-group"),t.append(u);var v=null,w=null,x=null,y=null,z=null,A=e.readonly;if(!A){var B=null,C=e.data,D=C?Core.pathGet(c,C):null,E=e.schema||C,F=E?Core.pathGet(c,E):null;n&&D&&(B=Core.pathGet(D,["properties",n])),v=this.getAddButton(j),c.addDialogOptions={backdropFade:!0,dialogFade:!0},c.showAddDialog=!1,c.openAddDialog=function(){c.addEntity={},c.addFormConfig=a.findArrayItemsSchema(B,F);var b="addFormConfig";if(!y){var d="Add "+q;y=$('<div modal="showAddDialog" close="closeAddDialog()" options="addDialogOptions">\n<div class="modal-header"><h4>'+d+'</h4></div>\n<div class="modal-body"><div simple-form="addFormConfig" entity="addEntity" data="'+b+'" schema="'+E+'"></div></div>\n<div class="modal-footer"><button class="btn btn-primary add" type="button" ng-click="addAndCloseDialog()">Add</button><button class="btn btn-warning cancel" type="button" ng-click="closeAddDialog()">Cancel</button></div></div>'),r.append(y),i.$compile(y)(c)}c.showAddDialog=!0,Core.$apply(c)},c.closeAddDialog=function(){c.showAddDialog=!1,c.addEntity={}},c.addAndCloseDialog=function(){var b=c.addEntity;a.log.info("About to add the new entity "+JSON.stringify(b)),b&&f(function(a){return p&&a.remove(function(a){return a[p]===b[p]}),a.push(b),a}),c.closeAddDialog()},w=this.getEditButton(j),c.editDialogOptions={backdropFade:!0,dialogFade:!0},c.showEditDialog=!1,c.openEditDialog=function(){var b=c.config.selectedItems,d={};if(b&&b.length&&angular.copy(b[0],d),c.editEntity=d,c.editFormConfig=a.findArrayItemsSchema(B,F),!z){var e="Edit "+q;z=$('<div modal="showEditDialog" close="closeEditDialog()" options="editDialogOptions">\n<div class="modal-header"><h4>'+e+'</h4></div>\n<div class="modal-body"><div simple-form="editFormConfig" entity="editEntity"></div></div>\n<div class="modal-footer"><button class="btn btn-primary save" type="button" ng-click="editAndCloseDialog()">Save</button><button class="btn btn-warning cancel" type="button" ng-click="closeEditDialog()">Cancel</button></div></div>'),r.append(z),i.$compile(z)(c)}c.showEditDialog=!0,Core.$apply(c)},c.closeEditDialog=function(){c.showEditDialog=!1,c.editEntity={}},c.editAndCloseDialog=function(){var a=c.editEntity;console.log("About to edit the new entity "+JSON.stringify(a)),a&&f(function(b){return b=g(b),b.push(a),b}),c.closeEditDialog()},x=this.getRemoveButton(j)}var G=function(a,b){return angular.isDefined(a[b])&&angular.isFunction(a[b])?a:angular.isDefined(a.$parent)&&null!==a.$parent?G(a.$parent,b):null},H=j.onremove.replace("(","").replace(")",""),I=j.onedit.replace("(","").replace(")",""),J=j.onadd.replace("(","").replace(")",""),K=h(G(c,H),H),L=h(G(c,I),I),M=h(G(c,J),J);null===K&&(K=function(){f(function(a){return g(a)})}),null===L&&(L=function(){c.openEditDialog()}),null===M&&(M=function(){c.openAddDialog()}),v&&(v.click(function(){return M(),!1}),u.append(v)),w&&(w.click(function(){return L(),!1}),u.append(w)),x&&(x.click(function(){return K(),!1}),u.append(x)),$(r).append(t),$(r).append(s),$(d).append(r),this.$compile(r)(c)},c.prototype.getAddButton=function(a){return $('<button type="button" class="btn add"><i class="'+a.addicon+'"></i> '+a.addtext+"</button>")},c.prototype.getEditButton=function(a){return $('<button type="button" class="btn edit" ng-disabled="!config.selectedItems.length"><i class="'+a.editicon+'"></i> '+a.edittext+"</button>")},c.prototype.getRemoveButton=function(a){return $('<button type="remove" class="btn remove" ng-disabled="!config.selectedItems.length"><i class="'+a.removeicon+'"></i> '+a.removetext+"</button>")},c.prototype.createTable=function(a,b){var c="hawtio-simple-table",d=$('<table class="'+a.tableclass+'" '+c+'="'+b+'"></table>');return d},c.prototype.getLegend=function(a){var b=Core.pathGet(a,"data.description");return b?"<legend>"+a.data.description+"</legend>":""},c.prototype.getControlGroup=function(a,b){var c=$('<div class="'+a.controlgroupclass+'"></div>');return angular.isDefined(b.description)&&c.attr("title",b.description),c},c.prototype.getControlDiv=function(a){return $('<div class="'+a.controlclass+'"></div>')},c.prototype.getHelpSpan=function(a,b){var c=$('<span class="help-block"></span>');return angular.isDefined(b.type)&&"false"!==a.showtypes&&c.append("Type: "+b.type),c},c}();a.InputTable=c}(Forms||(Forms={}));var Forms;!function(a){var b=function(){function a(){this.name="input",this.type="",this.description="",this._default="",this.scope=null,this.mode="edit",this.schemaName="schema",this.controlgroupclass="control-group",this.controlclass="controls",this.labelclass="control-label",this.showtypes="false",this.formtemplate=null,this.entity="entity",this.model=void 0}return a.prototype.getEntity=function(){return this.entity||"entity"},a.prototype.getMode=function(){return this.mode||"edit"},a.prototype.isReadOnly=function(){return"view"===this.getMode()},a}();a.InputBaseConfig=b;var c=function(){function c(a,b){var c=this;this.workspace=a,this.$compile=b,this.restrict="A",this.scope=!0,this.replace=!1,this.transclude=!1,this.attributeName="",this.link=function(a,b,d){return c.doLink(a,b,d)}}return c.prototype.doLink=function(c,d,e){function f(a){c.$emit("hawtio.form.modelChange",j,a)}var g=new b;g=a.configure(g,null,e),g.scope=c,g.schemaName=e.schema||"schema";var h=a.safeIdentifier(g.name),i=this.getControlGroup(g,g,h),j=g.model;angular.isDefined(j)||(j=g.getEntity()+"."+h);var k=h;if("true"===e.ignorePrefixInLabel){var l=h.lastIndexOf(".");l>0&&(k=h.substring(l+1))}var m="true"===e.disableHumanizeLabel,n=e.title||(m?k:Core.humanizeValue(k));i.append(a.getLabel(g,g,n));var o=a.getControlDiv(g);o.append(this.getInput(g,g,h,j)),o.append(a.getHelpSpan(g,g,h)),i.append(o),$(d).append(this.$compile(i)(c)),c&&j&&c.$watch(j,f)},c.prototype.getControlGroup=function(b,c,d){return a.getControlGroup(b,c,d)
},c.prototype.getInput=function(a,b,c,d){var e=$('<span class="form-data"></span>');return d&&(e.attr("ng-model",d),e.append("{{"+d+"}}")),e},c}();a.InputBase=c;var d=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c,this.type="text"}return __extends(b,a),b.prototype.getInput=function(b,c,d,e){if(b.isReadOnly())return a.prototype.getInput.call(this,b,c,d,e);var f=$('<input type="'+this.type+'">');f.attr("name",d),e&&f.attr("ng-model",e),b.isReadOnly()&&f.attr("readonly","true");var g=b.$attr.required;return g&&"false"!==g&&f.attr("required","true"),f},b}(c);a.TextInput=d;var e=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c,this.type="hidden"}return __extends(b,a),b.prototype.getControlGroup=function(b,c,d){var e=a.prototype.getControlGroup.call(this,b,c,d);return e.css({display:"none"}),e},b.prototype.getInput=function(b,c,d,e){var f=a.prototype.getInput.call(this,b,c,d,e);return f.attr("readonly","true"),f},b}(d);a.HiddenText=e;var f=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c,this.type="password"}return __extends(b,a),b}(d);a.PasswordInput=f;var g=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c}return __extends(b,a),b.prototype.getInput=function(a,b,c,d){var e=b.formtemplate;e=Core.unescapeHtml(e);var f=$(e);return f.attr("name")||f.attr("name",c),d&&f.attr("ng-model",d),a.isReadOnly()&&f.attr("readonly","true"),f},b}(c);a.CustomInput=g;var h=function(b){function c(a,c){b.call(this,a,c),this.workspace=a,this.$compile=c}return __extends(c,b),c.prototype.getInput=function(c,d,e,f){if(c.isReadOnly())return b.prototype.getInput.call(this,c,d,e,f);var g=!0,h=g?"":'<option value=""></option>',i=$("<select>"+h+"</select>");i.attr("name",e);var j=c.scope,k=c.data;if(k&&j){var l=j[c.schemaName],m=j[k],n=e.split("."),o=null;angular.forEach(n,function(b){o=Core.pathGet(m,["properties",b]);var c=Core.pathGet(o,["type"]),d=a.lookupDefinition(c,l);d&&(m=d)});var p=Core.pathGet(o,["enum"]);j.$selectValues=p,i.attr("ng-options","value for value in $selectValues")}return f&&i.attr("ng-model",f),c.isReadOnly()&&i.attr("readonly","true"),i},c}(c);a.SelectInput=h;var i=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c}return __extends(b,a),b.prototype.getInput=function(b,c,d,e){function f(){var a=Core.pathGet(h,e);if(a&&angular.isString(a)){var b=Number(a);Core.pathSet(h,e,b)}}if(b.isReadOnly())return a.prototype.getInput.call(this,b,c,d,e);var g=$('<input type="number">');g.attr("name",d),angular.isDefined(c.def)&&g.attr("value",c.def),angular.isDefined(c.minimum)&&g.attr("min",c.minimum),angular.isDefined(c.maximum)&&g.attr("max",c.maximum),e&&g.attr("ng-model",e),b.isReadOnly()&&g.attr("readonly","true");var h=b.scope;return h&&(h.$watch(e,f),f()),g},b}(c);a.NumberInput=i;var j=function(b){function c(a,c){b.call(this,a,c),this.workspace=a,this.$compile=c}return __extends(c,b),c.prototype.getInput=function(b,c,d,e){function f(){var a=Core.pathGet(i,e);i[u]=a?Object.keys(a):[],i.$emit("hawtio.form.modelChange",e,a)}var g="_"+d,h="{{"+g+"}}";if(b.isReadOnly())return angular.element('<ul><li ng-repeat="'+g+" in "+e+'">'+h+"</li></ul>");var i=b.scope,j=(c.$attr||{}).schema||"schema",k=i[b.schemaName]||i[j]||{},l=k.properties||{},m=l[d]||{},n=m.items||{},o=n.type,p=!0,q=n.disableHumanizeLabel,r=null,s=Core.pathGet(i,e);s||Core.pathSet(i,e,[]);var t="_form_stringArray"+g+"_",u=t+"keys",v=t+"add",w=t+"remove";f(),i[v]=function(){var a=Core.pathGet(i,e)||[];a.push(""),Core.pathSet(i,e,a),f()},i[w]=function(a){var b=Core.pathGet(i,e)||[];a<b.length&&b.splice(a,1),Core.pathSet(i,e,b),f()};var x=e+"["+g+"]",y={model:x},z=!1,A=a.createWidget(o,n,k,y,x,p,r,z,q);A||(A=angular.element(h));var B=angular.element('<div class="controls" style="white-space: nowrap" ng-repeat="'+g+" in "+u+'"></div>');return B.append(A),B.append(angular.element('<a ng-click="'+w+"("+g+')" title="Remove this value"><i class="red icon-remove"></i></a>')),B.after(angular.element('<a ng-click="'+v+'()" title="Add a new value"><i class="icon-plus"></i></a>')),B},c}(c);a.StringArrayInput=j;var k=function(c){function d(a,b){c.call(this,a,b),this.workspace=a,this.$compile=b}return __extends(d,c),d.prototype.doLink=function(c,d,e){function f(a,b,c){if(c){var d=c.description;return d||angular.forEach(c,function(a){a&&!d&&(d=a)}),d}return null}var g=new b;g=a.configure(g,null,e);var h=g.name,i=e.data||"",j=e.entity||g.entity,k=e.schema||g.schemaName,l=["properties",h,"inputTable"],m=null;if(Core.pathGet(c,l),!m){var n=l.join("."),o="true"===e.disableHumanizeLabel,p=o?h:Core.humanizeValue(h);m={formConfig:g,title:p,data:g.entity+"."+h,displayFooter:!1,showFilter:!1,columnDefs:[{field:"_id",displayName:p,render:f}]},Core.pathSet(c,l,m)}var q=$('<div hawtio-input-table="'+n+'" data="'+i+'" property="'+h+'" entity="'+j+'" schema="'+k+'"></div>');g.isReadOnly()&&q.attr("readonly","true"),$(d).append(this.$compile(q)(c))},d}(c);a.ArrayInput=k;var l=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c}return __extends(b,a),b.prototype.getInput=function(a,b,c,d){function e(){var a=Core.pathGet(g,d);a&&"true"===a&&Core.pathSet(g,d,!0)}var f=$('<input class="hawtio-checkbox" type="checkbox">');f.attr("name",c),a.isReadOnly()&&f.attr("disabled","true"),d&&f.attr("ng-model",d),a.isReadOnly()&&f.attr("readonly","true");var g=a.scope;return g&&(g.$watch(d,e),e()),f},b}(c);a.BooleanInput=l}(Forms||(Forms={}));var Forms;!function(a){var b=function(){function a(){var a=this;this.restrict="A",this.scope=!0,this.link=function(b,c,d){return a.doLink(b,c,d)}}return a.prototype.doLink=function(a,b,c){var d=$(b),e="form[name="+c.hawtioSubmit+"]";d.click(function(){return $(e).submit(),!1})},a}();a.SubmitForm=b}(Forms||(Forms={}));var Forms;!function(a){var b=function(){function a(){var a=this;this.restrict="A",this.scope=!0,this.link=function(b,c,d){return a.doLink(b,c,d)}}return a.prototype.doLink=function(a,b,c){var d=$(b),e="form[name="+c.hawtioReset+"]";d.click(function(){for(var a=$(e),b=0;b<a.length;b++)a[b].reset();return!1})},a}();a.ResetForm=b}(Forms||(Forms={}));var Forms;!function(a){a.pluginName="hawtio-forms",a.templateUrl="app/forms/html/",a._module=angular.module(a.pluginName,["bootstrap","ngResource","hawtioCore","datatable","ui.bootstrap","ui.bootstrap.dialog","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/forms/test",{templateUrl:"app/forms/html/test.html"}).when("/forms/testTable",{templateUrl:"app/forms/html/testTable.html"})}]),a._module.directive("simpleForm",["workspace","$compile",function(b,c){return new a.SimpleForm(b,c)}]),a._module.directive("hawtioForm",["workspace","$compile",function(b,c){return new a.SimpleForm(b,c)}]),a._module.directive("hawtioInputTable",["workspace","$compile",function(b,c){return new a.InputTable(b,c)}]),a._module.directive("hawtioFormText",["workspace","$compile",function(b,c){return new a.TextInput(b,c)}]),a._module.directive("hawtioFormPassword",["workspace","$compile",function(b,c){return new a.PasswordInput(b,c)}]),a._module.directive("hawtioFormHidden",["workspace","$compile",function(b,c){return new a.HiddenText(b,c)}]),a._module.directive("hawtioFormNumber",["workspace","$compile",function(b,c){return new a.NumberInput(b,c)}]),a._module.directive("hawtioFormSelect",["workspace","$compile",function(b,c){return new a.SelectInput(b,c)}]),a._module.directive("hawtioFormArray",["workspace","$compile",function(b,c){return new a.ArrayInput(b,c)}]),a._module.directive("hawtioFormStringArray",["workspace","$compile",function(b,c){return new a.StringArrayInput(b,c)}]),a._module.directive("hawtioFormCheckbox",["workspace","$compile",function(b,c){return new a.BooleanInput(b,c)}]),a._module.directive("hawtioFormCustom",["workspace","$compile",function(b,c){return new a.CustomInput(b,c)}]),a._module.directive("hawtioSubmit",function(){return new a.SubmitForm}),a._module.directive("hawtioReset",function(){return new a.ResetForm}),a._module.run(["helpRegistry",function(a){a.addDevDoc("forms","app/forms/doc/developer.md")}]),hawtioPluginLoader.addModule(a.pluginName)}(Forms||(Forms={}));var Forms;!function(a){function b(){return{type:void 0}}function c(){return{}}function d(){return{properties:{}}}function e(){return{rowSchema:{},rows:[]}}a.createFormElement=b,a.createFormTabs=c,a.createFormConfiguration=d,a.createFormGridConfiguration=e}(Forms||(Forms={}));var Forms;!function(a){a._module.directive("hawtioFormGrid",["$templateCache","$interpolate","$compile",function(b,c,d){return{restrict:"A",replace:!0,scope:{configuration:"=hawtioFormGrid"},templateUrl:a.templateUrl+"formGrid.html",link:function(e,f){function g(){return[]}function h(){var a=g();if(angular.isDefined(e.configuration.rowSchema.columnOrder)){var b=e.configuration.rowSchema.columnOrder;b.forEach(function(b){var c=Core.pathGet(e.configuration.rowSchema.properties,[b]);Core.pathSet(c,["key"],b),a.push(c)})}return angular.forEach(e.configuration.rowSchema.properties,function(b,c){a.some(function(a){return a.key===c})||(b.key=c,a.push(b))}),a}function i(){var a=f.find("thead");return a.empty(),a.append(b.get("rowTemplate.html")).find("tr")}function j(a){var d=i();a.forEach(function(a){var f=a.label||a.key;e.configuration.rowSchema.disableHumanizeLabel||(f=f.titleize());var g=a.headerTemplate||b.get("headerCellTemplate.html"),h=c(g);d.append(h({label:f}))}),d.append(b.get("emptyHeaderCellTemplate.html"))}function k(){var a=f.find("tbody");return a.empty(),a}function l(){return angular.element(b.get("rowTemplate.html"))}function m(d,f){var g=e.configuration.rows;g.forEach(function(e,g){var h=l();d.forEach(function(d){var e=a.mapType(d.type);if("number"===e&&"input-attributes"in d){var f=d.template||b.get("cellNumberTemplate.html"),i=c(f);h.append(i({row:"configuration.rows["+g+"]",type:e,key:d.key,min:d["input-attributes"].min?d["input-attributes"].min:"",max:d["input-attributes"].max?d["input-attributes"].max:""}))}else{var f=d.template||b.get("cellTemplate.html"),i=c(f);h.append(i({row:"configuration.rows["+g+"]",type:e,key:d.key}))}});var i=c(b.get("deleteRowTemplate.html"));h.append(i({index:g})),f.append(h)})}e.removeThing=function(a){e.configuration.rows.removeAt(a)},e.addThing=function(){e.configuration.rows.push(e.configuration.onAdd())},e.getHeading=function(){return Core.isBlank(e.configuration.rowName)?"items".titleize():e.configuration.rowName.pluralize().titleize()},e.$watch("configuration.noDataTemplate",function(){var a=e.configuration.noDataTemplate||b.get("heroUnitTemplate.html");f.find(".nodata").html(d(a)(e))}),e.$watch("configuration.rowSchema",function(a,b){if(a!==b){var c=h();j(c)}},!0),e.$watchCollection("configuration.rows",function(a,b){if(a!==b){var c=k(),f=h(),g=angular.element("<div></div>");m(f,g),c.append(d(g.children())(e))}})}}}])}(Forms||(Forms={}));var FabricRequirements;!function(a){a.DockerConfigController=a.controller("DockerConfigController",["$scope","jolokia","$templateCache",function(b,c,d){b.gridConfig=Forms.createFormGridConfiguration(),b.tableTemplate="",b.requirements.dockerConfiguration||(b.requirements.dockerConfiguration=Fabric.createDockerConfiguration()),b.requirements.dockerConfiguration.hosts||(b.requirements.dockerConfiguration.hosts=[]),b.$watch("requirements.dockerConfiguration.hosts",function(a,c){a!==c&&(b.requirements.$dirty=!0)},!0),Fabric.getDtoSchema(void 0,"io.fabric8.api.DockerConfiguration",c,function(e){a.log.debug("Received dockerConfigurationSchema: ",e),Fabric.getDtoSchema(void 0,"io.fabric8.api.DockerHostConfiguration",c,function(c){a.log.debug("Received dockerHostConfigurationSchema: ",c),["password","passPhrase"].forEach(function(a){Core.pathSet(c,["properties",a,"type"],"password")}),["maximumContainerCount","port"].forEach(function(a){Core.pathSet(c,["properties",a,"type"],"integer"),Core.pathSet(c,["properties",a,"input-attributes","min"],"1")}),b.gridConfig.rowSchema=c,b.gridConfig.rowName="docker host",b.gridConfig.heading=!0,b.gridConfig.noDataTemplate=d.get("noDataTemplate"),b.gridConfig.rowSchema.columnOrder=["hostName","port","username","password","privateKeyFile","passPhrase","path","preferredAddress","tags"],Core.pathSet(b.gridConfig,["rowSchema","properties","tags","template"],d.get("tagCell.html")),b.gridConfig.rows=b.requirements.dockerConfiguration.hosts,b.gridConfig.onAdd=function(){var a=Fabric.createDockerHostConfiguration();return a.hostName="New Host",a},b.tableTemplate=d.get("tableTemplate"),Core.$apply(b)})})}])}(FabricRequirements||(FabricRequirements={}));var Health;!function(a){function b(a){var b=c(a);return b?angular.isArray(b)?b.length>=1:!0:!1}function c(a){if(a){var b=a.mbeanServicesToDomain.Health||{},c=a.selection;if(c){var d=c.domain;if(d){var e=b[d];if(e)return e}}if(b){var f=[];return angular.forEach(b,function(a){angular.isArray(a)?f=f.concat(a):f.push(a)}),f}return null}}function d(a){a.levelSorting={ERROR:0,WARNING:1,INFO:2},a.colorMaps={ERROR:{Health:"#ff0a47",Remaining:"#e92614"},WARNING:{Health:"#33cc00",Remaining:"#f7ee09"},INFO:{Health:"#33cc00",Remaining:"#00cc33"}},a.showKey=function(a){return"colorMap"===a||"data"===a?!1:!0},a.sanitize=function(b){var c={};return Object.extended(b).keys().forEach(function(d){a.showKey(d)&&b[d]&&(c[d]=b[d])}),c},a.getTitle=function(a){return a?a.healthId.endsWith("profileHealth")?"Profile: <strong>"+a.profile+"</strong>":"HealthID: <strong>"+a.healthId+"</strong>":""},a.generateChartData=function(b){var c=0,d=1;if("healthPercent"in b){var e=b.healthPercent;c=e.round(3),d=1-c,d=d.round(3)}b.data={total:1,terms:[{term:"Health",count:c},{term:"Remaining",count:d}]},b.colorMap=a.colorMaps[b.level]}}a.log=Logger.get("Health"),a.healthDomains={"org.apache.activemq":"ActiveMQ","org.apache.camel":"Camel","io.fabric8":"Fabric8"},a.hasHealthMBeans=b,a.getHealthMBeans=c,a.decorate=d}(Health||(Health={}));var FabricRequirements;!function(a){a.ProfileRequirementsController=a.controller("ProfileRequirementsController",["$scope","jolokia","$templateCache",function(b,c,d){Health.decorate(b),b.hideTitle=!0,b.healthTemplate="",Core.registerForChanges(c,b,{type:"exec",mbean:Fabric.healthMBean,operation:"healthList",arguments:[]},function(c){b.fabricHealth=ObjectHelpers.toMap(c.value,"profile",b.generateChartData),b.healthTemplate=Core.isBlank(b.healthTemplate)?d.get("healthTemplate.html"):b.healthTemplate+" ",a.log.debug("Got health mbean list: ",b.fabricHealth),Core.$apply(b)}),b.profileRequirementsString=angular.toJson((b.requirements||{}).profileRequirements||[],!0),b.remove=function(a){var c=b.requirements.profileRequirements.length;b.requirements.profileRequirements.remove(function(b){return b.profile===a.profile});var d=b.requirements.profileRequirements.length;c>d&&(b.requirements.$dirty=!0)}}])}(FabricRequirements||(FabricRequirements={}));var FabricRequirements;!function(a){a.SshConfigController=a.controller("SshConfigController",["$scope","jolokia","$templateCache",function(b,c,d){b.forms={sshConfig:{}},b.tableTemplate="",b.requirements.sshConfiguration||(b.requirements.sshConfiguration=Fabric.createSshConfiguration()),b.requirements.sshConfiguration.hosts||(b.requirements.sshConfiguration.hosts=[]),b.gridConfig=Forms.createFormGridConfiguration(),b.$watch("requirements.sshConfiguration.hosts",function(a,c){a!==c&&(b.requirements.$dirty=!0)},!0),b.$watch("forms.sshConfig.$dirty",function(a){a&&(b.requirements.$dirty=!0)}),b.noop=function(){},Fabric.getDtoSchema(void 0,"io.fabric8.api.SshConfiguration",c,function(e){Fabric.getDtoSchema(void 0,"io.fabric8.api.SshHostConfiguration",c,function(c){["defaultPassword","defaultPassPhrase"].forEach(function(a){Core.pathSet(e,["properties",a,"type"],"password")}),Core.pathSet(e,["properties","defaultPort","type"],"integer"),Core.pathSet(e,["properties","defaultPort","input-attributes","min"],"1"),["password","passPhrase"].forEach(function(a){Core.pathSet(c,["properties",a,"type"],"password")}),["maximumContainerCount","port"].forEach(function(a){Core.pathSet(c,["properties",a,"type"],"integer"),Core.pathSet(c,["properties",a,"input-attributes","min"],"1")}),e.tabs={Defaults:["defaultUsername","defaultPassword","defaultPort","defaultPrivateKeyFile","defaultPassPhrase","defaultPath","*"]},delete e.properties.hosts,b.gridConfig.rowSchema=c,b.gridConfig.rowName="host",b.gridConfig.heading=!0,b.gridConfig.noDataTemplate=d.get("noDataTemplate"),b.gridConfig.rowSchema.columnOrder=["hostName","port","username","password","privateKeyFile","passPhrase","path","preferredAddress","tags"],Core.pathSet(b.gridConfig,["rowSchema","properties","tags","template"],d.get("tagCell.html")),b.gridConfig.rows=b.requirements.sshConfiguration.hosts,b.gridConfig.onAdd=function(){var a=Fabric.createSshHostConfiguration();return a.hostName="New Host",a},a.log.debug("gridConfig: ",b.gridConfig),b.formConfig=e,b.tableTemplate=d.get("tableTemplate"),Core.$apply(b)})})}])}(FabricRequirements||(FabricRequirements={}));var Fabric;!function(a){a._module.controller("Fabric.ActiveProfileController",["$scope","jolokia",function(a){a.addToDashboardLink=function(){var a="#/fabric/activeProfiles",b="Active Profiles",c=angular.toJson({size_y:1,size_x:5});return"#/dashboard/add?tab=dashboard&href="+encodeURIComponent(a)+"&size="+encodeURIComponent(c)+"&title="+encodeURIComponent(b)}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.FabricApisController",["$scope","localStorage","$routeParams","$location","jolokia","workspace","$compile","$templateCache",function(b,c,d,e,f,g){function h(a){var b=a.objectName;if(b){var c=Core.objectNameProperties(b);c&&angular.forEach(c,function(b,c){a[c]||(a[c]=b)})}return null}function i(a,b,c){void 0===c&&(c=""),angular.forEach(b,function(b,d){function e(a){return angular.forEach(["container","objectName"],function(c){var d=b[c];d&&(a+="&"+c+"="+encodeURIComponent(d))}),a}var f=c+"/"+d,g=b.services;if(g&&angular.isArray(g)&&b.id){if(b.path=f,g.length){var j=g[0];b.endpoint=j,h(b),j=Core.useProxyIfExternal(j),b.serviceName=Core.trimQuotes(b.service);var k=b.apidocs,l=b.wadl,m=b.wsdl;k&&(b.apidocsHref=e("/hawtio-swagger/index.html?baseUri="+j+k)),l&&(b.wadlHref=e("#/fabric/api/wadl?wadl="+encodeURIComponent(j+l))),m&&(b.wsdlHref=e("#/fabric/api/wsdl?wsdl="+encodeURIComponent(j+m)))}a.push(b)}else i(a,b,f)})}function j(a){b.initDone=!0;var c=null;if(a&&(c=a.value),b.responseJson!==c){b.apis=[],b.responseJson=c;try{var d=JSON.parse(c);i(b.apis,d),Core.$apply(b)}catch(e){console.log("Failed to parse JSON "+e),console.log("JSON: "+c)}}}if(b.path="apis",a.initScope(b,e,f,g),b.apis=null,b.selectedApis=[],b.initDone=!1,b.versionId=a.getDefaultVersionId(f),b.apiOptions={data:"apis",showFilter:!1,showColumnMenu:!1,filterOptions:{filterText:"",useExternalFilter:!1},selectedItems:b.selectedApis,rowHeight:32,showSelectionCheckbox:!1,selectWithCheckboxOnly:!0,columnDefs:[{field:"serviceName",displayName:"Service",cellTemplate:'<div class="ngCellText">{{row.entity.serviceName}}</div>',width:"***"},{field:"wadlHref",displayName:"APIs",cellTemplate:'<div class="ngCellText"><a ng-show="row.entity.apidocsHref" ng-href="{{row.entity.apidocsHref}}"><i class="icon-puzzle-piece"></i> Swagger</a> <a ng-show="row.entity.wadlHref" ng-href="{{row.entity.wadlHref}}"><i class="icon-puzzle-piece"></i> WADL</a> <a ng-show="row.entity.wsdlHref" ng-href="{{row.entity.wsdlHref}}"><i class="icon-puzzle-piece"></i> WSDL</a></div>',width:"*"},{field:"container",displayName:"Container",cellTemplate:'<div class="ngCellText"><span fabric-container-link="{{row.entity.container}}"/></div>',width:"*"},{field:"version",displayName:"Version",cellTemplate:'<div class="ngCellText">{{row.entity.version}}</div>',width:"*"},{field:"endpoint",displayName:"Location",cellTemplate:'<div class="ngCellText"><a target="endpoint" href="{{row.entity.endpoint}}">{{row.entity.endpoint}}</a></div>',width:"***"}]},a.fabricCreated(g)){var k={type:"exec",mbean:a.managerMBean,operation:"clusterJson",arguments:[b.path]};scopeStoreJolokiaHandle(b,f,f.register(j,k))}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a.AssignProfileController=a._module.controller("Fabric.AssignProfileController",["$scope","jolokia","$location","$routeParams","workspace","ProfileCart",function(b,c,d,e,f,g){b.profileId=e.pid,b.versionId=e.vid,g.length>0&&(b.profileId=g.map(function(a){return a.id}),b.versionId=g.first().versionId),a.initScope(b,d,c,f),b.containerIdFilter="";var h=!0;b.profileId||(a.log.debug("No profile ID specified, redirecting to app view"),h=!1),!b.versionId&&h&&(a.log.debug("No version ID specified, redirecting to app view"),h=!1),h||d.path("/profiles"),b.gotoCreate=function(){var a=b.profileId;angular.isArray(a)&&(a=a.join(",")),d.path("/fabric/containers/createContainer").search({versionId:b.versionId,profileIds:a})},b.$watch("containers",function(a,c){a!==c&&a&&(b.selected=a.filter(function(a){return a.selected}))},!0),b.assignProfiles=function(){var e=[],f=b.profileId;angular.isArray(f)||(f=[f]),b.selected.forEach(function(b){e.push({type:"exec",mbean:a.managerMBean,operation:"addProfilesToContainer",arguments:[b.id,f]})});var h=e.length;c.request(e,onSuccess(function(){h-=1,0===h&&(Core.notification("success","Applied "+b.profileId),SelectionHelpers.clearGroup(g),Core.$apply(b))})),setTimeout(function(){d.path("/fabric/containers"),Core.$apply(b)},30)}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.FabricBrokersController",["$scope","localStorage","$routeParams","$location","jolokia","workspace","$compile","$templateCache",function(b,c,d,e,f,g){function h(a){var c=b.searchFilter;return!c||a&&a.toLowerCase().has(c.toLowerCase())}function i(c){function d(a,b,c,d){var e=a.find(function(a){return a&&a.id===b});if(!e){e=d(),e.id=b,a.push(e);var f=c[b];e.expanded=f?f.expanded:!0,c[b]=e}return e}if(c){var e=angular.toJson(c.value);if(b.responseJson===e)return;b.responseJson=e;var f=c.value;b.groups=[];var g=b.maps;angular.forEach(f,function(a){var c=a.group||"Unknown",e=a.profile||"Unknown",f=a.brokerName||"Unknown",h=a.container,i=a.version||"1.0",j=d(b.groups,c,g.group,function(){return{profiles:[]}}),k=d(j.profiles,e,g.profile,function(){return{group:c,version:i,requirements:{minimumInstances:a.minimumInstances},brokers:[],containers:{}}}),l=(a.networks||[]).join(","),m=d(k.brokers,f,g.broker,function(){return{group:c,profile:e,version:i,containers:[],connectTo:l}});if(h){var n=d(m.containers,h,g.container,function(){return a});n.master&&(n.masterTooltip=" is the master for broker: "+f),k.containers[h]=n}}),angular.forEach(b.groups,function(b){angular.forEach(b.profiles,function(b){angular.forEach(b.brokers,function(a){a.containers=a.containers.sortBy(function(a){return a.id})});var c=Object.values(b.containers).length,d=b.requirements.minimumInstances||0;b.requireStyle=a.containerCountBadgeStyle(d,c),b.count=c,b.requiredToolTip="this profile requires "+Core.maybePlural(d,"container")+" to be running but is currently running "+Core.maybePlural(c,"container"),d>c&&(b.requiredToolTip+=". click here to create more containers")})}),Core.$apply(b)}}a.initScope(b,e,f,g),b.maps={group:{},profile:{},broker:{},container:{}},b.showBroker=function(b){var d=b.version,h=b.profile,i=b.id,j=a.brokerConfigLink(g,f,c,d,h,i);e.path(j)},b.connectToBroker=function(c){a.connectToBroker(b,c)},b.createBroker=function(a,b){var c={};if(a){var d=a.id;d&&(c.group=d)}if(b){var f=b.id;f&&(c.profile=f)}e.url("/fabric/mq/createBroker").search(c)},b.groupMatchesFilter=function(a){return h(a.id)||a.profiles.find(function(a){return b.profileMatchesFilter(a)})},b.profileMatchesFilter=function(a){return h(a.id)||h(a.group)||h(a.version)||a.brokers.find(function(a){return b.brokerMatchesFilter(a)})},b.brokerMatchesFilter=function(a){return h(a.id)||h(a.group)||h(a.version)||a.containers.find(function(a){return b.containerMatchesFilter(a)})},b.containerMatchesFilter=function(a){return h(a.id)||h(a.group)||h(a.profile)||h(a.version)||h(a.brokerName)||a.master&&b.searchFilter&&b.searchFilter.has("master")},a.hasMQManager&&Core.register(f,b,{type:"exec",mbean:a.mqManagerMBean,operation:"loadBrokerStatus()"},onSuccess(i))}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.ClusterController",["$scope","$location","$routeParams","workspace","jolokia","$templateCache",function(b,c,d,e,f,g){function h(){j();var c=a.getZooKeeperFacadeMBean(e);c&&f.execute(c,"read",b.path,onSuccess(i))}function i(a){if(b.children=[],b.stringData=null,b.html=null,a&&(angular.forEach(a.children,function(a){b.children.push({name:a})}),!b.children.length)){var c=a.stringData;if(c){b.stringData=c;var d=Core.tryParseJson(c);b.html=d?Core.valueToHtml(d):c}}Core.$apply(b)}function j(){var a="#/fabric/clusters";b.breadcrumbs=[{href:a+"/",name:"/"}];var c=b.path,d=c?c.split("/"):[];angular.forEach(d,function(c){c&&(c.startsWith("/")||a.endsWith("/")||(a+="/"),a+=c,b.breadcrumbs.push({href:a,name:c}))})}b.path=d.page||"/",b.path.startsWith("/")||(b.path="/"+b.path),b.getIconClass=Wiki.iconClass,b.gridOptions={data:"children",displayFooter:!1,sortInfo:{fields:["name"],directions:["asc"]},columnDefs:[{field:"name",displayName:"Name",cellTemplate:g.get("fileCellTemplate.html"),headerCellTemplate:g.get("fileColumnTemplate.html"),cellFilter:""}]},b.isTabActive=function(a){var b=Core.trimLeading(a,"#"),d=c.path();return d===b},b.childLink=function(a){var d="#/fabric/clusters/"+Core.trimLeading(b.path,"/")+"/",e="",f=a.name;return Core.createHref(c,d+f+e)},b.$watch("workspace.tree",function(){setTimeout(h,50)}),b.$on("$routeChangeSuccess",function(){setTimeout(h,50)}),h()}])}(Fabric||(Fabric={}));var Log;!function(a){function b(a){if(!a)return"";var b=a.entity;return f(b?b:a)}function c(a){return a.treeContainsDomainAndProperties("io.fabric8.insight",{type:"LogQuery"})||a.treeContainsDomainAndProperties("org.fusesource.insight",{type:"LogQuery"})}function d(a){return a.hasDomainAndProperties("io.fabric8.insight",{type:"LogQuery"})||a.hasDomainAndProperties("org.fusesource.insight",{type:"LogQuery"})}function e(a){var b=a.findMBeanWithProperties("io.fabric8.insight",{type:"LogQuery"});return b||(b=a.findMBeanWithProperties("org.fusesource.insight",{type:"LogQuery"})),b?b.objectName:null}function f(b){var c=a.removeQuestion(b.fileName),d=a.removeQuestion(b.className),e=b.properties,f="";if(e&&(f=e["maven.coordinates"]),f&&c){var g="#/source/view/"+f+"/class/"+d+"/"+c,h=b.lineNumber;return h&&(g+="?line="+h),g}return""}function g(a){var b=a.properties;if(!b)return!1;var c="";return b&&(c=b["maven.coordinates"]),angular.isDefined(c)&&""!==c}function h(a){var b=a.lineNumber;return angular.isDefined(b)&&""!==b&&"?"!==b}function i(a){return a&&"?"!==a?a:null}function j(b){if(!b)return"";if(!angular.isArray(b)&&angular.isString(b)&&(b=b.split("\n")),!angular.isArray(b))return"";var c='<ul class="unstyled">\n';return b.each(function(b){c+="<li>"+a.formatStackLine(b)+"</li>\n"}),c+="</ul>\n"}function k(a){var b=m.exec(a);if(b&&b.length>6){var c=b[1],d=b[4],a=b[5],e=b[6];if(c&&d&&e){var f=c,g=c.lastIndexOf(".");g>0&&(f=c.substring(0,g));var h="#/source/view/"+e+"/class/"+f+"/"+d;return angular.isDefined(a)&&(h+="?line="+a),"<div class='stack-line'>  at <a href='"+h+"'>"+c+"</a>(<span class='fileName'>"+d+"</span>:<span class='lineNumber'>"+a+"</span>)[<span class='mavenCoords'>"+e+"</span>]</div>"}}var i=!0;return a&&(a=a.trim(),a.startsWith("at")&&(a="  "+a,i=!1)),i?'<pre class="stack-line bold">'+a+"</pre>":'<pre class="stack-line">'+a+"</pre>"}function l(a){var b=a.logCacheSize;return b?parseInt(b):1e3}a.log=Logger.get("Logs"),a.logSourceHref=b,a.treeContainsLogQueryMBean=c,a.isSelectionLogQueryMBean=d,a.findLogQueryMBean=e,a.logSourceHrefEntity=f,a.hasLogSourceHref=g,a.hasLogSourceLineHref=h,a.removeQuestion=i;var m=/\s*at\s+([\w\.$_]+(\.([\w$_]+))*)\((.*)?:(\d+)\).*\[(.*)\]/;a.formatStackTrace=j,a.formatStackLine=k,a.getLogCacheSize=l}(Log||(Log={}));var Fabric;!function(a){a._module.controller("Fabric.ContainerController",["$scope","$routeParams","$location","jolokia","workspace","userDetails",function(b,c,d,e,f,g){function h(a){var c=a.value;c&&(b.mavenRepoUploadUri=c.MavenRepoUploadURI,b.mavenRepoDownloadUri=c.MavenRepoURI,b.zookeeperUrl=c.ZookeeperUrl)}function i(c){angular.isDefined(b.responseJson)||(b.loading=!1);var d=angular.toJson(c.value);if(b.responseJson!==d){if(b.responseJson=d,b.row=c.value,b.container=b.row,b.row){var e=b.row;e.debugHost=e.publicIp||e.localHostname||e.localIp||e.ip||e.manualIp,angular.isDefined(b.row.provisionException)&&angular.isString(b.row.provisionException)&&(b.row.provisionExceptionArray=b.row.provisionException.lines()),b.services=a.getServiceList(b.row),angular.isDefined(b.resolverWatch)&&angular.isFunction(b.resolverWatch)&&b.resolverWatch(),b.resolverWatch=b.$watch("row.resolver",function(a,c){a!==c&&b.updateContainerProperty("resolver",b.row)}),b.row.jmxDomains&&b.row.jmxDomains.length>0&&(b.row.jmxDomains=b.row.jmxDomains.sortBy(function(a){return a.toString().toLowerCase()})),b.displayJvmOpts()&&b.getJvmOpts()}Core.$apply(b)}}a.initScope(b,d,e,f);var j=["getContainer(java.lang.String)","getContainer(java.lang.String, java.util.List)"];if(b.operation=b.inDashboard?j[1]:j[0],b.mavenRepoUploadUri,b.mavenRepoDownloadUri,b.zookeeperUrl,b.username=g.username,b.password=g.password,b.knownTabs=["Status","Settings","URLs","Provision list"],b.tab=c.tab,b.tab?b.knownTabs.any(function(a){return a==b.tab})||(b.tab="Status"):b.tab="Status",b.$watch("tab",function(a,b){a!==b&&d.search({tab:a}).replace()}),b.loading=!0,b.containerId=c.containerId,b.addToDashboardLink=function(){var a="#/fabric/container/:containerId",d=angular.toJson(c),e=b.containerId;return"#/dashboard/add?tab=dashboard&href="+encodeURIComponent(a)+"&routeParams="+encodeURIComponent(d)+"&title="+encodeURIComponent(e)},b.versionTitle="Migrate to:",b.selectedProfiles=[],b.selectedProfilesDialog=[],b.selectedProfilesString="",b.addProfileDialog=new UI.Dialog,b.deleteProfileDialog=new UI.Dialog,b.deleteContainerDialog=new UI.Dialog,b.$watch("selectedProfiles",function(a,c){a!==c&&(b.selectedProfilesString="",b.selectedProfiles.each(function(a){b.selectedProfilesString+="<li>"+a.id+"</li>\n"}))},!0),b.stop=function(){ContainerHelpers.doStopContainer(b,e,b.containerId)},b.start=function(){ContainerHelpers.doStartContainer(b,e,b.containerId)},b.statusIcon=function(){return a.statusIcon(b.row)},b.getGitURL=function(a){var c=a?a.replace("jolokia","git/fabric"):null;if(null!==c){var d="git clone -b 1.0 "+c;null!==b.username&&null!==b.password&&(d=d.replace("://","://"+b.username+":"+b.password+"@")),c=d}return c},b.getSshURL=function(a){if(!a)return"";var c=a;if(null!==b.username&&null!==b.password){var d=a.split(":");2===d.length&&(c="ssh -p "+d[1]+" "+b.username+"@"+d[0])}return c},b.getJmxURL=function(a){return a},b.getType=function(){return b.row?b.row.ensembleServer?"Fabric Server":b.row.managed?"Managed Container":"Unmanaged Container":""},b.updateContainerProperty=function(c,d){a.setContainerProperty(e,d.id,c,d[c],function(){Core.$apply(b)},function(a){Core.notification("error","Failed to set container property due to : "+a.error),Core.$apply(b)})},b.updateJvmOpts=function(){e.execute(a.managerMBean,"setJvmOpts(java.lang.String,java.lang.String)",b.containerId,b.jvmOpts,onSuccess(function(){Core.$apply(b)},{error:function(b){a.log.debug(b.error)}}))},b.getJvmOpts=function(){e.execute(a.managerMBean,"getJvmOpts(java.lang.String)",b.containerId,onSuccess(function(a){b.jvmOpts=a,Core.$apply(b)},{error:function(b){a.log.debug(b.error)}}))},b.displayJvmOpts=function(){var a=!1;if(b.row)try{var c=b.row.metadata.createOptions.providerType;"karaf"!=b.row.type||"child"!=c&&"ssh"!=c||(a=!0)}catch(d){}return a},b.getClass=function(a){return b.provisionListFilter?a.has(b.provisionListFilter)?"match-filter":"no-match-filter":"no-filter"},b.addProfiles=function(){b.addProfileDialog.close();
var c=b.selectedProfilesDialog.map(function(a){return a.id}),d=Core.maybePlural(c.length,"profile");a.addProfilesToContainer(e,b.row.id,c,function(){Core.notification("success","Successfully added "+d),b.selectedProfilesDialog=[],b.$broadcast("fabricProfileRefresh"),Core.$apply(b)},function(a){Core.notification("error","Failed to add "+d+" due to "+a.error),b.selectedProfilesDialog=[],Core.$apply(b)})},b.getArguments=function(){return b.inSafeMode?[b.containerId,["alive","aliveAndOK","children","childrenIds","debugPort","ensembleServer","geoLocation","httpUrl","id","ip","jmxDomains","jmxUrl","jolokiaUrl","localHostname","localIp","location","manualIp","maximumPort","metadata","minimumPort","parent","parentId","processId","profileIds","profiles","provisionChecksums","provisionException","provisionList","provisionResult","provisionStatus","provisionStatusMap","provisioningComplete","provisioningPending","publicHostname","publicIp","resolver","root","sshUrl","type","version","versionId"]]:b.inDashboard?[b.containerId,["id","versionId","profileIds","provisionResult","jolokiaUrl","alive","jmxDomains","ensembleServer","debugPort"]]:[b.containerId]},b.deleteProfiles=function(){b.deleteProfileDialog.close();var c=b.selectedProfiles.map(function(a){return a.id}),d=Core.maybePlural(c.length,"profile");a.removeProfilesFromContainer(e,b.row.id,c,function(){Core.notification("success","Successfully removed "+d),b.selectedProfiles=[],b.$broadcast("fabricProfileRefresh"),Core.$apply(b)},function(a){Core.notification("error","Failed to remove "+d+" due to "+a.error),b.selectedProfiles=[],Core.$apply(b)})},b.$on("fabricProfileRefresh",function(){setTimeout(function(){e.request({type:"exec",mbean:a.managerMBean,operation:b.operation,arguments:b.getArguments()},{method:"POST",success:function(a){i(a)}})},500)}),angular.isDefined(b.containerId)){Core.register(e,b,{type:"read",mbean:a.managerMBean,attribute:["MavenRepoURI","MavenRepoUploadURI","ZookeeperUrl"]},onSuccess(h));try{e.execute(a.managerMBean,b.operation,b.getArguments())}catch(k){b.inSafeMode=!0,b.operation=j[1]}Core.register(e,b,{type:"exec",mbean:a.managerMBean,operation:b.operation,arguments:b.getArguments()},onSuccess(i))}b.formatStackTrace=function(a){return Log.formatStackTrace(a)}}])}(Fabric||(Fabric={}));var Fabric;!function(a){function b(b,c,d,e,f,g,h){b.containerArgs=["id","alive","parentId","profileIds","versionId","provisionResult","jolokiaUrl","root","jmxDomains","type","metadata","location"],b.profileFields=["id","hidden"],b.containersOp="containers(java.util.List, java.util.List)",b.ensembleContainerIdListOp="EnsembleContainers",b.containers=[],b.activeProfiles=[],b.selectedContainers=[],b.selectedContainerIds=[],b.showSelect=!0,b.requirements=null,b.name="ContainerListDirectiveController",a.initScope(b,f,e,g),SelectionHelpers.decorate(b),b.currentPage=h.get("addProfileRequirements"),b.editRequirements={dialog:new UI.Dialog,excludeProfiles:[],selectedProfiles:[],excludeDependentProfiles:[],selectedDependentProfiles:[],addDependentProfileDialog:new UI.Dialog,versionId:null,addProfileSelectShow:!1,dialogOpen:function(a){var c={profileRequirements:[]};b.requirements&&angular.copy(b.requirements,c);var d=c.profileRequirements;d&&angular.forEach(b.activeProfiles,function(a){var b=a.requirements;b||(b={profile:a.id},a.requirements=b),d.find(function(a){return a.profile===b.profile})||d.push(b)}),!a&&b.activeProfiles.length&&(a=b.activeProfiles[0]),a&&(b.editRequirements.versionId=a.versionId),b.editRequirements.entity=c,b.editRequirements.dialog.open()},addDependentProfileDialogOpen:function(a){b.editRequirements.addDependentProfileDialogProfile=a.profile,b.editRequirements.selectedDependentProfiles.splice(0,b.editRequirements.selectedDependentProfiles.length),b.editRequirements.excludeDependentProfiles=[a.profile].concat(a.dependentProfiles||[]),b.editRequirements.addDependentProfilesToRequirement=a,b.editRequirements.addDependentProfileDialogShow=!0},addDependentProfileDialogHide:function(){b.editRequirements.addDependentProfileDialogShow=!1},addDependentProfileDialogApply:function(){var a=b.editRequirements.addDependentProfilesToRequirement;angular.forEach(b.editRequirements.selectedDependentProfiles,function(b){var c=b.id;c&&a&&(a.dependentProfiles||(a.dependentProfiles=[]),a.dependentProfiles.find(function(a){return a===c})||a.dependentProfiles.push(c))}),b.editRequirements.addDependentProfileDialogHide()},addProfileRequirementOpen:function(){b.editRequirements.selectedProfiles.splice(0,b.editRequirements.selectedProfiles.length),b.editRequirements.excludeProfiles=b.activeProfiles.map(function(a){return a.id}),b.editRequirements.addProfileRequirementShow=!0},addProfileRequirementHide:function(){b.editRequirements.addProfileRequirementShow=!1},addProfileRequirementApply:function(){var a=b.editRequirements.entity,c=a.profileRequirements;c||(c=[],a.profileRequirements=c),angular.forEach(b.editRequirements.selectedProfiles,function(a){var b=a.id;b&&c.push({profile:b})}),b.editRequirements.addProfileRequirementHide()}},b.getFilteredName=function(a){return a.versionId+" / "+a.id},b.filterContainer=function(a){var c=b.containerIdFilter,d=b.getFilteredName(a);if(!Core.matchFilterIgnoreCase(d,c)){var e=a.profileIds;return e?e.any(function(a){return Core.matchFilterIgnoreCase(a,c)}):!1}return!0},b.$watch("editRequirements.addDependentProfileDialogShow",function(a,c){a!==c&&(b.currentPage=h.get(a?"addDependentProfile":"addProfileRequirements"))}),b.$watch("editRequirements.addProfileRequirementShow",function(a,c){a!==c&&(b.currentPage=h.get(a?"addProfileRequirement":"addProfileRequirements"))}),b.updateActiveProfiles=function(){var a=b.activeProfiles;b.activeProfiles=b.getActiveProfiles(),b.activeProfiles.each(function(b){var c=a.find(function(a){return a.id===b.id&&a.versionId===b.versionId});c?(b.selected=c.selected,b.expanded=c.expanded):(b.selected=!1,b.expanded=!1)})},b.updateContainers=function(c){var d=angular.toJson(c);if(b.containersResponse!==d){b.containersResponse=d,c=c.sortBy("id");var e=c.exclude(function(a){return!a.root}),f=c.exclude(function(a){return a.root});if(f.length>0){var g=[];e.each(function(a){g.add(a);var b=f.exclude(function(b){return b.parentId!==a.id});g.add(b)}),c=g}angular.isDefined(b.atVersion)&&(c=c.filter(function(a){return a.versionId===b.atVersion})),angular.isDefined(b.withoutProfile)&&(c=c.filter(function(a){return!a.profileIds.any(function(a){return a===b.withoutProfile})})),c.each(function(c){c.services=a.getServiceList(c),c.icon=a.getTypeIcon(c);var d=b.containers.find(function(a){return a.id===c.id});c.selected=d?d.selected:!1,b.selectedContainerIds.any(c.id)&&(c.selected=!0)}),b.containers=c,b.updateActiveProfiles(),Core.$apply(b)}},b.getActiveProfiles=function(){var c=[];return b.containers.each(function(a){a.profileIds.each(function(b){var d=a.profiles.find(function(a){return a.id===b});if(!d||!Core.parseBooleanValue(d.hidden)){var e=c.find(function(c){return c.versionId===a.versionId&&c.id===b});e?(e.containers=e.containers.include(a.id).unique(),e.count=e.containers.length):c.push({id:b,count:1,versionId:a.versionId,containers:[a.id],selected:!1,requirements:null,requireStyle:null})}})}),b.requirements&&angular.forEach(b.requirements.profileRequirements,function(d){function e(){var b=0;return h&&(b=h.count),a.containerCountBadgeStyle(g,b)}var f=d.profile,g=d.minimumInstances;if(f){var h=c.find(function(a){return a.id===f});h?(h.requirements=d,h.requireStyle=e()):c.push({id:f,count:0,versionId:b.requirements.version||"1.0",containers:[],selected:!1,requirements:d,requireStyle:e()})}}),c},b.updateEnsembleContainerIdList=function(a){var c=angular.toJson(a);b.ensembleContainerIdsResponse!==c&&(b.ensembleContainerIdsResponse=c,b.ensembleContainerIds=a,Core.$apply(b))},b.dispatch=function(a){switch(a.request.operation){case b.containersOp:return void b.updateContainers(a.value)}switch(a.request.attribute){case b.ensembleContainerIdListOp:return void b.updateEnsembleContainerIdList(a.value)}},b.setActiveProfile=function(a){b.clearSelection(b.activeProfiles),a&&null!==a&&(a.selected=!0)},Core.register(e,b,[{type:"exec",mbean:a.managerMBean,operation:b.containersOp,arguments:[b.containerArgs,b.profileFields]},{type:"read",mbean:a.clusterManagerMBean,attribute:b.ensembleContainerIdListOp}],onSuccess(b.dispatch,{silent:!0}))}function c(a,b,c){a.showSelect=Core.parseBooleanValue(UI.getIfSet("showSelect",c,"true"));var d=UI.getIfSet("atVersion",c,null),e=UI.getIfSet("withoutProfile",c,null);null!==d&&(a.atVersion=a.$eval(d)),null!==e&&(a.withoutProfile=a.$eval(e))}function d(c,d,e,f,g,h,i){function j(a){var b=angular.toJson(a.value);b!==c.requirementsResponse&&(c.requirementsResponse=b,c.requirements=a.value,c.updateActiveProfiles(),Core.$apply(c))}b(c,d,e,f,g,h,i),c.name="ActiveProfileListController",c.searchFilter="",c.isOpen=function(){return""!==c.searchFilter?"opened":"closed"},c.containersForProfile=function(a){return c.containers.filter(function(b){return b.profileIds.some(a)})},c.profileMatchesFilter=function(a){var b=c.searchFilter;return Core.matchFilterIgnoreCase(a.id,b)||!a.containers.filter(function(a){return Core.matchFilterIgnoreCase(a,b)}).isEmpty()},c.containerMatchesFilter=function(a){var b=c.searchFilter;return Core.matchFilterIgnoreCase(a.id,b)||!a.profileIds.filter(function(a){return Core.matchFilterIgnoreCase(a,b)}).isEmpty},c.updateRequirements=function(b){function d(){c.requirements=b,Core.notification("success","Updated the requirements"),c.updateActiveProfiles(),Core.$apply(c)}if(b){c.editRequirements.dialog.close();var e=JSON.stringify(b);f.execute(a.managerMBean,"requirementsJson",e,onSuccess(d))}},Core.register(f,c,{type:"exec",mbean:a.managerMBean,operation:"requirements()"},onSuccess(j))}a.ContainerListDirectiveController=b,a.ContainerListDirectiveLink=c,a.ActiveProfileListController=d}(Fabric||(Fabric={}));var StorageHelpers;!function(a){function b(a){var b=a.$scope.name+":"||"::",c=b+a.modelName,d=a.to||Core.doNothing,e=a.from||Core.doNothing,f=function(b){angular.isFunction(a.onChange)&&a.onChange(b);var e=d(b);return a.localStorage[c]=e,e},g=function(b){return(void 0===b||null===b)&&(b=a.localStorage[c]),e(b)},h=g(void 0);ControllerHelpers.bindModelToSearchParam(a.$scope,a.$location,a.modelName,a.paramName,h||a.initialValue,f,g)}a.bindModelToLocalStorage=b}(StorageHelpers||(StorageHelpers={}));var Fabric;!function(a){a.ContainerViewController=a._module.controller("Fabric.ContainerViewController",["$scope","jolokia","$location","localStorage","$route","workspace","marked","ProfileCart","$dialog",function(b,c,d,e,f,g,h,i,j){function k(a,b,c){angular.isArray(b)?b.forEach(function(b){k(a,b,c)}):a.any(function(a){return b[c]===a[c]})||a.add(b)}function l(a){var b={};return a.forEach(function(a){var c=a.versionId,d=b[c]||{containers:[],profiles:[]};k(d.containers,a,"id"),k(d.profiles,a.profiles,"id"),b[c]=d}),b}function m(a){var b={};return a.forEach(function(a){var c=a.location,d=b[c]||{containers:Array()};k(d.containers,a,"id"),b[c]=d}),b}b.name=a.ContainerViewController.name,b.containers=[],b.selectedContainers=[],b.groupBy="none",b.filter="",b.cartItems=[],b.versionIdFilter="",b.profileIdFilter="",b.locationIdFilter="",b.hasCounts=!0,b.toString=Core.toString,b.createLocationDialog=ContainerHelpers.getCreateLocationDialog(b,j);var n=["id","profileIds","profiles","versionId","location","alive","type","ensembleServer","provisionResult","root","jolokiaUrl","jmxDomains","metadata"],o=["id","hidden","version","summaryMarkdown","iconURL","tags"];a.initScope(b,d,c,g),SelectionHelpers.decorate(b),b.viewOnly=!0,StorageHelpers.bindModelToLocalStorage({$scope:b,$location:d,localStorage:e,modelName:"groupBy",paramName:"groupBy",initialValue:b.groupBy}),StorageHelpers.bindModelToLocalStorage({$scope:b,$location:d,localStorage:e,modelName:"versionIdFilter",paramName:"versionIdFilter",initialValue:b.versionIdFilter}),StorageHelpers.bindModelToLocalStorage({$scope:b,$location:d,localStorage:e,modelName:"profileIdFilter",paramName:"profileIdFilter",initialValue:b.profileIdFilter}),StorageHelpers.bindModelToLocalStorage({$scope:b,$location:d,localStorage:e,modelName:"locationIdFilter",paramName:"locationIdFilter",initialValue:b.locationIdFilter}),b.groupByClass=ControllerHelpers.createClassSelector({profileIds:"btn-primary",location:"btn-primary",none:"btn-primary"}),b.$watch("containers",function(a,c){a!==c&&(b.selectedContainers=b.containers.filter(function(a){return a.selected}))},!0),b.maybeShowLocation=function(){return("location"===b.groupBy||"none"===b.groupBy)&&b.selectedContainers.length>0},b.showContainersFor=function(a){angular.isString(a)?b.locationIdFilter=a:(b.profileIdFilter=a.id,b.versionIdFilter=a.version),b.groupBy="none"},b.filterContainers=function(a){return(Core.isBlank(b.versionIdFilter)||a.versionId===b.versionIdFilter)&&(Core.isBlank(b.profileIdFilter)||a.profileIds.any(b.profileIdFilter))&&(Core.isBlank(b.locationIdFilter)||a.location===b.locationIdFilter)?FilterHelpers.searchObject(a,b.filter):!1},b.filterContainer=b.filterContainers,b.viewProfile=function(b){a.gotoProfile(g,c,g.localStorage,d,b.version,b.id)},a.loadRestApi(c,g,void 0,function(d){b.restApiUrl=UrlHelpers.maybeProxy(Core.injector.get("jolokiaUrl"),d.value),a.log.debug("Scope rest API: ",b.restApiUrl),Core.registerForChanges(c,b,{type:"exec",mbean:a.managerMBean,operation:"containers(java.util.List, java.util.List)",arguments:[n,o]},function(d){var e=d.value;SelectionHelpers.sync(b.selectedContainers,e,"id");var f={},g={};e.forEach(function(b){Core.isBlank(b.location)&&(b.location=ContainerHelpers.NO_LOCATION),b.profiles=b.profiles.filter(function(a){return!a.hidden}),b.icon=a.getTypeIcon(b),b.services=a.getServiceList(b)});var f=l(e);angular.forEach(f,function(c){c.profiles.forEach(function(d){var e=c.containers.filter(function(a){return a.profileIds.some(d.id)});d.aliveCount=e.count(function(a){return a.alive}),d.deadCount=e.length-d.aliveCount,d.summary=d.summaryMarkdown?h(d.summaryMarkdown):"",d.iconURL=a.toIconURL(b,d.iconURL),d.tags=ProfileHelpers.getTags(d)})});var g=m(e),i=ContainerHelpers.extractLocations(e);b.locationMenu=ContainerHelpers.buildLocationMenu(b,c,i),b.locations=g,b.versions=f,b.containers=e,Core.$apply(b)}),Core.registerForChanges(c,b,{type:"read",mbean:a.clusterManagerMBean,attribute:"EnsembleContainers"},function(a){b.ensembleContainerIds=a.value,Core.$apply(b)})})}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.ContainersController",["$scope","$location","$route","jolokia","workspace","$dialog",function(b,c,d,e,f,g){a.initScope(b,c,e,f),b.selectedContainers=[],b.createLocationDialog=ContainerHelpers.getCreateLocationDialog(b,g),Core.bindModelToSearchParam(b,c,"containerIdFilter","q",""),Core.reloadWhenParametersChange(d,b,c),b.addToDashboardLink=function(){var a="#/fabric/containers",b="Containers",c=angular.toJson({size_y:1,size_x:4});return"#/dashboard/add?tab=dashboard&href="+encodeURIComponent(a)+"&size="+encodeURIComponent(c)+"&title="+encodeURIComponent(b)},b.$watch("containers",function(a,c){if(a!==c){b.selectedContainers=b.containers.filter(function(a){return a.selected});var d=ContainerHelpers.extractLocations(b.containers);b.locationMenu=ContainerHelpers.buildLocationMenu(b,e,d),b.selectedContainers.length>0&&(b.activeContainerId="")}},!0)}])}(Fabric||(Fabric={}));var Fabric;!function(a){a.CreateBrokerController=a._module.controller("Fabric.CreateBrokerController",["$scope","localStorage","$routeParams","$location","jolokia","workspace","$compile","$templateCache",function(b,c,d,e,f,g){function h(){var a=b.entity.group;b.possibleNetworks=[].concat(b.groups),a&&(b.possibleNetworks=b.possibleNetworks.remove(a))}function i(a){delete a.properties.username,delete a.properties.password,delete a.properties.properties;var b="entity.kind == 'Replicated'",c="entity.kind == 'StandAlone'";Core.pathSet(a.properties,["group","required"],!0),Core.pathSet(a.properties,["group","tooltip"],"The peer group name of message brokers. The group is name is used by messaging clients to connect to a broker; so it represents a peer group of brokers used for load balancing."),Core.pathSet(a.properties,["group","input-attributes","typeahead"],"title for title in groups | filter:$viewValue"),Core.pathSet(a.properties,["group","input-attributes","typeahead-editable"],"true"),Core.pathSet(a.properties,["brokerName","required"],!0),Core.pathSet(a.properties,["brokerName","tooltip"],"The name of the broker."),Core.pathSet(a.properties,["brokerName","input-attributes","autofocus"],"true"),Core.pathSet(a.properties,["parentProfile","tooltip"],"The parent profile used by the profile."),Core.pathSet(a.properties,["parentProfile","input-attributes","typeahead"],"p.id for p in parentProfiles | filter:$viewValue"),Core.pathSet(a.properties,["parentProfile","input-attributes","typeahead-editable"],"false"),Core.pathSet(a.properties,["parentProfile","input-attributes","placeholder"],"{{"+b+" ? 'mq-replicated' : 'mq-base'}}"),Core.pathSet(a.properties,["profile","tooltip"],"The profile to create instances of this broker."),Core.pathSet(a.properties,["profile","input-attributes","typeahead"],"title for title in profiles | filter:$viewValue"),Core.pathSet(a.properties,["profile","input-attributes","typeahead-editable"],"true"),Core.pathSet(a.properties,["profile","input-attributes","placeholder"],"mq-broker-{{entity.group || 'default'}}.{{entity.brokerName || 'brokerName'}}"),Core.pathSet(a.properties,["clientProfile","tooltip"],"The profile used by messaging clients to connect to this group of brokers."),Core.pathSet(a.properties,["clientProfile","input-attributes","typeahead"],"title for title in profiles | filter:$viewValue"),Core.pathSet(a.properties,["clientProfile","input-attributes","typeahead-editable"],"true"),Core.pathSet(a.properties,["clientProfile","input-attributes","placeholder"],"mq-client-{{entity.group || 'default'}}"),Core.pathSet(a.properties,["clientParentProfile","tooltip"],"The parent profile used by the client profile."),Core.pathSet(a.properties,["clientParentProfile","input-attributes","typeahead"],"p.id for p in parentProfiles | filter:$viewValue"),Core.pathSet(a.properties,["clientParentProfile","input-attributes","typeahead-editable"],"false"),Core.pathSet(a.properties,["clientParentProfile","input-attributes","placeholder"],"mq-client-base"),Core.pathSet(a.properties,["parentProfile","input-attributes","placeholder"],"default"),Core.pathSet(a.properties,["data","input-attributes","placeholder"],"${karaf.base}/data/{{entity.brokerName || 'brokerName'}}"),Core.pathSet(a.properties,["configUrl","input-attributes","placeholder"],"profile:broker.xml"),Core.pathSet(a.properties,["replicas","control-group-attributes","ng-show"],b),Core.pathSet(a.properties,["replicas","input-attributes","value"],"{{3}}"),Core.pathSet(a.properties,["replicas","input-attributes","min"],"1"),Core.pathSet(a.properties,["minimumInstances","control-group-attributes","ng-hide"],b),Core.pathSet(a.properties,["minimumInstances","input-attributes","value"],"{{"+c+" ? 1 : 2}}"),Core.pathSet(a.properties,["minimumInstances","input-attributes","min"],"1"),Core.pathSet(a.properties,["networksPassword","type"],"password"),Core.pathSet(a.properties,["networks","items","input-attributes","typeahead-editable"],"true"),Core.pathSet(a.properties,["networks","input-attributes","ng-hide"],"otherEntity.networkConnectAll"),Core.pathSet(a.properties,["networks","tooltip"],"The broker groups to create a store and forward network to"),Core.pathSet(a.properties,["networkConnectAll","type"],"boolean"),Core.pathSet(a.properties,["networkConnectAll","input-attributes","ng-model"],"otherEntity.networkConnectAll"),Core.pathSet(a.properties,["networkConnectAll","label"],"Network to all groups"),Core.pathSet(a.properties,["networkConnectAll","tooltip"],"Should this broker create a store and forward network to all the known groups of brokers"),a.tabs={Default:["group","brokerName","kind","profile","clientProfile","data","configUrl","replicas","minimumInstances","networkConnectAll","networks"],Advanced:["parentProfile","clientParentProfile","networksUserName","networksPassword","*"]}}function j(c){var d=c.map(function(a){return a.networks}).flatten().unique(),e=c.map(function(a){return a.group}).unique();b.groups=d.concat(e).unique().sort(),b.profiles=c.map(function(a){return a.profile}).unique().sort(),b.brokerNames=c.map(function(a){return a.brokerName}).unique().sort(),h();var g=c.map(function(a){return a.version}).find(function(a){return a})||"1.0";g&&f.execute(a.managerMBean,"getProfiles(java.lang.String,java.util.List)",g,["id","abstract"],onSuccess(k)),Core.$apply(b)}function k(a){a&&(b.parentProfiles=a.filter(function(a){return!a["abstract"]}).sortBy("id"))}function l(){Core.notification("success","Created broker "+b.message),Core.$apply(b)}a.initScope(b,e,f,g),b.defaultGroup="default",b.defaultBrokerName="brokerName",b.groups=[],b.possibleNetworks=[],b.profiles=[],b.parentProfiles=[],b.entity={group:b.defaultGroup,ssl:!0},b.otherEntity={networkConnectAll:!1},b.forms={},b.onSubmit=function(){b.message=(b.entity.brokerName||"unknown")+" in group "+(b.entity.group||"unknown"),Core.notification("info","Creating broker "+b.message);var c=JSON.stringify(b.entity,null,"  ");f.execute(a.mqManagerMBean,"saveBrokerConfigurationJSON",c,onSuccess(l)),e.path("/fabric/mq/brokers"),Core.$apply(b)},b.brokerNameExists=function(){var a=b.entity.brokerName;return a&&b.brokerNames.indexOf(a)>=0},b.$watch("entity.group",h),b.$watch("otherEntity.networkConnectAll",function(){b.otherEntity.networkConnectAll&&(b.entity.networks=b.possibleNetworks)}),angular.forEach(["group","profile"],function(a){var c=d[a];c&&(b.entity[a]=c)}),b.entity.kind||(b.entity.kind="MasterSlave"),a.getDtoSchema("brokerConfig","io.fabric8.api.jmx.MQBrokerConfigDTO",f,function(c){b.schema=c,i(c),f.execute(a.mqManagerMBean,"loadBrokerStatus()",onSuccess(j)),Core.$apply(b)})}])}(Fabric||(Fabric={}));var Fabric;!function(a){a.CreateContainerController=a._module.controller("Fabric.CreateContainerController",["$scope","$element","$compile","$location","workspace","jolokia","localStorage","userDetails","ProfileCart",function(b,c,d,e,f,g,h,i,j){function k(){var a=b.entity.providerType,c=m[a];angular.forEach(c,function(a,c){var d=b.entity[c];d&&(h[a]=d)})}var l=Logger.get("Fabric");b.versionsOp="versions()",b.entity={number:1,saveJmxCredentials:!0};var m={child:{},openshift:{serverUrl:"openshift.serverUrl",domain:"openshift.domain",gearProfile:"openshift.gearProfile"},jclouds:{owner:"jclouds.owner",credential:"jclouds.credential",providerName:"jclouds.providerName",imageId:"jclouds.imageId",hardwareId:"jclouds.hardwareId",locationId:"jclouds.locationId",group:"jclouds.group",instanceType:"jclouds.instanceType"}};b.providers=a.registeredProviders(g),b.selectedProvider=b.providers[Object.extended(b.providers).keys().first()],b.resolvers=[],b.schema={},b.response={},b.versions=[],b.profiles=[],b.selectedVersion={},b.selectedProfiles=[],b.selectedProfileIds="",b.selectedVersionId="",b.profileIdFilter="",b.hideProfileSelector=!1,b.returnTo="/fabric/containerView?groupBy=none",b.nextPage="/fabric/containerView?groupBy=none",Core.bindModelToSearchParam(b,e,"hideProfileSelector","hideProfileSelector",b.hideProfileSelector,Core.parseBooleanValue),Core.bindModelToSearchParam(b,e,"returnTo","returnTo",b.returnTo),Core.bindModelToSearchParam(b,e,"nextPage","nextPage",b.nextPage),b.child={rootContainers:[]},b.allContainers=[],b.openShift={loginDataKey:"openshift.loginData",params:null,domains:[],gearProfiles:[],tryLogin:"",login:function(){var c=b.entity,d=Core.pathGet(c,["serverUrl"])||"openshift.redhat.com",e=Core.pathGet(c,["login"]),i=Core.pathGet(c,["password"]);l.debug("Invoking login to server "+d+" user "+e),b.openShift.loginFailed=!1,d&&e&&i&&(b.openShift.domains=[],a.getOpenShiftDomains(f,g,d,e,i,function(c){b.openShift.domains=c,l.debug("found openshift domains: "+c),1===c.length&&(b.entity.domain=c[0]),Core.$apply(b),a.getOpenShiftGearProfiles(f,g,d,e,i,function(c){b.openShift.gearProfiles=c,l.debug("found openshift gears: "+b.openShift.gearProfiles),a.OpenShiftCredentials.username=e,a.OpenShiftCredentials.password=i,k();var d={domains:b.openShift.domains,gearProfiles:b.openShift.gearProfiles};h[b.openShift.loginDataKey]=angular.toJson(d),Core.$apply(b)})},function(){b.openShift.loginFailed=!0,Core.$apply(b)}))}},b.jclouds={},b.forms={},b.showAddProfileDialog=!1,b.$watch("selectedProvider",function(){b.selectedProvider&&a.getSchema(b.selectedProvider.id,b.selectedProvider.className,g,function(c){b.schema=c,b.resolvers=a.getResolvers(b.selectedProvider.id),Core.$apply(b)})},!0),b.$watch("schema",function(c,d){if(c!==d){b.entity.providerType=b.selectedProvider.id,e.search("tab",b.selectedProvider.id);var f=b.entity.providerType,j=m[f];if(angular.forEach(j,function(a,c){var d=h[a];d&&(b.entity[c]=d,l.debug("Defaulted entity "+c+" to "+d+" from localStorage"))}),"openshift"===f){Core.pathSet(b.entity,["login"],a.OpenShiftCredentials.username),Core.pathSet(b.entity,["password"],a.OpenShiftCredentials.password);var k=h[b.openShift.loginDataKey];if(k){l.debug("Loaded openshift login details: "+k);var n=Wiki.parseJson(k);n&&angular.forEach(["domains","gearProfiles"],function(a){var c=n[a];c&&angular.isArray(c)&&c.length&&(b.openShift[a]=c)})}}if(Forms.defaultValues(b.entity,b.schema),b.allContainers=a.getContainerIds(g),"child"===b.selectedProvider.id){var o=a.getRootContainers(g);b.child.rootContainers=o,o&&1===o.length&&!b.entity.parent&&(b.entity.parent=o[0]),Core.pathSet(b.entity,["jmxUser"],i.username),Core.pathSet(b.entity,["jmxPassword"],i.password)}else"parent"in b.entity&&delete b.entity.parent;window.setTimeout(function(){$("input[ng-model]").trigger("input")},100)}},!0),b.$watch("versions",function(a,c){a!==c&&(b.selectedVersion||(b.selectedVersion=b.versions.find(""!==b.selectedVersionId?function(a){return a.id===b.selectedVersionId}:function(a){return a.defaultVersion})))}),b.$watch("selectedVersion",function(a,c){c!==a&&a&&"id"in a&&(b.selectedVersionId=a.id,e.search("versionId",b.selectedVersionId))},!0),b.deselect=function(a){a.selected=!1,b.selectedProfiles.remove(function(b){return b.id===a.id})},b.$watch("selectedProfiles",function(a,c){c!==a&&(l.debug("selectedProfiles: ",b.selectedProfiles),b.selectedProfileIds=b.selectedProfiles.length>0?b.selectedProfiles.map(function(a){return a.id}).join(","):"",l.debug("selectedProfileIds: ",b.selectedProfileIds))},!0),b.$watch("selectedProfileIds",function(){if(Core.isBlank(b.selectedProfileIds))return void(b.selectedProfiles.length=0);var a=b.selectedProfileIds.split(","),c=[];a.each(function(a){c.push({id:a,selected:!0})}),b.selectedProfiles=c,e.search("profileIds",b.selectedProfileIds)}),b.massage=function(a){return"name"===a?"containerName":a},b.rootContainers=function(){return a.getRootContainers(g)},b.init=function(){var a=e.search().tab;a&&(b.selectedProvider=b.providers[a]);var c=e.search().parentId;c&&(b.entity.parent=c);var d=e.search().versionId;d?b.selectedVersion={id:d}:j.length>0&&(b.selectedVersion={id:j.first().versionId});var f=e.search().profileIds;f?b.selectedProfileIds=f:j.length>0&&(b.selectedProfileIds=j.map(function(a){return a.id}).join(","));var g=e.search().number;g&&(b.entity.number=g)},b.init(),b.$on("$routeUpdate",b.init),b.goBack=function(){var a=new URI(b.returnTo);e.path(a.path()).search(a.search(!0))},b.goForward=function(){var a=new URI(b.nextPage);e.path(a.path()).search(a.search(!0))},b.onSubmit=function(c){b.entity.providerType;c=a.sanitizeJson(c),1===c.number&&delete c.number;var d=b.selectedVersion;d&&(c.version=d.id),b.selectedProfiles.length>0&&(c.profiles=b.selectedProfiles.map(function(a){return a.id}));var e=angular.toJson(c);l.debug("createContainers json:\n"+e),setTimeout(function(){g.execute(a.managerMBean,"createContainers(java.util.Map)",e,{method:"post",success:function(a){l.debug("Response from creating container(s): ",a);var d=!1;if("<not available>"in a){var e=a["<not available>"];if(e.toLowerCase().has("exception")){d=!0;var f="container";c.number&&(f=Core.maybePlural(c.number,"container")),Core.notification("error","Creating "+f+" failed: "+e)}}var g=a[c.name];g&&g.toLowerCase().has("already exists")&&(d=!0,Core.notification("error","Creating container "+c.name+" failed as a container with that name already exists.")),angular.forEach(a.value,function(a,b){d=!0,Core.notification("error","Creating container "+b+" failed: "+a)}),d||(SelectionHelpers.clearGroup(j),Core.notification("success","Successfully created containers")),Core.$apply(b)},error:function(a){Core.notification("error","Error creating containers: "+a.error),Core.$apply(b)}}),Core.$apply(b)},10),b.goForward()}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.CreateFabricController",["$scope","jolokia","$location","workspace","branding",function(b,c,d,e,f){b.$on("$routeChangeSuccess",function(){e.treeContainsDomainAndProperties(a.jmxDomain,{type:"Fabric"})&&d.url("/fabric/view")}),a.getSchema("createEnsemble","io.fabric8.api.CreateEnsembleOptions",c,function(a){b.schema=a,Core.$apply(b)}),b.creating=!1,b.entity={zooKeeperServerPort:2181,globalResolver:"localhostname",resolver:"localhostname",agentEnabled:!0,autoImportEnabled:!0,minimumPort:0,maximumPort:65535,profiles:["fabric","hawtio"]},f.profile&&b.entity.profiles.push(f.profile),b.forms={},b.onSubmit=function(e){e=a.sanitizeJson(e),setTimeout(function(){c.execute(a.clusterBootstrapManagerMBean,"createCluster(java.util.Map)",angular.toJson(e),{method:"post",success:function(){Core.notification("success","Created fabric!"),d.url("/fabric/containers"),Core.$apply(b)},error:function(a){Core.notification("error","Error creating fabric: "+a.error),Core.$apply(b)}}),Core.notification("info","Creating fabric, please wait..."),d.url("/openlogs"),Core.$apply(b)},30)}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.FeatureEditController",["$scope","$routeParams","$location","jolokia","xml2json","workspace",function(b,c,d,e,f,g){a.initScope(b,d,e,g),SelectionHelpers.decorate(b),b.getProfileFeaturesOp="getProfileFeatures(java.lang.String, java.lang.String)",b.versionId=c.versionId,b.profileId=c.profileId,b.features=[],b.selectedRepoFeatures=[],b.deletingFeatures=[],b.addingFeatures=[],b.selectedRepoSelectedFeatures=[],b.featureGridOptions={data:"selectedRepoFeatures",selectedItems:b.selectedRepoSelectedFeatures,displayFooter:!1,showFilter:!1,keepLastSelected:!0,showSelectionCheckbox:!0,filterOptions:{filterText:""},columnDefs:[{field:"name",displayName:"Name"},{field:"version",displayName:"Version"}]},b.filter=function(a){return FilterHelpers.searchObject(a,b.featureGridOptions.filterOptions.filterText,2)},b.$watch("features",function(a,c){a!==c&&(b.parentFeatures=b.features.filter(function(a){return a.isParentFeature}),b.profileFeatures=b.features.filter(function(a){return!a.isParentFeature}),b.addingFeatures=b.features.filter(function(a){return a.adding}),b.deletingFeatures=b.features.filter(function(a){return a.deleting}))},!0),b.$watch("addingFeatures",function(a,b){},!0),b.getClass=function(a){return a.adding?"adding":a.deleting?"deleting":""},b.removeFeature=function(a){a.adding?b.features.remove(function(b){return b.id===a.id}):a.deleting=!a.deleting},b.addSelectedFeatures=function(a){b.selectedRepoSelectedFeatures.forEach(function(c){var d=c.name;a&&(d=d+"/"+c.version),b.features.push({id:d,adding:!0})})},b.save=function(){e.request({type:"exec",mbean:a.managerMBean,operation:"getConfigurationFile(java.lang.String, java.lang.String, java.lang.String)",arguments:[b.versionId,b.profileId,"io.fabric8.agent.properties"]},onSuccess(b.doSave))},b.doSave=function(c){var d=c.value.decodeBase64(),f=d.lines();b.deletingFeatures.length>0&&b.deletingFeatures.each(function(a){f.remove(function(b){return b.startsWith("feature."+a.id)
})}),b.addingFeatures.length>0&&b.addingFeatures.each(function(a){f.add("feature."+a.id+" = "+a.id)}),d=f.join("\n"),a.saveConfigFile(e,b.versionId,b.profileId,"io.fabric8.agent.properties",d.encodeBase64(),function(){Core.notification("success","Updated feature definitions..."),Core.$apply(b)})},b.selectFeature=function(a,c){SelectionHelpers.select(b.selectedRepoFeatures,a,c),b.selectedRepoSelectedFeatures=b.selectedRepoFeatures.filter(function(a){return SelectionHelpers.isSelected(a)})},Core.registerForChanges(e,b,{type:"exec",mbean:a.managerMBean,operation:b.getProfileFeaturesOp,arguments:[b.versionId,b.profileId]},function(a){b.features=a.value.featureDefinitions;var c=a.value.repositoryDefinitions,d=[];c.forEach(function(a){var b=f(a.data);if("feature"in b){var c=b.feature;angular.isArray(c)||(c=[c]),d=d.include(c)}}),b.selectedRepoSelectedFeatures=SelectionHelpers.sync(b.selectedRepoSelectedFeatures,d,"id"),b.selectedRepoFeatures=d.sortBy("name"),Core.$apply(b)})}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.directive("fabricVersionSelector",["$templateCache",function(b){return a.VersionSelector(b)}]),a._module.directive("fabricProfileSelector",function(){return new a.ProfileSelector}),a._module.directive("fabricContainerList",function(){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"containerList.html",scope:!1,controller:["$scope","$element","$attrs","jolokia","$location","workspace","$templateCache",a.ContainerListDirectiveController],link:["$scope","$element","$attrs",a.ContainerListDirectiveLink]}}),a._module.directive("fabricProfileDetails",function(){return new a.ProfileDetails}),a._module.directive("fabricActiveProfileList",function(){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"activeProfileList.html",scope:!1,controller:["$scope","$element","$attrs","jolokia","$location","workspace","$templateCache","$timeout",a.ActiveProfileListController],link:["$scope","$element","$attrs",a.ContainerListDirectiveLink]}}),a._module.directive("fabricProfileLink",["workspace","jolokia","localStorage",function(b,c,d){return{restrict:"A",link:function(e,f,g){var h=g.fabricProfileLink;if(h&&!h.isBlank()&&a.fabricCreated(b)){var i=a.getCurrentContainer(c,["versionId"]),j=i.versionId;if(j&&!j.isBlank()){var k="#"+a.profileLink(b,c,d,j,h);angular.isDefined(g.file)&&(k=k+"/"+g.file),f.attr("href",k)}}}}}]),a._module.directive("fabricContainers",["$location","jolokia","workspace","$compile",function(b,c,d,e){return{restrict:"A",link:function(f,g,h){var i=h.fabricContainers,j=h.profile,k=f.versionId||f.version||"1.0";if(i&&!i.isBlank()&&j&&!j.isBlank()){a.initScope(f,b,c,d);var l=a.getContainerIdsForProfile(c,k,j);a.log.info("Searching for containers for profile: "+j+" version "+k+". Found: "+l),f[i]=l,f.onCancel=function(){console.log("In our new cancel thingy!")};var m=$("<div ng-include=\"'app/fabric/html/connectToContainerDialog.html'\"></div>"),n=e(m)(f);g.append(n)}}}}]),a._module.directive("fabricContainerLink",["$location","jolokia","workspace",function(b,c){return{restrict:"A",scope:{containerModel:"@fabricContainerLink"},link:function(b,d){b.$watch("containerModel",function(){var e=b.containerModel,f=e,g=null;if(e&&!e.isBlank()){var h=Core.pathGet(b,e);if(angular.isObject(h)){var i=h.container||h.containerId||h.id;i&&h.provisionResult&&(g=h,f=i)}if(!g){var j=["alive","provisionResult","versionId","jmxDomains"];g=a.getContainerFields(c,f,j)}var k="#/fabric/container/"+f,l=a.statusTitle(g)||"container "+f,m=a.statusIcon(g)||"",n="<a href='"+k+"' title='"+l+"'><i class='"+m+"'></i> "+f+"</a>";d.html(n)}else d.html(" ")})}}}]),a._module.directive("fabricContainerConnect",["$location","jolokia",function(b,c){return{restrict:"A",link:function(b,d,e){var f=e.fabricContainerConnect,g=e.view;if(f&&!f.isBlank()){var h=["jolokiaUrl"],i=function(){var d=a.getContainerFields(c,f,h);a.log.info("Connecting to container id "+f+" view + "+g),d.id=f,b.doConnect(d,g),Core.$apply(b)};d.on("click",i)}}}}]),a._module.directive("fabricVersionLink",["workspace","jolokia","localStorage",function(b,c){return{restrict:"A",link:function(d,e,f){var g=f.fabricVersionLink;if(g&&!g.isBlank()&&a.fabricCreated(b)){var h=a.getCurrentContainer(c,["versionId"]),i=h.versionId||"1.0";if(i&&!i.isBlank()){var j="#/wiki/branch/"+i+"/"+Core.trimLeading(g,"/");e.attr("href",j)}}}}}]),a._module.directive("containerNameAvailable",["workspace","jolokia","localStorage",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(b){var c=a.child.rootContainers.indexOf(b);return-1===c&&(c=a.allContainers.indexOf(b)),-1!==c?void d.$setValidity("taken",!1):(d.$setValidity("taken",!0),b)})}}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a.TopLevelController=a._module.controller("Fabric.TopLevelController",["$scope",function(b){b.managerMBean=a.managerMBean,b.clusterBootstrapManagerMBean=a.clusterBootstrapManagerMBean,b.clusterManagerMBean=a.clusterManagerMBean,b.openShiftFabricMBean=a.openShiftFabricMBean,b.mqManagerMBean=a.mqManagerMBean,b.healthMBean=a.healthMBean,b.schemaLookupMBean=a.schemaLookupMBean}])}(Fabric||(Fabric={}));var Fabric;!function(a){a.startMaps=function(){},a._module.controller("Fabric.MapController",["$scope","$templateCache","jolokia",function(b,c,d){function e(d){if(d&&d.value){if(d.value.forEach(function(c){var d=!1,e=c.id,f=b.containers[e];f||(f={name:e},b.containers[e]=f,d=!0),f.alive=c.alive,f.version=c.versionId,f.profileIds=c.profileIds;var g=c.geoLocation;if(g){var h=g.split(",");if(h.length>=2){var i=Core.parseFloatValue(h[0],"lattitude"),j=Core.parseFloatValue(h[1],"longitude");if(i&&j){if(b.myMap){var k=f.marker;(d||!k)&&(a.log.info("Adding marker as we have map "+b.myMap),k=new google.maps.Marker({position:new google.maps.LatLng(i,j),map:b.myMap,title:c.id,tooltip:"(lattitude: "+i+", longitude: "+j+")"}),f.marker=k,b.myMarkers.push(k))}else f.marker&&(f.marker.position=new google.maps.LatLng(i,j));f.lattitude=i,f.longitude=j}}}}),b.myMarkers.length>0&&b.first&&b.myMap){var e=b.myMarkers[0];a.log.info("Auto selecting first container on map: "+e.title),b.myMap.panTo(e.getPosition()),b.first=!1}b.template=c.get("pageTemplate"),Core.$apply(b)}}b.myMarkers=[],b.containers={},b.template="",b.first=!0,b.myMap=null,b.start=function(){b.mapOptions={center:new google.maps.LatLng(35.784,-78.67),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP},Core.register(d,b,{type:"exec",mbean:a.managerMBean,operation:"containers()",arguments:[]},onSuccess(e))},a.startMaps=b.start,$("body").append('<script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=false&async=2&callback=Fabric.startMaps"></script>')}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.MigrateContainersController",["$scope","jolokia","$location",function(b,c,d){b.versions=[],b.containers=[],b.containersResponse=[],b.selectedVersion=[],b.selectedContainers=[],b.showApply=!1,b.versionGridOptions={data:"versions",selectedItems:b.selectedVersion,showSelectionCheckbox:!0,multiSelect:!1,keepLastSelected:!0,columnDefs:[{field:"id",displayName:"Version Name",width:"94%"}],filterOptions:{filterText:""}},b.containerGridOptions={data:"containers",selectedItems:b.selectedContainers,showSelectionCheckbox:!0,multiSelect:!0,keepLastSelected:!1,columnDefs:[{field:"id",displayName:"Container Name",width:"94%"}],filterOptions:{filterText:""}},b.canApply=function(){return!(b.selectedVersion.length>0&&b.selectedContainers.length>0)},b.render=function(a){"versions()"===a.request.operation&&(Object.equal(b.versions,a.value)||(b.versions=a.value,Core.$apply(b))),"containerIds()"===a.request.operation&&(Object.equal(b.containersResponse,a.value)||(b.containersResponse=a.value,b.containers=[],b.containersResponse.each(function(a){b.containers.push({id:a})}),Core.$apply(b)))},b.migrateContainers=function(){var e=b.selectedContainers.map(function(a){return a.id}),f=b.selectedVersion[0].id;Core.notification("info","Moving containers to version "+f),d.path("/fabric/containers"),a.migrateContainers(c,f,e,function(){Core.notification("success","Successfully migrated containers")},function(a){Core.notification("error","Failed to migrate containers due to "+a.error)})},Core.register(c,b,[{type:"exec",mbean:a.managerMBean,operation:"versions()"},{type:"exec",mbean:a.managerMBean,operation:"containerIds()"}],onSuccess(b.render))}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.NavBarController",["$scope","$location","jolokia","workspace","localStorage",function(b,c,d,e,f){function g(){b.activeVersion=a.getActiveVersion(c)}function h(){if(g(),b.hasFabric=a.hasFabric(e),b.hasMQManager=a.hasMQManager(e),b.hasFabric){var c=null;a.containerWebAppURL(d,"drools-wb-distribution-wars",c,i,i),b.canUpload=e.treeContainsDomainAndProperties("hawtio",{type:"UploadManager"})}}function i(a){var c=a?a.value:null;console.log("========== onDroolsUrl: "+c),b.droolsHref=c,Core.$apply(b)}b.activeVersion="1.0",b.mapsEnabled=f.fabricEnableMaps,b.$on("$routeUpdate",g),b.isActive=function(a){return e.isLinkActive(a)},b.clusterLink=function(){return Core.createHref(c,"#/fabric/clusters/fabric/registry/clusters",["cv","cp","pv"])},h()}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.PatchingController",["$scope","jolokia","localStorage","$location",function(b,c,d,e){b.files=[],b.targetVersion=e.search().versionId,b.newVersionName="",b.proxyUser=d["fabric.userName"],b.proxyPassword=d["fabric.password"],b.saveJmxCredentials=!1,b.cancel=function(){e.url("/fabric/view").search({cv:b.targetVersion})},b.valid=function(){return b.files&&b.files.length>0&&null!==b.targetVersion&&b.proxyUser&&b.proxyPassword},b.go=function(){var f=b.files.length+" patches";1===b.files.length&&(f="patch: "+b.files[0].fileName),Core.notification("info","Applying "+f),b.saveJmxCredentials&&(d["fabric.userName"]=b.proxyUser,d["fabric.password"]=b.proxyPassword);var g=b.files.map(function(a){return a.absolutePath});a.applyPatches(c,g,b.targetVersion,b.newVersionName,b.proxyUser,b.proxyPassword,function(){Core.notification("success","Successfully applied "+f),e.url("/fabric/view"),Core.$apply(b)},function(c){a.log.error("Failed to apply ",f," due to ",c.error),a.log.info("Stack trace: ",c.stacktrace),Core.$apply(b)})}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.PIDController",["$scope","$routeParams","jolokia","$location",function(b,c,d,e){function f(a){Object.equal(b.response,a.value)||(b.response=a.value,b.data=b.response.decodeBase64(),b.mode=b.getMode(),Core.$apply(b))}b.versionId=c.versionId,b.profileId=c.profileId,b.fname=c.fname,b.response=void 0,b.data="",b.dirty=!1,b.getMode=function(){var a=b.fname.split("."),c=a[a.length-1];if(!c)return"text";switch(c){case"cfg":c="properties"}return c},b.mode=b.getMode(),angular.isDefined(b.versionId)&&angular.isDefined(b.profileId)&&angular.isDefined(b.fname)&&Core.register(d,b,{type:"exec",mbean:a.managerMBean,operation:"getConfigurationFile(java.lang.String,java.lang.String,java.lang.String)",arguments:[b.versionId,b.profileId,b.fname]},onSuccess(f)),b.save=function(){a.saveConfigFile(d,b.versionId,b.profileId,b.fname,b.data.encodeBase64(),function(){b.dirty=!1,Core.notification("success","Saved "+b.fname),e.path("/fabric/profile/"+b.versionId+"/"+b.profileId)},function(a){Core.notification("error","Failed to save "+b.fname+" due to "+a.error)})}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.PreferencesController",["$scope","localStorage",function(a,b){Core.initPreferenceScope(a,b,{fabricAlwaysPrompt:{value:!1,converter:Core.parseBooleanValue},fabricEnableMaps:{value:!0,converter:Core.parseBooleanValue},fabricVerboseNotifications:{value:!0,converter:Core.parseBooleanValue}})}])}(Fabric||(Fabric={}));var Osgi;!function(a){function b(a,b,d){var e=d;return angular.forEach(d,function(b){b.ImportData=g(b.ImportedPackages),b.ExportData=g(b.ExportedPackages),b.IdentifierLink=l(a,b.Identifier),b.Hosts=k(a,b.Hosts,e),b.Fragments=k(a,b.Fragments,e),b.ImportedPackages=b.ImportedPackages.union([]),b.StateStyle=c("label",b.State),b.RequiringBundles=k(a,b.RequiringBundles,e)}),d}function c(a,b){switch(b){case"INSTALLED":return a+"-important";case"RESOLVED":return a+"-inverse";case"STARTING":return a+"-warning";case"ACTIVE":return a+"-success";case"STOPPING":return a+"-info";case"UNINSTALLED":return"";default:return a+"-important"}}function d(a,b,c){return angular.forEach(c,function(b){b.BundleIdentifier=l(a,b.BundleIdentifier)}),c}function e(a,b,c){function d(b,c){c||(c=b);var d=b.Name,f=b.Version;if(d&&!d.startsWith("#")){b.VersionLink="<a href='"+Core.url("#/osgi/package/"+d+"/"+f+a.hash())+"'>"+f+"</a>";var g=c.ImportingBundles||b.ImportingBundles,h=c.ExportingBundles||b.ExportingBundles;b.ImportingBundleLinks=l(a,g),b.ImportingBundleLinks=l(a,g),b.ExportingBundleLinks=l(a,h),e.push(b)}}var e=[],f=c.values;return f&&angular.forEach(f,d),angular.forEach(c,function(a){angular.forEach(a,function(b){angular.forEach(b,function(b){d(b,a)})})}),e}function f(a,b,c){var d=[];return angular.forEach(c,function(b){var c={};c.Pid=b[0],c.PidLink="<a href='"+Core.url("#/osgi/pid/"+b[0]+a.hash())+"'>"+b[0]+"</a>",c.Bundle=b[1],d.push(c)}),d}function g(a){for(var b={},c=0;c<a.length;c++){var d=a[c],e=d.indexOf(";");if(e>0){var f=d.substring(0,e),g=d.substring(e+1),h=b[f];void 0===h&&(h={},b[f]=h),h.ReportedVersion=g}}return b}function h(a,b){var c={},d={},e=a[b];if(void 0===e)return c;for(var f=e.Value,g=!0,h=!1,j="",k="",l=0;l<f.length;l++){var m=f[l];'"'!==m?h?k+=m:";"!==m?","!==m?g?j+=m:k+=m:(i(d,k),c[j]=d,d={},j="",k="",g=!0):g?g=!1:(i(d,k),k=""):h=!h}return i(d,k),c[j]=d,c}function i(a,b){var c=b.indexOf(":=");if(c>0)return void(a["D"+b.substring(0,c)]=b.substring(c+2));var d=b.indexOf("=");return d>0?void(a["A"+b.substring(0,d)]=b.substring(d+1)):void 0}function j(a){var b=a;return angular.isArray(a)||(b=[a]),b}function k(a,b,c){var d="",e=j(b).sort(function(a,b){return a-b});return angular.forEach(e,function(b){var e="";d.length>0&&(e=" ");var f=c[b]||{},g=f.SymbolicName;d+=e+"<a class='label' href='"+Core.url("#/osgi/bundle/"+b+a.hash())+"'>"+g+"</a>"}),d}function l(a,b){var c="",d=j(b).sort(function(a,b){return a-b});return angular.forEach(d,function(b){var d="";c.length>0&&(d=" "),c+=d+"<a class='label' href='"+Core.url("#/osgi/bundle/"+b+a.hash())+"'>"+b+"</a>"}),c}function m(a,b){var c="";return angular.forEach(j(b),function(b){var d="";c.length>0&&(d=" "),c+=d+"<a href='"+Core.url("#/osgi/bundle/"+b+a.hash())+"'>"+b+"</a>"}),c}function n(a,b){var c="";return angular.forEach(b,function(b){var d=b.Identifier;return a===d.toString()?c=b:void 0}),c}function o(b){if(b){var c=b.tree.navigate("osgi.core","bundleState");return a.findFirstObjectName(c)}return null}function p(a){if(a){var b=a.objectName;if(b)return b;var c=a.children;if(c&&c.length)return p(c[0])}return null}function q(b){if(b){var c=b.tree.navigate("osgi.core","framework");return a.findFirstObjectName(c)}return null}function r(b){if(b){var c=b.tree.navigate("osgi.core","serviceState");return a.findFirstObjectName(c)}return null}function s(b){if(b){var c=b.tree.navigate("osgi.core","packageState");return a.findFirstObjectName(c)}return null}function t(b){if(b){var c=b.tree.navigate("osgi.compendium","cm");return a.findFirstObjectName(c)}return null}function u(a){if(a){var b=a.mbeanTypesToDomain,c=b.MetaTypeFacade||{},d=c["io.fabric8"]||{};return d.objectName}return null}function v(a){if(a){var b=a.mbeanTypesToDomain,c=b.ProfileMetadata||{},d=c["io.fabric8"]||{};return d.objectName}return null}function w(a){if(a){var b=a.mbeanTypesToDomain,c=b.OSGiTools||{},d=c.hawtio||{};return d.objectName}return null}function x(a){if(a){var b=a.mbeanTypesToDomain,c=b.ConfigAdmin||{},d=c.hawtio||{};return d.objectName}return null}function y(a,b,c,d){return void 0===d&&(d=!1),Core.url("#"+z(a,c,d)+b.hash())}function z(a,b,c){void 0===c&&(c=!1);{var d=b,e=a.versionId;a.profileId}if(e&&e){var f=c?"/newConfiguration/":"/configuration/";return"/wiki/branch/"+e+f+d+"/"+a.pageId}return"/osgi/pid/"+d}function A(a,b,c,d,e,f,g){void 0===g&&(g=null),Wiki.initScope(a,b,c),a.versionId=b.versionId||a.branch,a.profileId=b.profileId||Fabric.pagePathToProfileId(a.pageId),a.pageId||(a.pageId=Fabric.fabricTopLevel+Fabric.profilePath(a.profileId)),g||(g=function(){return null});var h=a.versionId,i=a.profileId;a.profileNotRunning=!1,a.profileMetadataMBean=null,h&&i?(a.inFabricProfile=!0,a.configurationsLink="/wiki/branch/"+h+"/configurations/"+a.pageId,a.profileMetadataMBean=v(f),a.profileMetadataMBean?(a.profileNotRunning=!0,a.jolokia=e,a.workspace=f,g()):Fabric.profileJolokia(e,i,h,function(b){b?(a.jolokia=b,a.workspace=Core.createRemoteWorkspace(b,c,d)):(a.jolokia=e,a.workspace=f,a.profileNotRunning=!0,a.profileMetadataMBean=v(f)),g()})):(a.configurationsLink="/osgi/configurations",a.jolokia=e,a.workspace=f,g())}function B(a,b,c,d){var e=t(a),f=null;return b&&e&&(f=b.execute(e,"getProperties",c,onSuccess(d))),f}function C(a,b){if(a&&b){if(a.startsWith(b))return a.substring(b.length+1);var c=b.lastIndexOf(".");if(c>0){var d=b.substring(0,c+1);return Core.trimLeading(a,d)}}return a}a.log=Logger.get("OSGi"),a.defaultBundleValues=b,a.getStateStyle=c,a.defaultServiceValues=d,a.defaultPackageValues=e,a.defaultConfigurationValues=f,a.parseActualPackages=g,a.parseManifestHeader=h,a.toCollection=j,a.labelBundleLinks=k,a.bundleLinks=l,a.pidLinks=m,a.findBundle=n,a.getSelectionBundleMBean=o,a.findFirstObjectName=p,a.getSelectionFrameworkMBean=q,a.getSelectionServiceMBean=r,a.getSelectionPackageMBean=s,a.getSelectionConfigAdminMBean=t,a.getMetaTypeMBean=u,a.getProfileMetadataMBean=v,a.getHawtioOSGiToolsMBean=w,a.getHawtioConfigAdminMBean=x,a.createConfigPidLink=y,a.createConfigPidPath=z,a.initProfileScope=A,a.getConfigurationProperties=B,a.removeFactoryPidPrefix=C}(Osgi||(Osgi={}));var Maven;!function(a){function b(a){if(a){var b=a.mbeanTypesToDomain.Indexer||{},c=b.hawtio||{};return c.objectName}return null}function c(a){if(a){var b=a.mbeanTypesToDomain.AetherFacade||{},c=b.hawtio||{};return c.objectName}return null}function d(a){var b=null;if(a)if(a.startsWith("mvn:"))b=a.substring(4);else{var c=a.indexOf(":mvn:");c>0&&(b=a.substring(c+5))}return b?"#/maven/artifact/"+b:null}function e(a){var b=(a.group||a.groupId)+"/"+(a.artifact||a.artifactId);return a.version&&(b+="/"+a.version),a.classifier&&(b+="/"+a.classifier),a.packaging&&(b+="/"+a.packaging),b}function f(c,d,e,f,g){var h=b(e);if(!angular.isDefined(h))return c.when([]);var i=g.split("/");return 1===i.length?a.completeGroupId(h,c,d,e,f,g,null,null):2===i.length?a.completeArtifactId(h,c,d,e,f,i[0],i[1],null,null):3===i.length?a.completeVersion(h,c,d,e,f,i[0],i[1],i[2],null,null):c.when([])}function g(a,b,c,d,e,f,g,h,i,j){var k=b.defer();return e.request({type:"exec",mbean:a,operation:"versionComplete(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)",arguments:[f,g,h,i,j]},{method:"POST",success:function(a){c.$apply(function(){k.resolve(a.value.sortBy().first(15))})},error:function(a){c.$apply(function(){console.log("got back an error: ",a),k.reject()})}}),k.promise}function h(a,b,c,d,e,f,g,h,i){var j=b.defer();return e.request({type:"exec",mbean:a,operation:"artifactIdComplete(java.lang.String, java.lang.String, java.lang.String, java.lang.String)",arguments:[f,g,h,i]},{method:"POST",success:function(a){c.$apply(function(){j.resolve(a.value.sortBy().first(15))})},error:function(a){c.$apply(function(){console.log("got back an error: ",a),j.reject()})}}),j.promise}function i(a,b,c,d,e,f,g,h){if(f.length<5)return b.when([]);var i=b.defer();return e.request({type:"exec",mbean:a,operation:"groupIdComplete(java.lang.String, java.lang.String, java.lang.String)",arguments:[f,g,h]},{method:"POST",success:function(a){c.$apply(function(){i.resolve(a.value.sortBy().first(15))})},error:function(a){console.log("got back an error: ",a),c.$apply(function(){i.reject()})}}),i.promise}function j(b,c){b.detailLink=function(a){var b=a.groupId,c=a.artifactId,d=a.version||"",e=a.classifier||"",f=a.packaging||"";return b&&c?"#/maven/artifact/"+b+"/"+c+"/"+d+"/"+e+"/"+f:""},b.javadocLink=function(a){var b=a.groupId,c=a.artifactId,d=a.version;return b&&c&&d?"javadoc/"+b+":"+c+":"+d+"/":""},b.versionsLink=function(a){var b=a.groupId,c=a.artifactId,d=a.classifier||"",e=a.packaging||"";return b&&c?"#/maven/versions/"+b+"/"+c+"/"+d+"/"+e:""},b.dependenciesLink=function(a){var b=a.groupId,c=a.artifactId,d=a.classifier||"",e=a.packaging||"",f=a.version;return b&&c?"#/maven/dependencies/"+b+"/"+c+"/"+f+"/"+d+"/"+e:""},b.hasDependencyMBean=function(){var b=a.getAetherMBean(c);return angular.isDefined(b)},b.sourceLink=function(a){var b=a.groupId,c=a.artifactId,d=a.version;return b&&c&&d?"#/source/index/"+b+":"+c+":"+d+"/":""}}a.log=Logger.get("Maven"),a.getMavenIndexerMBean=b,a.getAetherMBean=c,a.mavenLink=d,a.getName=e,a.completeMavenUri=f,a.completeVersion=g,a.completeArtifactId=h,a.completeGroupId=i,a.addMavenFunctions=j}(Maven||(Maven={}));var Fabric;!function(a){var b=function(){function b(){this.restrict="A",this.replace=!0,this.templateUrl=a.templatePath+"profileDetailsDirective.html",this.scope={versionId:"=",profileId:"="},this.controller=["$scope","$element","$attrs","$routeParams","jolokia","$location","workspace","marked","$q",function(b,c,d,e,f,g,h,i,j){function k(c){angular.isDefined(b.row)||(b.loading=!1);var d=angular.toJson(c.value);if(b.profileResponseJson!==d){b.activeTab||(b.activeTab="features"),b.profileResponseJson=d,b.row=c.value;var e=b.row.id,f=b.row.version;b.summaryHtml=angular.isDefined(b.row)&&null!=b.row.summaryMarkdown?i(b.row.summaryMarkdown):null,b.row.systemProperties=[],angular.forEach(b.row.containerConfiguration,function(a,c){c.startsWith("system.")&&b.row.systemProperties.push({name:c.substring(7),value:a})}),b.sysPropsTableData={rows:b.row.systemProperties},b.configFolderLink=null,b.hasFabricWiki()&&e&&f&&(b.configFolderLink="#/wiki/branch/"+f+"/view/fabric/profiles/"+a.profilePath(e)),b.row.iconURL=a.toIconURL(b,c.value.iconURL),a.log.info("Icon URL "+b.row.iconURL),Core.$apply(b)}}b.inDirective=!0,b.managerMBean=a.managerMBean,a.initScope(b,g,f,h),a.loadRestApi(f,h,b),b.loading=!0,b.mavenMBean=Maven.getMavenIndexerMBean(h),angular.isDefined(b.versionId)||(b.versionId=e.versionId),angular.isDefined(b.profileId)||(b.profileId=e.profileId),b.newFileDialog=!1,b.deleteFileDialog=!1,b.newFileName="",b.markedForDeletion="",b.newProfileName="",b.deleteThingDialog=!1,b.changeParentsDialog=!1,b.removeParentDialog=!1,b.newThingName="",b.selectedParents=[],b.profilePath=a.profilePath,b.pageId=a.fabricTopLevel+a.profilePath(b.profileId),b.gotoCreateContainer=function(){var a=g.path();g.path("/fabric/containers/createContainer").search({versionId:b.versionId,profileIds:b.profileId,hideProfileSelector:!0,returnTo:a,nextPage:a})};var l=b.versionId,m=b.profileId;l&&l&&a.profileJolokia(f,m,l,function(a){b.profileJolokia=a,a||(b.profileNotRunning=!0,b.profileMetadataMBean=Osgi.getProfileMetadataMBean(h))}),b.$watch("activeTab",function(a,c){a!==c&&(b.newThingName="")}),b.$watch("versionId",function(){angular.isDefined(b.versionId)&&angular.isDefined(b.profileId)&&b.doRegister()}),b.$watch("profileId",function(){angular.isDefined(b.versionId)&&angular.isDefined(b.profileId)&&b.doRegister()}),b.doCompletionFabric=function(a){return a.startsWith("mvn:")?(b.prefix="mvn:",Maven.completeMavenUri(j,b,h,f,a.from(4))):(b.prefix="",j.when([]))},b.uriParts=[],b.$watch("newThingName",function(a,c){a!==c&&(b.uriParts=a.split("/"))}),b.$watch("uriParts",function(a,c){if(a!==c){if(!b.prefix||""===b.prefix)return;if(a&&a.length>0&&!a.first().startsWith(b.prefix)){if(""===a.first()||a.first().length<b.prefix.length)return;if(0===c.length)return;if(1===c.length)b.newThingName=b.prefix+a.first();else{var d=c.first(c.length-1).include(a.first());b.newThingName=d.join("/")}}}},!0),b.doRegister=function(){Core.unregister(f,b),b.versionId&&b.profileId&&!b.versionId.isBlank()&&!b.profileId.isBlank()&&Core.register(f,b,{type:"exec",mbean:a.managerMBean,operation:"getProfile(java.lang.String, java.lang.String)",arguments:[b.versionId,b.profileId]},onSuccess(k))},b.showChangeParentsDialog=function(){b.selectedParents=b.row.parentIds.map(function(a){return{id:a,selected:!0}}),b.changeParentsDialog=!0},b.removeParentProfile=function(a){b.markedForDeletion=a,b.removeParentDialog=!0},b.doRemoveParentProfile=function(){var c=b.row.parentIds.exclude(b.markedForDeletion);a.changeProfileParents(f,b.versionId,b.profileId,c,function(){Core.notification("success","Removed parent profile "+b.markedForDeletion+" from "+b.profileId),Core.$apply(b)},function(a){Core.notification("error","Failed to change parent profiles of "+b.profileId+" due to "+a.error),Core.$apply(b)})},b.changeAttribute=function(c,d){f.request({type:"exec",method:"post",mbean:a.managerMBean,operation:"setProfileAttribute",arguments:[b.versionId,b.profileId,c,d]},{success:function(){a.log.debug("Set attribute ",c," to ",d),Core.$apply(b)},error:function(e){a.log.debug("Failed to set attribute ",c," to ",d," due to ",e.error),Core.$apply(b)}})},b.doChangeParents=function(){b.changeParentsDialog=!1;var c=b.selectedParents.map(function(a){return a.id});a.changeProfileParents(f,b.versionId,b.profileId,c,function(){a.log.debug("Successfully changed parent profiles of ",b.profileId),Core.$apply(b)},function(c){a.log.debug("Failed to change parent profiles of ",b.profileId," due to ",c.error),Core.$apply(b)})},b["goto"]=function(a){g.url(a)},b.addNewThing=function(a,c,d){Core.isBlank(b.newThingName)||(b.thingName=a,b.currentThing=d,b.currentThingType=c,b.doAddThing())},b.deleteThing=function(a,c,d,e){b.thingName=a,b.currentThing=d,b.currentThingType=c,b.currentThingItem=e,b.deleteThingDialog=!0},b.updateThing=function(a,c,d){b.thingName=a,b.currentThing=d,b.currentThingType=c,b.callSetProfileThing("Changed","change",a)},b.mavenLink=function(a){return Maven.mavenLink(a)},b.callSetProfileThing=function(c,d,e){f.request({type:"exec",mbean:a.managerMBean,operation:"setProfile"+b.currentThingType+"(java.lang.String, java.lang.String, java.util.List)",arguments:[b.versionId,b.profileId,b.currentThing]},{method:"POST",success:function(){Core.notification("success",c+" "+e),b.newThingName="",Core.$apply(b)},error:function(a){Core.notification("error","Failed to "+d+" "+e+" due to "+a.error),Core.$apply(b)}})},b.doDeleteThing=function(){b.currentThing.remove(b.currentThingItem),b.callSetProfileThing("Deleted","delete",b.currentThingItem)},b.doAddThing=function(){b.currentThing.any(b.newThingName)?Core.notification("error","There is already a "+b.thingName+" with the name "+b.newThingName):(b.currentThing.push(b.newThingName),b.addThingDialog=!1,b.callSetProfileThing("Added","add",b.newThingName))},b.deleteFile=function(a){b.markedForDeletion=a,b.deleteFileDialog=!0},b.doDeleteFile=function(){b.deleteFileDialog=!1,a.deleteConfigFile(f,b.versionId,b.profileId,b.markedForDeletion,function(){Core.notification("success","Deleted file "+b.markedForDeletion),b.markedForDeletion="",Core.$apply(b)},function(a){Core.notification("error","Failed to delete file "+b.markedForDeletion+" due to "+a.error),b.markedForDeletion="",Core.$apply(b)})},b.doCreateFile=function(){b.newFileDialog=!1,a.newConfigFile(f,b.versionId,b.profileId,b.newFileName,function(){Core.notification("success","Created new configuration file "+b.newFileName),g.path("/fabric/profile/"+b.versionId+"/"+b.profileId+"/"+b.newFileName)},function(a){Core.notification("error","Failed to create "+b.newFileName+" due to "+a.error)})},b.copyProfile=function(){if(b.copyProfileDialog=!1,b.profileId.has("-")&&!b.newProfileName.has("-")){var c=b.profileId.split("-");c.pop(),c.push(b.newProfileName),b.newProfileName=c.join("-")}var d=f.request({type:"exec",mbean:a.managerMBean,operation:"getProfile(java.lang.String,java.lang.String)",arguments:[b.versionId,b.newProfileName]});return d.value?(Core.notification("error","Failed to create new profile "+b.newProfileName+". A profile with the same name already exists."),void Core.$apply(b)):(Core.notification("info","Copying "+b.profileId+" to "+b.newProfileName),void a.copyProfile(f,b.versionId,b.profileId,b.newProfileName,!0,function(){Core.notification("success","Created new profile "+b.newProfileName),a.gotoProfile(h,f,localStorage,g,b.versionId,{id:b.newProfileName}),Core.$apply(b)},function(a){Core.notification("error","Failed to create new profile "+b.newProfileName+" due to "+a.error),Core.$apply(b)}))},b.sysPropsTableConfig={data:"sysPropsTableData.rows",multiSelect:!1,showSelectionCheckbox:!1,enableRowClickSelection:!0,primaryKeyProperty:"name",properties:{rows:{items:{properties:{name:{description:"System property name",type:"java.lang.String"},value:{description:"System property value",type:"java.lang.String"}}}}},displayFooter:!1,showFilter:!1,columnDefs:[{field:"name",displayName:"Name"},{field:"value",displayName:"Value"}]},b.$on("hawtio.datatable.sysPropsTableData.rows",function(c,d){var e={};angular.forEach(d,function(a){e[a.name]=a.value}),f.request({type:"exec",mbean:a.managerMBean,operation:"setProfileSystemProperties(java.lang.String, java.lang.String, java.util.Map)",arguments:[b.versionId,b.profileId,e]},{method:"POST",success:function(){Core.notification("success","System properties updated"),Core.$apply(b)},error:function(a){Core.notification("error","Failed to update system properties due to "+a.error),Core.$apply(b)}})})}]}return b}();a.ProfileDetails=b}(Fabric||(Fabric={}));var Fabric;!function(a){var b=function(){function b(){this.restrict="A",this.replace=!0,this.templateUrl=a.templatePath+"profileSelector.html",this.scope={selectedProfiles:"=fabricProfileSelector",versionId:"=",filterWatch:"@",selectedWatch:"@",clearOnVersionChange:"@",noLinks:"@",showHeader:"@",useCircles:"@",expanded:"@",excludedProfiles:"=",includedProfiles:"="},this.controller=["$scope","$element","$attrs","workspace","jolokia","localStorage","$location",function(b,c,d,e,f,g,h){b.profiles=[],b.responseJson="",b.filterText="",b.clearOnVersionChange=!1,b.noLinks=!1,b.selectedAll=!1,b.indeterminate=!1,b.showFilter=!0,b.useCircles=!1,b.expanded=!1,b.tree=[],b.showProfile=function(a){return Core.matchFilterIgnoreCase(a.id,b.filterText)},b.showBranch=function(a){return b.filterText.isBlank()||a.profiles.some(function(a){return Core.matchFilterIgnoreCase(a.id,b.filterText)})},b["goto"]=function(c){a.gotoProfile(e,f,g,h,b.versionId,c)},b.render=function(a){var c=angular.toJson(a.value);if(b.responseJson!==c){b.responseJson=c;var d=b.selectedProfiles;b.profiles=a.value.sortBy(function(a){return a.id}),angular.forEach(d,function(a){var c=b.profiles.find(function(b){return b.id===a.id});c&&a&&(c.selected=a.selected)}),b.profiles=b.profiles.exclude(function(a){return a.hidden}),b.excludedProfiles&&(b.profiles=b.excluded()),b.includedProfiles&&(b.profiles=b.included());var e=[];b.profiles.each(function(a){var b=a.id.split("-");a.name=b.last(),a.path=b.exclude(a.name).join(" / "),e.push(a.path)}),e=e.unique().sortBy("length").sortBy(function(a){return a});var f=[];e.forEach(function(a){var c={expanded:b.expanded,path:a,profiles:b.profiles.filter(function(b){return b.path===a})};f.push(c)}),b.tree=f,Core.$apply(b)}},b.excluded=function(){return b.profiles.exclude(function(a){return b.excludedProfiles.some(function(b){return b===a.id})})},b.included=function(){return b.profiles.exclude(function(a){return b.includedProfiles.none(function(b){return b===a.id})})},b.isOpen=function(a){return""!==b.filterText?"opened":a.expanded?"opened":"closed"},b.isOpenIcon=function(a){return a.expanded?"icon-folder-open":"icon-folder-closed"},b.$watch("includedProfiles",function(a,c){a!==c&&b.init()},!0),b.$watch("excludedProfiles",function(a,c){a!==c&&b.init()},!0),b["abstract"]=function(){return b.profiles.filter(function(a){return a["abstract"]
})},b.selected=function(){return b.profiles.filter(function(a){return a.selected})},b.selectAll=function(){b.profiles.each(function(a){a.selected=!0})},b.selectNone=function(){b.profiles.each(function(a){delete a.selected})},b.$parent.profileSelectAll=b.selectAll,b.$parent.profileSelectNone=b.selectNone,b.getSelectedClass=function(a){return a["abstract"]?"abstract":a.selected?"selected":""},b.$watch("selectedAll",function(a,c){b.indeterminate||a===c||(a?b.selectAll():b.selectNone())}),b.$watch("profiles",function(a,c){a!==c&&(b.selectedProfiles=b.selected())},!0),b.$on("fabricProfileRefresh",function(){b.versionId&&f.request({type:"exec",mbean:a.managerMBean,operation:"getProfiles(java.lang.String, java.util.List)",arguments:[b.versionId,["id","hidden"]]},{method:"POST",success:function(a){b.render(a)}})}),b.init=function(){a.log.debug("Initializing profile selector, version: ",b.versionId),b.responseJson=null,Core.unregister(f,b),""!==b.versionId&&(b.clearOnVersionChange&&b.selectNone(),b.versionId&&Core.register(f,b,{type:"exec",mbean:a.managerMBean,operation:"getProfiles(java.lang.String, java.util.List)",arguments:[b.versionId,["id","hidden","abstract"]]},onSuccess(b.render,{error:function(c){a.log.debug("Error fetching profiles: ",c.error," unregistering poller"),Core.unregister(f,b)}})))},b.$watch("versionId",function(c,d){a.log.debug("versionId, newValue: ",c," oldValue: ",d),b.versionId&&""!==b.versionId&&(a.log.debug("Unregistering old poller"),Core.unregister(f,b),f.request({type:"exec",mbean:a.managerMBean,operation:"versions()",arguments:[]},{method:"POST",success:function(d){d.value.some(function(a){return a.id===c})&&(a.log.debug("registering new poller"),b.init(),Core.$apply(b))},error:function(){Core.$apply(b)}}))})}],this.link=function(a,b,c){var d=b.find("#selector");a.showFilter=angular.isDefined(c.showHeader)?c.showHeader:!0,angular.isDefined(c.filterWatch)&&a.$parent.$watch(c.filterWatch,function(b,c){b!==c&&(a.filterText=b)}),a.$watch("indeterminate",function(b,c){b!==c&&d.prop("indeterminate",a.indeterminate)}),a.$watch("selectedProfiles",function(b,c){b!==c&&(a.selectedProfiles.length>0?a.selectedProfiles.length!==a.profiles.length?(a.indeterminate=!0,a.selectedAll=!1,a.$parent.profileSomeSelected=!0,a.$parent.profileNoneSelected=!1,a.$parent.profileAllSelected=!1):(a.indeterminate=!1,a.selectedAll=!0,a.$parent.profileSomeSelected=!1,a.$parent.profileNoneSelected=!1,a.$parent.profileAllSelected=!0):(a.indeterminate=!1,a.selectedAll=!1,a.$parent.profileSomeSelected=!1,a.$parent.profileNoneSelected=!0,a.$parent.profileAllSelected=!1))},!0)}}return b}();a.ProfileSelector=b}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.TestController",["$scope","jolokia","$q","workspace","$templateCache",function(b,c,d,e,f){b.mavenMBean=Maven.getMavenIndexerMBean(e),b.html="text/html",b.versionSelector=f.get("versionSelectorTemplate"),b.profileIncludes=f.get("profile-includes"),b.profileExcludes=f.get("profile-excludes"),b.containerList=f.get("containerListTemplate"),b.profileLink=f.get("profileLinkTemplate"),b.version={},b.versionId="",b.someUri="",b.uriParts=[],b.version={},b.osp=[],b.vid="1.0",b.someProfiles=["a-mq","aws-ec2"],b.selectedProfiles=[{id:"1-dot-0",selected:!0},{id:"a-mq",selected:!0}],b.selectedProfilesString="",b.$watch("version",function(a,c){a!==c&&b.version&&!Object.equal(b.version,{})&&(b.versionId=b.version.id)}),b.$watch("osp",function(){b.selectedProfilesString=angular.toJson(b.osp)}),b.$watch("someUri",function(a,c){a!==c&&(b.uriParts=a.split("/"))}),b.$watch("uriParts",function(a,c){if(a!==c&&1===a.length&&a.length<c.length&&""!==c.last()&&a.first().has(c.last())){var d=c.first(c.length-1).include(a.first());b.someUri=d.join("/")}},!0),b.doCompletionMaven=function(a){return Maven.completeMavenUri(d,b,e,c,a)},b.doCompletionFabric=function(f){return a.completeUri(d,b,e,c,f)}}])}(Fabric||(Fabric={}));var Fabric;!function(a){function b(b){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"versionSelector.html",scope:{selectedVersion:"=fabricVersionSelector",availableVersions:"=?",menuBind:"=?",exclude:"@"},controller:["$scope","$element","$attrs","jolokia",function(b,c,d,e){function f(a,b){return angular.isString(b)&&(b=b.has("[")&&b.has("]")?angular.fromJson(b):[b]),b&&0!==b.length?a.exclude(function(a){return b.some(function(b){return b===a.id})}):a}function g(){return b.versions.map(function(a){return{title:a.id,action:function(){b.selectedVersion=a,Core.isBlank(b.onPick)||b.$parent.$eval(b.onPick,{version:a.id})}}})}function h(c){b.versions=a.sortVersions(c,b.desc),b.versions=f(b.versions,b.exclude),b.config&&(b.config.items=g(b.versions)),b.availableVersions=b.versions}b.versions=[],b.responseJson="",b.$watch("selectedVersion",function(a,c){a!==c&&(b.selectedVersion=b.versions.find(a&&"id"in a?function(b){return b.id===a.id}:function(a){return a.defaultVersion}))}),b.$watch("versions",function(a,c){a!==c&&(b.selectedVersion=b.versions.find(b.selectedVersion&&"id"in b.selectedVersion?function(a){return a.id===b.selectedVersion.id}:function(a){return a.defaultVersion}))},!0),b.$watch("exclude",function(a,c){if(a!==c&&b.responseJson){var d=angular.fromJson(b.responseJson);h(d)}}),b.render=function(a){var c=angular.toJson(a.value);b.responseJson!==c&&(b.responseJson=c,h(a.value),Core.$apply(b))},Core.register(e,b,{type:"exec",mbean:a.managerMBean,operation:"versions(java.util.List)",arguments:[["id","defaultVersion"]]},onSuccess(b.render))}],link:function(a,c,d){a.template=b.get("withSelect"),Core.parseBooleanValue(d.useMenu)&&(a.config={title:"Version"},Core.isBlank(d.menuTitle)||(a.config.title=d.menuTitle),Core.isBlank(d.menuBind)||a.$watch("menuBind",function(b){Core.isBlank(b)||(a.config.title=b)}),Core.isBlank(d.onPick)||(a.onPick=d.onPick),Core.isBlank(d.useIcon)||(a.config.icon=d.useIcon),a.desc="desc"in d,a.template=b.get("withMenu"))}}}a.VersionSelector=b}(Fabric||(Fabric={}));var ForceGraph;!function(a){var b="forceGraph";a._module=angular.module(b,["bootstrap","ngResource"]),a._module.directive("hawtioForceGraph",function(){return new a.ForceGraphDirective}),hawtioPluginLoader.addModule(b)}(ForceGraph||(ForceGraph={}));var ForceGraph;!function(a){var b=(Logger.get("ForceGraph"),function(){function a(){this.restrict="A",this.replace=!0,this.transclude=!1,this.scope={graph:"=graph",nodesize:"@",selectedModel:"@",linkDistance:"@",markerKind:"@",charge:"@"},this.link=function(a,b){a.trans=[0,0],a.scale=1,a.$watch("graph",function(){c()}),a.redraw=function(){a.trans=d3.event.translate,a.scale=d3.event.scale,a.viewport.attr("transform","translate("+a.trans+") scale("+a.scale+")")},a.tick=function(){a.graphEdges.attr("d",function(a){var b=a.target.x-a.source.x,c=a.target.y-a.source.y,d=Math.sqrt(b*b+c*c);return"M"+a.source.x+","+a.source.y+"A"+d+","+d+" 0 0,1 "+a.target.x+","+a.target.y}),a.graphNodes.attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),a.graphLabels.attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),(Object.hasOwnProperty.call(window,"ActiveXObject")||!window.ActiveXObject)&&a.svg.selectAll(".link").each(function(){this.parentNode.insertBefore(this,this)})},a.mover=function(b){null!=b.popup&&$("#pop-up").fadeOut(100,function(){$("#pop-up-title").html(null!=b.popup.title?b.popup.title:""),$("#pop-up-content").html(null!=b.popup.content?b.popup.content:"");var c=b.x*a.scale+a.trans[0]+20,d=b.y*a.scale+a.trans[1]+20;$("#pop-up").css({left:c,top:d}),$("#pop-up").fadeIn(100)})},a.mout=function(){$("#pop-up").fadeOut(50)};var c=function(){function c(a){return a.image&&a.image.url}var d=$(b),e=$(b).parent().height(),f=$(b).parent().width();d.children("svg").remove(),a.svg=d3.select(d[0]).append("svg").attr("width",f).attr("height",e);var g=null;if(a.graph&&(g=a.graph.linktypes),g&&(a.svg.append("svg:defs").selectAll("marker").data(g).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-1.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5"),a.svg.append("svg:g").append("svg:rect").attr("class","graphbox.frame").attr("width",f).attr("height",e),a.viewport=a.svg.append("svg:g").call(d3.behavior.zoom().on("zoom",a.redraw)).append("svg:g"),a.viewport.append("svg:rect").attr("width",1e6).attr("height",1e6).attr("class","graphbox").attr("transform","translate(-50000, -500000)"),a.graph)){var h=a.$parent||a,i=a.selectedModel||"selectedNode";a.force=d3.layout.force().nodes(a.graph.nodes).links(a.graph.links).size([f,e]).on("tick",a.tick),angular.isDefined(a.linkDistance)&&a.force.linkDistance(a.linkDistance),angular.isDefined(a.charge)&&a.force.charge(a.charge);var j=a.markerKind||"marker-end";a.graphEdges=a.viewport.append("svg:g").selectAll("path").data(a.force.links()).enter().append("svg:path").attr("class",function(a){return"link "+a.type}).attr(j,function(a){return"url(#"+a.type+")"}),a.graphNodes=a.viewport.append("svg:g").selectAll("circle").data(a.force.nodes()).enter().append("a").attr("xlink:href",function(a){return a.navUrl}).on("mouseover.onLink",function(a){var b=d3.select(d3.event.target);b.classed("selected",!0),h[i]=a,Core.pathSet(h,i,a),Core.$apply(h)}).on("mouseout.onLink",function(){var a=d3.select(d3.event.target);a.classed("selected",!1)}),a.graphNodes.filter(function(a){return null!=a.image}).append("image").attr("xlink:href",function(a){return a.image.url}).attr("x",function(a){return-(a.image.width/2)}).attr("y",function(a){return-(a.image.height/2)}).attr("width",function(a){return a.image.width}).attr("height",function(a){return a.image.height}),a.graphNodes.filter(function(a){return!c(a)}).append("circle").attr("class",function(a){return a.type}).attr("r",function(b){return b.size||a.nodesize}),a.graphLabels=a.viewport.append("svg:g").selectAll("g").data(a.force.nodes()).enter().append("svg:g"),a.graphLabels.append("svg:text").attr("x",8).attr("y",".31em").attr("class","shadow").text(function(a){return a.name}),a.graphLabels.append("svg:text").attr("x",8).attr("y",".31em").text(function(a){return a.name}),a.force.start(),a.graphNodes.call(a.force.drag).on("mouseover",a.mover).on("mouseout",a.mout)}}}}return a}());a.ForceGraphDirective=b}(ForceGraph||(ForceGraph={}));var ForceGraph;!function(a){var b=function(){function a(){this.nodes={},this.links=[],this.linkTypes={}}return a.prototype.addNode=function(a){this.nodes[a.id]||(this.nodes[a.id]=a)},a.prototype.getNode=function(a){return this.nodes[a]},a.prototype.hasLinks=function(a){var b=this,c=!1;return this.links.forEach(function(d){(d.source.id==a||d.target.id==a)&&(c=c||null!=b.nodes[d.source.id]&&null!=b.nodes[d.target.id])}),c},a.prototype.addLink=function(a,b,c){null!=this.nodes[a]&&null!=this.nodes[b]&&(this.links.push({source:this.nodes[a],target:this.nodes[b],type:c}),this.linkTypes[c]||(this.linkTypes[c]={used:!0}))},a.prototype.nodeIndex=function(a,b){var c=-1,d=0;for(d=0;d<b.length;d++){var e=b[d];if(e.id==a){c=d;break}}return c},a.prototype.filterNodes=function(a){var b={},c=[];d3.values(this.nodes).forEach(function(c){a(c)&&(b[c.id]=c)}),this.links.forEach(function(a){b[a.source.id]&&b[a.target.id]&&c.push(a)}),this.nodes=b,this.links=c},a.prototype.buildGraph=function(){var a=this,b=[],c=d3.keys(this.linkTypes),d=[];return d3.values(this.nodes).forEach(function(a){(null==a.includeInGraph||a.includeInGraph)&&(a.includeInGraph=!0,b.push(a))}),this.links.forEach(function(c){null!=a.nodes[c.source.id]&&null!=a.nodes[c.target.id]&&a.nodes[c.source.id].includeInGraph&&a.nodes[c.target.id].includeInGraph&&d.push({source:a.nodeIndex(c.source.id,b),target:a.nodeIndex(c.target.id,b),type:c.type})}),{nodes:b,links:d,linktypes:c}},a}();a.GraphBuilder=b}(ForceGraph||(ForceGraph={}));var Forms;!function(a){a._module.directive("hawtioFormMap",[function(){return{restrict:"A",replace:!0,templateUrl:UrlHelpers.join(a.templateUrl,"formMapDirective.html"),scope:{description:"@",entity:"=",mode:"=",data:"=",name:"@"},link:function(b){b.deleteKey=function(c){try{delete b.entity[b.name][""+c]}catch(d){a.log.debug("failed to delete key: ",c," from entity: ",b.entity)}},b.addItem=function(a){b.entity||(b.entity={}),Core.pathSet(b.entity,[b.name,a.key],a.value),b.showForm=!1},b.$watch("showForm",function(a){a&&(b.newItem={key:void 0,value:void 0})})}}}])}(Forms||(Forms={}));var Forms;!function(a){a.FormTestController=a._module.controller("Forms.FormTestController",["$scope",function(a){a.editing=!1,a.html="text/html",a.javascript="javascript",a.basicFormEx1Entity={key:"Some key",value:"Some value"},a.basicFormEx1EntityString=angular.toJson(a.basicFormEx1Entity,!0),a.basicFormEx1Result="",a.toggleEdit=function(){a.editing=!a.editing},a.view=function(){return a.editing?"edit":"view"},a.basicFormEx1='<div simple-form name="some-form" action="#/forms/test" method="post" data="basicFormEx1SchemaObject" entity="basicFormEx1Entity" onSubmit="callThis()"></div>',a.toObject=function(a){return angular.fromJson(a.replace("'",'"'))},a.fromObject=function(b){return angular.toJson(a[b],!0)},a.basicFormEx1Schema='{\n   "properties": {\n     "key": {\n       "description": "Argument key",\n       "type": "java.lang.String"\n     },\n     "value": {\n       "description": "Argument Value",\n       "type": "java.lang.String"\n     },\n     "longArg": {\n       "description": "Long argument",\n       "type": "Long",\n       "minimum": "5",\n       "maximum": "10"\n     },\n     "intArg": {\n       "description": "Int argument",\n       "type": "Integer"\n     },\n     "objectArg": {\n       "description": "some object",\n       "type": "object"\n     },\n     "booleanArg": {\n       "description": "Some boolean value",\n       "type": "java.lang.Boolean"\n     }\n   },\n   "description": "Show some stuff in a form",\n   "type": "java.lang.String",\n   "tabs": {\n     "Tab One": ["key", "value"],\n     "Tab Two": ["*"],\n     "Tab Three": ["booleanArg"]\n   }\n}',a.basicFormEx1SchemaObject=a.toObject(a.basicFormEx1Schema),a.updateSchema=function(){a.basicFormEx1SchemaObject=a.toObject(a.basicFormEx1Schema)},a.updateEntity=function(){a.basicFormEx1Entity=angular.fromJson(a.basicFormEx1EntityString)},a.hawtioResetEx='<a class="btn" href="" hawtio-reset="some-form"><i class="icon-refresh"></i> Clear</a>',a.hawtioSubmitEx='      <a class="btn" href="" hawtio-submit="some-form"><i class="icon-save"></i> Save</a>',a.callThis=function(b,c){a.basicFormEx1Result=angular.toJson(b,!0),Core.notification("success",'Form "'+c.get(0).name+'" submitted...'),Core.$apply(a)},a.config={name:"form-with-config-object",action:"/some/url",method:"post",data:"setVMOption",showtypes:"false"},a.cheese={key:"keyABC",value:"valueDEF",intArg:999},a.onCancel=function(a){Core.notification("success",'Cancel clicked on form "'+a.get(0).name+'"')},a.onSubmit=function(a,b){Core.notification("success",'Form "'+b.get(0).name+'" submitted... (well not really), data:'+JSON.stringify(a))},a.derp=function(a){Core.notification("error","derp with json "+JSON.stringify(a))},a.inputTableData={rows:[{id:"object1",name:"foo"},{id:"object2",name:"bar"}]},a.inputTableConfig={data:"inputTableData.rows",displayFooter:!1,showFilter:!1,showSelectionCheckbox:!1,enableRowClickSelection:!0,primaryKeyProperty:"id",properties:{rows:{items:{type:"string",properties:{id:{description:"Object ID",type:"java.lang.String"},name:{description:"Object Name",type:"java.lang.String"}}}}},columnDefs:[{field:"id",displayName:"ID"},{field:"name",displayName:"Name"}]}}])}(Forms||(Forms={}));var Health;!function(a){var b="health";a._module=angular.module(b,["bootstrap","ngResource","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/health",{templateUrl:"app/health/html/health.html"})}]),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry",function(b,c,d,e,f){d.health=e,f.addUserDoc("health","app/health/doc/help.md",function(){return a.hasHealthMBeans(c)}),c.topLevelTabs.push({id:"health",content:"Health",title:"View the health of the various sub systems",isValid:function(b){return a.hasHealthMBeans(b)},href:function(){return"#/health"},isActive:function(a){return a.isTopTabActive("health")}})}]),hawtioPluginLoader.addModule(b)}(Health||(Health={}));var Health;!function(a){a.HealthController=a._module.controller("Health.HealthController",["$scope","jolokia","workspace","$templateCache",function(b,c,d,e){function f(b){return angular.forEach(b,function(b){var c=b.domain;if(!c){var d=b.healthId;if(d){var e=d.lastIndexOf(".");if(e>0){c=d.substring(0,e);var f=a.healthDomains[c];f&&(c=f);var g=b.kind;g||(g=Core.humanizeValue(d.substring(e+1)),b.kind=g)}}b.domain=c}}),b}a.decorate(b),b.results=[],b.responses={},b.mbeans=[],b.mbeanStatus={},b.displays=[],b.page="",b.pageFilter="",b.$watch("mbeans",function(d){Core.unregister(c,b),d&&(b.mbeanStatus={},d.forEach(function(d){var e=Core.register(c,b,{type:"exec",mbean:d,operation:"healthList()"},{success:b.render,error:function(b){a.log.info("Failed to invoke healthList() on mbean: "+d+" due to: ",b.error),a.log.debug("Stack trace: ",b.stacktrace.split("\n")),e()}}),f=function(b){b.error.has("AttributeNotFoundException")||(a.log.info("Failed to read CurrentStatus on mbean: "+d+" due to: ",b.error),a.log.debug("Stack trace: ",b.stacktrace.split("\n")))};c.request({type:"read",mbean:d,attribute:"CurrentStatus"},{success:function(a){b.mbeanStatus[a.request.mbean]=a.value,Core.register(c,b,{type:"read",mbean:d,attribute:"CurrentStatus"},{success:function(a){a.value!==b.mbeanStatus[a.request.mbean]&&(b.mbeanStatus[a.request.mbean]=a.value,Core.$apply(b))},error:f})},error:f})}))},!0),b.getTitleClass=function(a){if(!a)return"warning";if(!a.values||0===a.values.length)return"ok";var b="ok";return a.values.forEach(function(a){"warning"!==b&&a.level&&"info"!==a.level.toLowerCase()&&(b="warning")}),b},b.getHumanName=function(a){var b=a;if(a.startsWith("org.apache.activemq")){var c=a.split(",");return c.forEach(function(a){if(a.startsWith("brokerName")){var c=a.split("=");c[1]&&(b="Broker: "+c[1])}}),b}if(a.startsWith("io.fabric8:service"))return"Fabric8";var c=a.split(",");return c.forEach(function(a){if(a.startsWith("desc")){var c=a.split("=");c[1]&&(b=c[1])}}),b},b.getMBeans=function(){var b=a.getHealthMBeans(d);if(a.log.debug("HealthMap: ",b),b){if(!angular.isArray(b))return[b.objectName];var c=b.map(function(a){return a.objectName});return a.log.debug("Health mbeans: ",c),c}return a.log.debug("No health mbeans found..."),[]},b.$on("jmxTreeUpdated",function(){b.mbeans=b.getMBeans()}),b.$on("$routeChangeSuccess",function(){b.mbeans=b.getMBeans()}),b.mbeans=b.getMBeans(),b.render=function(a){var c=a.request.mbean,d=a.value,g=angular.toJson(d);if(!(c in b.responses&&b.responses[c]===g)){b.responses[c]=g;var h=b.displays.find(function(a){return a.mbean===c});d=f(d),d=d.sortBy(function(a){return a.level?b.levelSorting[a.level]:99}),d.forEach(b.generateChartData),h?h.values=d:b.displays.push({mbean:c,values:d}),""===b.page&&(b.page=e.get("pageTemplate")),Core.$apply(b)}},b.filterValues=function(a){var c=angular.toJson(a);return c.has(b.pageFilter)},b.isPercentage=function(a){return void 0!==a&&a.toUpperCase().indexOf("PERCENT")>0?!0:!1}}])}(Health||(Health={}));var ArrayHelpers;!function(a){function b(a,b,c){void 0===c&&(c="id");var d=a.length;return a.remove(function(a){return!b.any(function(b){return b[c]===a[c]})}),a.length!==d}function c(a,c,d){void 0===d&&(d="id");var e=b(a,c,d);return c.forEach(function(b){var c=a.find(function(a){return a[d]===b[d]});c?b!==c&&(angular.copy(b,c),e=!0):(e=!0,a.push(b))}),e}a.removeElements=b,a.sync=c}(ArrayHelpers||(ArrayHelpers={}));var Infinispan;!function(a){var b=function(){function b(a,b){this.workspace=a,this.jolokia=b,this.cacheName=null,this.sessionId=null,this.useSessionIds=!0}return b.prototype.setCacheName=function(a){if(a){a=Core.trimQuotes(a);var b="(local)";a.endsWith(b)&&(a=a.substring(0,a.length-b.length))}this.cacheName&&this.cacheName===a||(this.sessionId&&this.deleteSession(this.sessionId),this.cacheName=a,this.createSession())},b.prototype.createSession=function(){var b=this;if(this.useSessionIds){var c=a.getInterpreterMBean(this.workspace);if(c){this.jolokia.execute(c,"createSessionId",this.cacheName,onSuccess(function(a){console.log("Has session ID: "+a),b.sessionId=a}))}else this.warnMissingMBean()}},b.prototype.execute=function(b,c){if(b){b=b.trim(),b.endsWith(";")||(b+=";");var d=this.useSessionIds?this.sessionId:null;if(this.useSessionIds||(b="cache "+this.cacheName+"; "+b),d||!this.useSessionIds){var e=a.getInterpreterMBean(this.workspace);e?this.jolokia.execute(e,"execute",d,b,onSuccess(c)):this.warnMissingMBean()}else Core.notification("warning","Cannot evaluate SQL as we don't have a sessionId yet!")}},b.prototype.deleteSession=function(){},b.prototype.warnMissingMBean=function(){Core.notification("error","No Interpreter MBean available")},b}();a.CLI=b}(Infinispan||(Infinispan={}));var Infinispan;!function(a){function b(a){if(a){var b=a._id;if(b){var c='name="',d=b.indexOf(c);if(d>0){d+=c.length;var e=b.indexOf('"',d+1);return e>0?b.substring(d,e):b.substring(d)}}return b}return null}function c(b){if(b){var c=b.findMBeanWithProperties(a.jmxDomain,{component:"Interpreter",type:"CacheManager"});if(c)return c.objectName}return null}function d(b){var c=b.selection;return c&&c.domain===a.jmxDomain?c.entries.name:null}a.infinispanCacheName=b,a.getInterpreterMBean=c,a.getSelectedCacheName=d}(Infinispan||(Infinispan={}));var Infinispan;!function(a){var b="infinispan";a.jmxDomain="";var c="org.infinispan",d="jboss.infinispan";a._module=angular.module(b,["bootstrap","ngResource","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/infinispan/query",{templateUrl:"app/infinispan/html/query.html"})}]),a._module.filter("infinispanCacheName",function(){return a.infinispanCacheName}),a._module.run(["workspace","viewRegistry","helpRegistry",function(b,e,f){a.jmxDomain=b.treeContainsDomainAndProperties(d)?d:c,e.infinispan="app/infinispan/html/layoutCacheTree.html",f.addUserDoc("infinispan","app/infinispan/doc/help.md",function(){return b.treeContainsDomainAndProperties(a.jmxDomain)});var g='<div class="ngCellText" title="Infinispan cache">{{row.entity | infinispanCacheName}}</div>',h=b.attributeColumnDefs;h[a.jmxDomain+"/Caches/folder"]=[{field:"_id",displayName:"Name",cellTemplate:g,width:"**"},{field:"numberOfEntries",displayName:"Entries"},{field:"hits",displayName:"Hits"},{field:"hitRatio",displayName:"Hit Ratio"},{field:"stores",displayName:"Stores"},{field:"averageReadTime",displayName:"Avg Read Time"},{field:"averageWriteTime",displayName:"Avg Write Time"}],b.topLevelTabs.push({id:"infinispan",content:"Infinispan",title:"View your distributed data",isValid:function(b){return b.treeContainsDomainAndProperties(a.jmxDomain)},href:function(){return"#/jmx/attributes?tab=infinispan"},isActive:function(a){return a.isTopTabActive("infinispan")}}),b.subLevelTabs.push({content:'<i class="icon-pencil"></i> Query',title:"Perform InSQL commands on the cache",isValid:function(b){return a.getSelectedCacheName(b)&&a.getInterpreterMBean(b)},href:function(){return"#/infinispan/query"}})}]),hawtioPluginLoader.addModule(b)}(Infinispan||(Infinispan={}));var Infinispan;!function(a){a._module.controller("Infinispan.QueryController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(a){if(b.output=null,a){var c=a.ERROR||"",d=a.STACKTRACE||"";if(c||d)d&&(c+="\n"+d),Core.notification("error",c);else{var e=a.OUTPUT;e?(b.output=e,console.log("==== output: "+e),Core.$apply(b)):Core.notification("error","No results!")}}else console.log("no output...")}function g(){var b=a.getSelectedCacheName(d);console.log("selected cacheName is: "+b),b&&h.setCacheName(b)}var h=new a.CLI(d,e);b.logs=[],b.filteredLogs=[],b.selectedItems=[],b.searchText="",b.filter={logLevelQuery:"",logLevelExactMatch:!1};var i=[{field:"key",displayName:"Key"},{field:"value",displayName:"Value"}];b.gridOptions={selectedItems:b.selectedItems,data:"filteredLogs",displayFooter:!1,showFilter:!1,filterOptions:{filterText:"searchText"},columnDefs:i,rowDetailTemplateId:"logDetailTemplate"},b.$on("$routeChangeSuccess",function(){setTimeout(g,50)}),b.$watch("workspace.selection",function(){g()}),b.doQuery=function(){b.sql&&h.execute(b.sql,f)}}])}(Infinispan||(Infinispan={}));var Infinispan;!function(a){a._module.controller("Infinispan.TreeController",["$scope","$location","workspace",function(b,c,d){function e(a,b){if(a){var c=a.children;c&&angular.forEach(a.children,function(a){if(a.objectName&&"Statistics"===a.title){var c=a.parent.parent.title||a.title,d=Core.humanizeValue(c),f=new Folder(d);f.addClass="org-infinispn-cache",f.typeName="Cache",f.key=b.key+"-"+c,f.objectName=a.objectName,f.domain=a.domain,f.entries=a.entries,b.children.push(f)}else e(a,b)})}}function f(){Jmx.updateTreeSelectionFromURL(c,$("#infinispantree"),!0)}b.$on("$routeChangeSuccess",function(){setTimeout(f,50)}),b.$watch("workspace.tree",function(){if(!d.moveIfViewInvalid()){var g=[],h=d.tree;if(h){var i=a.jmxDomain,j=h.get(i);if(j){var k=new Folder("Caches");k.domain=i,k.key="root-Infinispan-Caches",k.typeName="Caches",g.push(k),e(j,k)}var l=$("#infinispantree");Jmx.enableTree(b,c,d,l,g),setTimeout(f,50)}}})}])}(Infinispan||(Infinispan={}));var Insight;!function(a){a.pluginName="insight",a._module=angular.module(a.pluginName,["hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/insight/all",{templateUrl:"app/insight/html/all.html"}).when("/insight/jvms",{templateUrl:"app/insight/html/jvms.html"}).when("/insight/elasticsearch",{templateUrl:"app/insight/html/eshead.html"}).when("/insight/logs",{redirectTo:function(){return"/insight/dashboard?kbnId=app/insight/dashboards/logs&p=insight&tab=insight-logs"}}).when("/insight/camel",{redirectTo:function(){return"/insight/dashboard?kbnId=app/insight/dashboards/camel&p=insight&tab=insight-camel"}}).when("/insight/dashboard",{templateUrl:"../hawtio-kibana/app/partials/dashboard.html"})}]),a._module.run(["workspace","viewRegistry","helpRegistry","serviceIconRegistry","layoutFull",function(b,c,d,e,f){e.addIcons({title:"Fabric8 Insight",type:"icon",src:"icon-eye-open"},"org.fusesource.insight","io.fabric8.insight"),Perspective.metadata.insight={icon:{title:"Fabric8 Insight",type:"icon",src:"icon-eye-open"},label:"Insight",isValid:function(b){return a.hasInsight(b)},topLevelTabs:{includes:[{href:"#/camin"},{id:"insight-logs"},{id:"insight-camel"},{id:"insight-eshead"}]}},c.insight="../hawtio-kibana/app/partials/hawtioLayout.html",c.eshead=f,d.addUserDoc("insight","app/insight/doc/help.md",function(){return Fabric.hasFabric(b)&&a.hasInsight(b)}),b.topLevelTabs.push({id:"insight-metrics",content:"Metrics",title:"View Insight metrics",href:function(){return"#/insight/all"},isValid:function(b){return Fabric.hasFabric(b)&&a.hasInsight(b)}}),b.topLevelTabs.push({id:"insight-logs",content:"Logs",title:"View Insight Logs",href:function(){return"#/insight/logs"},isValid:function(b){return Fabric.hasFabric(b)&&a.hasInsight(b)&&a.hasKibana(b)},isActive:function(){return b.isTopTabActive("insight-logs")}}),b.topLevelTabs.push({id:"insight-camel",content:"Camel Events",title:"View Insight Camel",href:function(){return"#/insight/camel"},isValid:function(b){return Fabric.hasFabric(b)&&a.hasInsight(b)&&a.hasKibana(b)},isActive:function(){return b.isTopTabActive("insight-camel")}}),b.topLevelTabs.push({id:"insight-eshead",content:"Elasticsearch",title:"View Insight Elasticsearch",href:function(){return"#/insight/elasticsearch?tab=eshead"},isValid:function(b){return Fabric.hasFabric(b)&&a.hasInsight(b)&&a.hasEsHead(b)},isActive:function(){return b.isTopTabActive("insight-eshead")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(Insight||(Insight={}));var Insight;!function(a){a._module.controller("Insight.AllController",["$scope","jolokia","localStorage","workspace",function(b,c,d,e){function f(c){Object.equal(b.result,c.value)||(b.result=c.value,b.containers=[],b.profiles=[a.allContainers],b.versions=[],b.result.forEach(function(a){b.profiles=b.profiles.union(a.profileIds.map(function(a){return{id:a}})),b.versions=b.versions.union([a.versionId]),b.containers.push({name:a.id,alive:a.alive,version:a.versionId,profileIds:a.profileIds})}),Core.$apply(b))}function g(a,c){var d=c.tree.getSelectedNodes();b.chartsMeta=d.map(function(a){var b=a.data;return{name:b.field,field:b.field,type:b.type,host:b.hasHost}}),j()}function h(a,b){return"title"===a.getEventTargetType(b)&&a.toggleSelect(),!0}function i(a,b){return 32===b.which?(a.toggleSelect(),!1):void 0}function j(){var d=[];b.chartsMeta.forEach(function(c){var e=void 0!==b.metrics[c.type]?b.metrics[c.type][c.field]:void 0;c.host?b.containers.forEach(function(f){(b.profile===a.allContainers||$.inArray(b.profile.id,f.profileIds)>=0)&&d.push({name:(void 0!==e?e.description:c.name)+" ["+f.name+"]",type:"sta-"+c.type,field:c.field,query:'host: "'+f.name+'"',meta:e})}):d.push({name:void 0!==e?e.description:c.name,type:"sta-"+c.type,field:c.field,meta:e})}),a.createCharts(b,d,"#charts",c)}b.result=null,b.containers=[],b.profiles=[a.allContainers],b.versions=[],b.profile=a.allContainers,b.time_options=["1m","5m","15m","1h","6h","12h"],b.timespan="1m",b.updateRate=parseInt(d.updateRate),b.chartsMeta=[],Core.register(c,b,{type:"exec",mbean:a.managerMBean,operation:"containers()",arguments:[]},onSuccess(f));var k=a.getInsightMetricsCollectorMBean(e);b.metrics={},k&&(b.metrics=jQuery.parseJSON(c.getAttribute(k,"Metrics")));var l={type:"exec",mbean:"org.elasticsearch:service=restjmx",operation:"exec",arguments:["GET","/_all/_mapping",""]};c.request(l,{success:function(b){var c=jQuery.parseJSON(b.value),d={},e=[];for(var f in c)if(f.startsWith("insight-"))for(var j in c[f])if(j.startsWith("sta-")){var k=j.substring(4);d[k]||(d[k]=!0,e.push({title:k,expand:!0,children:a.getChildren(c[f][j],k,"",void 0!==c[f][j].properties.host)}))}$("#insighttree").dynatree({checkbox:!0,selectMode:2,onSelect:g,onClick:h,onKeydown:i,children:e})}}),b.set_timespan=function(a){b.timespan=a,j()},b.profile_changed=function(){j()}}])}(Insight||(Insight={}));var Insight;!function(a){a._module.controller("Insight.ElasticSearchController",["$scope","jolokia","localStorage",function(b,c,d){function e(){a.createCharts(b,f,g,c)}b.time_options=["1m","5m","15m","1h","6h","12h"],b.timespan="1m",b.metrics=[],b.updateRate=parseInt(d.updateRate),b.data=[];var f=[{name:"active primary shards",type:"sta-elasticsearch",field:"active_primary_shards"},{name:"active shards",type:"sta-elasticsearch",field:"active_shards"},{name:"relocating shards",type:"sta-elasticsearch",field:"relocating_shards"},{name:"initializing shards",type:"sta-elasticsearch",field:"initializing_shards"},{name:"unassigned shards",type:"sta-elasticsearch",field:"unassigned_shards"}],g="#charts";b.set_timespan=function(a){b.timespan=a,e()},e()}])}(Insight||(Insight={}));var Insight;!function(a){a._module.controller("JVMsController",["$scope","jolokia","localStorage",function(b,c,d){function e(c){Object.equal(b.result,c.value)||(b.result=c.value,b.containers=[],b.profiles=[a.allContainers],b.versions=[],b.result.forEach(function(a){b.profiles=b.profiles.union(a.profileIds.map(function(a){return{id:a}})),b.versions=b.versions.union([a.versionId]),b.containers.push({name:a.id,alive:a.alive,version:a.versionId,profileIds:a.profileIds})}),Core.$apply(b),f())}function f(){var d=[];g.forEach(function(c){b.containers.forEach(function(e){(b.profile===a.allContainers||$.inArray(b.profile.id,e.profileIds)>=0)&&d.push({name:c.name+" ["+e.name+"]",type:c.type,field:c.field,query:'host: "'+e.name+'"'})})}),a.createCharts(b,d,h,c)}b.time_options=["1m","5m","15m","1h","6h","12h"],b.timespan="1m",b.containers=[],b.profiles=[a.allContainers],b.versions=[],b.profile=a.allContainers,b.metrics=[],b.updateRate=parseInt(d.updateRate),b.data=[];
var g=[{name:"threads",type:"sta-jvm",field:"threads.count"},{name:"mem",type:"sta-jvm",field:"mem.heap_used"}],h="#charts";b.set_timespan=function(a){b.timespan=a,f()},b.profile_changed=function(){f()},Core.register(c,b,{type:"exec",mbean:a.managerMBean,operation:"containers()",arguments:[]},onSuccess(e))}])}(Insight||(Insight={}));var JBoss;!function(a){function b(a){return a&&a.lastIndexOf(".war")>-1?a.replace(".war",""):a}function c(a){return a?"/"+b(a):""}function d(a){if(a)switch(a.toString().toLowerCase()){case"started":return"green icon-play-circle";case"ok":return"green icon-play-circle";case"true":return"green icon-play-circle"}return"orange icon-off"}a.cleanWebAppName=b,a.cleanContextPath=c,a.iconClass=d}(JBoss||(JBoss={}));var JBoss;!function(a){var b="jboss";a._module=angular.module(b,["bootstrap","ngResource","ui.bootstrap.dialog","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/jboss/server",{templateUrl:"app/jboss/html/server.html"}).when("/jboss/applications",{templateUrl:"app/jboss/html/applications.html"}).when("/jboss/dmr",{templateUrl:"app/jboss/html/dmr.html"}).when("/jboss/connectors",{templateUrl:"app/jboss/html/connectors.html"})}]),a._module.filter("jbossIconClass",function(){return a.iconClass}),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,c,d,e){d.jboss="app/jboss/html/layoutJBossTabs.html",e.addUserDoc(b,"app/"+b+"/doc/help.md",function(){return c.treeContainsDomainAndProperties("jboss.as")||c.treeContainsDomainAndProperties("jboss.jta")||c.treeContainsDomainAndProperties("jboss.modules")}),c.topLevelTabs.push({id:"jboss",content:"JBoss",title:"Manage your JBoss container",isValid:function(a){return a.treeContainsDomainAndProperties("jboss.as")||a.treeContainsDomainAndProperties("jboss.jta")||a.treeContainsDomainAndProperties("jboss.modules")},href:function(){return"#/jboss/applications"},isActive:function(a){return a.isTopTabActive("jboss")}})}]),hawtioPluginLoader.addModule(b)}(JBoss||(JBoss={}));var JBoss;!function(a){a._module.controller("JBoss.ConnectorsController",["$scope","$location","workspace","jolokia",function(a,b,c,d){function e(b){function c(b){var c=b.value;c&&(c.mbean=b.request.mbean,c.port||(c.port=c.boundPort),c.name||(c.name="mail-smtp"),a.connectors.push(c),Core.$apply(a))}a.connectors=[],angular.forEach(b,function(a){var b=a;"jboss.as:socket-binding-group=standard-sockets"!==b.toString()&&(b.toString().lastIndexOf("management")>0?d.request({type:"read",mbean:b,attribute:["boundPort","name","bound"]},onSuccess(c)):b.toString().lastIndexOf("mail-smtp")>0?d.request({type:"read",mbean:b,attribute:["port"]},onSuccess(c)):d.request({type:"read",mbean:b,attribute:["port","name","bound"]},onSuccess(c)))}),Core.$apply(a)}function f(){setTimeout(g,50)}function g(){console.log("Loading JBoss connector data..."),d.search("jboss.as:socket-binding-group=standard-sockets,*",onSuccess(e))}var h='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | jbossIconClass}}"></i></div>';a.connectors=[];var i=[{field:"bound",displayName:"State",cellTemplate:h,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"name",displayName:"Name",cellFilter:null,width:"*",resizable:!0},{field:"port",displayName:"Port",cellFilter:null,width:"*",resizable:!0}];a.gridOptions={data:"connectors",displayFooter:!1,displaySelectionCheckbox:!1,canSelectRows:!1,columnDefs:i,filterOptions:{filterText:""}},a.$on("jmxTreeUpdated",f),a.$watch("workspace.tree",f)}])}(JBoss||(JBoss={}));var JBoss;!function(a){a._module.controller("JBoss.DmrController",["$scope","$location","workspace",function(a,b){function c(b){if(b){var c=null;if(h){var d=dmr.ModelNode.fromBase64(b),e=d.toJSONString();c=JSON.parse(e)}else c=JSON.parse(b),c=c.result;a.row=c,Core.$apply(a),console.log("Response: "+JSON.stringify(c,null,"  "))}}var d=b.search(),e=Core.url("/proxy/localhost/9990/management"),f=d._user||"",g=d._pwd||"";f&&(e+="?_user="+f,g&&(e+="&_pwd="+g));var h="dmr"===d._format,i=null,j="application/dmr-encoded";if(h){var k=new dmr.ModelNode;k.get("operation").set("read-attribute"),k.get("address").setEmptyList(),k.get("name").set("release-version"),i=k.toBase64String()}else{j="application/json";var l={operation:"read-resource"};i=JSON.stringify(l)}console.log("Using dmr: "+h+" with content type: "+j+" and data "+i),$.ajax({url:e,data:i,processData:!1,type:"POST",dataType:"text",contentType:j,accepts:j,headers:{"Content-type":j,Accept:j}}).done(c)}])}(JBoss||(JBoss={}));var JBoss;!function(a){a._module.controller("JBoss.JBossController",["$scope","$location","jolokia",function(b,c,d){function e(e){function f(e){function f(){g.url=i+g.contextPath}var g=e.value;if(g){g.mbean=e.request.mbean;var h=g.mbean;if(h){g.name=a.cleanWebAppName(g.name),g.contextPath=a.cleanContextPath(g.name);var i=Core.extractTargetUrl(c,b.httpScheme,b.httpPort);f();var j=h+",subsystem=undertow";d.request({type:"read",mbean:j,attribute:["contextRoot"]},onSuccess(function(a){var c=a.value;if(c){var d=c.contextRoot;d&&(g.contextPath=d,f(),Core.$apply(b))}}));var k=b.mbeanIndex[h];angular.isDefined(k)?b.webapps[h]=g:(b.mbeanIndex[h]=b.webapps.length,b.webapps.push(g)),Core.$apply(b)}}}b.webapps=[],b.mbeanIndex={},b.selected.length=0,angular.forEach(e,function(a){var b=a;d.request({type:"read",mbean:b,attribute:["name","status"]},onSuccess(f))}),Core.$apply(b)}function f(){setTimeout(g,50)}function g(){console.log("Loading JBoss webapp data...");var a=d.search("jboss.as:socket-binding-group=standard-sockets,*");if(a){var c=!1;angular.forEach(a,function(a){var e=a;if(!c){var f=d.request({type:"read",mbean:e,attribute:["port","name"]});f&&f.value&&f.value.name&&"http"===f.value.name.toString().toLowerCase()&&(c=!0,b.httpPort=f.value.port,b.httpScheme="http")}})}d.search("jboss.as:deployment=*",onSuccess(e))}var h='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | jbossIconClass}}"></i></div>',i='<div class="ngCellText" title="{{row.getProperty(col.field)}}"><a ng-href="{{row.getProperty(col.field)}}" target="_blank">{{row.getProperty(col.field)}}</a></div>';b.uninstallDialog=new UI.Dialog,b.httpPort,b.httpScheme="http",b.webapps=[],b.selected=[];var j=[{field:"status",displayName:"State",cellTemplate:h,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"name",displayName:"Name",cellFilter:null,width:"*",resizable:!0},{field:"contextPath",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"url",displayName:"Url",cellTemplate:i,cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"webapps",displayFooter:!0,selectedItems:b.selected,selectWithCheckboxOnly:!0,columnDefs:j,filterOptions:{filterText:""}},b.controlWebApps=function(a){var c=b.selected.map(function(a){return a.mbean});angular.isArray(c)||(c=[c]);var e=(c.length||1)-1;angular.forEach(c,function(c,f){var g=f>=e?b.onLastResponse:b.onResponse;d.request({type:"exec",mbean:c,operation:a,arguments:null},onSuccess(g,{error:g}))})},b.start=function(){b.controlWebApps("deploy")},b.stop=function(){b.controlWebApps("undeploy")},b.reload=function(){b.controlWebApps("redeploy")},b.uninstall=function(){b.controlWebApps("remove"),b.uninstallDialog.close()},b.onLastResponse=function(a){b.onResponse(a),g()},b.onResponse=function(){},b.$on("jmxTreeUpdated",f),b.$watch("workspace.tree",f),b.jbossServerVersion="",b.jbossServerName="",b.jbossServerLaunchType="";var k=d.search("jboss.as:management-root=*");if(k&&1===k.length)b.jbossServerVersion=d.getAttribute(k[0],"releaseVersion"),b.jbossServerName=d.getAttribute(k[0],"name"),b.jbossServerLaunchType=d.getAttribute(k[0],"launchType");else{var l="jboss.as:management-root=server",m=d.request({type:"read",mbean:l,attribute:["releaseVersion","name","launchType"]});if(m){var n=m.value;n&&(b.jbossServerVersion=n.releaseVersion,b.jbossServerName=n.name,b.jbossServerLaunchType=n.launchType)}else console.log("Cannot find JBoss/Wildfly server or there was more than one server")}}])}(JBoss||(JBoss={}));var Jclouds;!function(a){function b(a,b){if(!angular.isDefined(a))return b[0];var c=b.findIndex(function(b){return b===a});return-1!==c?b[c]:b[0]}function c(a,b){var c=s(a),d=a.jolokia.request({type:"read",mbean:c});return d.value.Contexts.find(function(a){return a.name===b})}function d(a){angular.forEach(a,function(a){e(a)})}function e(a){var b=a.views,c=!1;angular.forEach(b,function(b){c||(b.has("blob")?(a.type="blobstore",c=!0):b.has("compute")&&(a.type="compute",c=!0))})}function f(a,b){return""===b?a:a.findAll(function(a){return a.operatingSystem.family===b})}function g(a,b,c){var d=[];return d=""===b?a:a.findAll(function(a){return a.group===b}),""===c?d:d.findAll(function(a){return a.locationId===c})}function h(a,b,c,d,e,f){b.request({type:"exec",mbean:t(a,c),operation:"resumeNode(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function i(a,b,c,d,e,f){b.request({type:"exec",mbean:t(a,c),operation:"suspendNode(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function j(a,b,c,d,e,f){b.request({type:"exec",mbean:t(a,c),operation:"rebootNode(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function k(a,b,c,d,e,f){b.request({type:"exec",mbean:t(a,c),operation:"destroyNode(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function l(a,b){return""===b?a:a.findAll(function(a){return a.type===b})}function m(a){angular.forEach(a,function(a){n(a)})}function n(a){var b=a.api.views,c=!1;angular.forEach(b,function(b){c||(b.has("blob")?(a.type="blobstore",c=!0):b.has("compute")&&(a.type="compute",c=!0))})}function o(a,b){return""===b?a:a.findAll(function(a){return a.type===b})}function p(a){if(a){var b=a.objectName;if(b)return b;var c=a.children;if(c&&c.length)return p(c[0])}return null}function q(a){var b=[];return angular.forEach(a.children,function(a){b.push(a.title)}),b}function r(a,b){if(a){var c=a.tree.navigate("org.jclouds",b);return q(c)}return null}function s(a){if(a){var b=a.tree.navigate("org.jclouds","management","core");return p(b)}return null}function t(a,b){if(a){var c=a.tree.navigate("org.jclouds","compute",b);return p(c)}return null}function u(a,b){if(a){var c=a.tree.navigate("org.jclouds","blobstore",b);return p(c)}return null}Array.prototype.unique=function(){for(var a=[],b=this.length,c=0;b>c;c++){for(var d=c+1;b>d;d++)this[c]===this[d]&&(d=++c);a.push(this[c])}return a},a.setSelect=b,a.findContextByName=c,a.populateTypeForApis=d,a.populateTypeForApi=e,a.filterImages=f,a.filterNodes=g,a.resumeNode=h,a.suspendNode=i,a.rebootNode=j,a.destroyNode=k,a.apisOfType=l,a.populateTypeForProviders=m,a.populateTypeForProvider=n,a.providersOfType=o,a.findFirstObjectName=p,a.childsOfType=q,a.listJcloudsMBeanNameOfType=r,a.getSelectionJcloudsMBean=s,a.getSelectionJcloudsComputeMBean=t,a.getSelectionJcloudsBlobstoreMBean=u}(Jclouds||(Jclouds={}));var Jclouds;!function(a){var b="jclouds";a._module=angular.module(b,["bootstrap","ngResource","ngGrid","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/jclouds/api",{templateUrl:"app/jclouds/html/api-list.html"}).when("/jclouds/api/:apiId",{templateUrl:"app/jclouds/html/api.html"}).when("/jclouds/provider",{templateUrl:"app/jclouds/html/provider-list.html"}).when("/jclouds/provider/:providerId",{templateUrl:"app/jclouds/html/provider.html"}).when("/jclouds/compute/service",{templateUrl:"app/jclouds/html/compute/compute-service-list.html"}).when("/jclouds/compute/service/:computeId",{templateUrl:"app/jclouds/html/compute/compute-service.html"}).when("/jclouds/compute/node/:computeId",{templateUrl:"app/jclouds/html/compute/node-list.html"}).when("/jclouds/compute/node/:computeId/*nodeId",{templateUrl:"app/jclouds/html/compute/node.html"}).when("/jclouds/compute/image/:computeId",{templateUrl:"app/jclouds/html/compute/image-list.html"}).when("/jclouds/compute/image/:computeId/*imageId",{templateUrl:"app/jclouds/html/compute/image.html"}).when("/jclouds/compute/hardware/:computeId",{templateUrl:"app/jclouds/html/compute/hardware-list.html"}).when("/jclouds/compute/hardware/:computeId/*hardwareId",{templateUrl:"app/jclouds/html/compute/hardware.html"}).when("/jclouds/compute/location/:computeId",{templateUrl:"app/jclouds/html/compute/location-list.html"}).when("/jclouds/compute/location/:computeId/*locationId",{templateUrl:"app/jclouds/html/compute/location.html"}).when("/jclouds/blobstore/service",{templateUrl:"app/jclouds/html/blobstore/blobstore-service-list.html"}).when("/jclouds/blobstore/service/:blobstoreId",{templateUrl:"app/jclouds/html/blobstore/blobstore-service.html"}).when("/jclouds/blobstore/location/:blobstoreId",{templateUrl:"app/jclouds/html/blobstore/location-list.html"}).when("/jclouds/blobstore/location/:blobstoreId/*locationId",{templateUrl:"app/jclouds/html/blobstore/location.html"}).when("/jclouds/blobstore/container/:blobstoreId",{templateUrl:"app/jclouds/html/blobstore/container-list.html"}).when("/jclouds/blobstore/container/:blobstoreId/:containerId",{templateUrl:"app/jclouds/html/blobstore/container.html"}).when("/jclouds/blobstore/container/:blobstoreId/:containerId/*directory",{templateUrl:"app/jclouds/html/blobstore/container.html"})}]),a._module.run(["workspace","viewRegistry","helpRegistry",function(a,b,c){b.jclouds="app/jclouds/html/layoutJclouds.html",c.addUserDoc("jclouds","app/jclouds/doc/help.md",function(){return a.treeContainsDomainAndProperties("org.jclouds")}),a.topLevelTabs.push({id:"jclouds",content:"jclouds",title:"Visualise and manage the Jclouds Compute/BlobStore providers and apis",isValid:function(a){return a.treeContainsDomainAndProperties("org.jclouds")},href:function(){return"#/jclouds/api"},isActive:function(a){return a.isLinkActive("jclouds")}})}]),hawtioPluginLoader.addModule(b)}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ApiListController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){Object.equal(b.result,c.value)||(b.result=c.value,b.apis=b.result.Apis,a.populateTypeForApis(b.apis),Core.$apply(b))}b.result={},b.apis=[],b.type="",b.types=["","blobstore","compute","loadbalancer"];var g=c.search().type;g&&(b.type=g),b.selectedApis=[],b.apiTable={data:"apis",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedApis,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/api/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"name",displayName:"Name",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:350},{field:"type",displayName:"Type",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100}]},Core.register(e,b,{type:"read",mbean:a.getSelectionJcloudsMBean(d)},onSuccess(f))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("JClouds.ApiController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(c){a.populateTypeForApi(c),b.row=c,Core.$apply(b)}function g(){var c=a.getSelectionJcloudsMBean(d),e=d.jolokia;c&&f(e.request({type:"exec",mbean:a.getSelectionJcloudsMBean(d),operation:"findApiById(java.lang.String)",arguments:[b.apiId]}).value)}b.apiId=e.apiId,g()}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreNavigationController",["$scope","$routeParams","workspace",function(a,b,c){a.blobstoreId=b.blobstoreId,a.isActive=function(a){if(angular.isString(a))return c.isLinkActive(a);var b=a.isActive;return b?b(c):c.isLinkActive(a.href())}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreListController",["$scope","$location","workspace","jolokia",function(b,c,d){function e(c){if(!Object.equal(b.result,c)){b.result=c,b.blobstoreServiceIds=b.result;var e=[];angular.forEach(b.blobstoreServiceIds,function(b){e.push(a.findContextByName(d,b))}),b.blobstoreServices=e,Core.$apply(b)}}b.result={},b.blobstoreServiceIds=[],b.blobstoreServices=[],b.blobstoreTable={plugins:[],data:"blobstoreServices",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedBlobstoreServices,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"name",displayName:"Service Name",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/blobstore/service/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"providerId",displayName:"Proivder",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1},{field:"identity",displayName:"Identity",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},e(a.listJcloudsMBeanNameOfType(d,"blobstore"))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreContainerListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.containers=b.result,Core.$apply(b))}b.blobstoreId=f.blobstoreId,b.result={},b.containers=[],b.selectedContainers=[],b.containerTable={plugins:[],data:"containers",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedContainers,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"name",displayName:"Name",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/blobstore/container/{{blobstoreId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"creationDate",displayName:"Created",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsBlobstoreMBean(d,b.blobstoreId),operation:"list()"},onSuccess(g))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreContainerController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.contents=i(h(a,b.directory),b.directory),Core.$apply(b)}function g(){var c=d.jolokia,e=a.getSelectionJcloudsBlobstoreMBean(d,b.blobstoreId);e&&f(b.directory?c.request({type:"exec",mbean:e,operation:"list(java.lang.String, java.lang.String)",arguments:[b.containerId,b.directory]}).value:c.request({type:"exec",mbean:e,operation:"list(java.lang.String)",arguments:[b.containerId]}).value)}function h(a,b){return a.filter(function(a){return a.name!==b})}function i(a,b){var c=[];return angular.forEach(a,function(a){var d=a;d.fullpath=a.name,d.name.startsWith(b)&&(d.name=d.name.substring(b.length+1)),c.push(d)}),c}function j(a,b,c){var d="#/jclouds/blobstore/container/"+a+"/"+b,e=[{href:d,name:"/"+b}],f=c?c.split("/"):[];return angular.forEach(f,function(a){a.startsWith("/")||d.endsWith("/")||(d+="/"),d+=a,e.push({href:d,name:a})}),e}b.blobstoreId=e.blobstoreId,b.containerId=e.containerId,b.directory=e.directory,b.contents=[],b.breadcrumbs=j(b.blobstoreId,b.containerId,b.directory),b.contentTable={data:"contents",displayFooter:!1,columnDefs:[{field:"name",displayName:"Content",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/blobstore/container/{{blobstoreId}}/{{containerId}}/{{row.entity.fullpath}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',cellFilter:""},{field:"createdDate",displayName:"Created",cellFilter:"date:'EEE, MMM d, y : hh:mm:ss a'"},{field:"lastModifiedDate",displayName:"Modified",cellFilter:"date:'EEE, MMM d, y : hh:mm:ss a'"}]},g(),b.isBlob=function(a){return"BLOB"===a.type}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreLocationListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.locations=b.result,Core.$apply(b))}b.blobstoreId=f.blobstoreId,b.result={},b.locations=[],b.selectedLocations=[],b.locationTable={plugins:[],data:"locations",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedLocations,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/blobstore/location/{{blobstoreId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"description",displayName:"Description",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsBlobstoreMBean(d,b.blobstoreId),operation:"listAssignableLocations()"},onSuccess(g))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreLocationController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.row=h(a,b.locationId),Core.$apply(b)}function g(){var c=d.jolokia,e=a.getSelectionJcloudsBlobstoreMBean(d,b.blobstoreId);e&&f(c.request({type:"exec",mbean:e,operation:"listAssignableLocations()"}).value)}function h(a,b){return a.find(function(a){return a.id===b})}b.blobstoreId=e.blobstoreId,b.locationId=e.locationId,g()}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ComputeNavigationController",["$scope","$routeParams","workspace",function(a,b,c){a.computeId=b.computeId,a.isActive=function(a){if(angular.isString(a))return c.isLinkActive(a);var b=a.isActive;return b?b(c):c.isLinkActive(a.href())}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ComputeListController",["$scope","$location","workspace","jolokia",function(b,c,d){function e(c){if(!Object.equal(b.result,c)){b.result=c,b.computeServiceIds=b.result;var e=[];angular.forEach(b.computeServiceIds,function(b){e.push(a.findContextByName(d,b))}),b.computeServices=e,Core.$apply(b)}}b.result={},b.computeServiceIds=[],b.computeServices=[],b.computeTable={plugins:[],data:"computeServices",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedComputeServices,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"name",displayName:"Service Name",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/service/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"providerId",displayName:"Proivder",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1},{field:"identity",displayName:"Identity",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},e(a.listJcloudsMBeanNameOfType(d,"compute"))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.HardwareListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.hardwares=b.result,Core.$apply(b))}b.computeId=f.computeId,b.result={},b.hardwares=[],b.selectedHardwares=[],b.hardwareTable={plugins:[],data:"hardwares",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedHardwares,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/hardware/{{computeId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"name",displayName:"Name",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1},{field:"ram",displayName:"Ram",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1},{field:"hypervisor",displayName:"Hypervisor",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsComputeMBean(d,b.computeId),operation:"listHardwareProfiles()"},onSuccess(g)),b.is64BitIcon=function(a){return a?"icon-thumbs-up":"icon-thumbs-down"}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.HardwareController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.row=h(a,b.hardwareId),b.processors=b.row.processors,b.volumes=b.row.volumes,Core.$apply(b)}function g(){var c=d.jolokia,e=a.getSelectionJcloudsComputeMBean(d,b.computeId);e&&f(c.request({type:"exec",mbean:e,operation:"listHardwareProfiles()"}).value)}function h(a,b){return a.find(function(a){return a.id===b})}b.computeId=e.computeId,b.hardwareId=e.hardwareId,g(),b.processorsTable={plugins:[],data:"processors",showFilter:!1,displayFooter:!1,displaySelectionCheckbox:!1,showColumnMenu:!1,rowHeight:32,columnDefs:[{field:"cores",displayName:"Cores",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:50,resizable:!1},{field:"speed",displayName:"Speed",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1}]},b.volumesTable={plugins:[],data:"volumes",showFilter:!1,displayFooter:!1,displaySelectionCheckbox:!1,showColumnMenu:!1,rowHeight:32,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1},{field:"type",displayName:"Type",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1},{field:"device",displayName:"Device",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1},{field:"size",displayName:"Size",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1},{field:"bootDevice",displayName:"Boot Device",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1},{field:"durable",displayName:"Durable",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1}]}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ImageListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.images=b.result,b.operatingSystemFamilies=h(b.images),Core.$apply(b))}function h(a){var b=[];return b.push(""),angular.forEach(a,function(a){var c=a.operatingSystem.family;b.push(c)}),b.unique()}b.computeId=f.computeId,b.result={},b.images=[],b.operatingSystemFamily="",b.operatingSystemFamilies=[];var i=c.search().os;i&&(b.operatingSystemFamily=i),b.selectedImages=[],b.imageTable={data:"images",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedImages,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/image/{{computeId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"name",displayName:"Name",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1},{field:"operatingSystem.family",displayName:"Operating System",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200},{field:"operatingSystem.is64Bit",displayName:"64 bit",cellTemplate:'<div class="ngCellText pagination-centered"><i class="icon1point5x {{is64BitIcon(row.getProperty(col.field))}}"></i></div>',width:200},{field:"status",displayName:"Status",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:300}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsComputeMBean(d,b.computeId),operation:"listImages()"},onSuccess(g)),b.is64BitIcon=function(a){return a?"icon-thumbs-up":"icon-thumbs-down"}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ImageController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.row=a,Core.$apply(b)}function g(){var c=d.jolokia,e=a.getSelectionJcloudsComputeMBean(d,b.computeId);e&&f(c.request({type:"exec",mbean:e,operation:"getImage(java.lang.String)",arguments:[b.imageId]}).value)}b.computeId=e.computeId,b.imageId=e.imageId,g()}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ComputeLocationListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.locations=b.result,Core.$apply(b))}b.computeId=f.computeId,b.result={},b.locations=[],b.selectedLocations=[],b.locationTable={plugins:[],data:"locations",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedLocations,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/location/{{computeId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"description",displayName:"Description",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsComputeMBean(d,b.computeId),operation:"listAssignableLocations()"},onSuccess(g))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ComputeLocationController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.row=h(a,b.locationId),Core.$apply(b)}function g(){var c=d.jolokia,e=a.getSelectionJcloudsComputeMBean(d,b.computeId);e&&f(c.request({type:"exec",mbean:e,operation:"listAssignableLocations()"}).value)}function h(a,b){return a.find(function(a){return a.id===b})}b.computeId=e.computeId,b.locationId=e.locationId,g()}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.NodeListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.nodes=b.result,b.locations=i(b.nodes),b.groups=h(b.nodes),Core.$apply(b))}function h(a){var b=[];return b.push(""),angular.forEach(a,function(a){var c=a.group;b.push(c)}),b.unique()}function i(a){var b=[];return b.push(""),angular.forEach(a,function(a){var c=a.locationId;b.push(c)}),b.unique()}b.computeId=f.computeId,b.result={},b.nodes=[],b.group="",b.groups=[],b.location="",b.locations=[];var j=c.search().group;j&&(b.group=j);var k=c.search().location;k&&(b.location=k),b.selectedNodes=[],b.nodeTable={data:"nodes",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedNodes,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/node/{{computeId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"group",displayName:"Group",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/node/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"operatingSystem.family",displayName:"Operating System",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200},{field:"locationId",displayName:"Location",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200},{field:"hostname",displayName:"Host Name",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:300}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsComputeMBean(d,b.computeId),operation:"listNodes()"},onSuccess(g)),b.resume=function(){b.selectedNodes.forEach(function(c){a.resumeNode(d,e,b.computeId,c.id,function(){console.log("Resumed!")
},function(){console.log("Failed to resume!")})})},b.suspend=function(){b.selectedNodes.forEach(function(c){a.suspendNode(d,e,b.computeId,c.id,function(){console.log("Suspended!")},function(){console.log("Failed to suspend!")})})},b.reboot=function(){b.selectedNodes.forEach(function(c){a.rebootNode(d,e,b.computeId,c.id,function(){console.log("Rebooted!")},function(){console.log("Failed to reboot!")})})},b.destroy=function(){b.selectedNodes.forEach(function(c){a.destroyNode(d,e,b.computeId,c.id,function(){console.log("Destroyed!")},function(){console.log("Failed to destroy!")})})}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.NodeController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.row=a,Core.$apply(b)}function g(){var c=a.getSelectionJcloudsComputeMBean(d,b.computeId),e=d.jolokia;c&&f(e.request({type:"exec",mbean:c,operation:"getNode(java.lang.String)",arguments:[b.nodeId]}).value)}b.computeId=e.computeId,b.nodeId=e.nodeId,g(),b.resume=function(){a.resumeNode(d,d.jolokia,b.computeId,b.nodeId,function(){console.log("Resumed!")},function(){console.log("Failed to resume!")})},b.suspend=function(){a.suspendNode(d,d.jolokia,b.computeId,b.nodeId,function(){console.log("Suspended!")},function(){console.log("Failed to suspend!")})},b.reboot=function(){a.rebootNode(d,d.jolokia,b.computeId,b.nodeId,function(){console.log("Rebooted!")},function(){console.log("Failed to reboot!")})},b.destroy=function(){a.destroyNode(d,d.jolokia,b.computeId,b.nodeId,function(){console.log("Destroyed!")},function(){console.log("Failed to destroy!")})}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ProviderListController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){Object.equal(b.result,c.value)||(b.result=c.value,b.providers=b.result.Providers,a.populateTypeForProviders(b.providers),Core.$apply(b))}b.result={},b.providers=[],b.type="",b.types=["","blobstore","compute","loadbalancer"];var g=c.search().type;g&&(b.type=g),b.selectedProviders=[],b.providerTable={data:"providers",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedProviders,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/provider/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"name",displayName:"Name",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:350},{field:"type",displayName:"Type",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100}]},Core.register(e,b,{type:"read",mbean:a.getSelectionJcloudsMBean(d)},onSuccess(f))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ProviderController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(c){a.populateTypeForProvider(c),b.row=c,Core.$apply(b)}function g(){var c=a.getSelectionJcloudsMBean(d),e=d.jolokia;c&&f(e.request({type:"exec",mbean:a.getSelectionJcloudsMBean(d),operation:"findProviderById(java.lang.String)",arguments:[b.providerId]}).value)}b.providerId=e.providerId,g()}])}(Jclouds||(Jclouds={}));var Jetty;!function(a){function b(a){if(a)switch(a.toString().toLowerCase()){case"started":return"green icon-play-circle";case"true":return"green icon-play-circle"}return"orange icon-off"}function c(a,b){var c=(a.state||"").toLowerCase();return angular.isArray(b)?b.any(function(a){return c.startsWith(a)}):c.startsWith(b)}a.iconClass=b,a.isState=c}(Jetty||(Jetty={}));var Jetty;!function(a){var b="jetty";a._module=angular.module(b,["bootstrap","ngResource","ui.bootstrap.dialog","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/jetty/server",{templateUrl:"app/jetty/html/server.html"}).when("/jetty/applications",{templateUrl:"app/jetty/html/applications.html"}).when("/jetty/connectors",{templateUrl:"app/jetty/html/connectors.html"}).when("/jetty/threadpools",{templateUrl:"app/jetty/html/threadpools.html"})}]),a._module.filter("jettyIconClass",function(){return a.iconClass}),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,b,c,d){c.jetty="app/jetty/html/layoutJettyTabs.html",d.addUserDoc("jetty","app/jetty/doc/help.md",function(){return b.treeContainsDomainAndProperties("org.eclipse.jetty.server")}),b.topLevelTabs.push({id:"jetty",content:"Jetty",title:"Manage your Jetty container",isValid:function(a){return a.treeContainsDomainAndProperties("org.eclipse.jetty.server")},href:function(){return"#/jetty/applications"},isActive:function(a){return a.isTopTabActive("jetty")}})}]),hawtioPluginLoader.addModule(b)}(Jetty||(Jetty={}));var Jetty;!function(a){a._module.controller("Jetty.ConnectorsController",["$scope","$location","workspace","jolokia",function(a,b,c,d){function e(b){function c(b){var c=b.value;if(c){if(c.mbean=b.request.mbean,c.protocols="[http]",c["default"]="http",c.port=c.port,c.running=void 0!==c.running?c.running:!0,a.connectors.push(c),c.confidentialPort){var d={protocols:"[https]","default":"https",port:c.confidentialPort,running:c.running,mbean:c.mbean};a.connectors.push(d)}Core.$apply(a)}}a.connectors=[],a.selected.length=0,angular.forEach(b,function(a){var b=a;d.request({type:"read",mbean:b,attribute:[]},onSuccess(c))}),Core.$apply(a)}function f(b){function c(b){var c=b.value;c&&(c.mbean=b.request.mbean,c.protocols=c.protocols,c["default"]=c.defaultProtocol,c.port=c.port,c.running="STARTED"==c.state,a.connectors.push(c),Core.$apply(a))}a.connectors=[],a.selected.length=0,angular.forEach(b,function(a){var b=a;d.request({type:"read",mbean:b,attribute:[]},onSuccess(c))}),Core.$apply(a)}function g(){setTimeout(h,50)}function h(){console.log("Loading Jetty connector data...");c.tree;d.search("org.eclipse.jetty.server.nio:type=selectchannelconnector,*",onSuccess(e)),d.search("org.eclipse.jetty.server:type=serverconnector,*",onSuccess(f))}var i='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | jettyIconClass}}"></i></div>';a.connectors=[],a.selected=[];var j=[{field:"running",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"port",displayName:"Port",cellFilter:null,width:"*",resizable:!0},{field:"protocols",displayName:"Protocols",cellFilter:null,width:"*",resizable:!0},{field:"default",displayName:"Default",cellFilter:null,width:"*",resizable:!0}];a.gridOptions={data:"connectors",displayFooter:!0,selectedItems:a.selected,columnDefs:j,filterOptions:{filterText:""},title:"Connectors"},a.controlConnectors=function(b){var c=a.selected.map(function(a){return a.mbean});angular.isArray(c)||(c=[c]);var e=(c.length||1)-1;angular.forEach(c,function(c,f){var g=f>=e?a.onLastResponse:a.onResponse;d.request({type:"exec",mbean:c,operation:b,arguments:null},onSuccess(g,{error:g}))})},a.stop=function(){a.controlConnectors("stop")},a.start=function(){a.controlConnectors("start")},a.anySelectionIsRunning=function(){var b=a.selected||[];return b.length&&b.any(function(a){return a.running})},a.everySelectionIsRunning=function(){var b=a.selected||[];return b.length&&b.every(function(a){return a.running})},a.onLastResponse=function(b){a.onResponse(b),h()},a.onResponse=function(){},a.$on("jmxTreeUpdated",g),a.$watch("workspace.tree",g)}])}(Jetty||(Jetty={}));var Jetty;!function(a){a._module.controller("Jetty.JettyController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(){setTimeout(g,50)}function g(){console.log("Loading Jetty webapp data...");var a=e.search("org.eclipse.jetty.server.nio:type=selectchannelconnector,*");if(a||(a=e.search("org.eclipse.jetty.server:type=serverconnector,*")),a){var c=!1;angular.forEach(a,function(a){var d=a;if(!c){var f=e.request({type:"read",mbean:d,attribute:["port","protocols"]});f&&f.value&&f.value.protocols&&f.value.protocols.toString().toLowerCase().startsWith("http")&&(c=!0,b.httpPort=f.value.port,b.httpScheme="http")}})}e.search("org.mortbay.jetty.plugin:type=jettywebappcontext,*",onSuccess(h)),e.search("org.eclipse.jetty.webapp:type=webappcontext,*",onSuccess(h)),e.search("org.eclipse.jetty.servlet:type=servletcontexthandler,*",onSuccess(h))}function h(a){function d(a){var d=a.value;if(d){d.mbean=a.request.mbean,d.state||(d.state=void 0===d.running||d.running?"started":"stopped");var e=Core.extractTargetUrl(c,b.httpScheme,b.httpPort);d.url=e+d.contextPath;var f=d.mbean;if(f){var g=b.mbeanIndex[f];angular.isDefined(g)?b.webapps[f]=d:(b.mbeanIndex[f]=b.webapps.length,b.webapps.push(d)),Core.$apply(b)}}}b.webapps=[],b.mbeanIndex={},b.selected.length=0,angular.forEach(a,function(a){var b=a;e.request({type:"read",mbean:b,attribute:[]},onSuccess(d))}),Core.$apply(b)}var i='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | jettyIconClass}}"></i></div>',j='<div class="ngCellText" title="{{row.getProperty(col.field)}}"><a ng-href="{{row.getProperty(col.field)}}" target="_blank">{{row.getProperty(col.field)}}</a></div>';b.uninstallDialog=new UI.Dialog,b.httpPort,b.httpScheme="http",b.webapps=[],b.selected=[];var k=[{field:"state",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"displayName",displayName:"Name",cellFilter:null,width:"*",resizable:!0},{field:"contextPath",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"url",displayName:"Url",cellTemplate:j,cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"webapps",displayFooter:!0,selectedItems:b.selected,columnDefs:k,filterOptions:{filterText:""},title:"Web applications"},b.controlWebApps=function(a){var c=b.selected.map(function(a){return a.mbean});angular.isArray(c)||(c=[c]);var d=(c.length||1)-1;angular.forEach(c,function(c,f){var g=f>=d?b.onLastResponse:b.onResponse;e.request({type:"exec",mbean:c,operation:a,arguments:null},onSuccess(g,{error:g}))})},b.stop=function(){b.controlWebApps("stop")},b.start=function(){b.controlWebApps("start")},b.uninstall=function(){b.controlWebApps("destroy"),b.uninstallDialog.close()},b.anySelectionHasState=function(c){var d=b.selected||[];return d.length&&d.any(function(b){return a.isState(b,c)})},b.everySelectionHasState=function(c){var d=b.selected||[];return d.length&&d.every(function(b){return a.isState(b,c)})},b.onLastResponse=function(a){b.onResponse(a),g()},b.onResponse=function(){},b.$on("jmxTreeUpdated",f),b.$watch("workspace.tree",f),b.jettyServerVersion="",b.jettyServerStartupTime="";var l=e.search("org.eclipse.jetty.server:type=server,*");l&&1===l.length?(b.jettyServerVersion=e.getAttribute(l[0],"version"),b.jettyServerStartupTime=e.getAttribute(l[0],"startupTime")):console.log("Cannot find jetty server or there was more than one server. response is: "+l)}])}(Jetty||(Jetty={}));var Jetty;!function(a){a._module.controller("Jetty.ThreadPoolsController",["$scope","$location","workspace","jolokia",function(a,b,c,d){function e(b){function c(b){var c=b.value;c&&(c.running=void 0!==c.running?c.running:"STARTED"==c.state,c.idleTimeout=void 0!==c.idleTimeout?c.idleTimeout:c.maxIdleTimeMs,a.threadpools.push(c))}a.threadpools=[],angular.forEach(b,function(a){var b=a;d.request({type:"read",mbean:b,attribute:[]},onSuccess(c))}),Core.$apply(a)}function f(){setTimeout(g,50)}function g(){console.log("Loading Jetty thread pool data...");c.tree;d.search("org.eclipse.jetty.util.thread:type=queuedthreadpool,*",onSuccess(e))}var h='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | jettyIconClass}}"></i></div>';a.threadpools=[];var i=[{field:"running",displayName:"State",cellTemplate:h,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"threads",displayName:"Threads",cellFilter:null,width:"*",resizable:!0},{field:"minThreads",displayName:"Min Threads",cellFilter:null,width:"*",resizable:!0},{field:"maxThreads",displayName:"Max Threads",cellFilter:null,width:"*",resizable:!0},{field:"idleThreads",displayName:"Idle Threads",cellFilter:null,width:"*",resizable:!0},{field:"idleTimeout",displayName:"Idle Timeout (ms)",cellFilter:null,width:"*",resizable:!0},{field:"name",displayName:"Name",cellFilter:null,width:"*",resizable:!0}];a.gridOptions={data:"threadpools",displayFooter:!0,canSelectRows:!1,columnDefs:i,title:"Thread Pools"},a.$on("jmxTreeUpdated",f),a.$watch("workspace.tree",f)}])}(Jetty||(Jetty={}));var Jmx;!function(a){function b(a,b){var c="#"+a.route,d=angular.toJson(b),e=b.title,f=angular.toJson({size_x:a.size_x,size_y:a.size_y});return"/dashboard/add?tab=dashboard&href="+encodeURIComponent(c)+"&size="+encodeURIComponent(f)+"&title="+encodeURIComponent(e)+"&routeParams="+encodeURIComponent(d)}function c(b){return a.jmxWidgetTypes.find(function(a){return a.type===b.type})}a.createDashboardLink=b,a.getWidgetType=c,a.jmxWidgetTypes=[{type:"donut",icon:"icon-smile",route:"/jmx/widget/donut",size_x:2,size_y:2,title:"Add Donut chart to Dashboard"},{type:"area",icon:"icon-bar-chart",route:"/jmx/widget/area",size_x:4,size_y:2,title:"Add Area chart to Dashboard"}],a.jmxWidgets=[{type:"donut",title:"Java Heap Memory",mbean:"java.lang:type=Memory",attribute:"HeapMemoryUsage",total:"Max",terms:"Used",remaining:"Free"},{type:"donut",title:"Java Non Heap Memory",mbean:"java.lang:type=Memory",attribute:"NonHeapMemoryUsage",total:"Max",terms:"Used",remaining:"Free"},{type:"donut",title:"File Descriptor Usage",mbean:"java.lang:type=OperatingSystem",total:"MaxFileDescriptorCount",terms:"OpenFileDescriptorCount",remaining:"Free"},{type:"donut",title:"Loaded Classes",mbean:"java.lang:type=ClassLoading",total:"TotalLoadedClassCount",terms:"LoadedClassCount,UnloadedClassCount",remaining:"-"},{type:"donut",title:"Swap Size",mbean:"java.lang:type=OperatingSystem",total:"TotalSwapSpaceSize",terms:"FreeSwapSpaceSize",remaining:"Used Swap"},{type:"area",title:"Process CPU Time",mbean:"java.lang:type=OperatingSystem",attribute:"ProcessCpuTime"},{type:"area",title:"Process CPU Load",mbean:"java.lang:type=OperatingSystem",attribute:"ProcessCpuLoad"},{type:"area",title:"System CPU Load",mbean:"java.lang:type=OperatingSystem",attribute:"SystemCpuLoad"},{type:"area",title:"System CPU Time",mbean:"java.lang:type=OperatingSystem",attribute:"SystemCpuTime"}]}(Jmx||(Jmx={}));var Jmx;!function(a){var b="jmx";a.currentProcessId="",a._module=angular.module(b,["bootstrap","dangle","ui.bootstrap","ui.bootstrap.modal"]),a._module.config(["$routeProvider",function(a){a.when("/jmx/attributes",{templateUrl:"app/jmx/html/attributes.html"}).when("/jmx/operations",{templateUrl:"app/jmx/html/operations.html"}).when("/jmx/charts",{templateUrl:"app/jmx/html/charts.html"}).when("/jmx/chartEdit",{templateUrl:"app/jmx/html/chartEdit.html"}).when("/jmx/help/:tabName",{templateUrl:"app/core/html/help.html"}).when("/jmx/widget/donut",{templateUrl:"app/jmx/html/donutChart.html"}).when("/jmx/widget/area",{templateUrl:"app/jmx/html/areaChart.html"})}]),a._module.factory("jmxWidgetTypes",function(){return a.jmxWidgetTypes}),a._module.factory("jmxWidgets",function(){return a.jmxWidgets}),a._module.run(["$location","workspace","viewRegistry","layoutTree","jolokia","pageTitle","helpRegistry",function(b,c,d,e,f,g,h){d.jmx=e,h.addUserDoc("jmx","app/jmx/doc/help.md"),g.addTitleElement(function(){if(""===a.currentProcessId){try{a.currentProcessId=f.getAttribute("java.lang:type=Runtime","Name")}catch(b){}a.currentProcessId&&a.currentProcessId.has("@")&&(a.currentProcessId="pid:"+a.currentProcessId.split("@")[0])}return a.currentProcessId}),c.topLevelTabs.push({id:"jmx",content:"JMX",title:"View the JMX MBeans in this process",isValid:function(a){return a.hasMBeans()},href:function(){return"#/jmx/attributes"},isActive:function(a){return a.isTopTabActive("jmx")}}),c.subLevelTabs.add({content:'<i class="icon-list"></i> Attributes',title:"View the attribute values on your selection",isValid:function(){return!0},href:function(){return"#/jmx/attributes"},index:-1},0),c.subLevelTabs.push({content:'<i class="icon-leaf"></i> Operations',title:"Execute operations on your selection",isValid:function(){return!0},href:function(){return"#/jmx/operations"}}),c.subLevelTabs.push({content:'<i class="icon-bar-chart"></i> Chart',title:"View a chart of the metrics on your selection",isValid:function(){return!0},href:function(){return"#/jmx/charts"}}),c.subLevelTabs.push({content:'<i class="icon-cog"></i> Edit Chart',title:"Edit the chart configuration",isValid:function(a){return a.isLinkActive("jmx/chart")},href:function(){return"#/jmx/chartEdit"}})}]),hawtioPluginLoader.addModule(b)}(Jmx||(Jmx={}));var Jmx;!function(a){a.AreaChartController=a._module.controller("Jmx.AreaChartController",["$scope","$routeParams","jolokia","$templateCache","localStorage",function(a,b,c,d,e){a.mbean=b.mbean,a.attribute=b.attribute,a.duration=e.updateRate,a.width=308,a.height=296,a.template="",a.entries=[],a.data={entries:a.entries},a.req=[{type:"read",mbean:a.mbean,attribute:a.attribute}],a.render=function(b){a.entries.push({time:b.timestamp,count:b.value}),a.entries=a.entries.last(15),""===a.template&&(a.template=d.get("areaChart")),a.data={_type:"date_histogram",entries:a.entries},Core.$apply(a)},Core.register(c,a,a.req,onSuccess(a.render))}])}(Jmx||(Jmx={}));var Jmx;!function(a){a._module.controller("Jmx.AttributeController",["$scope","jolokia",function(a,b){function c(b){Object.equal(a.data,b.value)||(a.data=safeNull(b.value),Core.$apply(a))}a.init=function(d,e){a.mbean=d,a.attribute=e,angular.isDefined(a.mbean)&&angular.isDefined(a.attribute)&&Core.register(b,a,{type:"read",mbean:a.mbean,attribute:a.attribute},onSuccess(c))}}]),a._module.controller("Jmx.AttributeChartController",["$scope","jolokia","$document",function(a,b,c){function d(d){angular.isDefined(a.chart)||(a.chart=$(c.find("#"+a.attribute)[0]),a.chart&&(a.width=a.chart.width())),angular.isDefined(a.context)||(console.log("Got: ",d),a.context=cubism.context().serverDelay(0).clientDelay(0).step(1e3).size(a.width),a.jcontext=a.context.jolokia(b),a.metrics=[],Object.extended(d.value).keys(function(b){a.metrics.push(a.jcontext.metric({type:"read",mbean:a.mbean,attribute:a.attribute,path:b},a.attribute))}),d3.select("#"+a.attribute).call(function(b){b.append("div").data(a.metrics).call(a.context.horizon())}),Core.unregister(b,a),Core.$apply(a))}a.init=function(c,e){a.mbean=c,a.attribute=e,angular.isDefined(a.mbean)&&angular.isDefined(a.attribute)&&Core.register(b,a,{type:"read",mbean:a.mbean,attribute:a.attribute},onSuccess(d))}}])}(Jmx||(Jmx={}));var Jmx;!function(a){a.propertiesColumnDefs=[{field:"name",displayName:"Property",width:"27%",cellTemplate:'<div class="ngCellText" title="{{row.entity.attrDesc}}" data-placement="bottom"><div ng-show="!inDashboard" class="inline" compile="row.entity.getDashboardWidgets()"></div><a href="" ng-click="row.entity.onViewAttribute()">{{row.entity.name}}</a></div>'},{field:"value",displayName:"Value",width:"70%",cellTemplate:'<div class="ngCellText mouse-pointer" ng-click="row.entity.onViewAttribute()" title="{{row.entity.tooltip}}" ng-bind-html-unsafe="row.entity.summary"></div>'}],a.foldersColumnDefs=[{displayName:"Name",cellTemplate:'<div class="ngCellText"><a href="{{row.entity.folderHref(row)}}"><i class="{{row.entity.folderIconClass(row)}}"></i> {{row.getProperty("title")}}</a></div>'}],a.AttributesController=a._module.controller("Jmx.AttributesController",["$scope","$element","$location","workspace","jolokia","jmxWidgets","jmxWidgetTypes","$templateCache","localStorage","$browser",function(b,c,d,e,f,g,h,i,j,k){function l(){m()}function m(){Core.unregister(f,b),b.gridData=[],b.mbeanIndex=null;var c=e.getSelectedMBeanName(),g=null,h=e.selection;if(null===h||angular.isUndefined(h)||h.key!==b.lastKey){if(b.attributesInfoCache=null,null==c){var i=d.search().nid,j=e.keyToNodeMap[i];j&&(c=j.objectName)}if(c){var k=function(a){var b=escapeMBeanPath(a),c={type:"LIST",method:"post",path:b,ignoreErrors:!0};return c},l=k(c);f.request(l,onSuccess(function(d){b.attributesInfoCache=d.value,a.log.debug("Updated attributes info cache for mbean "+c)}))}}if(c)g={type:"read",mbean:c},(null===h||angular.isUndefined(h)||h.key!==b.lastKey)&&(b.gridOptions.columnDefs=a.propertiesColumnDefs,b.gridOptions.enableRowClickSelection=!1);else if(h){h.key!==b.lastKey&&(b.gridOptions.columnDefs=[],b.gridOptions.enableRowClickSelection=!0);var m=h.children;if(m){var p=m.map(function(a){return a.objectName}),q=p.filter(function(a){return a});if(q){var r=a.getUniqueTypeNames(m);if(r.length<=1){var s=q.map(function(a){return{type:"READ",mbean:a,ignoreErrors:!0}});s.length>0&&(g=s,b.mbeanIndex={},b.mbeanRowCounter=0,b.mbeanCount=q.length)}else console.log("Too many type names "+r)}}}var t=onSuccess(n);g?(b.request=g,Core.register(f,b,g,t)):h&&(h.key!==b.lastKey&&(b.gridOptions.columnDefs=a.foldersColumnDefs,b.gridOptions.enableRowClickSelection=!0),b.gridData=h.children,o(b.gridData)),h&&(b.lastKey=h.key),Core.$apply(b)}function n(c){var d=c.value,f=b.mbeanIndex,g=c.request.mbean;if(g&&(d._id=g),f)if(g){var h=f[g];if(angular.isDefined(h)||(h=b.mbeanRowCounter,f[g]=h,b.mbeanRowCounter+=1),0===h&&(b.selectedIndices=b.selectedItems.map(function(a){return b.gridData.indexOf(a)}),b.gridData=[],!b.gridOptions.columnDefs.length)){var i=e.selectionConfigKey(),j=e.attributeColumnDefs[i]||[],k=j.length,l={};angular.forEach(j,function(a){var b=a.field;b&&(l[b]=a)});var m=[];angular.forEach(d,function(a,b){s(b,a)&&(l[b]||m.push({field:b,displayName:"_id"===b?"Object name":Core.humanizeValue(b),visible:0===k}))}),m=m.sort(function(a,b){return a.field.startsWith("_")?1:b.field.startsWith("_")?-1:a.field.localeCompare(b.field)}),m.forEach(function(a){j.push(a)}),b.gridOptions.columnDefs=j,b.gridOptions.enableRowClickSelection=!0}b.gridData[h]=d,o(b.gridData);var n=b.mbeanCount;if(!n||h+1>=n){var t=b.selectedIndices.map(function(a){return b.gridData[a]}).filter(function(a){return a});b.selectedItems.splice(0,b.selectedItems.length),b.selectedItems.push.apply(b.selectedItems,t),Core.$apply(b)}}else console.log("No mbean name in request "+JSON.stringify(c.request));else{b.gridOptions.columnDefs=a.propertiesColumnDefs,b.gridOptions.enableRowClickSelection=!1;var u=!0;if(angular.isObject(d)){var v=Array();if(angular.forEach(d,function(a,b){if((u||s(b,a))&&!b.startsWith("_")){"ObjectName"===b&&(a=p(a)),angular.isArray(a)&&(a=a.map(function(a){return p(a)}));var c=r(b),d={key:b,name:Core.humanizeValue(b),value:safeNullAsString(a,c)};q(b,d),v.push(d)}}),!v.any(function(a){return"ObjectName"===a.key})){var w={key:"ObjectName",name:"Object Name",value:g};q(w.key,w),v.push(w)}v=v.sortBy("name"),b.selectedItems=[d],d=v}b.gridData=d,o(b.gridData),Core.$apply(b)}}function o(a){a.forEach(function(a){a.inDashboard=b.inDashboard,a.getDashboardWidgets=function(){return b.getDashboardWidgets(a)},a.onViewAttribute=function(){b.onViewAttribute(a)},a.folderIconClass=function(a){return b.folderIconClass(a)},a.folderHref=function(a){return b.folderHref(a)}})}function p(a){if(!angular.isObject(a))return a;var b=Object.keys(a);return 1===b.length&&"objectName"===b[0]?a.objectName:a}function q(a,c){var d=c.value;if(!angular.isArray(d)&&angular.isObject(d)){var e="<table class='table table-striped'>",f="",g=d,h=Object.keys(d).sort();angular.forEach(h,function(a){var b=g[a];e+="<tr><td>"+Core.humanizeValue(a)+"</td><td>"+b+"</td></tr>",f+=""+Core.humanizeValue(a)+": "+b+"  "}),e+="</table>",c.summary=f,c.detailHtml=e,c.tooltip=f}else{var i=d;if(""===i?(i="&nbsp;",c.tooltip=""):c.tooltip=i,c.summary=""+i,c.detailHtml="<pre>"+i+"</pre>",angular.isArray(d)){var j="<ul>";angular.forEach(d,function(a){j+="<li>"+a+"</li>"}),j+="</ul>",c.detailHtml=j}}if(c.rw=!1,c.attrDesc=c.name,c.type="string",null!=b.attributesInfoCache&&"attr"in b.attributesInfoCache){var k=b.attributesInfoCache.attr[a];angular.isDefined(k)&&(c.rw=k.rw,c.attrDesc=k.desc,c.type=k.type)}}function r(a){if(null!=b.attributesInfoCache&&"attr"in b.attributesInfoCache){var c=b.attributesInfoCache.attr[a];if(angular.isDefined(c))return c.type}return null}function s(a,b){return!angular.isObject(b)}function t(a){if(a){var b=a.toLowerCase();if(b.startsWith("int")||"long"===b||"short"===b||"byte"===b||b.endsWith("int"))return"integer";if("double"===b||"float"===b||"bigdecimal"===b)return"number";if("boolean"===b||"java.lang.boolean"===b)return"boolean";if("string"===b||"java.lang.String"===b)return"string"}return"string"}b.searchText="",b.nid="empty",b.selectedItems=[],b.lastKey=null,b.attributesInfoCache={},b.entity={},b.attributeSchema={},b.gridData=[],b.attributes="",b.$watch("gridData.length",function(a,c){a!==c&&(b.attributes=a>0?i.get("gridTemplate"):"")});var u={properties:{key:{description:"Key",tooltip:"Attribute key",type:"string",readOnly:"true"},description:{description:"Description",tooltip:"Attribute description",type:"string",formTemplate:"<textarea class='input-xlarge' rows='2' readonly='true'></textarea>"},type:{description:"Type",tooltip:"Attribute type",type:"string",readOnly:"true"},jolokia:{description:"Jolokia URL",tooltip:"Jolokia REST URL",type:"string",readOnly:"true"}}};b.gridOptions={scope:b,selectedItems:[],showFilter:!1,canSelectRows:!1,enableRowSelection:!1,enableRowClickSelection:!1,keepLastSelected:!1,multiSelect:!0,showColumnMenu:!0,displaySelectionCheckbox:!1,filterOptions:{filterText:""},data:"gridData",columnDefs:a.propertiesColumnDefs},b.$watch("gridOptions.selectedItems",function(c,d){c!==d&&(a.log.debug("Selected items: ",c),b.selectedItems=c)},!0),b.$on("$routeChangeSuccess",function(){var c=d.url();c.endsWith("/jmx/attributes")&&(a.log.debug("Reset selection in JMX plugin"),e.selection=null,b.lastKey=null),b.nid=d.search().nid,a.log.debug("nid: ",b.nid),setTimeout(m,50)}),b.$watch("workspace.selection",function(){return e.moveIfViewInvalid()?void Core.unregister(f,b):void setTimeout(function(){b.gridData=[],Core.$apply(b),setTimeout(function(){m()},10)},10)}),b.hasWidget=function(){return!0},b.onCancelAttribute=function(){b.entity={}},b.onUpdateAttribute=function(){var a=b.entity.attrValueEdit,c=b.entity.key;b.entity={};var d=e.getSelectedMBeanName();d&&f.setAttribute(d,c,a,onSuccess(function(){Core.notification("success","Updated attribute "+c)}))},b.onViewAttribute=function(a){if(a.summary){b.entity={},b.entity.key=a.key,b.entity.description=a.attrDesc,b.entity.type=a.type;var c=d.protocol()+"://"+d.host()+":"+d.port()+k.baseHref();b.entity.jolokia=c+j.url+"/read/"+e.getSelectedMBeanName()+"/"+b.entity.key,b.entity.rw=a.rw;var f=(t(a.type,a.key),!a.rw),g=a.summary.length,h=g/40+1;if(h>10&&(h=10),f){b.entity.attrValueView="&nbsp;"===a.summary?"":a.summary,b.attributeSchemaView={};for(var i in u)b.attributeSchemaView[i]=u[i];b.attributeSchemaView.properties.attrValueView={description:"Value",label:"Value",tooltip:"Attribute value",type:"string",formTemplate:"<textarea class='input-xlarge' rows='"+h+"' readonly='true'></textarea>"},b.attributeSchemaView&&delete b.attributeSchemaView.properties.attrValueEdit}else{b.entity.attrValueEdit="&nbsp;"===a.summary?"":a.summary,b.attributeSchemaEdit={};for(var i in u)b.attributeSchemaEdit[i]=u[i];b.attributeSchemaEdit.properties.attrValueEdit={description:"Value",label:"Value",tooltip:"Attribute value",type:"string",formTemplate:"<textarea class='input-xlarge' rows='"+h+"'></textarea>"},b.attributeSchemaEdit&&delete b.attributeSchemaEdit.properties.attrValueView}b.showAttributeDialog=!0}},b.getDashboardWidgets=function(c){var d=e.getSelectedMBeanName();if(!d)return"";var f=g.filter(function(a){return d===a.mbean});if(f.isEmpty())return"";if(f=f.filter(function(a){return a.attribute===c.key||a.total===c.key}),f.isEmpty())return"";c.addChartToDashboard=function(a){b.addChartToDashboard(c,a)};var h=[];return f.forEach(function(b){var c=a.getWidgetType(b);h.push('<i class="'+c.icon+' clickable" title="'+c.title+'" ng-click="row.entity.addChartToDashboard(\''+c.type+"')\"></i>")}),h.join()+"&nbsp;"},b.addChartToDashboard=function(b,c){var f=e.getSelectedMBeanName(),h=g.filter(function(a){return f===a.mbean});h=h.filter(function(a){return a.attribute===b.key||a.total===b.key}),h=h.filter(function(a){return a.type===c});var i=h.first(),j=a.getWidgetType(i);d.url(a.createDashboardLink(j,i))},b.toolBarTemplate=function(){var b=a.getAttributeToolBar(e.selection);return b},b.invokeSelectedMBeans=function(a,c){void 0===c&&(c=null);var d=[];if(angular.forEach(b.selectedItems||[],function(b){var c=b._id;if(c){var e=a;angular.isFunction(a)&&(e=a(b)),d.push({type:"exec",operation:e,mbean:c})}}),d.length){var e=function(){c?c():l()};f.request(d,onSuccess(e,{error:e}))}},b.folderHref=function(a){if(!a.getProperty)return"";var b=a.getProperty("key");return b?Core.createHref(d,"#"+d.path()+"?nid="+b,["nid"]):""},b.folderIconClass=function(a){return a.getProperty?a.getProperty("objectName")?"icon-cog":"icon-folder-close":""}}])}(Jmx||(Jmx={}));var Jmx;!function(a){a._module.controller("Jmx.ChartEditController",["$scope","$location","workspace","jolokia",function(a,b,c,d){function e(){var e=c.selection;if(angular.isDefined(e)){a.selectedAttributes=[],a.selectedMBeans=[],a.metrics={},a.mbeans={};var f=0,g=0,h=e.children;h&&h.length&&!e.objectName||(h=[e]),h&&h.forEach(function(c){var e=c.objectName,h=c.title;if(h&&e){f++,a.mbeans[h]=h;var i=escapeMBeanPath(e);d.list(i,onSuccess(function(c){var d=c.attr;if(d){for(var e in d){var h=d[e];if(h){var i=h.type;isNumberTypeName(i)&&(a.metrics[e]||(a.metrics[e]=e))}}if(++g>=f){var j=b.search(),k=toSearchArgumentArray(j.att),l=toSearchArgumentArray(j.el);if(k&&k.length&&k.forEach(function(b){a.metrics[b]&&a.selectedAttributes.push(b)}),l&&l.length&&l.forEach(function(b){a.mbeans[b]&&a.selectedMBeans.push(b)}),a.selectedMBeans.length<1&&(a.selectedMBeans=Object.keys(a.mbeans)),a.selectedAttributes.length<1){var m=Object.keys(a.metrics).sort();a.selectedAttributes=a.selectedMBeans.length>1?[m.first()]:m}$("#attributes").attr("size",Object.size(a.metrics)),$("#mbeans").attr("size",Object.size(a.mbeans)),Core.$apply(a)}}}))}})}}a.selectedAttributes=[],a.selectedMBeans=[],a.metrics={},a.mbeans={},a.size=function(a){return angular.isObject(a)?Object.size(a):angular.isArray(a)?a.length:1},a.canViewChart=function(){return a.selectedAttributes.length&&a.selectedMBeans.length&&a.size(a.mbeans)>0&&a.size(a.metrics)>0},a.showAttributes=function(){return a.canViewChart()&&a.size(a.metrics)>1},a.showElements=function(){return a.canViewChart()&&a.size(a.mbeans)>1},a.viewChart=function(){var c=b.search();a.selectedAttributes.length===a.size(a.metrics)?delete c.att:c.att=a.selectedAttributes,a.selectedMBeans.length===a.size(a.mbeans)&&1===a.size(a.mbeans)?delete c.el:c.el=a.selectedMBeans,b.search(c),b.path("jmx/charts")},a.$watch("workspace.selection",e),a.$on("$routeChangeSuccess",function(){setTimeout(e,50)})}])}(Jmx||(Jmx={}));var Jmx;!function(a){a._module.controller("Jmx.ChartController",["$scope","$element","$location","workspace","localStorage","jolokiaUrl","jolokiaParams",function(b,c,d,e,f,g,h){function i(){var f=e.selection;if(null!=f){if(!angular.isDefined(f)||!angular.isDefined(b.updateRate)||0===b.updateRate)return setTimeout(j,500),void Core.$apply(b);var g=594,i=c.find("#charts");if(!i)return setTimeout(j,500),void Core.$apply(b);g=i.width(),b.reset(),b.charts=i,b.jolokia=new Jolokia(h),b.jolokia.start(b.updateRate);var k=f.objectName;b.metrics=[];var l=cubism.context().serverDelay(b.updateRate).clientDelay(b.updateRate).step(b.updateRate).size(g);b.context=l,b.jolokiaContext=l.jolokia(b.jolokia);var m=d.search(),n=toSearchArgumentArray(m.att);if(k){var o=encodeMBeanPath(k),p=b.jolokia.list(o);if(p){var q=p.attr;if(q){var r=[];for(var s in q){var t=q[s];if(t){var u=t.type;isNumberTypeName(u)&&r.push(s)}}if(n.length){var v=r.filter(function(a){return n.indexOf(a)>=0});v.length&&(r=v)
}r=r.sort(),angular.forEach(r,function(a){var c=b.jolokiaContext.metric({type:"read",mbean:k,attribute:a},Core.humanizeValue(a));c&&b.metrics.push(c)})}}}else{var w=toSearchArgumentArray(m.el);if(n&&n.length&&w&&w.length){var x={};w.forEach(function(a){var b=f.get(a);if(!b&&f.children&&(b=f.children.find(function(b){return a===b.title})),b){var c=b.objectName;c&&(x[a]=c)}}),n=n.sort(),n.forEach(function(a){angular.forEach(x,function(c,d){var e=Core.humanizeValue(a),f=d+": "+e,g=b.jolokiaContext.metric({type:"read",mbean:c,attribute:a},f);g&&b.metrics.push(g)})})}f.children.length&&!b.metrics.length&&d.path("jmx/chartEdit")}if(b.metrics.length>0){var y=d3.select(i.get(0)),z=y.selectAll(".axis"),A=!1;if(z.data(["top","bottom"]).enter().append("div").attr("class",function(a){return a+" axis"}).each(function(a){if(!A)try{d3.select(this).call(l.axis().ticks(12).orient(a))}catch(b){A||(A=!0)}}),A)return b.reset(),setTimeout(j,500),void Core.$apply(b);y.append("div").attr("class","rule").call(l.rule()),l.on("focus",function(b){try{y.selectAll(".value").style("right",null===b?null:l.size()-b+"px")}catch(c){a.log.info("error: ",c)}}),b.metrics.forEach(function(a){y.call(function(b){b.append("div").data([a]).attr("class","horizon").call(l.horizon())})})}else b.reset();Core.$apply(b)}}b.metrics=[],b.updateRate=1e3,b.context=null,b.jolokia=null,b.charts=null,b.reset=function(){b.context&&(b.context.stop(),b.context=null),b.jolokia&&(b.jolokia.stop(),b.jolokia=null),b.charts&&(b.charts.empty(),b.charts=null)},b.$on("$destroy",function(){try{b.deregRouteChange()}catch(a){}try{b.dereg()}catch(a){}b.reset()}),b.errorMessage=function(){return 0===b.updateRate?"updateRate":0===b.metrics.length?"metrics":void 0};var j=Core.throttled(i,200);b.deregRouteChange=b.$on("$routeChangeSuccess",function(){j()}),b.dereg=b.$watch("workspace.selection",function(){e.moveIfViewInvalid()||j()}),j()}])}(Jmx||(Jmx={}));var Jmx;!function(a){a.DonutChartController=a._module.controller("Jmx.DonutChartController",["$scope","$routeParams","jolokia","$templateCache",function(a,b,c,d){if(a.mbean=b.mbean,a.total=b.total,a.attribute=b.attribute,a.terms=b.terms,a.remainder=b.remaining,a.template="",a.termsArray=a.terms.split(","),a.data={total:0,terms:[]},a.attribute){var e=a.termsArray.include(a.total);a.reqs=[{type:"read",mbean:a.mbean,attribute:a.attribute,paths:e.join(",")}],a.termsArray.forEach(function(b){a.data.terms.push({term:b,count:0})})}else a.reqs=[{type:"read",mbean:a.mbean,attribute:a.total}],a.termsArray.forEach(function(b){a.reqs.push({type:"read",mbean:a.mbean,attribute:b}),a.data.terms.push({term:b,count:0})});a.remainder&&"-"!==a.remainder&&a.data.terms.push({term:a.remainder,count:0}),a.render=function(b){var c=null;if(a.remainder&&"-"!==a.remainder&&(c=a.data.terms.find(function(b){return b.term===a.remainder})),a.attribute)b.request.attribute===a.attribute&&(a.data.total=b.value[a.total.toLowerCase()],a.data.terms.forEach(function(c){c.term!==a.remainder&&(c.count=b.value[c.term.toLowerCase()])}),c&&(c.count=a.data.total,a.data.terms.forEach(function(b){b.term!==a.remainder&&(c.count=c.count-b.count)})));else if(b.request.attribute===a.total)a.data.total=b.value;else{var e=a.data.terms.find(function(a){return a.term===b.request.attribute});e&&(e.count=b.value),c&&(c.count=a.data.total,a.data.terms.forEach(function(b){b.term!==a.remainder&&(c.count=c.count-b.count)}))}""===a.template&&(a.template=d.get("donut")),a.data=Object.clone(a.data),Core.$apply(a)},Core.register(c,a,a.reqs,onSuccess(a.render))}])}(Jmx||(Jmx={}));var Tree;!function(a){function b(a){d(a,!0)}function c(a){d(a,!1)}function d(a,b){$(a).dynatree("getRoot").visit(function(a){a.expand(b)})}function e(b){if(b){angular.isArray(b)&&b.forEach(function(b){a.sanitize(b)});var c=b.title;c&&(b.title=c.unescapeHTML(!0).escapeHTML()),b.children&&a.sanitize(b.children)}}a.pluginName="tree",a.log=Logger.get("Tree"),a.expandAll=b,a.contractAll=c,a.sanitize=e,a._module=angular.module(a.pluginName,["bootstrap","ngResource","hawtioCore"]),a._module.directive("hawtioTree",["workspace","$timeout","$location",function(b,c,d){return function(e,f,g){function h(a){var b=null,c=g[a];return c&&(b=Core.pathGet(e,c),angular.isFunction(b)||(b=null)),b}function i(){Core.$applyNowOrLater(e)}function j(c){if(v=c,v&&a.sanitize(v),v&&!m){var h=$(f),j=Core.asArray(v),k=g.hideroot;"true"===k&&(j=v.children);var l={clickFolderMode:3,onActivate:function(a){var c=a.data;o?o(c,a):b.updateSelectionNode(c),Core.$apply(e)},onClick:function(a,b){if(b.metaKey){b.preventDefault();var c=d.absUrl();if(a&&a.data){var e=a.data.key;if(e){var f=d.search();f[s]=e;var g=c.indexOf("?");0>=g?c+="?":c=c.substring(0,g+1),c+=$.param(f)}}return window.open(c,"_blank"),window.focus(),!1}return!0},persist:!1,debugLevel:0,children:j,dnd:{onDragStart:p?p:function(){return console.log("onDragStart!"),!0},onDragEnter:q?q:function(){return console.log("onDragEnter!"),!0},onDrop:r?r:function(a,b,c){return console.log("onDrop!"),b.move(a,c),!0}}};r||q||p||delete l.dnd,m=h.dynatree(l);var n=!1,t=g.activatenodes;if(t){var u=e[t],v=h.dynatree("getTree");u&&v&&angular.forEach(Core.asArray(u),function(a){v.activateKey(a),n=!0})}var w=h.dynatree("getRoot");if(w){var x=g.onroot;if(x){var y=e[x];y&&y(w)}if(!n){var j=w.getChildren();if(j&&j.length){var z=j[0];z.expand(!0),z.activate(!0)}}}}i()}function k(){n=c(function(){i()},300)}var l=null,m=null,n=null,o=h("onselect"),p=h("ondragstart"),q=h("ondragenter"),r=h("ondrop"),l=g.hawtioTree,s=l;e.$watch(l,j),e.$on("hawtio.tree."+l,function(){var a=Core.pathGet(e,l);j(a)}),f.bind("$destroy",function(){c.cancel(n)}),k()}}]),a._module.run(["helpRegistry",function(b){b.addDevDoc(a.pluginName,"app/tree/doc/developer.md")}]),hawtioPluginLoader.addModule(a.pluginName)}(Tree||(Tree={}));var Jmx;!function(a){a._module.controller("Jmx.TreeHeaderController",["$scope",function(a){a.expandAll=function(){Tree.expandAll("#jmxtree")},a.contractAll=function(){Tree.contractAll("#jmxtree")}}]),a._module.controller("Jmx.MBeansController",["$scope","$location","workspace",function(b,c,d){function e(){a.updateTreeSelectionFromURL(c,$("#jmxtree"))}b.num=1,b.$on("$routeChangeSuccess",function(){setTimeout(e,50)}),b.select=function(a){b.workspace.updateSelectionNode(a),Core.$apply(b)},b.populateTree=function(){var f=$("#jmxtree");b.tree=d.tree,a.enableTree(b,c,d,f,b.tree.children,!0),setTimeout(e,50)},b.$on("jmxTreeUpdated",b.populateTree),b.populateTree()}])}(Jmx||(Jmx={}));var Jmx;!function(a){a._module.controller("Jmx.OperationController",["$scope","workspace","jolokia","$timeout","$location","localStorage","$browser",function(b,c,d,e,f,g,h){b.item=b.selectedOperation,b.title=b.item.humanReadable,b.desc=b.item.desc,b.operationResult="",b.executeIcon="icon-ok",b.mode="text",b.entity={},b.formConfig={properties:{},description:b.objectName+"::"+b.item.name};var i=f.protocol()+"://"+f.host()+":"+f.port()+h.baseHref();b.jolokiaUrl=i+g.url+"/exec/"+c.getSelectedMBeanName()+"/"+b.item.name,b.item.args.forEach(function(a){b.formConfig.properties[a.name]={type:a.type,tooltip:a.desc,help:"Type: "+a.type}}),e(function(){$("html, body").animate({scrollTop:0},"medium")},250);var j=function(a){return a&&a.forEach(function(a){switch(a.type){case"int":case"long":a.formType="number";break;default:a.formType="text"}}),a};b.args=j(b.item.args),b.dump=function(a){console.log(a)},b.ok=function(){b.operationResult=""},b.reset=function(){b.entity={}},b.close=function(){b.$parent.showInvoke=!1},b.handleResponse=function(a){b.executeIcon="icon-ok",b.operationStatus="success",b.operationResult=null===a||"null"===a?"Operation Succeeded!":"string"==typeof a?a:angular.toJson(a,!0),b.mode=CodeEditor.detectTextFormat(b.operationResult),Core.$apply(b)},b.onSubmit=function(c,d){a.log.debug("onSubmit: json:",c," form: ",d),a.log.debug("$scope.item.args: ",b.item.args),angular.forEach(c,function(a,c){b.item.args.find(function(a){return a.name===c}).value=a}),b.execute()},b.execute=function(){var a=c.selection;if(a){var e=a.objectName;if(e){var f=[e,b.item.name];b.item.args&&b.item.args.forEach(function(a){f.push(a.value)}),f.push(onSuccess(b.handleResponse,{error:function(a){b.executeIcon="icon-ok",b.operationStatus="error";var c=a.error;b.operationResult=c;var d=a.stacktrace;d&&(b.operationResult=d),Core.$apply(b)}})),b.executeIcon="icon-spinner icon-spin";var g=d.execute;g.apply(d,f)}}}}]),a._module.controller("Jmx.OperationsController",["$scope","workspace","jolokia","rbacACLMBean","$templateCache",function(b,c,d,e,f){function g(a){return"("+a.map(function(a){return a.type}).join()+")"}function h(a){for(var b in a)b=""+b,a[b].name=b,a[b].humanReadable=Core.humanizeValue(b);return a}function i(c,f){var g={};g[c]=[],angular.forEach(f,function(a){g[c].push(a.name)}),e.then(function(e){d.request({type:"exec",mbean:e,operation:"canInvoke(java.util.Map)",arguments:[g]},onSuccess(function(d){var e=d.value;angular.forEach(e[c],function(a,b){f[b].canInvoke=a.CanInvoke}),a.log.debug("Got operations: ",b.operations),Core.$apply(b)},{error:function(c){a.log.debug("Failed to fetch ACL for operations: ",c),Core.$apply(b)}}))})}function j(a){var c=a.value.op,d={};angular.forEach(c,function(a,b){angular.isArray(a)?angular.forEach(a,function(a){d[b+g(a.args)]=a}):d[b+g(a.args)]=a}),b.operations=h(d),b.isOperationsEmpty()?Core.$apply(b):(i(b.objectName,b.operations),Core.$apply(b))}b.operations={},b.objectName="",b.methodFilter="",b.workspace=c,b.selectedOperation=null,b.showInvoke=!1,b.template="",b.invokeOp=function(a){b.canInvoke(a)&&(b.selectedOperation=a,b.showInvoke=!0)},b.getJson=function(a){return angular.toJson(a,!0)},b.cancel=function(){b.selectedOperation=null,b.showInvoke=!1},b.$watch("showInvoke",function(a,c){a!==c&&(b.template=a?f.get("operationTemplate"):"")});var k=Core.throttled(function(){var a=c.selection;a&&(b.objectName=a.objectName,b.objectName&&d.request({type:"list",path:escapeMBeanPath(b.objectName)},onSuccess(j)))},500);b.isOperationsEmpty=function(){return $.isEmptyObject(b.operations)},b.doFilter=function(a){return Core.isBlank(b.methodFilter)?!0:a.name.toLowerCase().has(b.methodFilter.toLowerCase())||a.humanReadable.toLowerCase().has(b.methodFilter.toLowerCase())?!0:!1},b.canInvoke=function(a){return"canInvoke"in a?a.canInvoke:!0},b.getClass=function(a){return b.canInvoke(a)?"can-invoke":"cant-invoke"},b.$watch("workspace.selection",function(){c.selection&&!c.moveIfViewInvalid()&&k()})}])}(Jmx||(Jmx={}));var JUnit;!function(a){function b(a){return d(a)&&c(a)}function c(a){return Core.getMBeanTypeObjectName(a,"hawtio","JUnitFacade")}function d(a){return Core.getMBeanTypeObjectName(a,"hawtio","Introspector")}a.log=Logger.get("JUnit"),a.isJUnitPluginEnabled=b,a.getJUnitMBean=c,a.getIntrospectorMBean=d}(JUnit||(JUnit={}));var JUnit;!function(a){var b="junit";a._module=angular.module(b,["bootstrap","ngResource","ngGrid","datatable","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/junit/tests",{templateUrl:"app/junit/html/tests.html",reloadOnSearch:!1})}]),a._module.factory("inProgressStatus",function(){return{jhandle:null,data:null,result:null,alertClass:"success"}}),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry",function(b,c,d,e,f){d.junit="app/junit/html/layoutJUnitTree.html",f.addUserDoc("junit","app/junit/doc/help.md",function(){return a.isJUnitPluginEnabled(c)}),c.topLevelTabs.push({id:"junit",content:"JUnit",title:"View and run test cases in this process",isValid:function(b){return a.isJUnitPluginEnabled(b)},href:function(){return"#/junit/tests"}})}]),hawtioPluginLoader.addModule(b)}(JUnit||(JUnit={}));var JUnit;!function(a){a._module.controller("JUnit.TreeController",["$scope","$location","workspace","jolokia","inProgressStatus",function(b,c,d,e,f){function g(){Jmx.updateTreeSelectionFromURL(c,$("#junittree"),!0)}function h(a){var c=a?a.key:null;k.debug("Selection is now: "+c);var d=b.testClasses;b.selectionKey=c,c&&(d=b.testClassMap[c]||[c]),b.selectedTests=d.map(function(a){return{id:a}}),Core.$apply(b)}function i(){function f(a){b.testClasses=a,b.testClassMap={},angular.forEach(a,function(a){for(var c=a.split("."),e=c.length-1,f=k,g="",h=0;e>h;h++){var i=c[h];g&&(g+="."),g+=i;var l=b.testClassMap[g];l||(l=[],b.testClassMap[g]=l),l.push(a),f=d.folderGetOrElse(f,i),f.key=g}var m=c[e],n=new Folder(m);n.addClass="testClass",n.domain=j,n.key=a,f.children.push(n)}),Core.$apply(b);var e=$("#junittree");Jmx.enableTree(b,c,d,e,l,!0,function(a){var c=a.data;h(c),Core.$apply(b)}),setTimeout(g,50)}var i=a.getIntrospectorMBean(d),j="org.unit",k=new Folder("Test Cases");k.addClass="testCases",k.typeName="testCases",k.domain=j,k.key="";var l=[k];i&&e.execute(i,"findJUnitTestClassNames",onSuccess(f))}function j(c){b.clearResults();var g=a.getJUnitMBean(d);g&&c&&c.length&&null===f.jhandle&&(k.info("Registering jolokia handle"),f.jhandle=e.register(l,{type:"exec",mbean:g,operation:"inProgress()",ignoreErrors:!0,arguments:[]}),e.execute(g,"runTestClasses",c,onSuccess(m)))}var k=Logger.get("JUnit");b.inProgressData=null,b.alertClass="success",b.testClasses=[],b.testClassMap={},b.gridOptions={selectedItems:[],data:"selectedTests",displayFooter:!1,showFilter:!1,filterOptions:{filterText:""},showSelectionCheckbox:!0,columnDefs:[{field:"id",displayName:"Test Class"}]},b.$on("$routeChangeSuccess",function(){setTimeout(g,50)}),b.$on("jmxTreeUpdated",function(){i()}),b.runAllTests=function(){j(b.testClasses)},b.runTests=function(){var a=(b.gridOptions.selectedItems||[]).map(function(a){return a.id});j(a)},b.runTest=function(a){a&&j([a])},b.clearResults=function(){b.testResults=null,b.alertClass="success",f.data=null,f.result=null,f.alertClass="success"},i(),b.runningTests=function(){return null!==f.data&&f.data.running?(b.inProgressData=f.data,b.alertClass=f.alertClass,!0):!1},b.hasTestResults=function(){return null!==f.result?(b.testResults=f.result,b.alertClass=f.alertClass,!0):!1};var l=function(a){var c=a.value;if(c){k.info("Render inProgress: "+c),f.data=c,b.inProgressData=f.data;var d="success";c.failureCount>0&&(d="error"),f.alertClass=d,b.alertClass=f.alertClass,c.running||null===f.jhandle||(k.info("Unit test done, unreigster jolokia handle"),e.unregister(f.jhandle),f.jhandle=null),Core.$apply(b)}},m=function(a){if(a){k.info("Render results: "+a),f.data=null,f.alertClass=null,f.result=a;var c="success",d="success",e="JUnit testing succeded with "+a.runCount+" runs.";a.failureCount>0&&(c="error",d="warning",e="JUnit testing failed with "+a.failureCount+" failures."),b.alertClass=c,b.testResults=f.result,Core.notification(d,e),Core.$apply(b)}}}])}(JUnit||(JUnit={}));var JVM;!function(a){function b(b,e,f){b.isActive=function(a){var b=Core.trimLeading(a,"#"),c=e.path();return c===b},b.isValid=function(a){return a&&a.isValid(f)},b.hasLocalMBean=function(){return a.hasLocalMBean(f)},b.breadcrumbs=[{content:'<i class=" icon-signin"></i> Remote',title:"Connect to a remote JVM running Jolokia",isValid:function(){return!0},href:"#/jvm/connect"},{content:'<i class="icon-list-ul"></i> Local',title:"View a diagram of the route",isValid:function(a){return c(a)},href:"#/jvm/local"},{content:'<i class="icon-signin"></i> Discovery',title:"Discover",isValid:function(a){return d(a)},href:"#/jvm/discover"}]}function c(a){return a.treeContainsDomainAndProperties("hawtio",{type:"JVMList"})}function d(a){return a.treeContainsDomainAndProperties("jolokia",{type:"Discovery"})}a.log=Logger.get("JVM"),a.connectControllerKey="jvmConnectSettings",a.connectionSettingsKey=Core.connectionSettingsKey,a.logoPath="img/icons/jvm/",a.logoRegistry={jetty:a.logoPath+"jetty-logo-80x22.png",tomcat:a.logoPath+"tomcat-logo.gif",generic:a.logoPath+"java-logo.svg"},a.configureScope=b,a.hasLocalMBean=c,a.hasDiscoveryMBean=d}(JVM||(JVM={}));var JVM;!function(a){a.rootPath="app/jvm",a.templatePath=a.rootPath+"/html/",a.pluginName="jvm",a._module=angular.module(a.pluginName,["bootstrap","ngResource","datatable","hawtioCore","hawtio-forms","ui"]),a._module.config(["$routeProvider",function(b){b.when("/jvm/discover",{templateUrl:a.templatePath+"discover.html"}).when("/jvm/connect",{templateUrl:a.templatePath+"connect.html"}).when("/jvm/local",{templateUrl:a.templatePath+"local.html"})}]),a._module.constant("mbeanName","hawtio:type=JVMList"),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry","preferencesRegistry","ConnectOptions",function(b,c,d,e,f,g,h){d[a.pluginName]=a.templatePath+"layoutConnect.html",f.addUserDoc("jvm","app/jvm/doc/help.md"),g.addTab("Connect","app/jvm/html/reset.html"),c.topLevelTabs.push({id:"connect",content:"Connect",title:"Connect to other JVMs",isValid:function(){return null==h||null==h.name},href:function(){return"#/jvm/connect"},isActive:function(a){return a.isLinkActive("jvm")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(JVM||(JVM={}));var JVM;!function(a){a.ConnectController=a._module.controller("JVM.ConnectController",["$scope","$location","localStorage","workspace",function(b,c,d,e){function f(){return Core.createConnectOptions({scheme:"http",host:"localhost",path:"jolokia",port:8181,userName:"",password:"",useProxy:!b.disableProxy})}b.forms={};var g=e&&e.tree&&e.tree.children&&e.tree.children.length;if(b.disableProxy=!g||Core.isChromeApp(),b.lastConnection="",a.connectControllerKey in d)try{b.lastConnection=angular.fromJson(d[a.connectControllerKey])}catch(h){b.lastConnection="",delete d[a.connectControllerKey]}b.connectionConfigs=Core.loadConnectionMap(),b.currentConfig=Core.isBlank(b.lastConnection)?f():b.connectionConfigs[b.lastConnection],b.formConfig={properties:{name:{type:"java.lang.String",tooltip:"Name for this connection",required:!0,"input-attributes":{placeholder:"Unnamed..."}},scheme:{type:"java.lang.String",tooltip:"HTTP or HTTPS","enum":["http","https"],required:!0},host:{type:"java.lang.String",tooltip:"Target host to connect to",required:!0},port:{type:"java.lang.Integer",tooltip:"The HTTP port used to connect to the server","input-attributes":{min:"0"},required:!0},path:{type:"java.lang.String",tooltip:"The URL path used to connect to Jolokia on the remote server"},userName:{type:"java.lang.String",tooltip:"The user name to be used when connecting to Jolokia"},password:{type:"password",tooltip:"The password to be used when connecting to Jolokia"},useProxy:{type:"java.lang.Boolean",tooltip:"Whether or not we should use a proxy. See more information in the panel to the left.","control-attributes":{"ng-hide":"disableProxy"}}}},b.newConnection=function(){b.lastConnection=""},b.deleteConnection=function(){delete b.connectionConfigs[b.lastConnection],Core.saveConnectionMap(b.connectionConfigs);var a=Object.extended(b.connectionConfigs).keys();b.lastConnection=0===a.length?"":a[0]},b.$watch("lastConnection",function(c,e){a.log.debug("lastConnection: ",c),c!==e&&(b.currentConfig=Core.isBlank(c)?f():b.connectionConfigs[c],d[a.connectControllerKey]=angular.toJson(c))},!0),b.save=function(){b.gotoServer(b.currentConfig,null,!0)},b.gotoServer=function(a,c,e){a||(a=Core.getConnectOptions(b.lastConnection));var f=a.name;return b.connectionConfigs[f]=a,b.lastConnection=f,e===!0?(Core.saveConnectionMap(b.connectionConfigs),b.connectionConfigs=Core.loadConnectionMap(),angular.extend(b.currentConfig,b.connectionConfigs[b.lastConnection]),void Core.$apply(b)):(Core.connectToServer(d,a),b.connectionConfigs=Core.loadConnectionMap(),angular.extend(b.currentConfig,b.connectionConfigs[b.lastConnection]),void Core.$apply(b))}}])}(JVM||(JVM={}));var JVM;!function(a){a._module.controller("JVM.DiscoveryController",["$scope","localStorage","jolokia",function(b,c,d){function e(a){if(!a.url)return void Core.notification("warning","No URL available to connect to agent");var b=Core.createConnectOptions(),d=Core.parseUrl(a.url);angular.extend(b,d),b.userName=a.username,b.password=a.password,Core.connectToServer(c,b)}function f(c){if(b.discovering=!1,!c.value)return void Core.$apply(b);var d=angular.toJson(c.value.sortBy(function(a){return a.agent_id}),!0);b.responseJson!==d&&(b.responseJson=d,a.log.debug("agents: ",b.agents),b.agents=c.value,Core.$apply(b))}b.discovering=!0,b.$watch("agents",function(a,c){a!==c&&(b.selectedAgent=b.agents.find(function(a){return a.selected}))},!0),b.closePopover=function(a){$(a.currentTarget).parents(".popover").prev().popover("hide")},b.connectWithCredentials=function(a,c){b.closePopover(a),e(c)},b.gotoServer=function(a,b){b.secured?$(a.currentTarget).popover("show"):e(b)},b.getElementId=function(a){return a.agent_id.dasherize().replace(/\./g,"-")},b.getLogo=function(b){return b.server_product?a.logoRegistry[b.server_product]:a.logoRegistry.generic},b.filterMatches=function(a){return Core.isBlank(b.filter)?!0:angular.toJson(a).toLowerCase().has(b.filter.toLowerCase())},b.getAgentIdClass=function(a){return b.hasName(a)?"":"strong"},b.hasName=function(a){return a.server_vendor&&a.server_product&&a.server_version?!0:!1},b.fetch=function(){b.discovering=!0,Core.$apply(b),d.execute("jolokia:type=Discovery","lookupAgentsWithTimeout(int)",3e4,onSuccess(f))},b.fetch()}])}(JVM||(JVM={}));var JVM;!function(a){a._module.controller("JVM.JVMsController",["$scope","$window","$location","localStorage","workspace","jolokia","mbeanName",function(b,c,d,e,f,g,h){function i(a){b.initDone=!0,b.data=a.value,0===b.data.length&&(b.status="Could not discover local JVM processes"),Core.$apply(b)}a.configureScope(b,d,f),b.data=[],b.deploying=!1,b.status="",b.initDone=!1,b.filter="",b.filterMatches=function(a){return Core.isBlank(b.filter)?!0:a.alias.toLowerCase().has(b.filter.toLowerCase())},b.fetch=function(){g.request({type:"exec",mbean:h,operation:"listLocalJVMs()",arguments:[]},{success:i,error:function(a){b.data=[],b.initDone=!0,b.status="Could not discover local JVM processes: "+a.error,Core.$apply(b)}})},b.stopAgent=function(a){g.request({type:"exec",mbean:h,operation:"stopAgent(java.lang.String)",arguments:[a]},onSuccess(function(){b.fetch()}))},b.startAgent=function(a){g.request({type:"exec",mbean:h,operation:"startAgent(java.lang.String)",arguments:[a]},onSuccess(function(){b.fetch()}))},b.connectTo=function(c,d,f,g,h){var i={};i.scheme=d,i.host=f,i.port=g,i.path=h,i.userName="",i.password="";var j=Core.createConnectToServerOptions(i);j.name="local",a.log.debug("Connecting to local JVM agent: "+c),Core.connectToServer(e,j),Core.$apply(b)},b.fetch()}])}(JVM||(JVM={}));var JVM;!function(a){a._module.controller("JVM.NavController",["$scope","$location","workspace",function(b,c,d){a.configureScope(b,c,d)}])}(JVM||(JVM={}));var JVM;!function(a){a._module.controller("JVM.ResetController",["$scope","localStorage",function(b,c){b.doClearConnectSettings=function(){var b=function(){delete c[a.connectControllerKey],delete c[a.connectionSettingsKey],setTimeout(function(){window.location.reload()},10)};b()}}])}(JVM||(JVM={}));var Karaf;!function(a){function b(a,b){if(!angular.isDefined(a))return b[0];var c=b.findIndex(function(b){return b.id===a.id});return-1!==c?b[c]:b[0]}function c(b,c,d,e,f){a.log.info("installing URI: ",d),c.request({type:"exec",mbean:x(b),operation:"addRepository(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function d(b,c,d,e,f){a.log.info("uninstalling URI: ",d),c.request({type:"exec",mbean:x(b),operation:"removeRepository(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function e(a,b,c,d,e,f){b.request({type:"exec",mbean:x(a),operation:"installFeature(java.lang.String, java.lang.String)",arguments:[c,d]},onSuccess(e,{error:f}))}function f(a,b,c,d,e,f){b.request({type:"exec",mbean:x(a),operation:"uninstallFeature(java.lang.String, java.lang.String)",arguments:[c,d]},onSuccess(e,{error:f}))}function g(a){var b=a;return angular.isArray(a)||(b=[a]),b}function h(a,b,c){return"<a href='"+Core.url("#/karaf/feature/"+b+"/"+c+a.hash())+"'>"+c+"</a>"}function i(a,b,c){var d=[],e=[];return n(a,d,e),d.find(function(a){return a.Name==b&&a.Version==c})}function j(a){return A.test(a)}function k(a){return G.test(a)}function l(a){return C.test(a)}function m(a){return E.test(a)}function n(a,b,c){var d=a.Features;angular.forEach(a.Repositories,function(a){c.push({id:a.Name,uri:a.Uri}),d&&angular.forEach(a.Features,function(c){angular.forEach(c,function(c){if(void 0!==d[c.Name]){var e=Object.extended(d[c.Name][c.Version]).clone();e.Id=c.Name+"/"+c.Version,e.RepositoryName=a.Name,e.RepositoryURI=a.Uri,b.push(e)}})})})}function o(a,b,c){var d=[];return angular.forEach(c,function(c){d.push({Name:c,State:p(t(a,b,c))})}),d}function p(a){switch(a){case 2:return"Enabled";case 4:return"Unsatisfied";case 8:return"Activating";case 16:return"Active";case 32:return"Registered";case 64:return"Factory";case 128:return"Deactivating";case 256:return"Destroying";case 1024:return"Disabling";case 2048:return"Disposing"}return"Unknown"}function q(a,b){var c=y(a),d=b.request({type:"read",mbean:c,arguments:[]});return"Components"in d.value?d.value.Components.values:(d=b.request({type:"exec",mbean:c,operation:"listComponents()"}),o(a,b,d.value))}function r(a,b,c){var d=q(a,b);return d.find(function(a){return a.Name==c})}function s(a,b,c){var d=b.request({type:"exec",mbean:y(a),operation:"isComponentActive(java.lang.String)",arguments:[c]});return d.value}function t(a,b,c){var d=b.request({type:"exec",mbean:y(a),operation:"componentState(java.lang.String)",arguments:[c]});return d.value}function u(a,b,c,d,e){b.request({type:"exec",mbean:y(a),operation:"activateComponent(java.lang.String)",arguments:[c]},onSuccess(d,{error:e}))}function v(a,b,c,d,e){b.request({type:"exec",mbean:y(a),operation:"deactiveateComponent(java.lang.String)",arguments:[c]},onSuccess(d,{error:e}))}function w(a,b,c){angular.forEach(b,function(b){angular.forEach(b,function(b){var d=i(a,b.Name,b.Version);d.id=b.Name+"/"+b.Version,c.push(d)})})}function x(a){if(a){var b=a.mbeanTypesToDomain.features||{},c=b["org.apache.karaf"]||{},d=c.objectName;if(d)return d;var e=a.tree.navigate("org.apache.karaf","features");if(!e&&(e=a.tree.navigate("org.apache.karaf"))){var f=e.children;e=null,angular.forEach(f,function(a){e||(e=a.navigate("features"))})}if(e){var f=e.children;if(f){var g=f[0];if(g)return g.objectName}return e.objectName}}return null}function y(a){if(a){var b=a.mbeanTypesToDomain.scr||{},c=b["org.apache.karaf"]||{},d=c.objectName;if(d)return d;var e=a.tree.navigate("org.apache.karaf","scr");if(!e&&(e=a.tree.navigate("org.apache.karaf"))){var f=e.children;e=null,angular.forEach(f,function(a){e||(e=a.navigate("scr"))})}if(e){var f=e.children;if(f){var g=f[0];if(g)return g.objectName}return e.objectName}}return null}a.log=Logger.get("Karaf"),a.setSelect=b,a.installRepository=c,a.uninstallRepository=d,a.installFeature=e,a.uninstallFeature=f,a.toCollection=g,a.featureLinks=h,a.extractFeature=i;var z=["^org.apache.aries","^org.apache.karaf","^activemq-karaf","^org.apache.commons","^org.apache.felix","^io.fabric8","^io.fabric8.fab","^io.fabric8.insight","^io.fabric8.mq","^io.fabric8.patch","^io.fabric8.runtime","^io.fabric8.security","^org.apache.geronimo.specs","^org.apache.servicemix.bundles","^org.objectweb.asm","^io.hawt","^javax.mail","^javax","^org.jvnet","^org.mvel2","^org.apache.mina.core","^org.apache.sshd.core","^org.apache.neethi","^org.apache.servicemix.specs","^org.apache.xbean","^org.apache.santuario.xmlsec","^biz.aQute.bndlib","^groovy-all","^com.google.guava","jackson-\\w+-asl","^com.fasterxml.jackson","^org.ops4j","^org.springframework","^bcprov$","^jline$","scala-library$","^org.scala-lang","^stax2-api$","^woodstox-core-asl","^org.jboss.amq.mq-fabric","^gravia-","^joda-time$","^org.apache.ws","-commands$","patch.patch","org.fusesource.insight","activeio-core","activemq-osgi","^org.eclipse.jetty","org.codehaus.jettison.jettison","org.jledit.core","org.fusesource.jansi","org.eclipse.equinox.region"],A=new RegExp(z.join("|")),B=["^org.apache.camel","camel-karaf-commands$","activemq-camel$"],C=new RegExp(B.join("|")),D=["^org.apache.cxf"],E=new RegExp(D.join("|")),F=["^org.apache.activemq","activemq-camel$"],G=new RegExp(F.join("|"));a.isPlatformBundle=j,a.isActiveMQBundle=k,a.isCamelBundle=l,a.isCxfBundle=m,a.populateFeaturesAndRepos=n,a.createScrComponentsView=o,a.getComponentStateDescription=p,a.getAllComponents=q,a.getComponentByName=r,a.isComponentActive=s,a.getComponentState=t,a.activateComponent=u,a.deactivateComponent=v,a.populateDependencies=w,a.getSelectionFeaturesMBean=x,a.getSelectionScrMBean=y}(Karaf||(Karaf={}));var Karaf;!function(a){var b="karaf";a._module=angular.module(b,["bootstrap","ngResource","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/osgi/server",{templateUrl:"app/karaf/html/server.html"}).when("/osgi/features",{templateUrl:"app/karaf/html/features.html",reloadOnSearch:!1}).when("/osgi/scr-components",{templateUrl:"app/karaf/html/scr-components.html"}).when("/osgi/scr-component/:name",{templateUrl:"app/karaf/html/scr-component.html"}).when("/osgi/feature/:name/:version",{templateUrl:"app/karaf/html/feature.html"})}]),a._module.run(["workspace","viewRegistry","helpRegistry",function(a,b,c){c.addUserDoc("karaf","app/karaf/doc/help.md",function(){return a.treeContainsDomainAndProperties("org.apache.karaf")})}]),hawtioPluginLoader.addModule(b)}(Karaf||(Karaf={}));var Karaf;!function(a){a._module.controller("Karaf.FeatureController",["$scope","jolokia","workspace","$routeParams",function(b,c,d,e){function f(c){if(b.row=a.extractFeature(c.value,b.name,b.version),b.row){i(b.row);var d=[];angular.forEach(b.row.Dependencies,function(a,b){angular.forEach(a,function(a,c){d.push({Name:b,Version:c})})}),b.row.Dependencies=d}Core.$apply(b)}function g(a){Osgi.defaultBundleValues(d,b,a.values),angular.forEach(a.value,function(a){var c=a.Location;b.bundlesByLocation[c]=a})}function h(){var b=a.getSelectionFeaturesMBean(d),c=Osgi.getSelectionBundleMBean(d),e=d.jolokia;c&&g(e.request({type:"exec",mbean:c,operation:"listBundles()"})),b&&e.request({type:"read",mbean:b},onSuccess(f))}function i(a){var c=[];angular.forEach(a.Bundles,function(a){var d=b.bundlesByLocation[a];d?(d.Installed=!0,c.push(d)):c.push({Location:a,Installed:!1})}),a.BundleDetails=c}b.hasFabric=Fabric.hasFabric(d),b.name=e.name,b.version=e.version,b.bundlesByLocation={},b.props="properties",h(),b.install=function(){a.installFeature(d,c,b.name,b.version,function(){Core.notification("success","Installed feature "+b.name)},function(a){Core.notification("error","Failed to install feature "+b.name+" due to "+a.error)})},b.uninstall=function(){a.uninstallFeature(d,c,b.name,b.version,function(){Core.notification("success","Uninstalled feature "+b.name)},function(a){Core.notification("error","Failed to uninstall feature "+b.name+" due to "+a.error)})},b.toProperties=function(a){var b="";return angular.forEach(a,function(a){b+=a.Key+" = "+a.Value+"\n"}),b.trim()}}])}(Karaf||(Karaf={}));var Karaf;!function(a){a._module.controller("Karaf.FeaturesController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){var d=angular.toJson(c.value);if(b.responseJson!==d){b.responseJson=d,b.featuresError=null===c.value.Features?!0:!1,b.features=[],b.repositories=[];var e=[],f=[];a.populateFeaturesAndRepos(c.value,e,f);var g=e.filter(function(a){return Core.parseBooleanValue(a.Installed)}),h=e.filter(function(a){return!Core.parseBooleanValue(a.Installed)});if(b.installedFeatures=g.sortBy(function(a){return a.Name}),h=h.sortBy(function(a){return a.Name}),f.sortBy("id").forEach(function(a){b.repositories.push({repository:a.id,uri:a.uri,features:h.filter(function(b){return b.RepositoryName===a.id})})}),!Core.isBlank(b.newRepositoryURI)){var i=f.find(function(a){return a.uri===b.newRepositoryURI});i&&(b.selectedRepositoryId=i.id),b.newRepositoryURI=""}b.selectedRepository=Core.isBlank(b.selectedRepositoryId)?b.repositories.first():b.repositories.find(function(a){return a.repository===b.selectedRepositoryId}),Core.$apply(b)}}b.hasFabric=Fabric.hasFabric(d),b.responseJson="",b.filter="",b.installedFeatures=[],b.features=[],b.repositories=[],b.selectedRepositoryId="",b.selectedRepository={},b.newRepositoryURI="",b.init=function(){var a=c.search().repositoryId;
a&&(b.selectedRepositoryId=a);var d=c.search().filter;d&&(b.filter=d)},b.init(),b.$watch("selectedRepository",function(a,d){a!==d&&(b.selectedRepositoryId=a?a.repository:"",c.search("repositoryId",b.selectedRepositoryId))},!0),b.$watch("filter",function(a,b){a!==b&&c.search("filter",a)});var g=a.getSelectionFeaturesMBean(d);a.log.debug("Features mbean: ",g),g&&Core.register(e,b,{type:"read",mbean:g},onSuccess(f)),b.inSelectedRepository=function(a){return b.selectedRepository&&"repository"in b.selectedRepository&&a&&"RepositoryName"in a&&a.RepositoryName===b.selectedRepository.repository?"in-selected-repository":""},b.isValidRepository=function(){return Core.isBlank(b.newRepositoryURI)},b.installRepository=function(){var c=b.newRepositoryURI;Core.notification("info","Adding feature repository URL"),a.installRepository(d,e,c,function(){Core.notification("success","Added feature repository URL"),b.selectedRepository={},b.selectedRepositoryId="",b.responseJson=null,b.triggerRefresh()},function(d){a.log.error("Failed to add feature repository URL ",c," due to ",d.error),a.log.info("stack trace: ",d.stacktrace),Core.$apply(b)})},b.uninstallRepository=function(){var c=b.selectedRepository.uri;Core.notification("info","Removing feature repository "+c),a.uninstallRepository(d,e,c,function(){Core.notification("success","Removed feature repository "+c),b.responseJson=null,b.selectedRepositoryId="",b.selectedRepository={},b.triggerRefresh()},function(d){a.log.error("Failed to remove feature repository ",c," due to ",d.error),a.log.info("stack trace: ",d.stacktrace),Core.$apply(b)})},b.triggerRefresh=function(){e.request({type:"read",method:"POST",mbean:g},onSuccess(f))},b.install=function(c){b.hasFabric||(Core.notification("info","Installing feature "+c.Name),a.installFeature(d,e,c.Name,c.Version,function(){Core.notification("success","Installed feature "+c.Name),b.installedFeatures.add(c),b.responseJson=null,b.triggerRefresh()},function(d){a.log.error("Failed to install feature ",c.Name," due to ",d.error),a.log.info("stack trace: ",d.stacktrace),Core.$apply(b)}))},b.uninstall=function(c){b.hasFabric||(Core.notification("info","Uninstalling feature "+c.Name),a.uninstallFeature(d,e,c.Name,c.Version,function(){Core.notification("success","Uninstalled feature "+c.Name),b.installedFeatures.remove(c),b.responseJson=null,b.triggerRefresh()},function(d){a.log.error("Failed to uninstall feature ",c.Name," due to ",d.error),a.log.info("stack trace: ",d.stacktrace),Core.$apply(b)}))},b.filteredRows=["Bundles","Configurations","Configuration Files","Dependencies"],b.showRow=function(a,c){return b.filteredRows.any(a)?!1:angular.isArray(c)&&0===c.length?!1:angular.isString(c)&&Core.isBlank(c)?!1:!angular.isObject(c)||c&&!Object.equal(c,{})?!0:!1},b.installed=function(a){var b=Core.parseBooleanValue(a);return b},b.showValue=function(a){if(angular.isArray(a)){var b=['<ul class="zebra-list">'];return a.forEach(function(a){b.push("<li>"+a+"</li>")}),b.push("</ul>"),b.join("\n")}if(angular.isObject(a)){var b=['<table class="table">',"<tbody>"];return angular.forEach(a,function(a,c){b.push("<tr>"),b.push("<td>"+c+"</td>"),b.push("<td>"+a+"</td>"),b.push("</tr>")}),b.push("</tbody>"),b.push("</table>"),b.join("\n")}return""+a},b.getStateStyle=function(a){return Core.parseBooleanValue(a.Installed)?"badge badge-success":"badge"},b.filterFeature=function(a){return Core.isBlank(b.filter)?!0:a.Id.has(b.filter)?!0:!1}}])}(Karaf||(Karaf={}));var Karaf;!function(a){a._module.controller("Karaf.NavBarController",["$scope","workspace",function(b,c){b.hash=c.hash(),b.isKarafEnabled=c.treeContainsDomainAndProperties("org.apache.karaf"),b.isFeaturesEnabled=a.getSelectionFeaturesMBean(c),b.isScrEnabled=a.getSelectionScrMBean(c),b.$on("$routeChangeSuccess",function(){b.hash=c.hash()}),b.isActive=function(a){return c.isLinkActive(a)},b.isPrefixActive=function(a){return c.isLinkPrefixActive(a)}}])}(Karaf||(Karaf={}));var Karaf;!function(a){a._module.controller("Karaf.ScrComponentController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(){b.row=a.getComponentByName(d,e,b.name),Core.$apply(b)}b.name=f.name,g(),b.activate=function(){a.activateComponent(d,e,b.row.Name,function(){console.log("Activated!")},function(){console.log("Failed to activate!")})},b.deactivate=function(){a.deactivateComponent(d,e,b.row.Name,function(){console.log("Deactivated!")},function(){console.log("Failed to deactivate!")})}}])}(Karaf||(Karaf={}));var Karaf;!function(a){a._module.controller("Karaf.ScrComponentsController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(){return[{Name:"",Status:!1}]}function g(a){Object.equal(b.result,a)||(b.components=a,b.result=b.components,Core.$apply(b))}b.component=f(),b.result=[],b.components=[],b.selectedComponents=[],b.scrOptions={data:"components",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!1},sortInfo:{fields:["Name"],directions:["asc"]},selectedItems:b.selectedComponents,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"Name",displayName:"Name",cellTemplate:'<div class="ngCellText"><a href="#/osgi/scr-component/{{row.entity.Name}}?p=container">{{row.getProperty(col.field)}}</a></div>',width:400},{field:"State",displayName:"State",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200}]};var h=a.getSelectionScrMBean(d);h&&g(a.getAllComponents(d,e)),b.activate=function(){b.selectedComponents.forEach(function(b){a.activateComponent(d,e,b.Name,function(){console.log("Activated!")},function(){console.log("Failed to activate!")})})},b.deactivate=function(){b.selectedComponents.forEach(function(b){a.deactivateComponent(d,e,b.Name,function(){console.log("Deactivated!")},function(){console.log("Failed to deactivate!")})})}}])}(Karaf||(Karaf={}));var Karaf;!function(a){a._module.controller("Karaf.ServerController",["$scope","$location","workspace","jolokia",function(a,b,c,d){function e(){setTimeout(f,50)}function f(){console.log("Loading Karaf data..."),d.search("org.apache.karaf:type=admin,*",onSuccess(g))}function g(a){if(angular.isArray(a)){var b=a[0];b&&d.getAttribute(b,"Instances",onSuccess(function(a){h(a,b)}))}}function h(b,c){if(b){var e=Core.parseMBean(c),f="root";"attributes"in e&&"name"in e.attributes&&(f=e.attributes.name);var g=b[f];a.data.name=g.Name,a.data.state=g.State,a.data.root=g["Is Root"],a.data.location=g.Location,a.data.sshPort=g["SSH Port"],a.data.rmiRegistryPort=g["RMI Registry Port"],a.data.rmiServerPort=g["RMI Server Port"],a.data.pid=g.Pid,a.data.version="?",a.data.startLevel="?",a.data.framework="?",a.data.frameworkVersion="?";var h="org.apache.karaf:type=system,name="+g.Name,i=d.request({type:"read",mbean:h,attribute:["StartLevel","Framework","Version"]},onSuccess(null)),j=i.value;j&&(a.data.version=j.Version,a.data.startLevel=j.StartLevel,a.data.framework=j.Framework);var k=d.search("osgi.core:type=bundleState,*",onSuccess(null));if(angular.isArray(k)){var c=k[0];if(c){var l=d.request({type:"exec",mbean:c,operation:"getVersion(long)",arguments:[0]},onSuccess(null)),m=l.value;m&&(a.data.frameworkVersion=m)}}}Core.$apply(a)}a.data={name:"",version:"",state:"",root:"",startLevel:"",framework:"",frameworkVersion:"",location:"",sshPort:"",rmiRegistryPort:"",rmiServerPort:"",pid:""},a.$on("jmxTreeUpdated",e),a.$watch("workspace.tree",e)}])}(Karaf||(Karaf={}));var Kubernetes;!function(a){function b(b,c,d){var e=Core.injector.get("$rootScope"),f=Core.injector.get("$resource"),g=Core.injector.get("KubernetesApiURL");g.then(function(g){var h=UrlHelpers.escapeColons(g);a.log.debug("Url for ",c,": ",h);var i=f(UrlHelpers.join(h,d),null,{query:{method:"GET",isArray:!1},save:{method:"PUT",params:{id:"@id"}}});b.resolve(i),Core.$apply(e)},function(d){a.log.debug("Failed to get rest API URL, can't create "+c+" resource: ",d),b.reject(d),Core.$apply(e)})}a._module=angular.module(a.pluginName,["hawtioCore","ngResource"]),a.controller=PluginHelpers.createControllerFunction(a._module,a.pluginName),a.route=PluginHelpers.createRoutingFunction(a.templatePath),a._module.config(["$routeProvider",function(b){b.when(UrlHelpers.join(a.context,"/pods"),a.route("pods.html",!1)).when(UrlHelpers.join(a.context,"/namespace/:namespace/pods"),a.route("pods.html",!1)).when(UrlHelpers.join(a.context,"replicationControllers"),a.route("replicationControllers.html",!1)).when(UrlHelpers.join(a.context,"/namespace/:namespace/replicationControllers"),a.route("replicationControllers.html",!1)).when(UrlHelpers.join(a.context,"services"),a.route("services.html",!1)).when(UrlHelpers.join(a.context,"/namespace/:namespace/services"),a.route("services.html",!1)).when(UrlHelpers.join(a.context,"apps"),a.route("apps.html",!1)).when(UrlHelpers.join(a.context,"apps/:namespace"),a.route("apps.html",!1)).when(UrlHelpers.join(a.context,"overview"),a.route("overview.html",!1))}]),a._module.factory("KubernetesApiURL",["jolokiaUrl","jolokia","$q","$rootScope",function(b,c,d,e){var f=d.defer();return c.getAttribute(a.mbean,"KubernetesAddress",void 0,onSuccess(function(c){var d=UrlHelpers.maybeProxy(b,c);a.log.debug("discovered API URL:",d),f.resolve(d),Core.$apply(e)},{error:function(b){a.log.debug("error fetching API URL: ",b),f.reject(b),Core.$apply(e)}})),f.promise}]),a._module.factory("KubernetesVersion",["$q",function(a){var c=a.defer();return b(c,"pods","/version"),c.promise}]),a._module.factory("KubernetesPods",["$q",function(a){var c=a.defer();return b(c,"pods","/api/v1beta1/pods/:id"),c.promise}]),a._module.factory("KubernetesReplicationControllers",["$q",function(a){var c=a.defer();return b(c,"replication controllers","/api/v1beta1/replicationControllers/:id"),c.promise}]),a._module.factory("KubernetesServices",["$q",function(a){var c=a.defer();return b(c,"services","/api/v1beta1/services/:id"),c.promise}]),a._module.factory("KubernetesState",[function(){return{namespaces:[],selectedNamespace:null}}]),a._module.run(["viewRegistry","workspace","ServiceRegistry",function(b,c,d){a.log.debug("Running"),b.kubernetes=a.templatePath+"layoutKubernetes.html",c.topLevelTabs.push({id:"kubernetes",content:"Kubernetes",isValid:function(b){return a.isKubernetes(b)},isActive:function(a){return a.isLinkActive("kubernetes")},href:function(){return a.defaultRoute}}),c.topLevelTabs.push({id:"kibana",content:"Logs",title:"View and search all logs across all containers using Kibana and ElasticSearch",isValid:function(){return Service.hasService(d,"kibana-service")},href:function(){return a.kibanaLogsLink(d)},isActive:function(){return!1}}),c.topLevelTabs.push({id:"grafana",content:"Metrics",title:"Views metrics across all containers using Grafana and InfluxDB",isValid:function(){return Service.hasService(d,"grafana-service")},href:function(){return Service.serviceLink(d,"grafana-service")},isActive:function(){return!1}})}]),hawtioPluginLoader.addModule(a.pluginName)}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(a){a.Apps=a.controller("Apps",["$scope","KubernetesServices","KubernetesReplicationControllers","KubernetesPods","KubernetesState","KubernetesApiURL","$templateCache","$location","$routeParams","$http","$dialog","$timeout","workspace","jolokia",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a){var c=b.appSelector.filterText;return c?Core.matchFilterIgnoreCase(a.groupId,c)||Core.matchFilterIgnoreCase(a.artifactId,c)||Core.matchFilterIgnoreCase(a.name,c)||Core.matchFilterIgnoreCase(a.description,c):!0}function q(a){return b.apps.any(function(b){return b.appPath===a.appPath})}function r(b,f){function g(b,d,e){if(!d||!b)return e();var f=d.id;f?c.then(function(c){c["delete"]({id:f},void 0,function(){a.log.debug("Deleted service: ",f),g(b,b.shift(),e)},function(c){a.log.debug("Error deleting service: ",c),g(b,b.shift(),e)})}):a.log.warn("No ID for service "+angular.toJson(d))}function h(b,c,e){if(!c||!b)return e();var f=c.id;f?d.then(function(c){c["delete"]({id:f},void 0,function(){a.log.debug("Deleted replicationController: ",f),h(b,b.shift(),e)},function(c){a.log.debug("Error deleting replicationController: ",c),h(b,b.shift(),e)})}):a.log.warn("No ID for replicationController "+angular.toJson(c))}function i(b,c,d){if(!c||!b)return d();var f=c.id;f?e.then(function(c){c["delete"]({id:f},void 0,function(){a.log.debug("Deleted pod: ",f),i(b,b.shift(),d)},function(c){a.log.debug("Error deleting pod: ",c),i(b,b.shift(),d)})}):a.log.warn("No ID for pod "+angular.toJson(c))}var j=[].concat(b.services);g(j,j.shift(),function(){var a=[].concat(b.replicationControllers);h(a,a.shift(),function(){var a=[].concat(b.pods);i(a,a.shift(),f)})})}function s(){if(b.appInfos&&b.appViews){b.fetched=!0;var c={},d=[],e={};angular.forEach(b.appInfos,function(a){var b=a.appPath,f=a.iconPath;if(a.$iconUrl=f?Wiki.gitRelativeURL(x,f):z,b){e[b]=a;var g=b.lastIndexOf("/"),h="";g>=0&&(h=b.substring(0,g)),h=Core.trimLeading(h,"/");var i=c[h];i||(i={path:h,expanded:!0,apps:[]},d.push(i),c[h]=i),i.apps.push(a)}}),b.appSelector.folders=d.sortBy("path");var f=[],g={$iconUrl:z,name:""};angular.forEach(b.appViews,function(c){var d=c.appPath;c.$info=g,c.$select=function(){a.setJson(b,c.id,b.apps)};var h=g;d&&(h=e[d]||g),c.$info=h,c.id=d,c.$name=h.name,c.$iconUrl=h.$iconUrl,c.$appUrl=Wiki.viewLink(x,d,i),c.$openResizeControllerDialog=function(a){b.resize={controller:a,newReplicas:a.replicas},b.resizeDialog.dialog.open(),m(function(){$("#replicas").focus()},50)},f.push(c),c.$podCounters=t(c),c.$serviceViews=u(c)}),b.apps=f,Core.$apply(b)}}function t(b){var c=[],d={},e=b.pods,f=null;return angular.forEach(e,function(b){var e=b.labels,g=a.labelsToString(e," "),h=d[e];h||(h={labelText:g,podsLink:Core.url("/kubernetes/pods?q="+encodeURIComponent(g)),valid:0,waiting:0,error:0},d[e]=h,c.push(h));var i=b.status;"OK"===i?h.valid+=1:"WAIT"===i?h.waiting+=1:h.error+=1;var j=b.creationTimestamp;if(j){var k=new Date(j);(!f||f>k)&&(f=k)}}),b.$creationDate=f,c}function u(b){var c=[],d=b.pods;angular.forEach(d,function(b){var c=b.id;if(c){var d=c,e=c.indexOf("-");e>1&&(d=c.substring(0,e)),b.idAbbrev=d}b.statusClass=a.statusTextToCssClass(b.status)});for(var e=b.services||[],f=b.replicationControllers||[],g=Math.max(e.length,f.length,1),h=b.$info.name,i=0;g>i;i++){var j=e[i],k=f[i],l=(k||{}).id,m=(j||{}).id||l,n=(j||{}).portalIP;!m&&d.length&&(m=d[0].idAbbrev),b.$info.name||(b.$info.name=m),!b.id&&d.length&&(b.id=d[0].id),i>0&&(h=m);var o=d.length,p=o+" pod"+(o>1?"s":""),q={appName:h||m,name:m,createdDate:b.$creationDate,podCountText:p,address:n,controllerId:l,service:j,replicationController:k,pods:d};c.push(q)}return c}function v(a){if(a){var c=a.value,d=angular.toJson(c);if(b.responseAppJson===d)return;b.responseAppJson=d,b.appInfos=c,s()}}function w(a){if(a){var c=a.value;if(b.responseJson===c)return;var d=[];c&&(d=JSON.parse(c)),b.responseJson=c,b.appViews=d,s()}}b.namespace=j.namespace,b.apps=[],b.allApps=[],b.kubernetes=f,b.fetched=!1,b.json="",ControllerHelpers.bindModelToSearchParam(b,i,"id","_id",void 0),ControllerHelpers.bindModelToSearchParam(b,i,"appSelectorShow","openApp",void 0),ControllerHelpers.bindModelToSearchParam(b,i,"mode","mode","list");var x=b.branch||"master",y=null,z=Core.url("/img/icons/kubernetes.svg");b.tableConfig={data:"apps",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:i.search().q||""},columnDefs:[{field:"icon",displayName:"App",cellTemplate:h.get("appIconTemplate.html")},{field:"services",displayName:"Services",cellTemplate:h.get("appServicesTemplate.html")},{field:"replicationControllers",displayName:"Controllers",cellTemplate:h.get("appReplicationControllerTemplate.html")},{field:"$podsLink",displayName:"Pods",cellTemplate:h.get("appPodCountsAndLinkTemplate.html")},{field:"$deployedText",displayName:"Deployed",cellTemplate:h.get("appDeployedTemplate.html")},{field:"namespace",displayName:"Namespace"}]},a.initShared(b,i),b.expandedPods=[],b.podExpanded=function(a){var c=(a||{}).id;return c&&(b.expandedPods||[]).indexOf(c)>=0},b.expandPod=function(a){var c=a.id;c&&b.expandedPods.push(c)},b.collapsePod=function(a){var c=a.id;c&&(b.expandedPods=b.expandedPods.remove(function(a){return c===a}))},b.$on("$routeUpdate",function(){a.setJson(b,i.search()._id,b.apps)}),a.isKubernetes(n)&&Core.register(o,b,{type:"exec",mbean:a.mbean,operation:"findApps",arguments:[x]},onSuccess(v)),a.isAppView(n)&&Core.register(o,b,{type:"exec",mbean:a.appViewMBean,operation:"findAppSummariesJson"},onSuccess(w)),b.deletePrompt=function(b){angular.isString(b)&&(b=[{id:b}]),UI.multiItemConfirmActionDialog({collection:b,index:"$name",onClose:function(c){function d(b,c){if(c){var e=c.name;a.log.debug("deleting: ",e),r(c,function(){a.log.debug("deleted: ",e),d(b,b.shift())})}}c&&d(b,b.shift())},title:"Delete Apps?",action:"The following Apps will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()},b.appSelector={filterText:"",folders:[],selectedApps:[],isOpen:function(a){return""!==b.appSelector.filterText||a.expanded?"opened":"closed"},getSelectedClass:function(a){return a["abstract"]?"abstract":a.selected?"selected":""},showApp:function(a){return p(a)&&!q(a)},showFolder:function(a){return!b.appSelector.filterText||a.apps.some(function(a){return p(a)&&!q(a)})},clearSelected:function(){angular.forEach(b.appSelector.folders,function(a){angular.forEach(a.apps,function(a){a.selected=!1})}),b.appSelector.selectedApps=[],Core.$apply(b)},updateSelected:function(){var a=[];angular.forEach(b.appSelector.folders,function(b){var c=b.apps.filter(function(a){return a.selected});c&&(a=a.concat(c))}),b.appSelector.selectedApps=a.sortBy("name")},select:function(a,c){a.selected=c,b.appSelector.updateSelected()},hasSelection:function(){return b.appSelector.folders.any(function(a){return a.apps.any(function(a){return a.selected})})},runSelectedApps:function(){angular.forEach(b.appSelector.selectedApps,function(c){var d=c.name,e=c.metadataPath;if(e){var f=Wiki.gitRelativeURL(x,e);f&&k.get(f).success(function(c){if(c){var e=angular.toJson(c),f=function(){};a.runApp(i,o,b,e,d,f,y)}}).error(function(c,d){b.summaryHtml=null,a.log.warn("Failed to load "+f+" "+c+" "+d)})}}),b.appSelector.clearSelected(),b.appSelectorShow=!1}},b.resizeDialog={dialog:new UI.Dialog,onOk:function(){b.resizeDialog.dialog.close(),a.resizeController(k,g,b.resize.controller.id,b.resize.newReplicas,function(){b.resize.controller.replicas=b.resize.newReplicas,Core.$apply(b)})},open:function(){b.resizeDialog.dialog.open()},close:function(){b.resizeDialog.dialog.close()}}}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(a){a.KubernetesJsonDirective=a._module.directive("kubernetesJson",[function(){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"kubernetesJsonDirective.html",scope:{config:"=kubernetesJson"},controller:["$scope","$location","$http","jolokia","marked",function(b,c,d,e,f){b.$watch("config",function(b){b?b.error?a.log.debug("Error parsing kubernetes config: ",b.error):a.log.debug("Got kubernetes configuration: ",b):a.log.debug("Kubernetes config unset")}),b.$on("Wiki.ViewPage.Children",function(c,e,g){if(b.appTitle=e,g){var h=g.find(function(a){return"summary.md"===a.name.toLowerCase()}),i=null;h&&(i=Wiki.gitRestURL(h.branch,h.path),d.get(i).success(function(a){var c=a;b.summaryHtml=c?f(c):null}).error(function(c,d){b.summaryHtml=null,a.log.warn("Failed to load "+i+" "+c+" "+d)}));var j=g.find(function(a){return a.name.toLowerCase().startsWith("icon")});j&&(b.iconURL=Wiki.gitRestURL(j.branch,j.path));var k=g.find(function(a){return"fabric8.properties"===a.name.toLowerCase()}),l=null;k&&(l=Wiki.gitRestURL(k.branch,k.path),d.get(l).success(function(a){var c=a;if(c){var d=/(?:name)\s*=\s*(.+)[\n|$]/,e=c.match(d);e[1]&&(b.displayName=e[1].replace(/\\/g,""))}}).error(function(b,c){a.log.warn("Failed to load "+l+" "+b+" "+c)}))}}),b.apply=function(){var d=angular.toJson(b.config),f=b.appTitle||"App";a.runApp(c,e,b,d,f,function(){c.url("/kubernetes/apps")})}}]}}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(a){a.FileDropController=a.controller("FileDropController",["$scope","jolokiaUrl","jolokia","FileUploader",function(b,c,d,e){b.uploader=new e({autoUpload:!0,removeAfterUpload:!0,url:c}),FileUpload.useJolokiaTransport(b.uploader,d,function(b){return a.log.debug("Json: ",b),{type:"exec",mbean:a.managerMBean,operation:"apply",arguments:[b]}}),b.uploader.onBeforeUploadItem=function(a){Core.notification("info","Uploading "+a)},b.uploader.onSuccessItem=function(b){a.log.debug("onSuccessItem: ",b)},b.uploader.onErrorItem=function(b,c,d){a.log.debug("Failed to apply, response: ",c," status: ",d)}}]),a.TopLevel=a.controller("TopLevel",["$scope","workspace","KubernetesVersion","KubernetesState",function(b,c,d,e){b.version=void 0,b.showAppView=a.isAppView(c),b.isActive=function(a){return c.isLinkActive(a)},b.kubernetes=e,d.then(function(a){a.query(function(a){b.version=a})})}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(a){{var b=(a._module.directive("kubernetesOverview",["$templateCache","$compile","$interpolate","$timeout","$window","KubernetesState",function(b,c,d,e,f,g){return{restrict:"E",replace:!0,link:function(f,h){function i(a,b){return d(a)(b)}function j(a,b,c){var d={};return d[b]=c,i(a,d)}function k(a,b,c){return c.map(function(c){return j(a,b,c)})}function l(a,b,d,e){e.forEach(function(e){var g=a.find("#"+e._key);g.length||a.append(c(j(b,d,e))(f))})}function m(a){return a.namespace===f.kubernetes.selectedNamespace}function n(){a.log.debug("First draw");var d=f.services,g=f.replicationControllers,i=(f.pods,f.hosts),l=angular.element(b.get("overviewTemplate.html")),n=l.find(".services"),o=l.find(".hosts"),p=l.find(".replicationControllers");n.append(k(b.get("serviceTemplate.html"),"service",d.filter(m))),p.append(k(b.get("replicationControllerTemplate.html"),"replicationController",g.filter(m))),i.forEach(function(a){var c=angular.element(j(b.get("hostTemplate.html"),"host",a)),d=angular.element(c.find(".pod-container"));d.append(k(b.get("podTemplate.html"),"pod",a.pods.filter(m))),o.append(c)}),h.append(c(l)(f)),e(function(){h.css({visibility:"visible"})},250)}function o(){f.$emit("jsplumbDoWhileSuspended",function(){a.log.debug("Update");var c=f.services.filter(m),d=f.replicationControllers.filter(m),e=(f.pods.filter(m),f.hosts),g=h.find("[hawtio-jsplumb]"),i=g.find(".jsplumb-node");i.each(function(b,c){var d=angular.element(c),e=d.attr("id");if(!Core.isBlank(e)){var g=d.attr("data-type");switch(g){case"host":if(e in f.hostsByKey)return;break;case"service":if(e in f.servicesByKey&&f.servicesByKey[e].namespace==f.kubernetes.selectedNamespace){var h=f.servicesByKey[e];return void d.attr("connect-to",h.connectTo)}break;case"pod":if(e in f.podsByKey&&f.podsByKey[e].namespace==f.kubernetes.selectedNamespace)return;break;case"replicationController":if(e in f.replicationControllersByKey&&f.replicationControllersByKey[e].namespace==f.kubernetes.selectedNamespace){var i=f.replicationControllersByKey[e];return void d.attr("connect-to",i.connectTo)}break;default:return void a.log.debug("Ignoring element with unknown type")}a.log.debug("Removing: ",e),d.remove()}});var j=g.find(".services"),k=g.find(".hosts"),n=g.find(".replicationControllers");l(j,b.get("serviceTemplate.html"),"service",c.filter(m)),l(n,b.get("replicationControllerTemplate.html"),"replicationController",d.filter(m)),l(k,b.get("hostTemplate.html"),"host",e),e.forEach(function(a){var c=g.find("#"+a._key);l(c,b.get("podTemplate.html"),"pod",a.pods.filter(m))})})}h.css({visibility:"hidden"}),f.getEntity=function(a,b){switch(a){case"host":return f.hostsByKey[b];case"pod":return f.podsByKey[b];case"replicationController":return f.replicationControllersByKey[b];case"service":return f.servicesByKey[b];default:return void 0}},f.kubernetes=g,f.customizeDefaultOptions=function(a){a.Endpoint=["Blank",{}]},f.mouseEnter=function(a){f.jsPlumb&&(angular.element(a.currentTarget).addClass("hovered"),f.jsPlumb.getEndpoints(a.currentTarget).forEach(function(a){a.connections.forEach(function(a){a.isHover()||(a.setHover(!0),a.endpoints.forEach(function(a){f.mouseEnter({currentTarget:a.element})}))})}))},f.mouseLeave=function(a){f.jsPlumb&&(angular.element(a.currentTarget).removeClass("hovered"),f.jsPlumb.getEndpoints(a.currentTarget).forEach(function(a){a.connections.forEach(function(a){a.isHover()&&(a.setHover(!1),a.endpoints.forEach(function(a){f.mouseLeave({currentTarget:a.element})}))})}))},f.customizeConnectionOptions=function(a,b,c,d){var e=b.source.el.attr("data-type");switch(d.connector=["Bezier",{curviness:50,stub:25,alwaysRespectStubs:!0}],e){case"pod":break;case"service":c.target=b.target.el,c.source=b.source.el,c.paintStyle={lineWidth:2,strokeStyle:"#5555cc"},c.anchors=[["ContinuousRight",{}],["ContinuousLeft",{}]];break;case"replicationController":c.paintStyle={lineWidth:2,dashstyle:"2 2",strokeStyle:"#44aa44"},c.anchors=[["Perimeter",{shape:"Circle"}],["ContinuousRight",{}]]}return d},f.$watch("count",function(a){a>0&&(0===h.children().length?n():o())})}}}]),a.controller("OverviewBoxController",["$scope","$location",function(a,b){a.viewDetails=function(c){b.path(UrlHelpers.join("/kubernetes/namespace",a.entity.namespace,c)).search({_id:a.entity.id})}}]),"OverviewController");a.controller(b,["$scope","$location","KubernetesServices","KubernetesPods","KubernetesReplicationControllers","KubernetesState",function(c,d,e,f,g,h){function i(a){var b=a;return b._key=a.namespace+"-"+a.id,b}function j(a){var b=[];return angular.forEach(a,function(a){b.push(i(a))}),b}function k(a,b,c){if(c){var d=_.matches(c);return a.filter(function(a){return a.namespace===b&&d(a.labels,void 0,void 0)})}return[]}function l(){if(n&&o&&p){c.servicesByKey={},c.podsByKey={},c.replicationControllersByKey={},c.kubernetes.namespaces={},n.forEach(function(a){c.servicesByKey[a._key]=a;var b=k(p,a.namespace,a.selector);a.connectTo=b.map(function(a){return a._key}).join(",")}),o.forEach(function(a){c.replicationControllersByKey[a._key]=a;var b=k(p,a.namespace,a.desiredState.replicaSelector);a.connectTo=b.map(function(a){return a._key}).join(",")});var b={};p.forEach(function(a){c.podsByKey[a._key]=a;var d=a.currentState.host;b[d]=b[d]||[],b[d].push(a)});{var d=[];q.length}for(var e in b)d.push({id:e,pods:b[e]});m=ArrayHelpers.removeElements(q,d),d.forEach(function(a){var b=q.find(function(b){return b.id===a.id});b?m=ArrayHelpers.sync(b.pods,a.pods):(m=!0,q.push(a))}),a.updateNamespaces(c.kubernetes,p,o,n),c.hosts=q,c.hostsByKey=b,c.pods=p,c.services=n,c.replicationControllers=o,m&&(a.log.debug("Redrawing"),c.count=c.count+1,m=!1)}}c.name=b,c.kubernetes=h,c.services=null,c.replicationControllers=null,c.pods=null,c.hosts=null,c.count=0;var m=!1,n=[],o=[],p=[],q=[],r=function(a){return a.id};ControllerHelpers.bindModelToSearchParam(c,d,"kubernetes.selectedNamespace","namespace",void 0),e.then(function(a){g.then(function(b){f.then(function(d){c.fetch=PollHelpers.setupPolling(c,function(c){function e(a){f=a,f>=g&&(l(),c())}var f=0,g=3;a.query(function(a){if(a){var b=j((a.items||[]).sortBy(r));m=ArrayHelpers.sync(n,b,"_key")}e(f+1)}),b.query(function(a){if(a){var b=j((a.items||[]).sortBy(r));m=ArrayHelpers.sync(o,b,"_key")}e(f+1)}),d.query(function(a){if(a){var b=j((a.items||[]).sortBy(r));m=ArrayHelpers.sync(p,b,"_key")}e(f+1)})}),c.fetch()})})})}])}}(Kubernetes||(Kubernetes={}));var Service;!function(a){function b(a,b){if(!a||!b)return!1;var c=!1;return angular.forEach(a.services,function(a){b===a.id&&(c=!0)}),c}function c(a,b){var c=null;return a&&b&&angular.forEach(a.services,function(a){b===a.id&&(c=a)}),c}function d(a,b){var d=c(a,b);if(d){var e=d.portalIP,f=d.port,g="http://";if(e)return f?g+e+":"+f+"/":g+e}return""}a.pluginName="Service",a.log=Logger.get(a.pluginName),a.pollServices=!1,a.hasService=b,a.findService=c,a.serviceLink=d}(Service||(Service={}));var Kubernetes;!function(a){a.EnvItem=a.controller("EnvItem",["$scope",function(a){var b=a.data.split("=");a.key=b.shift(),a.value=b.join("=")}]),a.Pods=a.controller("Pods",["$scope","KubernetesPods","KubernetesState","ServiceRegistry","$dialog","$window","$templateCache","$routeParams","jolokia","$location","localStorage",function(b,c,d,e,f,g,h,i,j,k,l){b.namespace=i.namespace,b.pods=void 0;var m=[];b.fetched=!1,b.json="",b.itemSchema=Forms.createFormConfiguration(),b.kubernetes=d,b.hasService=function(a){return Service.hasService(e,a)},b.tableConfig={data:"pods",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:k.search().q||""},columnDefs:[{field:"id",displayName:"ID",defaultSort:!0,cellTemplate:h.get("idTemplate.html")},{field:"currentState.status",displayName:"Status",cellTemplate:h.get("statusTemplate.html")},{field:"containerImages",displayName:"Images",cellTemplate:h.get("imageTemplate.html")},{field:"currentState.host",displayName:"Host"},{field:"currentState.podIP",displayName:"Pod IP"},{field:"labels",displayName:"Labels",cellTemplate:h.get("labelTemplate.html")},{field:"namespace",displayName:"Namespace"}]},b.podDetail={properties:{"manifest/containers/image$":{template:h.get("imageTemplate.html")},"currentState/status":{template:h.get("statusTemplate.html")},"\\/Env\\/":{template:h.get("envItemTemplate.html")},"^\\/labels$":{template:h.get("labelTemplate.html")},"\\/env\\/key$":{hidden:!0}}},ControllerHelpers.bindModelToSearchParam(b,k,"id","_id",void 0),b.openLogs=function(){var c=b.tableConfig.selectedItems;if((!c||!c.length)&&b.id){var d=b.item;d&&(c=[d])}a.openLogsForPods(e,g,c)},b.$on("kubeSelectedId",function(c,d){a.setJson(b,d,b.pods)}),b.$on("$routeUpdate",function(){a.setJson(b,k.search()._id,b.pods)}),j.getAttribute(a.mbean,"DockerIp",void 0,onSuccess(function(c){a.log.info("got Docker IP: "+c),c&&(b.dockerIp=c),Core.$apply(b)},{error:function(b){a.log.debug("error fetching API URL: ",b)}})),j.getAttribute(a.mbean,"HostName",void 0,onSuccess(function(c){a.log.info("got hostname: "+c),c&&(b.hostName=c),Core.$apply(b)},{error:function(b){a.log.debug("error fetching API URL: ",b)}})),a.initShared(b,k),b.connect={dialog:new UI.Dialog,saveCredentials:!1,userName:null,password:null,jolokiaUrl:null,containerName:null,view:null,onOK:function(){var c=b.connect.userName,d=b.connect.password,e=Core.injector.get("userDetails");e.password||(e.password=d),b.connect.saveCredentials&&(b.connect.saveCredentials=!1,c&&(l["kuberentes.userName"]=c),d&&(l["kuberentes.password"]=d)),a.log.info("Connecting to "+b.connect.jolokiaUrl+" for container: "+b.connect.containerName+" user: "+b.connect.userName);var f=Core.createConnectOptions({jolokiaUrl:b.connect.jolokiaUrl,userName:c,password:d,useProxy:!0,view:b.connect.view,name:b.connect.containerName});Core.connectToServer(l,f),setTimeout(function(){b.connect.dialog.close(),Core.$apply(b)},100)},doConnect:function(a){var c=Core.injector.get("userDetails");c&&(b.connect.userName=c.username,b.connect.password=c.password),b.connect.jolokiaUrl=a.$jolokiaUrl,b.connect.containerName=a.id;var d=l.fabricAlwaysPrompt;d&&"false"!==d||!b.connect.userName||!b.connect.password?b.connect.dialog.open():b.connect.onOK()}},c.then(function(c){b.deletePrompt=function(d){angular.isString(d)&&(d=[{id:d}]),UI.multiItemConfirmActionDialog({collection:d,index:"id",onClose:function(e){function f(d,e){e?(a.log.debug("deleting: ",e.id),c["delete"]({id:e.id},void 0,function(){a.log.debug("deleted: ",e.id),f(d,d.shift())},function(b){a.log.debug("Error deleting: ",b),f(d,d.shift())})):j.isRunning()||b.fetch()}e&&f(d,d.shift())},title:"Delete pods?",action:"The following pods will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()},b.fetch=PollHelpers.setupPolling(b,function(d){c.query(function(c){b.fetched=!0;ArrayHelpers.sync(m,(c.items||[]).sortBy(function(a){return a.id}).filter(function(a){return a.id&&(!b.namespace||b.namespace===a.namespace)
}));angular.forEach(m,function(c){c.$labelsText=a.labelsToString(c.labels);var d=Core.pathGet(c,["currentState","info"]),e=null,f=c.currentState||{},g=c.desiredState||{},h=f.host,i=f.podIP,j=!1,k=null;if(f&&!i&&angular.forEach(d,function(a){if(!e){var b=Core.pathGet(a,["detailInfo","HostConfig","PortBindings","8778/tcp"]);if(b){var c=b.map("HostPort");c&&c.length>0&&(e=c[0],j=!0)}}}),g&&!e){var l=Core.pathGet(g,["manifest","containers"]);angular.forEach(l,function(a){if(!e){var b=a.ports;angular.forEach(b,function(a){if(!e){var b=a.containerPort,c=a.name,d=a.hostPort;(8778===b||"jolokia"===c)&&b&&(i&&(k=b),d&&(e=d))}})}})}i&&k&&(h=i,e=k,j=!1),e&&(h||(h="localhost"),b.dockerIp&&j&&("localhost"===h||"127.0.0.1"===h||h===b.hostName)&&(h=b.dockerIp),a.isRunning(f)&&(c.$jolokiaUrl="http://"+h+":"+e+"/jolokia/",c.$connect=b.connect))}),a.setJson(b,b.id,m),b.pods=m.filter(function(a){return a.namespace===b.kubernetes.selectedNamespace}),a.updateNamespaces(b.kubernetes,m),b.$broadcast("hawtio.datatable.pods"),d()})}),b.fetch()})}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(a){a.DesiredReplicas=a.controller("DesiredReplicas",["$scope",function(a){var b=null,c=null;a.$watch("row.entity",function(){b&&angular.isFunction(b)&&(c=null,b()),b=a.$watch("row.entity.desiredState.replicas",function(b){null===c&&void 0!==b&&(c=b),0>b&&(a.row.entity.desiredState.replicas=0),b!==c?a.$emit("kubernetes.dirtyController",a.row.entity):a.$emit("kubernetes.cleanController",a.row.entity),Core.$apply(a)})}),a.$on("kubernetes.resetReplicas",function(){a.row.entity.desiredState.replicas=c})}]),a.ReplicationControllers=a.controller("ReplicationControllers",["$scope","KubernetesReplicationControllers","KubernetesPods","KubernetesState","$templateCache","$location","$routeParams","jolokia",function(b,c,d,e,f,g,h,i){function j(){angular.forEach(b.replicationControllers,function(b){var c=(b.desiredState||{}).replicaSelector;b.$podCounters=c?a.createPodCounters(c,l):null}),a.updateNamespaces(b.kubernetes,l,b.allReplicationControllers)}function k(){}b.namespace=h.namespace,b.kubernetes=e,b.replicationControllers=[],b.allReplicationControllers=[];var l=[];b.fetched=!1,b.json="",ControllerHelpers.bindModelToSearchParam(b,g,"id","_id",void 0),b.detailConfig={properties:{"^\\/labels$":{template:f.get("labelTemplate.html")}}},b.tableConfig={data:"replicationControllers",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:g.search().q||""},columnDefs:[{field:"icon",displayName:"",cellTemplate:f.get("iconCellTemplate.html")},{field:"id",displayName:"ID",cellTemplate:f.get("idTemplate.html")},{field:"currentState.replicas",displayName:"Pods",cellTemplate:f.get("podCountsAndLinkTemplate.html")},{field:"desiredState.replicas",displayName:"Replicas",cellTemplate:f.get("desiredReplicas.html")},{field:"labelsText",displayName:"Labels",cellTemplate:f.get("labelTemplate.html")},{field:"namespace",displayName:"Namespace"}]},a.initShared(b,g),b.$on("kubernetes.dirtyController",function(a,b){b.$dirty=!0}),b.$on("kubernetes.cleanController",function(a,b){b.$dirty=!1}),b.anyDirty=function(){return b.replicationControllers.any(function(a){return a.$dirty})},b.undo=function(){b.$broadcast("kubernetes.resetReplicas")},b.$on("kubeSelectedId",function(c,d){a.setJson(b,d,b.replicationControllers)}),b.$on("$routeUpdate",function(){a.setJson(b,g.search()._id,b.pods)}),c.then(function(c){d.then(function(d){b.save=function(){var d=b.replicationControllers.filter(function(a){return a.$dirty});d.length&&d.forEach(function(b){var d=b.apiVersion;d||(b.apiVersion=a.defaultApiVersion),c.save(void 0,b,function(){b.$dirty=!1,a.log.debug("Updated ",b.id)},function(c){b.$dirty=!1,a.log.debug("Failed to update ",b.id," error: ",c)})})},b.deletePrompt=function(d){angular.isString(d)&&(d=[{id:d}]),UI.multiItemConfirmActionDialog({collection:d,index:"id",onClose:function(e){function f(d,e){e?(a.log.debug("deleting: ",e.id),c["delete"]({id:e.id},void 0,function(){a.log.debug("deleted: ",e.id),f(d,d.shift())},function(b){a.log.debug("Error deleting: ",b),f(d,d.shift())})):i.isRunning()||b.fetch()}e&&f(d,d.shift())},title:"Delete replication controllers?",action:"The following replication controllers will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()},b.fetch=PollHelpers.setupPolling(b,function(e){function f(a){g=a,g>=h&&(k(),e())}var g=0,h=2;c.query(function(c){return b.fetched=!0,b.anyDirty()?(a.log.debug("Table has been changed, not updating local view"),void e()):(b.allReplicationControllers=(c.items||[]).sortBy(function(a){return a.id}),b.replicationControllers=b.allReplicationControllers.filter(function(a){return!b.kubernetes.selectedNamespace||b.kubernetes.selectedNamespace===a.namespace}),angular.forEach(b.replicationControllers,function(b){b.$labelsText=a.labelsToString(b.labels);var c=b.desiredState||{},d=c.replicaSelector;d&&(b.podsLink=Core.url("/kubernetes/pods?q="+encodeURIComponent(a.labelsToString(d," "))))}),a.setJson(b,b.id,b.replicationControllers),j(),void f(g+1))}),d.query(function(a){ArrayHelpers.sync(l,(a.items||[]).filter(function(a){return a.id&&(!b.namespace||b.namespace===a.namespace)})),j(),f(g+1)})}),b.fetch()})})}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(a){a.Services=a.controller("Services",["$scope","KubernetesServices","KubernetesPods","KubernetesState","$templateCache","$location","$routeParams","jolokia",function(b,c,d,e,f,g,h,i){function j(){angular.forEach(b.services,function(b){var c=b.selector;b.$podCounters=c?a.createPodCounters(c,l):null}),a.updateNamespaces(b.kubernetes,l,[],b.allServices)}function k(){}b.namespace=h.namespace,b.services=[],b.allServices=[],b.kubernetes=e;var l=[];b.fetched=!1,b.json="",ControllerHelpers.bindModelToSearchParam(b,g,"id","_id",void 0),b.tableConfig={data:"services",showSelectionCheckbox:!0,enableRowClickSelection:!1,multiSelect:!0,selectedItems:[],filterOptions:{filterText:g.search().q||""},columnDefs:[{field:"icon",displayName:"",cellTemplate:f.get("iconCellTemplate.html")},{field:"id",displayName:"ID",cellTemplate:f.get("idTemplate.html")},{field:"$podsLink",displayName:"Pods",cellTemplate:f.get("podCountsAndLinkTemplate.html")},{field:"selector",displayName:"Selector",cellTemplate:f.get("selectorTemplate.html")},{field:"portalIP",displayName:"Address",cellTemplate:f.get("portalAddress.html")},{field:"labelsText",displayName:"Labels",cellTemplate:f.get("labelTemplate.html")},{field:"namespace",displayName:"Namespace"}]},a.initShared(b,g),b.$on("kubeSelectedId",function(c,d){a.setJson(b,d,b.services)}),b.$on("$routeUpdate",function(){a.setJson(b,g.search()._id,b.pods)}),c.then(function(c){d.then(function(d){b.deletePrompt=function(d){angular.isString(d)&&(d=[{id:d}]),UI.multiItemConfirmActionDialog({collection:d,index:"id",onClose:function(e){function f(d,e){e?(a.log.debug("deleting: ",e.id),c["delete"]({id:e.id},void 0,function(){a.log.debug("deleted: ",e.id),f(d,d.shift())},function(b){a.log.debug("Error deleting: ",b),f(d,d.shift())})):i.isRunning()||b.fetch()}e&&f(d,d.shift())},title:"Delete services?",action:"The following services will be deleted:",okText:"Delete",okClass:"btn-danger",custom:"This operation is permanent once completed!",customClass:"alert alert-warning"}).open()},b.fetch=PollHelpers.setupPolling(b,function(e){function f(a){g=a,g>=h&&(k(),e())}var g=0,h=2;c.query(function(c){b.fetched=!0,b.allServices=(c.items||[]).sortBy(function(a){return a.id}),b.services=b.allServices.filter(function(a){return!b.kubernetes.selectedNamespace||b.kubernetes.selectedNamespace===a.namespace}),a.setJson(b,b.id,b.services),angular.forEach(b.services,function(b){b.$labelsText=a.labelsToString(b.labels)}),j(),f(g+1)}),d.query(function(a){ArrayHelpers.sync(l,(a.items||[]).filter(function(a){return a.id&&(!b.namespace||b.namespace===a.namespace)})),j(),f(g+1)})}),b.fetch()})})}])}(Kubernetes||(Kubernetes={}));var Kubernetes;!function(a){a.controller("ReplicationControllerIcon",["$scope","jolokia",function(b,c){b.iconUrl="img/icons/kubernetes.svg",c.request({type:"exec",mbean:a.mbean,operation:"iconPath(java.lang.String,java.lang.String)",arguments:["master",b.entity.id]},onSuccess(function(a){a.value&&(b.iconUrl=Wiki.gitRelativeURL("master",a.value),Core.$apply(b))}))}]);a.IDSelector=a.controller("IDSelector",["$scope",function(a){a.select=function(b){a.$emit("kubeSelectedId",b)}}]),a.PodStatus=a.controller("PodStatus",["$scope",function(b){b.statusMapping=function(b){return a.statusTextToCssClass(b)}}]),a.Labels=a.controller("Labels",["$scope","workspace","jolokia","$location",function(a){a.labels=[];var b={name:1,replicationController:2,group:3};a.$watch("entity",function(c){c&&(a.labels=[],angular.forEach(a.entity.labels,function(b,c){"fabric8"!==c&&a.labels.push({key:c,title:b})}),a.labels=a.labels.sort(function(a,c){function d(a){return b[a]||1e3}var e=a.key,f=c.key,g=d(e),h=d(f),i=g-h;return 0>i?-1:i>0?1:e&&f?e>f?1:f>e?-1:0:e===f?0:e?1:-1}))}),a.handleClick=function(b,c,d){var e=c+"="+d.title;a.$emit("labelFilterUpdate",e)};var c={version:"background-blue",name:"background-light-green",container:"background-light-grey"};a.labelClass=function(a){return a in c?c[a]+" mouse-pointer":"mouse-pointer"}}])}(Kubernetes||(Kubernetes={}));var Log;!function(a){var b="log",c=!1;a._module=angular.module(b,["bootstrap","ngResource","ngGrid","datatable","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/logs",{templateUrl:"app/log/html/logs.html",reloadOnSearch:!1}).when("/openlogs",{redirectTo:function(){return c?"/logs":"/home"},reloadOnSearch:!1})}]),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry","preferencesRegistry",function(b,d,e,f,g,h){c=a.treeContainsLogQueryMBean(d),e.log=f,g.addUserDoc("log","app/log/doc/help.md",function(){return a.treeContainsLogQueryMBean(d)}),h.addTab("Server Logs","app/log/html/preferences.html",function(){return a.treeContainsLogQueryMBean(d)}),d.topLevelTabs.push({id:"logs",content:"Logs",title:"View and search the logs of this container",isValid:function(b){return a.treeContainsLogQueryMBean(b)},href:function(){return"#/logs"}}),d.subLevelTabs.push({content:'<i class="icon-list-alt"></i> Log',title:"View the logs in this process",isValid:function(b){return a.isSelectionLogQueryMBean(b)},href:function(){return"#/logs"}})}]),a._module.filter("logDateFilter",["$filter",function(a){var b=a("date");return function(a){return a?a.timestampMs?b(a.timestampMs,"yyyy-MM-dd HH:mm:ss.sss"):b(a.timestamp,"yyyy-MM-dd HH:mm:ss"):null}}]),hawtioPluginLoader.addModule(b)}(Log||(Log={}));var Log;!function(a){var b=Logger.get("Log");a._module.controller("Log.LogController",["$scope","$routeParams","$location","localStorage","workspace","jolokia","$window","$document","$templateCache",function(c,d,e,f,g,h,i,j){c.sortAsc=!0;var k=f.logSortAsc;angular.isString(k)&&(c.sortAsc="true"===k),c.autoScroll=!0,k=f.logAutoScroll,angular.isString(k)&&(c.autoScroll="true"===k),k=f.logBatchSize,c.logBatchSize=angular.isNumber(k)?k:20,c.logs=[],c.showRowDetails=!1,c.showRaw={expanded:!1};var l=a.findLogQueryMBean(g);c.init=function(){c.searchText=d.s,angular.isDefined(c.searchText)||(c.searchText=""),c.filter={logLevelQuery:d.l,logLevelExactMatch:Core.parseBooleanValue(d.e),messageOnly:Core.parseBooleanValue(d.o)},angular.isDefined(c.filter.logLevelQuery)||(c.filter.logLevelQuery=""),angular.isDefined(c.filter.logLevelExactMatch)||(c.filter.logLevelExactMatch=!1),angular.isDefined(c.filter.messageOnly)||(c.filter.messageOnly=!1)},c.$on("$routeUpdate",c.init),c.$watch("searchText",function(a,b){a!==b&&e.search("s",a)}),c.$watch("filter.logLevelQuery",function(a,b){a!==b&&e.search("l",a)}),c.$watch("filter.logLevelExactMatch",function(a,b){a!==b&&e.search("e",a)}),c.$watch("filter.messageOnly",function(a,b){a!==b&&e.search("o",a)}),c.init(),c.toTime=0,c.logFilter={afterTimestamp:c.toTime,count:c.logBatchSize},c.logFilterJson=JSON.stringify(c.logFilter),c.queryJSON={type:"EXEC",mbean:l,operation:"jsonQueryLogResults",arguments:[c.logFilterJson],ignoreErrors:!0},c.logLevels=["TRACE","DEBUG","INFO","WARN","ERROR"],c.logLevelMap={},c.skipFields=["seq"],angular.forEach(c.logLevels,function(a,b){c.logLevelMap[a]=b,c.logLevelMap[a.toLowerCase()]=b}),c.selectedClass=function(a){return a===c.selectedRowIndex?"selected":""},c.$watch("selectedRowIndex",function(b,d){if(b!==d){if(0>b||b>c.logs.length)return c.selectedRow=null,void(c.showRowDetails=!1);a.log.debug("New index: ",b),c.selectedRow=c.logs[b],c.showRowDetails||(c.showRowDetails=!0)}}),c.hasOSGiProps=function(a){if(!a)return!1;if(!("properties"in a))return!1;var b=a.properties,c=Object.extended(b).keys().any(function(a){return a.startsWith("bundle")});return c},c.selectRow=function(a){return c.selectedRowIndex==a?void(c.showRowDetails=!0):void(c.selectedRowIndex=a)},c.getSelectedRowJson=function(){return angular.toJson(c.selectedRow,!0)},c.logClass=function(a){return a?logLevelClass(a.level):""},c.logIcon=function(a){if(!a)return"";var b=c.logClass(a);return"error"===b?"red icon-warning-sign":"warning"===b?"orange icon-exclamation-sign":"info"===b?"icon-info-sign":"icon-cog"},c.logSourceHref=a.logSourceHref,c.hasLogSourceHref=function(b){return b?a.hasLogSourceHref(b):!1},c.hasLogSourceLineHref=function(b){return b?a.hasLogSourceLineHref(b):!1},c.dateFormat="yyyy-MM-dd HH:mm:ss",c.formatException=function(b){return a.formatStackLine(b)},c.getSupport=function(){if(c.selectedRow){var a="https://access.redhat.com/knowledge/solutions",b=c.selectedRow.message,d=c.selectedRow.logger;a=a+"?logger="+d+"&text="+b,window.location.href=a}},c.addToDashboardLink=function(){var a="#/logs",b=angular.toJson(d),e=angular.toJson({size_x:8,size_y:1}),f="Logs";return""!==c.filter.logLevelQuery&&(f=f+" LogLevel: "+c.filter.logLevelQuery),c.filter.logLevelExactMatch&&(f+=" Exact Match"),""!==c.searchText&&(f=f+" Filter: "+c.searchText),c.filter.messageOnly&&(f+=" Message Only"),"#/dashboard/add?tab=dashboard&href="+encodeURIComponent(a)+"&routeParams="+encodeURIComponent(b)+"&title="+encodeURIComponent(f)+"&size="+encodeURIComponent(e)},c.isInDashboardClass=function(){return angular.isDefined(c.inDashboard&&c.inDashboard)?"log-table-dashboard":""},c.sortIcon=function(){return c.sortAsc?"icon-arrow-down":"icon-arrow-up"},c.filterLogMessage=function(a){var b=c.filter.messageOnly;if(""!==c.filter.logLevelQuery){var d=c.filter.logLevelExactMatch,e=c.filter.logLevelQuery,f=d?0:c.logLevelMap[e];if(d){if(a.level!==e)return!1}else{var g=c.logLevelMap[a.level];if(!(g>=f||0>g))return!1}}return c.searchText.startsWith("l=")?a.logger.has(c.searchText.last(c.searchText.length-2)):c.searchText.startsWith("m=")?a.message.has(c.searchText.last(c.searchText.length-2)):b?a.message.has(c.searchText):a.logger.has(c.searchText)||a.message.has(c.searchText)},c.formatStackTrace=function(a){if(!a)return"";var b='<ul class="unstyled">\n';return a.forEach(function(a){b=b+"<li>"+c.formatException(a)+"</li>"}),b+="\n</ul>"};var m=function(d){var e=!1;if(!c.inDashboard){var g=$(i);if(0===c.logs.length&&(e=!0),c.sortAsc)var h=g.scrollTop()+g.height(),k=Core.getDocHeight()-100;else var h=g.scrollTop()+g.height(),k=100;h>k&&(e=!0)}var l=d.events,m=d.toTimestamp;if(m&&angular.isNumber(m)&&(0>m?console.log("ignoring dodgy value of toTime: "+m):(c.toTime=m,c.logFilter.afterTimestamp=c.toTime,c.logFilterJson=JSON.stringify(c.logFilter),c.queryJSON.arguments=[c.logFilterJson])),l){var n=a.getLogCacheSize(f);c.inDashboard&&(n=10);var o=0;if(l.forEach(function(a){a&&(c.logs.any(function(b,c){return c.message===a.message&&c.seq===a.message&&c.timestamp===a.timestamp})||(o+=1,null!=a.seq&&(a.timestampMs=a.seq),c.sortAsc?c.logs.push(a):c.logs.unshift(a)))}),n>0){var p=c.logs.length;if(p>n){var q=p-n,h=0;c.sortAsc||(h=p-q),c.logs.splice(h,q),c.showRowDetails&&(c.sortAsc?c.selectedRowIndex-=q:c.selectedRowIndex+=q)}}o&&(c.autoScroll&&e&&setTimeout(function(){var a=0;c.sortAsc&&(a=j.height()-g.height()),b.debug("Scrolling to position: "+a),j.scrollTop(a)},20),Core.$apply(c))}},n=function(a){var b=a.value;b?m(b):Core.notification("error","Failed to get a response! "+JSON.stringify(a,null,4))},o=onSuccess(n,{error:function(a){n(a)},silent:!0});if(l){var p=function(a){m(a),Core.register(h,c,c.queryJSON,o)};h.execute(l,"getLogResults(int)",1e3,onSuccess(p))}}])}(Log||(Log={}));var Log;!function(a){a._module.controller("Log.PreferencesController",["$scope","localStorage",function(a,b){Core.initPreferenceScope(a,b,{logCacheSize:{value:1e3,converter:parseInt},logSortAsc:{value:!0,converter:Core.parseBooleanValue},logAutoScroll:{value:!0,converter:Core.parseBooleanValue},logBatchSize:{value:20,converter:parseInt}})}])}(Log||(Log={}));var Maven;!function(a){var b="maven";a._module=angular.module(b,["bootstrap","ngResource","datatable","tree","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/maven/search",{templateUrl:"app/maven/html/search.html"}).when("/maven/advancedSearch",{templateUrl:"app/maven/html/advancedSearch.html"}).when("/maven/artifact/:group/:artifact/:version/:classifier/:packaging",{templateUrl:"app/maven/html/artifact.html"}).when("/maven/artifact/:group/:artifact/:version/:classifier",{templateUrl:"app/maven/html/artifact.html"}).when("/maven/artifact/:group/:artifact/:version",{templateUrl:"app/maven/html/artifact.html"}).when("/maven/dependencies/:group/:artifact/:version/:classifier/:packaging",{templateUrl:"app/maven/html/dependencies.html"}).when("/maven/dependencies/:group/:artifact/:version/:classifier",{templateUrl:"app/maven/html/dependencies.html"}).when("/maven/dependencies/:group/:artifact/:version",{templateUrl:"app/maven/html/dependencies.html"}).when("/maven/versions/:group/:artifact/:classifier/:packaging",{templateUrl:"app/maven/html/versions.html"}).when("/maven/view/:group/:artifact/:version/:classifier/:packaging",{templateUrl:"app/maven/html/view.html"}).when("/maven/test",{templateUrl:"app/maven/html/test.html"})}]),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(b,c,d,e){d.maven="app/maven/html/layoutMaven.html",c.topLevelTabs.push({id:"maven",content:"Maven",title:"Search maven repositories for artifacts",isValid:function(b){return a.getMavenIndexerMBean(b)},href:function(){return"#/maven/search"},isActive:function(a){return a.isLinkActive("/maven")}}),e.addUserDoc("maven","app/maven/doc/help.md",function(){return null!==a.getMavenIndexerMBean(c)}),e.addDevDoc("maven","app/maven/doc/developer.md")}]),hawtioPluginLoader.addModule(b)}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.ArtifactController",["$scope","$routeParams","workspace","jolokia",function(b,c,d,e){function f(){var b=a.getMavenIndexerMBean(d);b?e.execute(b,"search",h.groupId,h.artifactId,h.version,h.packaging,h.classifier,"",onSuccess(g)):console.log("No MavenIndexerMBean!")}function g(a){if(a&&a.length){var c=a[0];h.name=c.name,h.description=c.description}Core.$apply(b)}b.row={groupId:c.group||"",artifactId:c.artifact||"",version:c.version||"",classifier:c.classifier||"",packaging:c.packaging||""};var h=b.row;b.id=a.getName(h),a.addMavenFunctions(b,d),b.$on("$routeChangeSuccess",function(){setTimeout(f,50)}),b.$watch("workspace.selection",function(){f()})}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.DependenciesController",["$scope","$routeParams","$location","workspace","jolokia",function(b,c,d,e,f){function g(){var c=a.getAetherMBean(e);c?f.execute(c,"resolveJson(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String)",b.group,b.artifact,b.version,b.packaging,b.classifier,onSuccess(h)):console.log("No AetherMBean!")}function h(a){if(a){var c=JSON.parse(a);c&&(b.dependencyTree=new Folder("Dependencies"),b.dependencyActivations=[],i(b.dependencyTree,c),b.dependencyActivations.reverse(),b.rootDependency=b.dependencyTree.children[0])}Core.$apply(b)}function i(c,d){var e=a.getName(d),f=new Folder(e);f.key=e.replace(/\//g,"_"),f.dependency=d,b.dependencyActivations.push(f.key),c.children.push(f);var g=d.children;angular.forEach(g,function(a){i(f,a)})}b.artifacts=[],b.group=c.group||"",b.artifact=c.artifact||"",b.version=c.version||"",b.classifier=c.classifier||"",b.packaging=c.packaging||"",b.dependencyTree=null,a.addMavenFunctions(b,e),b.$on("$routeChangeSuccess",function(){setTimeout(g,50)}),b.$watch("workspace.selection",function(){g()}),b.onSelectNode=function(a){b.selected=a},b.onRootNode=function(){},b.validSelection=function(){return b.selected&&b.selected!==b.rootDependency},b.viewDetails=function(){var a=Core.pathGet(b.selected,["dependency"]),c=b.detailLink(a);if(c){var e=Core.trimLeading(c,"#");console.log("going to view "+e),d.path(e)}}}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.PomXmlController",["$scope",function(a){function b(a){return a||""}a.mavenPomXml="\n  <dependency>\n    <groupId>"+b(a.row.groupId)+"</groupId>\n    <artifactId>"+b(a.row.artifactId)+"</artifactId>\n    <version>"+b(a.row.version)+"</version>\n  </dependency>\n"}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.SearchController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(a){if(g.debug("Search done, preparing result."),b.done=!0,b.inProgress=!1,a.length>i){var c=a.length===j;b.tooManyResponses=c?"This search returned more than "+(j-1)+" artifacts, showing the first "+i+", please refine your search":"This search returned "+a.length+" artifacts, showing the first "+i+", please refine your search"}else b.tooManyResponses="";b.artifacts=a.first(i),Core.$apply(b)}var g=Logger.get("Maven");b.artifacts=[],b.selected=[],b.done=!1,b.inProgress=!1,b.form={searchText:""},b.search="",b.searchForm="app/maven/html/searchForm.html",a.addMavenFunctions(b,d);var h=[{field:"groupId",displayName:"Group"},{field:"artifactId",displayName:"Artifact",cellTemplate:'<div class="ngCellText" title="Name: {{row.entity.name}}">{{row.entity.artifactId}}</div>'},{field:"version",displayName:"Version",cellTemplate:'<div class="ngCellText" title="Name: {{row.entity.name}}"><a ng-href="{{detailLink(row.entity)}}">{{row.entity.version}}</a</div>'}];b.gridOptions={data:"artifacts",displayFooter:!0,selectedItems:b.selected,selectWithCheckboxOnly:!0,columnDefs:h,rowDetailTemplateId:"artifactDetailTemplate",filterOptions:{filterText:"search"}},b.hasAdvancedSearch=function(a){return a.searchGroup||a.searchArtifact||a.searchVersion||a.searchPackaging||a.searchClassifier||a.searchClassName},b.doSearch=function(){b.done=!1,b.inProgress=!0,b.artifacts=[],setTimeout(function(){Core.$apply(b)},50);var c=a.getMavenIndexerMBean(d),h=b.form;if(c){var i=h.searchText,j=h.artifactType;if(j)if("className"===j)g.debug("Search for: "+h.searchText+" className"),e.execute(c,"searchClasses",i,onSuccess(f));else{var k=j.split("/"),l=k[0],m=k[1];g.debug("Search for: "+h.searchText+" packaging "+l+" classifier "+m),e.execute(c,"searchTextAndPackaging",i,l,m,onSuccess(f))}else i?(g.debug("Search text is: "+h.searchText),e.execute(c,"searchText",h.searchText,onSuccess(f))):b.hasAdvancedSearch(h)&&(g.debug("Searching for "+h.searchGroup+"/"+h.searchArtifact+"/"+h.searchVersion+"/"+h.searchPackaging+"/"+h.searchClassifier+"/"+h.searchClassName),e.execute(c,"search",h.searchGroup||"",h.searchArtifact||"",h.searchVersion||"",h.searchPackaging||"",h.searchClassifier||"",h.searchClassName||"",onSuccess(f)))}else Core.notification("error","Cannot find the Maven Indexer MBean!")};var i=1e3,j=10*i+1}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.TestController",["$scope","workspace","jolokia","$q","$templateCache",function(b,c,d,e,f){b.html="text/html",b.someUri="",b.uriParts=[],b.mavenCompletion=f.get("mavenCompletionTemplate"),b.$watch("someUri",function(a,c){a!==c&&(b.uriParts=a.split("/"))}),b.$watch("uriParts",function(a,c){if(a!==c&&1===a.length&&a.length<c.length&&""!==c.last()&&a.first().has(c.last())){var d=c.first(c.length-1).include(a.first());b.someUri=d.join("/")}},!0),b.doCompletionMaven=function(f){return a.completeMavenUri(e,b,c,d,f)}}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.VersionsController",["$scope","$routeParams","workspace","jolokia",function(b,c,d,e){function f(){var c=a.getMavenIndexerMBean(d);c?e.execute(c,"versionComplete",b.group,b.artifact,b.version,b.packaging,b.classifier,onSuccess(g)):console.log("No MavenIndexerMBean!")}function g(a){b.artifacts=[],angular.forEach(a,function(a){for(var c=Core.parseVersionNumbers(a),d=0,e=0;4>=e;e++){var f=e>=c.length?0:c[e];d*=1e3,d+=f}b.artifacts.push({groupId:b.group,artifactId:b.artifact,packaging:b.packaging,classifier:b.classifier,version:a,versionNumber:d})}),Core.$apply(b)}b.artifacts=[],b.group=c.group||"",b.artifact=c.artifact||"",b.version="",b.classifier=c.classifier||"",b.packaging=c.packaging||"";var h=b.group+"/"+b.artifact;b.classifier&&(h+="/"+b.classifier),b.packaging&&(h+="/"+b.packaging);var i=h+" versions",j=[{field:"version",displayName:i,cellTemplate:'<div class="ngCellText"><a href="#/maven/artifact/{{row.entity.groupId}}/{{row.entity.artifactId}}/{{row.entity.version}}">{{row.entity.version}}</a></div>'}];b.gridOptions={data:"artifacts",displayFooter:!0,selectedItems:b.selected,selectWithCheckboxOnly:!0,columnDefs:j,rowDetailTemplateId:"artifactDetailTemplate",sortInfo:{field:"versionNumber",direction:"DESC"},filterOptions:{filterText:"search"}},a.addMavenFunctions(b,d),b.$on("$routeChangeSuccess",function(){setTimeout(f,50)}),b.$watch("workspace.selection",function(){f()})}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.ViewController",["$scope","$location","workspace","jolokia",function(a){function b(){}a.$watch("workspace.tree",function(){setTimeout(b,50)}),a.$on("$routeChangeSuccess",function(){setTimeout(b,50)})}])}(Maven||(Maven={}));var OpenEJB;!function(a){var b="openejb";a._module=angular.module(b,["bootstrap","ngResource","hawtioCore"]),a._module.config(["$routeProvider",function(){}]),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,b,c,d){c.openojb="app/openejb/html/layoutOpenEJBTree.html",d.addUserDoc("openejb","app/openejb/doc/help.md",function(){return b.treeContainsDomainAndProperties("openejb")}),b.topLevelTabs.push({id:"openejb",content:"OpenEJB",title:"Manage your OpenEJB resources",isValid:function(a){return a.treeContainsDomainAndProperties("openejb")},href:function(){return"#/jmx/attributes?tab=openejb"},isActive:function(a){return a.isTopTabActive("openejb")}})}]),hawtioPluginLoader.addModule(b)}(OpenEJB||(OpenEJB={}));var OpenEJB;!function(a){a._module.controller("OpenEJB.TreeController",["$scope","$location","workspace",function(a,b,c){function d(){Jmx.updateTreeSelectionFromURL(b,$("#openejbTree"),!0)}a.$on("$routeChangeSuccess",function(){setTimeout(d,50)}),a.$watch("workspace.tree",function(){if(!c.moveIfViewInvalid()){var e=[],f=c.tree;if(f){var g=f.children;angular.forEach(g,function(a){var b=a.children;a.title.startsWith("openejb")&&b&&(e=e.concat(b))})}var h=$("#openejbTree");Jmx.enableTree(a,b,c,h,e,!0),setTimeout(d,50)}})}])}(OpenEJB||(OpenEJB={}));var Osgi;!function(a){var b="osgi";a._module=angular.module(b,["bootstrap","ngResource","ngGrid","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/osgi/bundle-list",{templateUrl:"app/osgi/html/bundle-list.html"}).when("/osgi/bundles",{templateUrl:"app/osgi/html/bundles.html"}).when("/osgi/bundle/:bundleId",{templateUrl:"app/osgi/html/bundle.html"}).when("/osgi/services",{templateUrl:"app/osgi/html/services.html"}).when("/osgi/packages",{templateUrl:"app/osgi/html/packages.html"}).when("/osgi/package/:package/:version",{templateUrl:"app/osgi/html/package.html"}).when("/osgi/configurations",{templateUrl:"app/osgi/html/configurations.html"}).when("/osgi/pid/:pid/:factoryPid",{templateUrl:"app/osgi/html/pid.html"}).when("/osgi/pid/:pid",{templateUrl:"app/osgi/html/pid.html"}).when("/osgi/fwk",{templateUrl:"app/osgi/html/framework.html"}).when("/osgi/dependencies",{templateUrl:"app/osgi/html/svc-dependencies.html",reloadOnSearch:!1})}]),a._module.run(["workspace","viewRegistry","helpRegistry",function(a,b,c){b.osgi="app/osgi/html/layoutOsgi.html",c.addUserDoc("osgi","app/osgi/doc/help.md",function(){return a.treeContainsDomainAndProperties("osgi.core")}),a.topLevelTabs.push({id:"osgi",content:"OSGi",title:"Visualise and manage the bundles and services in this OSGi container",isValid:function(a){return a.treeContainsDomainAndProperties("osgi.core")},href:function(){return"#/osgi/bundle-list"},isActive:function(a){return a.isLinkActive("osgi")}})}]),a._module.factory("osgiDataService",["workspace","jolokia",function(b,c){return new a.OsgiDataService(b,c)}]),hawtioPluginLoader.addModule(b)}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.BundleListController",["$scope","workspace","jolokia","localStorage",function(b,c,d,e){function f(e){var f=e.value,g=angular.toJson(f);b.responseJson!==g&&(b.responseJson=g,b.bundles=[],angular.forEach(f,function(a){var c={Identifier:a.Identifier,Name:"",SymbolicName:a.SymbolicName,Fragment:a.Fragment,State:a.State,Version:a.Version,LastModified:new Date(Number(a.LastModified)),Location:a.Location,StartLevel:void 0};a.Headers["Bundle-Name"]&&(c.Name=a.Headers["Bundle-Name"].Value),b.bundles.push(c)}),b.bundles=b.bundles.sortBy(b.display.sortField),Core.$apply(b),setTimeout(function(){for(var e=[],f=0;f<b.bundles.length;f++){var g=b.bundles[f];e.push({type:"exec",mbean:a.getSelectionBundleMBean(c),operation:"getStartLevel(long)",arguments:[g.Identifier]})}var h=e.length;d.request(e,onSuccess(function(c){var d=c.request.arguments.first();if(angular.isDefined(d)){var e=b.bundles[d];e&&(a.log.debug("Setting bundle: ",e.Identifier," start level to: ",c.value),e.StartLevel=c.value)}h-=1,a.log.debug("oustanding responses: ",h),0===h&&(a.log.debug("Updating page..."),Core.$apply(b))}))},500))}b.result={},b.bundles=[],b.bundleUrl="",b.display={bundleField:"Name",sortField:"Identifier",bundleFilter:"",startLevelFilter:0,showActiveMQBundles:!1,showCamelBundles:!1,showCxfBundles:!1,showPlatformBundles:!1},"bundleList"in e&&(b.display=angular.fromJson(e.bundleList)),b.$watch("display",function(a,b){a!==b&&(e.bundleList=angular.toJson(a))},!0),b.installDisabled=function(){return""===b.bundleUrl},b.install=function(){d.request({type:"exec",mbean:a.getSelectionFrameworkMBean(c),operation:"installBundle(java.lang.String)",arguments:[b.bundleUrl]},{success:function(e){var f=e.value;d.request({type:"exec",mbean:a.getSelectionBundleMBean(c),operation:"isFragment(long)",arguments:[f]},{success:function(e){var g=e.value;g?(Core.notification("success","Fragment installed successfully."),b.bundleUrl="",Core.$apply(b)):d.request({type:"exec",mbean:a.getSelectionFrameworkMBean(c),operation:"startBundle(long)",arguments:[f]},{success:function(){Core.notification("success","Bundle installed and started successfully."),b.bundleUrl="",Core.$apply(b)},error:function(a){Core.notification("error",a.error)}})},error:function(a){Core.notification("error",a.error)}})},error:function(a){Core.notification("error",a.error)}})},b.$watch("display.sortField",function(a,c){a!==c&&(b.bundles=b.bundles.sortBy(a))}),b.getStateStyle=function(b){return a.getStateStyle("badge",b)},b.getLabel=function(a){var c;return"Name"===b.display.bundleField?(c=a.Name,""===c&&(c=a.SymbolicName)):c=a.SymbolicName,c},b.filterBundle=function(a){if(b.display.startLevelFilter>0&&a.StartLevel<b.display.startLevelFilter)return!1;var c=b.getLabel(a);if(b.display.bundleFilter&&!c.toLowerCase().has(b.display.bundleFilter.toLowerCase()))return!1;if(Core.isBlank(b.display.bundleFilter)){var d=!0;return b.display.showPlatformBundles||(d=!Karaf.isPlatformBundle(a.SymbolicName)),d&&!b.display.showActiveMQBundles&&(d=!Karaf.isActiveMQBundle(a.SymbolicName)),d&&!b.display.showCxfBundles&&(d=!Karaf.isCxfBundle(a.SymbolicName)),d&&!b.display.showCamelBundles&&(d=!Karaf.isCamelBundle(a.SymbolicName)),d
}return!0},Core.register(d,b,{type:"exec",mbean:a.getSelectionBundleMBean(c),operation:"listBundles()"},onSuccess(f))}])}(Osgi||(Osgi={}));var Osgi;!function(a){function b(a){var b=a.indexOf(";");return 0>=b?"":a.substring(b+1).trim()}function c(a,b){var c="";if(!a)return c;for(var d=Object.keys(a).sort(),e=0;e<d.length;e++){var f,g=d[e],h=g.charAt(0),i="";if("A"===h&&(i="=",f="text-info"),"D"===h&&(i=":=",f="muted"),""!==i){if(b&&"Aversion"===g)continue;var j=a[g];j.length>15&&(j=j.replace(/[,]/g,",<br/>&nbsp;&nbsp;")),c+="<tr><td><strong class='"+f+"'>"+g.substring(1)+"</strong>"+i+j+"</td></tr>"}}return c}function d(a){if(Object.isArray(a))return e(a);var b=a.toString(),c=b.lastIndexOf(".");return b.substring(c+1)}function e(a){for(var b=[],c=0;c<a.length;c++)b.add(d(a[c]));return b=b.filter(function(a,b,c){return c.indexOf(a)===b}),b.sort(),b.toString()}a.readBSNHeaderData=b,a.formatAttributesAndDirectivesForPopover=c,a.formatServiceName=d,a._module.controller("Osgi.BundleController",["$scope","$location","workspace","$routeParams","jolokia",function(e,f,g,h,i){function j(){var a=document.getElementById("loadClassResult");a.innerHTML+="<div class='alert alert-error'><button type='button' class='close' data-dismiss='alert'>&times;</button>The hawtio.OSGiTools MBean is not available. Please contact technical support.</div>"}function k(a){var b=document.getElementById("loadClassResult");b.innerHTML+="<div class='alert alert-error'><button type='button' class='close' data-dismiss='alert'>&times;</button>Problem invoking hawtio.OSGiTools MBean. "+a+"</div>"}function l(c){var d=c.value;e.bundles=d,a.defaultBundleValues(g,e,d),e.row=a.findBundle(e.bundleId,d),Core.$apply(e),$(".accordion-body.collapse").hover(function(){$(this).css("overflow","visible")},function(){$(this).css("overflow","hidden")}),$("#bsn").tooltip({title:b(e.row.Headers["Bundle-SymbolicName"].Value),placement:"right"}),m(),n(),o()}function m(){var b=a.parseManifestHeader(e.row.Headers,"Import-Package");for(var d in e.row.ImportData){var f=b[d],g="<small><table><tr><td><strong>Imported Version=</strong>"+e.row.ImportData[d].ReportedVersion+"</td></tr>";if(void 0!==f)g+=c(f,!1),"optional"!==b[d].Dresolution&&$(document.getElementById("import."+d)).addClass("badge-info");else{$(document.getElementById("import."+d)).addClass("badge-important");var h=e.row.Headers["DynamicImport-Package"];void 0!==h&&(h=h.Value,g+="<tr><td>Dynamic Import. Imported due to:</td></tr>",g+="<tr><td><strong>DynamicImport-Package=</strong>"+h+"</td></tr>")}g+="</table></small>",$(document.getElementById("import."+d)).popover({title:"attributes and directives",content:g,trigger:"hover",html:!0}),b[d]=void 0}var i="";for(var d in b)void 0!==b[d]&&void 0===e.row.ExportData[d]&&(i+="<tr><td><div class='less-big badge badge-warning' id='unsatisfied."+d+"'>"+d+"</div></td></tr>");""!==i&&(i="<p/><p class='text-warning'>The following optional imports were not satisfied:<table>"+i+"</table></p>",document.getElementById("unsatisfiedOptionalImports").innerHTML=i);for(var d in b)if(void 0!==b[d]){var g="<small><table>";g+=c(b[d],!1),g+="</table></small>",$(document.getElementById("unsatisfied."+d)).popover({title:"attributes and directives",content:g,trigger:"hover",html:!0})}}function n(){var b=a.parseManifestHeader(e.row.Headers,"Export-Package");for(var d in e.row.ExportData){var f="<small><table><tr><td><strong>Exported Version=</strong>"+e.row.ExportData[d].ReportedVersion+"</td></tr>";f+=c(b[d],!0),f+="</table></small>",$(document.getElementById("export."+d)).popover({title:"attributes and directives",content:f,trigger:"hover",html:!0})}}function o(){if(void 0!==e.row.RegisteredServices&&0!==e.row.RegisteredServices.length||void 0!==e.row.ServicesInUse&&0!==e.row.ServicesInUse){var b=a.getSelectionServiceMBean(g);b&&i.request({type:"exec",mbean:b,operation:"listServices()"},onSuccess(p))}}function p(b){var c=b.value;for(var f in c){var h=document.getElementById("registers.service."+f),j=document.getElementById("uses.service."+f);(void 0!==h&&null!==h||void 0!==j&&null!==j)&&i.request({type:"exec",mbean:a.getSelectionServiceMBean(g),operation:"getProperties",arguments:[f]},onSuccess(function(a,b,f){return function(g){for(var h=g.value,i=Object.keys(h).sort(),j="<small><table>",k=0;k<i.length;k++){var l=h[i[k]];if(void 0!==l){var m=l.Value;m.length>15&&(m=m.replace(/[,]/g,",<br/>&nbsp;&nbsp;")),j+="<tr><td valign='top'>"+i[k]+"</td><td>"+m+"</td></tr>"}}var n=c[a].BundleIdentifier;j+="<tr><td>Registered&nbsp;by</td><td>Bundle "+n+" <div class='less-big label'>"+e.bundles[n].SymbolicName+"</div></td></tr>",j+="</table></small>",void 0!==b&&null!==b&&(b.innerText=" "+d(c[a].objectClass),$(b).popover({title:"service properties",content:j,trigger:"hover",html:!0})),void 0!==f&&null!==f&&(f.innerText=" "+d(c[a].objectClass),$(f).popover({title:"service properties",content:j,trigger:"hover",html:!0}))}}(f,h,j)))}}function q(){var b=a.getSelectionBundleMBean(g);b&&i.request({type:"exec",mbean:b,operation:"listBundles()"},onSuccess(l))}e.bundleId=h.bundleId,q(),e.showValue=function(a){switch(a){case"Bundle-Name":case"Bundle-SymbolicName":case"Bundle-Version":case"Export-Package":case"Import-Package":return!1;default:return!0}},e.executeLoadClass=function(b){var c=a.getHawtioOSGiToolsMBean(g);c?i.request({type:"exec",mbean:c,operation:"getLoadClassOrigin",arguments:[e.bundleId,b]},{success:function(c){var d,f,h=document.getElementById("loadClassResult"),i=c.value;-1===i?(d="",f="Class can not be loaded from this bundle."):(d="alert-success",f="Class is served from Bundle "+a.bundleLinks(g,i)),h.innerHTML+="<div class='alert "+d+"'><button type='button' class='close' data-dismiss='alert'>&times;</button>Loading class <strong>"+b+"</strong> in Bundle "+e.bundleId+". "+f+"</div>"},error:function(a){k(a)}}):j()},e.executeFindResource=function(b){var c=a.getHawtioOSGiToolsMBean(g);c?i.request({type:"exec",mbean:c,operation:"getResourceURL",arguments:[e.bundleId,b]},{success:function(a){var c,d,f=document.getElementById("loadClassResult"),g=a.value;null===g?(c="",d="Resource can not be found from this bundle."):(c="alert-success",d="Resource is available from: "+g),f.innerHTML+="<div class='alert "+c+"'><button type='button' class='close' data-dismiss='alert'>&times;</button>Finding resource <strong>"+b+"</strong> in Bundle "+e.bundleId+". "+d+"</div>"},error:function(a){k(a)}}):j()},e.mavenLink=function(a){return angular.isObject(a)?Maven.mavenLink(a.Location):""},e.startBundle=function(b){i.request([{type:"exec",mbean:a.getSelectionFrameworkMBean(g),operation:"startBundle",arguments:[b]}],onSuccess(q))},e.stopBundle=function(b){i.request([{type:"exec",mbean:a.getSelectionFrameworkMBean(g),operation:"stopBundle",arguments:[b]}],onSuccess(q))},e.updatehBundle=function(b){i.request([{type:"exec",mbean:a.getSelectionFrameworkMBean(g),operation:"updateBundle",arguments:[b]}],onSuccess(q))},e.refreshBundle=function(b){i.request([{type:"exec",mbean:a.getSelectionFrameworkMBean(g),operation:"refreshBundle",arguments:[b]}],onSuccess(q))},e.uninstallBundle=function(b){i.request([{type:"exec",mbean:a.getSelectionFrameworkMBean(g),operation:"uninstallBundle",arguments:[b]}],onSuccess(function(){f.path("/osgi/bundle-list"),Core.$apply(e)}))}}])}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.BundlesController",["$scope","workspace","jolokia",function(b,c,d){function e(a){Object.equal(b.result,a.value)||(b.selected.length=0,b.result=a.value,b.bundles=[],angular.forEach(b.result,function(a){var c={Identifier:a.Identifier,Name:"",SymbolicName:a.SymbolicName,State:a.State,Version:a.Version,LastModified:a.LastModified,Location:a.Location};a.Headers["Bundle-Name"]&&(c.Name=a.Headers["Bundle-Name"].Value),b.bundles.push(c)}),b.loading=!1,Core.$apply(b))}b.result={},b.bundles=[],b.selected=[],b.loading=!0,b.bundleUrl="",b.installDisabled=function(){return""===b.bundleUrl};var f=[{field:"Identifier",displayName:"Identifier",width:"48",headerCellTemplate:'<div ng-click="col.sort()" class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }"><div class="ngHeaderText colt{{$index}} pagination-centered" title="Identifier"><i class="icon-tag"></i></div><div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div><div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div></div>'},{field:"State",displayName:"Bundle State",width:"24",headerCellTemplate:'<div ng-click="col.sort()" class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }"><div class="ngHeaderText colt{{$index}} pagination-centered" title="State"><i class="icon-tasks"></i></div><div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div><div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div></div>',cellTemplate:'<div class="ngCellText" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field)}}"></i></div>'},{field:"Name",displayName:"Name",width:"***",cellTemplate:'<div class="ngCellText"><a href="#/osgi/bundle/{{row.entity.Identifier}}?p=container">{{row.getProperty(col.field)}}</a></div>'},{field:"SymbolicName",displayName:"Symbolic Name",width:"***",cellTemplate:'<div class="ngCellText"><a href="#/osgi/bundle/{{row.entity.Identifier}}?p=container">{{row.getProperty(col.field)}}</a></div>'},{field:"Version",displayName:"Version",width:"**"},{field:"Location",displayName:"Update Location",width:"***"}];b.gridOptions={data:"bundles",showFilter:!1,selectedItems:b.selected,selectWithCheckboxOnly:!0,columnDefs:f,filterOptions:{filterText:""}},b.onResponse=function(){d.request({type:"exec",mbean:a.getSelectionBundleMBean(c),operation:"listBundles()"},{success:e,error:e})},b.controlBundles=function(e){var f=b.selected.map(function(a){return a.Identifier});angular.isArray(f)||(f=[f]),d.request({type:"exec",mbean:a.getSelectionFrameworkMBean(c),operation:e,arguments:[f]},{success:b.onResponse,error:b.onResponse})},b.stop=function(){b.controlBundles("stopBundles([J)")},b.start=function(){b.controlBundles("startBundles([J)")},b.update=function(){b.controlBundles("updateBundles([J)")},b.refresh=function(){b.controlBundles("refreshBundles([J)")},b.uninstall=function(){b.controlBundles("uninstallBundles([J)")},b.install=function(){d.request({type:"exec",mbean:a.getSelectionFrameworkMBean(c),operation:"installBundle(java.lang.String)",arguments:[b.bundleUrl]},{success:function(e){console.log("Got: ",e),b.bundleUrl="",d.request({type:"exec",mbean:a.getSelectionFrameworkMBean(c),operation:"startBundle(long)",arguments:[e.value]},{success:b.onResponse,error:b.onResponse})},error:function(){b.bundleUrl="",b.onResponse()}})},Core.register(d,b,{type:"exec",mbean:a.getSelectionBundleMBean(c),operation:"listBundles()"},onSuccess(e))}])}(Osgi||(Osgi={}));var Osgi;!function(a){a.configuration={pidMetadata:{"io.fabric8.container.java":{name:"Java Container"},"io.fabric8.container.process":{name:"Process Container"},"io.fabric8.container.process.overlay.resources":{name:"Container Overlay Resources",description:"The resources overlaid over the distribution of the process",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.dosgi":{name:"Fabric8 DOSGi",description:"The configuration for the Distributed OSGi implementation in Fabric8"},"io.fabric8.environment":{name:"Environment Variables",description:"The operating system Environment Variables which are exported into any child processes",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.fab.osgi.url":{name:"FAB URL",description:"Configures the 'fab:' URL handler for deploying JARs as bundles"},"io.fabric8.mq.fabric.server":{name:"ActiveMQ Broker",description:"The configuration of the Apache ActiveMQ server configured via the fabric"},"io.fabric8.openshift":{name:"OpenShift"},"io.fabric8.ports":{name:"Ports",description:"The network ports exported by the container",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.system":{name:"System Properties",description:"The Java System Properties which are exported into any child Java processes",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.version":{name:"Versions",schemaExtensions:{disableHumanizeLabel:!0}},"org.ops4j.pax.logging":{name:"Logging",description:"The configuration of the logging subsystem"},"org.ops4j.pax.url.mvn":{name:"Maven URL",description:"Configures the Maven 'mvn:' URL handler for referencing maven artifacts"},"org.ops4j.pax.url.war":{name:"WAR URL",description:"Configures the 'war:' URL handler for referencing WAR deployments"},"org.ops4j.pax.url.wrap":{name:"Wrap URL",description:"Configures the 'wrap:' URL handler for wrapping JARs as bundles"}},ignorePids:["jmx.acl","io.fabric8.agent","io.fabric8.git","io.fabric8.mq.fabric.template","io.fabric8.openshift.agent","io.fabric8.service.ZkDataStoreImpl","org.apache.felix.fileinstall","org.apache.karaf.command.acl.","org.apache.karaf.service.acl."],tabs:{fabric8:{label:"Fabric8",description:"Configuration options for the Fabric8 services",pids:["io.fabric8"]},karaf:{label:"Karaf",description:"Configuration options for the Apache Karaf container and subsystem",pids:["org.apache.karaf"]}}}}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.ConfigurationsController",["$scope","$routeParams","$location","workspace","jolokia",function(b,c,d,e,f){function g(c){var d={};angular.forEach(c,function(a){var b=a[0],c=a[1],e=q(b,c);r(b)||(e.hasValue=!0,e.kind=x.pid,d[b]=e)}),b.pids=d;var e=a.getSelectionConfigAdminMBean(b.workspace);e&&b.jolokia.execute(e,"getConfigurations","(service.factoryPid=*)",onSuccess(h,w("Failed to load factory PID configurations: "))),l()}function h(c){var d=a.getSelectionConfigAdminMBean(b.workspace),e=b.pids;e&&d&&angular.forEach(c,function(c){var f=c[0],g=c[1];if(f&&!r(f)){var h=e[f];h&&(h.isFactoryInstance=!0,b.jolokia.execute(d,"getFactoryPid",f,onSuccess(function(c){if(h.factoryPid=c,h.name=a.removeFactoryPidPrefix(f,c),c){var d=s(c,g,e);d&&(t(f,d,h),b.inFabricProfile&&a.getConfigurationProperties(b.workspace,b.jolokia,f,function(d){var e=Core.pathGet(d,["fabric.zookeeper.pid","Value"]);e&&(h.name=a.removeFactoryPidPrefix(e,c),h.zooKeeperPid=e,Core.$apply(b))}),Core.$apply(b))}})))}}),k()}function i(a){b.metaType=a,k()}function j(){var a=b.pids,c=[];angular.forEach(a,function(a){a.isFactoryInstance||c.push(a)}),b.configurations=c.sortBy("name"),Core.$apply(b)}function k(c){void 0===c&&(c=!0);var d=b.metaType;if(d){var e=a.configuration.pidMetadata,f=b.pids||{};angular.forEach(d.pids,function(a,b){var d=null,g=c?s(b,d):f[b];if(g){var h=a.factoryPidBundleIds;h&&h.length&&u(g),g.name=Core.pathGet(e,[b,"name"])||o(a.name)||b;var i=Core.pathGet(e,[b,"description"])||a.description;g.description=i}})}j()}function l(){if(b.pids)if(b.profileNotRunning&&b.profileMetadataMBean&&b.versionId&&b.profileId)f.execute(b.profileMetadataMBean,"metaTypeSummary",b.versionId,b.profileId,onSuccess(i));else{var c=a.getMetaTypeMBean(b.workspace);c&&b.jolokia.execute(c,"metaTypeSummary",onSuccess(i))}}function m(){if(b.configurations=[],b.profileNotRunning&&b.profileMetadataMBean&&b.versionId&&b.profileId)f.execute(b.profileMetadataMBean,"metaTypeSummary",b.versionId,b.profileId,onSuccess(n,{silent:!0}));else if(b.jolokia){var c=a.getSelectionConfigAdminMBean(b.workspace);c&&b.jolokia.execute(c,"getConfigurations","(service.pid=*)",onSuccess(g,w("Failed to load PID configurations: ")))}}function n(a){var c=a;if(c){var d={};angular.forEach(c.pids,function(a,b){if(a&&!r(b)){var c="mvn:"+b,e={pid:b,name:a.name,"class":"pid",description:a.description,bundle:c,kind:x.pid,pidLink:v(b)};d[b]=e}}),angular.forEach(d,function(a,b){var c=b.indexOf("-");if(c>0){var e=b.substring(0,c),f=b.substring(c+1,b.length),g=d[e];if(!g){var h=a.bundle;g=s(e,h,d)}g&&(t(b,g,a,e),a.name=f,d[e]=g,delete d[b])}}),b.pids=d}b.metaType=c,k(!1)}function o(a){return angular.forEach(["Fabric8 ","Apache "],function(b){a&&a.startsWith(b)&&a.length>b.length&&(a=a.substring(b.length))}),a}function p(b,c){var d=a.configuration.pidMetadata;return Core.pathGet(d,[b,"description"])||"pid: "+b+"\nbundle: "+c}function q(b,c){var d=a.configuration.pidMetadata,e={pid:b,name:Core.pathGet(d,[b,"name"])||b,"class":"pid",description:Core.pathGet(d,[b,"description"])||p(b,c),bundle:c,kind:x.pidNoValue,pidLink:v(b)};return e}function r(b){var c=!1;return angular.forEach(a.configuration.ignorePids,function(a){b.startsWith(a)&&(c=!0)}),c}function s(c,d,e){if(void 0===e&&(e=null),r(c))return a.log.info("ignoring pid "+c),null;e||(e=b.pids);var f=e[c];return f||(f=q(c,d),e[c]=f,j()),f}function t(a,b,c,d){void 0===d&&(d=null),u(b,d,a);var e=b.children;d&&(b.pidLink=v(d,!0)),e||(e={},b.children=e),e[a]=c}function u(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null),a.isFactory=!0,a["class"]="factoryPid",a.kind=x.factory,b||(b=a.factoryPid||""),c||(c=a.pid||""),b||(b=c,c=null),a.pidLink=v(b)}function v(c,d){return void 0===d&&(d=!1),a.createConfigPidLink(b,e,c,d)}function w(a){return{error:function(b){Core.notification("error",a+b.error||b),Core.defaultJolokiaErrorHandler(b)}}}b.selectedItems=[],b.grid={data:"configurations",showFilter:!1,showColumnMenu:!1,multiSelect:!1,filterOptions:{filterText:"",useExternalFilter:!1},selectedItems:b.selectedItems,showSelectionCheckbox:!1,displaySelectionCheckbox:!1,columnDefs:[{field:"Pid",displayName:"Configuration",cellTemplate:'<div class="ngCellText"><a ng-href="{{row.entity.pidLink}}" title="{{row.entity.description}}">{{row.entity.name}}</a></div>'}]};var x={factory:{"class":"badge badge-info",title:"Configuration factory used to create separate instances of the configuration"},pid:{"class":"badge badge-success",title:"Configuration which has a set of properties associated with it"},pidNoValue:{"class":"badge badge-warning",title:"Configuration which does not yet have any bound values"}};b.addPidDialog=new UI.Dialog,a.initProfileScope(b,c,d,localStorage,f,e,function(){b.$watch("workspace.selection",function(){m()}),m()}),b.addPid=function(c){b.addPidDialog.close();var d=a.getHawtioConfigAdminMBean(b.workspace);if(d&&c){var e=JSON.stringify({});b.jolokia.execute(d,"configAdminUpdate",c,e,onSuccess(function(){Core.notification("success","Successfully created pid: "+c),m()}))}},b.$on("$routeChangeSuccess",function(){setTimeout(m,50)})}])}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.FrameworkController",["$scope","$dialog","workspace",function(b,c,d){function e(a,b){Core.notification(a,b),g()}function f(a){b.startLevel=a.value.FrameworkStartLevel,b.initialBundleStartLevel=a.value.InitialBundleStartLevel,Core.$apply(b)}function g(){var b=a.getSelectionFrameworkMBean(d);if(b){var c=d.jolokia;c.request({type:"read",mbean:b},onSuccess(f))}}b.editDialog=new UI.Dialog,g(),b.edit=function(a,c){b.editAttr=a,b.editDisplayName=c,b.editDialog.open()},b.edited=function(c,f,g){if(b.editDialog.close(),angular.isNumber(g)){var h=a.getSelectionFrameworkMBean(d);if(h){var i=d.jolokia;i.request({type:"write",mbean:h,attribute:c,value:g},{error:function(a){e("error",a.error)},success:function(){e("success",f+" changed to "+g)}})}}}}])}(Osgi||(Osgi={}));var Osgi;!function(a){var b=function(){function b(a,b){this.jolokia=b,this.workspace=a}return b.prototype.getBundles=function(){var b={},c=this.jolokia.request({type:"exec",mbean:a.getSelectionBundleMBean(this.workspace),operation:"listBundles()"},onSuccess(null));return angular.forEach(c.value,function(a){var c={Identifier:a.Identifier,Name:"",SymbolicName:a.SymbolicName,Fragment:a.Fragment,State:a.State,Version:a.Version,LastModified:new Date(Number(a.LastModified)),Location:a.Location,StartLevel:void 0,RegisteredServices:a.RegisteredServices,ServicesInUse:a.ServicesInUse};a.Headers["Bundle-Name"]&&(c.Name=a.Headers["Bundle-Name"].Value),b[a.Identifier]=c}),b},b.prototype.getServices=function(){var b={},c=this.jolokia.request({type:"exec",mbean:a.getSelectionServiceMBean(this.workspace),operation:"listServices()"},onSuccess(null)),d=c.value;return angular.forEach(d,function(a){b[a.Identifier]=a}),b},b.prototype.getPackages=function(){var b={},c=this.jolokia.request({type:"exec",mbean:a.getSelectionPackageMBean(this.workspace),operation:"listPackages()"},onSuccess(null)),d=c.value.values;return d.forEach(function(a){b[a.Name+"-"+a.Version]=a}),b},b}();a.OsgiDataService=b}(Osgi||(Osgi={}));var Osgi;!function(a){var b=function(){function a(a,b,c,d,e,f){this.filteredBundles={},this.bundles=null,this.services=null,this.packages=null,this.PREFIX_BUNDLE="Bundle-",this.PREFIX_SVC="Service-",this.PREFIX_PKG="Package-",this.osgiDataService=a,this.bundleFilter=b,this.packageFilter=c,this.showServices=d,this.showPackages=e,this.hideUnused=f,this.graphBuilder=new ForceGraph.GraphBuilder}return a.prototype.getBundles=function(){return null==this.bundles&&(this.bundles=this.osgiDataService.getBundles()),this.bundles},a.prototype.getServices=function(){return null==this.services&&(this.services=this.osgiDataService.getServices()),this.services},a.prototype.getPackages=function(){return null==this.packages&&(this.packages=this.osgiDataService.getPackages()),this.packages},a.prototype.bundleNodeId=function(a){return this.PREFIX_BUNDLE+a.Identifier},a.prototype.serviceNodeId=function(a){return this.PREFIX_SVC+a.Identifier},a.prototype.pkgNodeId=function(a){return this.PREFIX_PKG+a.Name+"-"+a.Version},a.prototype.buildSvcNode=function(a){return{id:this.serviceNodeId(a),name:""+a.Identifier,type:"service",used:!1,popup:{title:"Service ["+a.Identifier+"]",content:function(){var b="";return null!=a&&a.objectClass.forEach(function(a){b.length>0&&(b+="<br/>"),b+=a}),b}}}},a.prototype.buildBundleNode=function(a){return{id:this.bundleNodeId(a),name:a.SymbolicName,type:"bundle",used:!1,navUrl:"#/osgi/bundle/"+a.Identifier,popup:{title:"Bundle ["+a.Identifier+"]",content:"<p>"+a.SymbolicName+"<br/>Version "+a.Version+"</p>"}}},a.prototype.buildPackageNode=function(a){return{id:this.pkgNodeId(a),name:a.Name,type:"package",used:!1,popup:{title:"Package ["+a.Name+"]",content:"<p>"+a.Version+"</p>"}}},a.prototype.exportingBundle=function(a){var b=this,c=null;return a.ExportingBundles.forEach(function(a){null!=b.filteredBundles[b.PREFIX_BUNDLE+a]&&(c=a)}),c},a.prototype.addFilteredBundles=function(){var a=this;d3.values(this.getBundles()).forEach(function(b){if(null==a.bundleFilter||""==a.bundleFilter||b.SymbolicName.startsWith(a.bundleFilter)){var c=a.buildBundleNode(b);if(a.filteredBundles[c.id]=b,c.used=!0,a.graphBuilder.addNode(c),a.showServices){var d=a.getServices();b.RegisteredServices.forEach(function(b){var e=d[b];if(e){var f=a.buildSvcNode(d[b]);a.graphBuilder.addNode(f),a.graphBuilder.addLink(c.id,f.id,"registered")}})}}})},a.prototype.addFilteredServices=function(){var a=this;this.showServices&&d3.values(this.getBundles()).forEach(function(b){b.ServicesInUse.forEach(function(c){var d=a.PREFIX_SVC+c;if(null!=a.graphBuilder.getNode(d)){a.graphBuilder.getNode(d).used=!0;var e=a.graphBuilder.getNode(a.bundleNodeId(b))||a.buildBundleNode(b);e.used=!0,a.graphBuilder.addNode(e),a.graphBuilder.addLink(d,e.id,"inuse")}})})},a.prototype.addFilteredPackages=function(){var a=this;this.showPackages&&d3.values(this.getPackages()).forEach(function(b){if(null==a.packageFilter||""==a.packageFilter||b.Name.startsWith(a.packageFilter)){var c=a.exportingBundle(b);if(null!=c){var d=a.graphBuilder.getNode(a.PREFIX_BUNDLE+c);d.used=!0;var e=a.buildPackageNode(b);a.graphBuilder.addNode(e),a.graphBuilder.addLink(d.id,e.id,"registered"),b.ImportingBundles.forEach(function(b){var c=a.graphBuilder.getNode(a.PREFIX_BUNDLE+b)||a.buildBundleNode(a.getBundles()[b]);c.used=!0,e.used=!0,a.graphBuilder.addNode(c),a.graphBuilder.addLink(c.id,e.id,"inuse")})}}})},a.prototype.buildGraph=function(){var a=this;return this.addFilteredBundles(),this.addFilteredServices(),this.addFilteredPackages(),this.hideUnused&&(this.graphBuilder.filterNodes(function(a){return a.used}),this.graphBuilder.filterNodes(function(b){return a.graphBuilder.hasLinks(b.id)})),this.graphBuilder.buildGraph()},a}();a.OsgiGraphBuilder=b}(Osgi||(Osgi={}));var Osgi;!function(a){a.TopLevelController=a._module.controller("Osgi.TopLevelController",["$scope","workspace",function(b,c){b.frameworkMBean=a.getSelectionFrameworkMBean(c),b.bundleMBean=a.getSelectionBundleMBean(c),b.serviceMBean=a.getSelectionServiceMBean(c),b.packageMBean=a.getSelectionPackageMBean(c),b.configAdminMBean=a.getSelectionConfigAdminMBean(c),b.metaTypeMBean=a.getMetaTypeMBean(c),b.osgiToolsMBean=a.getHawtioOSGiToolsMBean(c),b.hawtioConfigAdminMBean=a.getHawtioConfigAdminMBean(c),b.scrMBean=Karaf.getSelectionScrMBean(c),b.featuresMBean=Karaf.getSelectionFeaturesMBean(c)}])}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.PackageController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(c){var e=a.defaultPackageValues(d,b,c.value);b.row=e.filter({Name:b["package"],Version:b.version})[0],Core.$apply(b)}function g(){var b=a.getSelectionPackageMBean(d);if(b){var c=d.jolokia;c.request({type:"exec",mbean:b,operation:"listPackages"},onSuccess(f))}}b["package"]=e["package"],b.version=e.version,g()}])}(Osgi||(Osgi={}));var Osgi;!function(a){a.PackagesController=a._module.controller("Osgi.PackagesController",["$scope","$filter","workspace","$templateCache","$compile",function(b,c,d,e,f){function g(c){var e=a.defaultPackageValues(d,b,c.value);h(e)}function h(c){var e={},f=function(a){angular.forEach(a.value,function(a){var b={Identifier:a.Identifier,Name:"",SymbolicName:a.SymbolicName,State:a.State,Version:a.Version,LastModified:a.LastModified,Location:a.Location};a.Headers["Bundle-Name"]&&(b.Name=a.Headers["Bundle-Name"].Value),e[b.Identifier]=b}),angular.forEach(c,function(a){angular.forEach(a.ExportingBundles,function(b,c){a.ExportingBundles[c]=e[b]}),angular.forEach(a.ImportingBundles,function(b,c){a.ImportingBundles[c]=e[b]})}),b.widget.populateTable(c),Core.$apply(b)};d.jolokia.request({type:"exec",mbean:a.getSelectionBundleMBean(d),operation:"listBundles()"},{success:f,error:f})}function i(){var b=a.getSelectionPackageMBean(d);if(b){var c=d.jolokia;c.request({type:"exec",mbean:b,operation:"listPackages"},onSuccess(g))}}c("date");b.widget=new DataTable.TableWidget(b,e,f,[{mDataProp:null,sClass:"control center",sDefaultContent:'<i class="icon-plus"></i>'},{mDataProp:"Name"},{mDataProp:"VersionLink"},{mDataProp:"RemovalPending"}],{rowDetailTemplateId:"packageBundlesTemplate",disableAddColumns:!0}),b.$watch("workspace.selection",function(){i()})}])}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.PidController",["$scope","$timeout","$routeParams","$location","workspace","jolokia",function(b,c,d,e,f,g){function h(c,d,f){var h=function(){if(Core.notification("success","Successfully updated pid: "+d),d&&b.factoryPid&&b.newPid){var c=a.createConfigPidPath(b,d);e.path(c)}else b.setEditMode(!1),b.canSave=!1,b.saved=!0},j=onSuccess(h,i("Failed to update: "+d));if(b.inFabricProfile)g.execute(Fabric.managerMBean,"setProfileProperties",b.versionId,b.profileId,d,f,j);else{var k=JSON.stringify(f);b.jolokia.execute(c,"configAdminUpdate",d,k,j)}}function i(a){return{error:function(b){Core.notification("error",a+"\n"+b.error||b),Core.defaultJolokiaErrorHandler(b)}}}function j(){b.editMode&&(b.canSave=!0)}function k(a){function c(a){angular.forEach(a,function(a,b){var c=d[b];c&&(c.Value=a)}),l(),Core.$apply(b)}b.modelLoaded=!0;var d=a||{};b.configValues=d,b.zkPid=Core.pathGet(d,["fabric.zookeeper.pid","Value"]),b.zkPid&&b.saved?g.execute(Fabric.managerMBean,"getProfileProperties",b.versionId,b.profileId,b.zkPid,onSuccess(c)):l()}function l(){n();var c=b.configValues;if(c)if(b.profileNotRunning&&b.profileMetadataMBean&&b.versionId&&b.profileId){var d=b.factoryPid||b.pid;g.execute(b.profileMetadataMBean,"getPidMetaTypeObject",b.versionId,b.profileId,d,onSuccess(m))}else{var e=null,d=null,f=c["service.factoryPid"];f&&!d&&(d=f.Value);var h=a.getMetaTypeMBean(b.workspace);h&&b.jolokia.execute(h,"getPidMetaTypeObject",d,e,onSuccess(m))}Core.$apply(b)}function m(a){b.metaType=a,n(),Core.$apply(b)}function n(){var c={},d=[];b.defaultValues={};var e={type:"object",required:d,properties:c},f="span12",g="control-label",h="",i=g,j=b.metaType;if(j){var k=a.configuration.pidMetadata,l=j.id;e.id=l,e.name=Core.pathGet(k,[l,"name"])||j.name,e.description=Core.pathGet(k,[l,"description"])||j.description;var m=Core.pathGet(k,[l,"schemaExtensions","disableHumanizeLabel"]);angular.forEach(j.attributes,function(a){var e=a.id;if(p(e)){var j=q(e,l),k=s(a.typeName,a.id),n={title:a.name,tooltip:a.description,"input-attributes":{"class":f},"label-attributes":{"class":g},type:k};m&&(n.title=e),"char"===a.typeName&&(n.maxLength=1,n.minLength=1);var o=a.cardinality;o&&(n["input-attributes"]["class"]=null,n.type="array",n.items={"input-attributes":{"class":h},"label-attributes":{"class":i},type:k}),a.required&&d.push(e);var r=a.defaultValue;r&&(angular.isArray(r)&&1===r.length&&(r=r[0]),b.defaultValues[j]=r);var t=a.optionLabels,u=a.optionValues;if(t&&t.length&&u&&u.length){for(var v={},w=0;w<t.length;w++){var x=t[w],y=u[w];v[y]=x}b.selectValues[j]=v,Core.pathSet(n,["input-element"],"select"),Core.pathSet(n,["input-attributes","ng-options"],"key as value for (key, value) in selectValues."+j)}c[j]=n}});var n=Core.pathGet(a.configuration.pidMetadata,[l,"schemaExtensions"]);n&&o(e,n)}var r={};angular.forEach(b.configValues,function(a,b){if(p(b)){var d=q(b,l),e=a,h="string";angular.isObject(a)&&(e=a.Value,h=s(a.Type,b));var i=c[d];if(i){var j=i.type;"array"===j&&(angular.isArray(e)||(e=e?e.split(","):[]))}else i={"input-attributes":{"class":f},"label-attributes":{"class":g},type:h},c[d]=i;m&&(i.title=b),d=d.replace(/-/g,"_"),r[d]=e}}),angular.forEach(b.defaultValues,function(a,b){var c=r[b];angular.isDefined(c)||(r[b]=a)}),b.entity=r,b.schema=e,b.fullSchema=e}function o(a,b){angular.isObject(a)&&angular.isObject(b)&&angular.forEach(b,function(b,c){if(angular.isObject(b)){var d=a[c];d||(d={},a[c]=d),o(d,b)}else a[c]=b})}function p(a){return a&&x.indexOf(a)<0}function q(a){return a.replace(/\./g,"__")}function r(a){return a.replace(/__/g,".")}function s(a,b){if(a){var c=a.toLowerCase();return c.startsWith("int")||"long"===c||"short"===c||"byte"===c||c.endsWith("int")?"integer":"double"===c||"float"===c||"bigdecimal"===c?"number":"string"===c?b&&b.endsWith("password")?"password":"string":a}return"string"}function t(a){b.modelLoaded=!0;var c={};b.configValues=c,angular.forEach(a,function(a,b){var d=b.replace(/:/g,"_").replace(/\//g,"_");c[d]={Key:d,Value:a}}),b.zkPid=Core.pathGet(c,["fabric.zookeeper.pid","Value"]),l(),Core.$apply(b)}function u(){b.modelLoaded=!1,b.inFabricProfile||b.profileNotRunning?g.execute(Fabric.managerMBean,"getOverlayProfileProperties",b.versionId,b.profileId,b.pid,onSuccess(t)):a.getConfigurationProperties(b.workspace,b.jolokia,b.pid,k)}if(b.deletePropDialog=new UI.Dialog,b.deletePidDialog=new UI.Dialog,b.addPropertyDialog=new UI.Dialog,b.factoryPid=d.factoryPid,b.pid=d.pid,b.createForm={pidInstanceName:null},b.newPid=b.factoryPid&&!b.pid,b.newPid&&(b.editMode=!0),b.pid&&!b.factoryPid){var v=b.pid.indexOf("-");v>0&&(b.factoryPid=b.pid.substring(0,v),b.factoryInstanceName=b.pid.substring(v+1,b.pid.length))}b.selectValues={},b.modelLoaded=!1,b.canSave=!1,b.setEditMode=function(a){b.editMode=a,b.formMode=a?"edit":"view",a&&b.entity||(b.entity={},u())};var w=b.factoryPid&&!d.pid;b.setEditMode(w),b.$on("hawtio.form.modelChange",function(){b.modelLoaded&&(j(),Core.$apply(b))}),a.initProfileScope(b,d,e,localStorage,g,f,function(){u()}),b.pidSave=function(){var c={};angular.forEach(b.entity,function(a,d){var e=void 0;angular.isString(a)?e=a:angular.isDefined(a)&&(e=a.toString()),angular.isDefined(e)&&(c[r(d,b.pid)]=e)});var d=a.getHawtioConfigAdminMBean(f);if(d||b.inFabricProfile){var e=a.getSelectionConfigAdminMBean(b.workspace),g=b.pid,j=b.zkPid,k=b.factoryPid;
if(!b.inFabricProfile&&k&&e&&!j)b.jolokia.execute(e,"createFactoryConfiguration",k,onSuccess(function(a){g=a,g&&h(d,g,c)},i("Failed to create new PID: ")));else{if(b.newPid){var l=b.createForm.pidInstanceName;if(!l||!k)return;g=k+"-"+l}else j&&(g=j);h(d,g,c)}}},b.addPropertyConfirmed=function(a,c){b.addPropertyDialog.close(),b.configValues[a]={Key:a,Value:c,Type:"String"},j(),n()},b.deletePidProp=function(a){b.deleteKey=a.Key,b.deletePropDialog.open()},b.deletePidPropConfirmed=function(){b.deletePropDialog.close();var a=document.getElementById("pid."+b.deleteKey);a.parentElement.remove(),j()},b.deletePidConfirmed=function(){function c(a){Core.notification("error",a.error)}function d(){Core.notification("success","Successfully deleted pid: "+b.pid),e.path(b.configurationsLink)}if(b.deletePidDialog.close(),b.inFabricProfile){if(b.pid){var f=b.pid+".properties";g.execute(Fabric.managerMBean,"deleteConfigurationFile",b.versionId,b.profileId,f,onSuccess(d,{error:c}))}}else{var h=a.getSelectionConfigAdminMBean(b.workspace);h&&b.jolokia.request({type:"exec",mbean:h,operation:"delete",arguments:[b.pid]},{error:c,success:d})}};var x=["service.pid","service.factoryPid","fabric.zookeeper.pid"]}])}(Osgi||(Osgi={}));var Osgi;!function(a){a.ServiceController=a._module.controller("Osgi.ServiceController",["$scope","$filter","workspace","$templateCache","$compile",function(b,c,d,e,f){function g(c){var e={},f=function(a){angular.forEach(a.value,function(a){var b={Identifier:a.Identifier,Name:"",SymbolicName:a.SymbolicName,State:a.State,Version:a.Version,LastModified:a.LastModified,Location:a.Location};a.Headers["Bundle-Name"]&&(b.Name=a.Headers["Bundle-Name"].Value),e[b.Identifier]=b}),angular.forEach(c,function(a){angular.forEach(a.UsingBundles,function(b,c){a.UsingBundles[c]=e[b]})}),b.widget.populateTable(c),Core.$apply(b)};d.jolokia.request({type:"exec",mbean:a.getSelectionBundleMBean(d),operation:"listBundles()"},{success:f,error:f})}c("date");b.widget=new DataTable.TableWidget(b,e,f,[{mDataProp:null,sClass:"control center",sDefaultContent:'<i class="icon-plus"></i>'},{mDataProp:"Identifier"},{mDataProp:"BundleIdentifier"},{mDataProp:"objectClass"}],{rowDetailTemplateId:"osgiServiceTemplate",disableAddColumns:!0}),b.$watch("workspace.selection",function(){var b=a.getSelectionServiceMBean(d);if(b){var c=d.jolokia;c.request({type:"exec",mbean:b,operation:"listServices()"},onSuccess(h))}});var h=function(c){var e=a.defaultServiceValues(d,b,c.value);g(e)}}])}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.ServiceDependencyController",["$scope","$location","$routeParams","workspace","osgiDataService",function(b,c,d,e,f){b.init=function(){b.bundleFilter=d.bundleFilter?d.bundleFilter:"",b.packageFilter=d.pkgFilter?d.pkgFilter:"",b.selectView="packages"==d.view?"packages":"services",b.hideUnused=d.hideUnused?"true"==d.hideUnused:!0},b.updateLink=function(){var a=c.search;b.bundleFilter&&""!=b.bundleFilter?a.bundleFilter=b.bundleFilter:delete a.bundleFilter,b.packageFilter&&""!=b.packageFilter?a.pkgFilter=b.packageFilter:delete a.pkgFilter,a.view=b.selectView,a.hideUnused=b.hideUnused?"true":"false",c.search(a)},b.addToDashboardLink=function(){var a=angular.toJson(d),b="#/osgi/dependencies",c="OSGi dependencies",e=angular.toJson({size_x:2,size_y:2}),f="#/dashboard/add?tab=dashboard&href="+encodeURIComponent(b)+"&routeParams="+encodeURIComponent(a)+"&size="+encodeURIComponent(e)+"&title="+encodeURIComponent(c);return f},b.$on("$routeUpdate",function(){var a=c.search;b.bundleFilter=a.bundleFilter?d.bundleFilter:"",b.packageFilter=a.pkgFilter?d.pkgFilter:"",b.selectView="packages"==a.view?"packages":"services",b.hideUnused=a.hideUnused?"true"==d.hideUnused:!0,b.updateLink(),b.updateGraph()}),b.updateGraph=function(){b.updateLink(),b.updatePkgFilter();var c=new a.OsgiGraphBuilder(f,b.bundleFilter,b.packageFilter,"services"==b.selectView,"packages"==b.selectView,b.hideUnused);b.graph=c.buildGraph(),Core.$apply(b)},b.updatePkgFilter=function(){null==b.packageFilter||""==b.packageFilter?(b.selectView="services",b.disablePkg=!0):b.disablePkg=!1},b.init(),b.updateGraph()}])}(Osgi||(Osgi={}));var Perspective;!function(a){var b="perspective";a._module=angular.module(b,["hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/perspective/defaultPage",{templateUrl:"app/perspective/html/defaultPage.html"}).otherwise({redirectTo:function(){return"/perspective/defaultPage"}})}]),a._module.run(["viewRegistry","layoutFull","locationChangeStartTasks",function(a,b){a.perspective=b}]),hawtioPluginLoader.addModule(b)}(Perspective||(Perspective={}));var Perspective;!function(a){function b(b,c,d,e,f){var g=c.search(),h=a.defaultPage(c,e,f,d),i=Core.trimLeading(h,"#");i?(a.log.debug("Redirecting to default page: ",i," page params: ",g),c.url(i)):a.log.debug("No default page could be chosen")}a.DefaultPageController=b,a._module.controller("Perspective.DefaultPageController",["$scope","$location","localStorage","workspace","jolokia",b])}(Perspective||(Perspective={}));var Quartz;!function(a){function b(a){if(a)switch(a.toString().toLowerCase()){case"true":return"green icon-play-circle";case"normal":return"green icon-play-circle";case"paused":return"orange icon-off"}return"orange icon-off"}function c(a){if(a)switch(a){case-1:return"ignore";case 0:return"smart";case 1:return"fire once now";case 2:return"do nothing"}return"unknown"}function d(a){return"<i class='icon-info-sign'> "+a+"</i>"}function e(a,b){var c=a.Started;return angular.isArray(b)?b.any(function(a){return c.startsWith(a)}):c.startsWith(b)}function f(a){return g(a)}function g(a){return Core.getMBeanTypeObjectName(a,"quartz","QuartzScheduler")}function h(a){return a.hasDomainAndProperties("quartz",{type:"QuartzScheduler"})}function i(b){var c=b.selection;return c&&c.domain===a.jmxDomain?c.entries.name:null}a.log=Logger.get("Quartz"),a.iconClass=b,a.misfireText=c,a.jobDataClassText=d,a.isState=e,a.isQuartzPluginEnabled=f,a.getQuartzMBean=g,a.isScheduler=h,a.getSelectedSchedulerName=i}(Quartz||(Quartz={}));var Quartz;!function(a){var b="quartz";a.jmxDomain="quartz",a._module=angular.module(b,["bootstrap","ngResource","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/quartz/scheduler",{templateUrl:"app/quartz/html/scheduler.html"}).when("/quartz/triggers",{templateUrl:"app/quartz/html/triggers.html"}).when("/quartz/jobs",{templateUrl:"app/quartz/html/jobs.html"})}]),a._module.filter("quartzIconClass",function(){return a.iconClass}),a._module.filter("quartzMisfire",function(){return a.misfireText}),a._module.filter("quartzJobDataClassText",function(){return a.jobDataClassText}),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry",function(b,c,d,e,f){d.quartz="app/quartz/html/layoutQuartzTree.html",f.addUserDoc("quartz","app/quartz/doc/help.md",function(){return c.treeContainsDomainAndProperties(a.jmxDomain)}),c.topLevelTabs.push({id:"quartz",content:"Quartz",title:"Quartz Scheduler",isValid:function(b){return b.treeContainsDomainAndProperties(a.jmxDomain)},href:function(){return"#/quartz/scheduler"},isActive:function(a){return a.isTopTabActive("quartz")}})}]),hawtioPluginLoader.addModule(b)}(Quartz||(Quartz={}));var Quartz;!function(a){a._module.controller("Quartz.QuartzController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(a){var b=a.jobDataMap;if(!angular.isArray(b)&&angular.isObject(b)){var c="<table class='table table-striped'>";c+="<thead><th>Key</th><th>Value</th></thead>";var d=b,e=Object.keys(b).sort();angular.forEach(e,function(a){var b=d[a];c+="<tr><td>"+safeNull(a)+"</td><td>"+safeNull(b)+"</td></tr>"}),c+="</table>",a.detailHtml=c}}function g(){function f(a){angular.forEach(a,function(a){var b=e.request({type:"read",mbean:a,attribute:["SchedulerName"]}),c=b.value.SchedulerName,d=new Folder(c);d.addClass="quartz-scheduler",d.typeName="quartzScheduler",d.domain=k,d.objectName=a,d.key=c,l.children.push(d)}),j.debug("Setitng up Quartz tree with nid "+c.search().nid);var f=c.search().nid;if(f){var g=l.children.filter(function(a){return a.key===f});j.debug("Found nid in tree "+g),g&&1===g.length&&i(g[0])}Core.$apply(b);var n=$("#quartztree");Jmx.enableTree(b,c,d,n,m,!0,function(a){var c=a.data;i(c),Core.$apply(b)}),setTimeout(h,50)}j.debug("Reloading Quartz Tree");var g=a.getQuartzMBean(d),k="quartz",l=new Folder("Quartz Schedulers");l.addClass="quartz-folder",l.typeName="quartzSchedulers",l.domain=k,l.key="";var m=[l];g&&e.search("quartz:type=QuartzScheduler,*",onSuccess(f))}function h(){Jmx.updateTreeSelectionFromURLAndAutoSelect(c,$("#quartztree"),function(a){var b=a.getChildren();return b&&1===b.length?a=b[0]:a},!0)}function i(a){var d=a?a.objectName:null;if(j.debug("Selection is now: "+d),d){b.selectedSchedulerMBean=d,c.search("nid",a.key);var f=[{type:"read",mbean:b.selectedSchedulerMBean}];Core.unregister(e,b),Core.register(e,b,f,onSuccess(b.renderQuartz))}else Core.unregister(e,b),b.selectedSchedulerMBean=null,b.selectedScheduler=null,b.triggers=[],b.jobs=[],b.updatedTrigger={}}var j=Logger.get("Quartz"),k='<div class="ngCellText pagination-centered" title="{{row.entity.state}}"><i class="{{row.entity.state | quartzIconClass}}"></i></div>',l='<div class="ngCellText" title="{{row.entity.misfireInstruction}}">{{row.entity.misfireInstruction | quartzMisfire}}</div>';b.valueDetails=new UI.Dialog,b.selectedScheduler=null,b.selectedSchedulerMBean=null,b.triggers=[],b.jobs=[],b.misfireInstructions=[{id:"-1",title:"Ignore"},{id:"0",title:"Smart"},{id:"1",title:"Fire once now"},{id:"2",title:"Do nothing"}],b.updatedTrigger={},b.triggerSchema={properties:{cron:{description:"Cron expression",label:"Cron expression",tooltip:"Specify a cron expression for the trigger",type:"string",hidden:!1},repeatCount:{description:"Repeat count",tooltip:"Number of times to repeat. Use -1 for forever.",type:"integer",hidden:!1},repeatInterval:{description:"Repeat interval",tooltip:"Elapsed time in millis between triggering",type:"integer",hidden:!1},misfireInstruction:{description:"Misfire instruction",tooltip:"What to do when misfiring happens",type:"string",hidden:!1,"input-element":"select","input-attributes":{"ng-options":"mi.id as mi.title for mi in misfireInstructions"}}}},b.gridOptions={selectedItems:[],data:"triggers",showFilter:!0,filterOptions:{filterText:""},showSelectionCheckbox:!1,enableRowClickSelection:!0,multiSelect:!1,primaryKeyFn:function(a){return a.group+"/"+a.name},columnDefs:[{field:"state",displayName:"State",cellTemplate:k,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"group",displayName:"Group",resizable:!0,width:150},{field:"name",displayName:"Name",resizable:!0,width:150},{field:"type",displayName:"Type",resizable:!1,width:70},{field:"expression",displayName:"Expression",resizable:!0,width:180},{field:"misfireInstruction",displayName:"Misfire Instruction",cellTemplate:l,width:150},{field:"previousFireTime",displayName:"Previous Fire"},{field:"nextFireTime",displayName:"Next Fire"},{field:"finalFireTime",displayName:"Final Fire"}]},b.jobsGridOptions={selectedItems:[],data:"jobs",showFilter:!0,filterOptions:{filterText:""},showSelectionCheckbox:!1,enableRowClickSelection:!0,multiSelect:!1,primaryKeyFn:function(a){return a.group+"/"+a.name},columnDefs:[{field:"group",displayName:"Group",resizable:!0,width:150},{field:"name",displayName:"Name",resizable:!0,width:150},{field:"durability",displayName:"Durable",width:70,resizable:!1},{field:"shouldRecover",displayName:"Recover",width:70,resizable:!1},{field:"jobClass",displayName:"Job ClassName",width:350},{field:"description",displayName:"Description",resizable:!0}]},b.openJobDetailView=function(){1===b.jobsGridOptions.selectedItems.length&&b.valueDetails.open()},b.renderIcon=function(b){return a.iconClass(b)},b.renderQuartz=function(a){b.selectedSchedulerDetails=[],j.debug("Selected scheduler mbean "+b.selectedScheduler);var c=a.value;c&&(b.selectedScheduler=c,b.triggers=[],b.job=[],c.AllTriggers.forEach(function(a){var d=e.request({type:"exec",mbean:b.selectedSchedulerMBean,operation:"getTriggerState",arguments:[a.name,a.group]});a.state=d?d.value:"unknown",a.id=a.name+"/"+a.group;var f=c.AllJobDetails[a.jobName];if(f&&(f=f[a.group])){var g,h,i=f.jobDataMap||{};if(a.type=i.CamelQuartzTriggerType,a.type&&"cron"==a.type)a.expression=i.CamelQuartzTriggerCronExpression;else if(a.type&&"simple"==a.type)a.expression="every "+i.CamelQuartzTriggerSimpleRepeatInterval+" ms.",g=i.CamelQuartzTriggerSimpleRepeatCounter,h=i.CamelQuartzTriggerSimpleRepeatInterval,a.expression+=g>0?" ("+g+" times)":" (forever)",a.repeatCounter=g,a.repeatInterval=h;else{var j=i.CamelQuartzEndpoint;if(j){var k=Core.getQueryParameterValue(j,"cron");k&&(a.type="cron",k=k.replace(/\++/g," "),a.expression=k),g=Core.getQueryParameterValue(j,"trigger.repeatCount"),h=Core.getQueryParameterValue(j,"trigger.repeatInterval"),(g||h)&&(a.type="simple",a.expression="every "+h+" ms.",a.expression+=g&&g>0?" ("+g+" times)":" (forever)",a.repeatCounter=g,a.repeatInterval=h)}}}b.triggers.push(a)}),b.jobs=[],b.triggers.forEach(function(a){var d=c.AllJobDetails[a.jobName];d&&(d=d[a.group],d&&(f(d),d.id=d.jobName+"/"+d.group,b.jobs.push(d)))})),Core.$apply(b)},b.pauseScheduler=function(){b.selectedSchedulerMBean&&e.request({type:"exec",mbean:b.selectedSchedulerMBean,operation:"standby"},onSuccess(function(){Core.notification("success","Paused scheduler "+b.selectedScheduler.SchedulerName)}))},b.startScheduler=function(){b.selectedSchedulerMBean&&e.request({type:"exec",mbean:b.selectedSchedulerMBean,operation:"start"},onSuccess(function(){Core.notification("success","Started scheduler "+b.selectedScheduler.SchedulerName)}))},b.enableSampleStatistics=function(){b.selectedSchedulerMBean&&e.setAttribute(b.selectedSchedulerMBean,"SampledStatisticsEnabled",!0)},b.disableSampleStatistics=function(){b.selectedSchedulerMBean&&e.setAttribute(b.selectedSchedulerMBean,"SampledStatisticsEnabled",!1)},b.pauseTrigger=function(){if(1===b.gridOptions.selectedItems.length){var a=b.gridOptions.selectedItems[0].group,c=b.gridOptions.selectedItems[0].name;e.request({type:"exec",mbean:b.selectedSchedulerMBean,operation:"pauseTrigger",arguments:[c,a]},onSuccess(function(){Core.notification("success","Paused trigger "+a+"/"+c)}))}},b.resumeTrigger=function(){if(1===b.gridOptions.selectedItems.length){var a=b.gridOptions.selectedItems[0].group,c=b.gridOptions.selectedItems[0].name;e.request({type:"exec",mbean:b.selectedSchedulerMBean,operation:"resumeTrigger",arguments:[c,a]},onSuccess(function(){Core.notification("success","Resumed trigger "+a+"/"+c)}))}},b.onBeforeUpdateTrigger=function(){var a=b.gridOptions.selectedItems[0];a&&"cron"===a.type?(b.updatedTrigger.type="cron",b.updatedTrigger.cron=a.expression,b.updatedTrigger.repeatCount=null,b.updatedTrigger.repeatInterval=null,b.updatedTrigger.misfireInstruction=""+a.misfireInstruction,b.triggerSchema.properties.cron.hidden=!1,b.triggerSchema.properties.repeatCount.hidden=!0,b.triggerSchema.properties.repeatInterval.hidden=!0,b.showTriggerDialog=!0):a&&"simple"===a.type?(b.updatedTrigger.type="simple",b.updatedTrigger.cron=null,b.updatedTrigger.repeatCount=a.repeatCounter,b.updatedTrigger.repeatInterval=a.repeatInterval,b.updatedTrigger.misfireInstruction=""+a.misfireInstruction,b.triggerSchema.properties.cron.hidden=!0,b.triggerSchema.properties.repeatCount.hidden=!1,b.triggerSchema.properties.repeatInterval.hidden=!1,b.showTriggerDialog=!0):(b.updatedTrigger={},b.showTriggerDialog=!1)},b.onUpdateTrigger=function(){var a=b.updatedTrigger.cron,c=b.updatedTrigger.repeatCount,d=b.updatedTrigger.repeatInterval,f=parseInt(b.updatedTrigger.misfireInstruction);b.updatedTrigger={};var g=b.gridOptions.selectedItems[0].group,h=b.gridOptions.selectedItems[0].name;a?(j.info("Updating trigger "+g+"/"+h+" with cron "+a),e.request({type:"exec",mbean:"hawtio:type=QuartzFacade",operation:"updateCronTrigger",arguments:[b.selectedSchedulerMBean,h,g,f,a,null]},onSuccess(function(){Core.notification("success","Updated trigger "+g+"/"+h)}))):(c||d)&&(null==c&&(c=-1),null==d&&(d=1e3),j.info("Updating trigger "+g+"/"+h+" with interval "+d+" ms. for "+c+" times"),e.request({type:"exec",mbean:"hawtio:type=QuartzFacade",operation:"updateSimpleTrigger",arguments:[b.selectedSchedulerMBean,h,g,f,c,d]},onSuccess(function(){Core.notification("success","Updated trigger "+g+"/"+h)})))},b.$on("$routeChangeSuccess",function(){setTimeout(h,50)}),b.$on("jmxTreeUpdated",function(){g()}),g()}])}(Quartz||(Quartz={}));var RBAC;!function(a){function b(a,c){Core.isBlank(c.objectName)||(a[c.objectName]=c),c.children&&c.children.length>0&&c.children.forEach(function(c){b(a,c)})}function c(a){if(Core.isBlank(a))return a;var b=a.split(" "),c=[];return b.forEach(function(a){("can-invoke"!==a||"cant-invoke"!==a)&&c.push(a)}),c.join(" ").trim()}function d(a,b){if(Core.isBlank(a))return b;var c=a.split(" ");return c.push(b),c.unique().join(" ").trim()}a.log=Logger.get("RBAC"),a.flattenMBeanTree=b,a.stripClasses=c,a.addClass=d}(RBAC||(RBAC={}));var RBAC;!function(a){var b=function(a){function b(b){a.call(this),this.deferred=b,this.ACLMBean=null}return __extends(b,a),b.prototype.initialize=function(b){this.ACLMBean=b,this.deferred.resolve(this.ACLMBean),a.prototype.execute.call(this)},b.prototype.getACLMBean=function(){return null===this.deferred,this.deferred.promise},b}(Core.TasksImpl);a.RBACTasksImpl=b,a.rbacTasks=null}(RBAC||(RBAC={}));var RBAC;!function(a){a.pluginName="hawtioRbac",a._module=angular.module(a.pluginName,["hawtioCore"]),a._module.factory("rbacTasks",["postLoginTasks","jolokia","$q",function(b,c,d){return a.rbacTasks=new a.RBACTasksImpl(d.defer()),b.addTask("FetchJMXSecurityMBeans",function(){c.request({type:"search",mbean:"*:type=security,area=jmx,*"},onSuccess(function(b){var c=b.value,d="";if(0===c.length)return void a.log.info("Didn't discover any JMXSecurity mbeans, client-side role based access control is disabled");if(1===c.length)d=c.first();else if(c.length>1){var e=!1;c.forEach(function(a){e||a.has("HawtioDummy")||a.has("rank=")||(d=a,e=!0)})}a.log.info("Using mbean ",d," for client-side role based access control"),a.rbacTasks.initialize(d)}))}),a.rbacTasks}]),a._module.factory("rbacACLMBean",["rbacTasks",function(a){return a.getACLMBean()}]),a._module.run(["jolokia","rbacTasks","preLogoutTasks","workspace","$rootScope",function(b,c,d,e,f){d.addTask("resetRBAC",function(){a.log.debug("Resetting RBAC tasks"),c.reset()}),c.addTask("JMXTreePostProcess",function(){e.addTreePostProcessor(function(d){c.getACLMBean().then(function(c){var g={};a.flattenMBeanTree(g,d);var h=[],i={};angular.forEach(g,function(a,b){if(!("canInvoke"in a)&&(h.push({type:"exec",mbean:c,operation:"canInvoke(java.lang.String)",arguments:[b]}),a.mbean&&a.mbean.op)){var d=a.mbean.op;a.mbean.opByString={};var e=[];angular.forEach(d,function(b,c){function d(b,c){var d=Core.operationToString(b,c.args);a.mbean.opByString[d]=c,e.push(d)}angular.isArray(b)?b.forEach(function(a){d(c,a)}):d(c,b)}),i[b]=e}}),h.push({type:"exec",mbean:c,operation:"canInvoke(java.util.Map)",arguments:[i]});var j=0,k=function(){j+=1,j>=h.length&&(e.redrawTree(),a.log.debug("Enriched workspace tree: ",d),Core.$apply(f))};b.request(h,onSuccess(function(b){var c=b.request.arguments[0];if(c&&angular.isString(c)){g[c].canInvoke=b.value;var d="cant-invoke";b.value&&(d="can-invoke"),g[c].addClass=a.stripClasses(g[c].addClass),g[c].addClass=a.addClass(g[c].addClass,d),k()}else{var e=b.value;angular.forEach(e,function(a,b){angular.forEach(a,function(a,c){g[b].mbean.opByString[c].canInvoke=a.CanInvoke})}),k()}},{error:function(){k()}}))})})})}]),hawtioPluginLoader.addModule(a.pluginName)}(RBAC||(RBAC={}));var RBAC;!function(a){function b(a,b,c){var g=d;return Core.isBlank(b)||(g=e),Core.isBlank(c)||(g=f),g}function c(a,b,c,g){var h=[];return a===d?h.push(b):a===e?(h.push(b),h.push(c)):a===f&&(h.push(b),h.push(c),h.push(g.split(",").map(function(a){return a.trim()}))),h}var d="canInvoke(java.lang.String)",e="canInvoke(java.lang.String,java.lang.String)",f="canInvoke(java.lang.String,java.lang.String,[Ljava.lang.String;)",g="hide",h="remove",i="inverse";a.hawtioShow=a._module.directive("hawtioShow",["workspace",function(a){return{restrict:"A",replace:!1,link:function(d,e,f){function j(a,b){a?b===i&&e.css({display:"none"}):b===h?e.css({display:"none"}):b===g&&e.css({visibility:"hidden"})}var k=f.objectName;k&&d.$watch(function(){var d=f.methodName,e=f.argumentTypes,h=f.mode||g,i=b(k,d,e),l=c(i,k,d,e);if(k=l[0],d=l[1],k){var m=Core.parseMBean(k),n=a.findMBeanWithProperties(m.domain,m.attributes);if(n){var o;o=d?a.hasInvokeRights(n,d):a.hasInvokeRights(n),j(o,h)}}})}}}])}(RBAC||(RBAC={}));var Service;!function(a){a._module=angular.module(a.pluginName,["hawtioCore"]),a._module.factory("ServiceRegistry",["$http","$rootScope","workspace",function(b,c,d){var e={name:"ServiceRegistry",services:[],fetch:function(c){(Kubernetes.isKubernetesTemplateManager(d)||a.pollServices)&&b({method:"GET",url:"service"}).success(function(a,b,d,f){e.onSuccessfulPoll(c,a,b,d,f)}).error(function(a,b,d,f){e.onFailedPoll(c,a,b,d,f)})},onSuccessfulPoll:function(b,d){var f=ArrayHelpers.sync(e.services,d.items);f&&(a.log.debug("Services updated: ",e.services),Core.$apply(c)),b()},onFailedPoll:function(b,c,d){a.log.debug("Failed poll, data: ",c," status: ",d),b()}};return e}]),a._module.run(["ServiceRegistry","$timeout","jolokia",function(b,c,d){b.go=PollHelpers.setupPolling(b,function(a){b.fetch(a)},2e3,c,d),b.go(),a.log.debug("Loaded")}]),hawtioPluginLoader.addModule(a.pluginName)}(Service||(Service={}));var Site;!function(a){var b="site";a._module=angular.module(b,["bootstrap","ngResource","ngGrid","datatable","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/site",{templateUrl:"app/site/html/index.html"}).when("/site/",{templateUrl:"app/site/html/index.html"}).when("/site/book/*page",{templateUrl:"app/site/html/book.html",reloadOnSearch:!1}).when("/site/*page",{templateUrl:"app/site/html/page.html"})}]),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry",function(a,c,d,e){d[b]=e,c.topLevelTabs.push({id:"site",content:"Site",title:"View the documentation for Hawtio",isValid:function(){return!1},href:function(){return"#/site"}})}]),hawtioPluginLoader.addModule(b)}(Site||(Site={}));var Site;!function(a){a._module.controller("Site.IndexController",["$scope","$location",function(a){a.slideInterval=5e3}])}(Site||(Site={}));var Site;!function(a){a._module.controller("Site.PageController",["$scope","$routeParams","$location","$compile","$http","fileExtensionTypeRegistry",function(a,b,c,d,e,f){function g(b){a.contents=b,a.html=b;var c=Wiki.fileFormat(a.pageId,f)||"markdown";"markdown"===c?a.html=b?marked(b):"":c&&c.startsWith("html")&&(a.html=b),d(a.html)(a),Core.$apply(a)}var h=Logger.get("Site"),i=b.page;i||(i="README.md"),!i.startsWith("/")&&i.indexOf(":/")<0&&i.indexOf("app/site/")<0&&(i="app/site/"+i),a.pageId=i,a.pageFolder=i.substring(0,i.lastIndexOf("/")+1),h.info("Loading page '"+a.pageId+"'"),a.getContents=function(b,c){var d=a.pageFolder+b;h.info("Loading the contents of: "+d),e.get(d).success(c).error(function(){return c(" ")})},e.get(a.pageId).success(g)}])}(Site||(Site={}));var Source;!function(a){function b(a){var b=a.mbeanTypesToDomain.LogQuery||{},c=b["org.fusesource.insight"]||b["io.fabric8.insight"]||{},d=c.objectName;return d}function c(a,b){var c="#/source/index/"+a,d=[{href:c,name:"root"}];if(b){var e=b.split("/"),f="";angular.forEach(e,function(a){f+="/"+a;var b=c+f;a.isBlank()||d.push({href:b,name:a||"/",fileName:"/"+f})})}return d}a.log=Logger.get("Source"),a.getInsightMBean=b,a.createBreadcrumbLinks=c}(Source||(Source={}));var Source;!function(a){var b="source";a._module=angular.module(b,["bootstrap","ngResource","hawtioCore","wiki"]),a._module.config(["$routeProvider",function(a){a.when("/source/index/:mavenCoords",{templateUrl:"app/source/html/index.html"}).when("/source/index/:mavenCoords/*page",{templateUrl:"app/source/html/index.html"}).when("/source/view/:mavenCoords/class/:className/*page",{templateUrl:"app/source/html/source.html"}).when("/source/view/:mavenCoords/*page",{templateUrl:"app/source/html/source.html"}).when("/source/javadoc/:mavenCoords/*page",{templateUrl:"app/source/html/javadoc.html"})}]),a._module.run(["$location","workspace","viewRegistry","jolokia","localStorage","layoutFull","helpRegistry",function(a,b,c,d,e,f,g){c.source=f,g.addUserDoc("source","app/source/doc/help.md")}]),hawtioPluginLoader.addModule(b)}(Source||(Source={}));var Source;!function(a){a._module.controller("Source.IndexController",["$scope","$location","$routeParams","workspace","jolokia",function(b,c,d,e,f){function g(){b.sourceFiles=k?b.allSourceFiles.filter(function(a){return a&&a.startsWith(k)}).map(function(a){return a.substring(k.length+1)}).filter(function(a){return a}):b.allSourceFiles}function h(){b.breadcrumbs=a.createBreadcrumbLinks(b.mavenCoords,k),angular.forEach(b.breadcrumbs,function(a){a.active=!1}),b.breadcrumbs.last().active=!0}function i(a){b.allSourceFiles=a?a.split("\n").map(function(a){return a.trim()}).filter(function(a){return a}):[],g(),b.loadingMessage=null,Core.$apply(b)}function j(){if(b.mavenCoords){var c=a.getInsightMBean(e);a.log.debug("In update view, mbean: ",c),c&&f.execute(c,"getSource",b.mavenCoords,null,"/",{success:i,error:function(c){a.log.error("Failed to download the source code for the maven artifact: ",b.mavenCoords),a.log.info("Stack trace: ",c.stacktrace),b.loadingMessage="Could not download index, please see console for details",Core.$apply(b)}})}}b.pageId=Wiki.pageId(d,c),b.mavenCoords=d.mavenCoords;var k=b.pageId;"/"===k&&(k=void 0),b.loadingMessage="Loading source code from artifacts <b>"+b.mavenCoords+"</b>",h(),b.setFileName=function(a){k=Core.trimLeading(a.fileName,"/"),k=Core.trimLeading(k,"/"),console.log("selected fileName '"+k+"'"),h(),g()},b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(e)&&setTimeout(l,50)}),b.$on("$routeChangeSuccess",function(){setTimeout(l,50)}),b.sourceLinks=function(a){var c=a,d=null,e=a.lastIndexOf("/");e>0&&(c=a.substring(e+1),d=a.substring(0,e));var f="",g=k||"";return d&&angular.forEach(d.split("/"),function(a){g&&(g+="/"),g+=a,f+="<a href='#/source/index/"+b.mavenCoords+"/"+g+"'>"+a+"</a>/"}),f+="<a href='#/source/view/"+b.mavenCoords+"/"+g+"/"+c+"'>"+c+"</a>"};var l=Core.throttled(j,1e3);setTimeout(l,50)}])}(Source||(Source={}));var Source;!function(a){a._module.controller("Source.JavaDocController",["$scope","$location","$routeParams","workspace","fileExtensionTypeRegistry","jolokia",function(b,c,d,e,f,g){function h(a){if(b.source=a,b.loadingMessage=null,!a){var c=(new Date).getTime();(!b.lastErrorTime||c-b.lastErrorTime>3e3)&&(b.lastErrorTime=c,Core.notification("error","Could not download the source code for the maven artifacts: "+j))}Core.$apply(b)}function i(){var b=a.getInsightMBean(e);b&&g.execute(b,"getJavaDoc",j,k,onSuccess(h))}b.pageId=Wiki.pageId(d,c);var j=d.mavenCoords,k=b.pageId;b.loadingMessage="Loading javadoc code for file <b>"+k+"</b> from artifacts <b>"+j+"</b>",b.breadcrumbs=[],b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(e)&&setTimeout(i,50)}),b.$on("$routeChangeSuccess",function(){setTimeout(i,50)})}])}(Source||(Source={}));var Source;!function(a){a._module.controller("Source.SourceController",["$scope","$location","$routeParams","workspace","fileExtensionTypeRegistry","jolokia",function(b,c,d,e,f,g){function h(){var a=b.codeMirror;if(a&&k){var c=k-1,d=a.getLine(c),e=d?d.length:1e3,f={line:c,ch:0},g={line:c,ch:e};a.scrollIntoView(f),a.setCursor(f),a.setSelection(f,g),a.refresh(),a.focus()}}function i(c){c?(a.log.debug("Downloaded file for the maven artifact: "+l),b.source=c,b.loadingMessage=null):(b.source=null,b.loadingMessage="Cannot download file, please see logging console for details.",a.log.error("Failed to download the source code for the Maven artifact: ",l)),Core.$apply(b),setTimeout(h,100)}function j(){var c=a.getInsightMBean(e);c&&g.execute(c,"getSource",l,m,n,{success:i,error:function(c){a.log.error("Failed to download the source code for the Maven artifact: ",l),a.log.info("Stack trace: ",c.stacktrace),b.loadingMessage="Cannot not download file, please see logging console for details.",Core.$apply(b)}})}b.pageId=Wiki.pageId(d,c),b.format=Wiki.fileFormat(b.pageId,f);var k=c.search().line||1,l=d.mavenCoords,m=d.className||"",n=b.pageId||"/",o=m.replace(/\./g,"/");b.loadingMessage="Loading source code for class <b>"+m+"</b> from artifacts <b>"+l+"</b>",b.breadcrumbs=[];var p=n.lastIndexOf("/"),q="/",r=n;p>0?(q=n.substring(0,p),r=n.substring(p+1)):m&&m.indexOf(".")>0&&(q=o,p=q.lastIndexOf("/"),p>0&&(r=q.substring(p+1),q=q.substring(0,p))),b.breadcrumbs=a.createBreadcrumbLinks(l,q),b.breadcrumbs.push({href:c.url(),name:r,active:!0}),b.javaDocLink=function(){var a=o;return!a&&n&&n.endsWith(".java")&&(a=n.substring(0,n.length-5)),a?"javadoc/"+l+"/"+a+".html":null},b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(e)&&setTimeout(s,50)}),b.$on("$routeChangeSuccess",function(){setTimeout(s,50)});var s=Core.throttled(j,1e3);setTimeout(s,50)}])}(Source||(Source={}));var SpringBoot;!function(a){var b="springBoot";a._module=angular.module(b,["bootstrap","ngResource","ui.bootstrap.dialog","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/springBoot/metrics",{templateUrl:"app/springBoot/html/metrics.html"}).when("/springBoot/beans",{templateUrl:"app/springBoot/html/beans.html"})}]),a._module.run(["$location","$http","workspace","viewRegistry","helpRegistry","jolokia",function(b,c,d,e,f,g){e.springBoot="app/springBoot/html/layoutSpringBootTabs.html",a.callIfSpringBootAppAvailable(g,function(){d.topLevelTabs.push({id:"springBoot",content:"Spring Boot",title:"Manage your Spring Boot application",isValid:function(){return!0},href:function(){return"#/springBoot/metrics"},isActive:function(a){return a.isTopTabActive("springBoot")}})})}]),hawtioPluginLoader.addModule(b)}(SpringBoot||(SpringBoot={}));var SpringBoot;!function(a){function b(b,c){b.execute(a.metricsMBean,a.metricsMBeanOperation,onSuccess(function(){c()}))}function c(a,b){var c,e=[];for(c in Object.keys(b)){var f=Object.keys(b)[c],g=d[f];e[c]=g?{code:f,name:g,value:b[f]}:{code:f,name:f,value:b[f]}}a.metrics=e,a.$apply()}a.metricsMBean="org.springframework.boot:type=Endpoint,name=metricsEndpoint",a.metricsMBeanOperation="getData()",a.callIfSpringBootAppAvailable=b;var d={"counter.status.200.favicon.ico":"Successful Favicon requests","counter.status.200.jolokia":"Successful Jolokia requests","counter.status.200.jolokia.exec.org.springframework.boot:type=Endpoint,name=metricsEndpoint.getData()":"Successful metrics Jolokia requests","counter.status.200.jolokia.read.java.lang:type=Runtime.Name":"Successful Jolokia Runtime.Name reads","counter.status.200.jolokia.root":"Successful Jolokia root requests","counter.status.200.jolokia.search.*:type=Connector,*":"Successful Jolokia connectors search queries","counter.status.200.metrics":"Successful metrics REST requests","counter.status.405.auth.login.root":"Method Not Allowed (405) login responses","gauge.response.auth.login.root":"Authentication time (ms)","gauge.response.jolokia":"Jolokia response time (ms)","gauge.response.jolokia.exec.org.springframework.boot:type=Endpoint,name=metricsEndpoint.getData()":"Metrics Jolokia response time (ms)","gauge.response.jolokia.root":"Jolokia root response time (ms)","gauge.response.metrics":"Metrics response time (ms)","gc.ps_marksweep.count":"Parallel scavenge mark-sweep collector count","gc.ps_marksweep.time":"Parallel scavenge mark-sweep collector time (ms)","gc.ps_scavenge.count":"Parallel scavenge collector count","gc.ps_scavenge.time":"Parallel scavenge collector time (ms)",mem:"Memory used (bytes)","mem.free":"Memory available (bytes)",processors:"Processors number",uptime:"Node uptime (ms)","instance.uptime":"Service uptime (ms)","heap.committed":"Heap committed (bytes)","heap.init":"Initial heap (bytes)","heap.used":"Heap used (bytes)",heap:"Total Heap (bytes)",classes:"Classes","classes.loaded":"Classes loaded","classes.unloaded":"Classes unloaded",threads:"Threads count","threads.daemon":"Daemon threads","threads.peak":"Threads peak count"};
a.convertRawMetricsToUserFriendlyFormat=c}(SpringBoot||(SpringBoot={}));var SpringBoot;!function(a){a._module.controller("SpringBoot.BeansController",["$scope","jolokia",function(b,c){c.execute("org.springframework.boot:type=Endpoint,name=beansEndpoint",a.metricsMBeanOperation,onSuccess(function(a){b.beans=a[0].beans,b.$apply()},{error:function(){b.loadingError="Cannot read beans data.",b.$apply()}}))}])}(SpringBoot||(SpringBoot={}));var SpringBoot;!function(a){a._module.controller("SpringBoot.MetricsController",["$scope","jolokia",function(b,c){c.execute(a.metricsMBean,a.metricsMBeanOperation,onSuccess(function(c){a.convertRawMetricsToUserFriendlyFormat(b,c)},{error:function(){b.loadingError="Cannot read metrics data.",b.$apply()}})),b.metricsGridOptions={data:"metrics",showSelectionCheckbox:!1,sortInfo:{sortBy:"name",ascending:!0},columnDefs:[{field:"name",displayName:"Metric",cellTemplate:'<div class="ngCellText" hawtio-template-popover content="metricDetails" title="Metric details">{{row.entity.name}}</div>'},{field:"value",displayName:"Metric value"}]}}])}(SpringBoot||(SpringBoot={}));var SpringBatch;!function(a){function b(a){var b;return b=a.indexOf(a.indexOf("\\")>=0?"\\":":"),a.substring(0,b)}function c(a){return a.substring(a.indexOf(":")+1,a.indexOf("/"))}function d(a){return a.indexOf("/")!=a.lastIndexOf("/")?a.substring(a.indexOf("/")+1,a.lastIndexOf("/")):""}function e(a,b,c){var d="";return d=a+"\\:"+b,c&&("/"!=c.charAt(0)?d=d+"/"+c:d+=c),"/"!=d.charAt(d.length-1)&&(d+="/"),d}a.getHost=b,a.getPort=c,a.getServerSuffix=d,a.getServerUrl=e}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a.templatePath="app/springbatch/html/",a.pluginName="SpringBatch",a._module=angular.module(a.pluginName,["bootstrap","ngResource","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(b){b.when("/springbatch/servers",{templateUrl:a.templatePath+"serverList.html"}).when("/springbatch/jobs",{templateUrl:a.templatePath+"jobs.html"}).when("/springbatch/jobs/:jobName/executions",{templateUrl:a.templatePath+"overview.html"}).when("/springbatch/jobs/:jobName/executions/:jobInstanceId",{templateUrl:a.templatePath+"overview.html"}).when("/springbatch/jobs/executions",{templateUrl:a.templatePath+"jobsExecutionList.html"}).when("/springbatch/connect",{templateUrl:a.templatePath+"connectSpringBatch.html"}).when("/springbatch/jobs/:jobId/executions/:jobName/:jobExecutionId",{templateUrl:a.templatePath+"jobExecutionContext.html"}).when("/springbatch/jobs/:jobName/:jobId/history/executions",{templateUrl:a.templatePath+"executionHistory.html"}).when("/springbatch/jobs/:jobId/executions/:jobName/:jobExecutionId/steps/:stepExecutionId",{templateUrl:a.templatePath+"stepExecutionContext.html"}).when("/springbatch/jobs/:host/:port/:serverSuffix",{templateUrl:a.templatePath+"jobs.html"}).when("/springbatch/jobs/:host/:port",{templateUrl:a.templatePath+"jobs.html"})}]),a._module.run(["$location","workspace","viewRegistry","$rootScope","$resource",function(a,b,c,d){c.springbatch="app/springbatch/html/layoutSpringBatch.html",b.topLevelTabs.push({id:"springbatch",content:"SpringBatch",title:"View Spring-Batch jobs",isValid:function(){return!1},href:function(){return"#/springbatch/servers"},isActive:function(a){return a.isTopTabActive("springbatch")}}),d.proxyUrl="/hawtio/proxy/",d.alert={enable:!1,content:"",type:"",hide:function(){this.enable=!1},show:function(){this.enable=!0}}}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.ConnectSpringBatchController",["$scope","$routeParams","$location","workspace","$rootScope","$resource","$http",function(b,c,d,e,f,g,h){b.host="localhost",b.port=8080,b.connectSpringBatch=function(){b.selectedSpringBatchServer&&(f.springBatchServer=b.selectedSpringBatchServer,f.alert.content="Connected successfully.",f.alert.type="alert-success",f.alert.show())},b.addSpringBatchServerToGlobalList=function(){var c=a.getServerUrl(b.host,b.port,b.path);return f.springBatchServerList.indexOf(b.selectedSpringBatchServer)>0?(f.alert.content="Server already in the list.",f.alert.type="alert-error",void f.alert.show()):(h.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",void h.post("/hawtio/springBatch","server="+c).success(function(){f.springBatchServerList.add(c),f.springBatchServer=b.selectedSpringBatchServer,f.alert.content="Server added.",f.alert.type="alert-success",f.alert.show()}).error(function(){f.alert.content="Could not add server.",f.alert.type="alert-error",f.alert.show()}))},b.removeServer=function(){h["delete"]("/hawtio/springBatch?server="+encodeURIComponent(b.selectedSpringBatchServer)).success(function(){b.springBatchServerList.splice(b.springBatchServerList.indexOf(b.selectedSpringBatchServer),1),f.alert.content="Server deleted.",f.alert.type="alert-info",f.alert.show()}).error(function(){f.alert.content="Could not delete server.",f.alert.type="alert-error",f.alert.show()})},b.editServer=function(){b.host=a.getHost(b.selectedSpringBatchServer),b.port=parseInt(a.getPort(b.selectedSpringBatchServer)),b.path=a.getServerSuffix(b.selectedSpringBatchServer)},b.updateServer=function(){var c=a.getServerUrl(b.host,b.port,b.path),d=b.selectedSpringBatchServer;h.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",h.post("/hawtio/springBatch","server="+c+"&replaceServer="+d).success(function(){f.springBatchServerList[f.springBatchServerList.indexOf(b.selectedSpringBatchServer)]=c,f.alert.content="Server updated.",f.alert.type="alert-success",f.alert.show()}).error(function(){f.alert.content="Could not add server.",f.alert.type="alert-error",f.alert.show()})}}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.ExecutionHistoryController",["$scope","$routeParams","$location","workspace","$resource","$rootScope",function(a,b,c,d,e,f){var g=f.springBatchServer,h="/hawtio/proxy/",i="jobs/:jobName/executions.json";a.predicate="id",a.reverse=!1;var j=e(h+g+i);j.get({jobName:b.jobName},function(c){var d=new Array;for(var e in c.jobExecutions)c.jobExecutions[e].id=e,d.add(c.jobExecutions[e]);a.executionHistory=d,a.jobName=b.jobName,a.jobId=b.jobId})}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.jobExecutionContextController",["$scope","$routeParams","$http","$rootScope",function(a,b,c,d){var e=d.springBatchServer,f="/hawtio",g=b.jobExecutionId,h=b.jobName,i=b.jobId;a.springBatchServer=e;c.get(f+"/contextFormatter?jobExecutionId="+g+"&server="+e+"&contextType=jobExecution").success(function(b){a.htmlView=b});a.jobId=i,a.jobName=h}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.NavBarController",["$scope","$routeParams","$location","workspace",function(a){var b=[{uri:"servers",name:"Servers List"},{uri:"jobs/executions",name:"Jobs Execution List"},{uri:"connect",name:"Connect"}];a.subLevelTabs=b,a.isActive=function(){return!1}}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.JobOverviewExecListController",["$scope","$routeParams","$location","workspace","jolokia","$resource","$rootScope","$http",function(a,b,c,d,e,f,g,h){var i=g.springBatchServer,j=i+"jobs/:jobName",k=g.proxyUrl,l="/:jobInstanceId/executions.json",m="jobs/:jobName/:jobInstanceId",n=b.jobName;a.jobName=b.jobName;var o=null,p=f(k+j);a.springBatchServer=encodeURIComponent(i),a.executionPredicate="name",a.executionReverse=!1,a.stepPredicate="name",a.stepReverse=!1,a.fetchAllExecutions=function(b){if(void 0!=b){var c=f(k+j+l);c.get({jobName:n,jobInstanceId:b.id},function(b){var c=new Array;for(var d in b.jobInstance.jobExecutions)b.jobInstance.jobExecutions[d].id=d,c.add(b.jobInstance.jobExecutions[d]);a.jobName=n,a.jobExecutionList=c})}},a.fetchParams=function(b,c,d){var e=f(k+j+m);e.get({jobName:b,jobInstanceId:c+".json"},function(b){var c=new Array;if(d)for(var e in b.jobInstance.jobExecutions[d].jobParameters)c.add({name:e,value:b.jobInstance.jobExecutions[d].jobParameters[e]});else{for(var f in b.jobInstance.jobExecutions){for(var e in b.jobInstance.jobExecutions[f].jobParameters)c.add({name:e,value:b.jobInstance.jobExecutions[f].jobParameters[e]});break}a.jobParams=c}})},a.removeParam=function(a,b){a.splice(b,1)},a.addParam=function(a){a.add({name:"",value:""})},a.runJob=function(a,b){if(a&&b){var c=i.replace("\\",""),d=k+c+"jobs/"+a+".json";h.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var e="";for(var f in b)e=e+b[f].name+"="+b[f].value,f+1!=b.length&&(e+=",");e=encodeURIComponent(e),h.post(d,"jobParameters="+e).success(function(a){if(a.jobExecution)g.alert.content="Job started successfully.",g.alert.type="alert-success",g.alert.show();else if(a.errors){g.alert.content="";for(var b in a.errors)g.alert.content+=a.errors[b]+"\n",g.alert.type="alert-error",g.alert.show()}}).error(function(){g.alert.content="Count not start the job",g.alert.type="alert-error",g.alert.show()})}},p.get({jobName:n+".json"},function(c){for(var d in c.job.jobInstances)c.job.jobInstances[d].id=d,o=c.job.jobInstances;if(void 0==b.jobInstanceId)for(var d in c.job.jobInstances){a.jobInstance=o[d];break}else o&&o[b.jobInstanceId]&&(a.jobInstance=o[b.jobInstanceId]);a.jobInstance?(a.fetchAllExecutions(a.jobInstance),a.fetchParams(n,a.jobInstance.id)):a.jobParams=new Array}),a.refreshJobInstance=function(b){var c=f(k+j);c.get({jobName:n+".json"},function(c){for(var d in c.job.jobInstances)c.job.jobInstances[d].id=d;var e=null;if(b&&b.id)e=b.id,a.jobInstance=c.job.jobInstances[e],a.fetchAllExecutions(c.job.jobInstances[e]),a.fetchParams(n,e);else for(var d in c.job.jobInstances){a.jobInstance=c.job.jobInstances[d],a.fetchAllExecutions(c.job.jobInstances[d]),a.fetchParams(n,d);break}a.stepExecutionList=null})},a.fetchNextJobInstance=function(b){var c=null,d=f(k+j);d.get({jobName:n+".json"},function(d){for(var e in d.job.jobInstances){if(d.job.jobInstances[e].id=e,b&&b.id&&parseInt(e)>parseInt(b.id)){c=e;break}b&&b.id&&(c=b.id)}if(b)a.jobInstance=d.job.jobInstances[c];else for(var e in d.job.jobInstances){a.jobInstance=d.job.jobInstances[e];break}a.jobInstance&&(a.fetchAllExecutions(a.jobInstance),a.fetchParams(n,a.jobInstance.id)),a.stepExecutionList=null})},a.fetchPrevJobInstance=function(b){var c=null,d=f(k+j);d.get({jobName:n+".json"},function(d){for(var e in d.job.jobInstances)d.job.jobInstances[e].id=e,b&&b.id&&parseInt(e)<parseInt(b.id)&&(c=e);if(b)null==c&&b.id&&(c=b.id),a.jobInstance=d.job.jobInstances[c];else for(var e in d.job.jobInstances){a.jobInstance=d.job.jobInstances[e];break}a.jobInstance&&(a.fetchAllExecutions(a.jobInstance),a.fetchParams(n,a.jobInstance.id)),a.stepExecutionList=null})},a.fetchStepsForExecution=function(b){var c=f(k+i+"jobs/executions/:executionId");c.get({executionId:b+".json"},function(c){var d=new Array;for(var e in c.jobExecution.stepExecutions)c.jobExecution.stepExecutions[e].name=e,d.add(c.jobExecution.stepExecutions[e]);a.executionId=b,a.stepExecutionList=d})}}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.ServerListController",["$scope","$location","workspace","jolokia","$resource","$rootScope","$http",function(b,c,d,e,f,g){var h=[],i="";for(var j in g.springBatchServerList)i+="#/springbatch/jobs/",i+=a.getHost(g.springBatchServerList[j])+"/",i+=a.getPort(g.springBatchServerList[j]),a.getServerSuffix(g.springBatchServerList[j]).length>0&&(i+="/"+a.getServerSuffix(g.springBatchServerList[j])),h.add({href:i,hostname:a.getHost(g.springBatchServerList[j]),port:a.getPort(g.springBatchServerList[j])}),i="";b.serverList=h}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.SpringBatchJobExecutionListController",["$scope","$resource","$rootScope",function(a,b,c){var d=c.springBatchServer;if(void 0==d)return c.alert.content="No Server selected. Please, use Connect or Server List screen to select one.",c.alert.type="alert-error",void c.alert.show();var e=d+"jobs",f=c.proxyUrl,g="/executions.json";a.predicate="name",a.reverse=!1;var h=b(f+e+g);h.get(function(b){var c=new Array;for(var d in b.jobExecutions)b.jobExecutions[d].id=d,c.add(b.jobExecutions[d]);a.jobExecutions=c})}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.JobListController",["$scope","$location","workspace","jolokia","$resource","$rootScope","$http","$routeParams",function(a,b,c,d,e,f,g,h){var i=h.host,j=h.port,k=h.serverSuffix,l=i+"\\:"+j+"/";void 0!=k&&k.length>0&&(l+=k+"/"),f.springBatchServer=l;var m=f.springBatchServer+"jobs.json",n=f.proxyUrl;a.predicate="name",a.reverse=!1,a.getJobList=function(){var b=e(n+m);b.get(function(b){if(b.jobs&&b.jobs.registrations){var c=new Array;for(var d in b.jobs.registrations)b.jobs.registrations[d].showLaunchForm=!1,b.jobs.registrations[d].launchParams="",c.add(b.jobs.registrations[d]);a.jobList=c}})},a.getJobList(),a.launchJob=function(b){var c;for(var d in a.jobList)a.jobList[d].name==b&&(c=a.jobList[d]);var e=c.launchParams;if(b&&e){var h=f.springBatchServer.replace("\\",""),i=n+h+"jobs/"+b+".json";g.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",e=encodeURIComponent(e),g.post(i,"jobParameters="+e).success(function(b){if(b.jobExecution)f.alert.content="Job started successfully.",f.alert.type="alert-success",f.alert.show(),a.getJobList();else if(b.errors){f.alert.content="";for(var c in b.errors)f.alert.content+=b.errors[c]+"\n",f.alert.type="alert-error",f.alert.show()}}).error(function(){f.alert.content="Count not start the job",f.alert.type="alert-error",f.alert.show()})}}}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.stepExecutionContextController",["$scope","$routeParams","$http","$rootScope",function(a,b,c,d){var e=d.springBatchServer,f="/hawtio",g=b.jobExecutionId,h=b.stepExecutionId,i=b.jobName,j=b.jobId;a.springBatchServer=e;c.get(f+"/contextFormatter?jobExecutionId="+g+"&stepExecutionId="+h+"&server="+e+"&contextType=stepExecution").success(function(b){a.htmlView=b});a.jobName=i,a.jobId=j}])}(SpringBatch||(SpringBatch={}));var Themes;!function(a){a._module.controller("Themes.PreferencesController",["$scope","localStorage","branding",function(b,c,d){b.availableThemes=a.getAvailableThemes(),b.availableBrandings=a.getAvailableBrandings(),Core.initPreferenceScope(b,c,{theme:{value:a.currentTheme,override:function(b,c){b!==c&&a.setTheme(b,d)}},branding:{value:a.currentBranding,override:function(b,c){b!==c&&a.setBranding(b,d)}}})}])}(Themes||(Themes={}));var Threads;!function(a){a.pluginName="threads",a.templatePath="app/threads/html/",a.log=Logger.get("Threads"),a.jmxDomain="java.lang",a.mbeanType="Threading",a.mbean=a.jmxDomain+":type="+a.mbeanType,a._module=angular.module(a.pluginName,["bootstrap","ngResource","hawtioCore","ui"]),a._module.config(["$routeProvider",function(b){b.when("/threads",{templateUrl:a.templatePath+"index.html"})}]),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry",function(b,c,d,e,f){d.threads=e,f.addUserDoc("threads","app/threads/doc/help.md"),c.topLevelTabs.push({id:"threads",content:"Threads",title:"JVM Threads",isValid:function(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:a.mbeanType})},href:function(){return"#/threads"},isActive:function(a){return a.isTopTabActive("threads")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(Threads||(Threads={}));var Threads;!function(a){a._module.controller("Threads.ThreadsController",["$scope","$routeParams","$templateCache","jolokia",function(b,c,d,e){function f(c){a.log.info("Disabled contention monitoring: ",c),Core.$apply(b)}function g(){b.$on("$routeChangeStart",function(){e.setAttribute(a.mbean,"ThreadContentionMonitoringEnabled",!1,onSuccess(f))}),a.log.info("Enabled contention monitoring"),Core.$apply(b)}function h(a){var c=angular.toJson(a.value,!0);if(b.getThreadInfoResponseJson!==c){b.getThreadInfoResponseJson=c;var d=a.value.exclude(function(a){return null===a});b.unfilteredThreads=d,b.totals={},d.forEach(function(a){var c=a.threadState;c in b.totals?b.totals[c]++:b.totals[c]=1}),d=b.filterThreads(b.stateFilter,d),b.threads=d,Core.$apply(b)}}b.selectedRowJson="",b.lastThreadJson="",b.getThreadInfoResponseJson="",b.threads=[],b.totals={},b.support={},b.row={},b.threadSelected=!1,b.selectedRowIndex=-1,b.stateFilter="NONE",b.showRaw={expanded:!1},b.addToDashboardLink=function(){var a="#/threads",b=angular.toJson({size_x:8,size_y:2}),c="Threads";return"#/dashboard/add?tab=dashboard&href="+encodeURIComponent(a)+"&title="+encodeURIComponent(c)+"&size="+encodeURIComponent(b)},b.isInDashboardClass=function(){return angular.isDefined(b.inDashboard&&b.inDashboard)?"threads-dashboard":"threads logbar"},b.$watch("searchFilter",function(a,c){a!==c&&(b.threadGridOptions.filterOptions.filterText=a)}),b.$watch("stateFilter",function(a,c){a!==c&&(b.threads="NONE"===b.stateFilter?b.unfilteredThreads:b.filterThreads(b.stateFilter,b.unfilteredThreads))}),b.threadGridOptions={selectedItems:[],data:"threads",showSelectionCheckbox:!1,enableRowClickSelection:!0,multiSelect:!1,primaryKeyFn:function(a){return a.threadId},filterOptions:{filterText:""},sortInfo:{sortBy:"threadId",ascending:!1},columnDefs:[{field:"threadId",displayName:"ID"},{field:"threadState",displayName:"State",cellTemplate:d.get("threadStateTemplate")},{field:"threadName",displayName:"Name"},{field:"waitedTime",displayName:"Waited Time",cellTemplate:'<div class="ngCellText" ng-show="row.entity.waitedTime > 0">{{row.entity.waitedTime | humanizeMs}}</div>'},{field:"blockedTime",displayName:"Blocked Time",cellTemplate:'<div class="ngCellText" ng-show="row.entity.blockedTime > 0">{{row.entity.blockedTime | humanizeMs}}</div>'},{field:"inNative",displayName:"Native",cellTemplate:'<div class="ngCellText"><span ng-show="row.entity.inNative" class="orange">(in native)</span></div>'},{field:"suspended",displayName:"Suspended",cellTemplate:'<div class="ngCellText"><span ng-show="row.entity.suspended" class="red">(suspended)</span></div>'}]},b.$watch("threadGridOptions.selectedItems",function(a,c){a!==c&&(0===a.length?(b.row={},b.threadSelected=!1,b.selectedRowIndex=-1):(b.row=a.first(),b.threadSelected=!0,b.selectedRowIndex=Core.pathGet(b,["hawtioSimpleTable","threads","rows"]).findIndex(function(a){return a.entity.threadId===b.row.threadId})),b.selectedRowJson=angular.toJson(b.row,!0))},!0),b.filterOn=function(a){b.stateFilter=a},b.filterThreads=function(b,c){return a.log.debug("Filtering threads by: ",b),"NONE"===b?c:c.filter(function(a){return a&&a.threadState===b})},b.selectedFilterClass=function(a){return a===b.stateFilter?"active":""},b.deselect=function(){b.threadGridOptions.selectedItems=[]},b.selectThreadById=function(a){b.threadGridOptions.selectedItems=b.threads.filter(function(b){return b.threadId===a})},b.selectThreadByIndex=function(a){var c=Core.pathGet(b,["hawtioSimpleTable","threads","rows"])[a];b.threadGridOptions.selectedItems=b.threads.filter(function(a){return a&&a.threadId==c.entity.threadId})},b.init=function(){e.request([{type:"read",mbean:a.mbean,attribute:"ThreadContentionMonitoringSupported"},{type:"read",mbean:a.mbean,attribute:"ObjectMonitorUsageSupported"},{type:"read",mbean:a.mbean,attribute:"SynchronizerUsageSupported"}],{method:"post",success:[function(c){b.support.threadContentionMonitoringSupported=c.value,a.log.debug("ThreadContentionMonitoringSupported: ",b.support.threadContentionMonitoringSupported),b.maybeRegister()},function(c){b.support.objectMonitorUsageSupported=c.value,a.log.debug("ObjectMonitorUsageSupported: ",b.support.objectMonitorUsageSupported),b.maybeRegister()},function(c){b.support.synchronizerUsageSupported=c.value,a.log.debug("SynchronizerUsageSupported: ",b.support.synchronizerUsageSupported),b.maybeRegister()}],error:function(b){a.log.error("Failed to query for supported usages: ",b.error)}})};var i=Core.throttled(b.init,500);b.maybeRegister=function(){"objectMonitorUsageSupported"in b.support&&"synchronizerUsageSupported"in b.support&&"threadContentionMonitoringSupported"in b.support&&(a.log.debug("Registering dumpAllThreads polling"),Core.register(e,b,{type:"exec",mbean:a.mbean,operation:"dumpAllThreads",arguments:[b.support.objectMonitorUsageSupported,b.support.synchronizerUsageSupported]},onSuccess(h)),b.support.threadContentionMonitoringSupported&&e.request({type:"read",mbean:a.mbean,attribute:"ThreadContentionMonitoringEnabled"},onSuccess(b.maybeEnableThreadContentionMonitoring)))},b.maybeEnableThreadContentionMonitoring=function(c){c.value===!1?(a.log.info("Thread contention monitoring not enabled, enabling"),e.setAttribute(a.mbean,"ThreadContentionMonitoringEnabled",!0,onSuccess(g))):a.log.info("Thread contention monitoring already enabled"),Core.$apply(b)},b.getMonitorClass=function(a,b){return b.toString()},b.getMonitorName=function(a){return a=a.replace("Supported",""),a.titleize()},i()}])}(Threads||(Threads={}));var Tomcat;!function(a){function b(a){return a&&(a=a.filter(function(a){return a.startsWith("Catalina")||a.startsWith("Tomcat")})),a}function c(a){if(a)switch(a.toString().toLowerCase()){case"1":return"green icon-play-circle";case"started":return"green icon-play-circle";case"0":return"orange icon-off";case"stopped":return"orange icon-off"}return angular.isNumber(a)&&"0"===a.toString()?"orange icon-off":"icon-question-sign"}function d(a){if(a){var b=new Date(a);return b.toLocaleDateString()+" "+b.toLocaleTimeString()}return""}function e(a){return-1!==a.toString().indexOf("Apache Tomcat/5")}function f(a){return-1!==a.toString().indexOf("Apache Tomcat/6")}a.filerTomcatOrCatalina=b,a.iconClass=c,a.millisToDateFormat=d,a.isTomcat5=e,a.isTomcat6=f}(Tomcat||(Tomcat={}));var Tomcat;!function(a){var b="tomcat";a._module=angular.module(b,["bootstrap","ngResource","ui.bootstrap.dialog","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/tomcat/server",{templateUrl:"app/tomcat/html/server.html"}).when("/tomcat/applications",{templateUrl:"app/tomcat/html/applications.html"}).when("/tomcat/connectors",{templateUrl:"app/tomcat/html/connectors.html"}).when("/tomcat/sessions",{templateUrl:"app/tomcat/html/sessions.html"})}]),a._module.filter("tomcatIconClass",function(){return a.iconClass}),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,b,c,d){c.tomcat="app/tomcat/html/layoutTomcatTabs.html",d.addUserDoc("tomcat","app/tomcat/doc/help.md",function(){return b.treeContainsDomainAndProperties("Tomcat")||b.treeContainsDomainAndProperties("Catalina")}),b.topLevelTabs.push({id:"tomcat",content:"Tomcat",title:"Manage your Tomcat container",isValid:function(a){return a.treeContainsDomainAndProperties("Tomcat")||a.treeContainsDomainAndProperties("Catalina")},href:function(){return"#/tomcat/applications"},isActive:function(a){return a.isTopTabActive("tomcat")}})}]),hawtioPluginLoader.addModule(b)}(Tomcat||(Tomcat={}));var Tomcat;!function(a){a._module.controller("Tomcat.ConnectorsController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){function d(a){var c=a.value;c&&(c.mbean=a.request.mbean,b.connectors.push(c),Core.$apply(b))}c=a.filerTomcatOrCatalina(c),b.connectors=[],b.selected.length=0,angular.forEach(c,function(a){var b=a;e.request({type:"read",mbean:b,attribute:["scheme","port","protocol","secure","connectionLinger","connectionTimeout","keepAliveTimeout","minSpareThreads","maxThreads","stateName"]},onSuccess(d))}),Core.$apply(b)}function g(){setTimeout(h,50)}function h(){console.log("Loading tomcat connector data..."),e.search("*:type=Connector,*",onSuccess(f))}var i='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | tomcatIconClass}}"></i></div>';b.connectors=[],b.selected=[];var j=[{field:"stateName",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"port",displayName:"Port",cellFilter:null,width:"*",resizable:!0},{field:"scheme",displayName:"Scheme",cellFilter:null,width:"*",resizable:!0},{field:"protocol",displayName:"Protocol",cellFilter:null,width:"*",resizable:!0},{field:"secure",displayName:"Secure",cellFilter:null,width:"*",resizable:!0},{field:"connectionLinger",displayName:"Connection Linger",cellFilter:null,width:"*",resizable:!0},{field:"connectionTimeout",displayName:"Connection Timeout",cellFilter:null,width:"*",resizable:!0},{field:"keepAliveTimeout",displayName:"Keep Alive Timeout",cellFilter:null,width:"*",resizable:!0},{field:"minSpareThreads",displayName:"Minimum Threads",cellFilter:null,width:"*",resizable:!0},{field:"maxThreads",displayName:"Maximum Threads",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"connectors",displayFooter:!0,selectedItems:b.selected,selectWithCheckboxOnly:!0,columnDefs:j,filterOptions:{filterText:""}},b.controlConnector=function(a){var c=b.selected.map(function(a){return a.mbean});angular.isArray(c)||(c=[c]),c.forEach(function(c){e.request({type:"exec",mbean:c,operation:a,arguments:null},onSuccess(b.onResponse,{error:b.onResponse}))})},b.stop=function(){b.controlConnector("stop")},b.start=function(){b.controlConnector("start")},b.destroy=function(){b.controlConnector("destroy")},b.onResponse=function(){h()},b.$on("jmxTreeUpdated",g),b.$watch("workspace.tree",g)}])}(Tomcat||(Tomcat={}));var Tomcat;!function(a){a._module.controller("Tomcat.SessionsController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){function d(a){var c=a.value;if(c){c.mbean=a.request.mbean;var d=c.mbean;if(d){var e=d.toString().split(",")[1];c.path=e?e.toString().substr(-1!==e.toString().indexOf("path=")?5:9):"",b.sessions.push(c),Core.$apply(b)}}}c=a.filerTomcatOrCatalina(c),b.sessions=[],angular.forEach(c,function(a){var b=a;e.request({type:"read",mbean:b},onSuccess(d))}),Core.$apply(b)}function g(){setTimeout(h,50)}function h(){console.log("Loading tomcat session data..."),e.search("*:type=Manager,*",onSuccess(f))}var i='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | tomcatIconClass}}"></i></div>';b.sessions=[],b.search="";var j=[{field:"stateName",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"path",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"activeSessions",displayName:"Active Sessions",cellFilter:null,width:"*",resizable:!0},{field:"expiredSessions",displayName:"Expired Sessions",cellFilter:null,width:"*",resizable:!0},{field:"rejectedSessions",displayName:"Rejected Sessions",cellFilter:null,width:"*",resizable:!0},{field:"maxActive",displayName:"Max Active Sessions",cellFilter:null,width:"*",resizable:!0},{field:"maxActiveSessions",displayName:"Max Active Sessions Allowed",cellFilter:null,width:"*",resizable:!0},{field:"maxInactiveInterval",displayName:"Max Inactive Interval",cellFilter:null,width:"*",resizable:!0},{field:"sessionCounter",displayName:"Session Counter",cellFilter:null,width:"*",resizable:!0},{field:"sessionCreateRate",displayName:"Session Create Rate",cellFilter:null,width:"*",resizable:!0},{field:"sessionExpireRate",displayName:"Session Expire Rate",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"sessions",displayFooter:!1,displaySelectionCheckbox:!1,canSelectRows:!1,columnDefs:j,filterOptions:{filterText:""}},b.$on("jmxTreeUpdated",g),b.$watch("workspace.tree",g)}])}(Tomcat||(Tomcat={}));var Tomcat;!function(a){a._module.controller("Tomcat.TomcatController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(d){function f(d){var e=d.value;if(e){e.mbean=d.request.mbean;var f=e.mbean,g=Core.extractTargetUrl(c,b.httpScheme,b.httpPort);if(e.url=g+e.path,f){e.startTime=a.millisToDateFormat(e.startTime);var h=b.mbeanIndex[f];angular.isDefined(h)?b.webapps[f]=e:(b.mbeanIndex[f]=b.webapps.length,b.webapps.push(e)),Core.$apply(b)}}}d=a.filerTomcatOrCatalina(d),b.webapps=[],b.mbeanIndex={},b.selected.length=0,angular.forEach(d,function(c){var d=c;a.isTomcat5(b.tomcatServerVersion)?e.request({type:"read",mbean:d,attribute:["path","state","startTime"]},onSuccess(f)):a.isTomcat6(b.tomcatServerVersion)?e.request({type:"read",mbean:d,attribute:["path","stateName","startTime"]},onSuccess(f)):e.request({type:"read",mbean:d,attribute:["displayName","path","stateName","startTime"]},onSuccess(f))}),Core.$apply(b)}function g(){setTimeout(h,50)}function h(){console.log("Loading tomcat webapp data...");var a=e.search("*:type=Connector,*");if(a){var c=!1;angular.forEach(a,function(a){function d(a){return a&&a.toString().toLowerCase().indexOf("http")>=0}var f=a;if(!c){var g=e.request({type:"read",mbean:f,attribute:["port","scheme","protocol"]});g&&g.value&&d(g.value.protocol)&&(c=!0,b.httpPort=g.value.port,b.httpScheme=g.value.scheme)}})}e.search("*:j2eeType=WebModule,*",onSuccess(f))}var i='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | tomcatIconClass}}"></i></div>',j='<div class="ngCellText" title="{{row.getProperty(col.field)}}"><a ng-href="{{row.getProperty(col.field)}}" target="_blank">{{row.getProperty(col.field)}}</a></div>';b.uninstallDialog=new UI.Dialog,b.httpPort,b.httpScheme="http",b.webapps=[],b.selected=[];var k=[{field:"state",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"path",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"url",displayName:"Url",cellTemplate:j,cellFilter:null,width:"*",resizable:!0},{field:"startTime",displayName:"Start Time",cellFilter:null,width:"*",resizable:!0}],l=[{field:"stateName",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"path",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"url",displayName:"Url",cellTemplate:j,cellFilter:null,width:"*",resizable:!0},{field:"startTime",displayName:"Start Time",cellFilter:null,width:"*",resizable:!0}],m=[{field:"stateName",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"path",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"displayName",displayName:"Display Name",cellFilter:null,width:"*",resizable:!0},{field:"url",displayName:"Url",cellTemplate:j,cellFilter:null,width:"*",resizable:!0},{field:"startTime",displayName:"Start Time",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"webapps",displayFooter:!0,selectedItems:b.selected,selectWithCheckboxOnly:!0,filterOptions:{filterText:""}},b.controlWebApps=function(a){var c=b.selected.map(function(a){return a.mbean});angular.isArray(c)||(c=[c]);var d=(c.length||1)-1;angular.forEach(c,function(c,f){var g=f>=d?b.onLastResponse:b.onResponse;e.request({type:"exec",mbean:c,operation:a,arguments:null},onSuccess(g,{error:g}))})},b.stop=function(){b.controlWebApps("stop")},b.start=function(){b.controlWebApps("start")},b.reload=function(){b.controlWebApps("reload")},b.uninstall=function(){b.controlWebApps("destroy"),b.uninstallDialog.close()},b.onLastResponse=function(a){b.onResponse(a),h()},b.onResponse=function(){},b.$on("jmxTreeUpdated",g),b.$watch("workspace.tree",g),b.tomcatServerVersion="";var n=e.search("*:type=Server");n=a.filerTomcatOrCatalina(n),n&&1===n.length?b.tomcatServerVersion=e.getAttribute(n[0],"serverInfo"):console.log("Cannot find Tomcat server or there was more than one server. response is: "+n),a.isTomcat5(b.tomcatServerVersion)?(console.log("Using Tomcat 5"),b.gridOptions.columnDefs=k):a.isTomcat6(b.tomcatServerVersion)?(console.log("Using Tomcat 6"),b.gridOptions.columnDefs=l):(console.log("Using Tomcat 7"),b.gridOptions.columnDefs=m)}])}(Tomcat||(Tomcat={}));var UI;!function(a){a._module.directive("hawtioAutoColumns",function(){return new a.AutoColumns});var b=function(){function b(){this.restrict="A",this.link=function(b,c,d){var e=a.getIfSet("hawtioAutoColumns",d,"div"),f=a.getIfSet("minMargin",d,"3").toNumber(),g=Core.throttled(function(){var a=c.innerWidth(),b=0,d=c.children(e);
if(0!==d.length&&(d.each(function(){var a=$(this);a.is(":visible")&&a.outerWidth()>b&&(b=a.outerWidth())}),0!==b)){b+=2*f;var g=Math.floor(a/b);d.length<g&&(g=d.length);var h=(a-g*b)/g/2;d.each(function(){$(this).css({"margin-left":h,"margin-right":h})})}},500);setTimeout(g,300),b.$watch(g),$(window).resize(g)}}return b}();a.AutoColumns=b}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioAutoDropdown",function(){return a.AutoDropDown}),a.AutoDropDown={restrict:"A",link:function(b,c){function d(b){var d=c.get(0);if(!(b&&b.relatedNode!==d&&b.type&&b&&"resize"!==b.type)){var e=$(c.find(".overflow")),f=$(e.find("ul.dropdown-menu")),g=0,h=0;try{g=e.outerWidth()-e.innerWidth(),h=e.position().left-c.position().left-50}catch(i){a.log.debug("caught "+i)}if(c.children("li:not(.overflow):not(.pull-right):not(:hidden)").each(function(){var a=$(this);h-=a.outerWidth(!0),0>h&&(a.detach(),a.prependTo(f))}),f.children().length>0&&e.css({visibility:"visible"}),h>130){var j=!1;f.children("li:not(.overflow):not(.pull-right)").filter(function(){return"none"!==$(this).css("display")}).each(function(){if(!j){var a=$(this);h>a.outerWidth()?(h-=a.outerWidth(),a.detach(),a.insertBefore(e)):j=!0}})}0===f.children().length&&e.css({visibility:"hidden"})}}$(window).resize(d),c.get(0).addEventListener("DOMNodeInserted",d),b.$watch(setTimeout(d,500))}}}(UI||(UI={}));var UI;!function(a){function b(){return{restrict:"E",replace:!0,templateUrl:a.templatePath+"breadcrumbs.html",require:"hawtioDropDown",scope:{config:"="},controller:["$scope","$element","$attrs",function(a){function b(c,d){c.level=d,d>0&&(c.breadcrumbAction=c.action,c.action=a.action),c.items&&c.items.forEach(function(a){b(a,d+1)})}function c(b,d,e){if(0!==d.length){var f=d.removeAt(0)[0];if(b&&b.items){var g=!1;b.items.forEach(function(b){g||b.title!==f||(g=!0,a.levels[e]=b,c(b,d,e+1))})}}}a.action="itemClicked(config, $event)",a.levels={},a.itemClicked=function(b,c){if(b.level&&angular.isNumber(b.level)){a.levels[b.level]=b;var d=Object.extended(a.levels).keys().sortBy(""),e=d.from(b.level+1);if(e.forEach(function(b){b in a.levels&&(a.levels[b]={},delete a.levels[b])}),angular.forEach(a.levels,function(b){b.items&&b.items.length>0&&b.items.forEach(function(b){b.action=a.action})}),b.items)b.open=!0,b.items.forEach(function(b){b.action=a.action}),delete b.action;else{var d=Object.extended(a.levels).keys().sortBy(""),f=[];d.forEach(function(b){f.push(a.levels[b].title)});var g="/"+f.join("/");a.config.path=g}b.level>1&&(c.preventDefault(),c.stopPropagation())}},a.$watch("config.path",function(b){if(!Core.isBlank(b)){var d=b.split("/").exclude(function(a){return Core.isBlank(a)}),e=!0;if(d.forEach(function(b,c){e&&(!a.levels[c]||Core.isBlank(a.levels[c].title)||a.levels[c].title!==b)&&(e=!1)}),e)return;a.levels=[],a.levels[0]=a.config,c(a.config,d.from(0),1)}}),a.$watch("config",function(){b(a.config,0),a.levels[0]=a.config})}]}}a.hawtioBreadcrumbs=b,a._module.directive("hawtioBreadcrumbs",a.hawtioBreadcrumbs)}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioColorPicker",function(){return new a.ColorPicker}),a.selected="selected",a.unselected="unselected";var b=function(){function b(){this.restrict="A",this.replace=!0,this.scope={property:"=hawtioColorPicker"},this.templateUrl=a.templatePath+"colorPicker.html",this.compile=function(){return{post:function(b){b.colorList=[],angular.forEach(a.colors,function(c){var d=a.unselected;b.property===c&&(d=a.selected),b.colorList.push({color:c,select:d})})}}},this.controller=["$scope","$element","$timeout",function(b,c){b.popout=!1,b.$watch("popout",function(){c.find(".color-picker-popout").toggleClass("popout-open",b.popout)}),b.selectColor=function(c){for(var d=0;d<b.colorList.length;d++)b.colorList[d].select=a.unselected,b.colorList[d]===c&&(b.property=c.color,b.colorList[d].select=a.selected)}}]}return b}();a.ColorPicker=b}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioConfirmDialog",function(){return new a.ConfirmDialog});var b=function(){function b(){this.restrict="A",this.replace=!0,this.transclude=!0,this.templateUrl=a.templatePath+"confirmDialog.html",this.scope={show:"=hawtioConfirmDialog",title:"@",okButtonText:"@",showOkButton:"@",cancelButtonText:"@",onCancel:"&?",onOk:"&?",onClose:"&?"},this.controller=["$scope","$element","$attrs","$transclude","$compile",function(a,b,c,d,e){function f(){setTimeout(function(){var a=$("div.modal-backdrop");a&&a.length&&(Logger.get("ConfirmDialog").debug("Removing the backdrop div! "+a),a.remove())},200)}a.clone=null,d(function(b){a.clone=$(b).filter(".dialog-body")}),a.$watch("show",function(){a.show&&setTimeout(function(){a.body=$(".modal-body"),a.body.html(e(a.clone.html())(a.$parent)),Core.$apply(a)},50)}),c.$observe("okButtonText",function(b){angular.isDefined(b)||(a.okButtonText="OK")}),c.$observe("cancelButtonText",function(b){angular.isDefined(b)||(a.cancelButtonText="Cancel")}),c.$observe("title",function(b){angular.isDefined(b)||(a.title="Are you sure?")}),a.cancel=function(){a.show=!1,a.$parent.$eval(a.onCancel),f()},a.submit=function(){a.show=!1,a.$parent.$eval(a.onOk),f()},a.close=function(){a.$parent.$eval(a.onClose),f()}}]}return b}();a.ConfirmDialog=b}(UI||(UI={}));var UI;!function(a){a._module.controller("UI.DeveloperPageController",["$scope","$http",function(a,b){a.getContents=function(a,c){var d="app/ui/html/test/"+a;b({method:"GET",url:d}).success(function(a){c(a)}).error(function(b){c("Failed to fetch "+a+": "+b)})}}])}(UI||(UI={}));var UI;!function(a){a.hawtioDrag=a._module.directive("hawtioDrag",[function(){return{replace:!1,transclude:!0,restrict:"A",template:"<span ng-transclude></span>",scope:{data:"=hawtioDrag"},link:function(a,b){b.attr({draggable:"true"});var c=b[0];c.draggable=!0,c.addEventListener("dragstart",function(c){return c.dataTransfer.effectAllowed="move",c.dataTransfer.setData("data",a.data),b.addClass("drag-started"),!1},!1),c.addEventListener("dragend",function(){b.removeClass("drag-started")},!1)}}}]),a.hawtioDrop=a._module.directive("hawtioDrop",[function(){return{replace:!1,transclude:!0,restrict:"A",template:"<span ng-transclude></span>",scope:{onDrop:"&?hawtioDrop",ngModel:"=",property:"@",prefix:"@"},link:function(a,b){var c=function(a){return a.preventDefault&&a.preventDefault(),b.addClass("drag-over"),!1},d=b[0];d.addEventListener("dragenter",c,!1),d.addEventListener("dragover",c,!1),d.addEventListener("dragleave",function(){return b.removeClass("drag-over"),!1},!1),d.addEventListener("drop",function(c){c.stopPropagation&&c.stopPropagation(),b.removeClass("drag-over");var d=c.dataTransfer.getData("data");a.onDrop&&a.$eval(a.onDrop,{data:d,model:a.ngModel,property:a.property});var e="hawtio-drop";return Core.isBlank(a.prefix)||(e=a.prefix+"-"+e),a.$emit(e,{data:d,model:a.ngModel,property:a.property}),Core.$apply(a),!1},!1)}}}])}(UI||(UI={}));var UI;!function(a){a._module.directive("editableProperty",["$parse",function(b){return new a.EditableProperty(b)}]);var b=function(){function b(b){this.$parse=b,this.restrict="E",this.scope=!0,this.templateUrl=a.templatePath+"editableProperty.html",this.require="ngModel",this.link=null,this.link=function(a,c,d,e){function f(){return":input[type="+a.inputType+"]"}a.inputType=d.type||"text",a.min=d.min,a.max=d.max,a.getText=function(){return a.text?"password"===a.inputType?StringHelpers.obfusicate(a.text):a.text:""},a.editing=!1,$(c.find(".icon-pencil")[0]).hide(),a.getPropertyName=function(){var c=b(d.property)(a);return c||0===c||(c=d.property),c},e.$render=function(){e.$viewValue&&(a.text=e.$viewValue[a.getPropertyName()])},a.getInputStyle=function(){if(!a.text)return{};var b=(a.text+"").length/1.2;return 5>b&&(b=5),{width:b+"em"}},a.showEdit=function(){$(c.find(".icon-pencil")[0]).show()},a.hideEdit=function(){$(c.find(".icon-pencil")[0]).hide()},a.$watch("editing",function(a,b){a!==b&&a&&$(c.find(f())).focus().select()}),a.doEdit=function(){a.editing=!0},a.stopEdit=function(){$(c.find(f())[0]).val(e.$viewValue[a.getPropertyName()]),a.editing=!1},a.saveEdit=function(){var b=$(c.find(f())[0]).val(),g=e.$viewValue;g[a.getPropertyName()]=b,e.$setViewValue(g),e.$render(),a.editing=!1,a.$parent.$eval(d.onSave)}}}return b}();a.EditableProperty=b}(UI||(UI={}));var UI;!function(a){function b(b){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"editor.html",scope:{text:"=hawtioEditor",mode:"=",outputEditor:"@",name:"@"},controller:["$scope","$element","$attrs",function(b,c,d){b.codeMirror=null,b.doc=null,b.options=[],a.observe(b,d,"name","editor"),b.applyOptions=function(){b.codeMirror&&(b.options.each(function(a){b.codeMirror.setOption(a.key,a.value)}),b.options=[])},b.$watch("doc",function(){b.doc&&b.codeMirror.on("change",function(){b.text=b.doc.getValue(),b.dirty=!b.doc.isClean(),Core.$apply(b)})}),b.$watch("codeMirror",function(){b.codeMirror&&(b.doc=b.codeMirror.getDoc())}),b.$watch("text",function(){if(b.codeMirror&&b.doc&&!b.codeMirror.hasFocus()){var a=b.text||"";(angular.isArray(a)||angular.isObject(a))&&(a=JSON.stringify(a,null,"  "),b.mode="javascript",b.codeMirror.setOption("mode","javascript")),b.doc.setValue(a)}})}],link:function(a,c,d){"dirty"in d&&(a.dirtyTarget=d.dirty,a.$watch("$parent['"+a.dirtyTarget+"']",function(b,c){b!==c&&(a.dirty=b)}));var e=Object.extended(d).clone();if(delete e.$$element,delete e.$attr,delete e["class"],delete e.hawtioEditor,delete e.mode,delete e.dirty,delete e.outputEditor,"onChange"in d){var f=d.onChange;delete e.onChange,a.options.push({onChange:function(c){var d=b(f);d&&d(a.$parent,{codeMirror:c})}})}angular.forEach(e,function(b,c){a.options.push({key:c,value:b})}),a.$watch("mode",function(){a.mode&&(a.codeMirror?a.codeMirror.setOption("mode",a.mode):a.options.push({key:"mode",value:a.mode}))}),a.$watch("dirty",function(b,c){a.dirty&&!a.doc.isClean()&&a.doc.markClean(),b!==c&&"dirtyTarget"in a&&(a.$parent[a.dirtyTarget]=a.dirty)}),a.$watch(function(){return c.is(":visible")},function(b,c){b!==c&&a.codeMirror&&a.codeMirror.refresh()}),a.$watch("text",function(){if(!a.codeMirror){var b={value:a.text};b=CodeEditor.createEditorSettings(b),a.codeMirror=CodeMirror.fromTextArea(c.find("textarea").get(0),b);var d=a.outputEditor;if(d){var e=a.$parent||a;Core.pathSet(e,d,a.codeMirror)}a.applyOptions()}})}}}a._module.directive("hawtioEditor",["$parse",function(b){return a.Editor(b)}]),a.Editor=b}(UI||(UI={}));var UI;!function(a){function b(a){return a.hasClass("opened")||!a.hasClass("closed")}function c(a){return a?!0:!1}a._module.directive("expandable",function(){return new a.Expandable});var d=function(){function a(){var a=this;this.log=Logger.get("Expandable"),this.restrict="C",this.replace=!1,this.link=null,this.link=function(d,e,f){var g=a,h=e,i=null,j=null;angular.isDefined(f.model)&&(i=f.model,j=d[i],angular.isDefined(d[i].expanded)?j.expanded?g.forceOpen(j,h,d):g.forceClose(j,h,d):j.expanded=h.hasClass("opened"),i&&d.$watch(i+".expanded",function(a,b){c(a)!==c(b)&&(a?g.open(j,h,d):g.close(j,h,d))}));var k=h.find(".title"),l=h.find(".cancel");l.bind("click",function(){return j=d[i],g.forceClose(j,h,d),!1}),k.bind("click",function(){return j=d[i],b(h)?g.close(j,h,d):g.open(j,h,d),!1})}}return a.prototype.open=function(a,b,c){b.find(".expandable-body").slideDown(400,function(){b.hasClass("opened")||b.addClass("opened"),b.removeClass("closed"),a&&(a.expanded=!0),Core.$apply(c)})},a.prototype.close=function(a,b,c){b.find(".expandable-body").slideUp(400,function(){b.removeClass("opened"),b.hasClass("closed")||b.addClass("closed"),a&&(a.expanded=!1),Core.$apply(c)})},a.prototype.forceClose=function(a,b,c){b.find(".expandable-body").slideUp(0,function(){b.hasClass("closed")||b.addClass("closed"),b.removeClass("opened"),a&&(a.expanded=!1),Core.$apply(c)})},a.prototype.forceOpen=function(a,b,c){b.find(".expandable-body").slideDown(0,function(){b.hasClass("opened")||b.addClass("opened"),b.removeClass("closed"),a&&(a.expanded=!0),Core.$apply(c)})},a}();a.Expandable=d}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioFileDrop",[function(){return{restrict:"A",replace:!1,link:function(b,c,d){var e=d.hawtioFileDrop,f=d.downloadUrl,g=d.mimeType||"application/octet-stream";if(!Core.isBlank(e)&&!Core.isBlank(f)){if(!f.startsWith("http")){var h=new URI;f=h.path(f).toString()}var i=g+":"+e+":"+f;c.attr({draggable:!0}),c[0].addEventListener("dragstart",function(b){b.dataTransfer?(a.log.debug("Drag started, event: ",b,"File details: ",i),b.dataTransfer.setData("DownloadURL",i)):a.log.debug("Drag event object doesn't contain data transfer: ",b)})}}}}])}(UI||(UI={}));var UI;!function(a){a.hawtioFilter=a._module.directive("hawtioFilter",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:a.templatePath+"filter.html",scope:{placeholder:"@",cssClass:"@",saveAs:"@?",ngModel:"="},controller:["$scope","localStorage","$location","$element",function(a,b){if(a.getClass=function(){var b=[];return Core.isBlank(a.cssClass)||b.push(a.cssClass),Core.isBlank(a.ngModel)||b.push("has-text"),b.join(" ")},!Core.isBlank(a.saveAs)){if(a.saveAs in b){var c=b[a.saveAs];a.ngModel=Core.isBlank(c)?"":c}else a.ngModel="";var d=function(){b[a.saveAs]=a.ngModel};a.$watch("ngModel",d)}}]}}])}(UI||(UI={}));var UI;!function(a){a._module.directive("gridster",function(){return new a.GridsterDirective});var b=function(){function a(){this.restrict="A",this.replace=!0,this.controller=["$scope","$element","$attrs",function(){}],this.link=function(a,b,c){var d=[6,6],e=[150,150],f=10,g=6;angular.isDefined(c.extraRows)&&(f=c.extraRows.toNumber()),angular.isDefined(c.extraCols)&&(g=c.extraCols.toNumber());var h=$('<ul style="margin: 0"></ul>'),i='<style type="text/css">',i=i+"</style>";b.append($(i)),b.append(h),a.gridster=h.gridster({widget_margins:d,grid_size:e,extra_rows:f,extra_cols:g}).data("gridster")}}return a}();a.GridsterDirective=b}(UI||(UI={}));var UI;!function(a){function b(){return function(a,b){function c(a,c,d){c[e]=!0,c[f]=!1,g=c[b],d>0&&(a[d-1][f]=!0)}function d(a){a[e]=!1,a[f]=!1}if(0===a.length)return a;if(Core.isBlank(b))return a;var e="newGroup",f="endGroup",g=void 0;return a.forEach(function(e,f){var h=e[b]!==g;if(angular.isArray(e[b]))if(void 0===g)h=!0;else{var i=e[b];i.length!==g.length?h=!0:(h=!1,i.forEach(function(a){h||g.any(function(b){return b===a})||(h=!0)}))}h?c(a,e,f):d(e)}),a}}a.groupBy=b,a._module.filter("hawtioGroupBy",a.groupBy)}(UI||(UI={}));var UI;!function(a){function b(){return a.log.debug("Creating icon directive"),{restrict:"E",replace:!0,templateUrl:a.templatePath+"icon.html",scope:{icon:"=config"},link:function(a){a.icon&&("type"in a.icon||Core.isBlank(a.icon.src)||(a.icon.type=a.icon.src.startsWith("icon-")?"icon":"img"))}}}a.IconTestController=a._module.controller("UI.IconTestController",["$scope","$templateCache",function(a,b){a.exampleHtml=b.get("example-html"),a.exampleConfigJson=b.get("example-config-json"),a.$watch("exampleConfigJson",function(){a.icons=angular.fromJson(a.exampleConfigJson)})}]),a.hawtioIcon=b,a._module.directive("hawtioIcon",a.hawtioIcon)}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioJsplumb",["$timeout","$window",function(b,c){return{restrict:"A",link:function(d,e,f){function g(a){var b=$(a),c=b.attr("id"),d=b.attr("anchors");if(!Core.isBlank(d)&&(d.has("{{")||d.has("}}")))return null;d=Core.isBlank(d)?["Continuous"]:d.split(",").map(function(a){return a.trim()});var e={id:c,label:"node "+c,el:b,width:b.outerWidth(),height:b.outerHeight(),edges:[],connections:[],endpoints:[],anchors:d};return e}function h(a,b){var c={isSource:!0,isTarget:!0,anchor:b.anchors,connector:u,maxConnections:-1};angular.isFunction(d.customizeEndpointOptions)&&d.customizeEndpointOptions(a,b,c);var f=a.addEndpoint(b.el,c);b.endpoints.push(f),k&&a.draggable(b.el,{containment:e})}function i(){var a=e.find(".jsplumb-node");v.length>0,angular.forEach(a,function(a){if(!x[a.id]){var b=g(a);b&&(v.push(b),x[b.id]=b)}}),angular.forEach(v,function(a){var b=a.el.attr("connect-to");b&&(b=b.split(","),angular.forEach(b,function(b){var c=x[b.trim()];if(c){var d={source:a,target:c};w.push(d),a.edges.push(d),c.edges.push(d)}}))})}function j(){if(!d.jsPlumb){d.jsPlumb=jsPlumb.getInstance({Container:e});var a={Anchor:"AutoDefault",Connector:"Flowchart",ConnectorStyle:u,DragOptions:{cursor:"pointer",zIndex:2e3},Endpoint:r,PaintStyle:{strokeStyle:"#42a62c",lineWidth:4},HoverPaintStyle:{strokeStyle:"#42a62c",lineWidth:4},ConnectionOverlays:[t,s]};k||(a.ConnectionsDetachable=!1),angular.isFunction(d.customizeDefaultOptions)&&d.customizeDefaultOptions(a),d.jsPlumb.importDefaults(a)}i(),d.jsPlumbNodes=v,d.jsPlumbNodesById=x,d.jsPlumbTransitions=w,l&&(d.layout=dagre.layout().nodeSep(n).edgeSep(o).rankSep(p).rankDir(m).nodes(v).edges(w).run()),angular.forEach(d.jsPlumbNodes,function(a){if(l){var b=a.el.width(),c=a.el.height(),e=a.dagre.y-c/2,f=a.dagre.x-b/2;a.el.css({top:e,left:f})}h(d.jsPlumb,a)}),angular.forEach(d.jsPlumbTransitions,function(a){var b={connector:u,maxConnections:-1},c={source:a.source.el,target:a.target.el};angular.isFunction(d.customizeConnectionOptions)&&d.customizeConnectionOptions(d.jsPlumb,a,c,b);var e=d.jsPlumb.connect(c,b);a.source.connections.push(e),a.target.connections.push(e)}),d.jsPlumb.recalculateOffsets(e),d.jsPlumb.isSuspendDrawing()||d.jsPlumb.repaintEverything(),angular.isDefined(d.jsPlumbCallback)&&angular.isFunction(d.jsPlumbCallback)&&d.jsPlumbCallback(d.jsPlumb,d.jsPlumbNodes,d.jsPlumbNodesById,d.jsPlumbTransitions)}c.addEventListener("resize",function(){d.jsPlumb&&(d.jsPlumb.recalculateOffsets(e),d.jsPlumb.repaintEverything())});var k=!0;angular.isDefined(f.draggable)&&(k=Core.parseBooleanValue(f.draggable));var l=!0;angular.isDefined(f.layout)&&(l=Core.parseBooleanValue(f.layout));var m="TB";if(angular.isDefined(f.direction))switch(f.direction){case"down":m="LR";break;default:m="TB"}var n=50,o=10,p=50;angular.isDefined(f.nodeSep)&&(n=Core.parseIntValue(f.nodeSep)),angular.isDefined(f.edgeSep)&&(o=Core.parseIntValue(f.edgeSep)),angular.isDefined(f.rankSep)&&(p=Core.parseIntValue(f.rankSep));var q=100;angular.isDefined(f.timeout)&&(q=Core.parseIntValue(f.timeout,"timeout"));var r=["Dot",{radius:10,cssClass:"jsplumb-circle",hoverClass:"jsplumb-circle-hover"}],s=["Label"],t=["Arrow",{location:1,id:"arrow",length:8,width:8,foldback:.8}],u=["Flowchart",{cornerRadius:4,gap:8}];angular.isDefined(d.connectorStyle)&&(u=d.connectorStyle);var v=[],w=[],x={};d.$on("jsplumbDoWhileSuspended",function(b,c){if(d.jsPlumb){var e=d.jsPlumb;e.doWhileSuspended(function(){a.log.debug("Suspended jsplumb"),d.jsPlumb.reset(),c(),v=[],x={},w=[],j()})}}),b(j,q)}}}])}(UI||(UI={}));var UI;!function(a){function b(b,c){return{restrict:"",replace:!0,templateUrl:a.templatePath+"list.html",scope:{config:"=hawtioList"},link:function(d,e,f){d.rows=[],d.name="hawtioListScope",d.config.selectedItems||(d.config.selectedItems=[]),d.$watch("rows",function(a,b){if(a!==b){d.config.selectedItems.length=0;var c=d.rows.findAll(function(a){return a.selected});c.forEach(function(a){d.config.selectedItems.push(a.entity)})}},!0),d.cellTemplate=b.get("cellTemplate.html"),d.rowTemplate=b.get("rowTemplate.html");var g=d.config.columnDefs,h="name",i="Name";if(g&&g.length>0){var j=g.first();h=j.field||h,i=j.displayName||i,j.cellTemplate&&(d.cellTemplate=j.cellTemplate)}var k=f.hawtioList,l=d.config.data;if(!Core.isBlank(k)&&!Core.isBlank(l)){d.listRoot=function(){return e.find(".list-root")},d.getContents=function(a){var b=d.$new();b.row=a;var e=c(d.rowTemplate)(b),f=d.parentScope.$new();f.row=a,f.col={field:h};var g=c(d.cellTemplate)(f);return $(e).find(".list-row-contents").append(g),e},d.setRows=function(a){d.rows=[];var b=d.listRoot();b.empty(),a&&a.forEach(function(a){var c={entity:a,getProperty:function(b){return angular.isDefined(b)?a[b]:null}};b.append(d.getContents(c)),d.rows.push(c)})};var m=a.findParentWith(d,k);m&&(d.parentScope=m,m.$watch(l,d.setRows,!0))}}}}a.hawtioList=b,a._module.directive("hawtioList",["$templateCache","$compile",a.hawtioList])}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioObject",["$templateCache","$interpolate","$compile",function(b,c,d){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"object.html",scope:{entity:"=?hawtioObject",config:"=?",path:"=?",row:"=?"},link:function(a,e){function f(a,b,d,e){var f=c(a);return f(d?{key:d.titleize(),data:e,path:b}:{data:e,path:b})}function g(a,b){var c=void 0,d=Core.pathGet(b,["properties"]);return!c&&d&&angular.forEach(d,function(b,d){var e=new RegExp(d);e.test(a)&&(c=!c||c.override||b.override?Object.clone(b,!0):Object.merge(c,b))}),c}function h(a,b,c){var d=c,b=g(a,b);return b&&b.template&&(d=b.template),d}function i(b,c,e,h,i){var i=g(c,i);if(!i||!i.hidden){var j=null;j=i&&i.template?i.template:f(b,c,e,h);var k=a.$new();return k.row=a.row,k.entityConfig=i,k.data=h,k.path=c,d(j)(k)}}function j(a,c,d){var e=h(a,d,b.get("primitiveValueTemplate.html"));return i(e,a,void 0,c,d)}function k(a,c,d){var e=h(a,d,b.get("dateValueTemplate.html"));return i(e,a,void 0,c,d)}function l(a,b,c){var d=!1,e=void 0;return angular.forEach(b,function(f,g){angular.isNumber(g)&&"length"in b&&(d=!0),d||g.startsWith("$")||(e||(e=angular.element("<span></span>")),e.append(angular.isArray(f)?s(a+"/"+g,g,f,c):angular.isObject(f)?0===Object.extended(f).size()?p(a+"/"+g,g,"empty",c):r(a+"/"+g,g,f,c):StringHelpers.isDate(f)?q(a+"/"+g,g,Date.create(f),c):p(a+"/"+g,g,f,c)))}),e?e.children():e}function m(a,b,c){var d=void 0;if(!b)return d;var e=!1;return b.forEach(function(b){!e&&angular.isObject(b)?(d||(d=[]),d=Object.extended(b).keys().filter(function(a){return!angular.isFunction(b[a])}).filter(function(b){var d=g(a+"/"+b,c);return d&&d.hidden?!1:!0}).union(d)):(d=void 0,e=!0)}),d&&(d=d.exclude(function(a){return(""+a).startsWith("$")})),d}function n(a,c,d,e,g,h){var i=angular.element(f(a,c,d,e)),j=i.find("thead"),k=i.find("tbody"),l=b.get("headerTemplate.html"),m=b.get("cellTemplate.html"),n=b.get("rowTemplate.html"),o=angular.element(f(n,c,void 0,void 0));return g.forEach(function(a){o.append(f(l,c+"/"+a,a,void 0))}),j.append(o),e.forEach(function(a,b){var d=angular.element(f(n,c+"/"+b,void 0,void 0));g.forEach(function(e){var g=angular.element(f(m,c+"/"+b+"/"+e,void 0,void 0));g.append(t(c+"/"+b+"/"+e,a[e],h)),d.append(g)}),k.append(d)}),i}function o(a,c,d){var e=m(a,c,d);if(e){var f=h(a,d,b.get("arrayValueTableTemplate.html"));return n(f,a,void 0,c,e,d)}var f=h(a,d,b.get("arrayValueListTemplate.html"));return i(f,a,void 0,c,d)}function p(a,c,d,e){var f=h(a,e,b.get("primitiveAttributeTemplate.html"));return i(f,a,c,d,e)}function q(a,c,d,e){var f=h(a,e,b.get("dateAttributeTemplate.html"));return i(f,a,c,d,e)}function r(a,c,d,e){var f=h(a,e,b.get("objectAttributeTemplate.html"));return i(f,a,c,d,e)}function s(a,c,d,e){var f=m(a,d,e);if(f){var g=h(a,e,b.get("arrayAttributeTableTemplate.html"));return n(g,a,c,d,f,e)}var g=h(a,e,b.get("arrayAttributeListTemplate.html"));return i(g,a,c,d,e)}function t(a,b,c){return angular.isArray(b)?o(a,b,c):angular.isObject(b)?l(a,b,c):StringHelpers.isDate(b)?k(a,Date.create(b),c):j(a,b,c)}a.$watch("entity",function(b){return b?(a.path||(a.path=""),angular.isDefined(a.row)||(a.row={entity:b}),void e.html(t(a.path,b,a.config))):void e.empty()},!0)}}}])}(UI||(UI={}));var UI;!function(a){function b(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:a.templatePath+"pane.html",scope:{position:"@",width:"@",header:"@"},controller:["$scope","$element","$attrs","$transclude","$document","$timeout","$compile","$templateCache","$window",function(a,b,c,d,e,f,g,h,i){a.moving=!1,d(function(c){if(b.find(".pane-content").append(c),!Core.isBlank(a.header)){var d=h.get(a.header),e=b.find(".pane-header-wrapper");e.html(g(d)(a)),f(function(){b.find(".pane-viewport").css("top",e.height())},500)}}),a.setViewportTop=function(){var a=b.find(".pane-header-wrapper");f(function(){b.find(".pane-viewport").css("top",a.height())},10)},a.setWidth=function(c){6>c||(b.width(c),b.parent().css(a.padding,b.width()+"px"),a.setViewportTop())},a.open=function(){a.setWidth(a.width)},a.close=function(){a.width=b.width(),a.setWidth(6)},a.$on("pane.close",a.close),a.$on("pane.open",a.open),a.toggle=function(){a.moving||(b.width()>6?a.close():a.open())},a.startMoving=function(b){b.stopPropagation(),b.preventDefault(),b.stopImmediatePropagation(),e.on("mouseup.hawtio-pane",function(b){f(function(){a.moving=!1},250),b.stopPropagation(),b.preventDefault(),b.stopImmediatePropagation(),e.off(".hawtio-pane"),Core.$apply(a)}),e.on("mousemove.hawtio-pane",function(b){a.moving=!0,b.stopPropagation(),b.preventDefault(),b.stopImmediatePropagation(),a.setWidth("left"===a.position?b.pageX+2:i.innerWidth-b.pageX+2),Core.$apply(a)})}}],link:function(a,b){var c=b.parent(),d="left";a.position&&(d=a.position),b.addClass(d);var e=b.width(),f="padding-"+d;a.padding=f;var g=c.css(f);c.css(f,e+"px"),a.$on("$destroy",function(){c.css(f,g)})}}}a.hawtioPane=b,a._module.directive("hawtioPane",a.hawtioPane)}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioMessagePanel",function(){return new a.MessagePanel});var b=function(){function a(){this.restrict="A",this.link=function(a,b,c){var d="100%";if("hawtioMessagePanel"in c){var e=c.hawtioMessagePanel;e&&!e.isBlank()&&(d=e)}var f="1s";if("speed"in c){var g=c.speed;f&&!f.isBlank()&&(f=g)}b.css({position:"absolute",bottom:0,height:0,"min-height":0,transition:"all "+f+" ease-in-out"}),b.parent().mouseover(function(){b.css({height:d,"min-height":"auto"})}),b.parent().mouseout(function(){b.css({height:0,"min-height":0})})}}return a}();a.MessagePanel=b,a._module.directive("hawtioInfoPanel",function(){return new a.InfoPanel});var c=function(){function a(){this.restrict="A",this.link=function(a,b,c){var d={left:{side:"right",out:"width"},right:{side:"left",out:"width"},up:{side:"bottom",out:"height"},down:{side:"top",out:"height"}},e="right";if("hawtioInfoPanel"in c){var f=c.hawtioInfoPanel;f&&!f.isBlank()&&Object.extended(d).keys().any(f)&&(e=f)}var g="1s";if("speed"in c){var h=c.speed;g&&!g.isBlank()&&(g=h)}var i="open";if("toggle"in c){var j=c.toggle;i&&!i.isBlank()&&(i=j)}var k={position:"absolute",transition:"all "+g+" ease-in-out"},l={};l[d[e].out]="100%";var m={};m[d[e].out]=0,k[d[e].side]=0,k[d[e].out]=0,b.css(k),a.$watch(i,function(a){b.css(Core.parseBooleanValue(a)?l:m)}),b.click(function(){a[i]=!1,Core.$apply(a)})}}return a}();a.InfoPanel=c}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioRow",function(){return new a.DivRow});var b=function(){function a(){this.restrict="A",this.link=function(a,b){b.get(0).addEventListener("DOMNodeInserted",function(){var a=b.children(),c=0;angular.forEach(a,function(a){var b=angular.element(a);switch(b.css("display")){case"none":break;default:c=c+b.outerWidth(!0)+5}}),b.width(c)})}}return a}();a.DivRow=b}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioSlideout",function(){return new a.SlideOut});var b=function(){function b(){this.restrict="A",this.replace=!0,this.transclude=!0,this.templateUrl=a.templatePath+"slideout.html",this.scope={show:"=hawtioSlideout",direction:"@",top:"@",height:"@",title:"@"},this.controller=["$scope","$element","$attrs","$transclude","$compile",function(b,c,d,e,f){b.clone=null,e(function(a){b.clone=$(a).filter(".dialog-body")}),a.observe(b,d,"direction","right"),a.observe(b,d,"top","10%",function(a){c.css("top",a)}),a.observe(b,d,"height","80%",function(a){c.css("height",a)}),a.observe(b,d,"title",""),b.$watch("show",function(){b.show&&(b.body=c.find(".slideout-body"),b.body.html(f(b.clone.html())(b.$parent)))}),b.hidePanel=function(c){a.log.debug("Event: ",c),b.show=!1}}],this.link=function(a,b){a.$watch("show",function(){a.show?(b.addClass("out"),b.focus()):b.removeClass("out")})}}return b}();a.SlideOut=b}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioPager",function(){return new a.TablePager});var b=function(){function b(){var b=this;this.restrict="A",this.scope=!0,this.templateUrl=a.templatePath+"tablePager.html",this.$scope=null,this.element=null,this.attrs=null,this.tableName=null,this.setRowIndexName=null,this.rowIndexName=null,this.link=function(a,c,d){return b.doLink(a,c,d)}}return b.prototype.doLink=function(a,b,c){var d=this;this.$scope=a,this.element=b,this.attrs=c,this.tableName=c.hawtioPager||c.array||"data",this.setRowIndexName=c.onIndexChange||"onIndexChange",this.rowIndexName=c.rowIndex||"rowIndex",a.first=function(){d.goToIndex(0)},a.last=function(){d.goToIndex(a.tableLength()-1)},a.previous=function(){d.goToIndex(a.rowIndex()-1)},a.next=function(){d.goToIndex(a.rowIndex()+1)},a.isEmptyOrFirst=function(){var b=a.rowIndex(),c=a.tableLength();return 0>=c||0>=b},a.isEmptyOrLast=function(){var b=a.rowIndex(),c=a.tableLength();return 1>c||b+1>=c},a.rowIndex=function(){return Core.pathGet(a.$parent,d.rowIndexName.split("."))},a.tableLength=function(){var a=d.tableData();return a?a.length:0}},b.prototype.tableData=function(){return Core.pathGet(this.$scope.$parent,this.tableName.split("."))||[]},b.prototype.goToIndex=function(a){var b=this.setRowIndexName,c=this.$scope[b];angular.isFunction(c)?c(a):(console.log("No function defined in scope for "+b+" but was "+c),this.$scope[this.rowIndexName]=a)},b}();a.TablePager=b}(UI||(UI={}));var UI;!function(a){a.hawtioTagFilter=a._module.directive("hawtioTagFilter",[function(){return{restrict:"E",replace:!0,templateUrl:a.templatePath+"tagFilter.html",scope:{selected:"=",tags:"=",collection:"=?",collectionProperty:"@",saveAs:"@"},controller:["$scope","localStorage","$location",function(a,b,c){function d(){a.collection&&a.collectionProperty?(a.selected.length?e():(a.visibleTags=a.tags,a.filteredCollection=a.collection),a.visibleTags=a.visibleTags.map(function(b){return{id:b,count:a.filteredCollection.map(function(b){return b[a.collectionProperty]}).reduce(function(a,c){return c.any(b)?a+1:a},0)}})):a.visibleTags=a.tags}function e(){a.filteredCollection=a.collection.filter(function(b){return SelectionHelpers.filterByGroup(a.selected,b[a.collectionProperty])}),a.visibleTags=[],a.filteredCollection.forEach(function(b){a.visibleTags=a.visibleTags.union(b[a.collectionProperty])})}if(SelectionHelpers.decorate(a),!Core.isBlank(a.saveAs)){var f=c.search();a.saveAs in f?a.selected.add(angular.fromJson(f[a.saveAs])):a.saveAs in b&&a.selected.add(angular.fromJson(b[a.saveAs]))}a.$watch("tags",function(b,c){b!==c&&(SelectionHelpers.syncGroupSelection(a.selected,a.tags),d())}),a.$watch("selected",function(){if(!Core.isBlank(a.saveAs)){var e=angular.toJson(a.selected);b[a.saveAs]=e,c.search(a.saveAs,e)}d()},!0)}]}}])}(UI||(UI={}));var UI;!function(a){a.hawtioTagList=a._module.directive("hawtioTagList",["$interpolate","$compile",function(a,b){return{restrict:"E",replace:!0,scope:{ngModel:"=?",property:"@",onChange:"&"},link:function(c,d){c.ngModel&&c.property&&c.ngModel[c.property]&&(c.collection=c.ngModel[c.property],c.removeTag=function(a){c.ngModel[c.property].remove(a),c.onChange&&c.$eval(c.onChange)},c.$watch("collection",function(){if(c.ngModel&&c.property&&c.ngModel[c.property]){var e=c.ngModel[c.property],f=angular.element("<div></div>");e.forEach(function(b){var c=a('<span class="badge badge-success mouse-pointer">{{tag}} <i class="icon-remove" ng-click="removeTag(\'{{tag}}\')"></i></span>&nbsp;');f.append(c({tag:b}))}),d.html(b(f.children())(c))}},!0))}}}])}(UI||(UI={}));var UI;!function(a){function b(b,c,d){return{restrict:"A",link:function(e,f,g){var h=a.getIfSet("title",g,void 0),i=a.getIfSet("trigger",g,"hover"),j=!0,k=a.getIfSet("content",g,"popoverTemplate"),l=a.getIfSet("placement",g,"auto"),m=a.getIfSet("delay",g,"100"),n=a.getIfSet("container",g,"body"),o=a.getIfSet("selector",g,"false");"false"===n&&(n=!1),"false"===o&&(o=!1);var p=b.get(k);p&&(f.on("$destroy",function(){f.popover("destroy")}),f.popover({title:h,trigger:i,html:j,content:function(){var a=c(p)(e);return Core.$digest(e),a},delay:m,container:n,selector:o,placement:function(){if("auto"!==l)return l;
var a=f,b=a.offset(),c=d.innerWidth(),e=b.left+a.outerWidth()/2,g=c/2;return g>e?"right":"left"}}))}}}a.TemplatePopover=b,a._module.directive("hawtioTemplatePopover",["$templateCache","$compile","$document",a.TemplatePopover])}(UI||(UI={}));var UI;!function(a){a._module.controller("UI.UITestController2",["$scope","$templateCache",function(a,b){a.fileUploadExMode="text/html",a.menuItems=[],a.divs=[];for(var c=0;20>c;c++)a.menuItems.push("Some Item "+c);for(var c=0;20>c;c++)a.divs.push(c+1);a.things=[{name:"stuff1",foo1:"bar1",foo2:"bar2"},{name:"stuff2",foo3:"bar3",foo4:"bar4"}],a.someVal=1,a.dropDownConfig={icon:"icon-cogs",title:"My Awesome Menu",items:[{title:"Some Item",action:"someVal=2"},{title:"Some other stuff",icon:"icon-twitter",action:"someVal=3"},{title:"I've got children",icon:"icon-file-text",items:[{title:"Hi!",action:"someVal=4"},{title:"Yo!",items:[{title:"More!",action:"someVal=5"},{title:"Child",action:"someVal=6"},{title:"Menus!",action:"someVal=7"}]}]},{title:"Call a function!",action:function(){Core.notification("info","Function called!")}}]},a.dropDownConfigTxt=angular.toJson(a.dropDownConfig,!0),a.$watch("dropDownConfigTxt",function(b,c){b!==c&&(a.dropDownConfig=angular.fromJson(a.dropDownConfigTxt))}),a.breadcrumbSelection=1,a.breadcrumbConfig={path:"/root/first child",icon:"icon-cogs",title:"root",items:[{title:"first child",icon:"icon-folder-close-alt",items:[{title:"first child's first child",icon:"icon-file-text"}]},{title:"second child",icon:"icon-file"},{title:"third child",icon:"icon-folder-close-alt",items:[{title:"third child's first child",icon:"icon-file-text"},{title:"third child's second child",icon:"icon-file-text"},{title:"third child's third child",icon:"icon-folder-close-alt",items:[{title:"More!",icon:"icon-file-text"},{title:"Child",icon:"icon-file-text"},{title:"Menus!",icon:"icon-file-text"}]}]}]},a.breadcrumbConfigTxt=angular.toJson(a.breadcrumbConfig,!0),a.$watch("breadcrumbConfigTxt",function(b,c){b!==c&&(a.breadcrumbconfig=angular.toJson(a.breadcrumbConfigTxt))}),a.breadcrumbEx=b.get("breadcrumbTemplate"),a.dropDownEx=b.get("dropDownTemplate"),a.autoDropDown=b.get("autoDropDownTemplate"),a.zeroClipboard=b.get("zeroClipboardTemplate"),a.popoverEx=b.get("myTemplate"),a.popoverUsageEx=b.get("popoverExTemplate"),a.autoColumnEx=b.get("autoColumnTemplate")}]),a._module.controller("UI.UITestController1",["$scope","$templateCache",function(b,c){b.jsplumbEx=c.get("jsplumbTemplate"),b.nodes=["node1","node2"],b.otherNodes=["node4","node5","node6"],b.anchors=["Top","Right","Bottom","Left"],b.createEndpoint=function(a){var c=b.jsPlumbNodesById[a];if(c){var d=b.anchors.subtract(c.anchors);if(console.log("anchors: ",d),d&&d.length>0){var e=d.first();c.anchors.push(e),c.endpoints.push(b.jsPlumb.addEndpoint(c.el,{anchor:e,isSource:!0,isTarget:!0,maxConnections:-1}))}}},b.expandableEx='<div class="expandable closed">\n   <div title="The title" class="title">\n     <i class="expandable-indicator"></i> Expandable title\n   </div>\n   <div class="expandable-body well">\n     This is the expandable content...  Note that adding the "well" class isn\'t necessary but makes for a nice inset look\n   </div>\n</div>',b.editablePropertyEx1='<editable-property ng-model="editablePropertyModelEx1" property="property"></editable-property>',b.editablePropertyModelEx1={property:"This is editable (hover to edit)"},b.showDeleteOne=new a.Dialog,b.showDeleteTwo=new a.Dialog,b.fileUploadEx1='<div hawtio-file-upload="files" target="test1"></div>',b.fileUploadEx2='<div hawtio-file-upload="files" target="test2" show-files="false"></div>',b.fileUploadExMode="text/html",b.colorPickerEx='My Color ({{myColor}}): <div hawtio-color-picker="myColor"></div>',b.confirmationEx1='<button class="btn" ng-click="showDeleteOne.open()">Delete stuff</button>\n\n<div hawtio-confirm-dialog="showDeleteOne.show"\ntitle="Delete stuff?"\nok-button-text="Yes, Delete the Stuff"\ncancel-button-text="No, Keep the Stuff"\non-cancel="onCancelled(\'One\')"\non-ok="onOk(\'One\')">\n  <div class="dialog-body">\n    <p>\n        Are you sure you want to delete all the stuff?\n    </p>\n  </div>\n</div>\n',b.confirmationEx2='<button class="btn" ng-click="showDeleteTwo.open()">Delete other stuff</button>\n\n<!-- Use more defaults -->\n<div hawtio-confirm-dialog="showDeleteTwo.show\n"  on-cancel="onCancelled(\'Two\')"\n  on-ok="onOk(\'Two\')">\n  <div class="dialog-body">\n    <p>\n      Are you sure you want to delete all the other stuff?\n    </p>\n  </div>\n</div>',b.sliderEx1='<button class="btn" ng-click="showSlideoutRight = !showSlideoutRight">Show slideout right</button>\n<div hawtio-slideout="showSlideoutRight" title="Hey look a slider!">\n   <div class="dialog-body">\n     <div>\n       Here is some content or whatever {{transcludedValue}}\n     </div>\n   </div>\n</div>',b.sliderEx2='<button class="btn" ng-click="showSlideoutLeft = !showSlideoutLeft">Show slideout left</button>\n<div hawtio-slideout="showSlideoutLeft" direction="left" title="Hey, another slider!">\n   <div class="dialog-body">\n     <div hawtio-editor="someText" mode="javascript"></div>\n   </div>\n</div>\n',b.editorEx1='Instance 1\n<div class="row-fluid">\n   <div hawtio-editor="someText" mode="mode" dirty="dirty"></div>\n   <div>Text : {{someText}}</div>\n</div>\n\nInstance 2 (readonly)\n<div class="row-fluid">\n   <div hawtio-editor="someText" read-only="true" mode="mode" dirty="dirty"></div>\n   <div>Text : {{someText}}</div>\n</div>',b.transcludedValue="and this is transcluded",b.onCancelled=function(a){Core.notification("info","cancelled "+a)},b.onOk=function(a){Core.notification("info",a+" ok!")},b.showSlideoutRight=!1,b.showSlideoutLeft=!1,b.dirty=!1,b.mode="javascript",b.someText='var someValue = 0;\nvar someFunc = function() {\n  return "Hello World!";\n}\n',b.myColor="#FF887C",b.showColorDialog=!1,b.files=[],b.$watch("files",function(a,c){a!==c&&console.log("Files: ",b.files)},!0)}])}(UI||(UI={}));var UI;!function(a){function b(a,b,c,d){var e=Logger.get("UI");return{restrict:"A",scope:{getContents:"&"},controller:["$scope","$element","$attrs",function(b){b.remaining=-1,b.render=!1,b.chapters=[],b.addChapter=function(a){console.log("Adding: ",a),b.chapters.push(a),angular.isDefined(a.text)||b.fetchItemContent(a)},b.getTarget=function(a){return a?a.replace(".","_"):""},b.getFilename=function(a,b){var c=a.split("/").last();return b&&!c.endsWith(b)&&(c=c+"."+b),c},b.$watch("remaining",function(a,c){if(a!==c){var d=!1;(0===a||d)&&(b.render=!0)}}),b.fetchItemContent=function(c){var d=b;b.$eval(function(e){e.getContents({filename:c.filename,cb:function(e){e&&(c.text=c.filename.endsWith(".md")?a(e):e,b.remaining--,Core.$apply(d))}})})}}],link:function(a,c,f){function g(){var a=$(window).scrollTop();c.find("li a").removeClass("active"),$(".panel-body").each(function(){var b=$(this).offset();if(b&&b.top>=a){var c=$(this).attr("id");if(c){var d=p.find("a[chapter-id='"+c+"']");return d.addClass("active"),!1}}})}function h(){var a=p.find("a");return s&&(a=a.filter(s)),a}function i(){p.get(0).id||(p.get(0).id="toc"),a.tocId="#"+p.get(0).id,a.remaining=h().length,h().each(function(b,c){e.debug("Found: ",c);var d=a.getFilename(c.href,c.getAttribute("file-extension")),f={filename:d,title:c.textContent,link:c};a.addChapter(f)}),setTimeout(function(){g()},100)}function j(a){if(e.debug("selected chapter changed: "+a),a){var b="#"+a,c=0,d=$(b);if(d.length){var f=d.offset();f&&(c=f.top-k),$("body,html").animate({scrollTop:c},r)}}}var k=0,l=$(".logbar"),m=$("#toc-content");if(l.length)k=l.height()+l.offset().top;else if(m.length){var n=m.offset();n&&(k=n.top)}k||(k=90);var o=null,p=c;m&&m.length||(m=c);var q=a.$parent||a,r=1e3,s=f.linkFilter,t=f.html;t?q.$watch(t,function(){var a=q[t];if(a&&a!==o){o=a;var b=d(a)(q);c.children().remove(),c.append(b),i()}}):i(),$(window).scroll(g),a.$watch("render",function(c,f){if(c!==f&&c&&!m.next(".hawtio-toc").length){var g=$('<div class="hawtio-toc"></div>');g.appendTo(m);var i=b.search().chapter;a.chapters.forEach(function(b,c){e.debug("index:",c);var f=$("<div></div>"),h=null,k=a.getTarget(b.filename),l=b.link;l&&l.setAttribute("chapter-id",k),c>0&&(h=$('<div class="panel-title"><a class="toc-back" href="">Back to Top</a></div>'));var m=$('<div class="panel-body" id="'+k+'">'+b.text+"</div>");h?f.append(h).append(d(m)(a)):f.append(d(m)(a)),f.hide().appendTo(g).fadeIn(1e3),k===i&&j(k)});var l=m.offset().top-k;g.find("a.toc-back").each(function(a,b){$(b).click(function(a){a.preventDefault(),$("body,html").animate({scrollTop:l},2e3)})}),h().each(function(c,d){var f=d.href,g=a.getFilename(f,d.getAttribute("file-extension"));$(d).click(function(c){e.debug("Clicked: ",c),c.preventDefault();var d=a.getTarget(g);return b.search("chapter",d),Core.$apply(q),j(d),!0})})}}),q.$on("$locationChangeSuccess",function(){setTimeout(function(){var a=b.search().chapter;j(a)},50)})}}}a.HawtioTocDisplay=b,a._module.directive("hawtioTocDisplay",["marked","$location","$anchorScroll","$compile",a.HawtioTocDisplay])}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioViewport",function(){return new a.ViewportHeight});var b=function(){function a(){this.restrict="A",this.link=function(a,b,c){var d=0,e=function(){var a=angular.element(c.hawtioViewport),e=angular.element(c.containingDiv),f=a.position().top+a.height(),g=e.height()-f;if(angular.isDefined(c.heightAdjust))var h=c.heightAdjust.toNumber();g+=h,b.css({height:g,"min-height":g}),d!==g&&(d=g,b.trigger("resize"))};e(),a.$watch(e),$().resize(function(){return e(),Core.$apply(a),!1})}}return a}();a.ViewportHeight=b,a._module.directive("hawtioHorizontalViewport",function(){return new a.HorizontalViewport});var c=function(){function b(){this.restrict="A",this.link=function(b,c,d){var e=angular.isDefined(d.adjustParent)&&Core.parseBooleanValue(d.adjustParent);c.get(0).addEventListener("DOMNodeInserted",function(){var b=c.children();c.height(b.outerHeight(!0)),e&&c.parent().height(c.outerHeight(!0)+a.getScrollbarWidth())})}}return b}();a.HorizontalViewport=c}(UI||(UI={}));var UI;!function(a){function b(a){return{restrict:"A",link:function(b,c,d){var e=new window.ZeroClipboard(c.get(0),{moviePath:"img/ZeroClipboard.swf"});if(e.on("complete",function(a,c){c.text&&angular.isString(c.text)&&Core.notification("info","Copied text to clipboard: "+c.text.truncate(20)),Core.$apply(b)}),"useCallback"in d){var f=a(d.useCallback);f&&f(b,{clip:e})}}}}a._module.directive("zeroClipboard",["$parse",function(b){return a.ZeroClipboardDirective(b)}]),a.ZeroClipboardDirective=b}(UI||(UI={}));var WikiDrop;!function(a){a.log=Logger.get("WikiDrop"),a.pluginName="wiki-drop",a.templatePath="app/"+a.pluginName+"/html/",a._module=angular.module(a.pluginName,["bootstrap","wiki"]),a._module.config(["$routeProvider",function(b){b.when("/wiki/drop",{templateUrl:a.templatePath+"deploy.html"})}]),a._module.run(["viewRegistry","layoutFull","workspace",function(){a.log.debug("started")}]),hawtioPluginLoader.addModule(a.pluginName)}(WikiDrop||(WikiDrop={}));var WikiDrop;!function(a){a.DropFile=a._module.directive("wikiDropFile",[function(){return a.log.debug("Creating wiki drop directive..."),{restrict:"A",replace:!0,scope:{branch:"@",path:"@",unzip:"@"},templateUrl:a.templatePath+"deploy.html",controller:["$scope","$element","FileUploader","jolokiaUrl","$templateCache","$route","$timeout","jolokia","userDetails",function(b,c,d,e,f,g,h,i,j){function k(){var c=Wiki.gitRestURL(b.branch,b.path);a.log.info("Upload URI: "+c);var e=b.artifactUploader=new d({headers:{Authorization:Core.authHeaderValue(j)},autoUpload:!0,withCredentials:!0,method:"POST",url:c});b.doUpload=function(){e.uploadAll()},e.onWhenAddingFileFailed=function(b,c,d){a.log.debug("onWhenAddingFileFailed",b,c,d)},e.onAfterAddingFile=function(b){a.log.debug("onAfterAddingFile",b)},e.onAfterAddingAll=function(b){a.log.debug("onAfterAddingAll",b)},e.onBeforeUploadItem=function(d){d.fileSizeMB="file"in d?(d.file.size/1024/1024).toFixed(2):0,d.url=c,(b.unzip===!1||"false"===b.unzip)&&(d.url+="?unzip=false"),a.log.info("Uploading files to "+c),a.log.debug("onBeforeUploadItem",d)},e.onProgressItem=function(b,c){a.log.debug("onProgressItem",b,c)},e.onProgressAll=function(b){a.log.debug("onProgressAll",b)},e.onSuccessItem=function(b,c,d,e){a.log.debug("onSuccessItem",b,c,d,e)},e.onErrorItem=function(b,c,d,e){a.log.debug("onErrorItem",b,c,d,e)},e.onCancelItem=function(b,c,d,e){a.log.debug("onCancelItem",b,c,d,e)},e.onCompleteItem=function(b,c,d,e){a.log.debug("onCompleteItem",b,c,d,e)},e.onCompleteAll=function(){a.log.debug("onCompleteAll"),e.clearQueue(),h(function(){a.log.info("Completed all uploads. Lets force a reload"),g.reload(),Core.$apply(b)},200)},a.log.debug("uploader",e),b.artifactTemplate=f.get("fileUpload.html"),Core.$apply(b)}b.artifactTemplate="",b.$watch("branch",k),b.$watch("path",k)}]}}])}(WikiDrop||(WikiDrop={}));var Wiki;!function(a){a._module.controller("Wiki.CamelController",["$scope","$location","$routeParams","localStorage","workspace","wikiRepository","jolokia",function(b,c,d,e,f,g,h){function i(a){var c=Camel.createFolderXmlTree(a,null);return c&&(b.nodeXmlNode=c),c}function j(a){var c=b.doc||document,d=b.selectedFolder||b.camelContextTree,e=a._id,f=null;if(e){var g=b.treeNode;if("route"===e)g=b.rootTreeNode;else{if(!g){var h=b.rootTreeNode,k=h.getChildren();if(k&&k.length||(j(Camel.getCamelSchema("route")),k=h.getChildren()),!k||!k.length)return void console.log("Could not add a new route to the empty tree!");g=k[k.length-1]}var l=Camel.getFolderCamelNodeId(g.data);Camel.acceptOutput(l)||(f=g.getNextSibling(),g=g.getParent()||g)}if(g){var m=c.createElement(e);d=g.data;var n=Camel.addRouteChild(d,m);if(n){var o=g.addChild(n,f);o&&(i(o),o.expand(!0),o.select(!0),o.activate(!0))}}}else console.log("WARNING: no id for model "+JSON.stringify(a))}function k(a,c){if(b.nodeData){var d=b.nodeDataChangedFields;d&&(d[c]?l():d[c]=!0)}}function l(){b.modified=!0;var a=b.selectedFolder;if(b.treeNode&&a){var c=i(b.treeNode);if(c){var d=c.localName,e=Camel.getCamelSchema(d);e&&(Camel.updateRouteNodeLabelAndTooltip(a,c,e),b.treeNode.render(!1,!1))}a.camelNodeData=b.nodeData}}function m(a){var c=a.text;if(c){var d=Camel.loadCamelTree(c,b.pageId);d&&(b.camelContextTree=d)}else console.log("No XML found for page "+b.pageId);Core.$applyLater(b)}function n(){b.loadEndpointNames(),b.pageId=a.pageId(d,c),console.log("Has page id: "+b.pageId+" with $routeParams "+JSON.stringify(d)),Git.getGitMBean(f)&&(b.git=g.getPage(b.branch,b.pageId,b.objectId,m))}function o(){}a.initScope(b,d,c),Camel.initEndpointChooserScope(b,c,e,f,h),b.schema=Camel.getConfiguredCamelModel(),b.modified=!1,b.findProfileCamelContext=!0,b.camelSelectionDetails={selectedCamelContextId:null,selectedRouteId:null},b.isValid=function(a){return a&&a.isValid(f)},b.camelSubLevelTabs=[{content:'<i class="icon-picture"></i> Canvas',title:"Edit the diagram in a draggy droppy way",isValid:function(){return!0},href:function(){return a.startLink(b.branch)+"/camel/canvas/"+b.pageId}},{content:'<i class=" icon-sitemap"></i> Tree',title:"View the routes as a tree",isValid:function(){return!0},href:function(){return a.startLink(b.branch)+"/camel/properties/"+b.pageId}}];var p=_apacheCamelModel.definitions.route;p._id="route",b.addDialog=new UI.Dialog,b.addDialog.options.dialogClass="modal-large",b.addDialog.options.cssClass="modal-large",b.paletteItemSearch="",b.paletteTree=new Folder("Palette"),b.paletteActivations=["Routing_aggregate"],angular.forEach(_apacheCamelModel.definitions,function(a,c){if(a.group){var d="route"===c?b.paletteTree:b.paletteTree.getOrElse(a.group);d.key||(d.key=a.group),a._id=c;var e=a.title||c,f=new Folder(e);f.key=d.key+"_"+c,f.nodeModel=a;var g=Camel.getRouteNodeIcon(a);f.icon=g;var h=a.tooltip||a.description||"";f.tooltip=h,d.children.push(f)}}),b.componentTree=new Folder("Endpoints"),b.$watch("componentNames",function(){var a=b.componentNames;a&&a.length&&(b.componentTree=new Folder("Endpoints"),angular.forEach(b.componentNames,function(a){var c=Camel.getEndpointCategory(a),d=c.label||"Core",e=c.id||d,f=b.componentTree.getOrElse(d),g=Camel.getEndpointConfig(a,c),h=a,i=g.label||a,j=new Folder(i);j.key=e+"_"+h,j.key=h,j.nodeModel=g;var k=g.tooltip||g.description||i,l=Core.url(g.icon||Camel.endpointIcon);j.icon=l,j.tooltip=k,f.children.push(j)}))}),b.componentActivations=["bean"],b.$watch("addDialog.show",function(){b.addDialog.show&&setTimeout(function(){$("#submit").focus()},50)}),b.$on("hawtio.form.modelChange",k),b.onRootTreeNode=function(a){b.rootTreeNode=a,a.data=b.camelContextTree},b.addNode=function(){b.nodeXmlNode?b.addDialog.open():j(p)},b.onPaletteSelect=function(a){b.selectedPaletteNode=a&&a.nodeModel?a:null,b.selectedPaletteNode&&(b.selectedComponentNode=null),console.log("Selected "+b.selectedPaletteNode+" : "+b.selectedComponentNode)},b.onComponentSelect=function(a){if(b.selectedComponentNode=a&&a.nodeModel?a:null,b.selectedComponentNode){b.selectedPaletteNode=null;var c=a.key;console.log("loading endpoint schema for node "+c),b.loadEndpointSchema(c),b.selectedComponentName=c}console.log("Selected "+b.selectedPaletteNode+" : "+b.selectedComponentNode)},b.selectedNodeModel=function(){var a=null;if(b.selectedPaletteNode)a=b.selectedPaletteNode.nodeModel,b.endpointConfig=null;else if(b.selectedComponentNode){var c=b.selectedComponentNode.nodeModel,d=b.endpointSchema;a=b.schema.definitions.endpoint,b.endpointConfig={key:b.selectedComponentNode.key,schema:d,details:c}}return a},b.addAndCloseDialog=function(){var a=b.selectedNodeModel();a?j(a):console.log("WARNING: no nodeModel!"),b.addDialog.close()},b.removeNode=function(){b.selectedFolder&&b.treeNode&&(b.selectedFolder.detach(),b.treeNode.remove(),b.selectedFolder=null,b.treeNode=null)},b.canDelete=function(){return b.selectedFolder?!0:!1},b.isActive=function(a){if(angular.isString(a))return f.isLinkActive(a);var b=a.isActive;return b?b(f):f.isLinkActive(a.href())},b.save=function(){if(b.rootTreeNode){var c=Camel.generateXmlFromFolder(b.rootTreeNode);if(c){var d=Core.xmlNodeToString(c);if(d){var e=b.commitMessage||"Updated page "+b.pageId;g.putPage(b.branch,b.pageId,d,e,function(c){a.onComplete(c),Core.notification("success","Saved "+b.pageId),b.modified=!1,o(),Core.$apply(b)})}}}},b.cancel=function(){console.log("cancelling...")},b.$watch("workspace.tree",function(){b.git||setTimeout(n,50)}),b.$on("$routeChangeSuccess",function(){setTimeout(n,50)}),b.onNodeSelect=function(a,c){b.selectedFolder=a,b.treeNode=c,b.propertiesTemplate=null,b.diagramTemplate=null,b.nodeXmlNode=null,a&&(b.nodeData=Camel.getRouteFolderJSON(a),b.nodeDataChangedFields={});{var d=Camel.getFolderCamelNodeId(a);i(c)}d&&(b.nodeModel=Camel.getCamelSchema(d),b.nodeModel&&(b.propertiesTemplate="app/wiki/html/camelPropertiesEdit.html"),b.diagramTemplate="app/camel/html/routes.html",Core.$apply(b))},b.onNodeDragEnter=function(a,b){var c=a.data,d=b.data;if(c&&d){var e=Camel.getFolderCamelNodeId(c),f=Camel.getFolderCamelNodeId(d);if(e&&f)return"route"===f?"route"===e:!0}return!1},b.onNodeDrop=function(a,b,c){var d=a.data,e=b.data;if(d&&e){var f=Camel.getFolderCamelNodeId(d),g=Camel.getFolderCamelNodeId(e);"route"===f?"route"===g?"over"===c&&(c="after"):c="over":Camel.acceptOutput(f)?c="over":"before"!==c&&(c="after"),console.log("nodeDrop nodeId: "+f+" sourceId: "+g+" hitMode: "+c),b.move(a,c)}},n()}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.CamelCanvasController",["$scope","$element","workspace","jolokia","wikiRepository","$templateCache","$interpolate",function(b,c,d,e,f,g,h){function i(){return!b.selectedFolder}function j(a,b,c,d){console.log("scheme "+a+" path "+c+" parameters "+d);var e=(a?a+":"+b:"")+(c?c:""),f=Core.hashToString(d);return f&&(e+="?"+f),e}function k(){}function l(a){var c=b.doc||document,d=b.selectedFolder||b.rootFolder,e=a._id;if(e){var f=b.selectedFolder;if("route"===e)f=b.rootFolder;else{if(!f){var g=b.rootFolder,h=g.children;if(h&&h.length||(l(Camel.getCamelSchema("route")),h=g.children),!h||!h.length)return void console.log("Could not add a new route to the empty tree!");f=y(b.rootFolder,b.selectedRouteId)||h[h.length-1]}var i=Camel.getFolderCamelNodeId(f);Camel.acceptOutput(i)||(f=f.parent||f)}if(f){var j=c.createElement(e);d=f;var k=Camel.addRouteChild(d,j),n={};if("endpoint"===e&&b.endpointConfig){var e=b.endpointConfig.key;e&&(n.uri=e+":")}if(k.camelNodeData=n,k.endpointConfig=b.endpointConfig,"route"===e){for(var o=b.routeIds.length,p=null;;)if(p="route"+ ++o,!b.routeIds.find(p))break;k.routeXmlNode.setAttribute("id",p),b.selectedRouteId=p}}}else console.log("WARNING: no id for model "+JSON.stringify(a));m()}function m(a){void 0===a&&(a=!0);var c=Camel.generateXmlFromFolder(b.rootFolder),d=Camel.loadCamelTree(c,b.pageId);d&&(b.rootFolder=d,b.doc=Core.pathGet(d,["xmlDocument"])),b.modified=!0,n(),b.doLayout(),Core.$apply(b)}function n(){b.routeIds=[];var a=$(b.doc);b.camelSelectionDetails.selectedCamelContextId=a.find("camelContext").attr("id"),a.find("route").each(function(a,c){var d=c.getAttribute("id");d&&b.routeIds.push(d)})}function o(){if(b.doc){if(!b.selectedRouteId&&b.routeIds&&b.routeIds.length&&(b.selectedRouteId=b.routeIds[0]),b.selectedRouteId&&b.selectedRouteId!==b.drawnRouteId){var a=[],c=[];Camel.loadRouteXmlNodes(b,b.doc,b.selectedRouteId,a,c,w()),v(b.selectedRouteId),b.folders=Camel.addFoldersToIndex(b.rootFolder),p(a,c),b.drawnRouteId=b.selectedRouteId}b.camelSelectionDetails.selectedRouteId=b.selectedRouteId}}function p(a,b){t(a,b)}function q(a){if(angular.isNumber(a)){var c=a;if(a=b.nodeStates[c],!a)return console.log("Cant find node at "+c),"node-"+c}return a.cid||"node-"+a.id}function r(){return b.selectedFolder||y(b.rootFolder,b.selectedRouteId)}function s(){var a=c,b=a.find(".canvas");return b&&b.length||(b=a),b}function t(c,d){var e=[],f=Core.createGraphStates(c,d,e);a.log.debug("links: ",d),a.log.debug("transitions: ",e),b.nodeStates=f;var g=s();return z.doWhileSuspended(function(){g.css({width:"800px",height:"800px","min-height":"800px","min-width":"800px"});var c=0,h=0;g.find("div.component").each(function(b,c){a.log.debug("Checking: ",c," ",b),f.any(function(a){return c.id===q(a)})||(a.log.debug("Removing element: ",c.id),z.remove(c))}),angular.forEach(f,function(c){a.log.debug("node: ",c);var d=q(c),e=g.find("#"+d);e[0]||(e=$(b.nodeTemplate({id:d,node:c})),e.appendTo(g)),z.makeSource(e,{filter:"img.nodeIcon",anchor:"Continuous",connector:E,connectorStyle:{strokeStyle:"#666",lineWidth:3},maxConnections:-1}),z.makeTarget(e,{dropOptions:{hoverClass:"dragHover"},anchor:"Continuous"}),z.draggable(e,{containment:".camel-canvas"}),e.click(function(){var a=!e.hasClass("selected");g.find("div.component").toggleClass("selected",!1),e.toggleClass("selected",a);var c=e.attr("id");v(a?c:null),Core.$apply(b)}),e.dblclick(function(){var a=e.attr("id");v(a),Core.$apply(b)});var f=e.height(),h=e.width();(f||h)&&(c.width=h,c.height=f,e.css({"min-width":h,"min-height":f}))});var i=10;dagre.layout().nodeSep(100).edgeSep(i).rankSep(75).nodes(f).edges(e).debugLevel(1).run(),angular.forEach(f,function(a){var b=q(a),d=$("#"+b),e=d.height(),f=d.width(),g=a.dagre.x+f,j=a.dagre.y+e;j>c&&(c=j+2*i),g>h&&(h=g+2*i),d.css({top:a.dagre.y,left:a.dagre.x})}),g.css({width:h,height:c,"min-height":c,"min-width":h}),g.dblclick(function(){b.propertiesDialog.open()}),z.setSuspendEvents(!0),z.detachEveryConnection({fireEvent:!1}),angular.forEach(d,function(a){z.connect({source:q(a.source),target:q(a.target)})}),z.setSuspendEvents(!1)}),f}function u(a){var b=a.sourceId,c=a.targetId;return{source:b,target:c}}function v(a){var c=null;if(angular.isString(a)){var d=a;c=d&&b.folders?b.folders[d]:null}else c=a;if(b.selectedFolder=c,c=r(),b.nodeXmlNode=null,b.propertiesTemplate=null,c){var e=Camel.getFolderCamelNodeId(c);if(b.nodeData=Camel.getRouteFolderJSON(c),b.nodeDataChangedFields={},b.nodeModel=Camel.getCamelSchema(e),b.nodeModel&&(b.propertiesTemplate="app/wiki/html/camelPropertiesEdit.html"),b.selectedEndpoint=null,"endpoint"===e){var f=b.nodeData.uri;if(f){var g=f.indexOf(":");if(g>0){var h=f.substring(0,g),i=f.substring(g+1);b.endpointPathHasSlashes=i?!1:!0,i.startsWith("//")&&(i=i.substring(2),b.endpointPathHasSlashes=!0),g=i.indexOf("?");var j={};if(g>0){var k=i.substring(g+1);i=i.substring(0,g),j=Core.stringToHash(k)}b.endpointScheme=h,b.endpointPath=i,b.endpointParameters=j,console.log("endpoint "+h+" path "+i+" and parameters "+JSON.stringify(j)),b.loadEndpointSchema(h),b.selectedEndpoint={endpointScheme:h,endpointPath:i,parameters:j}}}}}}function w(){var a=$(c);return a.width()}function x(a){var b=null;if(a){var c=a.routeXmlNode;c&&(b=c.getAttribute("id"))}return b}function y(a,b){var c=null;return a&&angular.forEach(a.children,function(a){if(!c){var d=x(a);b===d&&(c=a)}}),c}var z=jsPlumb.getInstance();b.addDialog=new UI.Dialog,b.propertiesDialog=new UI.Dialog,b.modified=!1,b.camelIgnoreIdForLabel=Camel.ignoreIdForLabel(localStorage),b.camelMaximumLabelWidth=Camel.maximumLabelWidth(localStorage),b.camelMaximumTraceOrDebugBodyLength=Camel.maximumTraceOrDebugBodyLength(localStorage),b.forms={},b.nodeTemplate=h(g.get("nodeTemplate")),b.$watch("camelContextTree",function(){var a=b.camelContextTree;b.rootFolder=a,b.folders=Camel.addFoldersToIndex(b.rootFolder);var c=Core.pathGet(a,["xmlDocument"]);c&&(b.doc=c,n(),o())}),b.addAndCloseDialog=function(){var a=b.selectedNodeModel();a&&l(a),b.addDialog.close()},b.removeNode=function(){var a=r();if(a){var c=Camel.getFolderCamelNodeId(a);a.detach(),"route"===c&&(b.selectedRouteId=null),v(null),m()}},b.doLayout=function(){b.drawnRouteId=null,o()},b.getDeleteTitle=function(){return i()?"Delete this route":"Delete this node"},b.getDeleteTarget=function(){return i()?"Route":"Node"},b.isFormDirty=function(){return a.log.debug("endpointForm: ",b.endpointForm),b.endpointForm.$dirty?!0:b.forms.formEditor?b.forms.formEditor.$dirty:!1},b.updateProperties=function(){a.log.info("old URI is "+b.nodeData.uri);var d=j(b.endpointScheme,b.endpointPathHasSlashes?"//":"",b.endpointPath,b.endpointParameters);a.log.info("new URI is "+d),d&&(b.nodeData.uri=d);var e=null,f=b.selectedFolder;if(f){e=f.key;{c.find(".canvas").find("[id='"+e+"']").first().remove()}}m(),e&&v(e),b.isFormDirty()&&(b.endpointForm.$setPristine(),b.forms.formEditor&&b.forms.formEditor.$setPristine()),Core.$apply(b)},b.save=function(){if(b.rootFolder){var c=Camel.generateXmlFromFolder(b.rootFolder);if(c){var d=Core.xmlNodeToString(c);if(d){var e=decodeURIComponent(d);a.log.debug("Saving xml decoded: "+e);var g=b.commitMessage||"Updated page "+b.pageId;f.putPage(b.branch,b.pageId,e,g,function(c){a.onComplete(c),Core.notification("success","Saved "+b.pageId),b.modified=!1,k(),Core.$apply(b)})}}}},b.cancel=function(){console.log("cancelling...")},b.$watch("selectedRouteId",o);var A=["Dot",{radius:4,cssClass:"camel-canvas-endpoint"}],B={strokeStyle:"red",lineWidth:3},C=["Label"],D=["Arrow",{location:1,id:"arrow",length:8,width:8,foldback:.8}],E=["StateMachine",{curviness:10,proximityLimit:50}];z.importDefaults({Endpoint:A,HoverPaintStyle:B,ConnectionOverlays:[D,C]}),b.$on("$destroy",function(){z.reset(),delete z}),z.bind("dblclick",function(a){z.isSuspendDrawing()||alert("double click on connection from "+a.sourceId+" to "+a.targetId)}),z.bind("connection",function(c){a.log.debug("Creating connection from ",c.sourceId," to ",c.targetId);var d=u(c),e=b.nodes[d.source],f=b.folders[d.source],g=b.folders[d.target];Camel.isNextSiblingAddedAsChild(e.type)?f.moveChild(g):f.parent.insertAfter(g,f),m()}),z.bind("click",function(a){z.isSuspendDrawing()||z.detach(a)})}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.CommitController",["$scope","$location","$routeParams","$templateCache","workspace","marked","fileExtensionTypeRegistry","wikiRepository","jolokia",function(b,c,d,e,f,g,h,i,j){function k(a){return a.path||a.name}function l(){var c=b.commitId;a.loadBranches(j,i,b,m),i.commitInfo(c,function(a){b.commitInfo=a,Core.$apply(b)}),i.commitTree(c,function(d){b.commits=d,angular.forEach(d,function(d){d.fileIconHtml=a.fileIconHtml(d),d.fileClass=d.name.endsWith(".profile")?"green":"";var e=d.changeType,f=k(d);f&&(d.fileLink=a.startLink(b.branch)+"/version/"+f+"/"+c),e&&(e=e.toLowerCase(),e.startsWith("a")?(d.changeClass="change-add",d.change="add",d.title="added"):e.startsWith("d")?(d.changeClass="change-delete",d.change="delete",d.title="deleted",d.fileLink=null):(d.changeClass="change-modify",d.change="modify",d.title="modified"),d.changeTypeHtml='<span class="'+d.changeClass+'">'+d.title+"</span>")}),Core.$apply(b)})}var m=Fabric.isFMCContainer(f);a.initScope(b,d,c),b.commitId=b.objectId,b.selectedItems=[],b.dateFormat="EEE, MMM d, y : hh:mm:ss a",b.gridOptions={data:"commits",showFilter:!1,multiSelect:!1,selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,displaySelectionCheckbox:!0,selectedItems:b.selectedItems,filterOptions:{filterText:""},columnDefs:[{field:"path",displayName:"File Name",cellTemplate:e.get("fileCellTemplate.html"),width:"***",cellFilter:""}]},b.$on("$routeChangeSuccess",function(){setTimeout(l,50)}),b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(f)&&setTimeout(l,50)}),b.canRevert=function(){return 1===b.selectedItems.length},b.revert=function(){if(b.selectedItems.length>0){var c=k(b.selectedItems[0]),d=b.commitId;if(c&&d){var e="Reverting file "+b.pageId+" to previous version "+d;i.revertTo(b.branch,d,b.pageId,e,function(b){a.onComplete(b),l()})}}},b.diff=function(){if(b.selectedItems.length>0){var d=b.selectedItems[0],e=a.startLink(b.branch)+"/diff/"+k(d)+"/"+b.commitId+"/",f=Core.trimLeading(e,"#");c.path(f)}},l()}])}(Wiki||(Wiki={}));var Wiki;!function(a){a.controller("CreateController",["$scope","$location","$routeParams","$route","$http","$timeout","workspace","jolokia","wikiRepository",function(b,c,d,e,f,g,h,i,j){function k(){var d=a.viewLink(b.branch,b.pageId,c);a.log.debug("Cancelling, going to link: ",d),a.goToLink(d,g,c)}function l(d,e,f,h,i){j.putPage(b.branch,d,h,i,function(h){a.log.debug("Created file "+e),a.onComplete(h),b.git=j.getPage(b.branch,f,b.objectId,function(e){var f=null;if(e&&e.children){a.log.debug("scanned the directory "+e.children.length+" children");var h=e.children.find(function(b){return b.name===a.fileName});h?f=b.childLink(h):a.log.debug("Could not find name '"+a.fileName+"' in the list of file names "+JSON.stringify(e.children.map(function(a){return a.name})))}f||(a.log.debug("WARNING: could not find the childLink so reverting to the wiki edit page!"),f=a.editLink(b.branch,d,c)),a.goToLink(f,g,c)})})}function m(){var c=b.selectedCreateDocumentTemplate;if(!c)return a.log.debug("No template selected."),null;var d=c.exemplar||"",e=b.newDocumentName||d;if(e.indexOf(".")<0){var f=d.lastIndexOf(".");f>0&&(e+=d.substring(f))}var g=b.pageId;if(b.isFile){var f=g.lastIndexOf("/");g=0>=f?"":g.substring(0,f)}var f=e.lastIndexOf("/");return f>0&&(g+="/"+e.substring(0,f),e=e.substring(f+1)),g=Core.trimLeading(g,"/"),g+(g?"/":"")+e}Fabric.isFMCContainer(h);a.initScope(b,d,c),b.createDocumentTree=a.createWizardTree(h,b),b.createDocumentTreeActivations=["camel-spring.xml","ReadMe.md"],b.fileExists={exists:!1,name:""},b.newDocumentName="",b.selectedCreateDocumentExtension=null,b.fileExists.exists=!1,b.fileExists.name="",b.newDocumentName="",b.cancel=function(){k()},b.onCreateDocumentSelect=function(c){b.fileExists.exists=!1,b.fileExists.name="";var d=c?c.entity:null;b.selectedCreateDocumentTemplate=d,b.selectedCreateDocumentTemplateRegex=b.selectedCreateDocumentTemplate.regex||/.*/,b.selectedCreateDocumentTemplateInvalid=b.selectedCreateDocumentTemplate.invalid||"invalid name",b.selectedCreateDocumentTemplateExtension=b.selectedCreateDocumentTemplate.extension||null,a.log.debug("Entity: ",d),d&&(d.generated?(b.formSchema=d.generated.schema,b.formData=d.generated.form(h,b)):(b.formSchema={},b.formData={}),Core.$apply(b))},b.addAndCloseDialog=function(d){function e(a){var b="fabric/profiles/"+a;
return b=b.replace(/-/g,"/"),b+=".profile"}function i(a){var b=a.replace(/^fabric\/profiles\//,"");return b=b.replace(/\//g,"-"),b=b.replace(/\.profile$/,"")}b.newDocumentName=d;var n=b.selectedCreateDocumentTemplate,o=m();if(b.newDocumentName=null,b.fileExists.exists=!1,b.fileExists.name="",b.fileExtensionInvalid=null,n&&o){if(b.selectedCreateDocumentTemplateExtension){var p=o.lastIndexOf(".");if(p>0){var q=o.substring(p);if(b.selectedCreateDocumentTemplateExtension!==q)return b.fileExtensionInvalid="File extension must be: "+b.selectedCreateDocumentTemplateExtension,void Core.$apply(b)}}var r=j.exists(b.branch,o,null);if(r)return b.fileExists.exists=!0,b.fileExists.name=o,void Core.$apply(b);var s=a.fileName(o),t=a.fileParent(o),u=n.exemplar,v="Created "+n.label,w=Core.url("/app/wiki/exemplar/"+u);if(n.folder)Core.notification("success","Creating new folder "+s),j.createDirectory(b.branch,o,v,function(){var d=a.viewLink(b.branch,o,c);a.goToLink(d,g,c)});else if(n.profile){t=t.replace(/\/=?(\w*)\.profile$/,"");var x=t+"/"+s,y=i(x),z=e(y),A=Fabric.getProfile(h.jolokia,b.branch,y,!1);if(A)return b.fileExists.exists=!0,b.fileExists.name=y,void Core.$apply(b);Fabric.createProfile(h.jolokia,b.branch,y,["default"],function(){Core.$apply(b),Fabric.newConfigFile(h.jolokia,b.branch,y,"ReadMe.md",function(){Core.$apply(b);var d="Here's an empty ReadMe.md for '"+y+"', please update!";Fabric.saveConfigFile(h.jolokia,b.branch,y,"ReadMe.md",d.encodeBase64(),function(){Core.$apply(b);var d=a.viewLink(b.branch,z,c);a.goToLink(d,g,c)},function(a){Core.notification("error","Failed to set ReadMe.md data in profile "+y+" due to "+a.error),Core.$apply(b)})},function(a){Core.notification("error","Failed to create ReadMe.md in profile "+y+" due to "+a.error),Core.$apply(b)})},function(a){Core.notification("error","Failed to create profile "+y+" due to "+a.error),Core.$apply(b)})}else if(n.generated){var B={workspace:h,form:b.formData,name:d,parentId:t,branch:b.branch,success:function(c){c?j.putPageBase64(b.branch,o,c,v,function(b){a.log.debug("Created file "+s),a.onComplete(b),k()}):k()},error:function(a){Core.notification("error",a),Core.$apply(b)}};n.generated.generate(B)}else f.get(w).success(function(a){l(o,s,t,a,v)}).error(function(){l(o,s,t,"",v)})}}}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.DozerMappingsController",["$scope","$location","$routeParams","workspace","jolokia","wikiRepository","$templateCache",function(b,c,d,e,f,g,h){function i(a,b){return a&&a.properties?a.properties.find(function(a){return a.path.endsWith("/"+b)}):null}function j(a,b){a.bind("click",function(a){b.detach(a)})}function k(){return{strokeStyle:UI.colors.sample(),lineWidth:4}}function l(a,b){var c=Dozer.findProperties(e,a,b,null);return c.map(function(a){return a.name})}function m(){b.pageId=a.pageId(d,c),Git.getGitMBean(e)&&(b.git=g.getPage(b.branch,b.pageId,b.objectId,n))}function n(a){var c=a.text;c?b.responseText!==c&&(b.responseText=c,b.model=Dozer.loadDozerModel(c,b.pageId),b.mappings=Core.pathGet(b.model,["mappings"]),b.mappingTree=Dozer.createDozerTree(b.model),angular.isDefined(b.selectedMapping)||(b.selectedMapping=b.mappings.first()),b.main=h.get("pageTemplate.html")):q.warn("No XML found for page "+b.pageId),Core.$apply(b)}function o(){b.modified=!0}function p(){}var q=Logger.get("Dozer");a.initScope(b,d,c),Dozer.schemaConfigure(),b.profileId=Fabric.pagePathToProfileId(b.pageId),b.versionId=b.branch||"1.0",b.schema={},b.addDialog=new UI.Dialog,b.propertiesDialog=new UI.Dialog,b.deleteDialog=!1,b.unmappedFieldsHasValid=!1,b.modified=!1,b.selectedItems=[],b.mappings=[],b.schemas=[],b.aName="",b.bName="",b.connectorStyle=["Bezier"],b.main="",b.tab="Mappings",b.gridOptions={selectedItems:b.selectedItems,data:"mappings",displayFooter:!1,showFilter:!1,filterOptions:{filterText:"searchText"},columnDefs:[{field:"class_a",displayName:"From",cellTemplate:'<div class="ngCellText">{{row.entity.class_a.name}}</div>'},{field:"class_b",displayName:"To",cellTemplate:'<div class="ngCellText">{{row.entity.class_b.name}}</div>'}]},b.profileId&&Fabric.profileJolokia(f,b.profileId,b.versionId,function(a){b.containerJolokia=a,b.missingContainer=a?!1:!0}),b.$on("$routeChangeSuccess",function(){setTimeout(m,50)}),b.triggerRefresh=function(a){void 0===a&&(a=500),b.main="",setTimeout(function(){b.main=h.get("pageTemplate.html"),Core.$apply(b)},a)},b.disableReload=function(){var a=Core.pathGet(b,["selectedMapping","class_a","value"]),c=Core.pathGet(b,["selectedMapping","class_b","value"]);return a===b.aName&&c===b.bName},b.doReload=function(){b.selectedMapping.class_a.value=b.aName,b.selectedMapping.class_b.value=b.bName,b.triggerRefresh()},b.$watch("selectedMapping",function(a,c){a!==c&&(b.aName=a.class_a.value,b.bName=a.class_b.value,b.triggerRefresh())}),b.$watch("selectedMapping.class_a.value",function(a,c){a!==c&&""!==a&&b.fetchProperties(a,b.selectedMapping.class_a,"Right")}),b.$watch("selectedMapping.class_b.value",function(a,c){a!==c&&""!==a&&b.fetchProperties(a,b.selectedMapping.class_b,"Left")}),b.fetchProperties=function(a,c,d){var g=Dozer.getIntrospectorMBean(e);if(g&&!b.missingContainer){var h=b.containerJolokia||f;h.request({type:"exec",mbean:g,operation:"getProperties(java.lang.String)",arguments:[a]},{success:function(a){c.error=null,c.properties=a.value;var e="";e=angular.isDefined(c.value)?c.value:c.path,angular.forEach(c.properties,function(a){a.id=Core.getUUID(),a.path=e+"/"+a.displayName,a.anchor=d}),Core.$apply(b)},error:function(a){c.properties=null,c.error={type:a.error_type,stackTrace:a.error},q.error("got: "+a),Core.$apply(b)}})}},b.getSourceAndTarget=function(a){var b=a.source.attr("field-path"),c=(a.target.attr("field-path"),b.split("/").last()),d=b.split("/").last();return{from:c,to:d}},b.jsPlumbCallback=function(a,c,d){angular.forEach(b.selectedMapping.fields,function(c){var e=i(b.selectedMapping.class_a,c.a.value),f=i(b.selectedMapping.class_b,c.b.value);if(e&&f){var g=d[e.id],h=d[f.id],l=b.jsPlumb.connect({source:g.el,target:h.el},{connector:b.connectorStyle,maxConnections:1,paintStyle:k()});j(l,a),g.connections.push(l),h.connections.push(l)}}),a.bind("connection",function(c){j(c.connection,a),c.connection.setPaintStyle(k());var d=b.getSourceAndTarget(c),e=new Dozer.Field(new Dozer.FieldDefinition(d.from),new Dozer.FieldDefinition(d.to));b.selectedMapping.fields.push(e),b.modified=!0,Core.$apply(b)}),a.bind("connectionDetached",function(a){var c=b.getSourceAndTarget(a),d=new Dozer.Field(new Dozer.FieldDefinition(c.from),new Dozer.FieldDefinition(c.to));b.selectedMapping.fields.remove(d),b.modified=!0,Core.$apply(b)})},b.formatStackTrace=function(a){return Log.formatStackTrace(a)},b.addMapping=function(){var a=b.rootTreeNode;if(a){var c=a.data,d=new Dozer.Mapping,e=Dozer.createMappingFolder(d,c),f=a.addChild(e);f&&(f.expand(!0),f.select(!0),f.activate(!0),o()),b.mappings.push(d),b.selectedMapping=d}},b.addField=function(){b.selectedMapping&&Dozer.findUnmappedFields(e,b.selectedMapping,function(a){q.warn("has unmapped data fields: "+a),b.unmappedFields=a,b.unmappedFieldsHasValid=!1,b.addDialog.open(),Core.$apply(b)})},b.addAndCloseDialog=function(){q.info("About to add the unmapped fields "+JSON.stringify(b.unmappedFields,null,"  ")),b.selectedMapping&&angular.forEach(b.unmappedFields,function(a){if(a.valid){var c=new Dozer.Field(new Dozer.FieldDefinition(a.fromField),new Dozer.FieldDefinition(a.toField));b.selectedMapping.fields.push(c);var d=b.selectedMappingTreeNode,e=b.selectedMappingFolder;if(d&&e){var f=Dozer.addMappingFieldFolder(c,e),g=d.addChild(f);g&&(g.expand(!0),g.select(!0),g.activate(!0),o())}else q.warn("No treenode and folder for mapping node! treeNode "+d+" mappingFolder "+e)}}),b.addDialog.close()},b.canDelete=function(){return b.selectedFolder?!0:!1},b.removeNode=function(){if(b.selectedFolder&&b.treeNode){var a=b.selectedFolder,c=a.entity;if(c instanceof Dozer.Field){var d=Core.pathGet(a,["parent","entity"]);d&&d.fields.remove(c)}b.selectedFolder.detach(),b.treeNode.remove(),b.selectedFolder=null,b.treeNode=null,o()}},b.saveMappings=function(){b.model.mappings=b.mappings;var c=Dozer.saveToXmlText(b.model);if(c){var d=b.commitMessage||"Updated page "+b.pageId;g.putPage(b.branch,b.pageId,c,d,function(c){a.onComplete(c),b.modified=!1,Core.notification("success","Saved "+b.pageId),p(),Core.$apply(b)})}},b.save=function(){if("Mappings"===b.tab)return void b.saveMappings();if(b.model){var c=Dozer.loadModelFromTree(b.rootTreeNode,b.model),d=Dozer.saveToXmlText(c);if(d){var e=b.commitMessage||"Updated page "+b.pageId;g.putPage(b.branch,b.pageId,d,e,function(c){a.onComplete(c),b.modified=!1,Core.notification("success","Saved "+b.pageId),p(),Core.$apply(b)})}}},b.cancel=function(){q.info("cancelling...")},b.onRootTreeNode=function(a){b.rootTreeNode=a},b.onNodeSelect=function(a,c){if(b.selectedFolder=a,b.treeNode=c,b.propertiesTemplate=null,b.dozerEntity=null,b.selectedDescription="",b.selectedMapping=null,b.selectedMappingTreeNode=null,b.selectedMappingFolder=null,b.removeModelChangeListener&&(b.removeModelChangeListener(),b.removeModelChangeListener=null),a){var d=a.entity;b.dozerEntity=d;var e="app/wiki/html/dozerPropertiesEdit.html";d instanceof Dozer.Field?(b.propertiesTemplate=e,b.nodeModel=io_hawt_dozer_schema_Field,b.selectedDescription="Field Mapping",b.selectedMapping=Core.pathGet(a,["parent","entity"]),b.selectedMappingFolder=a.parent,b.selectedMappingTreeNode=c.parent):d instanceof Dozer.Mapping&&(b.propertiesTemplate=e,b.nodeModel=io_hawt_dozer_schema_Mapping,b.selectedDescription="Class Mapping",b.selectedMapping=d,b.selectedMappingFolder=a,b.selectedMappingTreeNode=c),b.selectedMapping&&!b.removeModelChangeListener}Core.$apply(b)},b.onUnmappedFieldChange=function(a){a.valid=a.toField?!0:!1,b.unmappedFieldsHasValid=b.unmappedFields.find(function(a){return a.valid})},b.fromFieldNames=function(a){var c=Core.pathGet(b.selectedMapping,["class_a","value"]);return l(c,a)},b.toFieldNames=function(a){var c=Core.pathGet(b.selectedMapping,["class_b","value"]);return l(c,a)},b.classNames=function(a){return!a||a.length<2?[]:Core.time("Time the query of classes",function(){q.info("searching for class names with filter '"+a+"'");var b=Dozer.findClassNames(e,a);return q.info("Found results: "+b.length),b})},m()}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.EditController",["$scope","$location","$routeParams","fileExtensionTypeRegistry","wikiRepository",function(b,c,d,e,f){function g(){return c.path().startsWith("/wiki/create")}function h(){g()?j():(a.log.debug("Getting page, branch: ",b.branch," pageId: ",b.pageId," objectId: ",b.objectId),f.getPage(b.branch,b.pageId,b.objectId,i))}function i(c){var d=c.text;b.entity.source=d,b.fileName=b.pageId.split("/").last(),a.log.debug("file name: ",b.fileName),a.log.debug("file details: ",c),j(),Core.$apply(b)}function j(){o?(g()&&(b.fileName||(b.fileName=""+Core.getUUID()+".json")),b.sourceView=null,"/"===o?k(_jsonSchema):b.git=f.getPage(b.branch,o,b.objectId,function(b){k(a.parseJson(b.text))})):b.sourceView="app/wiki/html/sourceEdit.html"}function k(c){b.formDefinition=c,b.entity.source&&(b.formEntity=a.parseJson(b.entity.source)),b.sourceView="app/wiki/html/formEdit.html",Core.$apply(b)}function l(){var d=Core.trimLeading(b.viewLink(),"#");a.log.debug("going to view "+d),c.path(a.decodePath(d)),a.log.debug("location is now "+c.path())}function m(c){var d=b.commitMessage||"Updated page "+b.pageId,e=b.entity.source;b.formEntity&&(e=JSON.stringify(b.formEntity,null,"  ")),a.log.debug("Saving file, branch: ",b.branch," path: ",b.path),f.putPage(b.branch,c,e,d,function(d){a.onComplete(d),b.modified=!1,Core.notification("success","Saved "+c),l(),Core.$apply(b)})}a.initScope(b,d,c),b.entity={source:null};var n=a.fileFormat(b.pageId,e),o=null;(n&&"javascript"===n||g())&&(o=c.search().form);var p={mode:{name:n}};b.codeMirrorOptions=CodeEditor.createEditorSettings(p),b.modified=!1,b.isValid=function(){return b.fileName},b.canSave=function(){return!b.modified},b.$watch("entity.source",function(a,c){b.modified=a&&c&&a!==c},!0),a.log.debug("path: ",b.path),b.$watch("modified",function(b){a.log.debug("modified: ",b)}),b.viewLink=function(){return a.viewLink(b.branch,b.pageId,c,b.fileName)},b.cancel=function(){l()},b.save=function(){b.modified&&b.fileName&&m(b.pageId)},b.create=function(){var a=b.pageId+"/"+b.fileName;console.log("creating new file at "+a),m(a)},b.onSubmit=function(){g()?b.create():b.save()},b.onCancel=function(){setTimeout(function(){l(),Core.$apply(b)},50)},h()}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.FormTableController",["$scope","$location","$routeParams","workspace","wikiRepository",function(b,c,d,e,f){function g(d,e){var f=a.startLink(b.branch),g=d?d._id||"":"";return Core.createHref(c,f+e+"/"+b.pageId+"/"+g)}function h(c){var d=[],e=a.parseJson(c);angular.forEach(e,function(a,b){a._id=b,d.push(a)}),b.list=d,Core.$apply(b)}function i(){var a=Core.pathGet(b,["gridOptions","filterOptions","filterText"])||"";b.git=f.jsonChildContents(b.pageId,"*.json",a,h)}function j(c){var d=c.text;if(d){b.formDefinition=a.parseJson(d);var e=[],f=b.formDefinition;angular.forEach(f.properties,function(a,b){if(b&&!Forms.isArrayOrNestedObject(a,f)){var c={field:b,displayName:a.description||b,visible:!0};e.push(c)}}),e.push(k),b.columnDefs=e,b.gridOptions.columnDefs=e,b.tableView="app/wiki/html/formTableDatatable.html"}}a.initScope(b,d,c),b.columnDefs=[],b.gridOptions={data:"list",displayFooter:!1,showFilter:!1,filterOptions:{filterText:""},columnDefs:b.columnDefs},b.viewLink=function(a){return g(a,"/view")},b.editLink=function(a){return g(a,"/edit")};var k={field:"_id",displayName:"Actions",cellTemplate:'<div class="ngCellText""><a ng-href="{{viewLink(row.entity)}}" class="btn">View</a> <a ng-href="{{editLink(row.entity)}}" class="btn">Edit</a></div>'};b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(e)&&setTimeout(i,50)}),b.$on("$routeChangeSuccess",function(){setTimeout(i,50)});var l=c.search().form;l&&f.getPage(b.branch,l,b.objectId,j),i(),Core.$apply(b)}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.GitPreferences",["$scope","localStorage","userDetails",function(a,b,c){Core.initPreferenceScope(a,b,{gitUserName:{value:c.username},gitUserEmail:{value:""}})}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.HistoryController",["$scope","$location","$routeParams","$templateCache","workspace","marked","fileExtensionTypeRegistry","wikiRepository","jolokia",function(b,c,d,e,f,g,h,i,j){function k(){var c="",d=0;b.git=i.history(b.branch,c,b.pageId,d,function(c){angular.forEach(c,function(c){var d=c.commitHashText||c.name;c.commitLink=a.startLink(b.branch)+"/commit/"+b.pageId+"/"+d}),b.logs=c,Core.$apply(b)}),a.loadBranches(j,i,b,l)}var l=Fabric.isFMCContainer(f);a.initScope(b,d,c),b.dateFormat="EEE, MMM d, y : hh:mm:ss a",b.gridOptions={data:"logs",showFilter:!1,selectedItems:[],showSelectionCheckbox:!0,displaySelectionCheckbox:!0,filterOptions:{filterText:""},columnDefs:[{field:"commitHashText",displayName:"Change",cellTemplate:e.get("changeCellTemplate.html"),cellFilter:"",width:"*"},{field:"date",displayName:"Modified",cellFilter:"date: dateFormat",width:"**"},{field:"author",displayName:"Author",cellFilter:"",width:"**"},{field:"shortMessage",displayName:"Message",cellTemplate:'<div class="ngCellText" title="{{row.entity.shortMessage}}">{{row.entity.trimmedMessage}}</div>',cellFilter:"",width:"****"}]},b.$on("$routeChangeSuccess",function(){setTimeout(k,50)}),b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(f)&&setTimeout(k,50)}),b.canRevert=function(){return 1===b.gridOptions.selectedItems.length&&b.gridOptions.selectedItems[0]!==b.logs[0]},b.revert=function(){if(b.gridOptions.selectedItems.length>0){var c=b.gridOptions.selectedItems[0].name;if(c){var d="Reverting file "+b.pageId+" to previous version "+c;i.revertTo(b.branch,c,b.pageId,d,function(c){a.onComplete(c),Core.notification("success","Successfully reverted "+b.pageId),k()})}b.gridOptions.selectedItems.splice(0,b.gridOptions.selectedItems.length)}},b.diff=function(){var d=" ",e=d;b.gridOptions.selectedItems.length>0&&(e=b.gridOptions.selectedItems[0].name||d);var f=d;if(b.gridOptions.selectedItems.length>1&&(f=b.gridOptions.selectedItems[1].name||d,b.gridOptions.selectedItems[0].date<b.gridOptions.selectedItems[1].date)){var g=f;f=e,e=g}var h=a.startLink(b.branch)+"/diff/"+b.pageId+"/"+e+"/"+f,i=Core.trimLeading(h,"#");c.path(i)},k()}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.NavBarController",["$scope","$location","$routeParams","workspace","jolokia","wikiRepository","wikiBranchMenu",function(b,c,d,e,f,g,h){function i(a,b){var c=a.href;c&&(a.href=c.replace("wiki/view",b))}function j(){var e=a.startLink(b.branch),f=e+"/view";b.breadcrumbs=[{href:f,name:"root"}];var g=a.pageId(d,c),h=g?g.split("/"):[];angular.forEach(h,function(c){c.startsWith("/")||f.endsWith("/")||(f+="/"),f+=a.encodePath(c),c.isBlank()||b.breadcrumbs.push({href:f,name:c})});var j=c.path();if(b.breadcrumbs.length){var k=b.breadcrumbs[b.breadcrumbs.length-1];k.name=a.hideFileNameExtensions(k.name);var l=!1;if(angular.forEach(a.customViewLinks(b),function(a){!l&&j.startsWith(a)&&(i(b.breadcrumbs.last(),Core.trimLeading(a,"/")),l=!0)}),!l&&c.search().form){var m=b.breadcrumbs.last().name;m&&m.endsWith(".json")&&i(b.breadcrumbs[b.breadcrumbs.length-2],"wiki/formTable")}}var n=null;if(j.startsWith("/wiki/version")&&(n=(d.objectId||"").substring(0,6)||"Version",b.breadcrumbs.push({href:"#"+j,name:n})),j.startsWith("/wiki/diff")){var o=(d.objectId||"").substring(0,6),p=(d.baseObjectId||"").substring(0,6);n="Diff",o&&(n+=p?" "+o+" "+p:" "+o),b.breadcrumbs.push({href:"#"+j,name:n})}Core.$apply(b)}var k=Fabric.isFMCContainer(e);a.initScope(b,d,c),b.branchMenuConfig={title:b.branch,items:[]},b.ViewMode=a.ViewMode,b.setViewMode=function(a){b.$emit("Wiki.SetViewMode",a)},h.applyMenuExtensions(b.branchMenuConfig.items),b.$watch("branches",function(d,e){d!==e&&d&&(b.branchMenuConfig.items=[],d.length>0&&b.branchMenuConfig.items.push({heading:k?"Versions":"Branches"}),d.sort().forEach(function(d){var e={title:d,icon:"",action:function(){}};d===b.branch?e.icon="icon-ok":e.action=function(){var e=a.branchLink(d,b.pageId,c);c.path(Core.toPath(e)),Core.$apply(b)},b.branchMenuConfig.items.push(e)}),h.applyMenuExtensions(b.branchMenuConfig.items))},!0),b.createLink=function(){var e=a.pageId(d,c);return a.createLink(b.branch,e,c,b)},b.startLink=a.startLink(b.branch),b.sourceLink=function(){var d=c.path(),e=null;return angular.forEach(a.customViewLinks(b),function(f){d.startsWith(f)&&(e=Core.createHref(c,a.startLink(b.branch)+"/view"+d.substring(f.length)))}),!e&&c.search().form?Core.createHref(c,"#"+d,["form"]):e},b.isActive=function(a){return a?a.endsWith(d.page):!1},b.$on("$routeChangeSuccess",function(){setTimeout(j,50)}),j()}])}(Wiki||(Wiki={}));var Wiki;!function(a){function b(a,b){return a.dialog({resolve:b,templateUrl:"app/wiki/html/modal/renameDialog.html",controller:["$scope","dialog","callbacks","rename","fileExists","fileName",function(a,b,c,d,e,f){a.rename=d,a.fileExists=e,a.fileName=f,a.close=function(){b.close()},a.renameAndCloseDialog=c}]})}function c(a,b){return a.dialog({resolve:b,templateUrl:"app/wiki/html/modal/moveDialog.html",controller:["$scope","dialog","callbacks","move","folderNames",function(a,b,c,d,e){a.move=d,a.folderNames=e,a.close=function(){b.close()},a.moveAndCloseDialog=c}]})}function d(a,b){return a.dialog({resolve:b,templateUrl:"app/wiki/html/modal/deleteDialog.html",controller:["$scope","dialog","callbacks","selectedFileHtml","warning",function(a,b,c,d,e){a.selectedFileHtml=d,a.close=function(){b.close()},a.deleteAndCloseDialog=c,a.warning=e}]})}a.getRenameDialog=b,a.getMoveDialog=c,a.getDeleteDialog=d}(Wiki||(Wiki={}));var Wiki;!function(a){a.FileDropController=a._module.controller("Wiki.FileDropController",["$scope","FileUploader","$route","$timeout","userDetails",function(b,c,d,e,f){var g=a.gitRestURL(b.branch,b.pageId)+"/",h=b.uploader=new c({headers:{Authorization:Core.authHeaderValue(f)},autoUpload:!0,withCredentials:!0,method:"POST",url:g});b.doUpload=function(){h.uploadAll()},h.onWhenAddingFileFailed=function(b,c,d){a.log.debug("onWhenAddingFileFailed",b,c,d)},h.onAfterAddingFile=function(b){a.log.debug("onAfterAddingFile",b)},h.onAfterAddingAll=function(b){a.log.debug("onAfterAddingAll",b)},h.onBeforeUploadItem=function(b){b.fileSizeMB="file"in b?(b.file.size/1024/1024).toFixed(2):0,b.url=g,a.log.info("Loading files to "+g),a.log.debug("onBeforeUploadItem",b)},h.onProgressItem=function(b,c){a.log.debug("onProgressItem",b,c)},h.onProgressAll=function(b){a.log.debug("onProgressAll",b)},h.onSuccessItem=function(b,c,d,e){a.log.debug("onSuccessItem",b,c,d,e)},h.onErrorItem=function(b,c,d,e){a.log.debug("onErrorItem",b,c,d,e)},h.onCancelItem=function(b,c,d,e){a.log.debug("onCancelItem",b,c,d,e)},h.onCompleteItem=function(b,c,d,e){a.log.debug("onCompleteItem",b,c,d,e)},h.onCompleteAll=function(){a.log.debug("onCompleteAll"),h.clearQueue(),e(function(){a.log.info("Completed all uploads. Lets force a reload"),d.reload(),Core.$apply(b)},200)}}]),a.ViewController=a._module.controller("Wiki.ViewController",["$scope","$location","$routeParams","$route","$http","$timeout","workspace","marked","fileExtensionTypeRegistry","wikiRepository","$compile","$templateCache","jolokia","localStorage","$interpolate","$dialog",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){var a=c.path();return a&&(a.startsWith("/wiki/diff")||a.startsWith("/wiki/branch/"+b.branch+"/diff"))}function s(){if(r()){var c=d.baseObjectId;b.git=k.diff(b.objectId,c,b.pageId,v)}else b.git=k.getPage(b.branch,b.pageId,b.objectId,v);a.loadBranches(n,k,b,y)}function t(d,e){b.sourceView=null;var f=null;switch(f=r()?"diff":a.fileFormat(d,j)||b.format,a.log.debug("File format: ",f),f){case"image":var g="git/"+b.branch;a.log.debug("$scope: ",b),g=UrlHelpers.join(g,b.pageId);var h=p(m.get("imageTemplate.html"));b.html=h({imageURL:g});break;case"markdown":b.html=e?i(e):"";break;case"javascript":var l=null;l=c.search().form,b.source=e,b.form=l,l?(b.sourceView=null,"/"===l?u(_jsonSchema):b.git=k.getPage(b.branch,l,b.objectId,function(b){u(a.parseJson(b.text))})):b.sourceView="app/wiki/html/sourceView.html";break;default:b.html=null,b.source=e,b.sourceView="app/wiki/html/sourceView.html"}Core.$apply(b)}function u(c){b.formDefinition=c,b.source&&(b.formEntity=a.parseJson(b.source)),b.sourceView="app/wiki/html/formView.html",Core.$apply(b)}function v(c){var d=c.text;if(b.directory=c.directory,b.fileDetails=c,b.format=c&&c.format?c.format:a.fileFormat(b.pageId,j),b.codeMirrorOptions.mode.name=b.format,b.children=null,c.directory){var e=c.children.filter(function(a){return a.directory&&!a.name.has(".profile")}),f=c.children.filter(function(a){return a.directory&&a.name.has(".profile")}),g=c.children.filter(function(a){return!a.directory});e=e.sortBy(function(a){return a.name}),f=f.sortBy(function(a){return a.name}),g=g.sortBy(function(a){return a.name}).sortBy(function(a){return a.name.split(".").last()}),b.children=Array.create(e,f,g).map(function(c){return c.branch=b.branch,c.fileName=c.name,c.directory&&(c.fileName+=".zip"),c.downloadURL=a.gitRestURL(b.branch,c.path),c})}if(b.html=null,b.source=null,b.readMePath=null,b.isFile=!1,b.children){b.$broadcast("pane.open");var h=b.children.find(function(b){var c=(b.name||"").toLowerCase(),d=a.fileExtension(c);return c&&d&&(c.startsWith("readme.")||"readme"===c||c.startsWith("index.")||"index"===c)});if(h){var i=h.path;b.readMePath=i,k.getPage(b.branch,i,b.objectId,function(a){t(i,a.text)})}var l=b.children.find(function(b){var c=(b.name||"").toLowerCase(),d=a.fileExtension(c);return c&&d&&c.startsWith("kubernetes")&&"json"===d});l&&k.getPage(b.branch,l.path,void 0,function(a){if(a&&a.text){try{b.kubernetesJson=angular.fromJson(a.text)}catch(c){b.kubernetesJson={errorParsing:!0,error:c}}b.showAppHeader=!0,Core.$apply(b)}}),b.$broadcast("Wiki.ViewPage.Children",b.pageId,b.children)}else{b.$broadcast("pane.close");var i=b.pageId;t(i,d),b.isFile=!0}Core.$apply(b)}function w(c){b.operationCounter+=1;var d=b.operationCounter;c&&k.exists(b.branch,c,function(e){b.operationCounter===d&&(a.log.debug("checkFileExists for path "+c+" got result "+e),b.fileExists.exists=e?!0:!1,b.fileExists.name=e?e.name:null,Core.$apply(b))})}function x(){var a=b.rename.newFileName;return b.pageId&&a?b.pageId+"/"+a:null}b.name="WikiViewController";var y=Fabric.isFMCContainer(h);a.initScope(b,d,c),SelectionHelpers.decorate(b),b.fabricTopLevel="fabric/profiles/",b.versionId=b.branch,b.paneTemplate="",b.profileId=Fabric.pagePathToProfileId(b.pageId),b.showProfileHeader=b.profileId&&b.pageId.endsWith(Fabric.profileSuffix)?!0:!1,b.showAppHeader=!1,b.operationCounter=1,b.renameDialog=null,b.moveDialog=null,b.deleteDialog=null,b.isFile=!1,b.rename={newFileName:""},b.move={moveFolder:""},b.ViewMode=a.ViewMode,Core.bindModelToSearchParam(b,c,"searchText","q",""),StorageHelpers.bindModelToLocalStorage({$scope:b,$location:c,localStorage:o,modelName:"mode",paramName:"wikiViewMode",initialValue:0,to:Core.numberToString,from:Core.parseIntValue}),Core.reloadWhenParametersChange(e,b,c,["wikiViewMode"]),b.gridOptions={data:"children",displayFooter:!1,selectedItems:[],showSelectionCheckbox:!0,enableSorting:!1,useExternalSorting:!0,columnDefs:[{field:"name",displayName:"Name",cellTemplate:m.get("fileCellTemplate.html"),headerCellTemplate:m.get("fileColumnTemplate.html")}]},b.$on("Wiki.SetViewMode",function(c,d){switch(b.mode=d,d){case 0:a.log.debug("List view mode");break;case 1:a.log.debug("Icon view mode");break;default:b.mode=0,a.log.debug("Defaulting to list view mode")}}),b.childActions=[];var z=Core.throttled(s,1e3);b.marked=function(a){return a?i(a):""},b.$on("wikiBranchesUpdated",function(){s()}),b.createDashboardLink=function(){var a="/wiki/branch/:branch/view/*page",b=d.page,c=b?b.split("/").last():null,e=angular.toJson({size_x:2,size_y:2}),f="#/dashboard/add?tab=dashboard&href="+encodeURIComponent(a)+"&size="+encodeURIComponent(e)+"&routeParams="+encodeURIComponent(angular.toJson(d));return c&&(f+="&title="+encodeURIComponent(c)),f},b.displayClass=function(){return b.children&&0!==b.children.length?"span9":""},b.parentLink=function(){var d=a.startLink(b.branch),e=d+"/view",f=b.pageId.split("/"),g="/"+f.first(f.length-1).join("/");return Core.createHref(c,e+g,[])},b.childLink=function(d){var e=a.startLink(b.branch),f=e+"/view",g="",h=a.encodePath(d.path);if(d.directory){var i=h+".form",j=b.children;if(j){var k=j.find(function(a){return a.path===i});k&&(f=e+"/formTable",g="?form="+i)}}else{var l=d.xmlNamespaces;l&&l.length&&(l.any(function(b){return a.camelNamespaces.any(b)})?f=e+"/camel/canvas":l.any(function(b){return a.dozerNamespaces.any(b)})?f=e+"/dozer/mappings":a.log.debug("child "+h+" has namespaces "+l)),d.path.endsWith(".form")?g="?form=/":a.isIndexPage(d.path)&&(f=e+"/book")}return Core.createHref(c,f+h+g,["form"])},b.fileName=function(b){return a.hideFileNameExtensions(b.displayName||b.name)},b.fileClass=function(a){return a.name.has(".profile")?"green":""},b.fileIconHtml=function(b){return a.fileIconHtml(b)},b.format=a.fileFormat(b.pageId,j);var A={readOnly:!0,mode:{name:b.format}};b.codeMirrorOptions=CodeEditor.createEditorSettings(A),b.editLink=function(){var d=b.directory?b.readMePath:b.pageId;return d?a.editLink(b.branch,d,c):null},b.branchLink=function(d){return d?a.branchLink(d,b.pageId,c):null},b.historyLink="#/wiki"+(b.branch?"/branch/"+b.branch:"")+"/history/"+b.pageId,b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(h)&&setTimeout(z,50)}),b.$on("$routeChangeSuccess",function(){setTimeout(z,50)}),b.openDeleteDialog=function(){b.gridOptions.selectedItems.length?(b.selectedFileHtml="<ul>"+b.gridOptions.selectedItems.map(function(a){return"<li>"+a.name+"</li>"}).sort().join("")+"</ul>",b.deleteWarning=b.gridOptions.selectedItems.find(function(a){return a.name.endsWith(".profile")})?"You are about to delete document(s) which represent Fabric8 profile(s). This really can't be undone! Wiki operations are low level and may lead to non-functional state of Fabric.":null,b.deleteDialog=a.getDeleteDialog(q,{callbacks:function(){return b.deleteAndCloseDialog},selectedFileHtml:function(){return b.selectedFileHtml},warning:function(){return b.deleteWarning}}),b.deleteDialog.open()):a.log.debug("No items selected right now! "+b.gridOptions.selectedItems)},b.deleteAndCloseDialog=function(){var c=b.gridOptions.selectedItems,d=c.length;a.log.debug("Deleting selection: "+c),angular.forEach(c,function(c,e){var f=b.pageId+"/"+c.name;a.log.debug("About to delete "+f),b.git=k.removePage(b.branch,f,null,function(){if(e+1===d){b.gridOptions.selectedItems.splice(0,d);var a=Core.maybePlural(d,"document");Core.notification("success","Deleted "+a),Core.$apply(b),s()}})}),b.deleteDialog.close()},b.$watch("rename.newFileName",function(){var a=x();b.originalRenameFilePath===a?b.fileExists={exists:!1,name:null}:w(a)}),b.renameAndCloseDialog=function(){if(b.gridOptions.selectedItems.length){var c=b.gridOptions.selectedItems[0],d=x();if(c&&d){var e=c.name,f=a.fileName(d),g=b.pageId+"/"+e;a.log.debug("About to rename file "+g+" to "+d),b.git=k.rename(b.branch,g,d,null,function(){Core.notification("success","Renamed file to  "+f),b.gridOptions.selectedItems.splice(0,1),b.renameDialog.close(),Core.$apply(b),s()})}}b.renameDialog.close()},b.openRenameDialog=function(){var c=null;if(b.gridOptions.selectedItems.length){var d=b.gridOptions.selectedItems[0];c=d.name}c?(b.rename.newFileName=c,b.originalRenameFilePath=x(),b.renameDialog=a.getRenameDialog(q,{rename:function(){return b.rename},fileExists:function(){return b.fileExists},fileName:function(){return b.fileName},callbacks:function(){return b.renameAndCloseDialog}}),b.renameDialog.open(),g(function(){$("#renameFileName").focus()},50)):a.log.debug("No items selected right now! "+b.gridOptions.selectedItems)},b.moveAndCloseDialog=function(){var c=b.gridOptions.selectedItems,d=c.length,e=b.move.moveFolder,f=b.pageId;e&&d&&e!==f&&(a.log.debug("Moving "+d+" file(s) to "+e),angular.forEach(c,function(c,g){var h=f+"/"+c.name,i=e+"/"+c.name;a.log.debug("About to move "+h+" to "+i),b.git=k.rename(b.branch,h,i,null,function(){if(g+1===d){b.gridOptions.selectedItems.splice(0,d);var a=Core.maybePlural(d,"document");Core.notification("success","Moved "+a+" to "+i),b.moveDialog.close(),Core.$apply(b),s()}})})),b.moveDialog.close()},b.folderNames=function(a){return k.completePath(b.branch,a,!0,null)},b.openMoveDialog=function(){b.gridOptions.selectedItems.length?(b.move.moveFolder=b.pageId,b.moveDialog=a.getMoveDialog(q,{move:function(){return b.move},folderNames:function(){return b.folderNames},callbacks:function(){return b.moveAndCloseDialog}}),b.moveDialog.open(),g(function(){$("#moveFolder").focus()},50)):a.log.debug("No items selected right now! "+b.gridOptions.selectedItems)},setTimeout(z,50),b.updateView=s,b.getContents=function(c,d){var e=c;if(b.directory)e=b.pageId+"/"+c;else{var f=b.pageId.split("/");f=f.remove(f.last()),f.push(c),e=f.join("/")}a.log.debug("pageId: ",b.pageId),a.log.debug("branch: ",b.branch),a.log.debug("filename: ",c),a.log.debug("using pageId: ",e),k.getPage(b.branch,e,void 0,function(a){d(a.text)})}}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.directive("wikiHrefAdjuster",["$location",function(b){return{restrict:"A",link:function(c,d){d.bind("DOMNodeInserted",function(){var e=d.find("a");angular.forEach(e,function(d){if(!d.hasAttribute("no-adjust")){d=$(d);var e=(d.attr("href")||"").trim();if(e){var f=d.attr("file-extension"),g=a.adjustHref(c,b,e,f);g&&d.attr("href",g)}}});var f=d.find("img");angular.forEach(f,function(a){if(!a.hasAttribute("no-adjust")){a=$(a);var b=(a.attr("src")||"").trim();b&&b.startsWith("/")&&(b=Core.url(b),a.attr("src",b),a.attr("no-adjust","true"))
}})})}}}]),a._module.directive("wikiTitleLinker",["$location",function(a){return{restrict:"A",link:function(b,c){function d(a){if(a){var b=a.offset();if(b)return b.top}return 0}function e(){var b=a.search().hash;return f(b)}function f(b){var e=!1,b=a.search().hash;if(b){var f='a[name="'+b+'"]',g=c.find(f);if(g&&g.length){var h=1,i=d($(c)),j=d(g)-i;0>j&&(j=0),$("body,html").animate({scrollTop:j},h),e=!0}}return e}function g(){var b=c.find("h1,h2,h3,h4,h5,h6,h7"),d=!1;angular.forEach(b,function(b){var c=$(b),e=c.parent("a");if(!e||!e.length){var g=c.text();if(g){var h=g.replace(/ /g,"-"),i="#"+a.path()+"?hash="+h,j=Core.createHref(a,i,["hash"]),k=$('<a name="'+h+'" href="'+j+'" ng-click="onLinkClick()"></a>');k.on("click",function(){setTimeout(function(){f(h)},50)}),k.insertBefore(c),c.detach(),k.append(c),d=!0}}}),d&&!i&&setTimeout(function(){e()&&(i=!0)},50)}function h(a){c.unbind("DOMNodeInserted",h),g(a),c.bind("DOMNodeInserted",h)}var i=!1;c.bind("DOMNodeInserted",h)}}}])}(Wiki||(Wiki={}));var Wiki;!function(a){a.TopLevelController=a._module.controller("Wiki.TopLevelController",["$scope","workspace",function(a,b){a.managerMBean=Fabric.managerMBean,a.clusterBootstrapManagerMBean=Fabric.clusterBootstrapManagerMBean,a.clusterManagerMBean=Fabric.clusterManagerMBean,a.openShiftFabricMBean=Fabric.openShiftFabricMBean,a.mqManagerMBean=Fabric.mqManagerMBean,a.healthMBean=Fabric.healthMBean,a.schemaLookupMBean=Fabric.schemaLookupMBean,a.gitMBean=Git.getGitMBean(b),a.configAdminMBean=Osgi.getHawtioConfigAdminMBean(b)}])}(Wiki||(Wiki={}));